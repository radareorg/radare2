[{"body":"## The issue\n\n- Names from the `symbols` flagspace get truncated to 130 characters.\n- Objective-C recovered names from the `classes` flagspace get truncated to 255 characters\n(I expect similar issues with flags recovered from other types of binaries, C++/Golang for example, and I presume it's because of fixed-size memory allocations).\n\n## Reproducing with symbols\n\nBelow is a very simple test program to reproduce the issue with symbols, compile this program:\n\n```c\n#include <stdio.h>\n#include <stdlib.h>\n\nunsigned int LoremipsumdolorsitametconsecteturadipiscingelitNuncmaximusnullalectusinegestasquamsagittisetNullaposuereaccumsaninterdumDonecsapiendiamultriciesquistempusidultricesinpurusSuspendisselaciniaexacmiimperdietvolutpatDonecultricesnullasitamettempuscongueDonecgravidaipsumvitaeconguevenenatissapiennullasol(int x)\n{\n  return (x + 42);\n}\n\nint main()\n{\n  printf(\"(rand() + 42) = %u\\n\", LoremipsumdolorsitametconsecteturadipiscingelitNuncmaximusnullalectusinegestasquamsagittisetNullaposuereaccumsaninterdumDonecsapiendiamultriciesquistempusidultricesinpurusSuspendisselaciniaexacmiimperdietvolutpatDonecultricesnullasitamettempuscongueDonecgravidaipsumvitaeconguevenenatissapiennullasol(rand()));\n}\n```\n\nLoad it in radare2, then, `fs symbols; f`\nIt should show something like:\n\n```\n0x00001169 22 sym.LoremipsumdolorsitametconsecteturadipiscingelitNuncmaximusnullalectusinegestasquamsagittisetNullaposuereaccumsaninterdumDonecs\n```\n\n130 characters in length\n\n## Objective-C\n\n```objc\n#import <Foundation/Foundation.h>\n#include <stdlib.h>\n\n@interface Test : NSObject\n\n- (int) LoremipsumdolorsitametconsecteturadipiscingelitNuncmaximusnullalectusinegestasquamsagittisetNullaposuereaccumsaninterdumDonecsapiendiamultriciesquistempusidultricesinpurusSuspendisselaciniaexacmiimperdietvolutpatDonecultricesnullasitamettempuscongueDonecgravidaipsumvitaeconguevenenatissapiennullasol: (int) x;\n\n@end\n\n@implementation Test\n\n- (int) LoremipsumdolorsitametconsecteturadipiscingelitNuncmaximusnullalectusinegestasquamsagittisetNullaposuereaccumsaninterdumDonecsapiendiamultriciesquistempusidultricesinpurusSuspendisselaciniaexacmiimperdietvolutpatDonecultricesnullasitamettempuscongueDonecgravidaipsumvitaeconguevenenatissapiennullasol: (int) x {\n  return x + 42;\n}\n\n@end\n\nint main()\n{\n  Test* x = [[Test alloc] init];\n\n  int y = [x LoremipsumdolorsitametconsecteturadipiscingelitNuncmaximusnullalectusinegestasquamsagittisetNullaposuereaccumsaninterdumDonecsapiendiamultriciesquistempusidultricesinpurusSuspendisselaciniaexacmiimperdietvolutpatDonecultricesnullasitamettempuscongueDonecgravidaipsumvitaeconguevenenatissapiennullasol: rand()];\n\n  NSLog(@\"rand() + 42 = %@\", @(y));\n}\n```\n\nLoad in radare2, then `fs classes; f`. It should show output like:\n\n```\n0x100000928 method.Test.LoremipsumdolorsitametconsecteturadipiscingelitNuncmaximusnullalectusinegestasquamsagittisetNullaposuereaccumsaninterdumDonecsapiendiamultriciesquistempusidultricesinpurusSuspendisselaciniaexacmiimperdietvolutpatDonecultricesnullasitamettempus\n```\n\nWhich is 255 characters in length.\n\nThe names in the JSON output (from `fj`) are also truncated.","comments":[{"id":"IC_kwDOAEpMrs69kVx8","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"see R_FLAG_NAME_SIZE  and https://github.com/radareorg/radare2/pull/24466 right now this is not configurable. would you like to have a config var for that or maybe we can just use 512 instead of 256 like it should be :?","createdAt":"2025-08-12T17:59:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24453#issuecomment-3180420220","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6--Inl","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"ping? can you try again with master?","createdAt":"2025-08-20T02:36:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24453#issuecomment-3203959269","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6_zc6k","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"do you think this limit should be configurable? Imho the issue has been solved by expanding the current limit. Maybe some tests would make it clear to understand its use. Can we please confirm the issue is solved in your side?","createdAt":"2025-08-24T08:24:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24453#issuecomment-3217936036","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6_1YH2","author":{"login":"red0xff"},"authorAssociation":"NONE","body":"512 would solve the issue for me. I encountered this while reverse-engineering a popular application (and, it's common to have long selector names with lots of arguments). I will test the change this week.\n\nHaving the setting configurable could probably help with other apps (I would not expect the reverse engineering framework I use to truncate symbols silently without a warning).\nLooking into the change, the macro `r_strf_var` declares the buffer of size R_FLAG_NAME_SIZE on the stack. If large sizes are expected, maybe it would make sense to allocate it on the heap (or, because the variable is ephemeral, allocate once before the loop, copy method names into it with a large-enough max size, and free it right after the loop). The other advantage is that, in case `snprintf` copies the maximum value, the code could `realloc()` the buffer to accomodate the flag it's about to truncate, and still get full-length flags.","createdAt":"2025-08-24T23:11:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24453#issuecomment-3218440694","viewerDidAuthor":false}],"number":24453,"title":"names from flagspaces get truncated"},{"body":"## Environment\n\n```sh\n# copypaste this script into your shell and replace it with the output\nThu Jul 31 02:40:10 AM EEST 2025\nradare2 5.9.9 33855 @ linux-x86-64\nbirth: git.5.9.8-876-gfa6b6d7f9d 2025-07-29__23:09:22\ncommit: fa6b6d7f9d37de2b8f73deab1d73a0f58f753bf4\noptions: gpl -O? cs:5 cl:2 make\nLinux x86_64\n```\n\n## Description\n\nWhen I press Ctrl-Delete, the current address before the input disappears, I cannot see what I type and am kicked out once I press enter. \nThen, in the terminal (XTerm(379) GNU bash, version 5.2.15(1)-release (x86_64-pc-linux-gnu)) I cannot see what I type.\nMysteriously, if I reenter r2, it works normally again but the terminal is broken until I restart it\n\n## Test\n\nJust open a file with r2 (I tested it with 32 bit PE2 if it matters), and hit Ctrl-Delete.","comments":[{"id":"IC_kwDOAEpMrs67FwbI","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"cant reproduce, can you run it with valgrind or do an asan build and paste the crashlog?","createdAt":"2025-07-31T07:27:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24442#issuecomment-3138848456","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs67OFhV","author":{"login":"rectrap"},"authorAssociation":"NONE","body":"I ran \"valgrind --leak-check=full --show-leak-kinds=all --track-origins=yes --log-file=log.log r2 myexe.exe\" and this is the output file. I think I ran oververbose. I am not familiar with the tool, so if you expect something else, tell me exactly what to run.\n\n[log.log](https://github.com/user-attachments/files/21536166/log.log)","createdAt":"2025-07-31T18:58:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24442#issuecomment-3141032021","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs67PAsm","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"No need for all the leak check flags. Running it without arguments is enough","createdAt":"2025-07-31T20:39:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24442#issuecomment-3141274406","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs67PBws","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"This log shows no crash","createdAt":"2025-07-31T20:41:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24442#issuecomment-3141278764","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs67YKf8","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Maybe thats kind of EOF? But the broken terminal tip confuses me","createdAt":"2025-08-01T08:14:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24442#issuecomment-3143673852","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs67fVX9","author":{"login":"rectrap"},"authorAssociation":"NONE","body":"I don't know about the broken terminal, but the exit from r2 is what frustrates me, I try to delete words and I am kicked out. I will try to reproduce it in a clean ubuntu vm to test if my configuration is wrong. ","createdAt":"2025-08-01T19:23:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24442#issuecomment-3145553405","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs67gzDv","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"So its not crashing then? It shouldnt close r2 obviously but a crash and closing is quite different behaviour. I can try to repro on another linux box but without a reproducer is hard to say","createdAt":"2025-08-01T22:42:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24442#issuecomment-3145937135","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs68KrKH","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"ping","createdAt":"2025-08-05T23:26:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24442#issuecomment-3156914823","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs68bigv","author":{"login":"rectrap"},"authorAssociation":"NONE","body":"I am on vacation, sorry my response time is quite slow.","createdAt":"2025-08-06T19:29:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24442#issuecomment-3161335855","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs68brdp","author":{"login":"rectrap"},"authorAssociation":"NONE","body":"I don't know if it technically is a crash or it exits normally. Let me send a screenshot series:\n\n----------------------------------------------------------\n---Screen 1---\nI open radare2 on a random file normally.\n\n<img width=\"781\" height=\"204\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/b4ed9840-9b83-42ba-aacf-8c9e95f20a70\" />\n\n---Screen 2---\nImmediately upon left-Ctrl+Delete keypress we switch to this. The change is immediate, like character deletion.\n\n<img width=\"829\" height=\"150\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/3985312c-7965-4e9e-af28-60cbb6e38f70\" />\n\nI mush the keyboard and nothing changes.\n\n---Screen3---\nUpon ENTER press, I exit to the terminal. \n\n<img width=\"774\" height=\"153\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/c615f779-bcb6-429f-b86a-c9fcc2eb7c34\" />\n\nIf I mush my keyboard, the screen remains unchanged, aka. characters not shown.\n\n-----------------------------------------------------------\n\nReturn value is 0.","createdAt":"2025-08-06T19:43:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24442#issuecomment-3161372521","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs68bsfx","author":{"login":"rectrap"},"authorAssociation":"NONE","body":"Oh, and when I Ctrl-D, exiting root into my user, the characters start being displayed (from that point forward). So the problem is in the Bash instance.","createdAt":"2025-08-06T19:44:49Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24442#issuecomment-3161376753","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs68dCSr","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Seems like this combination ends up closing the stdin fd which behaves like ^D (EOT). The fact that waits for enter to close feels like it can be handled somehow better in rcons. But without a local reproducer i cant say.. may be good to put some eprintfs in rcons_readchar in order to see which chars are entered and the code paths that are executed. Can you give it a try to dig into the code like this to fins out?","createdAt":"2025-08-06T21:48:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24442#issuecomment-3161728171","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs68dt8D","author":{"login":"rectrap"},"authorAssociation":"NONE","body":"Yes, I will. But don't expect a quick response, as I am abroad right now.","createdAt":"2025-08-06T23:26:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24442#issuecomment-3161906947","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6_r0NR","author":{"login":"rectrap"},"authorAssociation":"NONE","body":"Sorry, I am not familiar with the source code; I greped for \"rcons_readchar\" but found no results. Can you clarify what I should look for?","createdAt":"2025-08-22T23:22:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24442#issuecomment-3215934289","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6_r0X_","author":{"login":"rectrap"},"authorAssociation":"NONE","body":"Oh, I found r_cons_readchar. Got it.","createdAt":"2025-08-22T23:23:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24442#issuecomment-3215934975","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6_xw8e","author":{"login":"rectrap"},"authorAssociation":"NONE","body":"This may sound silly, but how do I build it? I tried \"./configure && make\" but it does not seem to work; the changes I make to the code have no effect. I run the executable in ./binr.\nI do not want a system wide or user wide installation as I already have radare2 installed.","createdAt":"2025-08-24T00:11:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24442#issuecomment-3217493790","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6_zdCq","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Use env.sh to set the ldlibrarypath","createdAt":"2025-08-24T08:25:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24442#issuecomment-3217936554","viewerDidAuthor":true}],"number":24442,"title":"Ctrl-Delete Crashes Radare"},{"body":"Virus detected: `Win32:MsfEncode-T [Hack] in libr_egg.6.0.0.dylib\n\nSection of Homebrew update:\n```\n==> Upgrading radare2\n  5.9.8 -> 6.0.0\n==> Pouring radare2--6.0.0.arm64_sequoia.bottle.tar.gz\nError: Failed to read Mach-O binary: /opt/homebrew/Cellar/radare2/6.0.0/lib/libr_egg.6.0.0.dylib\nError: Failed to read Mach-O binary: /opt/homebrew/Cellar/radare2/6.0.0/lib/libr_egg.6.0.0.dylib\nError: Failed to read Mach-O binary: /opt/homebrew/Cellar/radare2/6.0.0/lib/libr_egg.6.0.0.dylib\nðŸº  /opt/homebrew/Cellar/radare2/6.0.0: 826 files, 33.9MB\n==> Running `brew cleanup radare2`...\nRemoving: /opt/homebrew/Cellar/radare2/5.9.8... (811 files, 34.2MB)\n```\n\nThis is probably a false detect, but a bunch of Homebrew updates will break with the libvrary quarantined","comments":[{"id":"IC_kwDOAEpMrs67LYdZ","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"libegg actually contains shellcode encoders so yeah its like metasploit, but in C. Not sure why this should trigger any AV anyway. but would be good  to find a way to workaround that detection. this issue is not \"new\" i just obfuscated the encoders over time to bypass \"antiviruses\".maybe this can be reported to avast to remove that detection too. can you help on this?","createdAt":"2025-07-31T15:02:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24439#issuecomment-3140323161","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs67MKbz","author":{"login":"miltieIV2"},"authorAssociation":"NONE","body":"Yeah, I can download a package and see if Avast goes off again.\nFurther obfuscation will always fail eventually.\n\nOther Homebrew packages have been fixed over time. I had the most trouble with ngrok.","createdAt":"2025-07-31T16:07:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24439#issuecomment-3140527859","viewerDidAuthor":false}],"number":24439,"title":"macOS 15.5 with Avast installed detected infection of libegg during update to redare2 to 6.0.0"},{"body":"its actually mach-o but meh, better than a zero","comments":[],"number":24423,"title":"rename mach0 to macho"},{"body":"fits well in the io.va mode","comments":[],"number":24414,"title":"Add SEEK_HOLE"},{"body":"## Environment\n\n```sh\n# copypaste this script into your shell and replace it with the output\nThu Jun 19 17:29:35 UTC 2025\nradare2 5.9.9 34075 @ linux-x86-64\nbirth: git.5.9.8-756-gbe6a57690b 2025-06-19__16:48:34\ncommit: be6a57690b42ba4fa1b0906281288230904a7b8f\noptions: gpl -O? cs:5 cl:2 make\nLinux x86_64\n```\n\n## Description\n\nsometimes r- (truncating size of binary does not work) and when it works it will leak exponentially memory.\n>25GB in few seconds.\n\n## Test\n\nWith enough big file (> 36M):\n\nrun this:\n\nr- 304 @@s:0x0800 0x022b97a0 2048\n\nBeware, this will usually trigger OOM killer on Linux.\n\nThe command just removes 304 bytes and skips 2048 bytes, unitl it reaches end offset.","comments":[{"id":"IC_kwDOAEpMrs6yZ_HT","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Nice catch. Will chk asap but i pushed a pr adding early returns just in case that improves the situation. But i need to understand better the problem before pushing the right fix","createdAt":"2025-06-20T23:42:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24325#issuecomment-2993156563","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6ybDrx","author":{"login":"richardpl"},"authorAssociation":"CONTRIBUTOR","body":"It does not help with OOM and crash, error is probably also how EOF is handled.\nThe instruction should abort when EOF is reached, in above command I have not take into account that each iteration make file smaller and thus command as is will reach out of file somewhere in middle of iterations. The command works fine if I limit 'to' paramater to sane value (the one guaranteed to be always inside file/memory)","createdAt":"2025-06-21T07:44:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24325#issuecomment-2993437425","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6ybItq","author":{"login":"richardpl"},"authorAssociation":"CONTRIBUTOR","body":"Hmm, looks like checking EOF does not help, it still leaks memory a lot - in each iteration.","createdAt":"2025-06-21T08:23:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24325#issuecomment-2993458026","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6y5hXU","author":{"login":"richardpl"},"authorAssociation":"CONTRIBUTOR","body":"Now it aborts after first iteration, thus removes only first 304 bytes, but expected result is to continue removing 304 bytes and seeking 2048 forward until current EOF.","createdAt":"2025-06-24T18:05:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24325#issuecomment-3001423316","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6zIM8E","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"uhm im busy with other issues. can you give it a try to fix it? adding a test and base with the changes i made in [76ea049](https://github.com/kokizzu/radare2/commit/76ea049310eddb5b0cbffea79ff82a1bc4cda6d1)","createdAt":"2025-06-25T15:49:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24325#issuecomment-3005271812","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6zKTT8","author":{"login":"richardpl"},"authorAssociation":"CONTRIBUTOR","body":"Will try, I encountered numerous memory leaks, that was not present last time I work on r2, so that may slow down me even more.","createdAt":"2025-06-25T18:55:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24325#issuecomment-3005822204","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs60iODB","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i fixed some of them, feel free to submit prs fixing the rest if you have time and interest","createdAt":"2025-07-02T18:14:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24325#issuecomment-3028869313","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs62Rhfs","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i fixed many other memleaks. is there anything else anoying you to take a look at this?","createdAt":"2025-07-10T15:58:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24325#issuecomment-3058046956","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs62RjeV","author":{"login":"richardpl"},"authorAssociation":"CONTRIBUTOR","body":"I was busy with other projects, i might look it if time permits soon.","createdAt":"2025-07-10T16:01:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24325#issuecomment-3058055061","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs62R5la","author":{"login":"richardpl"},"authorAssociation":"CONTRIBUTOR","body":"I still see gross leaks, just for using V mode and scrolling in hex view up/down few times and then exiting - nothing complicated or useful.","createdAt":"2025-07-10T16:30:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24325#issuecomment-3058145626","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs62orIp","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Oh i didnt tried this workflow. Can you take a look at them? Ill have some spare time next week otherwise","createdAt":"2025-07-11T22:52:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24325#issuecomment-3064115753","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs66zsAi","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"ping? i cant repro","createdAt":"2025-07-29T21:20:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24325#issuecomment-3134111778","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs660D99","author":{"login":"richardpl"},"authorAssociation":"CONTRIBUTOR","body":"It still removes only in first iteration and immediately aborts more iterations processing.\n\n``r-64 @@s:0x80 0x8000 0x100``\n\nWhat have you tested that works?","createdAt":"2025-07-29T22:07:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24325#issuecomment-3134209917","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs661b-e","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I was refering to the memory leaks sorry.","createdAt":"2025-07-30T01:19:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24325#issuecomment-3134570398","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs663isS","author":{"login":"richardpl"},"authorAssociation":"CONTRIBUTOR","body":"That have been either resolved (so not that gross) or completely masked by early exit in first iteration cycle.","createdAt":"2025-07-30T07:12:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24325#issuecomment-3135122194","viewerDidAuthor":false}],"number":24325,"title":"Out of memory when using r- command with seeking"},{"body":"## Environment\n\nTue Jun 10 17:37:37 CEST 2025\n\nradare2 5.9.9 33661 @ freebsd-x86-32\nbirth: git.5.9.8-706-g7c8382cfdd 2025-06-09__20:56:46\ncommit: 7c8382cfdd3b992104c4de9d6446edf2cc531017\noptions: gpl -O? cs:5 cl:2 make\n\nFreeBSD amd64\n\n## Description\n\nDoesn't display the correct write access for variable \"w\"\n; DATA XREF from fcn.00201175 @ 0x201175(r) Should be -> ; DATA XREF from fcn.00201175 @ 0x201175(w)\n\n## Test\n\nTest program :  https://github.com/rolio37/radare2_bug/blob/main/test_mem\n\n![Image](https://github.com/user-attachments/assets/c5a25c7b-2fc9-4984-aa6d-1a637a2714f5)\n","comments":[{"id":"IC_kwDOAEpMrs6wa_s0","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Totally expected. The var analysis code needs to be fully rewritten. Im just waiting for @condret to finish the esil rewrite to be able to do that two times","createdAt":"2025-06-10T16:07:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24274#issuecomment-2959866676","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6wbXoU","author":{"login":"rolio37"},"authorAssociation":"CONTRIBUTOR","body":"Great news, looking forward to seeing these improvements, thanks for the feedback.","createdAt":"2025-06-10T16:44:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24274#issuecomment-2959964692","viewerDidAuthor":false}],"number":24274,"title":"Shows the wrong variable access for the DATA XREF"},{"body":"## Description\n\nThere are some differences for the comments between intel and att modes (see below)\n\nIntel\n\n![Image](https://github.com/user-attachments/assets/7a65b886-e9a0-46b0-bb5c-5ac92b828692)\n\nAT&T\n\n![Image](https://github.com/user-attachments/assets/0ed3363f-1d15-486e-8578-a30b511582c9)\n\n\nI have also found some problems in coloring in att mode.\nFor example\n\n`mov $0,%rax`\nwill not color the 0 (it seems to work properly with other values)\nsee the last line on the picture.\n\nAs for theming, I don't know how are handled the `$` for integers and the `%` for registers. I didn't see anything for the prefix % but I don't know where to look in the sources.\nI would be nice to have a special color for the register prefix in theming, but maybe I should create a feature request for this? \n\nRegards,","comments":[{"id":"IC_kwDOAEpMrs6q7pKl","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"See the r_print_colorize_opcode function","createdAt":"2025-05-09T20:01:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/radareorg/radare2/issues/24192#issuecomment-2867761829","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6rEXTv","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i did some initial work for you to finish the implementation and add tests in https://github.com/radareorg/radare2/pull/24202\n\nmy workflow is like that:\n\n* open one terminal: run  a testcase in loop like this:\n\n`while : ; do r2 -q -e asm.syntax=att -c 'pd 3 @ 0x00005ba8' test/bins/elf/ls ; sleep 1 ; done`\n\n* in another terminal i do: cd libr/util ; vim print.c ... then edit the code and type make to see the updated output.\n\nthe patch i did fixes the colorization for registers and numbers,.. exceeeeeet when the number is $0, this code is a little hacky, so i think it will be better to refactor it properly and add tests with scr.color=1. these are the instructions i found useful:\n\n\n```\n0x00005bad      c60514c7010001         movb $1, 0x000222c8\n0x00005bb4      5d                     popq %rbp\n0x00005b84      803d3dc7010000         cmpb $0, 0x000222c8 ; $0 issue\n0x00005b70      ffe0                   jmpq *%rax\n0x00005b72      660f1f440000           nopw (%rax, %rax)\n0x00005b58      48c1e83f               shrq $0x3f, %rax\n```\n\nif you like i can merge my PR which is a partial solution and then you can finish the patch and add tests!\n\nhope that helps you get more handy into the r2dev world","createdAt":"2025-05-11T18:49:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24192#issuecomment-2870047983","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6rLbxx","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"also i agree that the default color theme should use a different color for flags/varnames than regs, what do you think about this change? using green for the regs\n\n<img width=\"383\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/d5d07c7b-fb73-450a-81b2-c05d34cabacc\" />","createdAt":"2025-05-12T10:08:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24192#issuecomment-2871901297","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6rLdYa","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"and maybe yellow for addreses to match imm and prompt color is something ive been evaluating for some time ..\n\n<img width=\"921\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/340dcaf1-64f7-407b-b493-48ada4bff72a\" />","createdAt":"2025-05-12T10:10:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24192#issuecomment-2871907866","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6rMUOE","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"ive applied the changes to master, fied the $0 corner case, also changed the color theme in https://github.com/radareorg/radare2/pull/24204\n\nis there anything else im missing here? you can still submit tests, improve the code quality of that colorization function\n\nthanks for reporting and the will to contribute!","createdAt":"2025-05-12T11:16:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24192#issuecomment-2872132484","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6u9oue","author":{"login":"l0kh"},"authorAssociation":"CONTRIBUTOR","body":"The imm $xxx wasn't working in att mode so I patched it.\nI put the interesting stuff in the '$' case, and removed it form the if statements at the beginning of the function.\nHere is the diff:\n\n``` sh\n$ diff libr/util/print.c.orig libr/util/print.c \n2349,2357c2349\n<               if (i > 0 && p[i - 1] == ' ' && (p[i] == '$')) {\n<                       if (p[i + 1] == '0') {\n<                               snprintf (o + j, COLORIZE_BUFSIZE - j, \"%s$0\", num);\n<                       } else {\n<                               snprintf (o + j, COLORIZE_BUFSIZE - j, \"%s$\", num);\n<                       }\n<                       i += strlen (o + j);\n<                       j += strlen (o + j);\n<               } else if (i > 0 && p[i - 1] == ' ' && (p[i] == '0' && p[i + 1] == 0)) {\n---\n>               if (i > 0 && p[i - 1] == ' ' && (p[i] == '0' && p[i + 1] == 0)) {\n2370c2362\n<                    || (p[i] == '$' || (isdigit (p[i] & 0xff) && issymbol (previous)))) {\n---\n>                    || (isdigit (p[i] & 0xff) && issymbol (previous))) {\n2409a2402,2404\n>                       snprintf (o + j, COLORIZE_BUFSIZE - j, \"%s$\", num);\n>                       j += strlen (o + j);\n>                       i++;\n```\n","createdAt":"2025-06-03T13:58:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24192#issuecomment-2935393182","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6u9q4c","author":{"login":"l0kh"},"authorAssociation":"CONTRIBUTOR","body":"I added a canary to your test (segments), and I extended the nopw to an indexed array with an offset:\n``` asm\n   movb $1, 0x000222c8\n   pop %rbp\n   mov  %gs:0x14,%rax\n   mov  %rax,-0x8(%rbp)\n   cmpb $0, 0x000222c8\n   add -0x43(%rbx, %rcx, 4), %rax\n   shr $0x3f, %rax\n   jmp *%rax\n```\n\nSorry for the delay\n","createdAt":"2025-06-03T14:00:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24192#issuecomment-2935402012","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6vB1pk","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Please submit a PR instead of a raw patch in here","createdAt":"2025-06-03T17:50:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24192#issuecomment-2936494692","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6wZSKX","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"did your last patch fixed the remaining issues?","createdAt":"2025-06-10T14:11:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24192#issuecomment-2959418007","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6wqQ-y","author":{"login":"l0kh"},"authorAssociation":"CONTRIBUTOR","body":"No, unfortunatly the original issue is still there. The analyze (comments) is not good in att mode:\n\nintel\n```\n0x000013e1      mov eax, dword [var_8h]\n0x000013e4      cdqe\n0x000013e6      lea rdx, obj.a93rEUcvwf4Ec9KHKqzFx7wL      ; 0x40e0 ; \"P|aavpg23J|f4ev3u|f}w3g{v3u\\x7frt2\\x13\"\n0x000013ed      movzx eax, byte [rax + rdx]\n0x000013f1      xor eax, 0x13\n0x000013f4      mov ecx, eax\n0x000013f6      mov eax, dword [var_8h]\n0x000013f9      cdqe\n0x000013fb      lea rdx, obj.a93rEUcvwf4Ec9KHKqzFx7wL      ; 0x40e0 ; \"P|aavpg23J|f4ev3u|f}w3g{v3u\\x7frt2\\x13\"\n0x00001402      mov byte [rax + rdx], cl\n0x00001405      add dword [var_8h], 1\n ; CODE XREF from main @ 0x13df(x)\n0x00001409      cmp dword [var_8h], 0x4f                   ; 'O'\n```\n\natt\n```\n0x000013aa      movl var_ch, %eax\n0x000013ad      cltq\n0x000013af      leaq obj.VYeXkgjLLMrczyw7i7dJPkyAbxqgCahe, %rdx ; arg3\n0x000013b6      movzbl (%rax, %rdx), %eax\n0x000013ba      xorl $0x42, %eax\n0x000013bd      movl %eax, %ecx                            ; arg4\n0x000013bf      movl var_ch, %eax\n0x000013c2      cltq\n0x000013c4      leaq obj.VYeXkgjLLMrczyw7i7dJPkyAbxqgCahe, %rdx ; arg3\n0x000013cb      movb %cl, (%rax, %rdx)\n0x000013ce      addl $1, var_ch\n; CODE XREF from main @ 0x13a8(x)\n0x000013d2      cmpl $0x4f, var_ch                         ; 'O'\n```\n\nThe arg3 and arg4 are totally false as ecx and rdx are the destination of the mov.\nMaybe the analyze still expect dst, src operands in att (instead of src, dst)?\n","createdAt":"2025-06-11T19:03:17Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24192#issuecomment-2963869618","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6wsbE4","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"What do you mean by arg3,4?","createdAt":"2025-06-11T22:19:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24192#issuecomment-2964435256","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6w5m0W","author":{"login":"l0kh"},"authorAssociation":"CONTRIBUTOR","body":"Here is the definition of main in intel/att modes: (sorry I didn't saw that problem)\n```\n# intel\nint main (int argc, char **argv, char **envp);\nafv: vars(3:sp[0xc..0x14])\n\n# att\nint main (char **envp, int64_t arg3, int64_t arg4);\n- args(rdi, rdx, rcx) vars(3:sp[0x4..0xc])\n```\n","createdAt":"2025-06-12T19:14:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24192#issuecomment-2967891222","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6w7v9A","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Guess thats unrelated to the color highlighting and more related to the awful gsoc code that implemented the var analysis and type propagation. I plan to rewrite all this but first i need to finish other refactorings to set the base for other stuff","createdAt":"2025-06-12T23:42:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24192#issuecomment-2968452928","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6xGKAz","author":{"login":"l0kh"},"authorAssociation":"CONTRIBUTOR","body":"No problem, good luck ;)\n","createdAt":"2025-06-13T18:16:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24192#issuecomment-2971181107","viewerDidAuthor":false}],"number":24192,"title":"Comments and color problems in AT&T mode"},{"body":"## Environment\nradare2 5.9.9\nlinux  aarch64\n# The following is an example\n//test.c\n#include<stdlib.h>\n#include<stdio.h>\n\nint main(void){\n  float x =1.1f, y = 1.1f, z;\n  z = x+y;\n  return 0;\n}\n\n\ngcc test.c -o test\n>r2 -AA -d test\n>db main\n>dc\n\n//Use the S command to bring the PC register to the current position\nâ”Œ 64: int main (int64_t argc);                                                                                                                                                                                      \nâ”‚           ; arg int64_t argc @ sp+0x20                                                                                                                                                                            \nâ”‚           ; var int64_t var_4h @ sp+0x4                                                                                                                                                                           \nâ”‚           ; var int64_t var_8h @ sp+0x8                                                                                                                                                                           \nâ”‚            b    ff4300d1       sub sp, sp, 0x10                                                                                                                                                       \nâ”‚                 a0999952       mov w0, 0xcccd                                                                                                                                                         \nâ”‚                 80f1a772       movk w0, 0x3f8c, lsl 16                                                                                                                                                \nâ”‚                 0000271e       fmov s0, w0                                                                                                                                                            \nâ”‚                 e00700bd       str s0, [sp, 4]                                                                                                                                                        \nâ”‚                 a0999952       mov w0, 0xcccd                                                                                                                                                         \nâ”‚                 80f1a772       movk w0, 0x3f8c, lsl 16                                                                                                                                                \nâ”‚                 0000271e       fmov s0, w0                                                                                                                                                            \nâ”‚                 e00b00bd       str s0, [sp, 8]                                                                                                                                                        \nâ”‚                 e10740bd       ldr s1, [var_4h]                                                                                                                                                       \nâ”‚                 e00b40bd       ldr s0, [var_8h]                                                                                                                                                       \nâ”‚           ;-- pc:                                                                                                                                                                                                 \nâ”‚                 2028201e       fadd s0, s1, s0 \n\n>dr\n//The output is as follows\n//...\n//d0=0x3f8ccccd\n//d1=0x7ff3cbffff   \n//...\n\n## Description\nThe output is wrong.\n![Image](https://github.com/user-attachments/assets/90587a27-82ca-44a1-bb68-116d1411a368)\n\n## Test\n\n<!-- Steps to reproduce the issue and provide files/links/images/.. -->\n","comments":[{"id":"IC_kwDOAEpMrs6t43d0","author":{"login":"koyaan"},"authorAssociation":"CONTRIBUTOR","body":"This _might_ be  easily fixable by defining these registers in https://github.com/radareorg/radare2/blob/master/libr/debug/p/native/linux/reg/linux-arm64.h","createdAt":"2025-05-28T19:17:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24186#issuecomment-2917365620","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6wZSvW","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"anybody wanna do that?","createdAt":"2025-06-10T14:11:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24186#issuecomment-2959420374","viewerDidAuthor":true}],"number":24186,"title":"Cannot print the values in the floating-point registers  while debugging AARCH64"},{"body":"## Description\nHello.\nI just want to suggest good default panels. It may be very convenient for debugging.\nThis would make it a little easier for new users to get started, since not everyone is good with commands.\n\n![Image](https://github.com/user-attachments/assets/6a2474e1-5438-4509-970c-81f5a75d0917)\n","comments":[{"id":"IC_kwDOAEpMrs6qANE8","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"[layout-x86.json](https://github.com/user-attachments/files/20047246/layout-x86.json)\n\n[layout-x86_x64.json](https://github.com/user-attachments/files/20047263/layout-x86_x64.json)","createdAt":"2025-05-05T19:53:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24179#issuecomment-2852180284","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6qG19D","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"the problem with those layouts is that they work well on large terminals. so it's not good to ship them by default, but we can distribute them and make them available from the panels menus. can you make a PR with that?","createdAt":"2025-05-06T09:43:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24179#issuecomment-2853920579","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6qNb-3","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"Yes. I dont mean default, I mean one more additional built-in in r2.\nHow can I make PR? Where is located layout files?","createdAt":"2025-05-06T19:14:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24179#issuecomment-2855649207","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6woJL6","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"they are saved in user's home. and same goes for loading, so i just tweaked the panels.c to honor a system path. can you test and make a PR to add your panel layouts in the default installations for make and meson?\n\nrelated pr: https://github.com/radareorg/radare2/pull/24279\n\nsystem path is /usr/local/share/radare2/5.9.9/panels/\n\nthe prefix and version can be different obv. ","createdAt":"2025-06-11T15:38:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24179#issuecomment-2963313402","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6xTh4-","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"https://github.com/radareorg/radare2/pull/24296. I've done it just for Make, with meson I am afraid of mistakes.\nI've tested - panels appear in /usr/local/share/radare2/5.9.9/panels/ but I cant find them in r2 panel interface.\n","createdAt":"2025-06-15T20:52:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24179#issuecomment-2974686782","viewerDidAuthor":false}],"number":24179,"title":"more default panels"},{"body":"## Environment\nAndroid 15 aarch64 + Termux 0.119.0-beta.1\n$ r2 -v\nradare2 5.9.8 0 @ linux-arm-64\nbirth: git.5.9.8 2024-11-19__12:16:54\ncommit: 5.9.8\noptions: gpl release -O1 cs:5 cl:2 make\n$ uname -ms\nLinux aarch64\n\nWindows 10 amd64\n$ r2 -v\nradare2 5.9.8 1 @ windows-x86-64\nbirth: git.5.9.8 Tue 11/19/2024_11:46:03.42\ncommit: 4eb49d5ad8c99eaecc8850a2f10bad407067c898\noptions: gpl -O? cs:5 cl:1 meson\n\n## Description\nTried to analyze minecraft Bedrock Edition server software Linux amd64 but on aarch64 on Android I always get sigmentation fault or Aborted.\n\nTried analyze on the amd64 and it succeed.\n\nExpected: successful analyze\n\nBoth have 16 gb of Ram & enough storage.\n\n## Test\nDownload https://www.minecraft.net/en-us/download/server/bedrock\nrun `r2 -e bin.relocs.apply=true bedrock_server`\nIn radare2 run `aaa` or `aac`","comments":[{"id":"IC_kwDOAEpMrs6mEDPG","author":{"login":"VinkyV"},"authorAssociation":"NONE","body":"Windows 10 max memory usage not exceeded 8GB during the entire analysis.\nWhen the Android 15 exceeded 10GB on `aac` step and was killed.","createdAt":"2025-04-08T11:10:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24122#issuecomment-2786079686","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6mEnfm","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Try r2 from git. Last release is quite old","createdAt":"2025-04-08T12:10:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24122#issuecomment-2786228198","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6mFM1x","author":{"login":"VinkyV"},"authorAssociation":"NONE","body":"~/downloads $ r2 -e bin.relocs.apply=true bedrock_server\n           -- Remember to maintain your ~/.radare_history                   \n[0x03307280]> aac                                                 \nAborted                                                           \n~/downloads $ r2 -v                                               \nradare2 5.9.9 33579 @ linux-arm-32                                \nbirth: git.5.9.8-551-g1a3cdec82e 2025-04-08__15:54:55             \ncommit: 1a3cdec82ea0fa85da35ee06342fcf024ce3d506                  \noptions: gpl -O? cs:5 cl:2 make\n\nAnd sys/install.sh installed me an arm-32 version instead of arm-64","createdAt":"2025-04-08T13:07:17Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24122#issuecomment-2786381169","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6mGU9b","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"its a 200MB executable, is quite normal that the analysis takes a lot of memory. also, considering that you are analyzing the 32 bit its more than normal that memory consumption can explode quickly. i would recommend you to analyze the arm64 binary instead. in my linux box this takes 4GB of ram only. and i see nothing strange with heaptrack.\n\nthe reason for the crash in your linux-arm32 is probably because you are using debian which have a very restrictive memory layout and kernel configuration that kills any process that takes a lot of memory. \n\nis your system supporting both arm32/arm64 ? thats weird, can you show me the output of uname -a?.","createdAt":"2025-04-08T14:38:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24122#issuecomment-2786676571","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6mH-8S","author":{"login":"VinkyV"},"authorAssociation":"NONE","body":"> its a 200MB executable, is quite normal that the analysis takes a lot of memory. also, considering that you are analyzing the 32 bit its more than normal that memory consumption can explode quickly. i would recommend you to analyze the arm64 binary instead. in my linux box this takes 4GB of ram only. and i see nothing strange with heaptrack.\n\nIm trying analyze x86 binary I mean strange that radare2 on my windows machine eating lower than 8 GB but when I am trying analyze the same binary it's slowly consuming more more and more after reaching almost 12 gb of ram it will be killed also android extended ram not helps.\nIt's only on termux build.\n\n> the reason for the crash in your linux-arm32 is probably because you are using debian which have a very restrictive memory layout and kernel configuration that kills any process that takes a lot of memory.\n\nIt's crashing on both linux-arm-64 & 32 I just builded radare2 from scratch and somehow it builded and installed 32 bit version. And it's android not Debian, and I don't see any restriction in memory layout cuz 4 gb eaten by my system and 12gb by radare2.\n\n> is your system supporting both arm32/arm64 ? thats weird, can you show me the output of uname -a?.\n\n~/radare2 $ uname -a                                              \n```\nLinux localhost 6.6.30-android15-8-g54dcbfbef792-ab12368803-4k #1 SMP PREEMPT Fri Sep 13 17:41:25 UTC 2024 aarch64 Android\n```","createdAt":"2025-04-08T17:00:27Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24122#issuecomment-2787110674","viewerDidAuthor":false}],"number":24122,"title":"Termux arm64 memory leak or too high memory usage"},{"body":"\nI want to use r2 on android but I cannot find the android arm-v7 or v8 right now. How should I download it? I didn't find it in the built product. I saw a static compression package, but I found out that it was of the x86 architecture","comments":[{"id":"IC_kwDOAEpMrs6kHqvQ","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"did u checked the [radare2-5.9.8-android-arm.tar.gz](https://github.com/radareorg/radare2/releases/download/5.9.8/radare2-5.9.8-android-arm.tar.gz) from the release page?\n\n```\n$ file *\nr2:      ELF 32-bit LSB shared object, ARM, EABI5 version 1 (SYSV), dynamically linked, interpreter /system/bin/linker, with debug_info, not stripped\n```","createdAt":"2025-03-26T07:34:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24090#issuecomment-2753473488","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6kHxnv","author":{"login":"w296488320"},"authorAssociation":"NONE","body":"I have checked this compression package with only so files and what I am needing is am-v7 and am-v8. A Static library file and not a dynamic library file because I need to use this static library inside the code. Go to parse some so files.\n\nI tried to compile r2 but failed and didn t produce what I needed. A file, if possible, can be added to the package [radare2-5.9.8-android-arm.tar.gz]. A file? I really need him. Thank you, the great developers.","createdAt":"2025-03-26T07:49:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24090#issuecomment-2753501679","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6kKWyx","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"check the sys/android.sh script? this is building a static compilation of everything but you can just pick the non-static target and it should work","createdAt":"2025-03-26T12:04:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24090#issuecomment-2754178225","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6kSbQ4","author":{"login":"w296488320"},"authorAssociation":"NONE","body":"CC set.c\nCC diff.c\nCC heap.c\nCC main.c\nAR libsdb.a\nar: creating libsdb.a\nBIN sdb\n../subprojects/sdb/sdb: Mach-O 64-bit executable arm64\n\n>>>>>>>>>>\nTARGET SDB\n>>>>>>>>>>\n\nCC cdb.c\nCC cdb_make.c\nmake[5]: ndk-gcc: No such file or directory\nCC ls.c\nCC ht.c\nmake[5]: ndk-gcc: No such file or directory\nmake[5]: ndk-gcc: No such file or directory\nmake[5]: ndk-gcc: No such file or directory\nmake[5]: *** [ht.o] Error 1\nmake[5]: *** Waiting for unfinished jobs....\nmake[5]: *** [cdb.o] Error 1\nmake[5]: *** [ls.o] Error 1\nmake[5]: *** [cdb_make.o] Error 1\nmake[4]: *** [sdb_objs] Error 2\nmake[3]: *** [sdb-target] Error 2\nmake[2]: *** [../subprojects/sdb/src/libsdb.a] Error 2\nmake[1]: *** [sdbs] Error 2\nmake: *** [all] Error 2\nlocalhost:sys didi$ \n\n\nI tried to compile using the NDK.\n```\nexport NDK=/Users/didi/Library/Android/sdk/ndk/17.2.4988734\nexport ANDROID_API=21\n./sys/android-build.sh arm-static\n```\nAfter setting the corresponding parameters, the compilation discovery prompted me that ndk-gcc cannot find it. Now the latest version of NDK should have no gcc compiler, which should be clean. How should I fix it?\n","createdAt":"2025-03-27T02:22:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24090#issuecomment-2756293688","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6lPgaU","author":{"login":"w296488320"},"authorAssociation":"NONE","body":"```\nvoid TestR2()   {\n    LOGE(\"TestR2 start -----\\n\");\n    // åˆå§‹åŒ– Radare2 æ ¸å¿ƒ\n    auto core = r_core_new();\n    if (!core) {\n        LOGE(\"Failed to create RCore\\n\");\n        return;\n    }\n    LOGE(\"TestR2 111111 %s\",getlibArtPath().c_str());\n\n    // æ‰“å¼€ .so æ–‡ä»¶\n    auto bf = r_core_file_open(core, getlibArtPath().c_str(), R_PERM_R, 0);\n    if (!bf) {\n        LOGE(\"Failed to open file: %s\\n\", getlibArtPath().c_str());\n        r_core_free(core);\n        return;\n    }\n    LOGE(\"TestR2 22222222\\n\");\n\n    // èŽ·å–æž¶æž„ä¿¡æ¯å¹¶è®¾ç½®\n    auto info = r_bin_get_info(core->bin);\n    if (info) {\n        r_config_set(core->config, \"asm.arch\", info->arch);\n        r_config_set_i(core->config, \"asm.bits\", info->bits);\n        LOGE(\"Architecture: %s, Bits: %d\\n\", info->arch, info->bits);\n    } else {\n        LOGE(\"Failed to get binary info, using default ARM 32\\n\");\n        r_config_set(core->config, \"asm.arch\", \"arm\");\n        r_config_set_i(core->config, \"asm.bits\", 32);\n    }\n    LOGE(\"TestR2 33333333333\\n\");\n\n    // æ‰§è¡Œè‡ªåŠ¨åˆ†æž\n    r_core_cmd0(core, \"aaa\");  // å…¨é¢åˆ†æž\n    LOGE(\"TestR2 4444444444\\n\");\n    // èŽ·å–å‡½æ•°åˆ—è¡¨\n    char *funcList = r_core_cmd_str(core, \"afl\");  // \"afl\" åˆ—å‡ºæ‰€æœ‰å‡½æ•°\n    if (!funcList) {\n        LOGE(\"Failed to get function list\\n\");\n        r_io_close(core->io);\n        r_core_free(core);\n        return;\n    }\n    LOGE(\"TestR2 555555555 %s \",funcList);\n    std::string funcStr(funcList);\n    std::istringstream iss(funcStr);\n    std::string line;\n    while (std::getline(iss, line)) {\n        // è·³è¿‡ç©ºè¡Œå’Œæ ‡é¢˜è¡Œ\n        if (line.empty() || line.find(\"address\") != std::string::npos) {\n            continue;\n        }\n        // è§£æžæ¯è¡Œå‡½æ•°ä¿¡æ¯ï¼Œæ ¼å¼é€šå¸¸ä¸º: address size name\n        std::istringstream lineStream(line);\n        std::string address, size, name;\n        lineStream >> address >> size >> name;\n        if (!name.empty()) {\n            LOGE(\"Function: %s, Address: %s, Size: %s\\n\", name.c_str(), address.c_str(), size.c_str());\n        }\n    }\n    // æ¸…ç†èµ„æº\n    r_io_close(core->io);\n    r_core_free(core);\n    LOGE(\"TestR2 end -----\\n\");\n}\n```\nI want to implement a basic function to walk through all the so file all the function offset, this so file may be unsigned, what is wrong with my code? I am learning the r2\n","createdAt":"2025-04-02T11:45:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24090#issuecomment-2772305556","viewerDidAuthor":false}],"number":24090,"title":"how to get arm-v7 & v8 static lib ?"},{"body":"## Environment\n\nWindows 11 vm\n\n## Description\n\nWhen installing plugins, some installations are running without an error, others throw errors. After a successful installation the plugin cannot be used unfortunately.\n\nThis is true for a precompiled set of binaries as well as for a fresh built installation:\n\nExample for a working installation but where the invocation fails:\n```\n(venv) C:\\Users\\vboxuser\\Desktop\\radare2_compiled\\prefix\\bin>r2pm -ci r2ai\nINFO: Cleaning r2ai\nINFO: Using r2-5.9.9 and r2pm-5.9.9\nINFO: Cleaning r2ai\nINFO: git clone --depth=1 --recursive https://github.com/radareorg/r2ai C:\\Users\\vboxuser\\.local\\share\\radare2\\r2pm/git\\r2ai\nCloning into 'C:\\Users\\vboxuser\\.local\\share\\radare2\\r2pm/git\\r2ai'...\nremote: Enumerating objects: 163, done.\nremote: Counting objects: 100% (163/163), done.\nremote: Compressing objects: 100% (150/150), done.\nremote: Total 163 (delta 8), reused 97 (delta 3), pack-reused 0 (from 0)\nReceiving objects: 100% (163/163), 2.15 MiB | 5.51 MiB/s, done.\nResolving deltas: 100% (8/8), done.\nINFO: Starting install for r2ai\n\n\n(venv) C:\\Users\\vboxuser\\Desktop\\radare2_compiled\\prefix\\bin>r2pm -r r2ai\nThe command \"r2ai\" is either misspelled or could not be found\n```\n\nExample where even the plugin installation fails:\n```\n(venv) C:\\Users\\vboxuser\\Desktop\\radare2_compiled\\prefix\\bin>r2pm -ci decai\nINFO: Cleaning decai\nINFO: Using r2-5.9.9 and r2pm-5.9.9\nINFO: Cleaning decai\nINFO: git clone --depth=1 --recursive https://github.com/radareorg/r2ai C:\\Users\\vboxuser\\.local\\share\\radare2\\r2pm/git\\decai\nCloning into 'C:\\Users\\vboxuser\\.local\\share\\radare2\\r2pm/git\\decai'...\nremote: Enumerating objects: 163, done.\nremote: Counting objects: 100% (163/163), done.\nremote: Compressing objects: 100% (150/150), done.\nremote: Total 163 (delta 8), reused 97 (delta 3), pack-reused 0 (from 0)\nReceiving objects: 100% (163/163), 2.15 MiB | 5.48 MiB/s, done.\nResolving deltas: 100% (8/8), done.\nINFO: Starting install for decai\nERROR: This package does not have R2PM_INSTALL_WINDOWS instructions\n```\n","comments":[{"id":"IC_kwDOAEpMrs6ivwFa","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"you can copy the script into the plugin directory by hand. but the script should add the rule for install_windows to work in windows. can you give it a try by modifying the file and sending a PR?","createdAt":"2025-03-17T18:05:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24074#issuecomment-2730426714","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6i1E9a","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Let me rephrase it. This is a problem related to the packages itself and not to r2pm. It will be good that the most used packages are supported on windows by having the target script. \n\nWould you like to edit those packages and write those batch scripts?\n\nHeres an example: https://github.com/radareorg/radare2-pm/blob/master/db/r2frida","createdAt":"2025-03-18T06:28:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24074#issuecomment-2731822938","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6i1Fbk","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I agree that r2pm may stop earlier and not clone a repo if the pkg doesnt contain the windows scripts. This is something I can fix in here","createdAt":"2025-03-18T06:30:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24074#issuecomment-2731824868","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6i5G6_","author":{"login":"stevenengland"},"authorAssociation":"NONE","body":"Okay, thanks for further explanation. I cannot promise anything but I will have a look. This is all related to the decai example from above, correct?\n\n\nI will also have a look for the other case where the installation succeeds but then the plugin cannot be called. Like it is illustrated above for the r2ai plugin. ","createdAt":"2025-03-18T11:34:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24074#issuecomment-2732879551","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6jJGOb","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i just did the windows scripts for decai, but i have no windows/time to test it, give it a try and let me know if it works now","createdAt":"2025-03-19T15:28:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24074#issuecomment-2737071003","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6jJXkH","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"also this https://github.com/radareorg/radare2/commit/4787cbf46a91481dc6e6bdbabbbb00948d28a3a3","createdAt":"2025-03-19T15:47:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24074#issuecomment-2737142023","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6jMSQ8","author":{"login":"stevenengland"},"authorAssociation":"NONE","body":"> i just did the windows scripts for decai, but i have no windows/time to test it, give it a try and let me know if it works now\n\nHi, sorry to say that this seems to be not yet fixed (or maybe I do not understand it). The update recognized a change for the decai plugin but the installation failed.\n\n```\nPS C:\\Users\\vboxuser\\Desktop\\radare2_compiled> r2pm -U\nINFO: Running git pull on C:\\Users\\vboxuser\\.local\\share\\radare2\\r2pm/git/radare2-pm\nremote: Enumerating objects: 7, done.\nremote: Counting objects: 100% (7/7), done.\nremote: Compressing objects: 100% (2/2), done.\nremote: Total 4 (delta 2), reused 4 (delta 2), pack-reused 0 (from 0)\nUnpacking objects: 100% (4/4), 526 bytes | 35.00 KiB/s, done.\nFrom https://github.com/radareorg/radare2-pm\n   6215b70..40899cd  master     -> origin/master\nUpdating 6215b70..40899cd\nFast-forward\n db/decai | 11 ++++++++++-\n 1 file changed, 10 insertions(+), 1 deletion(-)\nPS C:\\Users\\vboxuser\\Desktop\\radare2_compiled> r2pm -ci decai\nINFO: Cleaning decai\nINFO: Using r2-5.9.9 and r2pm-5.9.9\nINFO: Cleaning decai\nfatal: not a git repository (or any of the parent directories): .git\nINFO: Starting install for decai\nINFO: R2PM_NEEDS: Found curl in PATH\nERROR: This package does not have R2PM_INSTALL_WINDOWS instructions\n```","createdAt":"2025-03-19T19:43:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24074#issuecomment-2737906748","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6jMfUg","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Do you have curl installed? If so i guess we need to fix the function that walks the PATH env var for windows environments","createdAt":"2025-03-19T20:01:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24074#issuecomment-2737960224","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6jNfbz","author":{"login":"stevenengland"},"authorAssociation":"NONE","body":"Should be baked into Windows by default but I'll check ","createdAt":"2025-03-19T21:45:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24074#issuecomment-2738222835","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6jXcKK","author":{"login":"stevenengland"},"authorAssociation":"NONE","body":"Curl is available.","createdAt":"2025-03-20T15:20:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24074#issuecomment-2740830858","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6jZnKe","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"works for me it finds curl, installs the plugin, and decai command appears in the r2 shell. try again after building latest r2 from git just in case.. also update the r2pm database with r2pm -U","createdAt":"2025-03-20T18:58:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24074#issuecomment-2741400222","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6jZyUU","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"in r2 you have the \"where\" and \"whereis\" commands to tell you where a binary is located in PATH. this works fine for r2 and r2pm in my box. the code used in this command is the same used by r2pm","createdAt":"2025-03-20T19:19:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24074#issuecomment-2741445908","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6kHry9","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"ping?","createdAt":"2025-03-26T07:36:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24074#issuecomment-2753477821","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6kPydP","author":{"login":"stevenengland"},"authorAssociation":"NONE","body":"Hi, sorry.\n\nexperienced a few obstacles and did not try again until now. So for completeness but not related to this issue:\n\nI compiled it again and ran:\n\n```\n(venv) PS C:\\Users\\vboxuser\\Desktop\\radare_compiled_260325\\prefix> r2pm.exe -U\nINFO: Running git pull on C:\\Users\\vboxuser\\.local\\share\\radare2\\r2pm/git/radare2-pm\nremote: Enumerating objects: 7, done.\nremote: Counting objects: 100% (7/7), done.\nremote: Compressing objects: 100% (1/1), done.\nremote: Total 4 (delta 3), reused 4 (delta 3), pack-reused 0 (from 0)\nUnpacking objects: 100% (4/4), 348 bytes | 9.00 KiB/s, done.\nFrom https://github.com/radareorg/radare2-pm\n   40899cd..a918f2d  master     -> origin/master\nUpdating 40899cd..a918f2d\nFast-forward\n db/decai | 4 ++--\n 1 file changed, 2 insertions(+), 2 deletions(-)\n(venv) PS C:\\Users\\vboxuser\\Desktop\\radare_compiled_260325\\prefix> r2pm -ci decai\nINFO: Cleaning decai\nINFO: Using r2-5.9.9 and r2pm-5.9.9\nINFO: Cleaning decai\nfatal: not a git repository (or any of the parent directories): .git\nINFO: Starting install for decai\nINFO: R2PM_NEEDS: Found curl in PATH\nERROR: This package does not have R2PM_INSTALL_WINDOWS instructions\n```\n\nThen I ran:\n```\n(venv) PS C:\\Users\\vboxuser\\Desktop\\radare_compiled_260325\\prefix> r2 binary.exe\nWARN: Relocs has not been applied. Please use `-e bin.relocs.apply=true` or `-e bin.cache=true` next time\n[0x00401594]> where decai\n[0x00401594]> whereis decai\n[0x00401594]> decai -h\nERROR: r2pm -ci decai\n[0x00401594]>\n```\n\nSo, that is basically all I can share right now. ","createdAt":"2025-03-26T19:52:45Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24074#issuecomment-2755602255","viewerDidAuthor":false}],"number":24074,"title":"Installing and using plugins under Windows does not work"},{"body":"## Environment\n\nWindows 11\n\n## Description\n\nHi there, when trying to build r2 then I face these problems:\n\n## running preconfigure\n\nDoes only succeed when invoked within a Visual Studio developer console. In a normal terminal the process fails when looking for VS:\n```\nYour current Host Architecture is amd64\nPlease select the Target Architecture:\n1. x86\n2. amd64 [x64]\n3. arm\n4. arm64\nEnter your choice (1-4): 2\nVSARCH is set to: amd64\n=== Finding Visual Studio...\nSyntaxfehler. <-- syntax error\n```\n\n## running configure\n\n```\nsdb| Subproject sdb finished.\n\n\nmeson.build:513:0: ERROR: Program 'cp' not found or not executable\n\nA full log can be found at C:\\Users\\vboxuser\\Desktop\\radare2_compiled\\vs\\meson-logs\\meson-log.txt\nVS failed Try running 'preconfigure'\n```\n\nCurrently I am stuck here but will keep on reporting step by step.\n","comments":[{"id":"IC_kwDOAEpMrs6iD76t","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Can you try to fix this syntax error problem in the batch file?","createdAt":"2025-03-12T19:51:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2718940845","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6iLqwc","author":{"login":"stevenengland"},"authorAssociation":"NONE","body":"Hi, no because I don't have a clue what's the actual syntax error :-) And as I said: Running the batch file in a VS developer console instead of a normal terminal then the error does not appear. Seems like the developer console loads some more environmental stuff that is needed.","createdAt":"2025-03-13T11:40:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2720967708","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6iTh1U","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"try this preconfigured.bat and confirm the syntax error is gone please https://github.com/radareorg/radare2/pull/24061","createdAt":"2025-03-14T00:46:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2723028308","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6iYfF5","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"try again","createdAt":"2025-03-14T10:59:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2724327801","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6idGcA","author":{"login":"stevenengland"},"authorAssociation":"NONE","body":"Hi @trufae , the error is gone ðŸŽ‰ Unfortunately there is more:\n\n```\n(venv) C:\\Users\\vboxuser\\Desktop\\radare2_compiled>configure\nThe Meson build system\nVersion: 0.61.99\nSource dir: C:\\Users\\vboxuser\\Desktop\\radare2_compiled\nBuild dir: C:\\Users\\vboxuser\\Desktop\\radare2_compiled\\vs\nBuild type: native build\nWARNING: Project targeting '>=0.50' but tried to use feature introduced in '0.55.0': Wrap files with patch_directory.\nProject name: radare2\nProject version: 5.9.9\n\nmeson.build:1:0: ERROR: Compiler cl can not compile programs.\n\nA full log can be found at C:\\Users\\vboxuser\\Desktop\\radare2_compiled\\vs\\meson-logs\\meson-log.txt\nVS failed Try running 'preconfigure'\n```\n\n```\nBuild started at 2025-03-12T22:07:19.325173\nMain binary: C:\\Users\\vboxuser\\Desktop\\radare2_compiled\\venv\\Scripts\\python.exe\nBuild Options: -Dsdb_cgen=false -Dc_std=c11 -Dbackend=vs\nPython system: Windows\nThe Meson build system\nVersion: 0.61.99\nSource dir: C:\\Users\\vboxuser\\Desktop\\radare2_compiled\nBuild dir: C:\\Users\\vboxuser\\Desktop\\radare2_compiled\\vs\nBuild type: native build\nWARNING: Project targeting '>=0.50' but tried to use feature introduced in '0.55.0': Wrap files with patch_directory.\nProject name: radare2\nProject version: 5.9.9\nSanity testing C compiler: cl\nIs cross compiler: False.\nSanity check compiler command line: cl sanitycheckc.c /Fesanitycheckc.exe /MDd /nologo /showIncludes /utf-8 /link\nSanity check compile stdout:\nsanitycheckc.c\nLINK : fatal error LNK1104: Datei \"MSVCRTD.lib\" kann nicht ge ffnet werden.\n\n-----\nSanity check compile stderr:\n\n-----\n\nmeson.build:1:0: ERROR: Compiler cl can not compile programs.\n\n```\n\nregarding the MSVCRTD.lib I see a lot of stuff that might be the cause but the most important thing: The file exists. Thats not the problem ;) Besides that the search for the cause is a rabbithole...","createdAt":"2025-03-14T19:09:38Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2725537536","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6idlwT","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"You are using an ancient meson. (0.x) latest is 1.7\n\nThe ci builds fine with visual studio 2019, 2022 at least and mingw compilers too. So i guess the problem must be in your side now","createdAt":"2025-03-14T20:19:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2725665811","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6ieFj1","author":{"login":"stevenengland"},"authorAssociation":"NONE","body":"Hm, isn't meson installed by your tool chain? Via preconfigure? At least I am not aware that I installed meson onto the VM by my own. Can you confirm that?\n\nAnd I am using VS 2022 free edition.","createdAt":"2025-03-14T21:18:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2725796085","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6iicpS","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"uh seems like a lefotver i was not considering here. yeah, the preconfigure is installing an old meson. lemme fix","createdAt":"2025-03-15T19:02:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2726939218","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6ijD22","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Try again. You must rimraf the venv directory","createdAt":"2025-03-16T00:49:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2727099830","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6ij5si","author":{"login":"stevenengland"},"authorAssociation":"NONE","body":"Here we go:\n\n```\nVSARCH is set to: amd64\n=== Finding Visual Studio...\n\"Found 2022 Community edition\"\n**********************************************************************\n** Visual Studio 2022 Developer Command Prompt v17.13.3\n** Copyright (c) 2022 Microsoft Corporation\n**********************************************************************\n[vcvarsall.bat] Environment initialized for: 'x64'\nNow you can run 'configure'\nMicrosoft Windows [Version 10.0.26100.2605]\n(c) Microsoft Corporation. Alle Rechte vorbehalten.\n\n(venv) C:\\Users\\vboxuser\\Desktop\\radare2_compiled>configure\nThe Meson build system\nVersion: 1.7.0\nSource dir: C:\\Users\\vboxuser\\Desktop\\radare2_compiled\nBuild dir: C:\\Users\\vboxuser\\Desktop\\radare2_compiled\\vs\nBuild type: native build\nWARNING: Project targets '>=0.50' but uses feature introduced in '0.55.0': Wrap files with patch_directory.\nProject name: radare2\nProject version: 5.9.9\n\nmeson.build:1:0: ERROR: Compiler cl cannot compile programs.\n\nA full log can be found at C:\\Users\\vboxuser\\Desktop\\radare2_compiled\\vs\\meson-logs\\meson-log.txt\nWARNING: Running the setup command as `meson [options]` instead of `meson setup [options]` is ambiguous and deprecated.\nVS failed Try running 'preconfigure'\n```\n\n\nmeson-log.txt\n```\n-----------\nstderr:\nMicrosoft (R) C/C++-Optimierungscompiler Version 19.43.34809 f r x64\nCopyright (C) Microsoft Corporation. Alle Rechte vorbehalten.\n-----------\nSanity testing C compiler: cl\nIs cross compiler: False.\nSanity check compiler command line: cl sanitycheckc.c /Fesanitycheckc.exe /MDd /nologo /showIncludes /utf-8 /link\nSanity check compile stdout:\nsanitycheckc.c\nLINK : fatal error LNK1104: Datei \"MSVCRTD.lib\" kann nicht ge ffnet werden.\n\n-----\nSanity check compile stderr:\n\n-----\n\nmeson.build:1:0: ERROR: Compiler cl cannot compile programs.\n```","createdAt":"2025-03-16T10:27:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2727320354","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6ij6GZ","author":{"login":"stevenengland"},"authorAssociation":"NONE","body":"When using a VS Developer shell, activating the venv there then the configure commands succeeds.","createdAt":"2025-03-16T10:31:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2727322009","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6ij8Dr","author":{"login":"stevenengland"},"authorAssociation":"NONE","body":"After that the make command fails.\n\nCalling `ninja -C b install` in isolation leads to:\n```\nRunning custom install script 'C:\\\\Users\\\\vboxuser\\\\Desktop\\\\radare2_compiled\\\\sys/create_r2.bat'\n\n(venv) C:\\Users\\vboxuser\\Desktop\\radare2_compiled\\b>MKDIR c:/\\bin\nSyntaxfehler.\nDas System kann den angegebenen Pfad nicht finden.\n\n(venv) C:\\Users\\vboxuser\\Desktop\\radare2_compiled\\b>EXIT 0\n```\n\nSeems like `MESON_INSTALL_PREFIX` is not set in  `create_r2.bat` \n\nIn this code base I can't find where it shall been set before the make command. Googling the variable does not lead to an official documentation about this one so it seems to me that it will not be populated by the meson installation. Where should this variable point to? \n","createdAt":"2025-03-16T10:52:31Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2727330027","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6inrvz","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"you must pass â€”prefix or set the environment to tell meson where to compile and install the programs and i think this is a windows specific problem. On unix we have /usr. On windows you can set it to c:\\radare2 i guess","createdAt":"2025-03-17T06:26:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2728311795","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6iuWGk","author":{"login":"stevenengland"},"authorAssociation":"NONE","body":"But shouldn't the .bat file handle all this for me? Or otherwise if not wanted maybe you could add a paragraph to the readme?","createdAt":"2025-03-17T16:00:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2730058148","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6iugrx","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"ive been building radare on windows for more than 15 years without any of those issues, same goes for the CI, imho documenting stuff that should be done without user interaction is a bad idea. can you please confirm if setting that variable is enough for you to get it to work? imho the default prefix on windows should be `.\\`.\n\nI'm asking because it seems like your setup differs from the ones i have so it's better if you can test that and we can ship a generic fix that works everywhere","createdAt":"2025-03-17T16:14:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2730101489","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6iuxNv","author":{"login":"stevenengland"},"authorAssociation":"NONE","body":"Hi, thanks for helping out. I am not quite sure If we are talking about the same already :) Lets see. And I also really don't want something documented that does not need interaction. But here it is not working in an automated manner.\n\nOne question in advance:\nWhat do you mean by \" â€”prefix\" <- is the dash intended?\n\nAre more complete overview of what I have so far:\nWithin radare2_compiled (the dir where I cloned the source to) there is a prefix directory which contains all built binaries:\n\n![Image](https://github.com/user-attachments/assets/6bb3e781-d3cc-4a95-bb46-296dacf5c691)\n\nthis prefix dir is set here: https://github.com/radareorg/radare2/blob/0fa4113143ba38945c737496a508cff388d452ba/make.bat#L13\n\nThen this line fails: https://github.com/radareorg/radare2/blob/0fa4113143ba38945c737496a508cff388d452ba/make.bat#L16 because it calls `create_r2.bat` which needs MESON_INSTALL_PREFIX to be available (https://github.com/radareorg/radare2/blob/0fa4113143ba38945c737496a508cff388d452ba/sys/create_r2.bat#L1). But as far as I can tell MESON_INSTALL_PREFIX is not set during prior steps. At least I cannot find a hint in the source where this happens. \n\nIs this something helpful or do I miss something here?\n","createdAt":"2025-03-17T16:36:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2730169199","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6iu06e","author":{"login":"stevenengland"},"authorAssociation":"NONE","body":"And in terms of environment:\n\nI am using a win 11 vm that is pretty fresh. Then I installed VS 2022 with all the C++ workloads which I thought seemed to be the only thing I needed. The docs do not mention anything else to be done prior to a build attempt. Except meson which is installed automatically.","createdAt":"2025-03-17T16:40:25Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2730184350","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6ivtvw","author":{"login":"stevenengland"},"authorAssociation":"NONE","body":"I would say your current build pipeline is also facing this issue with the missing directory:\n\nhttps://github.com/radareorg/radare2/actions/runs/13904115089/job/38902847543#step:9:5225\n\nBut that does not seem to matter a lot. Because the step that fails at the end would just copy the r2.bat into the radare2\\prefix\\bin directory if the path would be set correctly to this dir. So all binaries are ready to use but a last .bat does not get copied. Maybe this is why you didn't recognize this as an actual error?","createdAt":"2025-03-17T18:01:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2730417136","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6jZJxy","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Had some spare time to boot my windows box and im reproducing and ifxing all your issues.\n\nFirst one goes here https://github.com/radareorg/radare2/pull/24081","createdAt":"2025-03-20T18:06:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2741279858","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6kHu8Q","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"can you try again and check what's missing now? i will give another turn with the remaining problems ","createdAt":"2025-03-26T07:43:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2753490704","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6kP06Y","author":{"login":"stevenengland"},"authorAssociation":"NONE","body":"Hi,\n\nhere is the current state:\n\nconfigure ended in two errors:\n```\n[notice] A new release of pip is available: 22.0.4 -> 25.0.1\n[notice] To update, run: python.exe -m pip install --upgrade pip\nERROR: To modify pip, please run the following command:\nC:\\Users\\vboxuser\\Desktop\\radare_compiled_260325\\venv\\Scripts\\python.exe -m pip install -UI pip ninja meson\n```\nSolution: Run python.exe -m pip install -UI pip ninja meson in the manually activated venv\n\n\n```\nVSARCH is set to: amd64\n=== Finding Visual Studio...\n\"Found 2022 Community edition\"\n**********************************************************************\n** Visual Studio 2022 Developer Command Prompt v17.13.3\n** Copyright (c) 2022 Microsoft Corporation\n**********************************************************************\n[vcvarsall.bat] Environment initialized for: 'x64'\nFAILED TO SETUP VISUAL STUDIO\n```\nSolution: I powered on the dev shell on my own.\n\nThen I ran make:\n\n```\n[1600/1600] Linking target test/unit/test_crbtree.exe\n   Bibliothek \"test\\unit\\test_crbtree.lib\" und Objekt \"test\\unit\\test_crbtree.exp\" werden erstellt.\nInstalling r2 in C:\\Users\\vboxuser\\Desktop\\radare_compiled_260325\\prefix\nSyntaxfehler.\nDas System kann den angegebenen Pfad nicht finden.\nDas System kann den angegebenen Pfad nicht finden.\nDas System kann den angegebenen Pfad nicht finden.\n        0 Datei(en) kopiert.\n```\nThat still https://github.com/radareorg/radare2/issues/24054#issuecomment-2730417136","createdAt":"2025-03-26T19:57:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2755612312","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6n6e3g","author":{"login":"Kreijstal"},"authorAssociation":"CONTRIBUTOR","body":"@stevenengland did you try the msys2 way","createdAt":"2025-04-20T11:29:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-2817125856","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs67NYq5","author":{"login":"Sinithara"},"authorAssociation":"NONE","body":"I have the same error. Is the build pipeline for windows still broken ?","createdAt":"2025-07-31T17:47:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-3140848313","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs67OJfe","author":{"login":"Kreijstal"},"authorAssociation":"CONTRIBUTOR","body":"> I have the same error. Is the build pipeline for windows still broken ?\n\nit seems to work on mingw","createdAt":"2025-07-31T19:03:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-3141048286","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6-NL3-","author":{"login":"simexce"},"authorAssociation":"CONTRIBUTOR","body":"An exception occurred when running the script `.\\preconfigure.bat`:\n\n```\n=== Finding Python...\nOK\n=== Finding Git...\nOK\nAlready up to date.\n=== Testing for meson and ninja...\nFOUND\nYour current Host Architecture is amd64\nPlease select the Target Architecture:\n1. x86\n2. amd64 [x64]\n3. arm\n4. arm64\nEnter your choice (1-4): 2\nVSARCH is set to: amd64\n=== Finding Visual Studio...\n\"Found 2022 Community edition\"\n**********************************************************************\n** Visual Studio 2022 Developer Command Prompt v17.14.12\n** Copyright (c) 2025 Microsoft Corporation\n**********************************************************************\n[vcvarsall.bat] Environment initialized for: 'x64'\nFAILED TO SETUP VISUAL STUDIO\n```","createdAt":"2025-08-15T09:51:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-3191127550","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6-NSmY","author":{"login":"Kreijstal"},"authorAssociation":"CONTRIBUTOR","body":"> An exception occurred when running the script `.\\preconfigure.bat`:\n> \n> ```\n> === Finding Python...\n> OK\n> === Finding Git...\n> OK\n> Already up to date.\n> === Testing for meson and ninja...\n> FOUND\n> Your current Host Architecture is amd64\n> Please select the Target Architecture:\n> 1. x86\n> 2. amd64 [x64]\n> 3. arm\n> 4. arm64\n> Enter your choice (1-4): 2\n> VSARCH is set to: amd64\n> === Finding Visual Studio...\n> \"Found 2022 Community edition\"\n> **********************************************************************\n> ** Visual Studio 2022 Developer Command Prompt v17.14.12\n> ** Copyright (c) 2025 Microsoft Corporation\n> **********************************************************************\n> [vcvarsall.bat] Environment initialized for: 'x64'\n> FAILED TO SETUP VISUAL STUDIO\n> ```\n\njust use msys2","createdAt":"2025-08-15T10:05:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-3191155096","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6-N0Sk","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"This error means that your installation was not properly detected. Read the script and fix it","createdAt":"2025-08-15T11:22:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/24054#issuecomment-3191293092","viewerDidAuthor":true}],"number":24054,"title":"Issues when building under Windows"},{"body":"## Description\n\nIt seems to me, that currently no way to run `tcp-server` in background mode\nAll attempts to run tcp-server leads to blocking current r2 session:\n```\nr2 -\n=t9999\n```\n\nR2 can run rap (`=&:1234`) or http server (`=ll`) in background mode. Why not for tcp-server?","comments":[],"number":24044,"title":"tcp-server in background mode"},{"body":"## Environment\n\n```sh\n# copypaste this script into your shell and replace it with the output\nÐ¡Ñ€ 05 Ð¼Ð°Ñ€ 2025 00:43:36 +05\nradare2 5.9.9 33317 @ linux-x86-32\nbirth: git.5.9.8-337-g651f584da5 2025-02-11__00:40:58\ncommit: 651f584da5c1e7556b626f75e8fa4fb381093ce1\noptions: gpl -O? cs:5 cl:2 make\nLinux x86_64\n```\n\n## Description\n\nIt doesnt possible to execute mulitple commands or macro via tcp or http server in interactive mode. All comands after first will be shown in server-side.\n\n## Test\nserver:\n```\nr2 -\n=t9999\nor\n=ll\n```\nclient:\n```\nr2 --\n=+tcp://localhost:9999/\n==0\npx;px\nor\n(;px;px)()\n```\n","comments":[],"number":24043,"title":"multiple commands via tcp/http-server"},{"body":"## Environment\n\n```sh\nThu Feb 20 13:22:51 CET 2025\nradare2 5.9.9 38771 @ linux-x86-32\nbirth: git.5.9.8-386-g98490509b3 2025-02-20__13:19:59\ncommit: 98490509b386e4c14e8e11a786c4b72a919eaca9\noptions: gpl -O? cs:5 cl:2 make\nLinux x86_64\n```\n\n\n## Description\n\nNested array values formatted as 0x... which is an invalid JSON value\n\n## Test\n\n```sh\nr2 --\n[0x00000000]> \"td struct bar { uint32_t baz[1];}\"\n[0x00000000]> pf.foobarbaz ? (bar)foo\n[0x00000000]> pfj foobarbaz\n```\ngot\n```sh\n[{\"name\":\"foo\",\"type\":\"bar\",\"offset\":0,\"value\":[{\"name\":\"baz\",\"type\":\"d\",\"offset\":0,\"value\":[ 0xffffffff ]}]}]\n```\nexpected\n```sh\n[{\"name\":\"foo\",\"type\":\"bar\",\"offset\":0,\"value\":[{\"name\":\"baz\",\"type\":\"d\",\"offset\":0,\"value\":[ 4294967295 ]}]}]\n```","comments":[{"id":"IC_kwDOAEpMrs6fOtTN","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"pf is awful thats why i created pf2. But its far from complete, fixing such bugs in the current code is not worth imho. Wanna help on finishing pf2?","createdAt":"2025-02-20T13:01:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/23986#issuecomment-2671432909","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6fcLbR","author":{"login":"aviciano"},"authorAssociation":"CONTRIBUTOR","body":"Currently I have limited time, but I can try to help. Some guidance will be appreciated.","createdAt":"2025-02-21T16:12:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23986#issuecomment-2674964177","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6gMgLJ","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Sure, feel free to join the discord chat, but you can check the r_print_format2 function in libr/util/format2.c the plan is to gradually change tests to make all pf1 format strings work well with pf2 and at some point remove the old code. we can have tests for both commands at the same time and even force 'v2=true' in cmd_print.inc.c to not use the old codepath.","createdAt":"2025-02-27T11:08:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23986#issuecomment-2687632073","viewerDidAuthor":true}],"number":23986,"title":"Invalid JSON values in pfj (show data using named format in JSON)"},{"body":"## Environment\r\n\r\n```sh\r\n# copypaste this script into your shell and replace it with the output\r\ndate\r\nr2 -v\r\nuname -ms\r\nWed Jan  8 16:32:31 CET 2025\r\nradare2 5.9.8 0 @ linux-x86-64\r\nbirth: git.5.9.8 2024-12-25__11:50:37\r\noptions: gpl release -O1 cs:5 cl:2 meson\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nhi,\r\n\r\nplaying with an ELF that tests the validity of a password, I notice that the space character is not correctly displayed/interpreted/returned by `r2`.\r\n\r\nhere's what I see :\r\n```assembly showLineNumbers\r\n[0x00001080]> aaaa\r\nâ€¦\r\n[0x00001080]> iM\r\n[Main]\r\nvaddr=0x00001200 paddr=0x00001200\r\n[0x00001080]> s 0x00001200\r\n[0x00001200]> pdf\r\nâ€¦\r\n; string \"Ar7hUr_c._Cl4rk3\" string \"Ar7hUr_c._Cl4rk3\"\r\nâ”‚      â”‚â””â”€> 0x00001259      c645d041       mov byte [s2], 0x41         ; 'A'\r\nâ”‚      â”‚    0x0000125d      c645d172       mov byte [var_2fh], 0x72    ; 'r'\r\nâ”‚      â”‚    0x00001261      c645d237       mov byte [var_2eh], 0x37    ; '7'\r\nâ”‚      â”‚    0x00001265      c645d368       mov byte [var_2dh], 0x68    ; 'h'\r\nâ”‚      â”‚    0x00001269      c645d455       mov byte [var_2ch], 0x55    ; 'U'\r\nâ”‚      â”‚    0x0000126d      c645d572       mov byte [var_2bh], 0x72    ; 'r'\r\nâ”‚      â”‚    0x00001271      c645d620       mov byte [var_2ah], 0x20    ; \"@\"\r\nâ”‚      â”‚    0x00001275      c645d763       mov byte [var_29h], 0x63    ; 'c'\r\nâ”‚      â”‚    0x00001279      c645d82e       mov byte [var_28h], 0x2e    ; '.'\r\nâ”‚      â”‚    0x0000127d      c645d920       mov byte [var_27h], 0x20    ; \"@\"\r\nâ”‚      â”‚    0x00001281      c645da43       mov byte [var_26h], 0x43    ; 'C'\r\nâ”‚      â”‚    0x00001285      c645db6c       mov byte [var_25h], 0x6c    ; 'l'\r\nâ”‚      â”‚    0x00001289      c645dc34       mov byte [var_24h], 0x34    ; '4'\r\nâ”‚      â”‚    0x0000128d      c645dd72       mov byte [var_23h], 0x72    ; 'r'\r\nâ”‚      â”‚    0x00001291      c645de6b       mov byte [var_22h], 0x6b    ; 'k'\r\nâ”‚      â”‚    0x00001295      c645df33       mov byte [var_21h], 0x33    ; '3'\r\nâ”‚      â”‚    0x00001299      488b45f0       mov rax, qword [var_10h]\r\nâ”‚      â”‚    0x0000129d      488b7808       mov rdi, qword [rax + 8]    ; const char *s1\r\nâ”‚      â”‚    0x000012a1      488d75d0       lea rsi, [s2]               ; const char *s2\r\nâ”‚      â”‚    0x000012a5      e896fdffff     call sym.imp.strcmp         ; int strcmp(const char *s1, const char *s2)\r\nâ€¦\r\n```\r\n\r\nthe password is `Ar7hUr c. Cl4rk3`, with the space character (2 x `0x20`).\r\non the first line of code copied above, the space character is represented by the underscore character `_`, and on the eighth and eleventh lines, the space character is represented by the at sign `@`.\r\n\r\nit's not strictly speaking a bug, but I haven't found anything about it.\r\n\r\nregards, lacsaP.","comments":[{"id":"IC_kwDOAEpMrs6Z1Ghi","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"the reason for that is because flags cant contain spaces. and spaces are translated to lowerdashes when filtering the name. my assumption here is that the disasm is using the wrong source or filter function to perform that conversion to avoid injecting non-desired characters in the terminal (read it as newlines, tabs, other non-printable chars).. so i guess this is a bug and must be addressed, can you provide a reproducer?. aka the binary and commands to make it happen? thank you","createdAt":"2025-01-09T17:06:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23864#issuecomment-2580834402","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6Z8N4J","author":{"login":"patatetom"},"authorAssociation":"NONE","body":"yes : here are the commands and the [binary](https://github.com/user-attachments/files/18377408/nostring.zip).\r\n```\r\n~> r2 ./nostring\r\n[0x00001080]> aaaa\r\n[0x00001080]> s main\r\n[0x00001200]> pdf\r\n```","createdAt":"2025-01-10T13:19:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23864#issuecomment-2582699529","viewerDidAuthor":false}],"number":23864,"title":"ASCII character space (0x20) is displayed in different ways"},{"body":"## Environment\r\n\r\n```\r\nradare2 5.9.8 1 @ windows-x86-64\r\nbirth: git.5.9.8 Tue 11/19/2024__11:46:03.42\r\ncommit: 4eb49d5ad8c99eaecc8850a2f10bad407067c898\r\noptions: gpl -O? cs:5 cl:1 meson\r\n```\r\n\r\n## Description\r\n\r\nI have been generating signatures for some executables using rasign and then using them with YARA.\r\n\r\nI noticed with some samples that certain bytes aren't masked, even though they point to data. \r\n\r\n## Test\r\n\r\nFor example, loading this sample[^sample_hash] and creating a signature for the following function (`aaaa; s 0x4070A0; zaf`):\r\n\r\n```\r\n[0x004070a0]> pd 10\r\n/ 84: fcn.004070a0 ();\r\n|           0x004070a0      55             push ebp\r\n|           0x004070a1      8bec           mov ebp, esp\r\n|           0x004070a3      33c0           xor eax, eax\r\n|           0x004070a5      55             push ebp\r\n|           0x004070a6      68f4704000     push 0x4070f4\r\n|           0x004070ab      64ff30         push dword fs:[eax]\r\n|           0x004070ae      648920         mov dword fs:[eax], esp\r\n|           0x004070b1      ff05b8454900   inc dword [0x4945b8]    <- instruction points to data\r\n|       ,=< 0x004070b7      752d           jne 0x4070e6\r\n|       |   0x004070b9      b850404900     mov eax, 0x494050           ; 'P@I'\r\n```\r\n\r\nIn the signature the corresponding bytes for the address 0x4945b8 are not masked:\r\n\r\n```\r\nfcn.004070a0:\r\n  bytes: 558bec33c05568f470400064ff30648920ff05b8454900752db850404900e835c6ffffb81c42 [ snip ]\r\n  mask:  ffffffffffffff00000000ffffffffffffffffffffffffff00ff00000000ff00000000ff0000 [ snip ]\r\n                                               ^^^^^^^^ these bytes should be masked\r\n```\r\n\r\nI believe the instruction is `inc dword ptr ds:0x4945b8`, so it should be possible to detect this is a pointer to data that might change if the data moves in a subsequent compilation.\r\n\r\n[^sample_hash]: 8632a8578ffb6350d07244460f1386c9\r\n","comments":[{"id":"IC_kwDOAEpMrs6ZgwLM","author":{"login":"edeca"},"authorAssociation":"CONTRIBUTOR","body":"This can be \"fixed\" by calling `op0_memimmhandle(..)` for instructions `X86_INS_INC` / `X86_INS_DEC`.\r\n\r\nI am not certain this is a correct fix, but `ao` and signatures generated with `zaf` now display the correct mask and bytes.\r\n\r\n```\r\n[0x004070b1]> ao\r\naddress: 0x4070b1\r\nmask: ff0000000000\r\nbytes: ff05b8454900\r\n\r\n// Generate function signature\r\n\r\n[0x004070a0]> z\r\nfcn.004070a0:\r\n  bytes: 558bec33c05568f470400064ff30648920ff05b8454900752db850404900e835c6ffffb81c424900e82bc6ffffb8e8434900e821c6ffffe8d8bdffffb83cf04800e856deffff33c05a595964891068fb704000c3\r\n  mask:  ffffffffffffff00000000ffffffffffffff0000000000ff00ff00000000ff00000000ff00000000ff00000000ff00000000ff00000000ff00000000ff00000000ff00000000ffffffffffffffffff00000000ff\r\n```\r\n\r\nA quick patch is below. I can submit a pull request if this is the correct fix, or update and submit a new one.\r\n\r\n```\r\ndiff --git a/libr/arch/p/x86/plugin_cs.c b/libr/arch/p/x86/plugin_cs.c\r\nindex c1fb3a744f..6a84f20528 100644\r\n--- a/libr/arch/p/x86/plugin_cs.c\r\n+++ b/libr/arch/p/x86/plugin_cs.c\r\n@@ -3644,12 +3644,14 @@ static void anop(RArchSession *a, RAnalOp *op, ut64 addr, const ut8 *buf, int le\r\n                // The CF flag is not affected. The OF, SF, ZF, AF, and PF flags\r\n                // are set according to the result.\r\n                op->type = R_ANAL_OP_TYPE_ADD;\r\n+               op0_memimmhandle (op, insn, addr, regsz);\r\n                op->val = 1;\r\n                break;\r\n        case X86_INS_DEC:\r\n                // The CF flag is not affected. The OF, SF, ZF, AF, and PF flags\r\n                // are set according to the result.\r\n                op->type = R_ANAL_OP_TYPE_SUB;\r\n+               op0_memimmhandle (op, insn, addr, regsz);\r\n                op->val = 1;\r\n                break;\r\n        case X86_INS_NEG:\r\n```","createdAt":"2025-01-07T14:54:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23857#issuecomment-2575499980","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6ZhIYs","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Can you please submit a pr with the fix and a test checking for the mask line in ao? Maybe other instructions are affected too?","createdAt":"2025-01-07T15:36:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23857#issuecomment-2575599148","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6ZkP1r","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i can confirm the fix. but this op0_.. call must be done in more optypes, and this can be probably generalized","createdAt":"2025-01-07T23:25:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23857#issuecomment-2576416107","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6ZkQEO","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"like this. please submit a pr with the patch and add a test using the z and ao commands to ensure this feature wont break in the future. thank you!\r\n\r\n```c\r\ndiff --git a/libr/arch/p/x86/plugin_cs.c b/libr/arch/p/x86/plugin_cs.c\r\nindex c1fb3a744f..f5236bf922 100644\r\n--- a/libr/arch/p/x86/plugin_cs.c\r\n+++ b/libr/arch/p/x86/plugin_cs.c\r\n@@ -3645,20 +3645,24 @@ static void anop(RArchSession *a, RAnalOp *op, ut64 addr, const ut8 *buf, int le\r\n \t\t// are set according to the result.\r\n \t\top->type = R_ANAL_OP_TYPE_ADD;\r\n \t\top->val = 1;\r\n+\t\top0_memimmhandle (op, insn, addr, regsz);\r\n \t\tbreak;\r\n \tcase X86_INS_DEC:\r\n \t\t// The CF flag is not affected. The OF, SF, ZF, AF, and PF flags\r\n \t\t// are set according to the result.\r\n \t\top->type = R_ANAL_OP_TYPE_SUB;\r\n \t\top->val = 1;\r\n+\t\top0_memimmhandle (op, insn, addr, regsz);\r\n \t\tbreak;\r\n \tcase X86_INS_NEG:\r\n \t\top->type = R_ANAL_OP_TYPE_SUB;\r\n \t\top->family = R_ANAL_OP_FAMILY_CPU;\r\n+\t\top0_memimmhandle (op, insn, addr, regsz);\r\n \t\tbreak;\r\n \tcase X86_INS_NOT:\r\n \t\top->type = R_ANAL_OP_TYPE_NOT;\r\n \t\top->family = R_ANAL_OP_FAMILY_CPU;\r\n+\t\top0_memimmhandle (op, insn, addr, regsz);\r\n \t\tbreak;\r\n \tcase X86_INS_PSUBB:\r\n \tcase X86_INS_PSUBW:\r\n@@ -3730,8 +3734,10 @@ static void anop(RArchSession *a, RAnalOp *op, ut64 addr, const ut8 *buf, int le\r\n \t\tbreak;\r\n \tcase X86_INS_DIV:\r\n \t\top->type = R_ANAL_OP_TYPE_DIV;\r\n+\t\top0_memimmhandle (op, insn, addr, regsz);\r\n \t\tbreak;\r\n \tcase X86_INS_IMUL:\r\n+\t\top0_memimmhandle (op, insn, addr, regsz);\r\n \t\top->type = R_ANAL_OP_TYPE_MUL;\r\n \t\top->sign = true;\r\n \t\tbreak;\r\n```","createdAt":"2025-01-07T23:26:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23857#issuecomment-2576417038","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6Z1GoF","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"ping","createdAt":"2025-01-09T17:06:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23857#issuecomment-2580834821","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6Z3CTt","author":{"login":"edeca"},"authorAssociation":"CONTRIBUTOR","body":"I have been through the current instructions and checked x86 reference material for all the standard ones (not MMX / SSE / AVX). \r\n\r\nThe instructions that can reference memory from operand 0/1 should now have the correct calls (where relevant).\r\n\r\nI need to understand the tests a little better before writing one.","createdAt":"2025-01-09T22:13:46Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23857#issuecomment-2581341421","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6Z3K8w","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Iâ€™m happy to merge the pr as is, we can have the tests later. But iâ€™m happy to get more coverage and verifications on all this logic.","createdAt":"2025-01-09T22:37:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/23857#issuecomment-2581376816","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6aEhED","author":{"login":"edeca"},"authorAssociation":"CONTRIBUTOR","body":"Some more testing:\r\n* x87 FPU instructions are not parsed correctly. Updates in #23877 \r\n* `LEA` is not parsed correctly for the case `8D 1C C5 7C C0 F7 lea ebx, unk_51F7C07C[eax*8]`\r\n* `CMPXCHG` is not parsed correctly for the case `F0 0F B0 25 28 07 lock cmpxchg ds:byte_51F80728, ah`\r\n* `MOV` is not parsed correctly for the case `8B 0C 85 38 07 F8 mov ecx, ds:dword_51F80738[eax*4]` (`8B 3D 30 07 F8 51 mov edi, ds:dword_51F80730` and `A2 28 07 F8 51 mov ds:byte_51F80728, al` with no register is OK)","createdAt":"2025-01-10T23:40:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23857#issuecomment-2584875267","viewerDidAuthor":false}],"number":23857,"title":"zignature includes bytes which are a pointer to data"},{"body":"```\r\n$ r2 -n /bin/ls\r\n -- Beer in mind.\r\n[0x00000000]> oba $$\r\n[0x00000000]> ob\r\n^D\r\n0$ cp /bin/ls .\r\n0$ rabin2 -x ls\r\nls.fat/ls.x86_64.0 created (48112)\r\nls.fat/ls.arm_64.1 created (89088)\r\n0$ r2 ls.fat/ls.arm_64.1\r\n[0x100003a58]> q\r\n0$ r2 -n ls.fat/ls.arm_64.1\r\n -- You look great, by the way. Very healthy\r\n[0x00000000]> oba $$\r\n[0x00000000]> ob\r\n* 0 3 arm-64 ba:0x00000000 sz:89088 ls.fat/ls.arm_64.1\r\n[0x00000000]>\r\n```","comments":[],"number":23827,"title":"oba $$ not working with fat machos"},{"body":"## Description\r\nProvide the ability to read the Process Environment Block in Windows to mimic the functionality of windbg.\r\n\r\n### Dynamically finding the address of the PEB\r\n![image](https://github.com/user-attachments/assets/18f5c87f-c27e-4ced-bdb0-548bc0db0190)\r\n\r\n\r\n### Overlaying the PEB structure on the aforementioned address.\r\n\r\n![image](https://github.com/user-attachments/assets/79f6370b-c640-4bfc-9140-44e91dcb37fa)\r\n\r\nMicrosoft seems to have removed the PEB symbol from recent versions of ntdll.pdb. Attached is a version that contains the PEB symbol.\r\n\r\n[ntdllpdb.tar.gz](https://github.com/user-attachments/files/18187636/ntdllpdb.tar.gz)\r\n","comments":[{"id":"IC_kwDOAEpMrs6YedXt","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"The :tls command should be implemented in the w32dbg plugin or maybe add a new callback in the rdebug plugin structure to get the thread local storage address for the given thread id. ","createdAt":"2024-12-21T13:22:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23813#issuecomment-2558121453","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6dkU-X","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"link https://github.com/wine-mirror/wine/blob/master/include/winternl.h\n\ncc @sha0coder ","createdAt":"2025-02-07T17:24:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23813#issuecomment-2643546007","viewerDidAuthor":true}],"number":23813,"title":"Access to the Windows PEB structure."},{"body":"This stuff was implemented in radare more than 15 years ago, but nobody cared about that stuff, so probably makes sense to revamp it with inspiration from projects like this: \r\n\r\n* https://github.com/8051Enthusiast/delsum\r\n\r\n```\r\n[0x00000000]> /h?\r\n| /h[?*] [algorithm] [digest] [size]  find block of size bytes having this digest. See ph\r\n[0x00000000]>\r\n```","comments":[{"id":"IC_kwDOAEpMrs6Wy22n","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"cc @sylvainpelissier ","createdAt":"2024-12-10T00:31:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23731#issuecomment-2529914279","viewerDidAuthor":true}],"number":23731,"title":"Improve hash search with ideas from delsum"},{"body":"all those commands should be listed in the help message associated, maybe some are in the root, maybe others are in subcommands. that must be chosen by the plugin itself\r\n\r\n```\r\n[0x00000000]> Lc\r\na2f        The reworked analysis from scratch thing\r\nagD        agD core plugin\r\njava       Suite of java commands, java help for more info\r\nprj        Experimental binary projects\r\nsixref     quickly find xrefs in arm64 buffer\r\ndecai      r2 decompiler based on r2ai\r\nsarif      Manage SARIF documents\r\nr2jadx     jadx decompiler for radare2\r\ngoresym    rename symbols with goresym\r\ncodeshare  pull and run codeshare scripts via r2frida\r\n[0x00000000]>\r\n```","comments":[],"number":23724,"title":"Append Lc root commands help in ? help message"},{"body":"Seems like the xrefs rewrite broke it. we lack tests for this so it was expected i guess.\r\n\r\nreproducer:\r\n\r\nr2 -a arm test/bins/mach0/ls-m1\r\n\r\n```\r\n[0x100005240]> axt $FB\r\nsym.func.1000047a8 0x100004814 [CALL:--x] bl sym.func.100004b34\r\nsym.func.1000047a8 0x1000049c0 [CALL:--x] bl sym.func.100004b34\r\n[0x100005240]> s sym.func.1000047a8\r\n[0x1000047a8]> axt $FB\r\nmain 0x100004614 [CALL:--x] bl sym.func.1000047a8\r\n[0x1000047a8]> s main\r\n[0x100003a90]> axt $FB\r\n[0x100003a90]> abp?\r\n| abp[?] [addr]  follow basic blocks paths from $$ to `addr`\r\n[0x100003a90]> abp 0x100005240\r\n[0x100003a90]> abp 0x100005240 @ entry0\r\n[0x100003a90]> abl,size/sort/inc|tail -n 5\r\n0x1000041bc 124  1      31     0x10000424c 0x100004238  0x100003a90  0x1000078c0 0x1000078c0 0x1000078c0 0x1000078c0 0x1000078c0              0x1000078c0 0x1000078c0 0x1000078c0 0x1000078c0 0x1000078c0\r\n0x100005b54 124  1      31     0x100005bd0              0x100005638  0x1000074a0 0x1000074c0 0x100007750 0x1000075d0                          0x1000074a0 0x1000074c0 0x100007750 0x1000075d0\r\n0x1000042fc 132  1      33     0x1000043c4 0x100004380  0x100003a90\r\n0x100005240 140  1      35     0x1000052d4 0x1000052cc  0x100004b34  0x1000077e0 0x1000077e0 0x1000077e0                                      0x1000077e0 0x1000077e0 0x1000077e0\r\n\r\n[0x100003a90]> o\r\n 3 * r-x 0x0002daa0 ls-m1\r\n 4 - r-- 0x00002560 null://9568\r\n 5 - rw- 0x000f0000 malloc://983040\r\n[0x100003a90]>\r\n```","comments":[{"id":"IC_kwDOAEpMrs6VmKCb","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i think that issue is related to the refactoring of the xrefs storage using RVec. and actually it's probably the same issue spotted in https://github.com/radareorg/radare2/issues/23096 in case you are in the mood to check another similar issue :)","createdAt":"2024-12-01T15:07:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23697#issuecomment-2509807771","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6Wavgl","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"can we close this now?","createdAt":"2024-12-06T16:06:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23697#issuecomment-2523592741","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6WgR_S","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Lets reword it to implement proper algo for abpf like it is for abp","createdAt":"2024-12-07T09:11:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23697#issuecomment-2525044690","viewerDidAuthor":true}],"number":23697,"title":"Find path between functions does not work"},{"body":"https://github.com/nrdmn/elbrus-docs","comments":[],"number":23653,"title":"Support elbrus/e2k cpu"},{"body":"* [ ] Support quoted arguments?\r\n* [ ] format string in printf\r\n* [ ] newline handling like `print \"hello\\n\\nworld\\n\"`","comments":[{"id":"IC_kwDOAEpMrs6Ykjyw","author":{"login":"markram1729"},"authorAssociation":"NONE","body":"Hi , Can  i work on this ? ","createdAt":"2024-12-23T13:33:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23629#issuecomment-2559720624","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6YknIV","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Of course","createdAt":"2024-12-23T13:42:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23629#issuecomment-2559734293","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6lL0tY","author":{"login":"nk521"},"authorAssociation":"NONE","body":"@markram1729 are you still working on this issue? If not, I'd like to give it a go.","createdAt":"2025-04-02T04:56:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23629#issuecomment-2771340120","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6lL37A","author":{"login":"markram1729"},"authorAssociation":"NONE","body":"Oh I missed this \n\nSure have it!! ","createdAt":"2025-04-02T05:08:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/23629#issuecomment-2771353280","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6lMDrT","author":{"login":"nk521"},"authorAssociation":"NONE","body":"@trufae thoughts on the new print changes? I'll raise a PR later today if this seems okay.\n\n![Image](https://github.com/user-attachments/assets/5936e465-66d9-40a9-a3f5-9d4c3a34c1fe)","createdAt":"2025-04-02T05:48:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23629#issuecomment-2771401427","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6lMzOE","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Quotes shouldnt be necessary. Apart from that lgtm","createdAt":"2025-04-02T07:36:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23629#issuecomment-2771596164","viewerDidAuthor":true}],"number":23629,"title":"print/printf/println/"},{"body":"in 'ii' we can also show the size of the plt entries. But this is a constant value.. but its hard to compute in a single oneliner.. maybe \r\n\r\n```\r\n?v `ii~:3[1]` - `ii~:4[1]`\r\nfd2 sym.imp.* .. # flag distance v2 somehow?\r\n```","comments":[],"number":23598,"title":"Import thunk alignment size"},{"body":"its always ascii art. agDd should be dot, agDv should be visual..","comments":[],"number":23554,"title":"agD doesnt accept subcommand for output format"},{"body":"```\r\n[0x00000000]> e cfg.bigendian\r\nfalse\r\n[0x00000000]> e arch.endian\r\nlittle\r\n[0x00000000]> e arch.endian =big\r\n[0x00000000]> e cfg.bigendian\r\nfalse\r\n[0x00000000]>\r\n```\r\n\r\nlast false should be true , and same goes the other way around imho","comments":[],"number":23536,"title":"arch endian ties with cfg.bigendian"},{"body":"example https://github.com/radareorg/radare2/pull/23487","comments":[],"number":23490,"title":"Ensure nullable for all the apis"},{"body":"## Environment\r\n\r\n```sh\r\neax@z930:~$ date\r\nMon Oct 14 15:00:03 MSK 2024\r\n\r\neax@z930:~$ r2 -v\r\nradare2 5.9.7 32724 @ linux-x86-64\r\nbirth: git.5.9.6-5-g1cbab0f485 2024-10-14__14:39:51\r\ncommit: 1cbab0f48541e30a975154e953fb2fc9852263bb\r\noptions: gpl -O? cs:5 cl:2 make\r\n\r\neax@z930:~$ uname -ms\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nI'm using r2 as a simple hex editor. While doing so I noticed that expending a binary file with `r` and checking the result with `px` shows that the file size was not affected. The `w` command doesn't seem to be aware of the additionally allocated space too. If I quit with `q` and open the same file again I see that the size was changed correctly. Truncating the file with `r` seems to work properly.\r\n\r\n## Test\r\n\r\n```\r\necho aaa > test.bin\r\n\r\nr2 -w test.bin\r\n\r\n[0x00000000]> px 010\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x00000000  6161 610a ffff ffff                      aaa.....\r\n[0x00000000]> px 0x10\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x00000000  6161 610a ffff ffff ffff ffff ffff ffff  aaa.............\r\n[0x00000000]> r 0x10\r\n[0x00000000]> r\r\n16\r\n[0x00000000]> px 0x10\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x00000000  6161 610a ffff ffff ffff ffff ffff ffff  aaa.............\r\n[0x00000000]> wx 11 22 33 44 55\r\n[0x00000000]> px 0x10\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x00000000  1122 3344 ffff ffff ffff ffff ffff ffff  .\"3D............\r\n[0x00000000]> q\r\n\r\nr2 -w test.bin\r\n\r\n[0x00000000]> px 0x10\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x00000000  1122 3344 0000 0000 0000 0000 0000 0000  .\"3D............\r\n```\r\n","comments":[{"id":"IC_kwDOAEpMrs6Pttg6","author":{"login":"afiskon"},"authorAssociation":"NONE","body":"`wen` command has the same problem","createdAt":"2024-10-14T12:41:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23475#issuecomment-2411124794","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6PvVIU","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Resizing the underlying fd doesnt imply syncing it up with the map. Those are different io layers, you can disable io.va with the e command or use omr manually. And i think omfg also updated map sizes not just perms but im just answering from memory. Maybe @condret knows more ways to achieve the same","createdAt":"2024-10-14T15:08:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23475#issuecomment-2411549204","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6RcXUe","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"There exists a feature called map tying in r_io, for specifying if and how map and file resizing should or should not affect each other. play around with the omt commands. Let me know if you want more options here\r\n![ksnip_20241027-194100](https://github.com/user-attachments/assets/ab40e966-2d55-4d4a-9f42-e090ba56c605)\r\n","createdAt":"2024-10-27T18:40:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23475#issuecomment-2440131870","viewerDidAuthor":false}],"number":23475,"title":"r2: expanding a file size not working as expected"},{"body":"This is the only implenetation that works: https://github.com/onekey-sec/ubi_reader\r\n\r\ncan be easily ported if implemented as an fs or io.fs plugin in python, but ideally that should be reimplemented in plain C.","comments":[],"number":23463,"title":"Support UBIFS in rfs"},{"body":"optimize structs to reduce their size by compacting gaps.\r\n\r\napt install pahole\r\npahole libr_core.so\r\n\r\n[pahole.zip](https://github.com/user-attachments/files/17331614/pahole.zip)\r\n\r\nmany structs changes will break abi, so we may probably hold most of these changes for 6.0\r\n\r\nrelated https://github.com/arvidn/struct_layout","comments":[],"number":23454,"title":"pahole all the structs"},{"body":"useful for suggesting plugins etc, isntead of hardcoding it in C:\r\n\r\n```\r\nr2dec=you are probably looking for the pdd command\r\npdd=you need to install the plugin with r2pm -ci r2dec \r\n...\r\n```","comments":[],"number":23406,"title":"sdb/kv database with missing commands and suggestions"},{"body":"it can be a good excuse to improve the help message for each command too\r\n\r\n```\r\n[0x00000000]> ?* | grep -E '.{81,}'\r\nERROR: Not running in interactive mode\r\n| @B:nth              temporary seek to nth instruction in current bb (negative numbers too)\r\n| @c:cmd              seek to the address printed by the given command. same as '@ `cmd`'\r\n| @r:reg              tmp seek to reg value (f.ex pd@r:PC, see also $r{PC} and $r:PC)\r\n| @@==foo bar         run the previous command appending a word on each iteration\r\n| x @@ sym.*          run 'x' over all flags matching 'sym.' in current flagspace\r\n| x @@.file           run 'x' over the offsets specified in the file (one offset per line)\r\n| x @@/x 9090         temporary set cmd.hit to run a command on each search result\r\n| x @@i               run 'x' on all instructions of the current function (see pdr)\r\n| '?e hello @ world  print the given string, including the @ sign and the rest (r2.call)\r\n| '0x123'?v $$       run the '?v $$' command in the 0x123 offset (same as r2.callAt)\r\n| =[fd] cmd                     exec cmd at remote 'fd' (last open is default one)\r\n| =+ [proto://]host:port        connect to remote host:port (*rap://, raps://, tcp://, udp://, http://)\r\n| =l[?]                         list, create or destroy background session server\r\n| =tport                        start the tcp server (echo x|nc ::1 9090 or curl ::1:9090/cmd/x)\r\n| =H[?]                         start the http webserver (and launch the web browser)\r\n| ? eip-0x804800                   show all representation result for this math expr\r\n| ?'                               show help for the single quote (do not evaluate special characters in command)\r\n| ?= eip-0x804800                  update $? return code with result of operation\r\n| ?d [num]                         disasssemble given number as a little and big endian dword\r\n| ?e[=bdgnpst] arg                 echo messages, bars, pie charts and more (see ?e? for details)\r\n| ?f [num] [str]                   map each bit of the number as flag string index\r\n| ?i[?] arg                        prompt for number or Yes,No,Msg,Key,Path and store in $$?\r\n| ?l[q] str                        returns the length of string ('q' for quiet, just set $?)\r\n| ?p vaddr                         get physical address for given virtual address\r\n| ?q num|expr                      compute expression like ? or ?v but in quiet mode\r\n| ?v num|expr                      show hex value of math expr (no expr prints $?)\r\n| ?w addr                          show what's in this address (like pxr/pxq does)\r\n| ?x+num                           like ?v, but in hexpairs honoring cfg.bigendian\r\n| \"?                    show this help, NOTE that a single quote is simpler and works the same\r\n| \"\"[cmd]               directly call a command ignoring all special chars (fast)\r\n| \"\"?e x;y\";\"?e y;x     run two commands ignoring special chars (prints x;y\";\"?e y;x) \r\n| */                   end multiline comment. (use '/*' to start mulitiline comment\r\nUsage: .[r2cmd] | [file] | [!command] | [(macro)]  # define macro or interpret r2, r_lang,\r\n :sql           .tostring() == .tosql() # export table contents in SQL statements\r\n| =[fd] cmd                     exec cmd at remote 'fd' (last open is default one)\r\n| =+ [proto://]host:port        connect to remote host:port (*rap://, raps://, tcp://, udp://, http://)\r\n| =l[?]                         list, create or destroy background session server\r\n| =tport                        start the tcp server (echo x|nc ::1 9090 or curl ::1:9090/cmd/x)\r\n| =H[?]                         start the http webserver (and launch the web browser)\r\n| /! ff                             search for first occurrence not matching, command modifier\r\n| /!x 00                            inverse hexa search (find first byte != 0x00)\r\n| /a[?][1aoditfmsltf] jmp eax       find instructions by text or bytes (asm/disasm)\r\n| /b[?][p]                          search backwards, command modifier, followed by other command\r\n| /E esil-expr                      offset matching given esil expressions $$ = here\r\n| /g[g] [from]                      find all graph paths A to B (/gg follow jumps, see search.count and anal.depth)\r\n| /h[?][algorithm] [digest] [size]  find block of size bytes having this digest. See ph\r\n| /m[?][ebm] magicfile              search for magic, filesystems or binary headers\r\n| /O [n]                            same as /o, but with a different fallback if anal cannot be used\r\n| /s[*] [threshold]                 find sections by grouping blocks with similar entropy\r\n| /r[?][erwx] sym.printf            analyze opcode reference an offset (/re for esil)\r\n| /R[?] [grepopcode]                search for matching ROP gadgets, semicolon-separated\r\n| /V[1248] min max                  look for an `cfg.bigendian` 32bit value in range\r\n| /wi foo                           search for wide string ignoring case 'f\\0o\\0o\\0'\r\n| /x[?] [bytes]                     search for hex string with mask, ignoring some nibbles\r\n| /a1 [number]           find valid assembly generated by changing only the nth byte\r\n| /aa mov eax            linearly find aproximated assembly (case insensitive strstr)\r\n| /aF[d] opstr           find instructions matching given opstr only in analyzed code\r\n| /ai[j] 0x300 [0x500]   find all the instructions using that immediate (in range)\r\n| /az[q] ([minstr])      search assembly constructed strings (q)uiet reduces FP (uses bin.minsz)\r\n| /ad rax$        search in plaintext disasm for instruction matchin given glob expression\r\n| /at [optype,optype2]   list instructions matching any of the comma separated optypes\r\n| /b[x] [str|414243]  search in hexadecimal 'ABC' backwards starting in current address\r\n| /ca[?] [algo]           search for keys expanded in memory (algo can be 'aes' or 'sm4')\r\n| /cc[?] [algo] [digest]  find collisions (bruteforce block length values until given checksum is found)\r\n| /cg                     search for GPG/PGP keys and signatures (Plaintext and binary form)\r\n| /ck                     find well known constant tables from different hash and crypto algorithms\r\n| /h[?][algorithm] [digest] [size]  find block of size bytes having this digest. See ph\r\n| /xn[1|2|4|8] value amount    search for an array of Value repeated Amount of times\r\n| /xv[1|2|4|8] v0 v1 v2 v3 ..  search for an array of values with given size and endian\r\n| #!?q                                list all available lang plugin names (See Ll?)\r\n| #!<lang>                            enter interactive prompt for given language plugin\r\n| #!pipe node -e 'console.log(123)''  run program with arguments inside an r2pipe environment\r\n| a:[cmd]          run a command implemented by an analysis plugin (like : for io)\r\n| ad[?]            analyze data trampoline (wip) (see 'aod' to describe mnemonics)\r\n| an[?] [name]     show/rename/create whatever var/flag/function used in current instruction\r\n| aac* [len]             flag function calls without performing a complete analysis\r\n| aaf[?][efrt]           analyze all functions relationships with flags, type matching and consecutive\r\n| aaF [sym*]             set anal.in=block for all the spaces between flags matching glob\r\n| aaFa [sym*]            same as aaF but uses af/a2f instead of af+/afb+ (slower but more accurate)\r\n| aan[?][fgr]            autoname functions (aang = golang, aanr = noreturn propagation, aanf = afna@@F)\r\n| aat [fcn]              analyze all/given function to convert immediate to linked structure offsets (see tl?)\r\n| aau [len]              list mem areas (larger than len bytes) not covered by functions\r\n| aaw                    analyze all meta words (Cd) and add r. named flags for referenced pointers\r\n| aae                  honor anal.{in,from,to} and emulate all executable regions\r\n| aaef                 emulate all functions using esil to find out computed references (same as aef@@@F)\r\n| aaepa                run 'aep ret0@@@i' and then 'aaep' - all unknown imports are faked to return 0\r\n| aaex                 emulate all code linearly and register only the computed xrefs\r\n| aar [sz]   analyze xrefs starting in current offset until sz bytes are consumed\r\n| aarr       analyze all function reference graph to find more functions (EXPERIMENTAL)\r\n| ab [addr]            show basic block information at given address (same as abi/afbi)\r\n| abc[-] [color]       change color of the current basic block (same as afbc, abc- to unset)\r\n| abe [esil-expr]      assign esil expression to basic block (see: aeb, dre, afbd)\r\n| acll[j] (class_name)                                       list all or single class detailed\r\n| acv [class name] [addr] ([offset]) ([size])                add vtable address to class\r\n| acvf [offset] ([class name])                               lookup function address on vtable offset\r\n| acv- [class name] [vtable id]                              delete vtable by id (from acv [class name])\r\n| acb- [class name] [base class id]                          delete base by id (from acb [class name])\r\n| acg                                                        print inheritance ascii graph\r\n| aefa [addr]              emulate function to find out args in given or current offset\r\n| aet[?][s]                esil trace listing and session management (requires aeim)\r\n| aev [esil]               visual esil debugger for the given expression or current instruction\r\n| aeim                     initialize esil memory with default values from esil.stack.* evals\r\n| aepa ([addr])                        auto set pin in current or given address by flag name (see aaep)\r\n| aep soft.show.r9=dr?r9               set a 'soft.' esil pin, only executed in the disasm loop\r\n| ar.>$snapshot         show r2 commands to set register values to the current state\r\n| arp [gdb] [regprofile-file]  parse gdb register profile and dump an r2 profile string\r\n| arp*                         print r2 commands creating flags for each register inside the arena offset\r\n| arpi                         show internal representation of the register profile\r\n| NOTE:                        this help will show arp if you run drp? when cfg.debug=0\r\n| aess                           step skip (in case of CALL, just skip, instead of step into)\r\n| af ([name]) ([addr])                     analyze functions (start at addr or $$)\r\n| af- [addr]                               clean all function analysis data (or function at addr)\r\n| afa                                      analyze function arguments in a call (afal honors dbg.funcarg)\r\n| afB 16                                   set current function as thumb (change asm.bits)\r\n| afbF([0|1])                              Toggle the basic-block 'folded' attribute\r\n| afC[?] ([addr])@[addr]                   calculate the Cycles (afC) or Cyclomatic Complexity (afCc)\r\n| afd[addr]                                show function + delta for given offset\r\n| afi [addr|fcn.name]                      show function(s) information (verbose afl)\r\n| afj [tableaddr] [elem_sz] [count] [seg]  analyze function jumptable (adding seg to each elem)\r\n| afl[?] [ls*] [fcn name]                  list functions (addr, size, bbs, name) (see afll)\r\n| afn[?] name [addr]                       rename name for function at address (change flag too)\r\n| afna                                     suggest automatic name for current offset\r\n| afo[?j] [fcn.name]                       show address for the function name or current offset\r\n| afs[?] ([fcnsign])                       get/set function signature at current address (afs! uses cfg.editor)\r\n| afS[stack_size]                          set stack frame size for function at current address\r\n| afu addr                                 resize and analyze function from current address until addr\r\n| afv[?]                                   manipulate args, registers and variables in function\r\n| .afbr-                                        set breakpoint on every return address of the function\r\n| .afbr-*                                       remove breakpoint on every return address of the function\r\n| afb,                                          show basic blocks of current function in a table\r\n| afb=                                          display ascii-art bars for basic block regions\r\n| afba[!]                                       list basic blocks of current offset in analysis order (EXPERIMENTAL, see afla)\r\n| afbc[-] [color] ([addr])                      colorize basic block (same as 'abc', afbc- to unset)\r\n| afbd                                          list function basic block dependency list in order and set abe values\r\n| afbe bbfrom bbto                              add basic-block edge for switch-cases\r\n| afbi[j]                                       print current basic block information\r\n| afbj [addr]                                   show basic blocks information in json\r\n| afbr                                          show addresses of instructions which leave the function\r\n| afbo                                          list addresses of each instruction for every basic block in function (see abo)\r\n| afB [bits]                                    define asm.bits for the given function\r\n| aflx[?*jv]     list function xrefs (who references or calls the current function)\r\n| afn.        same as afn without arguments. show the function name in current offset\r\n| afs ([fcnsign])                  get/set function signature at current address (afs! uses cfg.editor)\r\n| afsq                             same as afs without the error message (See afsQ for non-current offset)\r\n| afs!                             edit current function signature with cfg.editor\r\n| afsv[j]                          print function signature filling the values from current reg and stack state\r\n| afv*                          output r2 command to add args/locals to flagspace\r\n| afv=                          list function variables and arguments with disasm refs\r\n| afvd name                     output r2 command for displaying the value of args/locals in the debugger\r\n| w [path]                write to path or display graph image (see graph.gv.format)\r\n| agn title1 body1                          add a node with title \"title1\" and body \"body1\"\r\n| agn \"title with space\" \"body with space\"  add a node with spaces in the title and in the body\r\n| agn title1 base64:Ym9keTE=                add a node with the body specified as base64\r\n| age title1 title2                add an edge from the node with \"title1\" as title to the one with title \"title2\"\r\n| age \"title1 with spaces\" title2  add an edge from node \"title1 with spaces\" to node \"title2\"\r\n| age- title1 title2               remove an edge from the node with \"title1\" as title to the one with title \"title2\"\r\n| ah.                          list hints in human-readable format from current offset\r\n| aha ppc @ 0x42               force arch ppc for all addrs >= 0x42 or until the next hint\r\n| aha 0 @ 0x84                 disable the effect of arch hints for all addrs >= 0x84 or until the next hint\r\n| ahi[?] 10                    define numeric base for immediates (2, 8, 10, 10u, 16, i, p, S, s)\r\n| aht[?][s] <type>             mark immediate as a type offset (deprecated, moved to \"aho\")\r\n| ahv val                      change opcode's val field (useful to set jmptbl sizes in jmp rax)\r\n| ahi 10|d    set base to signed decimal (10), sign bit should depend on receiver size\r\nUsage: an  [aj*] # analyze name for the current address (see fd and aan commands)\r\n| ar.>$snapshot         show r2 commands to set register values to the current state\r\n| arp [gdb] [regprofile-file]  parse gdb register profile and dump an r2 profile string\r\n| arp*                         print r2 commands creating flags for each register inside the arena offset\r\n| arpi                         show internal representation of the register profile\r\n| NOTE:                        this help will show arp if you run drp? when cfg.debug=0\r\n| axm addr [at]   copy data/code references pointing to addr to also point to curseek (or at)\r\n| axfj [addr]  find data/code references to this address and print in json format\r\n| axtj ([addr])  find data/code references to this address and print in json format\r\n| b64:AA=  receive a base64 string that is executed without evaluating special chars\r\n| cg[?][afo] [file]        compare graphdiff current file and find similar functions\r\n| cV[1248] [addr] @at      compare 1,2,4,8-byte address contents (silent, return in $?)\r\n| cu2 $$+1 > p                 compare words (half, 16bit) from current seek and +1\r\n| C                                              list meta info in human friendly form\r\n| C*.                                            list meta info of current offset in r2 commands\r\n| C- [len] [[@]addr]                             delete metadata at given address range\r\n| C.                                             list meta info of current offset in human friendly form\r\n| CCa[+-] [addr] [text]                          add/remove comment at given address\r\n| CL[-][*] [file:line] [addr]                    show or add 'code line' information (bininfo)\r\n| CS[-][space]                                   manage meta-spaces to filter comments, etc..\r\n| C[Cthsdmf]                                     list comments/types/hidden/strings/data/magic/formatted in human friendly form\r\n| C[Cthsdmf]*                                    list comments/types/hidden/strings/data/magic/formatted in r2 commands\r\n| Cd[-] [size] [repeat] [@addr]                  hexdump data array (Cd 4 10 == dword [10])\r\n| Cd. [@addr]                                    show size of data at current address\r\n| Cb[?][-] [addr] [@addr]                        bind both addresses for reflines purposes\r\n| Cr[?][-] [sz] [r2cmd] [@addr]                  run the given command to replace SZ bytes in the disasm\r\n| Ct[?] [-] [comment-text] [@addr]               add/remove type analysis comment\r\n| Ct.[@addr]                                     show comment at current or specified address\r\n| dct <len>                    traptrace from curseek to len, no argument to list\r\n| dd[*] <file|addr>          open file as read-only (r--); addr = use as char* for path\r\n| dd+[*] <file|addr>         open/create file as read-write (rw-); addr = use as char* for path\r\n| dm address size                   allocate <size> bytes at <address> (anywhere if address is -1) in child process\r\n| dm=                               list memory maps of target process (ascii-art bars)\r\n| dmd[aw] [file]                    dump current (all or writable) debug map region to a file (from-to.dmp) (see Sd)\r\n| dmi* [addr|libname] [symname]     list symbols of target lib in radare commands\r\n| dmis [libname]                    same as .dmi* - import all symbols from given lib as flags\r\n| dml <file>                        load contents of file into the current map region\r\n| dmm[?][j*]                        list modules (libraries, binaries loaded in memory)\r\n| dmp[?] <address> <size> <perms>   change page at <address> with <size>, protection <perms> (perm)\r\n| dmL address size                  allocate <size> bytes at <address> and promote to huge page\r\n| dmh @[malloc_state]                          List heap chunks of a particular arena\r\n| dmh                                          List the chunks inside the heap segment\r\n| dmh*                                         Display heap details as radare2 commands\r\n| dmha                                         List all malloc_state instances in application\r\n| dmhb @[malloc_state]                         Display all parsed Double linked list of main_arena's or a particular arena bins instance\r\n| dmhb [bin_num|bin_num:malloc_state]          Display parsed double linked list of bins instance from a particular arena\r\n| dmhbg [bin_num]                              Display double linked list graph of main_arena's bin [Under developemnt]\r\n| dmhc @[chunk_addr]                           Display malloc_chunk struct for a given malloc chunk\r\n| dmhf @[malloc_state]                         Display all parsed fastbins of main_arena's or a particular arena fastbinY instance\r\n| dmhf [fastbin_num|fastbin_num:malloc_state]  Display parsed single linked list in fastbinY instance from a particular arena\r\n| dmhg [malloc_state]                          Display heap graph of a particular arena\r\n| dmhg                                         Display heap graph of heap segment\r\n| dmhi @[malloc_state]                         Display heap_info structure/structures for a given arena\r\n| dmhj                                         List the chunks inside the heap segment in JSON format\r\n| dmhm[*j]                                     List all malloc_state instance of a particular arena (@ malloc_state#addr)\r\n| dmht                                         Display all parsed thread cache bins of all arena's tcache instance\r\n| dor [rarun2]  comma separated list of k=v rarun2 profile options (e dbg.profile)\r\n| dr??                 same as dr?`drp~=[0]+` # list all reg roles alias names and values\r\n| drv[?]               show vector registers (also known as sve / packed / multimedia)\r\n| arp [gdb] [regprofile-file]  parse gdb register profile and dump an r2 profile string\r\n| arp*                         print r2 commands creating flags for each register inside the arena offset\r\n| arpi                         show internal representation of the register profile\r\n| NOTE:                        this help will show arp if you run drp? when cfg.debug=0\r\n| dsuo <optype> [<optype> ...]  step until an instr matches one of the <optype>s.\r\n| dt=                                show ascii-art color bars with the debug trace ranges\r\n| dtd[qi] [nth-start]                list all traced disassembled (quiet, instructions)\r\n| dtg*                               graph in agn/age commands. use .dtg*;aggi for visual\r\n| dts[?]                             manage trace sessions, used for step back (EXPERIMENTAL)\r\n| dxrs <hexpairs>             execute opcodes and restore state, excluding the stack\r\n| e scr.color=0          use more colors (0: no color 1: ansi 16, 2: 256, 3: 16M)\r\n| ecHw[word] [color]  highlight 'word ' in current instruction with 'color' background\r\n| f                         list flags (will only list flags from selected flagspaces)\r\n| f-.blah@fcn.foo           delete local label from function at current seek (also f.-)\r\n| f-@addr                   remove flag at address expression (same as f-$$ or f-0x..)\r\n| fe [name]                 create flag name.#num# enumerated flag. (f.ex: fe foo @@= 1 2 3 4)\r\n| fla [glob]                automatically compute the size of all flags matching glob\r\n| fnj                       list flags displaying the real name (demangled) in JSON format\r\n| fN [[name]] [realname]    set flag real name (if no flag name current seek one is used)\r\n| fr [[old]] [new]          rename flag (if no new flag current seek one is used)\r\n| ft[?]*                    flag tags, useful to find all flags matching some words\r\nUsage: fD[*.j]  [rawname]   # filter/mangle raw symbol name to be valid flag name\r\n| fD rawname   print the mangled flag name using the raw name, see the ' command prefix\r\nUsage: fR  [from] [to] ([mask])   # Relocate flags matching a mask asuming old and new base addresses\r\n| ig[?][h]     guess size of binary program (igh use human units instead of number of bytes)\r\n| ic+[klass.method]  add new symbol in current seek for a given klass and method name\r\n| icc [lang]         List classes, methods and fields in Header Format (see bin.lang=swift,java,objc,cxx)\r\n| icg [str]          List classes hirearchy graph with agn/age (match str if provided)\r\n| icqq               List classes, in quieter mode (only show non-system classnames)\r\n| icl[c]             Show addresses of class and it methods, without names (iclc = class count)\r\n| ig[?][h]  guess size of binary program (igh use human units instead of number of bytes)\r\n| li                       list source of current function (like gdb's 'list' command)\r\n| m /mnt                       mount fs at /mnt with autodetect fs and current offset\r\n| mL[Lj]                       list filesystem plugins (Same as Lm), mLL shows only fs plugin names\r\n| mg /foo [offset size]        get fs file/dir and dump to disk (support base64:)\r\n| ms /mnt                      open filesystem shell at /mnt (or fs.cwd if not defined)\r\n| mwf [diskfile] [r2filepath]  write contents of local diskfile into r2fs mounted path\r\n| o*[*]                     list opened files in r2 commands, show r2 script to set flag for each fd\r\n| o++ [file]                create and open file in read-write mode (see ot and omr)\r\n| o: [len]                  open a malloc://[len] copying the bytes from current offset\r\n| oo[?][+bcdnm]             reopen current file (see oo?) (reload in rw or debugger)\r\n| op[npr] [fd]              select priorized file by fd (see ob), opn/opp/opr = next/previous/rotate\r\n| ox fd fdx                 exchange the descs of fd and fdx and keep the mapping\r\n| obio                   Load bin info from the io plugin forcing the use of bin.io\r\n| obm([id])              merge current selected binfile into previous binfile (id-1)\r\n| om [fd]                                  list all defined IO maps for a specific fd\r\n| om-..                                    hud view of all the maps to select the one to remove\r\n| om.                                      show map, that is mapped to current offset\r\n| oma [fd]                                 create a map covering all VA for given fd\r\n| omd from to @ paddr                      simplified om; takes current seek, fd and perms\r\n| omf [mapid] rwx                          change flags/perms for current/given map\r\n| omfg[+-]rwx                              change flags/perms for all maps (global)\r\n| omm [fd]                                 create default map for given fd (omm `oq`)\r\n| ompb [fd]                                prioritize maps of the bin associated with the binid\r\n| ompd mapid                               deprioritize map with corresponding id\r\n| omqq                                     list all maps addresses (See $MM to get the size)\r\n| omt mapid                                toggle map backwards tying (same as omtb)\r\n| onn [file] ([rwx])   open file without creating any map or parsing headers with rbin)\r\n| onnu [file] ([rwx])  same as onn, but unique, will return previos fd if already opened\r\n| pg[?][x y w h] [cmd]    create new visual gadget or print it (see pg? for details)\r\n| py([-:file]) [expr]     print clipboard (yp) run python script (py:file) oneliner `py print(1)` or stdin slurp `py-`\r\nUsage: p=[=bep?][qj] [N] ([len]) ([offset])   show entropy/printable chars/chars bars\r\n| NOTE:            Pressing ENTER on empty command will repeat last print command in next page\r\n| pde[q|qq|j] N    disassemble N instructions following execution flow from current PC\r\n| pdo N            convert esil expressions of N instructions to C (pdO for bytes)\r\n| pdr.             recursive disassemble across the function graph (from current basic block)\r\n| pdR              recursive disassemble block size bytes without analyzing functions\r\n| pdsf[sjq]        show function summary of strings, calls, variables, references..\r\n| pd, [n] [query]  disassemble N instructions in a table (see dtd for debug traces)\r\n| pf fmt                     show data using the given format-string. See 'pf??' and 'pf???'.\r\n| pf* fmt_name|fmt           show data using (named) format as r2 flag create commands\r\n| pf.fmt_name.field_name=33  set new value for the specified field in named format\r\n| pfv.fmt_name[.field]       print value(s) only for named format. Useful for one-liners\r\n| piE[?]           same as pie but taking an amount of bytes instead of instructions\r\n| piu[q] [optype]  disassemble until instruction of given optype is found (See /atl)\r\n| piE[?]           same as pie but taking an amount of bytes instead of instructions\r\n| piu[q] [optype]  disassemble until instruction of given optype is found (See /atl)\r\n| pp1      print incremental byte pattern (honor lower bits of cur address and bsize)\r\n| psp    print zero-terminated string, taking length defined by the first byte (psp1)\r\n| pspw   print zero-terminated 16bit wide string, taking length in bytes defined by the first byte (pspw1)\r\n| pspw4  same as pspW, but using 4 byte dword (honoring cfg.bigendian) for length\r\n| pspW   print zero-terminated 32bit wide string, taking length in bytes defined by the first byte (pspW1)\r\n| pspW4  same as pspW, but using 4 byte dword (honoring cfg.bigendian) for length\r\nUsage: pv[1248z][udj]  Print value(s) given size and endian (u for unsigned, d for signed decimal, j for json)\r\n| pve [1234] ([bsize])  print value with any endian (reorder bytes with the 1234 order)\r\n| PS* [name]        print the project script file (Like P*, but requires a project)\r\n| sff             seek to the nearest flag backwards (uses fd and ignored the delta)\r\n| so ([[-]N])     seek to N opcode(s) forward (or backward when N is negative), N=1 by default\r\n| td <string>                   load types from string (quote the whole command: \"td ...\")\r\n| tp[?]  <type> [addr|varname]  cast data at <address> to <type> and print it (XXX: type can contain spaces)\r\n| tccl                        list cc signatures (return ccname (arg0, arg1, ..) err;)\r\n| ted                   list all loaded enums in C output format without newlines\r\n| tn[a] 0x3000                 stop function analysis if call/jmp to this address\r\n| tp  <type> [addr|varname]  cast data at <address> to <type> and print it (XXX: type can contain spaces)\r\n| tpx <type> <hexpairs>      show value for type with specified byte sequence (XXX: type can contain spaces)\r\n| txf ([addr])  list all types used in the current or given function (same as tx.)\r\n| wa[?] push ebp                write opcode, separated by ';' (use '\"' around the command)\r\n| waF f.asm                     assemble file and write bytes and show 'wx' op with hexpair bytes of assembled code\r\n| wao[?] op                     modify opcode (change conditional of jump. nop, etc) (RArch.patch)\r\n| wB[-]0xVALUE                  set or unset bits with given value (also wB-0x2000)\r\n| we[?] [nNsxX] [arg]           extend write operations (insert instead of replace)\r\n| wg[et] [http://host/file]     download file from http server and save it to disk (wget)\r\n| wm f0ff                       set binary mask hexpair to be used as cyclic write mask\r\n| ws[?] pstring                 write pascal string: 1 byte for length + N for the string\r\n| wt[?][afs] [filename] [size]  write to file (from current seek, blocksize or sz bytes)\r\n| ww foobar                     write wide string 'f\\x00o\\x00o\\x00b\\x00a\\x00r\\x00'\r\n| wa+ nop          write a nop and seek after it (use 7wa+nop to write 7 consecutive nops)\r\n| waF f.asm        assemble file and write bytes and show 'wx' op with hexpair bytes of assembled code\r\n| waF* f.asm       assemble file and show 'wx' op with hexpair bytes of assembled code\r\n| wc*              print write commands to replicate the patches in the current cache layer\r\n| wcp [fd]         list all cached write-operations on p-layer for specified fd or current fd\r\n| wcp* [fd]        list all cached write-operations on p-layer in radare commands\r\n| wen <num>                        extend the underlying file inserting NUM null bytes at current offset\r\n| weN <addr> <len>                 extend current file and insert bytes at address\r\n| wex <hex_bytes>                  insert bytes at current offset by extending the file\r\nUsage: wo[asmdxoArl24]   [hexpairs] @ addr[!bsize] write operation in current block\r\n| woD [algo] [key] [IV]             decrypt current block with given algo and key\r\n| woE [algo] [key] [IV]             encrypt current block with given algo and key\r\nUsage: ws[124?] [string]  Pascal strings are not null terminated and store the length in binary at the beginning\r\nUsage: wt[afs] [filename] [size]   Write current block or [size] bytes from offset to file\r\n| wtf! [filename]        write to file from current address to eof (ignores given size)\r\n| wv2 234                         write unsigned short (2 bytes) with this number\r\n| wvp 934                         write 4 or 8 byte pointer, depending on asm.bits\r\n| zb [n]           find n closest matching zignatures to function at current offset\r\n| zfs /path/**.sig  recursively search for FLIRT files and scan them (see dir.depth)\r\n| zfz filename      open FLIRT file and get sig commands (zfz flirt_file > zignatures.sig)\r\nUsage: zc[n!] other_space   # Compare zignspaces, match >= threshold (e zign.diff.*)\r\n| zcn other_space   compare current space with zigns with same name on other_space\r\n[0x00000000]> \r\n```","comments":[{"id":"IC_kwDOAEpMrs6OLftE","author":{"login":"maliByatzes"},"authorAssociation":"CONTRIBUTOR","body":"@trufae I would like to work on this, seems like a good first issue. Can you assign the it to me.\r\n\r\nAlso Im assuming you mean that the message should wrap around to a newline like below?\r\n\r\n```sh\r\n| @B:nth              temporary seek to nth instruction in current bb \r\n                      (negative numbers too)\r\n```","createdAt":"2024-10-01T10:10:09Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23392#issuecomment-2385378116","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6OLsF4","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"@maliByatzes unfortunately github doesn't allow to assign issues to usres without commit access to the repository. but still, i dont think anyone else is gonna take it and if it does, it's a long task that will be hard to be conflictive if other contributors push changes there.\r\n\r\nThe objective of this task is the following:\r\n* Improve the wording of all the command help texts\r\n* Wrapping shouldn't be necessary, because command description should be concise and short\r\n* Review all command/help messages to find inconsistent, duplicated commands, use better words, etc..\r\n\r\nThe terminal already wraps the text if it's wider than the terminal, and we could modify RCoreHelp api to align the description properly. but imho it looks bad and doesn't help with grepping. so i prefer all help messages to fit in one line. This is also important when exporting all the command help to be fed to r2ai to teach language models how to use the tool. so keeping that format helps towards that.","createdAt":"2024-10-01T10:35:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/23392#issuecomment-2385428856","viewerDidAuthor":true}],"number":23392,"title":"help messages shouldnt exceed 80 columns"},{"body":"I would like to generate some binary patches that can be read in plain text, in the same way I do with diff(1) and patch(1). In particular, I want to be able to do these operations:\r\n\r\n- Generate a patch comparing two files (or two directories)\r\n- Read the addresses being modified in hexadecimal\r\n- Read the patch as plain text and be able to add some comments\r\n- Add/remove/modify some hunks in the patch manually\r\n- Email and VCS friendly\r\n- Apply the patch and generate a .rej file with rejected hunks\r\n- Revert an applied patch\r\n\r\nThe default radiff2(1) format is close to what I want.\r\n\r\n```\r\n% radiff2 v2.bin v3.bin\r\n0x00189ca8 58731b => 004c1d 0x00189ca8\r\n```\r\n\r\nIt has the benefit that it can be reversed by a simple awk(1) program:\r\n\r\n```\r\n% cat a.patch\r\n0x00189ca8 58731b => 004c1d 0x00189ca8\r\n% awk '{print $5,$4,$3,$2,$1}' < a.patch\r\n0x00189ca8 004c1d => 58731b 0x00189ca8\r\n```\r\n\r\nHowever, AFAIK this format doesn't seem to be accepted by any tool.\r\n\r\nThe r2 format outputs radare2(1) commands, but they ignore what was in that address before:\r\n\r\n```\r\n% radiff2 -r v2.bin v3.bin\r\nwx 004c1d @ 0x00189ca8\r\n```\r\n\r\nThis is not enough, as I want to know if a give patch collides with another one. This also prevents from reverting an applied patch.\r\n\r\nThere is also the rapatch.md format, but it seems to be different than these two. And it also seems to have the same problem, it cannot be reverted.\r\n\r\nMaybe this problem can be solved by implementing a reversible operator like `wx` that swap bytes instead of overwriting an address.\r\n\r\n```\r\n<swap> 004c1d 58731b @ 0x00189ca8\r\n```\r\n\r\nThe problem of this approach is that when a swap command fails, it should output that hunk into a reject file, which is probably not what you want from a r2 session.\r\n\r\nMaybe it would be a better idea to have another tool just for this workflow (which could also work with multiple files at once). You first perform all the changes you want with r2 `w` commands, then you save the file and generate a patch that can be further edited and applied/reversed:\r\n\r\n```\r\n% radiff2 a.bin b.bin > patch.txt\r\n% $EDITOR patch.txt\r\n% rapatch < patch.txt\r\n% rapatch -R < patch.txt # Reverse the patch\r\n```\r\n\r\nHere is an example of what that patch may look like, which is very close to what patch(1) expects:\r\n\r\n```diff\r\n--- a.bin\t2024-09-24 09:24:41.475235346 +0200\r\n+++ b.bin\t2024-09-24 09:24:41.475235346 +0200\r\n\r\nThe following hunk changes the value 1799000 to 1920000 (in decimal)\r\nat the address 0x00189ca8. Notice how I use LE to specify little endian,\r\nso I can see the raw values clearly.\r\n\r\n@@ -0x00189ca8,4 +0x00189ca8,4 @@\r\n- LE 0x001b7358 # 1799000 comment after the # symbol, could be assembly\r\n+ LE 0x001d4c00 # 1920000\r\n```  \r\n\r\nThe benefit of such format is that:\r\n\r\n- I can specify the data in other sizes and endianness that plain hex bytes\r\n- Changes are vertically aligned\r\n- Arbitrary comments which can include instructions\r\n- Hunks can be added/removed/modified by hand\r\n- Easily reverted\r\n- Modifications are grouped in hunks which can fail independently\r\n- Email and VCS friendly\r\n- Not specific to radare2, so it can also be used by other programs\r\n\r\nThis format can also be used to insert or remove bytes, leaving a different sized file. It also prevents the problem of using multiple write commands for the same memory location if the hunk addresses are sorted. It also resembles the patch format closely enough that it gets the syntax colors of normal patches on GitHub.\r\n\r\nPatches of patches are also readable:\r\n\r\n```diff\r\n% diff -u patch1.txt patch2.txt\r\n--- patch1.txt\t2024-09-24 09:29:00.823234555 +0200\r\n+++ patch2.txt\t2024-09-24 09:29:18.273200860 +0200\r\n@@ -1,10 +1,10 @@\r\n --- a.bin\t2024-09-24 09:24:41.475235346 +0200\r\n +++ b.bin\t2024-09-24 09:24:41.475235346 +0200\r\n\r\n-The following hunk changes the value 1799000 to 1920000 (in decimal)\r\n+The following hunk changes the value 1799000 to 1920001 (in decimal)\r\n at the address 0x00189ca8. Notice how I use LE to specify little endian,\r\n so I can see the raw values clearly.\r\n\r\n @@ -0x00189ca8,4 +0x00189ca8,4 @@\r\n - LE 0x001b7358 # 1799000 comment after the # symbol, could be assembly\r\n-+ LE 0x001d4c00 # 1920000\r\n++ LE 0x001d4c01 # 1920001\r\n```\r\n\r\nI think I could adapt radiff2.c to output such format, and maybe modify patch(1) to accept them.","comments":[{"id":"IC_kwDOAEpMrs6NX-Zv","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"use the -r flag","createdAt":"2024-09-24T17:16:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23379#issuecomment-2371872367","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6NYMMx","author":{"login":"rodarima"},"authorAssociation":"NONE","body":"As of 2578ff0ac, using `radiff2 -r` produces a patch that is not reversible:\r\n\r\n```\r\n% radiff2 -r v2.bin v3.bin\r\nwx 004c1d @ 0x00189ca8\r\n\r\n% radiff2 -v\r\nradiff2 5.9.5 32634 @ linux-x86-64\r\nbirth: git.5.9.4-231-g2578ff0ac5 2024-09-24__17:40:00\r\ncommit: 2578ff0ac57765e0c5908fb6559bbbfd86252c12\r\noptions: gpl -O1 cs:5 cl:2 meson\r\n```","createdAt":"2024-09-24T17:46:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23379#issuecomment-2371928881","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6NYZGQ","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"you can also use `  -1         output in Generic binary DIFF (0xd1ffd1ff magic header)` as well as `  -X         show two column hexII diffing`. but i agree that all that should be probably unified into a single flag. what is your proposal? the output of -r is compatible with r2. its an r2 script. and ideally this script should work too with r0 (aka ired). but it's just stuff from radare. which other bindiffing tools are you caring?\r\n\r\nThe proposal to create a decent and standarized and extensible binary patching file format in plain text looks quite interesting to me, and i would love to have support in r2 for that. btw there's also support for rapatch. but its just part of r2, not a standalone tool. but for consistency with radiff2 it probably makes sense to have a rapatch2 tool instead of having an r2 uppercase flag.\r\n\r\n```\r\n$ r2 -h| grep -i patch\r\nUsage: r2 [-ACdfjLMnNqStuvwzX] [-P patch] [-p prj] [-a arch] [-b bits] [-c cmd]\r\n -P [file]    apply rapatch file and quit\r\n```\r\n\r\nYou can read more about this in doc/rapatch.md","createdAt":"2024-09-24T18:12:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23379#issuecomment-2371981712","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6NtUhh","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"just created a new tool that cant bemerged until r2-6.0 \r\n\r\nhttps://github.com/radareorg/radare2/pull/23391\r\n\r\nfor now is just a dummy thing, but I agree that your proposal is important and should be treated as a first class tool, would you like to improve radiff2 to support this output?\r\n\r\ni'm not 100% sure about the LE/BE values because radiff just spots changes in byte which may not really know if the underlying data is a word or qword. the patch format can specify that or maybe we can do some happy assumptions on this. i think we have time during 5.9.x until we reach 6.0 to break abi and provide such new tool with proper manpage and a working patch format for unified binary patching.","createdAt":"2024-09-26T16:51:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23379#issuecomment-2377468001","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6NuuCR","author":{"login":"rodarima"},"authorAssociation":"NONE","body":"Thanks for taking a look.\r\n\r\nI'll need to think about the patch format to come up with a spec that makes sense first.\r\n\r\nYou can always fall back to plain hex bytes if you don't know how the data type, but the patch format should allow you to use a more human friendly format.\r\n\r\nThe problem with the flow of saving the binary and then diffing with the original is that you miss information on how the user specified the changes. It may be better to generate a patch from r2 itself when you know how those changes were made. This way you can store in the patch comments such as the instruction being changed or ASCII.\r\n\r\nI suspect that for any w command that you do with radare2, you can always find the opposite command that would revert that change, and specify it using the same value format.\r\n\r\nFor example, `wvf 3.21` over a memory location that contains the `1.23` float, could generate this patch:\r\n\r\n```diff\r\n--- a.bin\t2024-09-24 09:24:41.475235346 +0200\r\n+++ b.bin\t2024-09-24 09:24:41.475235346 +0200\r\n@@ -0x00100000,4 +0x00100000,4 @@\r\n- wvf 1.23\r\n+ wvf 3.21\r\n```\r\n\r\nThis is nice for radare2 users because they will be already familiar with the commands, but it doesn't make a lot of sense for users of other tools. It also has the problem that there is not information about the byte order. Something like this:\r\n\r\n```diff\r\n--- a.bin\t2024-09-24 09:24:41.475235346 +0200\r\n+++ b.bin\t2024-09-24 09:24:41.475235346 +0200\r\n@@ -0x00100000,4 +0x00100000,4 @@\r\n- LE (float) 1.23\r\n+ LE (float) 3.21\r\n```\r\n\r\nMay be more understandable, specially if we use known types like C.\r\n\r\nAnother issue is that in the common case, you will always use the same LE/BE for a patch (although we should support the cases when that is not true), so you don't need to pollute every line with LE/BE. It is conveninent to define a byte order at the start:\r\n\r\n```diff\r\n--- a.bin\t2024-09-24 09:24:41.475235346 +0200\r\n+++ b.bin\t2024-09-24 09:24:41.475235346 +0200\r\n@@ LE @@\r\n@@ -0x00100000,4 +0x00100000,4 @@\r\n- (float) 1.23\r\n+ (float) 3.21\r\n```\r\n\r\nNow, there is the case in which a user may specify integers in different bases hex/dec/octal. In my above case:\r\n\r\n```diff\r\n--- a.bin\t2024-09-24 09:24:41.475235346 +0200\r\n+++ b.bin\t2024-09-24 09:24:41.475235346 +0200\r\n@@ LE @@\r\n@@ -0x00189ca8,4 +0x00189ca8,4 @@\r\n- (uint32_t) 1799000 # Using a type that can map a constant into bytes\r\n+ (uint32_t) 1920000 # Notice how I use decimal here\r\n```\r\n\r\nI think it may be good to use the C format for numbers too: 0123 = octal, 123 = dec, 0x123 = hex.\r\n\r\nThis may also be valid:\r\n\r\n```diff\r\n--- a.bin\t2024-09-24 09:24:41.475235346 +0200\r\n+++ b.bin\t2024-09-24 09:24:41.475235346 +0200\r\n@@ LE @@\r\n@@ -0x00189ca8,12 +0x00189ca8,12 @@\r\n- (uint32_t []) { 1799000, 1799001, 1799002 }\r\n+ (uint32_t []) { 1920000,   0x123,      07 }\r\n```\r\n\r\nBut it starts to complicate the syntax. Also, if I want to add another number, I would need to modify the 12 in the hunk header. So this may be simpler:\r\n\r\n\r\n```diff\r\n--- a.bin\t2024-09-24 09:24:41.475235346 +0200\r\n+++ b.bin\t2024-09-24 09:24:41.475235346 +0200\r\n@@ LE @@\r\n@@ -0x00189ca8,uint32_t +0x00189ca8,uint32_t @@\r\n- 1799000 # Using a type that can map a constant into bytes\r\n+ 1920000 # Notice how I use decimal here\r\n```\r\n\r\n```diff\r\n--- a.bin\t2024-09-24 09:24:41.475235346 +0200\r\n+++ b.bin\t2024-09-24 09:24:41.475235346 +0200\r\n@@ LE @@\r\n@@ -0x00189ca8,uint32_t[3] +0x00189ca8,uint32_t[3] @@\r\n- 1799000, 1799001, 1799002\r\n+ 1920000,   0x123,    0777 # Notice 0777 is octal\r\n```\r\n\r\nAll those cases can be mapped to the basic format, where everything is a simple hex string. I don't like to just specify an hex string that could be confused with a number. Also, I think `\"\\x12\\x23\\x34\\x45\"` contains a lot of noise.\r\n\r\nSo maybe we can use something like this:\r\n\r\n```diff\r\n--- a.bin\t2024-09-24 09:24:41.475235346 +0200\r\n+++ b.bin\t2024-09-24 09:24:41.475235346 +0200\r\n@@ -0x00189ca8,char[4] +0x00189ca8,char[4] @@\r\n- '00 1b 73 58'\r\n+ '00 4c 1d 00'\r\n```\r\n\r\nNotice there is no byte order, as hex string don't need one. We can also probably specify that the default is LE, and only write BE when needed. There is also mixed endianness, but I think we can ignore those for now, and fall back to hex strings if needed.\r\n\r\nThis basic hex format is probably doable to be implemented in radiff2 without much effort, as we don't even need to output aligned words, just which bytes differ.\r\n\r\nI can try to modify radiff2, but I'm not familiar with the codebase so it may take a while.\r\n\r\nOn a more advanced implementation, one could determine what type of data is placed on which addresses of a binary file, and then produce the appropriate representation in a patch when changing those bytes. Otherwise fall back to hex strings.\r\n\r\nThe hex format should allow you to split the lines as you want, so you can write instructions properly:\r\n\r\n```diff\r\n--- a.bin\t2024-09-24 09:24:41.475235346 +0200\r\n+++ b.bin\t2024-09-24 09:24:41.475235346 +0200\r\n@@ -0x00189ca8,char[4] +0x00189ca8,char[4] @@\r\n- '01 46'       # mov r1, r0\r\n- '68 46'       # mov r0, sp\r\n+ '4f f2 ba fc' # bl 0x254526\r\n```\r\n\r\nIt would be also nice if this format is a superset of the patch format, so you can also apply normal patches with rapatch2 (or even mix hunks). I think this can be easily done by using the \"type\" specifier of the hunk. So `-0x00189ca8,char[4]` specifies a binary patch of 4 bytes, while `-00189308,4` specifies 4 lines at the 00189308 decimal line.\r\n\r\nThis may be useful if you have a mix of source code and blobs and you want to specify a patch to change both.","createdAt":"2024-09-26T20:05:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23379#issuecomment-2377834641","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6NuxPc","author":{"login":"rodarima"},"authorAssociation":"NONE","body":"This oneliner more or less implements the hex diff (addresses are decimal and start at 1):\r\n\r\n```diff\r\n% bindiff() { diff -u0p <(od -An -vtx1 -w1 $1) <(od -An -vtx1 -w1 $2) | sed '/^@@/s/,\\([0-9]*\\)/,char[\\1]/g' }\r\n% bindiff v2.bin v3.bin\r\n--- /proc/self/fd/11\t2024-09-26 22:10:25.813980894 +0200\r\n+++ /proc/self/fd/13\t2024-09-26 22:10:25.813980894 +0200\r\n@@ -1612969,char[3] +1612969,char[3] @@\r\n- 58\r\n- 73\r\n- 1b\r\n+ 00\r\n+ 4c\r\n+ 1d\r\n```","createdAt":"2024-09-26T20:13:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23379#issuecomment-2377847772","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6NwGBL","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Let's discuss it in here https://hackmd.io/@BCdr4EkGSKO51w6pf-JUow/r1h5idQRC/edit","createdAt":"2024-09-27T00:49:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23379#issuecomment-2378195019","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6OyJMe","author":{"login":"rodarima"},"authorAssociation":"NONE","body":"I have created a draft of the specification here: https://github.com/rodarima/xpatch/\r\n\r\nFor now I'm calling it \"xpatch\" as in extended patch. It is a superset of the patch(1) format, so you can mix plain text and binary patches in the same xpatch file.\r\n\r\nThere is a simple xdiff program as an example, but to implement a full xpatch I'll probably need to bring bison to parse the grammar properly and detect errors.\r\n\r\nI'm still thinking a bit about the format, but so far it seems suitable for all my usecases. I've also added support to parse hex strings directly by specifying the printf-like parsing format `%2x`. So \"aabbcc\" will parse to 3 numbers as hex pairs, but \"aabbc\" is wrong.","createdAt":"2024-10-06T17:02:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"ROCKET","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/23379#issuecomment-2395509534","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6V72b2","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"rapatch2 tool has been merged into master, now its the time to start implementing the required bits, want to submit a PR?","createdAt":"2024-12-03T20:32:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23379#issuecomment-2515494646","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6V806k","author":{"login":"rodarima"},"authorAssociation":"NONE","body":"> rapatch2 tool has been merged into master, now its the time to start implementing the required bits, want to submit a PR?\r\n\r\nI added a simple [proof of concept xpatch](https://github.com/rodarima/xpatch/tree/xpatch) that parses a small subset of the specification, but is not complete.\r\n\r\nI would like to first get some feedback on the syntax, before I attempt to implement the whole thing. Specially the [extended format](https://github.com/rodarima/xpatch/tree/xpatch?tab=readme-ov-file#extended-format).\r\n\r\nI think it covers all the use cases I wanted, but I also think it also has enough expressive power to store all file manipulations you may be doing with radare2 (or other tools).","createdAt":"2024-12-03T23:07:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23379#issuecomment-2515750564","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6WgSPw","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Ill find some time in the upcoming days to test your poc and give you proper feedback on the proposal ðŸ‘","createdAt":"2024-12-07T09:15:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23379#issuecomment-2525045744","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6dj_6b","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i finally reach the point to have time to look at it! sorry for the huge delay :D ","createdAt":"2025-02-07T16:49:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/23379#issuecomment-2643459739","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6fIAHn","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"here's the initial work towards supporting these patches in rapatch2\n\nhttps://github.com/radareorg/radare2/pull/23982\n\ni will be merging and pushing improvements, ill cleanup the logic and give you some feedback to try to clarify the standard.\n\none of the things i saw is that in +++ and --- lines, the tab char is used to separate the filename and the timestamp.\n\nradiff2 is still not generating this format, but i did some refactoring and cleanup to clarify the flags usage. it should be easy to support that but i want radiff2 to generate a smart patch in the sense that it will list aligned dwords instead of bytes, so its easier to read, also adding comments with the disasm if there's code involved in the place, etc. feel free to suggest your ideas and patches if you want to contribute too! i have so many other open fronts right now, but i wanted to get at least some basic work done here","createdAt":"2025-02-19T20:20:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23379#issuecomment-2669674983","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6fUkb2","author":{"login":"rodarima"},"authorAssociation":"NONE","body":"> here's the initial work towards supporting these patches in rapatch2\n> \n> [#23982](https://github.com/radareorg/radare2/pull/23982)\n\nNice!, thanks for the effort.\n\n> i will be merging and pushing improvements, ill cleanup the logic and give you some feedback to try to clarify the standard.\n> \n> one of the things i saw is that in +++ and --- lines, the tab char is used to separate the filename and the timestamp.\n\nThanks, I was following the [POSIX manual](https://pubs.opengroup.org/onlinepubs/009695399/utilities/patch.html) but they don't seem to mention it. I think tab is reasonably safe, I should update the spec.","createdAt":"2025-02-20T23:51:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23379#issuecomment-2672969462","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6fZE5i","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"It will be good to document all possible data types that can be handled. I have some more questions but i think i will solve them while implementing it. Im currently thinking in ways to abstract the code to make it cleaner to revert to work withour supping code. It will be good to have a bunch of tests for that too. Would you like to help on any of this in r2?","createdAt":"2025-02-21T10:20:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23379#issuecomment-2674151010","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6ffW1H","author":{"login":"rodarima"},"authorAssociation":"NONE","body":"I agree. I have a WIP implementation for a [standalone xpatch](https://github.com/rodarima/xpatch/blob/xpatch/src/xpatch.c) which may serve as to solve some ambiguities, although it is probably more convenient to rely on the spec only. I'm not familiar with r2 codebase, so I don't think I could help much on the r2 side.\n\nI plan to add some test cases, so far xpatch can apply a patch so that xdiff can create a suitable .xpatch output that can be fed again to xpatch to generate the same changes:\n\n```diff\n% cat 1.xpatch\n--- b860_102.bin\tfoo\n+++ b860_102.bin.2\tbar\n\nThis is just a comment, it will be ignored.\n\n@@ u8,u32 -0x1897d8,1 +0x1897d8,1 @@\n- 0x1b7358 # 1799000\n+ 0x1d4c00 # 1920000\n\n% ls b860_102.bin*\nb860_102.bin\n\n# Apply original xpatch once\n% src/xpatch < 1.xpatch 2>/dev/null\n% sha1sum b860_102.bin*\n5b465d58349393d7ac71ca71b26957988a016842  b860_102.bin\n6e3ff9c4ce5a9334e46670810d01db81e9ab2494  b860_102.bin.2\n\n# Recreate another .xpatch from the differences\n% src/xdiff b860_102.bin b860_102.bin.2 > 2.xpatch\n% cat 2.xpatch\n--- b860_102.bin\tfoo\n+++ b860_102.bin.2\tbar\n@@ u8,u32 -0x1897d8,1 +0x1897d8,1 @@\n- 0x1b7358\n+ 0x1d4c00\n\n# Remove modified binary and try again with the new 2.xpatch\n% rm b860_102.bin.2\n% src/xpatch < 2.xpatch 2>/dev/null\n% sha1sum b860_102.bin*\n5b465d58349393d7ac71ca71b26957988a016842  b860_102.bin\n6e3ff9c4ce5a9334e46670810d01db81e9ab2494  b860_102.bin.2\n\n# Checksums match\n```","createdAt":"2025-02-21T23:10:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23379#issuecomment-2675797319","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6hEK8i","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"https://github.com/radareorg/radare2/pull/24049","createdAt":"2025-03-05T22:30:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23379#issuecomment-2702225186","viewerDidAuthor":true}],"number":23379,"title":"Reversible binary patch format"},{"body":"This can be helpful to registre strings when anal.strings is set","comments":[],"number":23372,"title":"Add iz+/iz- like we have for classes (ic+/ic-)"},{"body":"This is important to not get users confused with unexpected behaviours\r\n\r\nfor example:\r\n\r\n* https://github.com/radareorg/radare2/pull/23361\r\n","comments":[],"number":23362,"title":"Every call to RNum.math or .get should check be checking for errors"},{"body":"maybe that will make is output more readable :? Im open to other non-abi breaking ideas","comments":[],"number":23349,"title":"Max column size in rtable"},{"body":"## Environment\r\n\r\n```sh\r\n>> LC_ALL=C date\r\nMon Sep  2 19:05:29 CST 2024\r\n>> LC_ALL=C r2 -v\r\nradare2 5.9.2 0 @ linux-x86-64\r\nbirth: git.5.9.2 2024-08-01__08:35:56\r\noptions: gpl release -O1 cs:5 cl:2 meson\r\n>> LC_ALL=C uname -ms\r\nLinux x86_64\r\n\r\n```\r\n\r\n## Description\r\n\r\nBy this guide: https://book.rada.re/debugger/windbg.html\r\n\r\nI want connect to a Windows kernel debug environment with VirutualBox. The debugee & debugger is OK with 2 virtual machines through a COM connection.\r\n\r\nNow I want the debugee directly connect to r2 debugger running on Linux (in this case, only 1 virtual machine is needed). \r\n\r\nThe pipe (`/tmp/virtualbox-com1`) is created by the debugee, but radare2 seems \"failed\" to connect to the socket, it just told me the socket is opend then stucked :\r\n\r\n```\r\n# R2_DEBUG=1 r2 -a x86 -b 64 -D winkd winkd:///tmp/virtualbox-com1\r\nDEBUG: Cannot find dart in PATH\r\nDEBUG: RCoreCmd: ft dylib *.dlopen *.dlsym *.dlclose *.mmap *.LoadLibrary *.GetProcAddress\r\nDEBUG: RCoreCmd: ft alloc *.malloc *.free$ *.calloc *.kalloc *.realloc\r\nDEBUG: RCoreCmd: ft time *.settimeofday *.gettimeofday *.time *.adjtime *.ctime *.timed *.date$ *.sleep *.Sleep *.usleep *.clock_nanosleep *.localtime *.asctime *.difftime *.gmtime *.mktime *.timelocal *.timegm *.tzfile *.tzset\r\nDEBUG: RCoreCmd: ft env *.getenv *.putenv *.unsetenv *.setenv *.GetEnvironmentVariable *.SetEnvironmentVariable *.ExpandEnvironmentStrings\r\nDEBUG: RCoreCmd: ft fs *.open$ *.close *.read$ *.write *.CloseHandle *.FindFirstFileW *._wfopen *._wstat *.ftruncate *.lseek *._chsize *.GetFullPathName *.realpath *.RemoveDirectory *.DeleteFile *.CreateFile *.WriteFile *.UnmapViewOfFile *.CreateFileMapping *.MapViewOfFile *.readlink *.chmod *.fchmod *.chown *.stat *.fstat *.lstat *.fstatat *.lstat64 *.stat64 *.chflags *.fchflags *.lchflags\r\nDEBUG: RCoreCmd: ft network *.socket *.connect *.bind$ *.listen *.accept *.sendto *.recvfrom *.gethostbyname *.htons *.ntohs\r\nDEBUG: RCoreCmd: ft threads *.pthread_create *.pthread_mutex_init *.pthread_cond_init *.CreateThread *.TerminateThread *.WaitForSingleObject *.GetCurrentThreadId\r\nDEBUG: RCoreCmd: ft process *.getpid *.getppid *.kill *.exit *.abort *.assert *.gethostid *.sethostid *.sysctl\r\nDEBUG: RCoreCmd: ft stdout ^printf *.puts *.write\r\nDEBUG: RCoreCmd: ft string *.strcat *.strcpy *.strncpy *.strlen *.strtok *.strstr *.strlcpy *.asprintf *.sprintf *.snprintf\r\nDEBUG: Cannot open directory '/usr/lib/radare2/5.9.2'\r\nDEBUG: Cannot open directory '/root/.local/share//radare2/plugins'\r\nDEBUG: Cannot open directory '/usr/lib/radare2-extras/5.9.2'\r\nDEBUG: Cannot open directory '/usr/lib/radare2-bindings/5.9.2'\r\nINFO: Opened pipe /tmp/virtualbox-com1 with fd 0x7\r\n\r\n```\r\n\r\nAm I miss understanding this guide: https://book.rada.re/debugger/windbg.html ?\r\n\r\nI think r2 originally suport kernel debug with winkd plugin on Linux environment. Am I right ?","comments":[],"number":23269,"title":"[winkd] Windows kernel debug, r2 can not debug with winkd plugin"},{"body":"## Environment\r\n\r\n```sh\r\n2024-09-01T18:06:30 CEST\r\nradare2 5.9.2 0 @ linux-x86-64\r\nbirth: git.5.9.2 2024-08-01__08:35:56\r\noptions: gpl release -O1 cs:5 cl:2 meson\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nWhen using visual panel mode and loading my default layout with `v default` I try to create another tab.\r\nBut when switching back to the first one the second gets overwritten with the loaded layout.\r\nI.e. I cannot have different layouts in the different tabs while they all get overwritten to the one loaded.\r\nIs this on purpose or how can I keep the different layouts in the different tabs?\r\n","comments":[{"id":"IC_kwDOAEpMrs6KfOy2","author":{"login":"grindingpeon"},"authorAssociation":"NONE","body":"I guess a video can show exactly what I mean:\r\n\r\nhttps://github.com/user-attachments/assets/8745ed86-3f1b-4857-9f74-f5e64d64ad56\r\n\r\n","createdAt":"2024-09-01T17:58:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23267#issuecomment-2323442870","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6KfdJc","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Looks like a bug to me. Each tab should have a different layout","createdAt":"2024-09-01T21:22:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23267#issuecomment-2323501660","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6KhU32","author":{"login":"grindingpeon"},"authorAssociation":"NONE","body":"Is there a way I can help solving the bug? :thinking: \r\nI am not the most proficient in C and debugging.","createdAt":"2024-09-02T07:19:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23267#issuecomment-2323992054","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6PYw2e","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Sorry i had other priorities and being busy, sure it will be great if you can try to fix the bug by yourself. Can you join the Discord o rTelegram chats? the best way to debug in panels is by using `eprintf()+sleep(1)`. but feel free to investigate by reading the code and making few changes to unsderstand the behaviour .\r\n\r\ncan you give me the keys you press so i can repro? because by using it the way i do it seems to work fine for me","createdAt":"2024-10-10T17:05:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23267#issuecomment-2405633438","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6QOI6F","author":{"login":"grindingpeon"},"authorAssociation":"NONE","body":"Yes, will join at some point, don't have time to work on it atm.\r\n\r\nThis is my layout named default stored inside `~/.local/share/radare2/r2panels`:\r\n```\r\n{\"Title\":\"Disassembly\",\"Cmd\":\"pd\",\"x\":0,\"y\":1,\"w\":99,\"h\":28},{\"Title\":\"Hexdump\",\"Cmd\":\"xc $r*16\",\"x\":0,\"y\":28,\"w\":87,\"h\":19},{\"Title\":\"RegisterRefs\",\"Cmd\":\"drr\",\"x\": 98,\"y\":1,\"w\":76,\"h\":28},{\"Title\":\"Stack\",\"Cmd\":\"pxr@r:SP\",\"x\":86,\"y\":28,\"w\":88,\"h\":19}\r\n```\r\n\r\nTo reproduce I type:\r\n\r\n```\r\nr2 -AA /bin/ls\r\n# inside radare2\r\nv default\r\nv\r\n# open new tab\r\ntt\r\n# switch\r\nt2\r\n# change layout\r\n\"j<enter>\r\n# switch back to first tab\r\nt1\r\n# switch back to second tab\r\nt2\r\n# the layout has been changed to to the default :/\r\n```","createdAt":"2024-10-17T13:56:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23267#issuecomment-2419625605","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6UJMa2","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Using your r2panels json i get this message all the time\r\n\r\n<img width=\"1188\" alt=\"Screenshot 2024-11-19 at 12 08 32â€¯PM\" src=\"https://github.com/user-attachments/assets/ef1bf3c3-144f-4955-8a82-c0ab72e7d306\">\r\n\r\ni think there are some more issues related to layout saving/restoring. not critical, but anoying, ill find some time after the big major refactoring abi breaking seasson that starts today. feel free to jump in when you have some spare time to chk it because i can't handle it right now. thanks!","createdAt":"2024-11-19T11:20:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23267#issuecomment-2485438134","viewerDidAuthor":true}],"number":23267,"title":"Multiple tabs in visual panel mode get overwritten by loaded layout when switching"},{"body":"Before showing the comment in one offset, determine if it fits on the same line or not\r\n\r\nthis will make graphs look better \r\n\r\n<img width=\"292\" alt=\"Screenshot 2024-08-28 at 20 31 56\" src=\"https://github.com/user-attachments/assets/66f69be8-6fdd-4364-818c-2ab34b8c9229\">\r\n\r\n\r\ninstead of \r\n<img width=\"281\" alt=\"Screenshot 2024-08-28 at 20 31 29\" src=\"https://github.com/user-attachments/assets/28fbdcf4-6381-4d2b-807b-374588414674\">\r\n","comments":[],"number":23236,"title":"Add option to show comments at right or top depending on length"},{"body":"## Environment\r\n\r\n```sh\r\nSun Jul  7 02:59:40 CST 2024\r\n\r\nradare2 5.9.3 32339 @ linux-x86-64\r\nbirth: git.5.7.8-3398-g3382a3e231 2024-07-07__02:43:10\r\ncommit: 3382a3e231f6a5bbf21facd8fdb2d5377354bdc1\r\noptions: gpl -O? cs:5 cl:2 make\r\n\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nI want to list all call refs from a function with `axff`, but it seems not work as expected.\r\n\r\nFirst, open attached file with `r2 -A -e bin.cache=true ncc`, and thats said I want to list call refs from the function `sym.doEventInternal`, so I use `axff @ sym.doEventInternal~CALL`.\r\n\r\nBut I found that there is no `sym.readInfo_log` on the list, althought it actually existed in the code.\r\n\r\nwe can make sure by using `aae @ sym.doEventInternal ;axl~sym.readInfo_log~sym.doEventInternal~CALL`\r\n\r\nThis will take some time but will give the result as the picture below:\r\n\r\n![image](https://github.com/radareorg/radare2/assets/10076774/6c524962-13a5-4aaf-8913-82fff721f7ca)\r\n\r\n## Test\r\n\r\n```sh\r\naxff @ sym.doEventInternal~sym.readInfo_log\r\n```\r\n[ncc.zip](https://github.com/user-attachments/files/16117065/ncc.zip)\r\n","comments":[{"id":"IC_kwDOAEpMrs6D1qo6","author":{"login":"ucgJhe"},"authorAssociation":"NONE","body":"@radare hi, i couldn't repro this with any random bin from testbin, so I just attached the file here.","createdAt":"2024-07-06T19:14:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23096#issuecomment-2211883578","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6D4BFf","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"The bin is now in the testbins and i checking for the best way to fix that bug now. thanks for reporting","createdAt":"2024-07-07T16:22:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23096#issuecomment-2212499807","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6EBXIj","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Some comments here:\r\n\r\n* the `@` modifier does nothing on aa subcommands\r\n* the reason why aae find those xrefs and aaa does not is because of function boundaries not handled properly\r\n* the boundaries in this function are wrong because jump tables are not implemented for mips (working on it rn) so the coverage is incorrect, and therefor the reference emulation fails","createdAt":"2024-07-08T18:57:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23096#issuecomment-2214949411","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6EBhNE","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"partial fix of the problem is here https://github.com/radareorg/radare2/pull/23099","createdAt":"2024-07-08T19:17:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23096#issuecomment-2214990660","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6EKyR7","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Can you try again with latest r2 from git?","createdAt":"2024-07-09T11:38:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23096#issuecomment-2217419899","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6ElIJ1","author":{"login":"ucgJhe"},"authorAssociation":"NONE","body":"@trufae Thx for your quick response, after test it again i think the issue still exist.\r\n\r\nThe command `axff @ sym.doEventInternal~CALL` now shows  function `sym.readInfo_log` but i found there are more missing functions that should be in the list like `sym.runProbe`, `sym.imp.strcpy`, `sym.unlockInfo_log` etc.\r\n\r\nAlso `aae @ sym.doEventInternal ;axl~sym.readInfo_log~sym.doEventInternal~CALL` counldn't found refs about `sym.readInfo_log` in the lastest version.\r\n\r\nAnd I have one more question here, why the result in the in the picture below show exact same functoin twice ?\r\n\r\n![image](https://github.com/user-attachments/assets/44812a78-39fa-4174-a47f-9267dea5bfa2)\r\n\r\nagain thx for your help on this, i really appreciated","createdAt":"2024-07-12T02:48:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23096#issuecomment-2224325237","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6HA1mm","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Sorry for the delay, crazy days here and i was busy with several other important bugs in my side . ill try to find some time to dig a little on this issue. im not sure why results are dupped. but could be related to a bug in anal/xrefs.c that permits to register the same ref twice for a reason i ignore. if anyone can dig on this i would appreciate any insights too\r\n\r\nthanks for testing","createdAt":"2024-08-02T11:17:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23096#issuecomment-2265143718","viewerDidAuthor":true}],"number":23096,"title":"`axff` didnt work as expected"},{"body":"* obf\r\n* obio\r\n* io\r\n* ob\r\n\r\n\r\nAll of them are calling RCore.binLoad()","comments":[{"id":"IC_kwDOAEpMrs6MOsKA","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"feelings on that @condret ?","createdAt":"2024-09-16T11:30:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23092#issuecomment-2352661120","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6UZzZC","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"i never really used the ob commands, because they never seem to work as i expect","createdAt":"2024-11-21T00:06:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23092#issuecomment-2489792066","viewerDidAuthor":false}],"number":23092,"title":"Confusing dupped commands"},{"body":"","comments":[{"id":"IC_kwDOAEpMrs661LTr","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Should be possible already, just not tested. a example in r2skel will be welcome too","createdAt":"2025-07-30T00:32:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/23061#issuecomment-3134502123","viewerDidAuthor":true}],"number":23061,"title":"Add support for demangling plugins"},{"body":"There are other tickets aiming to define a better way to store the path of a plugin, to avoid loading them twice, etc","comments":[],"number":23034,"title":"Add a command to check timestamp of plugins to reload them"},{"body":"## Description\r\n\r\nBuild system misdetects the triple:\r\n```\r\nchecking build system type... PowerMacintosh-unknown-darwin\r\nchecking host system type... PowerMacintosh-unknown-darwin\r\nchecking target system type... PowerMacintosh-unknown-darwin\r\n```\r\nThe issue is likely that `mk/gcc.mk` uses `uname -m` on Darwin, but that does not return the processor family or an arch; on a powerpc Mac is returns a rather unusable `Power Macintosh`.\r\n\r\nWhat returns the correct value in a case of a `ppc` build is `uname -p`. Notice, though, that this still cannot be used with `-arch` flag, since it is _not_ the build arch, but cpu family. And for `ppc64` build the correct triple will be `powerpc64-apple-darwin*`.\r\n\r\nAlso, for macOS it should be `powerpc*-apple-darwin*`; not sure what is the correct value for Pure Darwin (if anyone still uses it).\r\n\r\n## Environment\r\n\r\n```\r\n36-244% date\r\nTue May 21 16:47:29 CST 2024\r\n36-244% uname -ms\r\nDarwin Power Macintosh\r\n```","comments":[{"id":"IC_kwDOAEpMrs5-kgQW","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"This triplet is generated by acr. would you like to try to submit a pr there to fix the â€œunknownâ€ id?","createdAt":"2024-05-21T21:50:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22956#issuecomment-2123498518","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5-lyIV","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"But this shouldnt affect de build","createdAt":"2024-05-22T04:15:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22956#issuecomment-2123833877","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5-lzix","author":{"login":"barracuda156"},"authorAssociation":"NONE","body":"@trufae The build is broken for unrelated reason: https://github.com/radareorg/radare2/issues/22955 \n\nI will check whatâ€™s going on with the triple here. Even if affecting nothing, it will be nice to have it fixed.","createdAt":"2024-05-22T04:22:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22956#issuecomment-2123839665","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6AQO9I","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Can you do the fix in https://github.com/radareorg/acr/blob/ac9f0d400a6152d04fa30cffea2c79c29ab156cd/src/acr-sh#L1628 to generate the right triplet?","createdAt":"2024-06-06T08:44:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22956#issuecomment-2151739208","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6VrpuW","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"ping","createdAt":"2024-12-02T11:13:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22956#issuecomment-2511248278","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6VtNrG","author":{"login":"barracuda156"},"authorAssociation":"NONE","body":"Thanks for a reminder, I will return to this in a couple of days.","createdAt":"2024-12-02T14:14:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22956#issuecomment-2511657670","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6VvInM","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Awesome!","createdAt":"2024-12-02T16:58:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22956#issuecomment-2512161228","viewerDidAuthor":true}],"number":22956,"title":"Wrong value of triple on PowerPC: `PowerMacintosh-unknown-darwin` instead of `powerpc-apple-darwin`"},{"body":"## Description\r\n\r\nThe build system picks a wrong compiler, once in `arch-arm64` directory, ignoring environment settings. Up to that point the right gcc is used.\r\n\r\n```\r\nmake[5]: Leaving directory `/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/fs'\r\n\"/opt/local/bin/gcc-mp-13 -dynamiclib -fPIC -o libr_fs.dylib -Wl,-install_name,/opt/local/lib/libr_fs.dylib p/fs_ext2.o p/fs_fat.o p/fs_fb.o p/fs_hfs.o p/fs_hfsplus.o p/fs_io.o p/fs_iso9660.o p/fs_jfs.o p/fs_minix.o p/fs_ntfs.o p/fs_posix.o p/fs_r2.o p/fs_reiserfs.o p/fs_sfs.o p/fs_tar.o p/fs_udf.o p/fs_ufs.o p/fs_xfs.o p/fs_zip.o fs.o fs_file.o fs_shell.o  -L/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/util -L/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/io -L/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/socket -L/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/cons -L/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/crypto -lr_util -lr_io -lr_socket -lr_cons -lr_crypto   -fPIC -fvisibility=hidden   -L/opt/local/lib -Wl,-headerpad_max_install_names -arch ppc /opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/../shlr/grub/libgrubfs.a -lzip -fvisibility=hidden\"\r\nmake[4]: Leaving directory `/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/fs'\r\nmake[4]: Entering directory `/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/fs'\r\nmake[4]: `libr_fs.a' is up to date.\r\nmake[4]: Leaving directory `/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/fs'\r\nmake[3]: Leaving directory `/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/fs'\r\ncd arch-arm64 && git checkout -q radare2-wip > /dev/null && git reset --hard 55d73c6bbb94448a5c615933179e73ac618cf876\r\nHEAD is now at 55d73c6 Remove c99 dependency\r\n/usr/bin/make arm64dis.a\r\nmake[5]: Entering directory `/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/arch/p/arm/v35'\r\ncc -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/arch/p/arm/v35/arch-arm64/disassembler/ -fPIC -DUNUSED=R_UNUSED -fPIC   -c -o arch-arm64/disassembler/decode.o arch-arm64/disassembler/decode.c\r\ncc -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/arch/p/arm/v35/arch-arm64/disassembler/ -fPIC -DUNUSED=R_UNUSED -fPIC   -c -o arch-arm64/disassembler/decode0.o arch-arm64/disassembler/decode0.c\r\ncc -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/arch/p/arm/v35/arch-arm64/disassembler/ -fPIC -DUNUSED=R_UNUSED -fPIC   -c -o arch-arm64/disassembler/decode1.o arch-arm64/disassembler/decode1.c\r\ncc -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/arch/p/arm/v35/arch-arm64/disassembler/ -fPIC -DUNUSED=R_UNUSED -fPIC   -c -o arch-arm64/disassembler/decode2.o arch-arm64/disassembler/decode2.c\r\ncc -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/arch/p/arm/v35/arch-arm64/disassembler/ -fPIC -DUNUSED=R_UNUSED -fPIC   -c -o arch-arm64/disassembler/decode_fields32.o arch-arm64/disassembler/decode_fields32.c\r\ncc -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/arch/p/arm/v35/arch-arm64/disassembler/ -fPIC -DUNUSED=R_UNUSED -fPIC   -c -o arch-arm64/disassembler/decode_scratchpad.o arch-arm64/disassembler/decode_scratchpad.c\r\narch-arm64/disassembler/decode.c: In function â€˜aarch64_decomposeâ€™:\r\narch-arm64/disassembler/decode.c:13: warning: integer constant is too large for â€˜longâ€™ type\r\narch-arm64/disassembler/decode.c:14: warning: integer constant is too large for â€˜longâ€™ type\r\ncc -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/arch/p/arm/v35/arch-arm64/disassembler/ -fPIC -DUNUSED=R_UNUSED -fPIC   -c -o arch-arm64/disassembler/encodings_dec.o arch-arm64/disassembler/encodings_dec.c\r\narch-arm64/disassembler/decode_scratchpad.c:365:7: error: invalid suffix \"b00000\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:367:7: error: invalid suffix \"b00001\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:369:7: error: invalid suffix \"b00010\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:371:7: error: invalid suffix \"b00011\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:373:7: error: invalid suffix \"b00100\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:375:7: error: invalid suffix \"b00101\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:377:7: error: invalid suffix \"b00110\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:379:7: error: invalid suffix \"b00111\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:381:7: error: invalid suffix \"b01000\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:383:7: error: invalid suffix \"b01001\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:385:7: error: invalid suffix \"b01010\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:387:7: error: invalid suffix \"b01011\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:389:7: error: invalid suffix \"b01100\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:391:7: error: invalid suffix \"b01101\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:393:7: error: invalid suffix \"b01110\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:395:7: error: invalid suffix \"b01111\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:397:7: error: invalid suffix \"b10000\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:399:7: error: invalid suffix \"b10001\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:401:7: error: invalid suffix \"b10010\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:403:7: error: invalid suffix \"b10011\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:405:7: error: invalid suffix \"b10100\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:407:7: error: invalid suffix \"b10101\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:409:7: error: invalid suffix \"b10110\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:411:7: error: invalid suffix \"b10111\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:413:7: error: invalid suffix \"b11000\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:415:7: error: invalid suffix \"b11001\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:417:7: error: invalid suffix \"b11010\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:419:7: error: invalid suffix \"b11011\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:421:7: error: invalid suffix \"b11100\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:423:7: error: invalid suffix \"b11101\" on integer constant\r\n. . .\r\n```\r\n\r\n## Environment\r\n\r\n```\r\n36-244% date\r\nTue May 21 16:47:29 CST 2024\r\n36-244% uname -ms\r\nDarwin Power Macintosh\r\n```","comments":[{"id":"IC_kwDOAEpMrs5-vPpt","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"How are you setting the compiler? export CC=..? Maybe having a file in mk/ will do the job? Have you tried with meson instead of make?","createdAt":"2024-05-23T06:15:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22955#issuecomment-2126314093","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6Vror-","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"try with meson please","createdAt":"2024-12-02T11:11:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22955#issuecomment-2511244030","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6VtQt7","author":{"login":"barracuda156"},"authorAssociation":"NONE","body":"> try with meson please\n\nWorth trying indeed, maybe it can also resolve other problems (wrong triples etc.) as a consequence.","createdAt":"2024-12-02T14:19:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22955#issuecomment-2511670139","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6VuAiQ","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"the wrong triple thing should be 1 line fix in acr, if you tell me what is showing now and what should show i can fix it. it's just a shellscript","createdAt":"2024-12-02T15:34:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22955#issuecomment-2511866000","viewerDidAuthor":true}],"number":22955,"title":"Build system picks an arbitrary `cc` for `arch-arm64` which breaks compilation"},{"body":"## Environment\r\n\r\n```sh\r\nThu May  9 02:36:08 PM EDT 2024\r\nradare2 5.9.0 0 @ linux-x86-64\r\nbirth: git.5.9.0 2024-04-28__16:01:19\r\ncommit: unknown\r\noptions: gpl release -O1 cs:5 cl:2 meson\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\n`afvs` allows you to create local variables which are structs, and when the stack is not adjusted, displays references to struct members in the disassembly. However, when the stack is adjusted, only the first struct member is displayed.\r\n\r\n## Test\r\n\r\nCompile the following program with `gcc -O1 -mno-red-zone`:\r\n```c\r\nstruct s { int a; int b; };\r\nint main() {\r\n\tvolatile struct s s_;\r\n\ts_.a=2;\r\n\ts_.b=3;\r\n\treturn s_.b;\r\n}\r\n```\r\nand run the following sequence of r2 commands:\r\n```r2\r\ns main\r\naf\r\n\"td struct s { int a; int b; };\"\r\nafvs -8 s_ s\r\npdf\r\n```\r\nThis prints\r\n```asm\r\nâ”Œ 29: int main (int argc, char **argv, char **envp);\r\nâ”‚           ; var s s_ @ rsp+0x8\r\nâ”‚           0x00001119      4883ec10       sub rsp, 0x10\r\nâ”‚           0x0000111d      c744240802..   mov dword [s_.a], 2\r\nâ”‚           0x00001125      c744240c03..   mov dword [rsp + 0xc], 3\r\nâ”‚           0x0000112d      8b44240c       mov eax, dword [rsp + 0xc]\r\nâ”‚           0x00001131      4883c410       add rsp, 0x10\r\nâ””           0x00001135      c3             ret\r\n```\r\nNote that the instruction at `0x0000111d` has its destination replaced `s_.a`. However, the following instruction does not have its destination replaced with `s_.b`. If the program is instead compiled with `gcc -O1 -mred-zone`, the stack is not adjusted, and the output is\r\n```asm\r\nâ”Œ 21: int main (int argc, char **argv, char **envp);\r\nâ”‚           ; var s s_ @ rsp-0x8\r\nâ”‚           0x00001119      c74424f802..   mov dword [s_.a], 2\r\nâ”‚           0x00001121      c74424fc03..   mov dword [s_.b], 3\r\nâ”‚           0x00001129      8b4424fc       mov eax, dword [s_.b]\r\nâ””           0x0000112d      c3             ret\r\n```\r\nIn this case, the accesses to both `s_.a` and `s_.b` are marked.\r\n[Here is a zip file containing both binaries.](https://github.com/radareorg/radare2/files/15266855/r2-bug-binaries.zip)","comments":[],"number":22910,"title":"afvs does not indicate non-initial struct members when the stack is adjusted"},{"body":"","comments":[],"number":22902,"title":"axF is very slow"},{"body":"## Environment\r\n\r\n```\r\nradare2 5.9.1 32041 @ linux-x86-64\r\nbirth: git.5.9.0-124-g4c363ac228 2024-05-01__03:36:10\r\ncommit: 4c363ac228df2e24d1345796c103505e70adfbcb\r\noptions: gpl -O? cs:5 cl:2 make\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nr2 stalls and has to be killed via ctrl+\\ or `kill -9` when it fails to connect with `connect=[addr]:[port]` in a rr2 profile.\r\n\r\n## Test\r\n```\r\n#!/bin/rarun2\r\nconnect=localhost:7072\r\nprogram=a.out\r\n```\r\n`nc -l -p 7072` (in another terminal)\r\n`r2 -r profile.rr2` \r\ndoo\r\ndc\r\n(kill nc, stop listening)\r\ndoo \r\n(restart nc) \r\ndoo \r\ndc\r\n(stall, have to kill with ctrl+\\\\) \r\n\r\n","comments":[],"number":22892,"title":"Debugger Stalls W/ Connect In Profile"},{"body":"## Environment\r\n\r\n```\r\nradare2 5.9.1 32041 @ linux-x86-64\r\nbirth: git.5.9.0-124-g4c363ac228 2024-05-01__03:36:10\r\ncommit: 4c363ac228df2e24d1345796c103505e70adfbcb\r\noptions: gpl -O? cs:5 cl:2 make\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\ndbt does not show output beyond one line. Changing dbg.btalgo has no effect. \r\n\r\n## Test\r\n```\r\nvoid another() {\r\n\treturn;\r\n}\r\n\r\nvoid other() {\r\n\treturn another ();\r\n}\r\n\r\nint main() {\r\n\tother ();\r\n\treturn 0;\r\n}\r\n```\r\ngcc dbt.c -o dbt\r\nr2 -d dbt \r\ndb main sym.other sym.another\r\ndc \r\ndbt\r\n`0  0x5cc18712a130     sp: 0x0                 0    [??]  main sym.other+16`\r\ndc\r\ndbt\r\n`0  0x5cc18712a120     sp: 0x0                 0    [??]  rip sym.another+7`\r\ndc\r\ndbt\r\n`0  0x5cc18712a119     sp: 0x0                 0    [??]  rip entry.init0+9`\r\n\r\n","comments":[{"id":"IC_kwDOAEpMrs59Rbio","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"U can try one of the alternative algorithms. Its been a while since this code was written and compilers generate different code. Please give it a try\r\n\r\n![IMG_9321](https://github.com/radareorg/radare2/assets/6431515/2bddc114-ec90-4d74-b27c-dc2bcd23ae49)\r\n","createdAt":"2024-05-09T00:40:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22891#issuecomment-2101721256","viewerDidAuthor":true}],"number":22891,"title":"dbt never shows anything but current function"},{"body":"## Environment\r\n\r\n```Mon Apr 22 12:51:44 PM PDT 2024\r\nradare2 5.9.1 32041 @ linux-x86-64\r\nbirth: git.5.9.0-124-g4c363ac228 2024-05-01__03:36:10\r\ncommit: 4c363ac228df2e24d1345796c103505e70adfbcb\r\noptions: gpl -O? cs:5 cl:2 make\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nVisual r2rop, reached via browsing in panels mode doesn't show ROP gadgets, although pressing the arrow keys does something. Pressing enter when nothing is selected leads to 0xff's in ROP chain. `pdp` displays thousands of invalid ROPs. \r\n\r\n## Test\r\n\r\nr2 /usr/lib/libc.so.6 \r\n[v]\r\n[b]\r\n[r]\r\n\\* (r2rop generates its ROP chains via /Rl)","comments":[],"number":22890,"title":"visual-r2rop does not work "},{"body":"add an option to draw negative branch lines in the right side of the disassembly instead of mixing both types in the same place as inspired by https://x.com/TitzerBL/status/1780978005495644370\r\n\r\n![IMG_8312](https://github.com/radareorg/radare2/assets/6431515/97749578-0d3a-46d8-9d08-8e6746dcc682)\r\n","comments":[],"number":22857,"title":"Separate blocks dor ascii art branch lines"},{"body":"Stuff like `[[0x8080]]` or  `[10+[0x8080+rbp]*4]` will be very useful to be supported.","comments":[],"number":22853,"title":"Support nested memory references in the RNum operations"},{"body":"can be handy for android systems to cd into app directories without too much hassle like this https://github.com/matan-h/adb-shell\r\nand probably applicable to other systems like macos for the user/system app, program files in windows, etc","comments":[],"number":22839,"title":"Implement CDPATH env var the same way we handle PATH for executables"},{"body":"## Environment\r\n\r\nThu 11 Apr 2024 10:18:56 AM EDT\r\nradare2 5.8.8 1 @ linux-x86-64\r\nbirth: git.5.8.8 2023-06-08__14:00:41\r\ncommit: ea7f0356519884715cf1d5fba16042bac72b2df5\r\noptions: gpl -O1 cs:5 cl:0 make\r\nLinux x86_64\r\n\r\n## Description\r\n\r\nRunning r2 with `-e bin.cache=true` on a 32 bit ARM kernel module replaces instructions referencing relocated addresses with `stmdaeq`\r\n\r\n![r2-bug](https://github.com/radareorg/radare2/assets/24529911/985b52d6-a36e-43e9-87bb-5eebc5db3215)\r\n\r\n## Test\r\n\r\nrun `r2 -e bin.cache=true` on the following kernel module, after unzipping:\r\n\r\n[media_clock.ko.zip](https://github.com/radareorg/radare2/files/14947860/media_clock.ko.zip)\r\n\r\n","comments":[{"id":"IC_kwDOAEpMrs58HyDv","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"looks like R_ARM_CALL relocs that point outside the GOT table are not working well. working on that in this pr https://github.com/radareorg/radare2/pull/22877","createdAt":"2024-04-29T10:52:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22822#issuecomment-2082414831","viewerDidAuthor":true}],"number":22822,"title":"Instructions with relocated addresses are replaced with stmdaeq"},{"body":"## Environment\r\n\r\n```\r\nMac OS X 10.4.11 Tiger\r\nDarwin Kernel Version 8.11.1: Wed Oct 10 18:24:42 PDT 2007; root:xnu-792.25.20~1/RELEASE_PPC Power Macintosh powerpc\r\n```\r\n\r\n```\r\nUsing built-in specs.\r\nCOLLECT_GCC=gcc\r\nCOLLECT_LTO_WRAPPER=/usr/local/Cellar/gcc/7.3.0/libexec/gcc/powerpc-apple-darwin8.11.0/7.3.0/lto-wrapper\r\nTarget: powerpc-apple-darwin8.11.0\r\nConfigured with: ../configure --build=powerpc-apple-darwin8.11.0 --prefix=/usr/local/Cellar/gcc/7.3.0 --libdir=/usr/local/Cellar/gcc/7.3.0/lib/gcc/7 --enable-languages=c,c++,objc,obj-c++,fortran --program-suffix=-7 --with-gmp=/usr/local/opt/gmp --with-mpfr=/usr/local/opt/mpfr --with-mpc=/usr/local/opt/libmpc --with-isl=/usr/local/opt/isl --with-system-zlib --enable-checking=release --with-pkgversion='Tigerbrew gcc 7.3.0' --with-bugurl=https://github.com/mistydemeo/tigerbrew/issues --with-dwarf2 --disable-nls --disable-multilib\r\nThread model: posix\r\ngcc version 7.3.0 (Tigerbrew gcc 7.3.0) \r\n\r\n```\r\n\r\n## Description\r\n\r\nBuilding failed during configuration process.\r\n\r\n## Test\r\n\r\n```\r\nsys/install.sh                                       \r\n/Users/armdn/Sources/radare2\r\nWARNING: Updating from remote repository\r\nremote: Enumerating objects: 37, done.\r\nremote: Counting objects: 100% (37/37), done.\r\nremote: Compressing objects: 100% (9/9), done.\r\nremote: Total 24 (delta 20), reused 17 (delta 15), pack-reused 0\r\nUnpacking objects: 100% (24/24), 2.41 KiB | 10.00 KiB/s, done.\r\nFrom https://github.com/radareorg/radare2\r\n * branch                  master     -> FETCH_HEAD\r\n   a543e966a1..46f459fd61  master     -> origin/master\r\nUpdating a543e966a1..46f459fd61\r\nFast-forward\r\n libr/core/cmd.c       | 13 ++++++++++++-\r\n libr/core/rtr.c       |  2 +-\r\n libr/core/visual.c    | 32 +++++++++++++++++---------------\r\n libr/io/p/io_ptrace.c |  7 +++++--\r\n libr/reg/rvalue.c     |  4 ++--\r\n libr/socket/socket.c  |  7 ++++---\r\n 6 files changed, 41 insertions(+), 24 deletions(-)\r\nWarning: Cannot find system wide capstone\r\n[*] Finding make is /usr/bin/make OK\r\n[*] Checking out capstone... ARGS=\r\n/usr/local/bin/zsh ./sys/build.sh\r\n/Users/armdn/Sources/radare2\r\n/Users/armdn/Sources/radare2\r\n./configure --prefix=/usr/local\r\nconfigure-plugins: Copying dist/plugins-cfg/plugins.def.cfg\r\nconfigure-plugins: Loading ./plugins.cfg ..\r\nconfigure-plugins: Generating libr/config.h\r\nconfigure-plugins: Generating libr/asm/d/config.inc\r\nconfigure-plugins: Generating libr/config.mk\r\nSHARED: io.shm\r\nSTATIC: anal.a2f anal.null arch.6502 arch.6502_cs arch.8051 arch.alpha arch.amd29k arch.any_as arch.any_vasm arch.arc arch.arm arch.arm_cs arch.arm_gnu arch.arm_v35 arch.avr arch.bf arch.bpf arch.bpf_cs arch.chip8 arch.cr16 arch.cris arch.dalvik arch.dis arch.ebc arch.evm arch.fslsp arch.gb arch.h8300 arch.hppa_gnu arch.i4004 arch.i8080 arch.java arch.jdh8 arch.kvx arch.lanai arch.lh5801 arch.lm32 arch.loongarch_gnu arch.lua arch.m680x_cs arch.m68k_cs arch.m68k_gnu arch.mcore arch.mcs96 arch.mips_cs arch.mips_gnu arch.msp430 arch.nds32 arch.nios2 arch.null arch.or1k arch.pdp11 arch.pic arch.pickle arch.ppc_cs arch.ppc_gnu arch.propeller arch.pyc arch.riscv arch.riscv_cs arch.rsp arch.s390_cs arch.s390_gnu arch.sh arch.sh_cs arch.sm5xx arch.snes arch.sparc_cs arch.sparc_gnu arch.tms320 arch.tricore arch.tricore_cs arch.v810 arch.v850 arch.vax arch.wasm arch.ws arch.x86_cs arch.x86_nasm arch.x86_nz arch.xap arch.xcore_cs arch.xtensa arch.z80 asm.null bin.any bin.art bin.avr bin.bf bin.bflt bin.bios bin.bootimg bin.cgc bin.coff bin.dex bin.dis bin.dmp64 bin.dol bin.dyldcache bin.elf bin.elf64 bin.fs bin.hunk bin.io bin.java bin.le bin.lua bin.mach0 bin.mach064 bin.mbn bin.mdmp bin.menuet bin.msx bin.mz bin.ne bin.nes bin.nin3ds bin.ninds bin.ningb bin.ningba bin.nro bin.nso bin.off bin.omf bin.p9 bin.pcap bin.pdp11 bin.pe bin.pe64 bin.pebble bin.prg bin.psxexe bin.pyc bin.qnx bin.rel bin.s390 bin.sfc bin.smd bin.sms bin.symbols bin.te bin.tic bin.vsf bin.wad bin.wasm bin.xbe bin.xcoff64 bin.xnu_kernelcache bin.xtac bin.z64 bin.zimg bin_ldr.ldr_linux bin_xtr.xtr_dyldcache bin_xtr.xtr_fatmach0 bin_xtr.xtr_pemixed bin_xtr.xtr_sep64 bin_xtr.xtr_xalz bp.arm bp.bf bp.mips bp.null bp.ppc bp.riscv bp.x86 core.a2f core.agD core.java core.sixref crypto.aes crypto.aes_cbc crypto.aes_wrap crypto.base64 crypto.base91 crypto.blowfish crypto.cps2 crypto.des crypto.entropy crypto.punycode crypto.rc2 crypto.rc4 crypto.rc6 crypto.rol crypto.ror crypto.rot crypto.serpent crypto.sm4 crypto.strhash crypto.xor debug.bf debug.bochs debug.esil debug.evm debug.gdb debug.io debug.native debug.null debug.qnx debug.rap debug.rv32ima debug.winkd egg.exec egg.xor esil.dummy esil.forth esil.null fs.ext2 fs.fat fs.fb fs.hfs fs.hfsplus fs.io fs.iso9660 fs.jfs fs.minix fs.ntfs fs.posix fs.r2 fs.reiserfs fs.sfs fs.tar fs.udf fs.ufs fs.xfs fs.zip io.ar io.bfdbg io.bochs io.cyclic io.debug io.default io.dsc io.fd io.gdb io.gprobe io.gzip io.http io.ihex io.isotp io.mach io.malloc io.mmap io.null io.procpid io.ptrace io.qnx io.r2k io.r2pipe io.r2web io.rap io.rbuf io.reg io.self io.serial io.socket io.sparse io.sysgdb io.tcpslurp io.treebuf io.w32 io.w32dbg io.winedbg io.winkd io.xalz io.xattr io.zip lang.c lang.cpipe lang.pipe lang.rust lang.spp lang.v lang.vala lang.zig parse.6502_pseudo parse.arm_pseudo parse.att2intel parse.avr_pseudo parse.bpf_pseudo parse.chip8_pseudo parse.dalvik_pseudo parse.evm_pseudo parse.m68k_pseudo parse.mips_pseudo parse.ppc_pseudo parse.riscv_pseudo parse.sh_pseudo parse.tms320_pseudo parse.v850_pseudo parse.wasm_pseudo parse.x86_pseudo parse.z80_pseudo\r\ncp: plugins.cfg and ./plugins.cfg are identical (not copied).\r\nchecking build system type... PowerMacintosh-unknown-darwin\r\nchecking host system type... PowerMacintosh-unknown-darwin\r\nchecking target system type... PowerMacintosh-unknown-darwin\r\nchecking for working directories... current\r\nusing prefix '/usr/local'\r\nchecking for c compiler... gcc\r\nchecking for dynamic library... required\r\nchecking for pkg-config... /usr/local/bin/pkg-config\r\nchecking for patch... /usr/bin/patch\r\nchecking for ar... /usr/bin/ar\r\nchecking for git... /usr/local/bin/git\r\nchecking for gperf... /usr/bin/gperf\r\nchecking for libmagic ... no\r\nchecking for linux/can.h... no\r\nchecking pkg-config flags for liblz4... no\r\nchecking for libz ... yes\r\nchecking for libzip ... no\r\nchecking for libxxhash ... no\r\nchecking declaration of ADDR_NO_RANDOMIZE in sys/personality.h... no\r\nchecking declaration of __GLIBC__ in features.h... no\r\nchecking function arc4random_uniform() in c... no\r\nchecking function explicit_bzero() in c... no\r\nchecking function explicit_memset() in c... no\r\nchecking function clock_nanosleep() in c... no\r\nchecking function sigaction() in c... yes\r\nchecking function clock_gettime() in c... no\r\nchecking cflags  -std=gnu99... yes\r\nchecking version of library libuv >= 1.0.0... no\r\ngenerating pkgcfg/r_egg.pc\r\ngenerating pkgcfg/r_io.pc\r\ngenerating pkgcfg/r_esil.pc\r\ngenerating pkgcfg/r_cons.pc\r\ngenerating pkgcfg/r_socket.pc\r\ngenerating pkgcfg/r_reg.pc\r\ngenerating pkgcfg/r_bp.pc\r\ngenerating pkgcfg/r_flag.pc\r\ngenerating pkgcfg/r_bin.pc\r\ngenerating pkgcfg/r_lang.pc\r\ngenerating pkgcfg/r_syscall.pc\r\ngenerating pkgcfg/r_config.pc\r\ngenerating pkgcfg/r_fs.pc\r\ngenerating pkgcfg/r_util.pc\r\ngenerating pkgcfg/r_magic.pc\r\ngenerating pkgcfg/r_search.pc\r\ngenerating pkgcfg/r_arch.pc\r\ngenerating pkgcfg/r_crypto.pc\r\ngenerating pkgcfg/r_anal.pc\r\ngenerating pkgcfg/r_asm.pc\r\ngenerating pkgcfg/r_debug.pc\r\ncreating ./config-user.mk\r\ncreating libr/include/r_userconf.h\r\ncreating pkgcfg/r_core.pc\r\ncleaning temporally files... done\r\n\r\nFinal report:\r\n - BUILD = PowerMacintosh-unknown-darwin\r\n - CC = gcc\r\n - CFLAGS = \"\"\r\n - DEBUGGER = 1\r\n - HAVE_ARC4RANDOM_UNIFORM = 0\r\n - HAVE_EXPLICIT_BZERO = 0\r\n - HAVE_EXPLICIT_MEMSET = 0\r\n - HAVE_FORK = 1\r\n - HAVE_GPERF = 1\r\n - HAVE_LIBUV = 0\r\n - HAVE_LIB_GMP = 0\r\n - WANT_DEBUGSTUFF = 1\r\n - HAVE_OPENSSL = 0\r\n - WANT_SSL_CRYPTO = 0\r\n - HAVE_PTRACE = 1\r\n - HOST = PowerMacintosh-unknown-darwin\r\n - LDFLAGS = \"\"\r\n - LIBVERSION = 5.9.1\r\n - PKGCONFIG = /usr/local/bin/pkg-config\r\n - PREFIX = /usr/local\r\n - R_CHECKS_LEVEL = 2\r\n - TARGET = PowerMacintosh-unknown-darwin\r\n - USERCC = gcc\r\n - USEROSTYPE = darwin\r\n - USE_CAPSTONE = 0\r\n - USE_LIB_MAGIC = 0\r\n - NEW_IO_CACHE = \"\"\r\n - USE_LIB_XXHASH = 0\r\n - USE_LIB_ZIP = 0\r\n - USE_PTRACE_WRAP = 0\r\n - USE_SYSLZ4 = 0\r\n - VERSION = 5.9.1\r\n - WANT_DYLINK = 1\r\n - USE_SMALLZ4 = \"\"\r\nlibr/config.mk:38: *** ERROR: Cannot find R2DIR. Please define this variable.  Stop.\r\n```\r\n","comments":[{"id":"IC_kwDOAEpMrs55oqPn","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"The only reason I can think that could lead to this error is that there's an issue with make. Because it means that LIBR is not set and it's generated 3 lines above the error like this:\r\n\r\n```\r\nLIBR:=$(abspath $(dir $(lastword $(MAKEFILE_LIST))))\r\n```\r\n\r\nCan you check the version of make? can you install a newer version of gnumake from tigerbrew? i assume we can find a more portable way to define this variable.. But i can't repro an dfrom you rlogs it seems that is using make from /usr/bin instead of the Cellar.","createdAt":"2024-04-05T22:18:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/22801#issuecomment-2040701927","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs55rN7j","author":{"login":"armdn"},"authorAssociation":"NONE","body":"> The only reason I can think that could lead to this error is that there's an issue with make. Because it means that LIBR is not set and it's generated 3 lines above the error like this:\r\n> \r\n> ```\r\n> LIBR:=$(abspath $(dir $(lastword $(MAKEFILE_LIST))))\r\n> ```\r\n> \r\n> Can you check the version of make? can you install a newer version of gnumake from tigerbrew? i assume we can find a more portable way to define this variable.. But i can't repro an dfrom you rlogs it seems that is using make from /usr/bin instead of the Cellar.\r\n\r\nOk, will try that!","createdAt":"2024-04-07T08:47:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22801#issuecomment-2041372387","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs56RNgJ","author":{"login":"armdn"},"authorAssociation":"NONE","body":"Installed newer version of gmake, and yes it went a little further, with this error in end:\r\n\r\n```\r\nranlib: file: librz.a(zip_source_deflate.o) has no symbols\r\nranlib: file: librz.a(zip_source_pkware.o) has no symbols\r\nsys.c: In function 'r_sys_pid_to_path':\r\nsys.c:1213:9: note: #pragma message: TODO getpidproc\r\n #pragma message(\"TODO getpidproc\")\r\n         ^~~~~~~\r\nsys.c: In function 'r_sys_backtrace':\r\nsys.c:346:8: warning: calling '__builtin_frame_address' with a nonzero argument is unsafe [-Wframe-address]\r\n  void *saved_fp = __builtin_frame_address (1);\r\n        ^~~~~~~~\r\nthread_sem.c: In function 'r_th_sem_new':\r\nthread_sem.c:33:8: warning: comparison between pointer and integer\r\n  if (s == SEM_FAILED) {\r\n        ^~\r\n\"gcc -dynamiclib -fPIC -o libr_util.dylib -Wl,-install_name,/usr/local/lib/libr_util.dylib mem.o unum.o str.o hex.o file.o range.o charset.o xdg.o rxml.o prof.o sys.o buf.o sys_w32.o ubase64.o base85.o base91.o base36.o list.o chmod.o graph.o event.o alloc.o donut.o print_code.o format2.o regex/regcomp.o regex/regerror.o regex/regexec.o uleb128.o rstr.o sandbox.o calc.o thread.o thread_sem.o thread_lock.o thread_cond.o thread_chan.o strpool.o bitmap.o time.o format.o pie.o print.o utype.o w32.o w32dw.o seven.o randomart.o zip.o debruijn.o log.o getopt.o table.o sys_sh.o utf8.o utf16.o utf32.o strbuf.o lib.o name.o spaces.o signal.o syscmd.o udiff.o bdiff.o stack.o queue.o tree.o idpool.o assert.o bplist.o punycode.o pkcs7.o x509.o asn1.o asn1_str.o json_parser.o json_indent.o skiplist.o pj.o rbtree.o intervaltree.o qrcode.o vector.o str_constpool.o str_trim.o ascii_table.o protobuf.o graph_drawable.o axml.o sstext.o new_rbtree.o token.o rvc.o rvc_git.o rvc_rvc.o bscanf.o rprintf.o d/ascii.o d/pokered.o d/katakana.o d/hiragana.o d/ebcdic37.o d/iso8859_1.o /Users/armdn/Sources/radare2/libr/../shlr/smallz4/smallz4cat.o big_gmp.o big_ssl.o big.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/cdb.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/heap.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/set.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/cdb_make.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/ht_uu.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/ht_up.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/ht_pp.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/ht_pu.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/ht_su.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/ht.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/json.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/text.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/lock.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/ls.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/ns.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/query.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/sdb.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/base64.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/disk.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/dict.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/array.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/fmt.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/match.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/num.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/util.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/journal.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/diff.o ../../shlr/spp/spp.o      -fPIC -fvisibility=hidden   /Users/armdn/Sources/radare2/libr/../shlr/zip/librz.a  -lpthread  -fvisibility=hidden\"\r\n/usr/bin/ld: -i argument: nstall_name must have a ':' between its symbol names\r\ncollect2: error: ld returned 1 exit status\r\ngmake[2]: *** [../rules.mk:90: libr_util.dylib] Error 1\r\ngmake[1]: *** [../rules.mk:71: all] Error 2\r\ngmake: *** [Makefile:53: all] Error 2\r\n```","createdAt":"2024-04-12T08:57:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22801#issuecomment-2051332105","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs56RYyM","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"edit mk/gcc.mk and comment the LDFLAGS_SONAME line. maybe we have to add another if in that line to make it conditional for ppc after an uname check","createdAt":"2024-04-12T09:21:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22801#issuecomment-2051378316","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs56s3de","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"any news?","createdAt":"2024-04-16T08:55:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22801#issuecomment-2058581854","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs56toDG","author":{"login":"armdn"},"authorAssociation":"NONE","body":"Will try that in a day or two, im out of my home in other city by now.","createdAt":"2024-04-16T10:40:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/22801#issuecomment-2058780870","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs57Ec_S","author":{"login":"armdn"},"authorAssociation":"NONE","body":"> edit mk/gcc.mk and comment the LDFLAGS_SONAME line. maybe we have to add another if in that line to make it conditional for ppc after an uname check\r\n\r\nThere are two lines, which one of these?? Or both?","createdAt":"2024-04-18T17:59:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22801#issuecomment-2064764882","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs57EnaZ","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"all of them just in case","createdAt":"2024-04-18T18:12:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22801#issuecomment-2064807577","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs58ElJs","author":{"login":"armdn"},"authorAssociation":"NONE","body":"Nope, still no go. Modified both lines (after re-downloading fresh code from git), and caught another error. Logs below...\r\n\r\n```\r\n/Users/armdn/Sources/radare2\r\nWARNING: Updating from remote repository\r\nFrom https://github.com/radareorg/radare2\r\n * branch                  master     -> FETCH_HEAD\r\nAlready up to date.\r\nWarning: Cannot find system wide capstone\r\n[*] Finding gmake is hashed (/usr/local/bin/gmake) OK\r\n[*] Configuring the build system ... OK\r\n[*] Checking out capstone... OK\r\n[*] Checking out vector35-arm64... OK\r\n[*] Checking out vector35-armv7... OK\r\n[*] Running configure... OK\r\n[*] Ready. You can now run 'make'.\r\nARGS=\r\n/usr/local/bin/zsh ./sys/build.sh\r\n/Users/armdn/Sources/radare2\r\n/Users/armdn/Sources/radare2\r\n./configure --prefix=/usr/local\r\nconfigure-plugins: Copying dist/plugins-cfg/plugins.def.cfg\r\nconfigure-plugins: Loading ./plugins.cfg ..\r\nconfigure-plugins: Generating libr/config.h\r\nconfigure-plugins: Generating libr/asm/d/config.inc\r\nconfigure-plugins: Generating libr/config.mk\r\nSHARED: io.shm\r\nSTATIC: anal.a2f anal.null arch.6502 arch.6502_cs arch.8051 arch.alpha arch.amd29k arch.any_as arch.any_vasm arch.arc arch.arm arch.arm_cs arch.arm_gnu arch.arm_v35 arch.avr arch.bf arch.bpf arch.bpf_cs arch.chip8 arch.cr16 arch.cris arch.dalvik arch.dis arch.ebc arch.evm arch.fslsp arch.gb arch.h8300 arch.hppa_gnu arch.i4004 arch.i8080 arch.java arch.jdh8 arch.kvx arch.lanai arch.lh5801 arch.lm32 arch.loongarch_gnu arch.lua arch.m680x_cs arch.m68k_cs arch.m68k_gnu arch.mcore arch.mcs96 arch.mips_cs arch.mips_gnu arch.msp430 arch.nds32 arch.nios2 arch.null arch.or1k arch.pdp11 arch.pic arch.pickle arch.ppc_cs arch.ppc_gnu arch.propeller arch.pyc arch.riscv arch.riscv_cs arch.rsp arch.s390_cs arch.s390_gnu arch.sh arch.sh_cs arch.sm5xx arch.snes arch.sparc_cs arch.sparc_gnu arch.tms320 arch.tricore arch.tricore_cs arch.v810 arch.v850 arch.vax arch.wasm arch.ws arch.x86_cs arch.x86_nasm arch.x86_nz arch.xap arch.xcore_cs arch.xtensa arch.z80 asm.null bin.any bin.art bin.avr bin.bf bin.bflt bin.bios bin.bootimg bin.cgc bin.coff bin.dex bin.dis bin.dmp64 bin.dol bin.dyldcache bin.elf bin.elf64 bin.fs bin.hunk bin.io bin.java bin.le bin.lua bin.mach0 bin.mach064 bin.mbn bin.mdmp bin.menuet bin.msx bin.mz bin.ne bin.nes bin.nin3ds bin.ninds bin.ningb bin.ningba bin.nro bin.nso bin.off bin.omf bin.p9 bin.pcap bin.pdp11 bin.pe bin.pe64 bin.pebble bin.prg bin.psxexe bin.pyc bin.qnx bin.rel bin.s390 bin.sfc bin.smd bin.sms bin.symbols bin.te bin.tic bin.vsf bin.wad bin.wasm bin.xbe bin.xcoff64 bin.xnu_kernelcache bin.xtac bin.z64 bin.zimg bin_ldr.ldr_linux bin_xtr.xtr_dyldcache bin_xtr.xtr_fatmach0 bin_xtr.xtr_pemixed bin_xtr.xtr_sep64 bin_xtr.xtr_xalz bp.arm bp.bf bp.mips bp.null bp.ppc bp.riscv bp.x86 core.a2f core.agD core.java core.sixref crypto.aes crypto.aes_cbc crypto.aes_wrap crypto.base64 crypto.base91 crypto.blowfish crypto.cps2 crypto.des crypto.entropy crypto.punycode crypto.rc2 crypto.rc4 crypto.rc6 crypto.rol crypto.ror crypto.rot crypto.serpent crypto.sm4 crypto.strhash crypto.xor debug.bf debug.bochs debug.esil debug.evm debug.gdb debug.io debug.native debug.null debug.qnx debug.rap debug.rv32ima debug.winkd egg.exec egg.xor esil.dummy esil.forth esil.null fs.ext2 fs.fat fs.fb fs.hfs fs.hfsplus fs.io fs.iso9660 fs.jfs fs.minix fs.ntfs fs.posix fs.r2 fs.reiserfs fs.sfs fs.tar fs.udf fs.ufs fs.xfs fs.zip io.ar io.bfdbg io.bochs io.cyclic io.debug io.default io.dsc io.fd io.gdb io.gprobe io.gzip io.http io.ihex io.isotp io.mach io.malloc io.mmap io.null io.procpid io.ptrace io.qnx io.r2k io.r2pipe io.r2web io.rap io.rbuf io.reg io.self io.serial io.socket io.sparse io.sysgdb io.tcpslurp io.treebuf io.w32 io.w32dbg io.winedbg io.winkd io.xalz io.xattr io.zip lang.c lang.cpipe lang.pipe lang.rust lang.spp lang.v lang.vala lang.zig parse.6502_pseudo parse.arm_pseudo parse.att2intel parse.avr_pseudo parse.bpf_pseudo parse.chip8_pseudo parse.dalvik_pseudo parse.evm_pseudo parse.m68k_pseudo parse.mips_pseudo parse.ppc_pseudo parse.riscv_pseudo parse.sh_pseudo parse.tms320_pseudo parse.v850_pseudo parse.wasm_pseudo parse.x86_pseudo parse.z80_pseudo\r\ncp: plugins.cfg and ./plugins.cfg are identical (not copied).\r\nchecking build system type... PowerMacintosh-unknown-darwin\r\nchecking host system type... PowerMacintosh-unknown-darwin\r\nchecking target system type... PowerMacintosh-unknown-darwin\r\nchecking for working directories... current\r\nusing prefix '/usr/local'\r\nchecking for c compiler... gcc\r\nchecking for dynamic library... required\r\nchecking for pkg-config... /usr/local/bin/pkg-config\r\nchecking for patch... /usr/bin/patch\r\nchecking for ar... /usr/bin/ar\r\nchecking for git... /usr/local/bin/git\r\nchecking for gperf... /usr/bin/gperf\r\nchecking for libmagic ... no\r\nchecking for linux/can.h... no\r\nchecking pkg-config flags for liblz4... no\r\nchecking for libz ... yes\r\nchecking for libzip ... no\r\nchecking for libxxhash ... no\r\nchecking declaration of ADDR_NO_RANDOMIZE in sys/personality.h... no\r\nchecking declaration of __GLIBC__ in features.h... no\r\nchecking function arc4random_uniform() in c... no\r\nchecking function explicit_bzero() in c... no\r\nchecking function explicit_memset() in c... no\r\nchecking function clock_nanosleep() in c... no\r\nchecking function sigaction() in c... yes\r\nchecking function clock_gettime() in c... no\r\nchecking cflags  -std=gnu99... yes\r\nchecking version of library libuv >= 1.0.0... no\r\ngenerating pkgcfg/r_egg.pc\r\ngenerating pkgcfg/r_io.pc\r\ngenerating pkgcfg/r_esil.pc\r\ngenerating pkgcfg/r_cons.pc\r\ngenerating pkgcfg/r_socket.pc\r\ngenerating pkgcfg/r_reg.pc\r\ngenerating pkgcfg/r_bp.pc\r\ngenerating pkgcfg/r_flag.pc\r\ngenerating pkgcfg/r_bin.pc\r\ngenerating pkgcfg/r_lang.pc\r\ngenerating pkgcfg/r_syscall.pc\r\ngenerating pkgcfg/r_config.pc\r\ngenerating pkgcfg/r_fs.pc\r\ngenerating pkgcfg/r_util.pc\r\ngenerating pkgcfg/r_magic.pc\r\ngenerating pkgcfg/r_search.pc\r\ngenerating pkgcfg/r_arch.pc\r\ngenerating pkgcfg/r_crypto.pc\r\ngenerating pkgcfg/r_anal.pc\r\ngenerating pkgcfg/r_asm.pc\r\ngenerating pkgcfg/r_debug.pc\r\ncreating ./config-user.mk\r\ncreating libr/include/r_userconf.h\r\ncreating pkgcfg/r_core.pc\r\ncleaning temporally files... done\r\n\r\nFinal report:\r\n - BUILD = PowerMacintosh-unknown-darwin\r\n - CC = gcc\r\n - CFLAGS = \"\"\r\n - DEBUGGER = 1\r\n - HAVE_ARC4RANDOM_UNIFORM = 0\r\n - HAVE_EXPLICIT_BZERO = 0\r\n - USE_NEW_ABI = 0\r\n - HAVE_EXPLICIT_MEMSET = 0\r\n - HAVE_FORK = 1\r\n - HAVE_GPERF = 1\r\n - HAVE_LIBUV = 0\r\n - HAVE_LIB_GMP = 0\r\n - WANT_DEBUGSTUFF = 1\r\n - HAVE_OPENSSL = 0\r\n - WANT_SSL_CRYPTO = 0\r\n - HAVE_PTRACE = 1\r\n - HOST = PowerMacintosh-unknown-darwin\r\n - LDFLAGS = \"\"\r\n - LIBVERSION = 5.9.1\r\n - PKGCONFIG = /usr/local/bin/pkg-config\r\n - PREFIX = /usr/local\r\n - R_CHECKS_LEVEL = 2\r\n - TARGET = PowerMacintosh-unknown-darwin\r\n - USERCC = gcc\r\n - USEROSTYPE = darwin\r\n - USE_CAPSTONE = 0\r\n - USE_LIB_MAGIC = 0\r\n - NEW_IO_CACHE = \"\"\r\n - USE_LIB_XXHASH = 0\r\n - USE_LIB_ZIP = 0\r\n - USE_PTRACE_WRAP = 0\r\n - USE_SYSLZ4 = 0\r\n - VERSION = 5.9.1\r\n - WANT_DYLINK = 1\r\n - USE_SMALLZ4 = \"\"\r\nGenerating r_version.h file\r\n\r\n>>>>>>>>\r\nHOST SDB\r\n>>>>>>>>\r\n\r\nar: creating archive libsdb.a\r\nsdb/sdb: Mach-O executable ppc\r\n\r\n>>>>>>>>>>\r\nTARGET SDB\r\n>>>>>>>>>>\r\n\r\ndisk.c: In function 'sdb_disk_finish':\r\ndisk.c:136:9: warning: implicit declaration of function 'fsync'; did you mean 'sync'? [-Wimplicit-function-declaration]\r\n  IFRET (fsync (s->fdump));\r\n         ^\r\ndisk.c:131:22: note: in definition of macro 'IFRET'\r\n #define IFRET(x) if (x) ret = 0\r\n                      ^\r\njournal.c: In function 'sdb_journal_log':\r\njournal.c:106:8: warning: implicit declaration of function 'fsync'; did you mean 'sync'? [-Wimplicit-function-declaration]\r\n  (void)fsync (s->journal);\r\n        ^~~~~\r\n        sync\r\nar: creating archive libsdb.a\r\nar: creating archive libr_z.a\r\nar: creating archive libr_zip.a\r\nranlib: file: libr_zip.a(zip_source_deflate.o) has no symbols\r\nranlib: file: libr_zip.a(zip_source_pkware.o) has no symbols\r\nranlib: file: libr_zip.a(zip_source_deflate.o) has no symbols\r\nranlib: file: libr_zip.a(zip_source_pkware.o) has no symbols\r\nar q librz.a zlib/adler32.o zlib/compress.o zlib/crc32.o zlib/deflate.o zlib/gzclose.o zlib/gzlib.o zlib/gzread.o zlib/gzwrite.o zlib/infback.o zlib/inffast.o zlib/inflate.o zlib/inftrees.o zlib/trees.o zlib/uncompr.o zlib/zutil.o zip/zip_add.o zip/zip_add_dir.o zip/zip_add_entry.o zip/zip_algorithm_deflate.o zip/zip_buffer.o zip/zip_close.o zip/zip_delete.o zip/zip_dir_add.o zip/zip_dirent.o zip/zip_discard.o zip/zip_entry.o zip/zip_err_str.o zip/zip_error.o zip/zip_error_clear.o zip/zip_error_get.o zip/zip_error_get_sys_type.o zip/zip_error_strerror.o zip/zip_error_to_str.o zip/zip_extra_field.o zip/zip_extra_field_api.o zip/zip_fclose.o zip/zip_fdopen.o zip/zip_file_add.o zip/zip_file_error_clear.o zip/zip_file_error_get.o zip/zip_file_get_comment.o zip/zip_file_get_external_attributes.o zip/zip_file_get_offset.o zip/zip_file_rename.o zip/zip_file_replace.o zip/zip_file_set_comment.o zip/zip_file_set_external_attributes.o zip/zip_file_set_mtime.o zip/zip_file_strerror.o zip/zip_filerange_crc.o zip/zip_fopen.o zip/zip_fopen_index.o zip/zip_fopen_index_encrypted.o zip/zip_fread.o zip/zip_fseek.o zip/zip_ftell.o zip/zip_get_archive_comment.o zip/zip_get_archive_flag.o zip/zip_get_file_comment.o zip/zip_get_name.o zip/zip_get_num_entries.o zip/zip_get_num_files.o zip/zip_hash.o zip/zip_io_util.o zip/zip_libzip_version.o zip/zip_memdup.o zip/zip_name_locate.o zip/zip_new.o zip/zip_open.o zip/zip_pkware.o zip/zip_progress.o zip/zip_random_unix.o zip/zip_rename.o zip/zip_replace.o zip/zip_set_archive_comment.o zip/zip_set_archive_flag.o zip/zip_set_default_password.o zip/zip_set_file_comment.o zip/zip_set_file_compression.o zip/zip_set_name.o zip/zip_source_accept_empty.o zip/zip_source_begin_write.o zip/zip_source_begin_write_cloning.o zip/zip_source_buffer.o zip/zip_source_call.o zip/zip_source_close.o zip/zip_source_commit_write.o zip/zip_source_compress.o zip/zip_source_crc.o zip/zip_source_deflate.o zip/zip_source_error.o zip/zip_source_file_common.o zip/zip_source_file_stdio.o zip/zip_source_file_stdio_named.o zip/zip_source_free.o zip/zip_source_function.o zip/zip_source_get_file_attributes.o zip/zip_source_is_deleted.o zip/zip_source_layered.o zip/zip_source_open.o zip/zip_source_pkware.o zip/zip_source_pkware_decode.o zip/zip_source_pkware_encode.o zip/zip_source_pop.o zip/zip_source_read.o zip/zip_source_remove.o zip/zip_source_rollback_write.o zip/zip_source_seek.o zip/zip_source_seek_write.o zip/zip_source_stat.o zip/zip_source_supports.o zip/zip_source_tell.o zip/zip_source_tell_write.o zip/zip_source_window.o zip/zip_source_write.o zip/zip_source_zip.o zip/zip_source_zip_new.o zip/zip_stat.o zip/zip_stat_index.o zip/zip_stat_init.o zip/zip_strerror.o zip/zip_string.o zip/zip_utf-8.o\r\nar: creating archive librz.a\r\nranlib: file: librz.a(zip_source_deflate.o) has no symbols\r\nranlib: file: librz.a(zip_source_pkware.o) has no symbols\r\nranlib librz.a\r\nranlib: file: librz.a(zip_source_deflate.o) has no symbols\r\nranlib: file: librz.a(zip_source_pkware.o) has no symbols\r\nsys.c: In function 'r_sys_pid_to_path':\r\nsys.c:1213:9: note: #pragma message: TODO getpidproc\r\n #pragma message(\"TODO getpidproc\")\r\n         ^~~~~~~\r\nsys.c: In function 'r_sys_backtrace':\r\nsys.c:346:8: warning: calling '__builtin_frame_address' with a nonzero argument is unsafe [-Wframe-address]\r\n  void *saved_fp = __builtin_frame_address (1);\r\n        ^~~~~~~~\r\nthread_sem.c: In function 'r_th_sem_new':\r\nthread_sem.c:33:8: warning: comparison between pointer and integer\r\n  if (s == SEM_FAILED) {\r\n        ^~\r\n\"gcc -dynamiclib -fPIC -o libr_util.dylib libr_util.dylib mem.o unum.o str.o hex.o file.o range.o charset.o xdg.o rxml.o prof.o sys.o buf.o sys_w32.o ubase64.o base85.o base91.o base36.o list.o chmod.o graph.o event.o alloc.o donut.o print_code.o format2.o regex/regcomp.o regex/regerror.o regex/regexec.o uleb128.o rstr.o sandbox.o calc.o thread.o thread_sem.o thread_lock.o thread_cond.o thread_chan.o strpool.o bitmap.o time.o format.o pie.o print.o utype.o w32.o w32dw.o seven.o randomart.o zip.o debruijn.o log.o getopt.o table.o sys_sh.o utf8.o utf16.o utf32.o strbuf.o lib.o name.o spaces.o signal.o syscmd.o udiff.o bdiff.o stack.o queue.o tree.o idpool.o assert.o bplist.o punycode.o pkcs7.o x509.o asn1.o asn1_str.o json_parser.o json_indent.o skiplist.o pj.o rbtree.o intervaltree.o qrcode.o vector.o str_constpool.o str_trim.o ascii_table.o protobuf.o graph_drawable.o axml.o sstext.o new_rbtree.o token.o rvc.o rvc_git.o rvc_rvc.o bscanf.o rprintf.o d/ascii.o d/pokered.o d/katakana.o d/hiragana.o d/ebcdic37.o d/iso8859_1.o /Users/armdn/Sources/radare2/libr/../shlr/smallz4/smallz4cat.o big_gmp.o big_ssl.o big.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/cdb.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/heap.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/set.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/cdb_make.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/ht_uu.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/ht_up.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/ht_pp.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/ht_pu.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/ht_su.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/ht.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/json.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/text.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/lock.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/ls.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/ns.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/query.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/sdb.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/base64.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/disk.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/dict.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/array.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/fmt.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/match.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/num.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/util.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/journal.o /Users/armdn/Sources/radare2/libr/../shlr/sdb/src/diff.o ../../shlr/spp/spp.o      -fPIC -fvisibility=hidden   /Users/armdn/Sources/radare2/libr/../shlr/zip/librz.a  -lpthread  -fvisibility=hidden\"\r\ngcc: error: libr_util.dylib: No such file or directory\r\ngmake[2]: *** [../rules.mk:90: libr_util.dylib] Error 1\r\ngmake[1]: *** [../rules.mk:71: all] Error 2\r\ngmake: *** [Makefile:53: all] Error 2\r\n\r\n```","createdAt":"2024-04-28T17:55:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22801#issuecomment-2081575532","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6VrpiO","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"can you try with meson? i dont see what's the error in your log","createdAt":"2024-12-02T11:13:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22801#issuecomment-2511247502","viewerDidAuthor":true}],"number":22801,"title":"R2DIR error in configuration on PowerPC Mac"},{"body":"maybe it is unrelated.\r\nI tried use my build on emulator and xiaomi android 14 device through adb shell\r\nOn both appear artifacts around cursor:\r\n\r\n![image](https://github.com/radareorg/radare2/assets/4275464/66d9173c-e6a6-40af-8061-1436bb3146f2)\r\n\r\nby @docds\r\n\r\nreported https://github.com/radareorg/radare2/issues/22750#issuecomment-2019200923","comments":[{"id":"IC_kwDOAEpMrs54cAYF","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"@docds are you on windows? or which terminal is this that doesnt support ansi?\r\n\r\ncan you try appluing this patch and see if at least the 2K disappears?\r\n\r\n```patch\r\ndiff --git a/libr/cons/dietline.c b/libr/cons/dietline.c\r\nindex 229aaf451d..25a1e6d65d 100644\r\n--- a/libr/cons/dietline.c\r\n+++ b/libr/cons/dietline.c\r\n@@ -1760,7 +1752,7 @@ R_API const char *r_line_readline_cb(RLineReadCallback cb, void *user) {\r\n                bool o_do_setup_match = I.history.do_setup_match;\r\n                I.history.do_setup_match = true;\r\n                if (I.echo && cons->context->color_mode) {\r\n-                       r_cons_clear_line (0);\r\n+               //      r_cons_clear_line (0);\r\n                }\r\n                (void) r_cons_get_size (&rows);\r\n                switch (*buf) {\r\n```","createdAt":"2024-03-26T14:36:38Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22752#issuecomment-2020607493","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs54exBZ","author":{"login":"docds"},"authorAssociation":"NONE","body":"I make build on Debian 12.5 with default terminal  (VirtualBox), but testing from Windows 10 (cmd)\r\nI clone master \"git clone https://github.com/radareorg/radare2.git\" and rebuild project.\r\n\r\n![image](https://github.com/radareorg/radare2/assets/4275464/146173eb-25b6-4a31-9318-aa0eb56f973d)\r\n\r\n\r\n\r\nAfter start r2 in cmd through \"adb shell\" terminal looks like that:\r\n```\r\n./r2 --\r\nâ†[0m[0x00000000]> â†[0m\r\n\r\n```\r\nWen I pres first key \"d\":\r\n\r\n```\r\n./r2 --\r\nâ†[0m[0x00000000]> â†[0md[0mâ†[2K\r\n\r\n```\r\n\r\n\"dc\" pressed\r\n\r\n```\r\n./r2 --\r\nâ†[0m[0x00000000]> â†[0mdc[0mâ†[2K\r\n```\r\n\r\n\"Enter\" pressed\r\n\r\n```\r\n./r2 --\r\n[0x00000000]> â†[0mdcâ†[0m[0mâ†[2K\r\nERROR: Cannot continue, run ood?\r\nâ†[0m[0x00000000]> â†[0m\r\n```","createdAt":"2024-03-26T19:46:04Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22752#issuecomment-2021331033","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs54xG9k","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Ah that makes sense, those escape codes are ANSI and windows terminal doesnt support them, so i would suggest you to do the following thing:\r\n\r\n```\r\nadb shell r2 -e scr.fgets=true --\r\n```\r\n\r\nthis will use fgets instead of the dietline input method, which will not have autocompletion or ansi escape codes. but i would suggest you to try another terminal that supports this or just use ssh into the device.\r\n\r\nare the colors working? or you need to do -e scr.color=0 too?","createdAt":"2024-03-28T21:14:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22752#issuecomment-2026139492","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs540kup","author":{"login":"docds"},"authorAssociation":"NONE","body":"Thanks. Cmd indeed  was culprit.\r\nWhen use -e scr.fgets=true parameter no weird chars appear.\r\nColors works just fine.\r\n\r\n\r\n![image](https://github.com/radareorg/radare2/assets/4275464/c82be5d7-7229-418f-a8f2-20e5d9c57803)\r\n\r\n\r\nI found brand new replacement for CMD from Microsoft. Leave it here for feather generations. :-).\r\nANSI Terminal support\r\nThe ANSI features are designed to be compatible with the xterm-based terminals. For more information, see [xterm](https://wikipedia.org/wiki/Xterm) in Wikipedia.\r\nOn Windows 10 and higher, the Windows Console Host is xterm compatible. The [Windows Terminal](https://www.microsoft.com/p/windows-terminal/9n0dx20hk701) application is also xterm compatible.\r\n\r\nStart just \"r2 --\"\r\n![image](https://github.com/radareorg/radare2/assets/4275464/a3c1e710-293b-4207-b6f5-fea84bf627b3)\r\n![image](https://github.com/radareorg/radare2/assets/4275464/b4af2d4f-2b23-4ec1-80b9-fd2b28a3c619)\r\n\r\n\r\n\r\nI will going to get some Raspberry Pi (4/5) device and put there Android and do some experiment.\r\nWhen I run Android arm emulator on x86 platform it work really slow and I donâ€™t wont to root my personal cell phone.","createdAt":"2024-03-29T10:35:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22752#issuecomment-2027047849","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs544Pd9","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"But still. its weird because the colors work in cmd->adb, the issue seems to be only in the repl prompt ðŸ¤” ","createdAt":"2024-03-30T10:44:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22752#issuecomment-2028009341","viewerDidAuthor":true}],"number":22752,"title":"ADB shell showing weird chars"},{"body":"The idea behind this ticket is to discuss the implementation of signatures that can be applied to types instead of functions.\r\n\r\nThe type signatures should match an specific amount of constraints in order to be selected as good candidates. F.ex:\r\n\r\n* Which fields are accessed its size and direction\r\n* Which functions takes them as argument\r\n* Alignment restrictions applied\r\n* Context with strings\r\n\r\nNote that there's already some type inference support implemented by propagating only the types found in the function signatures. But there are more constrains that we can use in order to improve the quality of the autotyping as well as autonaming.\r\n\r\nReference links:\r\n\r\n* https://blog.trailofbits.com/2024/02/07/binary-type-inference-in-ghidra/\r\n* https://blog.grimm-co.com/2020/11/automated-struct-identification-with.html\r\n","comments":[{"id":"IC_kwDOAEpMrs60xhNe","author":{"login":"aviciano"},"authorAssociation":"CONTRIBUTOR","body":"More related stuff, maybe helpful:\n- _BinSub: The Simple Essence of Polymorphic Type Inference for Machine Code_ ([paper](https://arxiv.org/pdf/2409.01841), [code](https://github.com/trailofbits/angr-type-inference))\n- _OSPREY: Recovery of Variable and Data Structure via Probabilistic Analysis for Stripped Binary_ ([paper](https://yonghwi-kwon.github.io/data/osprey_sp21.pdf), [video](https://www.youtube.com/embed/wS8Va0xF81o))\n","createdAt":"2025-07-03T16:31:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22717#issuecomment-3032879966","viewerDidAuthor":false}],"number":22717,"title":"RFC: Type Signatures"},{"body":"@condret feedback on this?","comments":[],"number":22715,"title":"Move esil{cfg|dfg} from anal to esil"},{"body":"in r2 there's /V to search for ranged values. but rafind2 only exposes the /v..\r\n\r\nReuse code if possible. about the commandline flags, its probably better to follow a different syntax, because -v stands for version","comments":[{"id":"IC_kwDOAEpMrs56rEFT","author":{"login":"qoelet"},"authorAssociation":"CONTRIBUTOR","body":"Would it be a bad idea if we have `-V`  represent both search types, i.e. `-V 4:123` and `-V 4:123,126`? ","createdAt":"2024-04-16T02:12:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22704#issuecomment-2058109267","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs56r12U","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Sounds like a good plan. This way we dont need more flags to handle both cases and looks readable to me","createdAt":"2024-04-16T06:18:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/22704#issuecomment-2058313108","viewerDidAuthor":true}],"number":22704,"title":"Implement value-range search in rafind2"},{"body":"## Environment\r\n\r\n```sh\r\nTue 12 Mar 2024 03:58:30 PM CET\r\nradare2 5.8.8 1 @ linux-x86-32\r\nbirth: git.5.8.8 2023-06-08__14:01:02\r\ncommit: ea7f0356519884715cf1d5fba16042bac72b2df5\r\noptions: gpl -O1 cs:5 cl:0 make\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\ndisassembly of adrp instructions does not make sense. take the following code, which initializes a struct:\r\n```\r\nstatic union U2  func_9(int64_t  p_10, const int32_t * p_11, union U2  p_12, uint64_t  p_13, int32_t * p_14)\r\n{ /* block id: 196 */\r\n    union U2 l_673 = {0x5A8A51BE3E7C0A4FLL};\r\n...\r\n```\r\nhere's radare2's disassembly:\r\n```\r\n> aa\r\n> sf sym.func_9\r\n> pdf \r\n...\r\nâ”‚           0x08000828      011d00f9       str x1, [x8, 0x38]          ; arg2\r\nâ”‚           0x0800082c      031900f9       str x3, [x8, 0x30]          ; arg4\r\nâ”‚           0x08000830      041500f9       str x4, [x8, 0x28]          ; arg5\r\nâ”‚           0x08000834      08000090       adrp x8, loc.imp.strcmp     ; loc.imp.printf ; 0x8000000\r\nâ”‚           0x08000838      08010091       add x8, x8, 0               ; 0x8000000 ; loc.imp.printf\r\nâ”‚           0x0800083c      0001c03d       ldr q0, [x8]                ; 0xe2 ; 226\r\nâ”‚           0x08000840      2001803d       str q0, [x9]\r\n```\r\n\r\n\r\n\r\naddrp takes an offset, the resulting address is calculated relative to the current instruction. i assume that r2 interprets the offset as an absolute address, resulting in the disassembly showing \"loc.imp.strcmp\". \r\nIs this expected behavior? If not, can someone point me to where I can fix this? \r\nAlso, is there a way to make radare2 give me the raw operand value instead of symbols?\r\n\r\n\r\nghidra's output makes more sense:\r\n```\r\n              001007e8 01 1d 00 f9                    str              x1,[x8, #0x38]\r\n              001007ec 03 19 00 f9                    str              x3,[x8, #0x30]\r\n              001007f0 04 15 00 f9                    str              x4,[x8, #0x28]\r\n              001007f4 28 00 00 b0                    adrp             x8,0x105000\r\n              001007f8 08 41 2f 91                    add              x8,x8,#0xbd0\r\n              001007fc 00 01 c0 3d                    ldr              q0,[x8]\r\n              00100800 20 01 80 3d                    str              q0,[x9]\r\n```\r\nI don't know why the instruction bytes differ for that specific instruction, but I have verified that radare2's output corresponds to the actual file while ghidra's have changed, probably due to a preformed analysis.\r\n\r\nHere are the files I used (source and binary), in case anyone is interested. \r\n[random_39855.zip](https://github.com/radareorg/radare2/files/14574876/random_39855.zip)\r\n","comments":[{"id":"IC_kwDOAEpMrs52uxRn","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Try r2 from git","createdAt":"2024-03-12T15:45:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22676#issuecomment-1991971943","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs52u1Wd","author":{"login":"JuliusNmn"},"authorAssociation":"NONE","body":"Same behavior on current dev:\r\n```\r\n./radare2/binr/radare2/radare2 -v                         \r\nradare2 5.8.9 31767 @ linux-x86-64\r\nbirth: git.5.8.8-1179-g49ff46d0a1 2024-03-12__16:47:26\r\ncommit: 49ff46d0a1717ea7ca19eaa674a2cbb9981ecdba\r\noptions: gpl -O? cs:5 cl:2 make\r\n```\r\n\r\nI was able to work around the issue by making radare2 output to json, which gives me the opcode without disassembly.\r\n\r\n```\r\n{\r\n         \"offset\":134219828,\r\n         \"ptr\":134217728,\r\n         \"esil\":\"134217728,x8,=\",\r\n         \"refptr\":0,\r\n         \"fcn_addr\":134219776,\r\n         \"fcn_last\":134220400,\r\n         \"size\":4,\r\n         \"opcode\":\"adrp x8, 0x8000000\",\r\n         \"disasm\":\"adrp x8, loc.imp.strcmp\",\r\n         \"bytes\":\"08000090\",\r\n         \"family\":\"cpu\",\r\n         \"type\":\"lea\",\r\n         \"reloc\":false,\r\n         \"type_num\":33,\r\n         \"type2_num\":0,\r\n         \"refs\":[\r\n            {\r\n               \"addr\":134217728, <- 0x80000000\r\n               \"type\":\"DATA\",\r\n               \"perm\":\"r--\"\r\n            }\r\n         ]\r\n      },\r\n```\r\nthe \"refs\" attribute is also very revealing here. I believe this is an issue with radare2.","createdAt":"2024-03-12T15:52:59Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22676#issuecomment-1991988637","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs526NP9","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"yes this is \"correct\" and the expected behaviour, the address in 0x80000 is exactly the same address as loc.imp.strcmp. so its expected because the disassembler filters that string, the emulation shows the final computation of the value which happens in the add instruction after that adrp. and actually the 0x8000 is shown as a comment in the disassembly. SO i dont see the problem here. because the code can be doing adrp without any add and then you wont see which symbol is referencing.\r\n\r\nAnd yes. the value shown by the disassembler is computed by providing the actual instruction position which shows that value. So let me clarify:\r\n\r\n* you want an option to make adrp instructions not be filtered\r\n* you want to see the absolute value instead of the relative","createdAt":"2024-03-13T16:51:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22676#issuecomment-1994970109","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs526qqB","author":{"login":"JuliusNmn"},"authorAssociation":"NONE","body":"Either way, it can't be a reference to strcmp. adrp is used here to initialize structs with constant values.\r\n\r\nThe instructinos are from the following function, which doesn't reference strcmp at all:\r\n```\r\nstatic union U2  func_9(int64_t  p_10, const int32_t * p_11, union U2  p_12, uint64_t  p_13, int32_t * p_14)\r\n{ /* block id: 196 */\r\n    union U2 l_673 = {0x5A8A51BE3E7C0A4FLL}; <- this is where the adrp happens.\r\n    for (p_12.f4.f0 = 0; (p_12.f4.f0 != 0); p_12.f4.f0 = safe_add_func_int8_t_s_s(p_12.f4.f0, 4))\r\n    { /* block id: 199 */\r\n        uint32_t l_657 = 0xBF1DF1F3L;\r\n        struct S0 l_664 = {0xEF594491L,0x00BDF289L,1L,0x07L};\r\n        struct S0 *l_663 = &l_664;\r\n        struct S0 ** const l_662 = &l_663;\r\n        struct S0 ** const *l_661 = &l_662;\r\n        for (p_10 = 0; (p_10 <= (-27)); --p_10)\r\n        { /* block id: 202 */\r\n            struct S0 **l_666 = &l_663;\r\n            struct S0 ***l_665[2][2][2] = {{{&l_666,&l_666},{&l_666,&l_666}},{{&l_666,&l_666},{&l_666,&l_666}}};\r\n            uint32_t l_670 = 0x85187951L;\r\n            uint32_t *l_669 = &l_670;\r\n            uint8_t l_671 = 0xF5L;\r\n            int32_t *l_672 = &l_664.f0;\r\n            int i, j, k;\r\n            (*l_672) = (l_657 == (~(((safe_mul_func_int8_t_s_s(((void*)0 == &p_12), (l_661 == (l_664.f1 , l_665[1][1][0])))) <= ((safe_rshift_func_int8_t_s_s((p_13 <= (((void*)0 != l_669) > l_671)), p_13)) > p_10)) || p_13)));\r\n        }\r\n    }\r\n    return l_673;\r\n}\r\n```\r\n\r\nHere's how Ghidra disassembles the instruction, in case it's of any help:\r\n\r\nOperand | x8 | 0x105000\r\n-- | -- | --\r\nLabeled | x8 | 0x105000\r\nType | REG | SCAL\r\nScalar | Â  | 0x105000\r\nAddress | Â  | Â \r\nRegister | x8 | Â \r\nOp-Objects | x8 | const:0x105000\r\nOperand Mask | 00011111 00000000 00000000 00000000 | 11100000 11111111 11111111 01100000\r\nMasked Value | 00001000 00000000 00000000 00000000 | 00100000 00000000 00000000 00100000\r\n\r\n\r\nGhidra's \"Basic Constant Reference Analyzer\" correctly determines the constant values, and points me to the correct initial values in data. ","createdAt":"2024-03-13T17:27:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22676#issuecomment-1995090561","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs52-d5b","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"for reference, this is the output from objdump:\r\n\r\n```\r\n     7e8:       f9001d01        str     x1, [x8, #56]\r\n     7ec:       f9001903        str     x3, [x8, #48]\r\n     7f0:       f9001504        str     x4, [x8, #40]\r\n     7f4:       90000008        adrp    x8, 0 <main>\r\n     7f8:       91000108        add     x8, x8, #0x0\r\n     7fc:       3dc00100        ldr     q0, [x8]\r\n     800:       3d800120        str     q0, [x9]\r\n     804:       f9400908        ldr     x8, [x8, #16]\r\n```\r\n\r\nwhich is referencing \"main\".. what i see, is that those addresses are patched by relocs. and you can solve this if you compile an executable or a library instead of an object file. yes, r2, objdump, and many other tools have issues when processing object files, because relocs and elf objects are a big mess. the same output from objdump of the compiled executable is this:\r\n\r\n```\r\n     fb8:       f9002100        str     x0, [x8, #64]\r\n     fbc:       f9001d01        str     x1, [x8, #56]\r\n     fc0:       f9001903        str     x3, [x8, #48]\r\n     fc4:       f9001504        str     x4, [x8, #40]\r\n     fc8:       b0000028        adrp    x8, 5000 <safe_mul_func_int16_t_s_s+0xc>\r\n     fcc:       913ee108        add     x8, x8, #0xfb8\r\n     fd0:       3dc00100        ldr     q0, [x8]\r\n     fd4:       3d800120        str     q0, [x9]\r\n     fd8:       f9400908        ldr     x8, [x8, #16]\r\n```\r\n\r\nwhich in r2 looks like this:\r\n\r\n```\r\n  [0x00000f94]> pd 20\r\n            ;-- func_9:\r\n            0x00000f94      ff8304d1       sub sp, sp, 0x120\r\n            0x00000f98      fd7b10a9       stp x29, x30, [sp, 0x100]\r\n            0x00000f9c      fc8b00f9       str x28, [sp, 0x110]\r\n            0x00000fa0      fd030491       add x29, sp, 0x100\r\n            0x00000fa4      a92301d1       sub x9, x29, 0x48\r\n            0x00000fa8      e91300f9       str x9, [sp, 0x20]\r\n            0x00000fac      e90308aa       mov x9, x8\r\n            0x00000fb0      e81340f9       ldr x8, [sp, 0x20]\r\n            0x00000fb4      e21700f9       str x2, [sp, 0x28]\r\n            0x00000fb8      002100f9       str x0, [x8, 0x40]\r\n            0x00000fbc      011d00f9       str x1, [x8, 0x38]\r\n            0x00000fc0      031900f9       str x3, [x8, 0x30]\r\n            0x00000fc4      041500f9       str x4, [x8, 0x28]\r\n            0x00000fc8      280000b0       adrp x8, 0x5000\r\n            0x00000fcc      08e13e91       add x8, x8, 0xfb8           ; str.O_n_\r\n            0x00000fd0      0001c03d       ldr q0, [x8]                ; 0xe2 ; str.O_n_\r\n            0x00000fd4      2001803d       str q0, [x9]\r\n            0x00000fd8      080940f9       ldr x8, [x8, 0x10]          ; 0xe2\r\n            0x00000fdc      280900f9       str x8, [x9, 0x10]\r\n            0x00000fe0      5f0000b9       str wzr, [x2]\r\n[0x00000f94]> s str.O_n_\r\n[0x00005fb8]> pxq 8\r\n0x00005fb8  0x5a8a51be3e7c0a4f                       O.|>.Q.Z\r\n[0x00005fb8]>\r\n```\r\n\r\nso the constant is there, and the root issue is how object files and relocs are handled. there's nothing wrong with adrp in here imho","createdAt":"2024-03-13T23:36:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22676#issuecomment-1996086875","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs52-eJb","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"[a.out.zip](https://github.com/radareorg/radare2/files/14594809/a.out.zip)\r\n","createdAt":"2024-03-13T23:36:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22676#issuecomment-1996087899","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs53H83E","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"looking further in this object file i've spotted a bunch of other issues:\r\n\r\n* there are 5 different unsupported relocs used in this .o (pushed a PR to at least display some warnings) - \r\n* applying the relocs causes a segfault because of a bug in io (pusehd another PR, @condret is reviewing to push a proper fix) - fixed by @condret https://github.com/radareorg/radare2/pull/22691\r\n* objdump doesnt support those relocs either\r\n\r\nwill be good to extend the https://github.com/radareorg/radare2/pull/22690 PR to add support for the remaining arm64 relocs, would you like to give it a try? otherwise as a workaround i would suggest you to compile the executable or library and use it instead of the object file.\r\n\r\nthanks for the sample files, it is ok for you if i push them into the testsuite?","createdAt":"2024-03-14T22:16:55Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22676#issuecomment-1998572996","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs53KUuE","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"found another issue in the elf imports, all of them are located in the same address because the plt section is not yet available. gonna fix that in another pr too :) \r\n<img width=\"690\" alt=\"Screenshot 2024-03-15 at 09 50 24\" src=\"https://github.com/radareorg/radare2/assets/6431515/c379faad-c8df-4b10-b8ca-1b7fbccfc072\">\r\n\r\nfixed here https://github.com/radareorg/radare2/pull/22692","createdAt":"2024-03-15T08:51:42Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22676#issuecomment-1999195012","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs53Kbab","author":{"login":"JuliusNmn"},"authorAssociation":"NONE","body":"> thanks for the sample files, it is ok for you if i push them into the testsuite?\r\n\r\nSure.\r\nI will see what I can do about https://github.com/radareorg/radare2/pull/22690\r\n","createdAt":"2024-03-15T09:07:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/22676#issuecomment-1999222427","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs53Ku55","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"another improvement here would be to ignore flags pointing to the base address of the loaded module. there's no point on showing a section name if that is not set. but still the right fix to do here would be to support the needed relocs properly. Let me know about adding this binary into the testsuite.","createdAt":"2024-03-15T09:52:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22676#issuecomment-1999302265","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs53K54a","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I will add your sample and add some tests now. Thanks! Let me need if you need some guiding about the relocs. The code is a little broken into different parts that patch, enumerate.. and they are actually stored 3 times. I may find some time after the release to fix that across the 90 bin plugins. But for your needs none of this should affect you and itâ€™s only elf related","createdAt":"2024-03-15T10:17:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22676#issuecomment-1999347226","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs53aGmz","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"added tests here 8471613246a9073e59032e595965ca66397cecdc let me know if you need some help for implementing the relocs. feel free to join the discord or telegram channels for more interactions","createdAt":"2024-03-18T09:33:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22676#issuecomment-2003331507","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs546fiA","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"ping?","createdAt":"2024-03-31T08:26:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22676#issuecomment-2028599424","viewerDidAuthor":true}],"number":22676,"title":"Arm64 adrp instruction disassembly incorrect"},{"body":"```\r\n[0x00000000]> ?ee asf 2> $foo\r\nasf\r\n[0x00000000]> ?ee asf 2> foo\r\n[0x00000000]> cat foo\r\nasf\r\n[0x00000000]>\r\n```","comments":[],"number":22650,"title":"stderr not captured into internal files"},{"body":"","comments":[],"number":22592,"title":"Colorize bytes in hexdump/disasm that has been modified or patched in the cache"},{"body":"I've already talked about it on the discord server, so I'm making an issue :)\r\n\r\n## Environment\r\n\r\n```\r\nMac OS X Tiger 10.4.11\r\nDarwin Kernel Version 8.11.0: Wed Oct 10 18:26:00 PDT 2007; root:xnu-792.24.17~1/RELEASE_PPC Power Macintosh powerpc\r\n```\r\n\r\n```\r\ngcc -v\r\nUsing built-in specs.\r\nTarget: powerpc-apple-darwin8\r\nConfigured with: /var/tmp/gcc/gcc-5370~2/src/configure --disable-checking -enable-werror --prefix=/usr --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-transform-name=/^[cg][^.-]*$/s/$/-4.0/ --with-gxx-include-dir=/include/c++/4.0.0 --with-slibdir=/usr/lib --build=powerpc-apple-darwin8 --host=powerpc-apple-darwin8 --target=powerpc-apple-darwin8\r\nThread model: posix\r\ngcc version 4.0.1 (Apple Computer, Inc. build 5370)\r\n```\r\n\r\n## Description\r\n\r\nBuilding radare2 fails on a PowerPC Mac.\r\n\r\n## Test\r\n\r\n```\r\nibook-g4-de-a-o:~/radare2 ao$ sys/install.sh\r\n/Users/ao/radare2\r\nWARNING: Updating from remote repository\r\nFrom https://github.com/radareorg/radare2\r\n * branch            master     -> FETCH_HEAD\r\nAlready up to date.\r\nWarning: Cannot find system wide capstone\r\n[*] Finding make is /usr/bin/make OK\r\n[*] Configuring the build system ... OK\r\n[*] Checking out capstone... OK\r\n[*] Checking out vector35-arm64... OK\r\n[*] Checking out vector35-armv7... OK\r\n[*] Running configure... OK\r\n[*] Ready. You can now run 'make'.\r\nARGS=\r\n/bin/bash ./sys/build.sh\r\n/Users/ao/radare2\r\n/Users/ao/radare2\r\n./configure --prefix=/usr/local\r\nconfigure-plugins: Copying dist/plugins-cfg/plugins.def.cfg\r\nconfigure-plugins: Loading ./plugins.cfg ..\r\nconfigure-plugins: Generating libr/config.h\r\nconfigure-plugins: Generating libr/asm/d/config.inc\r\nconfigure-plugins: Generating libr/config.mk\r\nSHARED: io.shm\r\nSTATIC: anal.a2f anal.null arch.6502 arch.6502_cs arch.8051 arch.alpha arch.amd29k arch.any_as arch.any_vasm arch.arc arch.arm arch.arm_cs arch.arm_gnu arch.arm_v35 arch.avr arch.bf arch.bpf arch.bpf_cs arch.chip8 arch.cr16 arch.cris arch.dalvik arch.dis arch.ebc arch.evm arch.fslsp arch.gb arch.h8300 arch.hppa_gnu arch.i4004 arch.i8080 arch.java arch.jdh8 arch.kvx arch.lanai arch.lh5801 arch.lm32 arch.loongarch_gnu arch.lua arch.m680x_cs arch.m68k_cs arch.m68k_gnu arch.mcore arch.mcs96 arch.mips_cs arch.mips_gnu arch.msp430 arch.nds32 arch.nios2 arch.null arch.or1k arch.pdp11 arch.pic arch.pickle arch.ppc_cs arch.ppc_gnu arch.propeller arch.pyc arch.riscv arch.riscv_cs arch.rsp arch.s390_cs arch.s390_gnu arch.sh arch.sh_cs arch.sm5xx arch.snes arch.sparc_cs arch.sparc_gnu arch.tms320 arch.tricore arch.tricore_cs arch.v810 arch.v850 arch.vax arch.wasm arch.ws arch.x86_cs arch.x86_nasm arch.x86_nz arch.xap arch.xcore_cs arch.xtensa arch.z80 asm.null bin.any bin.art bin.avr bin.bf bin.bflt bin.bios bin.bootimg bin.cgc bin.coff bin.dex bin.dis bin.dmp64 bin.dol bin.dyldcache bin.elf bin.elf64 bin.fs bin.hunk bin.java bin.le bin.lua bin.mach0 bin.mach064 bin.mbn bin.mdmp bin.menuet bin.msx bin.mz bin.ne bin.nes bin.nin3ds bin.ninds bin.ningb bin.ningba bin.nro bin.nso bin.off bin.omf bin.p9 bin.pcap bin.pdp11 bin.pe bin.pe64 bin.pebble bin.prg bin.psxexe bin.pyc bin.qnx bin.rel bin.s390 bin.sfc bin.smd bin.sms bin.symbols bin.te bin.tic bin.vsf bin.wad bin.wasm bin.xbe bin.xcoff64 bin.xnu_kernelcache bin.xtac bin.z64 bin.zimg bin_ldr.ldr_linux bin_xtr.xtr_dyldcache bin_xtr.xtr_fatmach0 bin_xtr.xtr_pemixed bin_xtr.xtr_sep64 bin_xtr.xtr_xalz bp.arm bp.bf bp.mips bp.null bp.ppc bp.riscv bp.x86 core.a2f core.agD core.java core.sixref crypto.aes crypto.aes_cbc crypto.aes_wrap crypto.base64 crypto.base91 crypto.blowfish crypto.cps2 crypto.des crypto.entropy crypto.punycode crypto.rc2 crypto.rc4 crypto.rc6 crypto.rol crypto.ror crypto.rot crypto.serpent crypto.sm4 crypto.xor debug.bf debug.bochs debug.esil debug.gdb debug.io debug.native debug.null debug.qnx debug.rap debug.rv32ima debug.winkd egg.exec egg.xor esil.dummy esil.null fs.ext2 fs.fat fs.fb fs.hfs fs.hfsplus fs.io fs.iso9660 fs.jfs fs.minix fs.ntfs fs.posix fs.r2 fs.reiserfs fs.sfs fs.tar fs.udf fs.ufs fs.xfs fs.zip io.ar io.bfdbg io.bochs io.cyclic io.debug io.default io.dsc io.fd io.gdb io.gprobe io.gzip io.http io.ihex io.isotp io.mach io.malloc io.mmap io.null io.procpid io.ptrace io.qnx io.r2k io.r2pipe io.r2web io.rap io.rbuf io.reg io.self io.serial io.socket io.sparse io.sysgdb io.tcpslurp io.treebuf io.w32 io.w32dbg io.winedbg io.winkd io.xalz io.xattr io.zip lang.c lang.cpipe lang.pipe lang.rust lang.spp lang.v lang.vala lang.zig parse.6502_pseudo parse.arm_pseudo parse.att2intel parse.avr_pseudo parse.bpf_pseudo parse.chip8_pseudo parse.dalvik_pseudo parse.evm_pseudo parse.m68k_pseudo parse.mips_pseudo parse.ppc_pseudo parse.riscv_pseudo parse.sh_pseudo parse.tms320_pseudo parse.v850_pseudo parse.wasm_pseudo parse.x86_pseudo parse.z80_pseudo\r\ncp: plugins.cfg and ./plugins.cfg are identical (not copied).\r\nchecking build system type... PowerMacintosh-unknown-darwin\r\nchecking host system type... PowerMacintosh-unknown-darwin\r\nchecking target system type... PowerMacintosh-unknown-darwin\r\nchecking for working directories... current\r\nusing prefix '/usr/local'\r\nchecking for c compiler... gcc\r\nchecking for dynamic library... required\r\nchecking for pkg-config... /usr/local/bin/pkg-config\r\nchecking for patch... /usr/bin/patch\r\nchecking for ar... /usr/bin/ar\r\nchecking for git... /usr/local/bin/git\r\nchecking for gperf... /usr/bin/gperf\r\nchecking for libmagic ... no\r\nchecking for linux/can.h... no\r\nchecking pkg-config flags for liblz4... no\r\nchecking for libz ... yes\r\nchecking for libzip ... no\r\nchecking for libxxhash ... no\r\nchecking declaration of ADDR_NO_RANDOMIZE in sys/personality.h... no\r\nchecking declaration of __GLIBC__ in features.h... no\r\nchecking function arc4random_uniform() in c... no\r\nchecking function explicit_bzero() in c... no\r\nchecking function explicit_memset() in c... no\r\nchecking function clock_nanosleep() in c... no\r\nchecking function sigaction() in c... yes\r\nchecking function clock_gettime() in c... no\r\nchecking cflags  -std=gnu99... yes\r\nchecking version of library libuv >= 1.0.0... no\r\ngenerating pkgcfg/r_egg.pc\r\ngenerating pkgcfg/r_io.pc\r\ngenerating pkgcfg/r_esil.pc\r\ngenerating pkgcfg/r_cons.pc\r\ngenerating pkgcfg/r_socket.pc\r\ngenerating pkgcfg/r_reg.pc\r\ngenerating pkgcfg/r_bp.pc\r\ngenerating pkgcfg/r_flag.pc\r\ngenerating pkgcfg/r_bin.pc\r\ngenerating pkgcfg/r_lang.pc\r\ngenerating pkgcfg/r_syscall.pc\r\ngenerating pkgcfg/r_config.pc\r\ngenerating pkgcfg/r_fs.pc\r\ngenerating pkgcfg/r_util.pc\r\ngenerating pkgcfg/r_magic.pc\r\ngenerating pkgcfg/r_search.pc\r\ngenerating pkgcfg/r_arch.pc\r\ngenerating pkgcfg/r_crypto.pc\r\ngenerating pkgcfg/r_anal.pc\r\ngenerating pkgcfg/r_asm.pc\r\ngenerating pkgcfg/r_debug.pc\r\ncreating ./config-user.mk\r\ncreating libr/include/r_userconf.h\r\ncreating pkgcfg/r_core.pc\r\ncleaning temporally files... done\r\n\r\nFinal report:\r\n - BUILD = PowerMacintosh-unknown-darwin\r\n - CC = gcc\r\n - CFLAGS = \"\"\r\n - DEBUGGER = 1\r\n - HAVE_ARC4RANDOM_UNIFORM = 0\r\n - HAVE_EXPLICIT_BZERO = 0\r\n - HAVE_EXPLICIT_MEMSET = 0\r\n - HAVE_FORK = 1\r\n - HAVE_GPERF = 1\r\n - HAVE_LIBUV = 0\r\n - HAVE_LIB_GMP = 0\r\n - WANT_DEBUGSTUFF = 1\r\n - HAVE_OPENSSL = 0\r\n - WANT_SSL_CRYPTO = 0\r\n - HAVE_PTRACE = 1\r\n - HOST = PowerMacintosh-unknown-darwin\r\n - LDFLAGS = \"\"\r\n - LIBVERSION = 5.8.9\r\n - PKGCONFIG = /usr/local/bin/pkg-config\r\n - PREFIX = /usr/local\r\n - R_CHECKS_LEVEL = 2\r\n - TARGET = PowerMacintosh-unknown-darwin\r\n - USERCC = gcc\r\n - USEROSTYPE = darwin\r\n - USE_CAPSTONE = 0\r\n - USE_LIB_MAGIC = 0\r\n - NEW_IO_CACHE = \"\"\r\n - USE_LIB_XXHASH = 0\r\n - USE_LIB_ZIP = 0\r\n - USE_PTRACE_WRAP = 0\r\n - USE_SYSLZ4 = 0\r\n - VERSION = 5.8.9\r\n - WANT_DYLINK = 1\r\n - USE_SMALLZ4 = \"\"\r\nGenerating r_version.h file\r\n\r\n>>>>>>>>\r\nHOST SDB\r\n>>>>>>>>\r\n\r\nCC cdb.c\r\nCC entry.c\r\nCC buffer.c\r\nCC cdb_make.c\r\nCC ls.c\r\nCC ht.c\r\nCC ht_uu.c\r\nCC sdb.c\r\nCC num.c\r\nCC base64.c\r\nCC match.c\r\nCC json.c\r\nIn file included from ht_uu.c:6:\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:378:3: warning: #warning \"Cannot detect endianness; assuming little-endian.\"\r\nCC ns.c\r\nCC lock.c\r\nCC util.c\r\nCC disk.c\r\nCC query.c\r\nCC array.c\r\nIn file included from ht_uu.c:6:\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1387: warning: integer constant is too large for 'long' type\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1387: warning: integer constant is too large for 'long' type\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1387: warning: integer constant is too large for 'long' type\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1388: warning: integer constant is too large for 'long' type\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1388: warning: integer constant is too large for 'long' type\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h: In function 'CWISS_AbslHash_Mix':\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1398: warning: integer constant is too large for 'long' type\r\nCC fmt.c\r\nCC journal.c\r\nCC text.c\r\nCC dict.c\r\nCC ht_pp.c\r\nCC ht_up.c\r\nCC ht_pu.c\r\nCC ht_su.c\r\nIn file included from ht_pu.c:6:\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:378:3: warning: #warning \"Cannot detect endianness; assuming little-endian.\"\r\nCC set.c\r\nCC diff.c\r\nIn file included from ht_su.c:7:\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:378:3: warning: #warning \"Cannot detect endianness; assuming little-endian.\"\r\nCC heap.c\r\nIn file included from ht_pu.c:6:\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1387: warning: integer constant is too large for 'long' type\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1387: warning: integer constant is too large for 'long' type\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1387: warning: integer constant is too large for 'long' type\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1388: warning: integer constant is too large for 'long' type\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1388: warning: integer constant is too large for 'long' type\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h: In function 'CWISS_AbslHash_Mix':\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1398: warning: integer constant is too large for 'long' type\r\nCC main.c\r\nIn file included from ht_su.c:7:\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1387: warning: integer constant is too large for 'long' type\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1387: warning: integer constant is too large for 'long' type\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1387: warning: integer constant is too large for 'long' type\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1388: warning: integer constant is too large for 'long' type\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1388: warning: integer constant is too large for 'long' type\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h: In function 'CWISS_AbslHash_Mix':\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1398: warning: integer constant is too large for 'long' type\r\nAR libsdb.a\r\nar: creating archive libsdb.a\r\nBIN sdb\r\nsdb/sdb: Mach-O executable ppc\r\n\r\n>>>>>>>>>>\r\nTARGET SDB\r\n>>>>>>>>>>\r\n\r\nCC cdb.c\r\nCC buffer.c\r\nCC cdb_make.c\r\nCC ls.c\r\nCC ht.c\r\nCC ht_uu.c\r\nCC sdb.c\r\nCC num.c\r\nCC base64.c\r\nCC match.c\r\nCC json.c\r\nCC ns.c\r\nCC lock.c\r\nIn file included from ht_uu.c:6:\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:378:3: warning: #warning \"Cannot detect endianness; assuming little-endian.\"\r\nIn file included from ht_uu.c:6:\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:384: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:384: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:384: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:384: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:384: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:410: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:416: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:416: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:416: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:416: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:416: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:652: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:656: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:656: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:656: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:656: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:656: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:943: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:978: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:978: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:978: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:978: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:978: warning: ignoring #pragma GCC diagnostic\r\nCC util.c\r\nCC disk.c\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1149: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1158: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1158: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1158: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1158: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1158: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1261: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1267: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1267: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1267: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1267: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1267: warning: ignoring #pragma GCC diagnostic\r\nCC query.c\r\nCC array.c\r\nCC fmt.c\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1409: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1430: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1430: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1430: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1430: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1430: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1504: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1559: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1559: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1559: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1559: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1559: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1817: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1834: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1834: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1834: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1834: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1834: warning: ignoring #pragma GCC diagnostic\r\nCC journal.c\r\nIn file included from json.c:7:\r\njson/js0n.c:26: warning: ignoring #pragma GCC diagnostic\r\njson/js0n.c:27: warning: ignoring #pragma GCC diagnostic\r\njson/js0n.c:28: warning: ignoring #pragma GCC diagnostic\r\nCC text.c\r\nCC dict.c\r\nCC ht_pp.c\r\ndisk.c: In function 'sdb_disk_finish':\r\ndisk.c:136: warning: implicit declaration of function 'fsync'\r\nCC ht_up.c\r\njournal.c: In function 'sdb_journal_log':\r\njournal.c:106: warning: implicit declaration of function 'fsync'\r\nCC ht_pu.c\r\nCC ht_su.c\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2615: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2651: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2651: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2651: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2651: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2651: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2996: warning: ignoring #pragma GCC diagnostic\r\nht_uu.c:10: warning: ignoring #pragma GCC diagnostic\r\nht_uu.c:10: warning: ignoring #pragma GCC diagnostic\r\nht_uu.c:10: warning: ignoring #pragma GCC diagnostic\r\nht_uu.c:10: warning: ignoring #pragma GCC diagnostic\r\nht_uu.c:10: warning: ignoring #pragma GCC diagnostic\r\nht_uu.c:10: warning: ignoring #pragma GCC diagnostic\r\nht_uu.c:10: warning: ignoring #pragma GCC diagnostic\r\nht_uu.c:10: warning: ignoring #pragma GCC diagnostic\r\nht_uu.c:10: warning: ignoring #pragma GCC diagnostic\r\nht_uu.c:10: warning: ignoring #pragma GCC diagnostic\r\nht_uu.c:10: warning: ignoring #pragma GCC diagnostic\r\nIn file included from ht_pu.c:6:\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:378:3: warning: #warning \"Cannot detect endianness; assuming little-endian.\"\r\nIn file included from ht_pu.c:6:\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:384: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:384: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:384: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:384: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:384: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:410: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:416: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:416: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:416: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:416: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:416: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:652: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:656: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:656: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:656: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:656: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:656: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:943: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:978: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:978: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:978: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:978: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:978: warning: ignoring #pragma GCC diagnostic\r\nht_uu.c:10: warning: ignoring #pragma GCC diagnostic\r\nCC set.c\r\nIn file included from ht_su.c:7:\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:378:3: warning: #warning \"Cannot detect endianness; assuming little-endian.\"\r\nIn file included from ht_su.c:7:\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:384: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:384: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:384: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:384: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:384: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:410: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:416: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:416: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:416: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:416: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:416: warning: ignoring #pragma GCC diagnostic\r\nCC diff.c\r\nCC heap.c\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:652: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:656: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:656: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:656: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:656: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:656: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:943: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:978: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:978: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:978: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:978: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:978: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1149: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1158: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1158: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1158: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1158: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1158: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1261: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1267: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1267: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1267: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1267: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1267: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1149: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1158: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1158: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1158: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1158: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1158: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1261: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1267: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1267: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1267: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1267: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1267: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1409: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1430: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1430: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1430: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1430: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1430: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1504: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1559: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1559: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1559: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1559: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1559: warning: ignoring #pragma GCC diagnostic\r\nCC main.c\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1817: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1834: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1834: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1834: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1834: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1834: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1409: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1430: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1430: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1430: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1430: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1430: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1504: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1559: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1559: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1559: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1559: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1559: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1817: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1834: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1834: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1834: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1834: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:1834: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2615: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2651: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2651: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2651: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2651: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2651: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2996: warning: ignoring #pragma GCC diagnostic\r\nht_pu.c:8: warning: ignoring #pragma GCC diagnostic\r\nht_pu.c:8: warning: ignoring #pragma GCC diagnostic\r\nht_pu.c:8: warning: ignoring #pragma GCC diagnostic\r\nht_pu.c:8: warning: ignoring #pragma GCC diagnostic\r\nht_pu.c:8: warning: ignoring #pragma GCC diagnostic\r\nht_pu.c:8: warning: ignoring #pragma GCC diagnostic\r\nht_pu.c:8: warning: ignoring #pragma GCC diagnostic\r\nht_pu.c:8: warning: ignoring #pragma GCC diagnostic\r\nht_pu.c:8: warning: ignoring #pragma GCC diagnostic\r\nht_pu.c:8: warning: ignoring #pragma GCC diagnostic\r\nht_pu.c:8: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2615: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2651: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2651: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2651: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2651: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2651: warning: ignoring #pragma GCC diagnostic\r\n/Users/ao/radare2/libr/../shlr/sdb/include/sdb/cwisstable.h:2996: warning: ignoring #pragma GCC diagnostic\r\nht_su.c:14: warning: ignoring #pragma GCC diagnostic\r\nht_su.c:14: warning: ignoring #pragma GCC diagnostic\r\nht_su.c:14: warning: ignoring #pragma GCC diagnostic\r\nht_su.c:14: warning: ignoring #pragma GCC diagnostic\r\nht_su.c:14: warning: ignoring #pragma GCC diagnostic\r\nht_su.c:14: warning: ignoring #pragma GCC diagnostic\r\nht_su.c:14: warning: ignoring #pragma GCC diagnostic\r\nht_su.c:14: warning: ignoring #pragma GCC diagnostic\r\nht_su.c:14: warning: ignoring #pragma GCC diagnostic\r\nht_su.c:14: warning: ignoring #pragma GCC diagnostic\r\nht_su.c:14: warning: ignoring #pragma GCC diagnostic\r\nht_su.c:14: warning: ignoring #pragma GCC diagnostic\r\nht_pu.c:8: warning: ignoring #pragma GCC diagnostic\r\nAR libsdb.a\r\nar: creating archive libsdb.a\r\n[zlib 2] CC adler32.c\r\n[zlib 3] CC crc32.c\r\n[zlib 4] CC deflate.c\r\n[zlib 5] CC infback.c\r\n[zlib 6] CC inffast.c\r\n[zlib 7] CC inflate.c\r\n[zlib 8] CC inftrees.c\r\n[zlib 9] CC trees.c\r\n[zlib 10] CC zutil.c\r\n[zlib 11] CC compress.c\r\n[zlib 12] CC uncompr.c\r\n[zlib 13] CC gzclose.c\r\n[zlib 14] CC gzlib.c\r\n[zlib 15] CC gzread.c\r\n[zlib 16] CC gzwrite.c\r\nar: creating archive libr_z.a\r\n[zip 17] CC zip_add.c\r\n[zip 18] CC zip_add_dir.c\r\n[zip 19] CC zip_add_entry.c\r\n[zip 20] CC zip_algorithm_deflate.c\r\n[zip 21] CC zip_buffer.c\r\n[zip 22] CC zip_close.c\r\n[zip 23] CC zip_delete.c\r\n[zip 24] CC zip_dir_add.c\r\n[zip 25] CC zip_dirent.c\r\n[zip 26] CC zip_discard.c\r\n[zip 27] CC zip_entry.c\r\n[zip 28] CC zip_err_str.c\r\n[zip 29] CC zip_error.c\r\n[zip 30] CC zip_error_clear.c\r\n[zip 31] CC zip_error_get.c\r\n[zip 32] CC zip_error_get_sys_type.c\r\n[zip 33] CC zip_error_strerror.c\r\n[zip 34] CC zip_error_to_str.c\r\n[zip 35] CC zip_extra_field.c\r\n[zip 36] CC zip_extra_field_api.c\r\n[zip 37] CC zip_fclose.c\r\n[zip 38] CC zip_fdopen.c\r\n[zip 39] CC zip_file_add.c\r\n[zip 40] CC zip_file_error_clear.c\r\n[zip 41] CC zip_file_error_get.c\r\n[zip 42] CC zip_file_get_comment.c\r\n[zip 43] CC zip_file_get_external_attributes.c\r\n[zip 44] CC zip_file_get_offset.c\r\n[zip 45] CC zip_file_rename.c\r\n[zip 46] CC zip_file_replace.c\r\n[zip 47] CC zip_file_set_comment.c\r\n[zip 48] CC zip_file_set_external_attributes.c\r\n[zip 49] CC zip_file_set_mtime.c\r\n[zip 50] CC zip_file_strerror.c\r\n[zip 51] CC zip_filerange_crc.c\r\n[zip 52] CC zip_fopen.c\r\n[zip 53] CC zip_fopen_index.c\r\n[zip 54] CC zip_fopen_index_encrypted.c\r\n[zip 55] CC zip_fread.c\r\n[zip 56] CC zip_fseek.c\r\n[zip 57] CC zip_ftell.c\r\n[zip 58] CC zip_get_archive_comment.c\r\n[zip 59] CC zip_get_archive_flag.c\r\n[zip 60] CC zip_get_file_comment.c\r\n[zip 61] CC zip_get_name.c\r\n[zip 62] CC zip_get_num_entries.c\r\n[zip 63] CC zip_get_num_files.c\r\n[zip 64] CC zip_hash.c\r\n[zip 65] CC zip_io_util.c\r\n[zip 66] CC zip_libzip_version.c\r\n[zip 67] CC zip_memdup.c\r\n[zip 68] CC zip_name_locate.c\r\n[zip 69] CC zip_new.c\r\n[zip 70] CC zip_open.c\r\n[zip 71] CC zip_pkware.c\r\n[zip 72] CC zip_progress.c\r\n[zip 73] CC zip_random_unix.c\r\n[zip 74] CC zip_rename.c\r\nzip_hash.c: In function 'hash_string':\r\nzip_hash.c:87: warning: integer constant is too large for 'unsigned long' type\r\n[zip 75] CC zip_replace.c\r\n[zip 76] CC zip_set_archive_comment.c\r\n[zip 77] CC zip_set_archive_flag.c\r\n[zip 78] CC zip_set_default_password.c\r\n[zip 79] CC zip_set_file_comment.c\r\n[zip 80] CC zip_set_file_compression.c\r\n[zip 81] CC zip_set_name.c\r\n[zip 82] CC zip_source_accept_empty.c\r\n[zip 83] CC zip_source_begin_write.c\r\n[zip 84] CC zip_source_begin_write_cloning.c\r\n[zip 85] CC zip_source_buffer.c\r\n[zip 86] CC zip_source_call.c\r\n[zip 87] CC zip_source_close.c\r\n[zip 88] CC zip_source_commit_write.c\r\n[zip 89] CC zip_source_compress.c\r\n[zip 90] CC zip_source_crc.c\r\n[zip 91] CC zip_source_deflate.c\r\n[zip 92] CC zip_source_error.c\r\n[zip 93] CC zip_source_file_common.c\r\n[zip 94] CC zip_source_file_stdio.c\r\n[zip 95] CC zip_source_file_stdio_named.c\r\n[zip 96] CC zip_source_free.c\r\n[zip 97] CC zip_source_function.c\r\n[zip 98] CC zip_source_get_file_attributes.c\r\n[zip 99] CC zip_source_is_deleted.c\r\n[zip 100] CC zip_source_layered.c\r\n[zip 101] CC zip_source_open.c\r\n[zip 102] CC zip_source_pkware.c\r\n[zip 103] CC zip_source_pkware_decode.c\r\n[zip 104] CC zip_source_pkware_encode.c\r\n[zip 105] CC zip_source_pop.c\r\n[zip 106] CC zip_source_read.c\r\n[zip 107] CC zip_source_remove.c\r\n[zip 108] CC zip_source_rollback_write.c\r\n[zip 109] CC zip_source_seek.c\r\n[zip 110] CC zip_source_seek_write.c\r\n[zip 111] CC zip_source_stat.c\r\n[zip 112] CC zip_source_supports.c\r\n[zip 113] CC zip_source_tell.c\r\n[zip 114] CC zip_source_tell_write.c\r\n[zip 115] CC zip_source_window.c\r\n[zip 116] CC zip_source_write.c\r\n[zip 117] CC zip_source_zip.c\r\n[zip 118] CC zip_source_zip_new.c\r\n[zip 119] CC zip_stat.c\r\n[zip 120] CC zip_stat_index.c\r\n[zip 121] CC zip_stat_init.c\r\n[zip 122] CC zip_strerror.c\r\n[zip 123] CC zip_string.c\r\n[zip 124] CC zip_utf-8.c\r\nar: creating archive libr_zip.a\r\nar q librz.a zlib/adler32.o zlib/compress.o zlib/crc32.o zlib/deflate.o zlib/gzclose.o zlib/gzlib.o zlib/gzread.o zlib/gzwrite.o zlib/infback.o zlib/inffast.o zlib/inflate.o zlib/inftrees.o zlib/trees.o zlib/uncompr.o zlib/zutil.o zip/zip_add.o zip/zip_add_dir.o zip/zip_add_entry.o zip/zip_algorithm_deflate.o zip/zip_buffer.o zip/zip_close.o zip/zip_delete.o zip/zip_dir_add.o zip/zip_dirent.o zip/zip_discard.o zip/zip_entry.o zip/zip_err_str.o zip/zip_error.o zip/zip_error_clear.o zip/zip_error_get.o zip/zip_error_get_sys_type.o zip/zip_error_strerror.o zip/zip_error_to_str.o zip/zip_extra_field.o zip/zip_extra_field_api.o zip/zip_fclose.o zip/zip_fdopen.o zip/zip_file_add.o zip/zip_file_error_clear.o zip/zip_file_error_get.o zip/zip_file_get_comment.o zip/zip_file_get_external_attributes.o zip/zip_file_get_offset.o zip/zip_file_rename.o zip/zip_file_replace.o zip/zip_file_set_comment.o zip/zip_file_set_external_attributes.o zip/zip_file_set_mtime.o zip/zip_file_strerror.o zip/zip_filerange_crc.o zip/zip_fopen.o zip/zip_fopen_index.o zip/zip_fopen_index_encrypted.o zip/zip_fread.o zip/zip_fseek.o zip/zip_ftell.o zip/zip_get_archive_comment.o zip/zip_get_archive_flag.o zip/zip_get_file_comment.o zip/zip_get_name.o zip/zip_get_num_entries.o zip/zip_get_num_files.o zip/zip_hash.o zip/zip_io_util.o zip/zip_libzip_version.o zip/zip_memdup.o zip/zip_name_locate.o zip/zip_new.o zip/zip_open.o zip/zip_pkware.o zip/zip_progress.o zip/zip_random_unix.o zip/zip_rename.o zip/zip_replace.o zip/zip_set_archive_comment.o zip/zip_set_archive_flag.o zip/zip_set_default_password.o zip/zip_set_file_comment.o zip/zip_set_file_compression.o zip/zip_set_name.o zip/zip_source_accept_empty.o zip/zip_source_begin_write.o zip/zip_source_begin_write_cloning.o zip/zip_source_buffer.o zip/zip_source_call.o zip/zip_source_close.o zip/zip_source_commit_write.o zip/zip_source_compress.o zip/zip_source_crc.o zip/zip_source_deflate.o zip/zip_source_error.o zip/zip_source_file_common.o zip/zip_source_file_stdio.o zip/zip_source_file_stdio_named.o zip/zip_source_free.o zip/zip_source_function.o zip/zip_source_get_file_attributes.o zip/zip_source_is_deleted.o zip/zip_source_layered.o zip/zip_source_open.o zip/zip_source_pkware.o zip/zip_source_pkware_decode.o zip/zip_source_pkware_encode.o zip/zip_source_pop.o zip/zip_source_read.o zip/zip_source_remove.o zip/zip_source_rollback_write.o zip/zip_source_seek.o zip/zip_source_seek_write.o zip/zip_source_stat.o zip/zip_source_supports.o zip/zip_source_tell.o zip/zip_source_tell_write.o zip/zip_source_window.o zip/zip_source_write.o zip/zip_source_zip.o zip/zip_source_zip_new.o zip/zip_stat.o zip/zip_stat_index.o zip/zip_stat_init.o zip/zip_strerror.o zip/zip_string.o zip/zip_utf-8.o\r\nar: creating archive librz.a\r\nranlib librz.a\r\nmake[2]: /count.sh: Command not found\r\n[] CC ../../shlr/spp/spp.c\r\nIn file included from ../../shlr/spp/spp.c:3:\r\n../../shlr/spp/spp.h:83:20: error: r_util.h: No such file or directory\r\nIn file included from ../../shlr/spp/spp.c:3:\r\n../../shlr/spp/spp.h:95: error: parse error before 'RStrBuf'\r\n../../shlr/spp/spp.h:95: warning: no semicolon at end of struct or union\r\n../../shlr/spp/spp.h:98: error: parse error before '}' token\r\n../../shlr/spp/spp.h:98: warning: type defaults to 'int' in declaration of 'Output'\r\n../../shlr/spp/spp.h:98: warning: data definition has no type or storage class\r\n../../shlr/spp/spp.h:120: error: parse error before 'Output'\r\n../../shlr/spp/spp.h:134: error: parse error before 'Output'\r\n../../shlr/spp/spp.h:135: error: parse error before '*' token\r\n../../shlr/spp/spp.h:149: error: parse error before 'Output'\r\n../../shlr/spp/spp.h:149: warning: no semicolon at end of struct or union\r\n../../shlr/spp/spp.h:150: warning: type defaults to 'int' in declaration of 'Spp'\r\n../../shlr/spp/spp.h:150: warning: data definition has no type or storage class\r\n../../shlr/spp/spp.h:152: error: parse error before 'Output'\r\n../../shlr/spp/spp.h:153: error: parse error before 'Output'\r\n../../shlr/spp/spp.h:154: error: parse error before 'Output'\r\n../../shlr/spp/spp.h:155: error: parse error before 'Output'\r\n../../shlr/spp/spp.h:156: error: parse error before 'Output'\r\n../../shlr/spp/spp.h:161: error: parse error before '*' token\r\n../../shlr/spp/spp.h:161: warning: type defaults to 'int' in declaration of 'spp_new'\r\n../../shlr/spp/spp.h:161: warning: data definition has no type or storage class\r\n../../shlr/spp/spp.h:162: error: parse error before '*' token\r\n../../shlr/spp/spp.h:163: error: parse error before '*' token\r\nIn file included from ../../shlr/spp/spp.c:4:\r\n../../shlr/spp/r_api.h:30: error: parse error before '*' token\r\nIn file included from ../../shlr/spp/spp.c:5:\r\n../../shlr/spp/config.h:5:14: error: #if with no expression\r\nIn file included from ../../shlr/spp/config.h:19,\r\n                 from ../../shlr/spp/spp.c:5:\r\n../../shlr/spp/p/spp.h: In function 'spp_var_get':\r\n../../shlr/spp/p/spp.h:29: warning: implicit declaration of function 'r_sys_getenv'\r\n../../shlr/spp/p/spp.h:29: warning: return makes pointer from integer without a cast\r\n../../shlr/spp/p/spp.h: In function 'spp_var_set':\r\n../../shlr/spp/p/spp.h:33: warning: implicit declaration of function 'r_sys_setenv'\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:69: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_set':\r\n../../shlr/spp/p/spp.h:71: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:71: error: (Each undeclared identifier is reported only once\r\n../../shlr/spp/p/spp.h:71: error: for each function it appears in.)\r\n../../shlr/spp/p/spp.h:74: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:93: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_get':\r\n../../shlr/spp/p/spp.h:95: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:98: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:100: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:105: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_getrandom':\r\n../../shlr/spp/p/spp.h:107: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:114: warning: implicit declaration of function 'r_sys_getpid'\r\n../../shlr/spp/p/spp.h:116: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:120: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:124: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_add':\r\n../../shlr/spp/p/spp.h:126: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:128: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:146: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_sub':\r\n../../shlr/spp/p/spp.h:147: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:150: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:165: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_trace':\r\n../../shlr/spp/p/spp.h:166: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:167: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:173: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_echo':\r\n../../shlr/spp/p/spp.h:174: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:175: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:175: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:181: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_error':\r\n../../shlr/spp/p/spp.h:182: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:185: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:189: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_warning':\r\n../../shlr/spp/p/spp.h:190: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:193: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:197: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_system':\r\n../../shlr/spp/p/spp.h:198: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:209: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_include':\r\n../../shlr/spp/p/spp.h:211: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:217: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:222: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:231: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_if':\r\n../../shlr/spp/p/spp.h:232: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:233: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:238: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_ifeq':\r\n../../shlr/spp/p/spp.h:239: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:245: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:258: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_hex':\r\n../../shlr/spp/p/spp.h:260: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:267: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:275: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_grepline':\r\n../../shlr/spp/p/spp.h:281: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:282: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:294: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:302: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_else':\r\n../../shlr/spp/p/spp.h:303: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:307: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_ifnot':\r\n../../shlr/spp/p/spp.h:308: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:308: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:308: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:313: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_ifin':\r\n../../shlr/spp/p/spp.h:315: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:318: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:330: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h:334: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_default':\r\n../../shlr/spp/p/spp.h:335: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:338: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:348: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h:357: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_switch':\r\n../../shlr/spp/p/spp.h:358: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:367: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h: In function 'spp_case':\r\n../../shlr/spp/p/spp.h:368: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:368: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h: At top level:\r\n../../shlr/spp/p/spp.h:372: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h:378: error: parse error before 'Output'\r\n../../shlr/spp/p/spp.h:409: error: parse error before '*' token\r\n../../shlr/spp/p/spp.h: In function 'spp_fputs':\r\n../../shlr/spp/p/spp.h:416: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/p/spp.h:416: error: 'buf' undeclared (first use in this function)\r\nIn file included from ../../shlr/spp/config.h:20,\r\n                 from ../../shlr/spp/spp.c:5:\r\n../../shlr/spp/p/acr.h: At top level:\r\n../../shlr/spp/p/acr.h:16: error: parse error before 'Output'\r\n../../shlr/spp/p/acr.h: In function 'acr_default':\r\n../../shlr/spp/p/acr.h:18: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/acr.h: At top level:\r\n../../shlr/spp/p/acr.h:29: error: parse error before 'Output'\r\nIn file included from ../../shlr/spp/config.h:21,\r\n                 from ../../shlr/spp/spp.c:5:\r\n../../shlr/spp/p/pod.h:3: error: parse error before 'Output'\r\n../../shlr/spp/p/pod.h: In function 'pod_default':\r\n../../shlr/spp/p/pod.h:4: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/p/pod.h:4: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/pod.h: At top level:\r\n../../shlr/spp/p/pod.h:8: error: parse error before 'Output'\r\n../../shlr/spp/p/pod.h: In function 'pod_cut':\r\n../../shlr/spp/p/pod.h:9: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/p/pod.h:10: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/pod.h: At top level:\r\n../../shlr/spp/p/pod.h:14: error: parse error before 'Output'\r\n../../shlr/spp/p/pod.h: In function 'pod_head1':\r\n../../shlr/spp/p/pod.h:15: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/pod.h:16: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/p/pod.h:17: error: 'buf' undeclared (first use in this function)\r\nIn file included from ../../shlr/spp/config.h:22,\r\n                 from ../../shlr/spp/spp.c:5:\r\n../../shlr/spp/p/cpp.h: At top level:\r\n../../shlr/spp/p/cpp.h:3: error: parse error before 'Output'\r\n../../shlr/spp/p/cpp.h: In function 'cpp_default':\r\n../../shlr/spp/p/cpp.h:4: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h:4: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h: At top level:\r\n../../shlr/spp/p/cpp.h:8: error: parse error before 'Output'\r\n../../shlr/spp/p/cpp.h: In function 'cpp_error':\r\n../../shlr/spp/p/cpp.h:9: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h:10: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h:10: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h: At top level:\r\n../../shlr/spp/p/cpp.h:17: error: parse error before 'Output'\r\n../../shlr/spp/p/cpp.h: In function 'cpp_warning':\r\n../../shlr/spp/p/cpp.h:18: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h:19: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h:19: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h: At top level:\r\n../../shlr/spp/p/cpp.h:25: error: parse error before 'Output'\r\n../../shlr/spp/p/cpp.h: In function 'cpp_if':\r\n../../shlr/spp/p/cpp.h:26: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h:28: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h: At top level:\r\n../../shlr/spp/p/cpp.h:38: error: parse error before 'Output'\r\n../../shlr/spp/p/cpp.h: In function 'cpp_ifdef':\r\n../../shlr/spp/p/cpp.h:39: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h:40: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h: At top level:\r\n../../shlr/spp/p/cpp.h:44: error: parse error before 'Output'\r\n../../shlr/spp/p/cpp.h: In function 'cpp_else':\r\n../../shlr/spp/p/cpp.h:45: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h: At top level:\r\n../../shlr/spp/p/cpp.h:49: error: parse error before 'Output'\r\n../../shlr/spp/p/cpp.h: In function 'cpp_ifndef':\r\n../../shlr/spp/p/cpp.h:50: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h:50: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h:50: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h: At top level:\r\n../../shlr/spp/p/cpp.h:75: error: parse error before '*' token\r\n../../shlr/spp/p/cpp.h: In function 'cpp_fputs':\r\n../../shlr/spp/p/cpp.h:78: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h:83: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h: At top level:\r\n../../shlr/spp/p/cpp.h:87: error: parse error before 'Output'\r\n../../shlr/spp/p/cpp.h: In function 'cpp_define':\r\n../../shlr/spp/p/cpp.h:88: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h: At top level:\r\n../../shlr/spp/p/cpp.h:113: error: parse error before 'Output'\r\n../../shlr/spp/p/cpp.h:117: error: parse error before 'Output'\r\n../../shlr/spp/p/cpp.h: In function 'cpp_include':\r\n../../shlr/spp/p/cpp.h:118: error: 'state' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h:119: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/p/cpp.h:119: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/spp.c: At top level:\r\n../../shlr/spp/spp.c:11: error: parse error before 'Output'\r\n../../shlr/spp/spp.c: In function 'spp_run':\r\n../../shlr/spp/spp.c:16: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/spp.c:39: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/spp.c: In function 'spp_run_str':\r\n../../shlr/spp/spp.c:61: error: parse error before 'tmp'\r\n../../shlr/spp/spp.c:62: error: 'tmp' undeclared (first use in this function)\r\n../../shlr/spp/spp.c:63: warning: implicit declaration of function 'r_strbuf_new'\r\n../../shlr/spp/spp.c:65: warning: implicit declaration of function 'r_strbuf_get'\r\n../../shlr/spp/spp.c:65: warning: passing argument 1 of 'strdup' makes pointer from integer without a cast\r\n../../shlr/spp/spp.c:66: warning: implicit declaration of function 'r_strbuf_free'\r\n../../shlr/spp/spp.c: At top level:\r\n../../shlr/spp/spp.c:88: error: parse error before '*' token\r\n../../shlr/spp/spp.c: In function 'do_fputs':\r\n../../shlr/spp/spp.c:96: error: 'str' undeclared (first use in this function)\r\n../../shlr/spp/spp.c:100: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/spp.c: At top level:\r\n../../shlr/spp/spp.c:109: error: parse error before 'Output'\r\n../../shlr/spp/spp.c: In function 'spp_eval':\r\n../../shlr/spp/spp.c:110: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/spp.c:110: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/spp.c: At top level:\r\n../../shlr/spp/spp.c:113: error: parse error before 'Output'\r\n../../shlr/spp/spp.c: In function 'spp_proc_eval':\r\n../../shlr/spp/spp.c:122: error: 'buf' undeclared (first use in this function)\r\n../../shlr/spp/spp.c:131: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/spp.c: At top level:\r\n../../shlr/spp/spp.c:232: error: parse error before 'Output'\r\n../../shlr/spp/spp.c: In function 'spp_io':\r\n../../shlr/spp/spp.c:244: error: 'in' undeclared (first use in this function)\r\n../../shlr/spp/spp.c:274: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/spp.c: At top level:\r\n../../shlr/spp/spp.c:280: error: parse error before 'Output'\r\n../../shlr/spp/spp.c: In function 'spp_file':\r\n../../shlr/spp/spp.c:281: error: 'file' undeclared (first use in this function)\r\n../../shlr/spp/spp.c:284: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/spp.c: At top level:\r\n../../shlr/spp/spp.c:337: error: parse error before '*' token\r\n../../shlr/spp/spp.c: In function 'out_printf':\r\n../../shlr/spp/spp.c:339: error: 'str' undeclared (first use in this function)\r\n../../shlr/spp/spp.c:340: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/spp.c:346: warning: implicit declaration of function 'r_strbuf_append'\r\n../../shlr/spp/spp.c:339: error: 'va_start' used in function with fixed args\r\n../../shlr/spp/spp.c: In function 'spp_eval_str':\r\n../../shlr/spp/spp.c:364: error: parse error before 'out'\r\n../../shlr/spp/spp.c:365: error: 'out' undeclared (first use in this function)\r\n../../shlr/spp/spp.c:367: warning: implicit declaration of function 'r_strbuf_init'\r\n../../shlr/spp/spp.c:373: warning: implicit declaration of function 'r_strbuf_drain'\r\n../../shlr/spp/spp.c:373: warning: return makes pointer from integer without a cast\r\nmake[2]: *** [../../shlr/spp/spp.o] Error 1\r\nmake[1]: *** [spp_config] Error 2\r\nmake: *** [all] Error 2\r\n```","comments":[{"id":"IC_kwDOAEpMrs5zOdzP","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"that error is weird: `make[2]: /count.sh: Command not found` and then i see `../../shlr/spp/spp.h:83:20: error: r_util.h: No such file or directory\r\n`thats very weird. i cant repro in my macppc it seems like there's something wrong or missing vars in the makefiles in your side.. weird","createdAt":"2024-02-08T00:34:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22574#issuecomment-1933171919","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs545kpK","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"after lots of smol fixes i end up spotting all the problems and managed to create a branch that builds for me. Can you give it a try? i cant merge it because its introducing lots of warnings, but i didnt find a way to make r_vec compile for gcc4 without those:\r\n\r\nhttps://github.com/radareorg/radare2/pull/22774\r\n\r\nyou can do this:\r\n\r\n```bash\r\ngit checkout gcc4-fixes\r\nsys/install.sh --disable-debugger\r\n```\r\n\r\nthe debugger was building and working at some point, but it's not the case right now. That could be the next step to be done when i get this PR merged without warnings.","createdAt":"2024-03-30T17:40:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22574#issuecomment-2028358218","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5457VW","author":{"login":"thamugadi"},"authorAssociation":"NONE","body":"hi, \r\nI tried what you suggested, but I'm still getting the same errors as previously quoted","createdAt":"2024-03-30T19:37:24Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22574#issuecomment-2028451158","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs546ElU","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Thats weird, i cant see the errors you posted. But i plan to continue working on this because the large pr is not yet merged and there are more things to refine","createdAt":"2024-03-30T22:56:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/22574#issuecomment-2028489044","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs55DAk8","author":{"login":"sevan"},"authorAssociation":"CONTRIBUTOR","body":"I got v5.9.0 built on Tiger/PowerPC using GCC 5. There's some C11-isms (redefinitions) which have crept into the radare codebase that I sidestepped by using GCC 5 rather than 4.0. This is the [draft formula](https://github.com/mistydemeo/tigerbrew/pull/1109) with my patches (see after the __END__ statement) that can be used until I have upstreamed everything to radare repo.","createdAt":"2024-04-02T00:13:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/22574#issuecomment-2030831932","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5-fHX3","author":{"login":"barracuda156"},"authorAssociation":"NONE","body":"@thamugadi This is because it arbitrarily pick `cc` for compiler in a middle of the build, ignoring env setting. Notice, what happens once it goes into arm64 directory:\r\n```\r\n/opt/local/bin/gcc-mp-13 -c -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/include -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/../shlr/grub/include -DR2_PLUGIN_INCORE -Iarch/include -Iarch  -pipe -Os -arch ppc -MD -fno-common   -fPIC -Wall -g -DR2__UNIX__=1 -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -I../../shlr/zip/include -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/../shlr/sdb/include -fvisibility=hidden -o fs.o fs.c\r\n/opt/local/bin/gcc-mp-13 -c -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/include -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/../shlr/grub/include -DR2_PLUGIN_INCORE -Iarch/include -Iarch  -pipe -Os -arch ppc -MD -fno-common   -fPIC -Wall -g -DR2__UNIX__=1 -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -I../../shlr/zip/include -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/../shlr/sdb/include -fvisibility=hidden -o fs_file.o fs_file.c\r\n/opt/local/bin/gcc-mp-13 -c -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/include -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/../shlr/grub/include -DR2_PLUGIN_INCORE -Iarch/include -Iarch  -pipe -Os -arch ppc -MD -fno-common   -fPIC -Wall -g -DR2__UNIX__=1 -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -Igrub/include -I../../shlr/zip/include -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/../shlr/sdb/include -fvisibility=hidden -o fs_shell.o fs_shell.c\r\nmake[5]: Leaving directory `/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/fs'\r\n\"/opt/local/bin/gcc-mp-13 -dynamiclib -fPIC -o libr_fs.dylib -Wl,-install_name,/opt/local/lib/libr_fs.dylib p/fs_ext2.o p/fs_fat.o p/fs_fb.o p/fs_hfs.o p/fs_hfsplus.o p/fs_io.o p/fs_iso9660.o p/fs_jfs.o p/fs_minix.o p/fs_ntfs.o p/fs_posix.o p/fs_r2.o p/fs_reiserfs.o p/fs_sfs.o p/fs_tar.o p/fs_udf.o p/fs_ufs.o p/fs_xfs.o p/fs_zip.o fs.o fs_file.o fs_shell.o  -L/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/util -L/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/io -L/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/socket -L/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/cons -L/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/crypto -lr_util -lr_io -lr_socket -lr_cons -lr_crypto   -fPIC -fvisibility=hidden   -L/opt/local/lib -Wl,-headerpad_max_install_names -arch ppc /opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/../shlr/grub/libgrubfs.a -lzip -fvisibility=hidden\"\r\nmake[4]: Leaving directory `/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/fs'\r\nmake[4]: Entering directory `/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/fs'\r\nmake[4]: `libr_fs.a' is up to date.\r\nmake[4]: Leaving directory `/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/fs'\r\nmake[3]: Leaving directory `/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/fs'\r\ncd arch-arm64 && git checkout -q radare2-wip > /dev/null && git reset --hard 55d73c6bbb94448a5c615933179e73ac618cf876\r\nHEAD is now at 55d73c6 Remove c99 dependency\r\n/usr/bin/make arm64dis.a\r\nmake[5]: Entering directory `/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/arch/p/arm/v35'\r\ncc -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/arch/p/arm/v35/arch-arm64/disassembler/ -fPIC -DUNUSED=R_UNUSED -fPIC   -c -o arch-arm64/disassembler/decode.o arch-arm64/disassembler/decode.c\r\ncc -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/arch/p/arm/v35/arch-arm64/disassembler/ -fPIC -DUNUSED=R_UNUSED -fPIC   -c -o arch-arm64/disassembler/decode0.o arch-arm64/disassembler/decode0.c\r\ncc -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/arch/p/arm/v35/arch-arm64/disassembler/ -fPIC -DUNUSED=R_UNUSED -fPIC   -c -o arch-arm64/disassembler/decode1.o arch-arm64/disassembler/decode1.c\r\ncc -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/arch/p/arm/v35/arch-arm64/disassembler/ -fPIC -DUNUSED=R_UNUSED -fPIC   -c -o arch-arm64/disassembler/decode2.o arch-arm64/disassembler/decode2.c\r\ncc -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/arch/p/arm/v35/arch-arm64/disassembler/ -fPIC -DUNUSED=R_UNUSED -fPIC   -c -o arch-arm64/disassembler/decode_fields32.o arch-arm64/disassembler/decode_fields32.c\r\ncc -I/opt/local/var/macports/build/_opt_PPCSnowLeopardPorts_devel_radare2/radare2/work/radare2-5.9.2/libr/arch/p/arm/v35/arch-arm64/disassembler/ -fPIC -DUNUSED=R_UNUSED -fPIC   -c -o arch-arm64/disassembler/decode_scratchpad.o arch-arm64/disassembler/decode_scratchpad.c\r\narch-arm64/disassembler/decode.c: In function â€˜aarch64_decomposeâ€™:\r\narch-arm64/disassembler/decode.c:13: warning: integer constant is too large for â€˜longâ€™ type\r\narch-arm64/disassembler/decode.c:14: warning: integer constant is too large for â€˜longâ€™ type\r\narch-arm64/disassembler/decode_scratchpad.c:365:7: error: invalid suffix \"b00000\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:367:7: error: invalid suffix \"b00001\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:369:7: error: invalid suffix \"b00010\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:371:7: error: invalid suffix \"b00011\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:373:7: error: invalid suffix \"b00100\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:375:7: error: invalid suffix \"b00101\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:377:7: error: invalid suffix \"b00110\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:379:7: error: invalid suffix \"b00111\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:381:7: error: invalid suffix \"b01000\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:383:7: error: invalid suffix \"b01001\" on integer constant\r\narch-arm64/disassembler/decode_scratchpad.c:385:7: error: invalid suffix \"b01010\" on integer constant\r\n```","createdAt":"2024-05-21T08:40:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/22574#issuecomment-2122085879","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5-fZsM","author":{"login":"barracuda156"},"authorAssociation":"NONE","body":"I have opened an issue for a compiler choice bug: https://github.com/radareorg/radare2/issues/22955","createdAt":"2024-05-21T09:16:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22574#issuecomment-2122160908","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5-ffZm","author":{"login":"barracuda156"},"authorAssociation":"NONE","body":"On a side note, this looks wrong:\r\n```\r\nchecking build system type... PowerMacintosh-unknown-darwin\r\nchecking host system type... PowerMacintosh-unknown-darwin\r\nchecking target system type... PowerMacintosh-unknown-darwin\r\n```\r\nIt should be `powerpc-apple-darwin` instead, or `powerpc64-apple-darwin` for `ppc64`. This is likely https://github.com/radareorg/radare2/issues/22956","createdAt":"2024-05-21T09:27:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22574#issuecomment-2122184294","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6VrpqB","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"can you submit a PR?","createdAt":"2024-12-02T11:13:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22574#issuecomment-2511248001","viewerDidAuthor":true}],"number":22574,"title":"radare2 fails to build on PowerPC Macintosh"},{"body":"## Environment\r\n\r\n```sh\r\nTue Feb  6 01:55:06 PM CST 2024\r\nradare2 5.8.9 31646 @ linux-x86-64\r\nbirth: git.5.8.8-1043-g7d8bad5ba1 2024-02-05__14:32:26\r\ncommit: 7d8bad5ba11b19e4a3520d3aeaf1796ce6b4efd0\r\noptions: gpl -O? cs:5 cl:2 make\r\nLinux x86_64\r\n\r\nAlso just updated and tested with latest commit below\r\nradare2 5.8.9 31662 @ linux-x86-64\r\nbirth: git.5.8.8-1049-g098669591c 2024-02-06__13:58:11\r\ncommit: 098669591ca0327619fd2df572ca81d2dfe50ec0\r\noptions: gpl -O? cs:5 cl:2 make\r\n```\r\n\r\n## Description\r\nWhen opening a large (2.3G) ELF bin with DWARF symbols radare will consume over 8G of RAM and get oom-killed. If I set a soft ulimit and let it run again it will SIGSEGV in a memcpy call. See bottom gdb notes. I'm not sure why the debug symbols for libr_util.so aren't showing up; I'm guessing something weird with the macros in the hashtable source C? Let me know if there's any extra info I can get from GDB.\r\n\r\n## Test\r\nThe binary is large so I can't easily distribute it but it can be downloaded/made.\r\n`/palworld/Pal/Binaries/Linux/merged: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.10.93, BuildID[xxHash]=a37ec78630b980cc, with debug_info, not stripped`\r\n\r\nYou'll need to get the old bins for the game dedicated server Palworld with something like https://github.com/SteamRE/DepotDownloader and get the old manifest files https://steamdb.info/depot/2394012/history/?changeid=M:4603741190199642564\r\n\r\nThen eu-unstrip the executable and the .debug ELF together and just `r2 merged.bin`\r\n\r\n## GDB output\r\n```\r\npwndbg> bt\r\n#0  0x00007ffff5c491a1 in ?? () from /usr/lib/libc.so.6\r\n#1  0x00007ffff7cff328 in ht_pp_insert_kv () from /home/unknown/Development/radare2/prefix/lib/libr_util.so\r\n#2  0x00007ffff7cfef84 in internal_ht_grow () from /home/unknown/Development/radare2/prefix/lib/libr_util.so\r\n#3  0x00007ffff7cff13c in check_growing () from /home/unknown/Development/radare2/prefix/lib/libr_util.so\r\n#4  0x00007ffff7cff334 in ht_pp_insert_kv () from /home/unknown/Development/radare2/prefix/lib/libr_util.so\r\n#5  0x00007ffff7d08d74 in sdb_ht_insert_kvp () from /home/unknown/Development/radare2/prefix/lib/libr_util.so\r\n#6  0x00007ffff7d1470e in sdb_set_internal () from /home/unknown/Development/radare2/prefix/lib/libr_util.so\r\n#7  0x00007ffff7d147bf in sdb_set () from /home/unknown/Development/radare2/prefix/lib/libr_util.so\r\n#8  0x00007ffff7d13843 in sdb_add () from /home/unknown/Development/radare2/prefix/lib/libr_util.so\r\n#9  0x00007ffff5e34f53 in add_sdb_addrline (s=0x555555723060, addr=111037128, file=0x555670fd3190 \"Runtime/Core/Public\\\\Containers/BitArray.h\", line=0, column=3, mode=2, \r\n    print=0x7ffff7e5a7b9 <r_cons_printf>) at dwarf.c:1023\r\n#10 0x00007ffff5e35739 in parse_spec_opcode (bin=0x5555555a5020, \r\n    obuf=0x7fffc35c6497 \"\\005\\030\\006\\003\\271\\016\\202\\005\\b\\006<\\005\\027\\006m\\005\\004\\003wX\\005\\021K\\005\\v9\\005\\003\\006.\\005$\\006\\003\\024.\\004\\367\\001\\005/\\003\\333qf\\005\\n\\006\\202\\004\\221\\001\\0058\\006\\003\\250\\016t\\005\\027x\\005\\a\\006.\\005\\032\\006\\003F<\\004\\236\\001\\005\\004\\003\\217~.\\006\\003\\333st\\004\\221\\001\\005\\032\\006\\003\\226\\016\\272\\004\\236\\001\\005\\004\\003\\217~.\\006\\003\\333sf\\004\\221\\001\\005$\\006\\003\\311\\016t\\005\", len=82079570, hdr=0x7fffffffd2c0, regs=0x7fffffffd280, opcode=102 'f', mode=2) at dwarf.c:1156\r\n#11 0x00007ffff5e35f4e in parse_opcodes (bin=0x5555555a5020, obuf=0x7fffc35c6322 \"\\004\\236\\001\", len=82079570, hdr=0x7fffffffd2c0, regs=0x7fffffffd280, mode=2) at dwarf.c:1326\r\n#12 0x00007ffff5e362fb in parse_line_raw (a=0x5555555a5020, obuf=0x7fffc0533010 \"WE\\001\", len=133014489, mode=2, be=false) at dwarf.c:1400\r\n#13 0x00007ffff5e3a42e in r_bin_dwarf_parse_line (bin=0x5555555a5020, mode=2) at dwarf.c:2603\r\n#14 0x00007ffff77d22a4 in bin_dwarf (core=0x7ffff5a8e010, pj=0x0, mode=2) at cbin.c:1161\r\n#15 0x00007ffff77e1608 in r_core_bin_info (core=0x7ffff5a8e010, action=5263359, pj=0x0, mode=2, va=1, filter=0x0, chksum=0x0) at cbin.c:4750\r\n#16 0x00007ffff77ce9c9 in r_core_bin_set_env (r=0x7ffff5a8e010, binfile=0x55555571f190) at cbin.c:316\r\n#17 0x00007ffff7789f6f in r_core_file_load_for_io_plugin (r=0x7ffff5a8e010, baseaddr=18446744073709551615, loadaddr=0) at cfile.c:450\r\n#18 0x00007ffff778a81a in r_core_bin_load (r=0x7ffff5a8e010, filenameuri=0x555555798480 \"/home/unknown/srcds/palworld/Pal/Binaries/Linux/merged\", baddr=18446744073709551615) at cfile.c:658\r\n#19 0x00007ffff60f1161 in binload (r=0x7ffff5a8e010, filepath=0x555555798480 \"/home/unknown/srcds/palworld/Pal/Binaries/Linux/merged\", baddr=18446744073709551615) at radare2.c:547\r\n#20 0x00007ffff60f4651 in r_main_radare2 (argc=2, argv=0x7fffffffdca8) at radare2.c:1488\r\n#21 0x00005555555556fd in main (argc=2, argv=0x7fffffffdca8) at radare2.c:118\r\n#22 0x00007ffff5b18cd0 in ?? () from /usr/lib/libc.so.6\r\n#23 0x00007ffff5b18d8a in __libc_start_main () from /usr/lib/libc.so.6\r\n#24 0x0000555555555135 in _start ()\r\n```\r\n```\r\npwndbg> ctx\r\nLEGEND: STACK | HEAP | CODE | DATA | RWX | RODATA\r\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[ REGISTERS / show-flags off / show-compact-regs off ]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n*RAX  0x28\r\n*RBX  0x5555555a5020 â€”â–¸ 0x55555557d3f0 â—‚â€” '/home/unknown/srcds/palworld/Pal/Binaries/Linux/merged'\r\n*RCX  0x5556efbc7c60 â€”â–¸ 0x5555860d8560 â—‚â€” '0x4b6024b'\r\n*RDX  0x28\r\n*RDI  0x28\r\n*RSI  0x5556efbc7c60 â€”â–¸ 0x5555860d8560 â—‚â€” '0x4b6024b'\r\n*R8   0xffffffff\r\n*R9   0x0\r\n*R10  0x55570dc40e50 â—‚â€” 0x0\r\n*R11  0x55570dc41000\r\n*R12  0x0\r\n*R13  0x7fffffffdcc0 â€”â–¸ 0x7fffffffe18d â—‚â€” 'SHELL=/bin/bash'\r\n*R14  0x7ffff7ffd000 (_rtld_global) â€”â–¸ 0x7ffff7ffe2d0 â€”â–¸ 0x555555554000 â—‚â€” 0x10102464c457f\r\n*R15  0x555555557c58 â€”â–¸ 0x5555555551b0 â—‚â€” endbr64 \r\n*RBP  0x7fffffffce40 â€”â–¸ 0x7fffffffcf00 â€”â–¸ 0x7fffffffcf20 â€”â–¸ 0x7fffffffcf60 â€”â–¸ 0x7fffffffcf90 â—‚â€” ...\r\n*RSP  0x7fffffffce08 â€”â–¸ 0x7ffff7cff328 (ht_pp_insert_kv+97) â—‚â€” mov rax, qword ptr [rbp - 0x18]\r\n*RIP  0x7ffff5c491a1 â—‚â€” vmovdqu ymmword ptr [rdi], ymm0\r\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[ DISASM / x86-64 / set emulate on ]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n â–º 0x7ffff5c491a1    vmovdqu ymmword ptr [rdi], ymm0\r\n   0x7ffff5c491a5    vmovdqu ymmword ptr [rdi + rdx - 0x20], ymm1\r\n   0x7ffff5c491ab    vzeroupper \r\n   0x7ffff5c491ae    ret    \r\n \r\n   0x7ffff5c491af    nop    \r\n   0x7ffff5c491b0    cmp    edx, 0x10\r\n   0x7ffff5c491b3    jae    0x7ffff5c491e2                <0x7ffff5c491e2>\r\n    â†“\r\n   0x7ffff5c491e2    vmovdqu xmm0, xmmword ptr [rsi]\r\n   0x7ffff5c491e6    vmovdqu xmm1, xmmword ptr [rsi + rdx - 0x10]\r\n   0x7ffff5c491ec    vmovdqu xmmword ptr [rdi], xmm0\r\n   0x7ffff5c491f0    vmovdqu xmmword ptr [rdi + rdx - 0x10], xmm1\r\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[ STACK ]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n00:0000â”‚ rsp 0x7fffffffce08 â€”â–¸ 0x7ffff7cff328 (ht_pp_insert_kv+97) â—‚â€” mov rax, qword ptr [rbp - 0x18]\r\n01:0008â”‚-030 0x7fffffffce10 â€”â–¸ 0x55555561d548 â€”â–¸ 0x7ffff5c4b710 â—‚â€” endbr64 \r\n02:0010â”‚-028 0x7fffffffce18 â—‚â€” 0xdbb500ffffffff\r\n03:0018â”‚-020 0x7fffffffce20 â€”â–¸ 0x5556efbc7c60 â€”â–¸ 0x5555860d8560 â—‚â€” '0x4b6024b'\r\n04:0020â”‚-018 0x7fffffffce28 â€”â–¸ 0x555641c41cd0 â€”â–¸ 0x5556c1107d00 â€”â–¸ 0x5555b700f8f0 â€”â–¸ 0x5555b3997750 â—‚â€” ...\r\n05:0028â”‚-010 0x7fffffffce30 â€”â–¸ 0x5555bb54bed0 â€”â–¸ 0x5555726c5cf0 â—‚â€” '0x5dc3f80'\r\n06:0030â”‚-008 0x7fffffffce38 â—‚â€” 0x28 /* '(' */\r\n07:0038â”‚ rbp 0x7fffffffce40 â€”â–¸ 0x7fffffffcf00 â€”â–¸ 0x7fffffffcf20 â€”â–¸ 0x7fffffffcf60 â€”â–¸ 0x7fffffffcf90 â—‚â€” ...\r\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[ BACKTRACE ]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n â–º 0   0x7ffff5c491a1\r\n   1   0x7ffff7cff328 ht_pp_insert_kv+97\r\n   2   0x7ffff7cfef84 internal_ht_grow+230\r\n   3   0x7ffff7cff13c check_growing+42\r\n   4   0x7ffff7cff334 ht_pp_insert_kv+109\r\n   5   0x7ffff7d08d74 sdb_ht_insert_kvp+44\r\n   6   0x7ffff7d1470e sdb_set_internal+1039\r\n   7   0x7ffff7d147bf sdb_set+54\r\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n```\r\n```\r\npwndbg> frame 1\r\n#1  0x00007ffff7cff328 in ht_pp_insert_kv () from /home/unknown/Development/radare2/prefix/lib/libr_util.so\r\npwndbg> ctx\r\nLEGEND: STACK | HEAP | CODE | DATA | RWX | RODATA\r\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[ REGISTERS / show-flags off / show-compact-regs off ]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n*RAX  0x28\r\n*RBX  0x5555555a5020 â€”â–¸ 0x55555557d3f0 â—‚â€” '/home/unknown/srcds/palworld/Pal/Binaries/Linux/merged'\r\n*RCX  0x5556efbc7c60 â€”â–¸ 0x5555860d8560 â—‚â€” '0x4b6024b'\r\n*RDX  0x28\r\n*RDI  0x28\r\n*RSI  0x5556efbc7c60 â€”â–¸ 0x5555860d8560 â—‚â€” '0x4b6024b'\r\n*R8   0xffffffff\r\n*R9   0x0\r\n*R10  0x55570dc40e50 â—‚â€” 0x0\r\n*R11  0x55570dc41000\r\n*R12  0x0\r\n*R13  0x7fffffffdcc0 â€”â–¸ 0x7fffffffe18d â—‚â€” 'SHELL=/bin/bash'\r\n*R14  0x7ffff7ffd000 (_rtld_global) â€”â–¸ 0x7ffff7ffe2d0 â€”â–¸ 0x555555554000 â—‚â€” 0x10102464c457f\r\n*R15  0x555555557c58 â€”â–¸ 0x5555555551b0 â—‚â€” endbr64 \r\n*RBP  0x7fffffffce40 â€”â–¸ 0x7fffffffcf00 â€”â–¸ 0x7fffffffcf20 â€”â–¸ 0x7fffffffcf60 â€”â–¸ 0x7fffffffcf90 â—‚â€” ...\r\n*RSP  0x7fffffffce10 â€”â–¸ 0x55555561d548 â€”â–¸ 0x7ffff5c4b710 â—‚â€” endbr64 \r\n*RIP  0x7ffff7cff328 (ht_pp_insert_kv+97) â—‚â€” mov rax, qword ptr [rbp - 0x18]\r\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[ DISASM / x86-64 / set emulate on ]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n   0x7ffff7cff323 <ht_pp_insert_kv+92>\t   call   0x7ffff7c547e0 <memcpy@plt>\r\n â–º 0x7ffff7cff328 <ht_pp_insert_kv+97>     mov    rax, qword ptr [rbp - 0x18]\r\n   0x7ffff7cff32c <ht_pp_insert_kv+101>    mov    rdi, rax\r\n   0x7ffff7cff32f <ht_pp_insert_kv+104>    call   check_growing                <check_growing>\r\n \r\n   0x7ffff7cff334 <ht_pp_insert_kv+109>    mov    eax, 1\r\n   0x7ffff7cff339 <ht_pp_insert_kv+114>    jmp    ht_pp_insert_kv+121                <ht_pp_insert_kv+121>\r\n \r\n   0x7ffff7cff33b <ht_pp_insert_kv+116>    mov    eax, 0\r\n   0x7ffff7cff340 <ht_pp_insert_kv+121>    leave  \r\n   0x7ffff7cff341 <ht_pp_insert_kv+122>    ret    \r\n \r\n   0x7ffff7cff342 <insert_update>          push   rbp\r\n   0x7ffff7cff343 <insert_update+1>        mov    rbp, rsp\r\n   0x7ffff7cff346 <insert_update+4>        sub    rsp, 0x30\r\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[ STACK ]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n00:0000â”‚ rsp 0x7fffffffce10 â€”â–¸ 0x55555561d548 â€”â–¸ 0x7ffff5c4b710 â—‚â€” endbr64 \r\n01:0008â”‚-028 0x7fffffffce18 â—‚â€” 0xdbb500ffffffff\r\n02:0010â”‚-020 0x7fffffffce20 â€”â–¸ 0x5556efbc7c60 â€”â–¸ 0x5555860d8560 â—‚â€” '0x4b6024b'\r\n03:0018â”‚-018 0x7fffffffce28 â€”â–¸ 0x555641c41cd0 â€”â–¸ 0x5556c1107d00 â€”â–¸ 0x5555b700f8f0 â€”â–¸ 0x5555b3997750 â—‚â€” ...\r\n04:0020â”‚-010 0x7fffffffce30 â€”â–¸ 0x5555bb54bed0 â€”â–¸ 0x5555726c5cf0 â—‚â€” '0x5dc3f80'\r\n05:0028â”‚-008 0x7fffffffce38 â—‚â€” 0x28 /* '(' */\r\n06:0030â”‚ rbp 0x7fffffffce40 â€”â–¸ 0x7fffffffcf00 â€”â–¸ 0x7fffffffcf20 â€”â–¸ 0x7fffffffcf60 â€”â–¸ 0x7fffffffcf90 â—‚â€” ...\r\n07:0038â”‚+008 0x7fffffffce48 â€”â–¸ 0x7ffff7cfef84 (internal_ht_grow+230) â—‚â€” add dword ptr [rbp - 0x94], 1\r\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[ BACKTRACE ]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n   0   0x7ffff5c491a1\r\n â–º 1   0x7ffff7cff328 ht_pp_insert_kv+97\r\n   2   0x7ffff7cfef84 internal_ht_grow+230\r\n   3   0x7ffff7cff13c check_growing+42\r\n   4   0x7ffff7cff334 ht_pp_insert_kv+109\r\n   5   0x7ffff7d08d74 sdb_ht_insert_kvp+44\r\n   6   0x7ffff7d1470e sdb_set_internal+1039\r\n   7   0x7ffff7d147bf sdb_set+54\r\n   8   0x7ffff7d13843 sdb_add+76\r\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n```","comments":[{"id":"IC_kwDOAEpMrs5zFRSw","author":{"login":"mcd1992"},"authorAssociation":"CONTRIBUTOR","body":"Note it doesn't happen immediately and there is some debug notes a few minutes prior to it segfaulting. Might add some extra R_LOG_DEBUGs to the libr/bin/dwarf.c or shlr/sdb/src/ht.inc.c and see where its happening. If I open with -nn it doesn't happen but doing a `oob` will then trigger it. \r\n\r\n```DEBUG: empty symbol name\r\nDEBUG: empty symbol name\r\nDEBUG: Symbol name outside the strtab section\r\nDEBUG: Truncated corrupted section name: conditional<false, const Eigen::CwiseUnaryOp<Eigen::internal::scalar_conjugate_op<double>, const Eigen::CwiseBinaryOp<Eigen::internal::scalar_sum_op<double, double>, const Eigen::CwiseBinaryOp<Eigen::internal::scalar_sum_op<double, double>, const Eigen::CwiseBinaryOp<Eigen::internal::scalar_product_op<double, double>, const Eigen::CwiseNullaryOp<Eigen::internal::scalar_constant_op<double>, const Eigen::Matrix<double, -1, 1, 0, -1, 1> >, const Eigen::Map<const Eigen::Matrix\r\nDEBUG: Truncated corrupted section name: conditional<false, const Eigen::CwiseUnaryOp<Eigen::internal::scalar_real_op<double>, const Eigen::CwiseBinaryOp<Eigen::internal::scalar_sum_op<double, double>, const Eigen::CwiseBinaryOp<Eigen::internal::scalar_sum_op<double, double>, const Eigen::CwiseBinaryOp<Eigen::internal::scalar_product_op<double, double>, const Eigen::CwiseNullaryOp<Eigen::internal::scalar_constant_op<double>, const Eigen::Matrix<double, -1, 1, 0, -1, 1> >, const Eigen::Map<const Eigen::Matrix<doub\r\nDEBUG: Truncated corrupted section name: conditional<false, Eigen::CwiseUnaryView<Eigen::internal::scalar_real_ref_op<double>, Eigen::CwiseBinaryOp<Eigen::internal::scalar_sum_op<double, double>, const Eigen::CwiseBinaryOp<Eigen::internal::scalar_sum_op<double, double>, const Eigen::CwiseBinaryOp<Eigen::internal::scalar_product_op<double, double>, const Eigen::CwiseNullaryOp<Eigen::internal::scalar_constant_op<double>, const Eigen::Matrix<double, -1, 1, 0, -1, 1> >, const Eigen::Map<const Eigen::Matrix<double, -1\r\nDEBUG: Truncated corrupted section name: conditional<false, Eigen::CwiseUnaryOp<Eigen::internal::scalar_conjugate_op<double>, const Eigen::Transpose<const Eigen::CwiseBinaryOp<Eigen::internal::scalar_sum_op<double, double>, const Eigen::CwiseBinaryOp<Eigen::internal::scalar_sum_op<double, double>, const Eigen::CwiseBinaryOp<Eigen::internal::scalar_product_op<double, double>, const Eigen::CwiseNullaryOp<Eigen::internal::scalar_constant_op<double>, const Eigen::Matrix<double, -1, 1, 0, -1, 1> >, const Eigen::Map<co\r\n```","createdAt":"2024-02-06T21:14:14Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22569#issuecomment-1930761392","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5zJet5","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Well this is an out of memory problem caused by your kernel (debian / ubuntu?) despite we can optimize the memory usage in dwarf importing i think it could be better to find alternative solutions.\r\n\r\n* dont load the dwarf info -e bin.dbginfo=false\r\n* implement parsing this info everytime is needed instead of mapping it all in a hashtable in memory\r\n* use a better data storage instead of a hashtable\r\n\r\nThe assembly you pasted here shows a nullptr + 0x28 delta, so it seems there's an allocation that fails, but will be good to know which one it is. and as long as this depends on the system i will probably not be able to reproduce in here.\r\n\r\nCan you upload that binary somewhere?","createdAt":"2024-02-07T11:41:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22569#issuecomment-1931864953","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5zKOXX","author":{"login":"mcd1992"},"authorAssociation":"CONTRIBUTOR","body":"It looks like just the split debug file triggers it as well, no need to eu-unstrip. https://gofile.io/d/DNUA0G\r\n\r\nThis is on arch's kernel `6.6.10-arch1-1`. The whole reason I'm wanting to open this though is for the DWARF data so I can generate zignatures / FLIRT for the debug-less versions. I could probably just dump the symbols+address and manually `af name` them before making zigs.\r\n\r\nThe same thing happens with a stock Unreal Engine 5 game, the .debug/DWARF file is 2G+ and will cause radare to OOM even on a system with 32G RAM.\r\n\r\n","createdAt":"2024-02-07T13:32:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22569#issuecomment-1932060119","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5zOgts","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I can't reproduce. on ubuntu i get the process killed because the kernel is picky and just kills the process when eats a lot of memory. but i can open this file without issues in macOS after consuming 50GB of ram. so this is not a sigsegv for me. Btw , after loading all the dwarf info, r2 eats about 16-20GB of ram.\r\n![photo_2024-02-08 02 08 28](https://github.com/radareorg/radare2/assets/6431515/9be2ce08-6c58-46a0-b11f-d1619e97e087)\r\n","createdAt":"2024-02-08T00:48:53Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22569#issuecomment-1933183852","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5zOo7S","author":{"login":"mcd1992"},"authorAssociation":"CONTRIBUTOR","body":"Ah I haven't tested with a system above 32G. Using `ulimit -Sv 8000000` or any value smaller than radare needs to build the full hashtables should trigger it.\r\n\r\nI guess if it's just a side-effect of how radare does DWARF parsing the issue is more about your last 2 bullet points on re-writing the parser/hashtable implementation.","createdAt":"2024-02-08T01:22:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22569#issuecomment-1933217490","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5zc383","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Agree, the current storage method for dwarf info does not perform well for large files like this, but afaik the crash is not caused by a bug in r2 code. So it will be better to redesign the way this information is stored in r2 instead of depending on a hashtable. FIxing things by throwing more metal is not the way to go.","createdAt":"2024-02-10T09:15:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22569#issuecomment-1936949047","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs50A7n1","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i've introduced a void* to hold a private data storage to replace the current hashtable approach without breaking the ABI promise, this way i can fix that without holding the release for more time. so moving this ticket for 5.9.2 or so :)","createdAt":"2024-02-15T16:01:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/22569#issuecomment-1946401269","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6HAxlS","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"moving forward, i had no time to work on this yet, but i hope ill be able to do it soon or late before 6.0 ðŸ¤ž help is always welcome btw","createdAt":"2024-08-02T11:05:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/22569#issuecomment-2265127250","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs661Gco","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"can you try again? the addrline storage was rewritten and should take much memory.","createdAt":"2025-07-30T00:25:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22569#issuecomment-3134482216","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs661oul","author":{"login":"mcd1992"},"authorAssociation":"CONTRIBUTOR","body":"```\nradare2 6.0.0 33867 @ linux-x86-64\nbirth: git.6.0.0 2025-07-29__20:26:10\ncommit: a2bb4f058c410f9ef988f9ce13b37303b9d739e8\noptions: gpl -O? cs:5 cl:2 make\n```\n\nAble to load the .debug now, after a good 15 minutes and lots of 'Stack exhaustion prevented'. Doing `idx` did show that DWARF is parsed but doing just `id` locked up for a minute and then radare terminated. Not sure what signal it received or if it aborted itself, will have to let it load into gdb.\n\nThanks.\n\nEDIT: It's SIGTERM in vsnprintf so I assume it's just OOM because of how much data is in the DWARF.\n\n`size_t written = vsnprintf (cons->context->buffer + cons->context->buffer_len, left, format, ap3);`","createdAt":"2025-07-30T02:02:10Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22569#issuecomment-3134622629","viewerDidAuthor":false}],"number":22569,"title":"SIGSEGV when debugging large binary with DWARF data"},{"body":"## Environment\r\nradare2 5.8.9 31620 @ linux-x86-64\r\nbirth: git.5.8.4-1515-g82fbc2fdb4 2024-01-26__16:50:43\r\ncommit: 82fbc2fdb469029f4585f55722d59c36ce549a5f\r\noptions: gpl -O? cs:5 cl:2 make\r\nLinux x86_64\r\n\r\n\r\n## Description\r\nevaluation of following ESIL expressions gave wrong result:\r\n\r\nar0 (to set all registers' values to zero) \r\n'ae 69632,x0,=\r\n'ae 0x10,x0,+,x0,=\r\n'ae 0x19,w1,=\r\n'ae w1,0,x0,+,DUP,tmp,=,=[4]\r\n'ae 69632,x0,=\r\n'ae 0x10,x0,+,x0,=\r\n'ae 0,x0,+,DUP,tmp,=,[4],w0,=\r\n\r\nwhen I try getting register values by ar command the value of x0 is 0x00000016, but should be 0x00000019\r\n\r\n\r\n\r\n## Test\r\nIn function \"main\" in following binary file (offsets: 0x00000838 -  0x00000850)\r\nhttps://drive.google.com/file/d/105Bwixz7-bmHrml7JAwN5DWoUwfdQUYC/view?usp=sharing\r\n","comments":[{"id":"IC_kwDOAEpMrs5x_q8g","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I think the problem is that these expressions depend on a register tmp that is not defined in the profile but also is a bad prsctice to use DUP too. So better rewrite those str/ldr expressions without using tmp or DUP.\r\n\r\n\r\nIll try to find time to fix it but im quite busy right now. In case you wanna give it a try it will be great.\r\n\r\nThanks for reporting!","createdAt":"2024-01-26T18:38:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22551#issuecomment-1912516384","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5yPQiG","author":{"login":"bareghamyanl"},"authorAssociation":"NONE","body":"The esil representation of my instructions were given by radare2, I got them with \"pdj\" command and then tried to emulate them. Is there maybe another way to get the esils of instructions that don't use DUP and don't depend of tmp register?","createdAt":"2024-01-30T11:04:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22551#issuecomment-1916602502","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5zqmg1","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Can upu try again in master? Having a testcase would help. And sorry for the late reply i pushed some fixes a coupke of weeks ago but forgot to answer here","createdAt":"2024-02-13T07:15:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22551#issuecomment-1940547637","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs53Y6Hc","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"ping","createdAt":"2024-03-18T06:26:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22551#issuecomment-2003018204","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6Tq3ne","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"uhm your writing to to some address here, are you sure you have a something writeable mapped to that location?","createdAt":"2024-11-14T21:57:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22551#issuecomment-2477488606","viewerDidAuthor":false}],"number":22551,"title":"evaluation of ESIL expression gives wrong result"},{"body":"## Environment\r\n\r\n```powershell\r\nradare2 5.8.9 1 @ windows-x86-64\r\nbirth: git.5.8.9 Thu 01/11/2024__12:08:01.76\r\ncommit: 7c0c74195a9f0eb25ea27143cff82e9c0d01b631\r\noptions: gpl -O? cs:5 cl:1 meson\r\n```\r\n\r\n## Description\r\n\r\nI can not `-e \"pdb.autoload=true\"` since I already installed pdb with an older version of r2. I need it to see debug symbols for windows.\r\n\r\n## Test\r\n\r\nPS C:\\PATH> C:\\AAA\\radare2-5.8.9-w64\\bin\\radare2 -e \"pdb.autoload=true\" -e \"scr.color=3\" -c \"ood\" -d C:\\Users\\MYUSERNAME\\AppData\\Local\\Roblox\\Versions\\version-88cfc23f4e7d4e4b\\RobloxPlayerBeta.exe\r\nINFO: Spawned new process with pid 21508, tid = 14880\r\nWARN: Relocs has not been applied. Please use `-e bin.relocs.apply=true` or `-e bin.cache=true` next time\r\n(21508) loading library at 0x00007FFF74AB0000 (C:\\Windows\\System32\\ntdll.dll) ntdll.dll\r\nERROR: File already downloaded\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nWARN: (../libr/bin/format/pdb/pdb.c:930):build_member_format: code should not be reached\r\nINFO: ==> Process finished\r\nINFO: Spawned new process with pid 20712, tid = 19124\r\nINFO: File dbg://C:\\\\Users\\\\MYUSERNAME\\\\AppData\\\\Local\\\\Roblox\\\\Versions\\\\version-88cfc23f4e7d4e4b\\\\RobloxPlayerBeta.exe reopened in read-write mode\r\nWARN: Relocs has not been applied. Please use `-e bin.relocs.apply=true` or `-e bin.cache=true` next time\r\nERROR: Unable to find file descriptor 3\r\nERROR: Unable to find file descriptor 3\r\nPDB \"ntdll.pdb\" download success\r\n20712\r\n","comments":[],"number":22533,"title":"pdb not working on windows with  `-e \"pdb.autoload=true\"`"},{"body":"I wanna trace some special address by `dta/dts`:\r\n\r\nI create a script to load while debuging:\r\n\r\n```\r\nâ””â”€# cat a.py\r\nimport r2pipe\r\nimport sys\r\nimport json\r\nimport re\r\n\r\nr2=r2pipe.open()\r\nr2.cmd('aaa')\r\nr2.cmd('e asm.trace=true; e dbg.trace=true')\r\nr2.cmd('dts+')\r\nblocks=[]\r\nbl = r2.cmdj('afbj @ entry0')\r\nfor k,b in enumerate(bl):\r\n    blocks.append([k, b['addr'], b['size']])\r\n    r2.cmd('dta '+ hex(b['addr']))\r\n\r\n```\r\n\r\nand then load scriptï¼š\r\n\r\n```\r\nâ”Œâ”€â”€(rootã‰¿c8bd5ecd7a9d)-[/tmp]\r\nâ””â”€# r2 -d ob.bin\r\n -- I nodejs so hard my exams. What a nodejs!\r\n[0x004013d2]> . ./a.py\r\n```\r\n\r\nand then run `dcs` , I hope to trace something, but nothing:\r\n```\r\n[0x004013d2]> dcs\r\nINFO: Running child until next syscall\r\nINFO: --> SN 0x00401d44 syscall 0 read (0x0 0x7fffffffe518 0x8)\r\n\r\n[0x00401d44]> dt\r\n[0x00401d44]>\r\n```\r\n\r\nMaybe I have some misunderstanding about trace, can someone help?\r\n\r\nthanks.\r\n\r\n\r\nps:\r\n[ob.bin.zip](https://github.com/radareorg/radare2/files/13826427/ob.bin.zip)\r\n\r\n\r\n```\r\nâ””â”€# r2 -v\r\nradare2 5.8.8 31324 @ linux-x86-64\r\nbirth: git.5.8.8 2023-11-01__10:26:37\r\ncommit: ea7f0356519884715cf1d5fba16042bac72b2df5\r\noptions: gpl -O? cs:5 cl:2 make\r\n```","comments":[{"id":"IC_kwDOAEpMrs5v5pFw","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"iirc dts command was introduced by a gsoc student many years ago and it was a bit broken at the time, i found some more bugs and fixed them right now, but the main problem is that dts is probably not the thing you are looking for. because this command is used to trace reg and mem access in order to perform backstepping. and my guess is that you want to just traces when the program hits a specific address, right?\r\n\r\nyou shuold be able to do that using a tracepoint, aka a breakpoint with the tracebit set.\r\n\r\n```\r\n| dbite <idx>               enable breakpoint Trace by index\r\n| dbitd <idx>               disable breakpoint Trace by index\r\n```\r\n\r\nits also been a while since this was used and the debugger tests has been enabled few weeks ago, so i expect to focus on the debugger this year and get all those issues addressed, but i cant promise you all these commands would work as expected because they have been touched by many people and hasnt been tested at all.\r\n\r\nMy suggestion is to use r2frida, which i use more frequently and it's heavily tested on many more platforms, r2frida provides breakpoints and tracepoints. The support for syscall tracing is not yet there, but i also hope to find some time this year to implement it.\r\n\r\nLet me know how your testing goes and feel free to report anything you find in these commands.\r\n\r\nThank you","createdAt":"2024-01-04T16:20:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22524#issuecomment-1877381488","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5v7-Qd","author":{"login":"b1gcat"},"authorAssociation":"NONE","body":"thank you, I got it","createdAt":"2024-01-05T01:38:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22524#issuecomment-1877992477","viewerDidAuthor":false}],"number":22524,"title":"help~ : the  usage of the dts..."},{"body":"I would like to get a way to get a debugger outout like ltrace bin -l please? it is not implemented but sounds possible.\r\nI think we may add axl to list call to shared library statically and ilc for call to shared library.","comments":[],"number":22514,"title":"add ltrace like utility on r2"},{"body":"I have an executable ELF file e.g. `aaa`. This executable file uses its library e.g. `../bin/libaaa.so`. When I debug `r2 -d aaa` I see some call functions from the library `libaaa.so` e.g. `sym.imp.AAAfunc1` at 0x44651. \r\nWhen I reach that call, I can only step over it. How can I deep dive into `libaaa.so` file to debug that function contents?","comments":[{"id":"IC_kwDOAEpMrs5vXUVY","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"Do you plan to get function body? it is not possible. you need to open the .so itself.","createdAt":"2023-12-23T22:49:02Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22508#issuecomment-1868383576","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5vXVRT","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"oh sorry.I was just testing and no. I misundertood your question. You misuse r2.\r\n\r\npd 1\r\nmov rax, qword [sym.imp.KERNEL32.dll_IsDebuggerPresent]\r\n\r\ncould you try same command with `aaaaa` then let's try to read the .got. you should read library call. then read access to got.","createdAt":"2023-12-23T23:16:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22508#issuecomment-1868387411","viewerDidAuthor":false}],"number":22508,"title":"debug an executable with dive into its libraries"},{"body":"## Environment\r\n\r\n```sh\r\nr2 -v\r\nuname -ms\r\nThu Dec  7 00:22:09 CST 2023\r\nradare2 5.8.9 31694 @ unknown-ppc-32\r\nbirth: git.5.8.8-947-g54c9871c9c 2023-12-06__08:55:00\r\ncommit: 54c9871c9c081fe2367197dc16d991c35a0520cb\r\noptions: gpl -O? cs:5 cl:2 meson\r\nAIX 00C63ED04B0\r\n```\r\n\r\n## Description\r\n\r\nWhen jq command doesn't exist, on AIX weirdly launching the subprocess still works, but then fails at the first write.\r\n\r\n(SIGPIPE does not get caught so r2r exits with code 141)\r\n\r\n```\r\nStarting program: /home/guest/radare2/build/binr/r2r/r2r test/db/asm/or1k\r\nINFO: Running from /home/guest/radare2/test\r\n[Detaching after fork from child process 25428090]\r\nAlready up to date.\r\nLoaded 160 tests.\r\n[New Thread 258]\r\n[Detaching after fork from child process 25428092]\r\n[Switching to Thread 1]\r\n\r\nThread 1 hit Catchpoint 1 (signal SIGPIPE), 0x0900000000038be0 in write () from /lib/libc.a(shr_64.o)\r\n(gdb) bt\r\n#0  0x0900000000038be0 in write () from /lib/libc.a(shr_64.o)\r\n#1  0x0000000100063048 in r2r_subprocess_stdin_write ()\r\n#2  0x0000000100063eb4 in r2r_check_jq_available ()\r\n#3  0x0000000100002aa8 in main ()\r\n```","comments":[{"id":"IC_kwDOAEpMrs5udq1f","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"https://github.com/radareorg/radare2/blob/69d6f92cf552800d4c7d210c3e131d39f1decf40/binr/r2r/r2r.c#L558","createdAt":"2023-12-13T04:59:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22485#issuecomment-1853271391","viewerDidAuthor":true}],"number":22485,"title":"[AIX] r2r silently fails when jq not available"},{"body":"## Environment\r\n\r\n```sh\r\nThu Dec  7 00:29:14 CST 2023\r\nradare2 5.8.9 31694 @ unknown-ppc-32\r\nbirth: git.5.8.8-947-g54c9871c9c 2023-12-06__08:55:00\r\ncommit: 54c9871c9c081fe2367197dc16d991c35a0520cb\r\noptions: gpl -O? cs:5 cl:2 meson\r\nAIX 00C63ED04B00\r\n```\r\n\r\n## Description\r\n\r\nThe binary size and symbol table is huge on AIX (built with meson):\r\n\r\n```\r\n[guest@aix5]~% ls -l $(which radare2)\r\n-rwxr-xr-x    1 guest    usr        50231539 Dec 06 03:23 /home/guest/radare2/build/priv_install_dir/bin/radare2\r\n[guest@aix5]~% objdump -t $(which radare2) | wc -l\r\n 1357677\r\n```\r\n\r\nFor comparison, on macOS (make):\r\n\r\n```\r\n % objdump -t $(which radare2) | wc -l\r\n      44\r\n % objdump -t /usr/local/lib/libr_*.dylib | wc -l\r\n  617524\r\n```\r\n\r\nmacOS (meson):\r\n\r\n```\r\n% objdump -t build/binr/radare2/radare2 | wc -l\r\n  134091\r\n```\r\n\r\n## Test\r\n\r\n<!-- Steps to reproduce the issue and provide files/links/images/.. -->\r\n","comments":[],"number":22484,"title":"[AIX] Huge symbol table"},{"body":"## Description\r\n\r\nShould support debugging XCOFF64 bins on AIX","comments":[],"number":22477,"title":"[AIX] debugging support "},{"body":"r2pm use to eat a lot of disk space. so i think its worth reporting that in the packages with a new directive R2PM_SIZE.\r\n\r\n* r2pm can check for free space and show that in the pkg listing\r\n* r2pm can use rtable to show the search\r\n* The directive can take two arguments: installed and buildsize (manually maintained)\r\n* r2pm can have a flag to compute local disk usage and clean up unused stuff\r\n\r\n```sh\r\n0$ du -hs r2pm\r\n4.5G\tr2pm\r\n```","comments":[],"number":22442,"title":"Add R2PM_SIZE"},{"body":"mach-o plugin doesn't create null fds for sections where vsize exceeds psize","comments":[],"number":22400,"title":"mach-o plugin doesn't create null fds"},{"body":"## Description\r\nI compared two binary files 500 mb each, and on 72-core configuration it took about ~8 hours\r\nUsed enviroment:\r\n`radiff2 -A -C -q crackme.run crackme2.run > match.txt`","comments":[{"id":"IC_kwDOAEpMrs5qwIoK","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Well a 500MB binary is quite a big thing to analyze, but it should be easy to spawn each core instance into a separate thread and collect the results at the end, that may half the analysis time, but the diffing time will not be optimized with this, but that could be an easy optimization to do.\r\n\r\nRight now r2 is not using more than one core for each command execution, some can be paralelized, but not the whole analysis, it doesnt matter if you have 72 or 1 core, the work needed to make it thread safe is in progress but tedious and boring, and wont be anounced until finished.\r\n\r\nWonder which crackme is that takes 500MB of disk space..","createdAt":"2023-11-02T15:52:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22360#issuecomment-1791003146","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5q0jhz","author":{"login":"GermanAizek"},"authorAssociation":"NONE","body":"> Wonder which crackme is that takes 500MB of disk space..\r\n\r\n\r\nis it named in jest )","createdAt":"2023-11-03T10:05:57Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22360#issuecomment-1792161907","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5r3ro6","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i have added radiff2 -T which does what you want, but as long as r2 is not fully thread safe yet you may spot segfaults. 7f98bcb15f646bb493ba41f1552e058f61848584 i will use this experimental flag to fix these bugs and update the ticket when it can be considered stable","createdAt":"2023-11-14T08:40:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22360#issuecomment-1809758778","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5r3-wb","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"should be stable now. but bear in mind that its only doing the analysis in paralel. the diffing is still single threaded, no short-plans to do that yet. but thanks for reporting that use case as it helped me to address a bunch of thready cases.","createdAt":"2023-11-14T09:25:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22360#issuecomment-1809837083","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5r4pKM","author":{"login":"GermanAizek"},"authorAssociation":"NONE","body":"@trufae, I thought r2 was abandoned, and new features should not have been expected, but u surprised and started fixing issue, it's really cool, thank you.","createdAt":"2023-11-14T11:15:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22360#issuecomment-1810010764","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5r5S3n","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Lol abandoned? I do more than 10 commits every day. Didnt took me more than 20 minutes to do so. I dont know who made you think that but r2 is alive. Actively maintained and used by many people and companies already.","createdAt":"2023-11-14T13:13:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22360#issuecomment-1810181607","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5r5lMR","author":{"login":"GermanAizek"},"authorAssociation":"NONE","body":"There is no previous team, u are only one who most active, no trolling. After news about expense radare2 team, many people think that radare2 has lags behind in development features than updated rizin framework.","createdAt":"2023-11-14T13:59:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22360#issuecomment-1810256657","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5s3FZ8","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"The \"previous team\" only stayed in r2land for 4 years (the project is 17 years old). People can think or believe what they want if they don't ask, get informed or try it out. r2 have many more features and it's much more stable than it was 3 years ago when the fork happened.\r\n\r\nThe development didn't stopped, it actually, I won't go into personal attacks or harsh comparisons. The only thing i can say is that i can sleep much better now and i enjoy every single line of code i put in this project again.\r\n\r\nAnyway, this is offtopic to the ticket, so feel free to join the discord, telegram, matrix or irc channels.","createdAt":"2023-11-25T17:10:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/22360#issuecomment-1826379388","viewerDidAuthor":true}],"number":22360,"title":"Radiff2 default use only one core cpu for compare two files"},{"body":"## Environment\r\n$ date\r\nMon, Oct 16, 2023 10:35:45 AM\r\n\r\n$ radare2.exe -v\r\nradare2 5.8.8 1 @ windows-x86-64\r\nbirth: git.5.8.8 Thu 06/08/2023__14:01:37.60\r\ncommit: ea7f0356519884715cf1d5fba16042bac72b2df5\r\noptions: gpl -O? cs:5 cl:1 meson\r\n\r\n$ uname -ms\r\nMINGW64_NT-10.0-19044 x86_64\r\n\r\n## Description\r\n\r\n<!-- Explain what's the issue and what would you expect to see -->\r\nsize and realsize field of function block information goes wrong.\r\n```\r\n[0x0804d114]> afi\r\n#\r\noffset: 0x0804d114\r\nname: loc..text_49\r\nsize: 18\r\nis-pure: false\r\nrealsz: 18\r\nstackframe: 8\r\ncall-convention: arm16\r\ncyclomatic-cost: 21\r\ncyclomatic-complexity: 1\r\nbits: 16\r\ntype: fcn [NEW]\r\nnum-bbs: 1\r\nnum-instrs: 6\r\nedges: 0\r\nminbound: 0x0804d114\r\nmaxbound: 0x0804d126\r\nis-lineal: true\r\nend-bbs: 1\r\ncall-refs: 0x0804bdf8 C 0x0804d2dc C 0x0804d12c J\r\ndata-refs: 0x0804d424\r\nnoreturn: false\r\nin-degree: 0\r\nout-degree: 2\r\ndata-xrefs:\r\nlocals: 0\r\nargs: 0\r\ndiff: type: new\r\n```\r\nwith pdfï¼Œwe can see sym.osIdleTask ends at 0x0804d152, not 0x804d124\r\n\r\n```\r\n[0x0804d114]> pd\r\n            ;-- osIdleTask:\r\n            ;-- pc:\r\n            ;-- r15:\r\n/ 18: loc..text_49 ();\r\n|           0x0804d114      80b5           push {r7, lr}\r\n|           0x0804d116      fef76ffe       bl loc..text_20_12\r\n|           0x0804d11a      dff80813       ldr.w r1, obj.g_osIdleTaskThreadId\r\n|           0x0804d11e      0860           str r0, [r1]\r\n|           0x0804d120      00f0dcf8       bl sym.MC_ClearClkTimerInit\r\n\\       ,=< 0x0804d124      02e0           b sym.__osIdleTask_0\r\n        |   ; CODE XREF from sym.__osIdleTask_0 @ 0x804d14a(x)\r\n/ 6: sym.__osIdleTask_1 ();\r\n|      .--> 0x0804d126      0120           movs r0, 1                  \r\n\\      :|   0x0804d128      fff7abff       bl sym.EnterSleep\r\n       :|   ; CODE XREF from loc..text_49 @ 0x804d124(x)\r\n       :|   ; CODE XREF from sym.__osIdleTask_2 @ 0x804d152(x)\r\n/ 32: sym.__osIdleTask_0 (int16_t arg1);\r\n|      :|   ; arg int16_t arg1 @ r0\r\n|     .-`-> 0x0804d12c      1df07dfd       bl loc..text_17_13\r\n|     ::    0x0804d130      0028           cmp r0, 0\r\n|     ::,=< 0x0804d132      0bd0           beq sym.__osIdleTask_2\r\n|     ::|   0x0804d134      06f09bfd       bl loc..text_20_11\r\n|     ::|   0x0804d138      0128           cmp r0, 1                   \r\n|    ,====< 0x0804d13a      07d1           bne sym.__osIdleTask_2\r\n|    |::|   0x0804d13c      fff782ff       bl sym.HAL_BusIsBusy\r\n|    |::|   0x0804d140      0028           cmp r0, 0\r\n|   ,=====< 0x0804d142      03d1           bne sym.__osIdleTask_2\r\n|   ||::|   0x0804d144      fff791ff       bl sym.HAL_SystemIsBusy\r\n|   ||::|   ; STRN XREF from sym.__GetSleepTime_7 @ 0x804cd66(r)\r\n|   ||::|   0x0804d148      0028           cmp r0, 0\r\n\\   ||:`==< 0x0804d14a      ecd0           beq sym.__osIdleTask_1\r\n    ||: |   ; CODE XREFS from sym.__osIdleTask_0 @ 0x804d132(x), 0x804d13a(x), 0x804d142(x)\r\n/ 8: sym.__osIdleTask_2 ();\r\n|   ``--`-> 0x0804d14c      0020           movs r0, 0                  \r\n|     :     0x0804d14e      fff798ff       bl sym.EnterSleep\r\n\\     `===< 0x0804d152      ebe7           b sym.__osIdleTask_0\r\n```\r\n\r\n```\r\n[0x0804d114]> afbo\r\n0x0804d114\r\n0x0804d116\r\n0x0804d11a\r\n0x0804d11e\r\n0x0804d120\r\n0x0804d124\r\n```\r\n\r\nAnd with agcj, I can only get a only part of function callgraph of sym.osIdleTask, which starts from 0x804d114 and ends at 0x804d124( What I expected is 0x804d152).\r\n\r\n```\r\n[0x804d114]> agcj\r\n[{\"name\":\"loc..text_49\",\"size\":18,\"imports\":[\"sym.osThreadGetId\",\"sym.MC_ClearClkTimerInit\"]}]\r\n```\r\n\r\n\r\n\r\n## Test\r\n\r\n<!-- Steps to reproduce the issue and provide files/links/images/.. -->\r\nThe ELF file is compiled with IAR Embedded Workbench. And for security constraint, I can not provide you ELF file.\r\n```\r\n$ radare2.exe -m 0x803c000 out.elf\r\nWARN: using oba to load the syminfo from different mapaddress\r\n[0x0803c000]> afco cc-arm-16.sdb\r\n| afco path  open Calling Convention sdb profile from given path\r\n[0x0803c000]> aaa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\nINFO: Analyze function calls (aac)\r\nINFO: Analyze len bytes of instructions for references (aar)\r\nINFO: Finding and parsing C++ vtables (avrr)\r\nINFO: Finding xrefs in noncode section (e anal.in=io.maps.x)\r\nINFO: Analyze value pointers (aav)\r\nINFO: aav: 0x0803c000-0x08297633 in 0x803c000-0x8297633\r\nINFO: Emulate functions to find computed references (aaef)\r\nINFO: Type matching analysis for all functions (aaft)\r\nERROR: Invalid program counter PC=-1 coming from 0x0824ae1c\r\nERROR: Invalid program counter PC=-1 coming from 0x08250d1c\r\nERROR: Invalid program counter PC=-1 coming from 0x0821c37c\r\nERROR: Invalid program counter PC=-1 coming from 0x080ded54\r\nERROR: Invalid program counter PC=-1 coming from 0x0828a304\r\nERROR: Invalid program counter PC=-1 coming from 0x08106840\r\nINFO: Propagate noreturn information (aanr)\r\nINFO: Use -AA or aaaa to perform additional experimental analysis\r\n[0x0803c000]> f-loc* \r\n```","comments":[{"id":"IC_kwDOAEpMrs5pLKKG","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"The reason why the function is split in that jump is because the destination have a symbol. so it's \"correct\", but wonder why there's a simbol in a basic block. there are configuration options to circumvent that case, but  yeah thats not common construction, can you share this elf?","createdAt":"2023-10-16T13:52:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22327#issuecomment-1764532870","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5pPEt7","author":{"login":"knightLee"},"authorAssociation":"NONE","body":"For security constraint, I can not provide you ELF file.\r\nAs to the configuration options, I have tested the following ones, some will hang the execution of radare2.\r\ne anal.hasnext = true # hang\r\ne anal.datarefs = true \r\ne anal.jmp.cref = true\r\ne anal.jmp.ref = true\r\ne anal.jmp.indir = true\r\ne anal.jmp.tbl = true\r\n\r\nWhat's the prossibly working options, I can give a try?","createdAt":"2023-10-17T02:32:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22327#issuecomment-1765559163","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs53YZeX","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Can you try with latest r2 from git?","createdAt":"2024-03-18T03:57:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22327#issuecomment-2002884503","viewerDidAuthor":true}],"number":22327,"title":"analyze function not finished on IAR generated elf for ARM Cortex-M device."},{"body":"## Environment\r\n\r\n```sh\r\n# copypaste this script into your shell and replace it with the output\r\n./sys/install.sh\r\n```\r\n\r\n## Description\r\n\r\n<!-- Explain what's the issue and what would you expect to see -->\r\nHi I was trying to install radare2 using cygwin on windows but I get this error\r\n\r\nar: creating libsdb.\r\n\r\nOSTYPE: cygwin_nt-10.0-19045\r\nERROR: Unknown platform\r\n## Test\r\n\r\n<!-- Steps to reproduce the issue and provide files/links/images/.. -->\r\n","comments":[{"id":"IC_kwDOAEpMrs5pHVrX","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Cygwin support was removed some years ago, you can build it with mingw and msvc. If theres some interest on cygwin support it should be easy to add back i think","createdAt":"2023-10-15T23:09:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22325#issuecomment-1763531479","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5sGzqe","author":{"login":"vingocheng"},"authorAssociation":"NONE","body":"why not use wsl to replace cygwin? \r\nwsl is better option to run *nix on window.","createdAt":"2023-11-16T03:12:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22325#issuecomment-1813723806","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5sMpZH","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Wsl and mingw builds work well. Cygwin is a hack on top of windows and its using a different abi, and also ships its own different headers for windows apis which makes cygwin binaries not essy to debug either. But yeah if someone wants to use cygwin it shouldnt be hard to port it again. I was not a fan of removing support for it. Can someone paste the errors you get when running this?","createdAt":"2023-11-16T20:20:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22325#issuecomment-1815254599","viewerDidAuthor":true}],"number":22325,"title":"error while installing radare2 on windows using cygwin"},{"body":"## Environment\r\n\r\n```sh\r\nradare2 5.8.9 31309 @ linux-x86-64\r\nbirth: git.5.8.8-671-g7b05911ab5 2023-10-12__11:06:37\r\ncommit: 7b05911ab5f1aa5ed81983b2fe9755033a5b5d09\r\noptions: gpl -O? cs:5 cl:2 make\r\n\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nWhen I encountered an error while loading the zignature, what could be the possible causes, and how should I pinpoint the issue?\r\n\r\n## Test\r\n\r\n![QQå›¾ç‰‡20231013145327](https://github.com/radareorg/radare2/assets/59363523/0877b71c-1501-4164-aa74-4b953076cd0e)\r\n\r\n","comments":[{"id":"IC_kwDOAEpMrs5o9svM","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Never seen that before but looks like the vararg part of the function signatures is failing to be parsed. Can you try to reduce the testcase to only one line ? I mean the zignature file should contain the \"...)\" pattern somewhere","createdAt":"2023-10-13T06:58:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22322#issuecomment-1761004492","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5o9uvQ","author":{"login":"Ret2c7"},"authorAssociation":"NONE","body":"I used the following command to generate a JSON file.\r\n```bash\r\naa\r\nzaF\r\nzj > 1.json\r\n``` \r\nI'm not quite sure what you mean by \"one line\",like this?\r\n![image](https://github.com/radareorg/radare2/assets/59363523/791ef9e3-39c4-45ca-a4dd-1d68b43696c8)\r\n\r\n\r\n       ","createdAt":"2023-10-13T07:05:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22322#issuecomment-1761012688","viewerDidAuthor":false}],"number":22322,"title":"Error when load zignature"},{"body":"## Environment\r\n\r\n```sh\r\n# copypaste this script into your shell and replace it with the output\r\nThu Oct 12 11:34:31 PM CEST 2023\r\nradare2 5.8.9 31299 @ linux-x86-64\r\nbirth: git.5.8.8-667-g0ae85c519b 2023-10-09__22:29:39\r\ncommit: 0ae85c519b3a15a958658745ae117145457eb83c\r\noptions: gpl -O? cs:5 cl:2 make\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nI am experimenting with in-memory patching in radare2, in particular patching instructions while debugging.\r\nI have noticed that if I patch instructions on a breakpoint, there will be garbage (byte 0x29) on that memory address next time that breakpoint is hit.\r\n\r\n## Test\r\n\r\n1. Testing the game \"Battle for wesnoth\", version v1.17.21, on x86_64.\r\n2. Starting with `r2 -Ad wesnoth`\r\n3. Resume execution with `dc`\r\n4. Just start a local game by interacting with the game window\r\n5. At this point, I will run the following commands to get the address I need (with the instruction I want to patch):\r\n![image](https://github.com/radareorg/radare2/assets/25264901/72df511f-fcac-4a49-86b2-f9830e783400)\r\n6. `dc` again to continue executing\r\n7. In the game window, I just start a local game and try to recruit a unit (which will trigger the place_recruit function).\r\n8. back in the r2 console, the breakpoint is hit, and I apply the patch:\r\n![image](https://github.com/radareorg/radare2/assets/25264901/58e5482a-0954-4e86-9620-fc6549c3a129)\r\n9. `dc` again. The patch works for the first time. I try to recruit again.\r\n10. Breakpoint is hit again, but the instructions are garbage now. By examining the memory, this is clearly happening due to a 0x29 byte that sits right where there was a NOP before:\r\n![image](https://github.com/radareorg/radare2/assets/25264901/a8ace723-b6c1-4e35-a364-d6aff9d78830)\r\n11. Of course, trying to continue now leads to SIGSEGV.\r\n","comments":[{"id":"IC_kwDOAEpMrs5o7-yf","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"you should remove the breakpoint before patching the instruction inside the breakpoint, otherwise that may result in this behaviour. Maybe r2 could be aware of this situation and warn you about this or try to handle the corner case.\r\n\r\nDo you have any suggestion or proposal about how to address the issue?","createdAt":"2023-10-13T00:00:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22321#issuecomment-1760554143","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5pAiua","author":{"login":"suidpit"},"authorAssociation":"CONTRIBUTOR","body":"Thanks for the quick response!\r\n\r\nIf I understand correctly, the issue is that patching an instruction where we also set a breakpoint leads to the issue. In this case, I believe this might be handled by having r2 refusing to patch the memory if a breakpoint has been set at that address, with an error message.\r\n\r\nIs the opposite case considered a corner case as well? That is, setting a breakpoint in a patched memory address? In that case, we probably want to block that too?","createdAt":"2023-10-13T15:59:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22321#issuecomment-1761749914","viewerDidAuthor":false}],"number":22321,"title":"Patching while debugging leads to weird behaviour"},{"body":"radare2 5.8.9 31260 @ linux-x86-64\r\nbirth: git.5.8.8-646-g2a25bd481e 2023-10-05__21:20:53\r\ncommit: 2a25bd481ee7b1b511f81913ad4f028d3b4dd16f\r\noptions: gpl -O? cs:5 cl:2 make\r\n\r\nHi,\r\nI am following this article https://ret2rop.blogspot.com/2020/05/canary-pie-byte-bruteforce.html and I try to debug the binary from this article. Its a networkservice which listens on port 8888 and forks out a child for ervery request made. There is a function called \"handle request\" and when I set a breakpoint inside it nothing happens. The programm seems to halt but nowhere near my breakpoint. Also radare does not select the forked process, it stays attached to the parent.\r\n\r\n[0x7fb95c9b3220]> dc\r\n[i] Listening on 0.0.0.0:8888, sfd is 3\r\n(15778) Created process 15801\r\n\r\n[0x7fb95c8a84a0]> dp\r\nINFO: Selected: 15778 15778\r\n * 15778 ppid:15770 uid:1000 s /vlun3/msg_serverpieU\r\n - 15801 ppid:15778 uid:1000 s /vlun3/msg_serverpieU\r\n\r\ndbg.follow.child is set to true. It also does not matter when I set dbg.forks to true.\r\n\r\nI cant say for sure that I am handling radare a 100% right. But evertyhing works fine in gdb-gef or gdb-peda.\r\n\r\nI can provide more information if needed and would be happy if someone would look into this.\r\n\r\nThanks a lot.","comments":[{"id":"IC_kwDOAEpMrs5vXVXz","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"try `e dbg.follow.child=1`","createdAt":"2023-12-23T23:19:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22310#issuecomment-1868387827","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5vXVYx","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"might not be a bug","createdAt":"2023-12-23T23:19:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22310#issuecomment-1868387889","viewerDidAuthor":false}],"number":22310,"title":"Radare2 does not follow forked child / also ignores breakpoint"},{"body":"Right now its only possible to do this from r2, will be good to have an option in rafind2 to do the same with a rafind2 oneliner.","comments":[{"id":"IC_kwDOAEpMrs5qUUBg","author":{"login":"iamkkushal"},"authorAssociation":"NONE","body":"Hi @trufae, Can you give me some more idea on this. I will try to solve this if possible. \r\n\r\nTIA,\r\nKushal","createdAt":"2023-10-28T05:34:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22299#issuecomment-1783709792","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5qg8yq","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Hey @iamkkushal sorry for the late reply. rafind2 is not linking to RCore, so i can think of two solutions:\r\n\r\n1) construct an r2 oneliner that does the search+replace like `r2 -c 'w hello @@/ world' file`\r\n2) implement the thing using the r_io api, which is prefered but more tedious but its not difficult.\r\n\r\nThe most difficult part of this requires deciding which getopt flags to use to handle this operation. The new flags should do this:\r\n\r\n* New string to write (hex, ascii, wide string..)\r\n* insert or replace (resize the file or keep it the same size and warn if new string is longer than original)","createdAt":"2023-10-31T11:23:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22299#issuecomment-1787022506","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5qg87b","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"feel free to join the discord, telegram chats if you have more questions or wanna some guide","createdAt":"2023-10-31T11:23:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22299#issuecomment-1787023067","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6Ob5PL","author":{"login":"Monis-Ahmed-Rizvi"},"authorAssociation":"NONE","body":"Iâ€™d like to take on this issue if no one else is working on it as part of my hacktober fest contribution  .","createdAt":"2024-10-02T20:52:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22299#issuecomment-2389677003","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6OcFNL","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"All yours!","createdAt":"2024-10-02T21:27:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22299#issuecomment-2389726027","viewerDidAuthor":true}],"number":22299,"title":"Add search-and-replace in rafind2"},{"body":"Full list available in:\r\n\r\n* https://stackoverflow.com/questions/2227921/simplest-way-to-get-a-complete-list-of-all-the-utf-8-whitespace-characters-in-ph\r\n* https://en.wikipedia.org/wiki/Whitespace_character","comments":[{"id":"IC_kwDOAEpMrs5oPPAr","author":{"login":"roddas"},"authorAssociation":"NONE","body":"Could you provide me more information,please ? Is it a problem, suggestion for a feature  or something else ?","createdAt":"2023-10-05T12:43:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22281#issuecomment-1748824107","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5oQM2A","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"its a feature request, aka improvement to make r_str_trim() and related functions be aware of other whitepsaces rather than space and tab","createdAt":"2023-10-05T14:56:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22281#issuecomment-1749077376","viewerDidAuthor":true}],"number":22281,"title":"Trim esotheric whitespaces"},{"body":"```\r\n+class SuperKlass  {\r\n+  property superfield;\r\n+  func superfield.allocator__Swift.Int() {}  // 0x1000028f0\r\n+  func superfield.allocator__Swift.Int() {}  // 0x100002950\r\n+  func superfield.allocator__Swift.Int() {}  // 0x1000029b0\r\n+  func allocator() {}  // 0x100002a10\r\n+  func 4() {}  // 0x100003d9c\r\n```\r\n\r\nthe superfield.X must be considered part of the superfield property and be displayed like this:\r\n\r\n```\r\n+class SuperKlass  {\r\n+  property superfield {\r\n+      func allocator__Swift.Int() {}  // 0x1000028f0\r\n+  }\r\n+  func allocator() {}  // 0x100002a10\r\n+  func 4() {}  // 0x100003d9c\r\n```\r\n\r\nbut i need to fix the naming first to avoid those duped method names","comments":[],"number":22275,"title":"Group/Link methods of properties"},{"body":"* file paths must be absolute\r\n\r\n```\r\n0$ r2 -p hello\r\nERROR: cannot open file bins/elf/analysis/main\r\nERROR: Wrong fd, it must be greater than 3\r\nERROR: ar: Unknown register 'rax'\r\nERROR: ar: Unknown register 'rbx'\r\n```\r\n\r\n* prj.files expects filename = prjname\r\n\r\n```\r\n0$ r2 /bin/ls\r\n -- Run your own r2 scripts in awk using the r2awk program.\r\n[0x100003a38]> e prj.\r\nprj.alwasyprompt   prj.files          prj.gpg            prj.name           prj.sandbox\r\nprj.vc             prj.vc.message     prj.vc.type        prj.zip\r\n[0x100003a38]> e prj.files\r\nfalse\r\n[0x100003a38]> e prj.files =true\r\n[0x100003a38]> Ps testls\r\nWARN: Cannot copy 'testls' into '/Users/pancake/.local/share/radare2/projects/testls/bin/testls'\r\n[main (root-commit) 59ebe18] default message\r\n Author: pancake <pancake@localhost>\r\n 1 file changed, 4144 insertions(+)\r\n create mode 100644 rc.r2\r\n[0x100003a38]> q\r\n0$ \r\n```","comments":[{"id":"IC_kwDOAEpMrs5rcYYO","author":{"login":"bqv"},"authorAssociation":"CONTRIBUTOR","body":"Storing absolute paths would make sense regardless of prj.files, for what its worth","createdAt":"2023-11-08T20:27:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22149#issuecomment-1802601998","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5sVBhZ","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I think is better to keep a copy of those files inside the project directory, otherwise the zipped projects cannot be shared between users/machines","createdAt":"2023-11-18T09:03:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/22149#issuecomment-1817450585","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6EpVwc","author":{"login":"envyniv"},"authorAssociation":"NONE","body":"# Disclaimer: using r2 through iaito\r\n\r\nso prj.files copies the files to the bin folder in the project directory, then what, exactly?\r\nAs far as I have witnessed it doesn't even change the project RC's opened file path.\r\n\r\nas it currently stands r2 projects seem impossible to share for collaboration to a novice user such as me. Is there a workaround or variable to allow multiple people to interact on one project? Ideas that come off the top of my head would be:\r\n- making a script to open the project after dealing with paths, but that's a naive approach as it could possibly create issues with VCS (taking git as an example)\r\n- setting up some fictitious environment specifically to run radare2/iaito with tools like distrobox or manually setting env. vars and maybe using some ad-hoc conf file through `R2_RCFILE`.\r\n\r\nAre the above valid approaches?","createdAt":"2024-07-12T11:57:27Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22149#issuecomment-2225429532","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6Eu4T9","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Indeed, this seems like a bug on the way that the rc script is generated, the project loading can \"massage\" or adapt this by checking if the file specified is found in the project directory before the full path, this will probably make it easier because changing the way rc scripts are generated can be more problematic.","createdAt":"2024-07-13T12:19:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22149#issuecomment-2226881789","viewerDidAuthor":true}],"number":22149,"title":"Projects and files"},{"body":"## Environment\r\n\r\n```sh\r\n$ date; r2 -v; uname -ms\r\nFri Aug  4 08:38:43 CST 2023\r\nradare2 5.8.8 30900 @ darwin-x86-64\r\nbirth: git.5.8.8 2023-06-09__10:00:18\r\ncommit: ea7f0356519884715cf1d5fba16042bac72b2df5\r\noptions: gpl -O2 cs:5 cl:2 make\r\nDarwin x86_64\r\n```\r\n\r\n## Description\r\nR2 fails to find some xrefs while analyzing apk file.\r\n\r\nTake an [APK](https://github.com/quark-engine/apk-samples/blob/master/vulnerable-samples/pivaa.apk) (SHA1: 2bc8ccf3185f5387097c29bfd79453bdb08b4457) as an example. I tried to find the xrefs to the API `sym.imp.Ljava_io_File.method.getAbsolutePath__Ljava_lang_String_` and `sym.imp.Landroid_media_MediaRecorder.method.setOutputFile_Ljava_lang_String__V`. But R2 gets an incomplete result.\r\n\r\n```\r\n$ r2 apk://pivaa.apk\r\n -- The stripping process is not deep enough\r\n\r\n[0x000b5371]> aa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nWARN: set your favourite calling convention in `e anal.cc=?`\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\n\r\n[0x000b5371]> pd 1 $r @ sym.imp.Landroid_media_MediaRecorder.method.setOutputFile_Ljava_lang_String__V\r\n            ;-- Landroid/media/MediaRecorder.method.setOutputFile(Ljava/lang/String;)V:\r\n            ; DATA XREF from method.private.Landroid_support_v7_widget_helper_ItemTouchUIUtilImpl_Api21Impl.Landroid_support_v7_widget_helper_ItemTouchUIUtilImpl_Api21Impl.method.findMaxElevation_Landroid_support_v7_widget_RecyclerView_Landroid_view_View__F @ 0x256c86(r)\r\n            0x0005399c      .dword 0x0eb500e9\r\n\r\n[0x000b5371]> axt @ 0x0005399c\r\nmethod.private.Landroid_support_v7_widget_helper_ItemTouchUIUtilImpl_Api21Impl.Landroid_support_v7_widget_helper_ItemTouchUIUtilImpl_Api21Impl.method.findMaxElevation_Landroid_support_v7_widget_RecyclerView_Landroid_view_View__F 0x256c86 [DATA:r--] iput-short v12, v4, field+19785      \r\n\r\n[0x000b5371]> pd 1 $r @ sym.imp.Ljava_io_File.method.getAbsolutePath__Ljava_lang_String_\r\n            ;-- class.Landroid_support_transition_ChangeTransform_1:\r\n            ;-- Ljava/io/File.method.getAbsolutePath()Ljava/lang/String;:\r\n            0x0007cd24      .dword 0x07850ac5\r\n\r\n[0x000b5371]> axt @ 0x0007cd24\r\n\r\n```\r\n\r\nHowever, the output seems fine when I analyze the classes.dex from the same APK.\r\n\r\n```\r\n$ r2 classes.dex\r\n -- Use the 'id' command to see the source line related to the current seek\r\n\r\n[0x000af711]> aa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nWARN: set your favourite calling convention in `e anal.cc=?`\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\n\r\n[0x000af711]> pd 1 $r @ sym.imp.Landroid_media_MediaRecorder.method.setOutputFile_Ljava_lang_String__V\r\n            ;-- Landroid/media/MediaRecorder.method.setOutputFile(Ljava/lang/String;)V:\r\n            ; CALL XREF from method.private.Lcom_htbridge_pivaa_handlers_VulnerableService.Lcom_htbridge_pivaa_handlers_VulnerableService.method.startRecording__V @ 0x161668(x)\r\n            0x0004dd3c      .dword 0x0eb500e9\r\n\r\n[0x000af711]> axt @ 0x0004dd3c\r\nmethod.private.Lcom_htbridge_pivaa_handlers_VulnerableService.Lcom_htbridge_pivaa_handlers_VulnerableService.method.startRecording__V 0x161668 [CALL:--x] invoke-virtual {v2, v3}, Landroid/media/MediaRecorder.setOutputFile(Ljava/lang/String;)V ; sym.imp.Landroid_media_MediaRecorder.method.setOutputFile_Ljava_lang_String__V\r\n\r\n[0x000af711]> pd 1 $r @ sym.imp.Ljava_io_File.method.getAbsolutePath__Ljava_lang_String_\r\n            ;-- Ljava/io/File.method.getAbsolutePath()Ljava/lang/String;:\r\n            ; CALL XREF from method.public.Lcom_htbridge_pivaa_handlers_LoadCode.Lcom_htbridge_pivaa_handlers_LoadCode.method.load_Ljava_lang_String__Ljava_lang_String_ @ 0x160d8e(x)\r\n            ; CALL XREF from method.private.Lcom_htbridge_pivaa_handlers_VulnerableService.Lcom_htbridge_pivaa_handlers_VulnerableService.method.getOutputFile__Ljava_io_File_ @ 0x16150e(x)\r\n            ; CALL XREF from method.private.Lcom_htbridge_pivaa_handlers_VulnerableService.Lcom_htbridge_pivaa_handlers_VulnerableService.method.startRecording__V @ 0x161660(x)\r\n            0x000770c4      .dword 0x07850ac5\r\n\r\n[0x000af711]> axt @ 0x000770c4\r\nmethod.public.Lcom_htbridge_pivaa_handlers_LoadCode.Lcom_htbridge_pivaa_handlers_LoadCode.method.load_Ljava_lang_String__Ljava_lang_String_ 0x160d8e [CALL:--x] invoke-virtual {v14}, Ljava/io/File.getAbsolutePath()Ljava/lang/String; ; sym.imp.Ljava_io_File.method.getAbsolutePath__Ljava_lang_String_\r\nmethod.private.Lcom_htbridge_pivaa_handlers_VulnerableService.Lcom_htbridge_pivaa_handlers_VulnerableService.method.getOutputFile__Ljava_io_File_ 0x16150e [CALL:--x] invoke-virtual {v3}, Ljava/io/File.getAbsolutePath()Ljava/lang/String; ; sym.imp.Ljava_io_File.method.getAbsolutePath__Ljava_lang_String_\r\nmethod.private.Lcom_htbridge_pivaa_handlers_VulnerableService.Lcom_htbridge_pivaa_handlers_VulnerableService.method.startRecording__V 0x161660 [CALL:--x] invoke-virtual {v3}, Ljava/io/File.getAbsolutePath()Ljava/lang/String; ; sym.imp.Ljava_io_File.method.getAbsolutePath__Ljava_lang_String_\r\n\r\n```\r\nPlease let me know if anything is unclear.","comments":[{"id":"IC_kwDOAEpMrs5jqU0V","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Yes this issue was reported a while ago and i fixed it but seems like there are some corner cases where the base addresss of each dex is not taken into account. Ill look into that. Thanks for reporting","createdAt":"2023-08-09T19:40:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22143#issuecomment-1672039701","viewerDidAuthor":true}],"number":22143,"title":"R2 fails to find some xrefs in APK"},{"body":"## Description\r\n\r\nProfile-Guided Optimization (PGO) optimization technique can help with improving CPU performance. [Here](https://github.com/zamazan4ik/awesome-pgo/) results from applying PGO on different open-source projects in various domains.\r\n\r\nI think it would be interesting to see PGO results on Radare2 as well. If you have a suggestion for a good benchmark to test it - please let me know. If you already have some results about PGO with Radare2 - please share them here! If PGO will show some improvements on Radare2 - will be great to see a note about PGO in Radare2 documentation.\r\n","comments":[{"id":"IC_kwDOAEpMrs5hHAAp","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"PGO is an interesting optimization, but i have never benchmarked or tested it, but seems like r2 could be a good target for testing this technique. But right now my main focus is on implementing optimizations in the code rather than at compilation stage. i can say that r2 is about -O2 is 2-3x faster than -O1, and LTO helps but cant say numbers about pgo rn","createdAt":"2023-07-10T15:45:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/22032#issuecomment-1629225001","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5hYrIe","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I added a `make pgo` target in SDB and followed the lines described in https://llvm.org/devmtg/2020-09/slides/PGO_Instrumentation.pdf and the results are quite dissapointing, i guess the code can't be optimized much more but this didnt bring more than 1% perf improvement","createdAt":"2023-07-13T09:07:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22032#issuecomment-1633858078","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5hYriC","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Also, the profile data is compiler-specific, so needs to be generated in the CI while running the testsuite.","createdAt":"2023-07-13T09:08:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22032#issuecomment-1633859714","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5hY9Mn","author":{"login":"zamazan4ik"},"authorAssociation":"NONE","body":"> I added a make pgo target in SDB and followed the lines described in https://llvm.org/devmtg/2020-09/slides/PGO_Instrumentation.pdf\r\n\r\nDid you use `-fprofile-instr-generate`/`-fprofile-instr-use` pair of commands? Are these flags propagated to the radare2 dependencies too (PGOing dependencies with the program helps more)? On which workload did you collect the runtime profile? Usually, the test suite is not a good enough source of the profile since the test suite tries to execute all paths, not only happy real-life ways (but I may be wrong here since I know nothing about radare2 test suite).\r\n\r\n> Also, the profile data is compiler-specific, so needs to be generated in the CI while running the test suite.\r\n\r\nYes, they are compiler-specific. But you can collect profile once, then commit it and re-generate it only when you change a compiler and/or compiler version. But better way always is to commit somehow a sample workload instead of ready to use perf counters.","createdAt":"2023-07-13T09:55:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/22032#issuecomment-1633932071","viewerDidAuthor":false}],"number":22032,"title":"Evaluate Profile-Guided Optimization (PGO) profits on Radare2"},{"body":"Use this doc as reference\r\n\r\nhttps://hardwear.io/usa-2023/presentation/analyzing-decompiled-C++vtables-and-objects-in-GCC-binaries.pdf","comments":[{"id":"IC_kwDOAEpMrs5jWrin","author":{"login":"MewtR"},"authorAssociation":"CONTRIBUTOR","body":"So I started looking into this a bit, was wondering if you had anything specific in mind. What would be the main improvement you'd like to see?","createdAt":"2023-08-06T15:06:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21975#issuecomment-1666889895","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5ljz1O","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Yes, basically add support for what the document explains","createdAt":"2023-09-02T16:47:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21975#issuecomment-1703886158","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5sGy9A","author":{"login":"vingocheng"},"authorAssociation":"NONE","body":"I think different compiler have different vtable implement. ","createdAt":"2023-11-16T03:08:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21975#issuecomment-1813720896","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5sMp0u","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Yes, every compiler is differerent but at least for compat ressons c++ shares a bunch of abi stable agreements across different implementations but probably not for vtables","createdAt":"2023-11-16T20:22:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21975#issuecomment-1815256366","viewerDidAuthor":true}],"number":21975,"title":"Improve c++ vtable parsing support"},{"body":"","comments":[],"number":21927,"title":"Move shlr/java into libr/bin and libr/arch and reduce visibility of symbols"},{"body":"## Environment\r\n\r\n```sh\r\n# copypaste this script into your shell and \r\n$ date; r2 -v; uname -ms\r\nMon Jun  5 23:57:00 CST 2023\r\nradare2 5.8.7 30844 @ darwin-x86-64\r\nbirth: git.5.8.6-166-g6799fa41af 2023-06-05__22:58:01\r\ncommit: 6799fa41af6b44023e2331d44da3b04fbe7971e8\r\noptions: gpl -O2 cs:5 cl:2 make\r\nDarwin x86_64\r\n```\r\n\r\n## Description\r\n\r\nR2 fails to find the functions at some addresses while analyzing apk sample.\r\n\r\nTake an [APK](https://github.com/quark-engine/apk-samples/blob/master/malware-samples/0c2494c03f07f891c67bb31390c12c84b0bb5eea132821c0873db7a87f27ccef.apk) (SHA1: 3f2c8e170a4aab68af2c43a0d63e52a637791a9f) as an example. \r\nAt first, I found the `La/b/d/a/B.method.a()I` exists at `1483646` according to the symbol info, \r\nthen tried to disassemble it. It turns out that R2 canâ€™t find the function at this address.\r\n\r\n```\r\n$ r2 apk://0c2494c03f07f891c67bb31390c12c84b0bb5eea132821c0873db7a87f27ccef.apk\r\n -- To debug a program, you can call r2 with 'dbg://<path-to-program>' or '-d <path..>'\r\n\r\n[0x000ce770]> aa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nWARN: set your favourite calling convention in `e anal.cc=?`\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\n\r\n[0x000ce770]> is.j @ 1483646\r\n{\"symbols\":{\"name\":\"La/b/d/a/B.method.a()I\",\"flagname\":\"sym.La_b_d_a_B.method.a__I\",\"realname\":\"La/b/d/a/B.method.a()I\",\"ordinal\":1965,\"bind\":\"GLOBAL\",\"size\":0,\"type\":\"METH\",\"vaddr\":1562282,\"paddr\":1483626,\"is_imported\":false}}\r\n\r\n[0x000ce770]> pdfj @ 1562282\r\nERROR: Cannot find function at 0x0017d6aa\r\n\r\n```\r\n\r\nThe error also happens in analyzing other [APK samples](https://github.com/quark-engine/apk-samples/blob/master/vulnerable-samples/Vuldroid.apk) (SHA1: 3f2c8e170a4aab68af2c43a0d63e52a637791a9f).\r\n\r\n```\r\n$ r2 apk://Vuldroid.apk\r\n\r\n -- Stay indoors and await further instructions\r\n[0x0049e06b]> aa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nWARN: set your favourite calling convention in `e anal.cc=?`\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\n\r\n[0x0049e06b]> is.j @ 2974136\r\n{\"symbols\":{\"name\":\"Lcom/google/firebase/auth/PhoneAuthProvider.method.verifyPhoneNumber(Ljava/lang/String;JLjava/util/concurrent/TimeUnit;Landroid/app/Activity;Lcom/google/firebase/auth/PhoneAuthProvider$OnVerificationStateChangedCallbacks;Lcom/google/firebase/auth/PhoneAuthProvider$ForceResendingToken;)V\",\"flagname\":\"sym.Lcom_google_firebase_auth_PhoneAuthProvider.method.verifyPhoneNumber_Ljava_lang_String_JLjava_util_concurrent_TimeUnit_Landroi\",\"realname\":\"Lcom/google/firebase/auth/PhoneAuthProvider.method.verifyPhoneNumber(Ljava/lang/String;JLjava/util/concurrent/TimeUnit;Landroid/app/Activity;Lcom/google/firebase/auth/PhoneAuthProvider$OnVerificationStateChangedCallbacks;Lcom/google/firebase/auth/PhoneAuthProvider$ForceResendingToken;)V\",\"ordinal\":20279,\"bind\":\"GLOBAL\",\"size\":60,\"type\":\"FUNC\",\"vaddr\":2974108,\"paddr\":2505884,\"is_imported\":false}}\r\n\r\n[0x0049e06b]> pdfj @ 2974108\r\nERROR: Cannot find function at 0x002d619c\r\n```\r\n\r\nPlease let me know if anything is unclear.\r\n","comments":[{"id":"IC_kwDOAEpMrs5eXSVs","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Theres a bug in 586 that doesnt locates the symbols in dex properly when doing apk:// please upgrade to 588 or load the dex inside","createdAt":"2023-06-08T18:50:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21864#issuecomment-1583162732","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5e1-e4","author":{"login":"sidra-asa"},"authorAssociation":"NONE","body":"@trufae \r\n\r\nThank you for your kind reply.\r\nI updated to version 5.8.8 and analyzed the sample by loading the dex file. It worked fine. However, the analysis with `apk://` is still in error. \r\n\r\n```bash\r\n$ r2 -v\r\nradare2 5.8.8 30900 @ darwin-x86-64\r\nbirth: git.5.8.8 2023-06-09__10:00:18\r\ncommit: ea7f0356519884715cf1d5fba16042bac72b2df5\r\noptions: gpl -O2 cs:5 cl:2 make\r\n\r\n$ r2 apk://0c2494c03f07f891c67bb31390c12c84b0bb5eea132821c0873db7a87f27ccef.apk\r\n -- Use 'rabin2 -ris' to get the import/export symbols of any binary.\r\n[0x000ce770]> aa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nWARN: set your favourite calling convention in `e anal.cc=?`\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\n\r\n[0x000ce770]> is.j @ 1483646\r\n{\"symbols\":{\"name\":\"La/b/d/a/B.method.a()I\",\"flagname\":\"sym.La_b_d_a_B.method.a__I\",\"realname\":\"La/b/d/a/B.method.a()I\",\"ordinal\":1965,\"bind\":\"GLOBAL\",\"size\":0,\"type\":\"METH\",\"vaddr\":1562282,\"paddr\":1483626,\"is_imported\":false}}\r\n\r\n[0x000ce770]> pdfj @ 1562282\r\nERROR: Cannot find function at 0x0017d6aa\r\n[0x000ce770]> \r\n\r\n\r\n$ r2 0c2494c03f07f891c67bb31390c12c84b0bb5eea132821c0873db7a87f27ccef/classes.dex\r\n -- Place a cat on your keyboard while running r2, you'll not believe what will happen next\r\n[0x000c4dd0]> aa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nWARN: set your favourite calling convention in `e anal.cc=?`\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\n\r\n[0x000c4dd0]> is.j @ 800416\r\n{\"symbols\":{\"name\":\"La/b/d/a/b.method.a()I\",\"flagname\":\"sym.La_b_d_a_b.method.a__I\",\"realname\":\"La/b/d/a/b.method.a()I\",\"ordinal\":2313,\"bind\":\"GLOBAL\",\"size\":12,\"type\":\"FUNC\",\"vaddr\":800416,\"paddr\":800416,\"is_imported\":false}}\r\n\r\n[0x000c4dd0]> pdfj @ 800416\r\n{\"name\":\"method.public.La_b_d_a_b.La_b_d_a_b.method.a__I\",\"size\":12,\"addr\":800416,\"ops\":[{\"offset\":800416,\"val\":0,\"esil\":\"0,v0,=\",\"refptr\":0,\"fcn_addr\":800416,\"fcn_last\":800426,\"size\":2,\"opcode\":\"const/4 v0, 0\",\"disasm\":\"const/4 v0, 0\",\"bytes\":\"1200\",\"family\":\"cpu\",\"type\":\"mov\",\"reloc\":false,\"type_num\":9,\"type2_num\":0,\"flags\":[\"sym.La_b_d_a_b.method.a__I\",\"method.public.La_b_d_a_b.La_b_d_a_b.method.a__I\"]},{\"offset\":800418,\"esil\":\"8,sp,-=,0xc36a8,sp,=[8],0xc36bc,ip,=\",\"refptr\":0,\"fcn_addr\":800416,\"fcn_last\":800422,\"size\":6,\"opcode\":\"invoke-virtual {v1, v0}, La/b/d/a/b.a(Z)I ; 0x3f2\",\"disasm\":\"invoke-virtual {v1, v0}, La/b/d/a/b.a(Z)I ; 0x3f2\",\"bytes\":\"6e20f2030100\",\"family\":\"cpu\",\"type\":\"call\",\"reloc\":false,\"type_num\":3,\"type2_num\":0,\"jump\":800444,\"fail\":800424,\"refs\":[{\"addr\":800444,\"type\":\"CALL\",\"perm\":\"--x\"}]},{\"offset\":800424,\"esil\":\"sp,v0,=[8],8,sp,+=,8\",\"refptr\":0,\"fcn_addr\":800416,\"fcn_last\":800426,\"size\":2,\"opcode\":\"move-result v0\",\"disasm\":\"move-result v0\",\"bytes\":\"0a00\",\"family\":\"cpu\",\"type\":\"mov\",\"reloc\":false,\"type_num\":9,\"type2_num\":0},{\"offset\":800426,\"esil\":\"sp,[8],ip,=,8,sp,+=,8,sp,-=,v0,sp,=[8]\",\"refptr\":0,\"fcn_addr\":800416,\"fcn_last\":800426,\"size\":2,\"opcode\":\"return v0\",\"disasm\":\"return v0\",\"bytes\":\"0f00\",\"family\":\"cpu\",\"type\":\"ret\",\"reloc\":false,\"type_num\":5,\"type2_num\":0}]}\r\n```","createdAt":"2023-06-14T13:25:57Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21864#issuecomment-1591207864","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5krrak","author":{"login":"sidra-asa"},"authorAssociation":"NONE","body":"@trufae \r\n\r\nI would like to provide more information if you need additional test cases.\r\n\r\nI analyzed another [APK](https://github.com/quark-engine/apk-samples/blob/master/malware-samples/13667fe3b0ad496a0cd157f34b7e0c991d72a4db.apk)(SHA1: 13667fe3b0ad496a0cd157f34b7e0c991d72a4db), and I found a disassembly is incomplete.\r\n\r\n```\r\n$ r2 apk://13667fe3b0ad496a0cd157f34b7e0c991d72a4db.apk\r\n -- Bindiff two files with '$ radiff2 /bin/true /bin/false'\r\n\r\n[0x0002f918]> aa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nWARN: set your favourite calling convention in `e anal.cc=?`\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\n\r\n[0x0002f918]> pdf $r @ method.public.Landroid_support_v4_app_FragmentManagerImpl.Landroid_support_v4_app_FragmentManagerImpl.method.execPendingActions__Z\r\n            ;-- Landroid/support/v4/app/FragmentManagerImpl.method.execPendingActions()Z:\r\nâ”Œ 72: method.public.Landroid_support_v4_app_FragmentManagerImpl.Landroid_support_v4_app_FragmentManagerImpl.method.execPendingActions__Z ();\r\nâ”‚           0x000525c4      1207           const/4 v7, 0\r\nâ”‚           0x000525c6      55850c01       iget-boolean v5, v8, Landroid/support/v4/app/FragmentManagerImpl;->mExecutingActions Z\r\nâ”‚       â”Œâ”€< 0x000525ca      38050a00       if-eqz v5, 0x000525de\r\nâ”‚       â”‚   0x000525ce      22051603       new-instance v5, Ljava/lang/IllegalStateException; ; 0x6efc\r\nâ”‚       â”‚   0x000525d2      1a066a08       const-string v6, 0x7ad47    ; \"cessibilityNodeInfoStubImpl;\"\r\nâ”‚       â”‚   0x000525d6      7020a2146500   invoke-direct {v5, v6}, Ljava/lang/IllegalStateException.<init>(Ljava/lang/String;)V ; 0x14a2\r\nâ”‚       â”‚   0x000525dc      2705           throw v5\r\nâ”‚       â””â”€> 0x000525de      71008a010000   invoke-static {}, Landroid/os/Looper.myLooper()Landroid/os/Looper; ; 0x18a\r\nâ”‚           0x000525e4      0c05           move-result-object v5\r\nâ”‚           0x000525e6      54860001       iget-object v6, v8, Landroid/support/v4/app/FragmentManagerImpl;->mActivity Landroid/support/v4/app/FragmentActivity;\r\nâ”‚           0x000525ea      5466da00       iget-object v6, v6, Landroid/support/v4/app/FragmentActivity;->mHandler Landroid/os/Handler;\r\nâ”‚           0x000525ee      6e107f010600   invoke-virtual {v6}, Landroid/os/Handler.getLooper()Landroid/os/Looper; ; 0x17f\r\nâ”‚           0x000525f4      0c06           move-result-object v6\r\nâ”‚       â”Œâ”€< 0x000525f6      32650a00       if-eq v5, v6, 0x0005260a    ; IntentCompat.java:61\r\nâ”‚       â”‚   0x000525fa      22051603       new-instance v5, Ljava/lang/IllegalStateException; ; 0x6efc\r\nâ”‚       â”‚   0x000525fe      1a06dc07       const-string v6, 0x7a103    ; \"ubImpl;\"\r\nâ”‚       â”‚   0x00052602      7020a2146500   invoke-direct {v5, v6}, Ljava/lang/IllegalStateException.<init>(Ljava/lang/String;)V ; 0x14a2\r\nâ”‚       â”‚   0x00052608      2705           throw v5\r\nâ””       â””â”€> 0x0005260a      1200           const/4 v0, 0\r\n[0x0002f918]> \r\n```\r\nIn contrast to analyzing apk, the result of the dex file seemed fine.\r\n\r\n```\r\n$ r2 13667fe3b0ad496a0cd157f34b7e0c991d72a4db/classes.dex\r\n -- There's more than one way to skin a cat\r\n\r\n[0x0002a180]> aa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nWARN: set your favourite calling convention in `e anal.cc=?`\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\n\r\n[0x0002a180]> pdf $r @ method.public.Landroid_support_v4_app_FragmentManagerImpl.Landroid_support_v4_app_FragmentManagerImpl.method.execPendingActions__Z\r\n            ;-- Landroid/support/v4/app/FragmentManagerImpl.method.execPendingActions()Z:\r\n            ; XREFS: CALL 0x0002a92e  CALL 0x0002a99c  CALL 0x0002aa06  CALL 0x0002bddc  CALL 0x0002bed0  CALL 0x0002c064  \r\n            ; XREFS: CALL 0x0002c298  CALL 0x0004c6c6  CALL 0x0004cfa4  CALL 0x0004e9d6  \r\nâ”Œ 324: method.public.Landroid_support_v4_app_FragmentManagerImpl.Landroid_support_v4_app_FragmentManagerImpl.method.execPendingActions__Z ();\r\nâ”‚           0x0004ce2c      1207           const/4 v7, 0\r\nâ”‚           0x0004ce2e      55850c01       iget-boolean v5, v8, Landroid/support/v4/app/FragmentManagerImpl;->mExecutingActions Z\r\nâ”‚       â”Œâ”€< 0x0004ce32      38050a00       if-eqz v5, 0x0004ce46\r\nâ”‚       â”‚   0x0004ce36      22051603       new-instance v5, Ljava/lang/IllegalStateException; ; 0x6efc\r\nâ”‚       â”‚   0x0004ce3a      1a066a08       const-string v6, str.Recursive_entry_to_executePendingTransactions ; 0x7ad47 ; \"-Recursive entry to executePendingTransactions\"\r\nâ”‚       â”‚   0x0004ce3e      7020a2146500   invoke-direct {v5, v6}, Ljava/lang/IllegalStateException.<init>(Ljava/lang/String;)V ; 0x14a2\r\nâ”‚       â”‚   0x0004ce44      2705           throw v5\r\nâ”‚       â””â”€> 0x0004ce46      71008a010000   invoke-static {}, Landroid/os/Looper.myLooper()Landroid/os/Looper; ; 0x18a\r\nâ”‚           0x0004ce4c      0c05           move-result-object v5\r\nâ”‚           0x0004ce4e      54860001       iget-object v6, v8, Landroid/support/v4/app/FragmentManagerImpl;->mActivity Landroid/support/v4/app/FragmentActivity;\r\nâ”‚           0x0004ce52      5466da00       iget-object v6, v6, Landroid/support/v4/app/FragmentActivity;->mHandler Landroid/os/Handler;\r\nâ”‚           0x0004ce56      6e107f010600   invoke-virtual {v6}, Landroid/os/Handler.getLooper()Landroid/os/Looper; ; 0x17f\r\nâ”‚           0x0004ce5c      0c06           move-result-object v6\r\nâ”‚       â”Œâ”€< 0x0004ce5e      32650a00       if-eq v5, v6, 0x0004ce72    ; FragmentManager.java:1474\r\nâ”‚       â”‚   0x0004ce62      22051603       new-instance v5, Ljava/lang/IllegalStateException; ; FragmentManager.java:1475 ; 0x6efc\r\nâ”‚       â”‚   0x0004ce66      1a06dc07       const-string v6, str.Must_be_called_from_main_thread_of_process ; 0x7a103 ; \"*Must be called from main thread of process\"\r\nâ”‚       â”‚   0x0004ce6a      7020a2146500   invoke-direct {v5, v6}, Ljava/lang/IllegalStateException.<init>(Ljava/lang/String;)V ; 0x14a2\r\nâ”‚       â”‚   0x0004ce70      2705           throw v5\r\nâ”‚       â””â”€> 0x0004ce72      1200           const/4 v0, 0\r\nâ”‚           ; CODE XREF from method.public.Landroid_support_v4_app_FragmentManagerImpl.Landroid_support_v4_app_FragmentManagerImpl.method.execPendingActions__Z @ 0x4cf64(x)\r\nâ”‚       â”Œâ”€> 0x0004ce74      1d08           monitor-enter v8            ; FragmentManager.java:1478\r\nâ”‚       â•Ž   0x0004ce76      54851101       iget-object v5, v8, Landroid/support/v4/app/FragmentManagerImpl;->mPendingActions Ljava/util/ArrayList;\r\nâ”‚      â”Œâ”€â”€< 0x0004ce7a      38050a00       if-eqz v5, 0x0004ce8e       ; FragmentManager.java:1479\r\nâ”‚      â”‚â•Ž   0x0004ce7e      54851101       iget-object v5, v8, Landroid/support/v4/app/FragmentManagerImpl;->mPendingActions Ljava/util/ArrayList;\r\nâ”‚      â”‚â•Ž   0x0004ce82      6e1001150500   invoke-virtual {v5}, Ljava/util/ArrayList.size()I ; 0x1501\r\nâ”‚      â”‚â•Ž   0x0004ce88      0a05           move-result v5\r\nâ”‚     â”Œâ”€â”€â”€< 0x0004ce8a      39052900       if-nez v5, 0x0004cedc       ; FragmentManager.java:1457\r\nâ”‚     â”‚â””â”€â”€> 0x0004ce8e      1e08           monitor-exit v8\r\nâ”‚     â”‚ â•Ž   0x0004ce90      55850d01       iget-boolean v5, v8, Landroid/support/v4/app/FragmentManagerImpl;->mHavePendingDeferredStart Z\r\nâ”‚     â”‚â”Œâ”€â”€< 0x0004ce94      38057000       if-eqz v5, 0x0004cf74\r\nâ”‚     â”‚â”‚â•Ž   0x0004ce98      1203           const/4 v3, 0\r\nâ”‚     â”‚â”‚â•Ž   0x0004ce9a      1202           const/4 v2, 0\r\nâ”‚     â”‚â”‚â•Ž   ; CODE XREF from method.public.Landroid_support_v4_app_FragmentManagerImpl.Landroid_support_v4_app_FragmentManagerImpl.method.execPendingActions__Z @ 0x4ceda(x)\r\nâ”‚    â”Œâ”€â”€â”€â”€> 0x0004ce9c      5485ff00       iget-object v5, v8, Landroid/support/v4/app/FragmentManagerImpl;->mActive Ljava/util/ArrayList;\r\nâ”‚    â•Žâ”‚â”‚â•Ž   0x0004cea0      6e1001150500   invoke-virtual {v5}, Ljava/util/ArrayList.size()I ; 0x1501\r\nâ”‚    â•Žâ”‚â”‚â•Ž   0x0004cea6      0a05           move-result v5\r\nâ”‚   â”Œâ”€â”€â”€â”€â”€< 0x0004cea8      35525f00       if-ge v2, v5, 0x0004cf66\r\nâ”‚   â”‚â•Žâ”‚â”‚â•Ž   0x0004ceac      5485ff00       iget-object v5, v8, Landroid/support/v4/app/FragmentManagerImpl;->mActive Ljava/util/ArrayList; ; FragmentManager.java:1463\r\nâ”‚   â”‚â•Žâ”‚â”‚â•Ž   0x0004ceb0      6e20fb142500   invoke-virtual {v5, v2}, Ljava/util/ArrayList.get(I)Ljava/lang/Object; ; 0x14fb ; FragmentManager.java:1466\r\nâ”‚   â”‚â•Žâ”‚â”‚â•Ž   0x0004ceb6      0c01           move-result-object v1\r\nâ”‚   â”‚â•Žâ”‚â”‚â•Ž   0x0004ceb8      1f019900       check-cast v1, Landroid/support/v4/app/Fragment;\r\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€< 0x0004cebc      38010d00       if-eqz v1, 0x0004ced6\r\nâ”‚  â”‚â”‚â•Žâ”‚â”‚â•Ž   0x0004cec0      5415af00       iget-object v5, v1, Landroid/support/v4/app/Fragment;->mLoaderManager Landroid/support/v4/app/LoaderManagerImpl;\r\nâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€< 0x0004cec4      38050900       if-eqz v5, 0x0004ced6\r\nâ”‚ â”‚â”‚â”‚â•Žâ”‚â”‚â•Ž   0x0004cec8      5415af00       iget-object v5, v1, Landroid/support/v4/app/Fragment;->mLoaderManager Landroid/support/v4/app/LoaderManagerImpl; ; FragmentManager.java:1472\r\nâ”‚ â”‚â”‚â”‚â•Žâ”‚â”‚â•Ž   0x0004cecc      6e1044040500   invoke-virtual {v5}, Landroid/support/v4/app/LoaderManagerImpl.hasRunningLoaders()Z ; 0x444 ; method.public.Landroid_support_v4_app_LoaderManagerImpl.Landroid_support_v4_app_LoaderManagerImpl.method.hasRunningLoaders__Z\r\nâ”‚ â”‚â”‚â”‚â•Žâ”‚â”‚â•Ž   0x0004ced2      0a05           move-result v5\r\nâ”‚ â”‚â”‚â”‚â•Žâ”‚â”‚â•Ž   0x0004ced4      b653           or-int/2addr v3, v5\r\nâ”‚ â””â””â”€â”€â”€â”€â”€â”€> 0x0004ced6      d8020201       add-int/lit8 v2, v2, 0x1\r\nâ”‚   â”‚â””â”€â”€â”€â”€< 0x0004ceda      28e1           goto 0x0004ce9c\r\nâ”‚   â”‚ â””â”€â”€â”€> 0x0004cedc      54851101       iget-object v5, v8, Landroid/support/v4/app/FragmentManagerImpl;->mPendingActions Ljava/util/ArrayList;\r\nâ”‚   â”‚  â”‚â•Ž   0x0004cee0      6e1001150500   invoke-virtual {v5}, Ljava/util/ArrayList.size()I ; 0x1501\r\nâ”‚   â”‚  â”‚â•Ž   0x0004cee6      0a04           move-result v4\r\nâ”‚   â”‚  â”‚â•Ž   0x0004cee8      54851501       iget-object v5, v8, Landroid/support/v4/app/FragmentManagerImpl;->mTmpActions [Ljava/lang/Runnable;\r\nâ”‚   â”‚ â”Œâ”€â”€â”€< 0x0004ceec      38050700       if-eqz v5, 0x0004cefa\r\nâ”‚   â”‚ â”‚â”‚â•Ž   0x0004cef0      54851501       iget-object v5, v8, Landroid/support/v4/app/FragmentManagerImpl;->mTmpActions [Ljava/lang/Runnable;\r\nâ”‚   â”‚ â”‚â”‚â•Ž   0x0004cef4      2155           array-length v5, v5\r\nâ”‚   â”‚â”Œâ”€â”€â”€â”€< 0x0004cef6      35450600       if-ge v5, v4, 0x0004cf02\r\nâ”‚   â”‚â”‚â””â”€â”€â”€> 0x0004cefa      23457a03       new-array v5, v4, [Ljava/lang/Runnable;\r\nâ”‚   â”‚â”‚ â”‚â•Ž   0x0004cefe      5b851501       iput-object v5, v8, Landroid/support/v4/app/FragmentManagerImpl;->mTmpActions [Ljava/lang/Runnable; ; field.class.Landroid_support_v4_app_FragmentManagerImpl.Landroid_support_v4_app_FragmentManagerImpl.ifield_mTmpActions:_Ljava_lang_Runnable\r\nâ”‚   â”‚â”‚ â”‚â•Ž                                                              ; 0xae74\r\nâ”‚   â”‚â””â”€â”€â”€â”€> 0x0004cf02      54851101       iget-object v5, v8, Landroid/support/v4/app/FragmentManagerImpl;->mPendingActions Ljava/util/ArrayList;\r\nâ”‚   â”‚  â”‚â•Ž   0x0004cf06      54861501       iget-object v6, v8, Landroid/support/v4/app/FragmentManagerImpl;->mTmpActions [Ljava/lang/Runnable;\r\nâ”‚   â”‚  â”‚â•Ž   0x0004cf0a      6e2003156500   invoke-virtual {v5, v6}, Ljava/util/ArrayList.toArray([Ljava/lang/Object;)[Ljava/lang/Object; ; 0x1503\r\nâ”‚   â”‚  â”‚â•Ž   0x0004cf10      54851101       iget-object v5, v8, Landroid/support/v4/app/FragmentManagerImpl;->mPendingActions Ljava/util/ArrayList;\r\nâ”‚   â”‚  â”‚â•Ž   0x0004cf14      6e10f9140500   invoke-virtual {v5}, Ljava/util/ArrayList.clear()V ; 0x14f9\r\nâ”‚   â”‚  â”‚â•Ž   0x0004cf1a      54850001       iget-object v5, v8, Landroid/support/v4/app/FragmentManagerImpl;->mActivity Landroid/support/v4/app/FragmentActivity;\r\nâ”‚   â”‚  â”‚â•Ž   0x0004cf1e      5455da00       iget-object v5, v5, Landroid/support/v4/app/FragmentActivity;->mHandler Landroid/os/Handler;\r\nâ”‚   â”‚  â”‚â•Ž   0x0004cf22      54860b01       iget-object v6, v8, Landroid/support/v4/app/FragmentManagerImpl;->mExecCommit Ljava/lang/Runnable;\r\nâ”‚   â”‚  â”‚â•Ž   0x0004cf26      6e2084016500   invoke-virtual {v5, v6}, Landroid/os/Handler.removeCallbacks(Ljava/lang/Runnable;)V ; 0x184\r\nâ”‚   â”‚  â”‚â•Ž   0x0004cf2c      1e08           monitor-exit v8\r\nâ”‚   â”‚  â”‚â•Ž   0x0004cf2e      1215           const/4 v5, 0x1\r\nâ”‚   â”‚  â”‚â•Ž   0x0004cf30      5c850c01       iput-boolean v5, v8, Landroid/support/v4/app/FragmentManagerImpl;->mExecutingActions Z ; field.class.Landroid_support_v4_app_FragmentManagerImpl.Landroid_support_v4_app_FragmentManagerImpl.ifield_mExecutingActions:Z\r\nâ”‚   â”‚  â”‚â•Ž                                                              ; 0xae2c\r\nâ”‚   â”‚  â”‚â•Ž   0x0004cf34      1202           const/4 v2, 0\r\nâ”‚   â”‚  â”‚â•Ž   ; CODE XREF from method.public.Landroid_support_v4_app_FragmentManagerImpl.Landroid_support_v4_app_FragmentManagerImpl.method.execPendingActions__Z @ 0x4cf56(x)\r\nâ”‚   â”‚â”Œâ”Œâ”€â”€â”€> 0x0004cf36      35421400       if-ge v2, v4, 0x0004cf5e\r\nâ”‚   â”‚â”‚â•Žâ”‚â•Ž   0x0004cf3a      54851501       iget-object v5, v8, Landroid/support/v4/app/FragmentManagerImpl;->mTmpActions [Ljava/lang/Runnable;\r\nâ”‚   â”‚â”‚â•Žâ”‚â•Ž   0x0004cf3e      46050502       aget-object v5, v5, v2\r\nâ”‚   â”‚â”‚â•Žâ”‚â•Ž   0x0004cf42      7210bc140500   invoke-interface {v5}, Ljava/lang/Runnable.run()V ; 0x14bc\r\nâ”‚   â”‚â”‚â•Žâ”‚â•Ž   0x0004cf48      54851501       iget-object v5, v8, Landroid/support/v4/app/FragmentManagerImpl;->mTmpActions [Ljava/lang/Runnable;\r\nâ”‚   â”‚â”‚â•Žâ”‚â•Ž   0x0004cf4c      1206           const/4 v6, 0\r\nâ”‚   â”‚â”‚â•Žâ”‚â•Ž   0x0004cf4e      4d060502       aput-object v6, v5, v2      ; field.class.Landroid_support_v4_content_ModernAsyncTask_AsyncTaskResult.Landroid_support_v4_content_ModernAsyncTask_AsyncTaskResult.ifield_mTask:Landroid_support_v4_content_ModernAsyncTask\r\nâ”‚   â”‚â”‚â•Žâ”‚â•Ž                                                              ; 0xb5f4\r\nâ”‚   â”‚â”‚â•Žâ”‚â•Ž   0x0004cf52      d8020201       add-int/lit8 v2, v2, 0x1\r\nâ”‚   â”‚â”‚â””â”€â”€â”€< 0x0004cf56      28f0           goto 0x0004cf36\r\n..\r\nâ”‚   â”‚â””â”€â”€â”€â”€> 0x0004cf5e      5c870c01       iput-boolean v7, v8, Landroid/support/v4/app/FragmentManagerImpl;->mExecutingActions Z ; field.class.Landroid_support_v4_app_FragmentManagerImpl.Landroid_support_v4_app_FragmentManagerImpl.ifield_mExecutingActions:Z\r\nâ”‚   â”‚  â”‚â•Ž                                                              ; 0xae2c\r\nâ”‚   â”‚  â”‚â•Ž   0x0004cf62      1210           const/4 v0, 0x1\r\nâ”‚   â”‚  â”‚â””â”€< 0x0004cf64      2888           goto 0x0004ce74\r\nâ”‚   â””â”€â”€â”€â”Œâ”€< 0x0004cf66      39030700       if-nez v3, 0x0004cf74\r\nâ”‚      â”‚â”‚   0x0004cf6a      5c870d01       iput-boolean v7, v8, Landroid/support/v4/app/FragmentManagerImpl;->mHavePendingDeferredStart Z ; field.class.Landroid_support_v4_app_FragmentManagerImpl.Landroid_support_v4_app_FragmentManagerImpl.ifield_mHavePendingDeferredStart:Z\r\nâ”‚      â”‚â”‚                                                              ; 0xae34\r\nâ”‚      â”‚â”‚   0x0004cf6e      6e1097030800   invoke-virtual {v8}, Landroid/support/v4/app/FragmentManagerImpl.startPendingDeferredFragments()V ; 0x397 ; method.Landroid_support_v4_app_FragmentManagerImpl.Landroid_support_v4_app_FragmentManagerImpl.method.startPendingDeferredFragments__V\r\nâ””      â””â””â”€> 0x0004cf74      0f00           return v0\r\n[0x0002a180]> \r\n```","createdAt":"2023-08-23T02:35:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21864#issuecomment-1689171620","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5zCrGl","author":{"login":"zinwang"},"authorAssociation":"NONE","body":"Hi @trufae!\r\n\r\nI can confirm this issue as well. Is this issue likely to be resolved recently? I'd be happy to help test or provide more information.","createdAt":"2024-02-06T15:42:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21864#issuecomment-1930080677","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5049XX","author":{"login":"zinwang"},"authorAssociation":"NONE","body":"\r\nHi, @trufae!\r\nI found that the problem occurs for different reasons in different samples. One reason I can identify is that when Radare2 searches for the location of a function that begins with nop instructions, it uses the address of the first non-nop instruction. Therefore, users can't find the function using the actual address with ``pdfj``. [Here](https://github.com/radareorg/radare2/blob/f1ae08a81379b54449e174a215ba822a958df706/libr/anal/fcn.c#L789) is the code of the behavior.\r\n\r\nTaking the Vuldroid.apk example above, the actual address of the ``PhoneAuthProvider.verifyPhoneNumber`` function is ``vaddr`` 2974108.\r\n\r\n```\r\n[0x0049e06b]> is.j @ 2974108 | jq  \r\n{\r\n  \"symbols\": {\r\n    \"name\": \"Lcom/google/firebase/auth/PhoneAuthProvider.method.verifyPhoneNumber(Ljava/lang/String;JLjava/util/concurrent/TimeUnit;Landroid/app/Activity;Lcom/google/firebase/auth/PhoneAuthProvider$OnVerificationStateChangedCallbacks;Lcom/google/firebase/auth/PhoneAuthProvider$ForceResendingToken;)V\",\r\n    \"flagname\": \"sym.Lcom_google_firebase_auth_PhoneAuthProvider.method.verifyPhoneNumber_Ljava_lang_String_JLjava_util_concurrent_TimeUnit_Landroi\",\r\n    \"realname\": \"Lcom/google/firebase/auth/PhoneAuthProvider.method.verifyPhoneNumber(Ljava/lang/String;JLjava/util/concurrent/TimeUnit;Landroid/app/Activity;Lcom/google/firebase/auth/PhoneAuthProvider$OnVerificationStateChangedCallbacks;Lcom/google/firebase/auth/PhoneAuthProvider$ForceResendingToken;)V\",\r\n    \"ordinal\": 20279,\r\n    \"bind\": \"GLOBAL\",\r\n    \"size\": 60,\r\n    \"type\": \"FUNC\",\r\n    \"vaddr\": 2974108,\r\n    \"paddr\": 2505884,\r\n    \"is_imported\": false\r\n  }\r\n}\r\n```\r\n\r\nLook at that smali code starting from the address 2974108. It is a function beginning with a nop instruction.\r\n\r\n```\r\n0x0049e06b]> pd @ 2974108 | head -5\r\n            ;-- method.public.Lcom_google_firebase_auth_PhoneAuthProvider.Lcom_google_firebase_auth_PhoneAuthProvider.method.verifyPhoneNumber_Ljava_lang_String_JLjava_util_concurrent_TimeUnit_Landroid_app_Activity_Lcom_google_firebase_auth_PhoneAuthProvider_OnVerificati:\r\n            ;-- Lcom/google/firebase/auth/PhoneAuthProvider.method.verifyPhoneNumber(Ljava/lang/String;JLjava/util/concurrent/TimeUnit;Landroid/app/Activity;Lcom/google/firebase/auth/PhoneAuthProvider$OnVerificationStateChangedCallbacks;Lcom/google/firebase/auth/PhoneAuthProvider$ForceResendingToken;)V:\r\n            0x002d619c      0000           nop\r\nâ”Œ 58: fcn.002d619e ();\r\nâ”‚           0x002d619e      7110d6550a00   invoke-static {v10}, Lcom/google/android/gms/common/internal/Preconditions.checkNotEmpty(Ljava/lang/String;)Ljava/lang/String; ; 0x55d6 ; fcn.001d7134\r\n```\r\n\r\nHowever, we can't find anything as we look up the function at address 2974108.\r\n\r\n```\r\n[0x0049e06b]> pdfj @ 2974108\r\nERROR: Cannot find function at 0x002d619c\r\n```\r\n\r\nWe need to look up the address of the first non-nop instruction to find the  function.\r\n\r\n```\r\n[0x0049e06b]> pdfj @ 2974110\r\n{\"name\":\"fcn.002d619e\",\"size\":58,\"addr\":2974110,\"ops\":[{\"offset\":2974110,\"esil\":\"8,sp,-=,0x2d61a4,sp,=[8],0x1d7134,ip,=\",\"refptr\":0,\"fcn_addr\":2974110,\"fcn_last\":2974162,\"size\":6,\"opcode\":\"invoke-static {v10}, Lcom/google/android/gms/common/internal/Preconditions.checkNotEmpty(Ljava/lang/String;)Ljava/lang/String; ; 0x55d6\",\"disasm\":\"invoke-static {v10}, Lcom/google/android/gms/common/internal/Preconditions.checkNotEmpty(Ljava/lang/String;)Ljava/lang/String; ; 0x55d6\",\"bytes\":\"7110d6550a00\",\"family\":\"cpu\",\"type\":\"call\",\"reloc\":false,\"type_num\":3,\"type2_num\":0,\"jump\":1929524,\"fail\":2974116,\"flags\":[\"fcn.002d619e\"],\"refs\":[{\"addr\":1929524,\"type\":\"CALL\",\"perm\":\"--x\"}]},{\"offset\":2974116,\"esil\":\"sp,v1,=[8],8,sp,+=,8\",\"refptr\":0,\"fcn_addr\":2974110,\"fcn_last\":2974166,\"size\":2,\"opcode\":\"move-result-object v1\",\"disasm\":\"move-result-object v1\",\"bytes\":\"0c01\",\"family\":\"cpu\",\"type\":\"mov\",\"reloc\":false,\"type_num\":9,\"type2_num\":0},{\"offset\":2974118,\"esil\":\"8,sp,-=,0x2d61ac,sp,=[8],0x1d70e0,ip,=\",\"refptr\":0,\"fcn_addr\":2974110,\"fcn_last\":2974162,\"size\":6,\"opcode\":\"invoke-static {v14}, Lcom/google/android/gms/common/internal/Preconditions.checkNotNull(Ljava/lang/Object;)Ljava/lang/Object; ; 0x55da\",\"disasm\":\"invoke-static {v14}, Lcom/google/android/gms/common/internal/Preconditions.checkNotNull(Ljava/lang/Object;)Ljava/lang/Object; ; 0x55da\",\"bytes\":\"7110da550e00\",\"family\":\"cpu\",\"type\":\"call\",\"reloc\":false,\"type_num\":3,\"type2_num\":0,\"jump\":1929440,\"fail\":2974124,\"refs\":[{\"addr\":1929440,\"type\":\"CALL\",\"perm\":\"--x\"}]},{\"offset\":2974124,\"esil\":\"sp,v0,=[8],8,sp,+=,8\",\"refptr\":0,\"fcn_addr\":2974110,\"fcn_last\":2974166,\"size\":2,\"opcode\":\"move-result-object v0\",\"disasm\":\"move-result-object v0\",\"bytes\":\"0c00\",\"family\":\"cpu\",\"type\":\"mov\",\"reloc\":false,\"type_num\":9,\"type2_num\":0},{\"offset\":2974126,\"esil\":\"v0,v5,=\",\"refptr\":0,\"fcn_addr\":2974110,\"fcn_last\":2974166,\"size\":2,\"opcode\":\"move-object v5, v0\",\"disasm\":\"move-object v5, v0\",\"bytes\":\"0705\",\"family\":\"cpu\",\"type\":\"mov\",\"reloc\":false,\"type_num\":9,\"type2_num\":0},{\"offset\":2974128,\"esil\":\",\",\"refptr\":0,\"fcn_addr\":2974110,\"fcn_last\":2974164,\"size\":4,\"opcode\":\"check-cast v5, Landroid/app/Activity;\",\"disasm\":\"check-cast v5, Landroid/app/Activity;\",\"bytes\":\"1f051d00\",\"family\":\"cpu\",\"type\":\"cmp\",\"reloc\":false,\"type_num\":15,\"type2_num\":0},{\"offset\":2974132,\"ptr\":341904,\"esil\":\"341904,v6,=\",\"refptr\":0,\"fcn_addr\":2974110,\"fcn_last\":2974164,\"size\":4,\"opcode\":\"sget-object v6, Lcom/google/android/gms/tasks/TaskExecutors;->MAIN_THREAD Ljava/util/concurrent/Executor;\",\"disasm\":\"sget-object v6, Lcom/google/android/gms/tasks/TaskExecutors;->MAIN_THREAD Ljava/util/concurrent/Executor;\",\"bytes\":\"6206df2a\",\"family\":\"cpu\",\"type\":\"load\",\"reloc\":false,\"type_num\":32,\"type2_num\":0,\"refs\":[{\"addr\":341904,\"type\":\"DATA\",\"perm\":\"r--\"}]},{\"offset\":2974136,\"esil\":\"8,sp,-=,0x2d61be,sp,=[8],0x1d70e0,ip,=\",\"refptr\":0,\"fcn_addr\":2974110,\"fcn_last\":2974162,\"size\":6,\"opcode\":\"invoke-static {v15}, Lcom/google/android/gms/common/internal/Preconditions.checkNotNull(Ljava/lang/Object;)Ljava/lang/Object; ; 0x55da\",\"disasm\":\"invoke-static {v15}, Lcom/google/android/gms/common/internal/Preconditions.checkNotNull(Ljava/lang/Object;)Ljava/lang/Object; ; 0x55da\",\"bytes\":\"7110da550f00\",\"family\":\"cpu\",\"type\":\"call\",\"reloc\":false,\"type_num\":3,\"type2_num\":0,\"jump\":1929440,\"fail\":2974142,\"refs\":[{\"addr\":1929440,\"type\":\"CALL\",\"perm\":\"--x\"}]},{\"offset\":2974142,\"esil\":\"sp,v0,=[8],8,sp,+=,8\",\"refptr\":0,\"fcn_addr\":2974110,\"fcn_last\":2974166,\"size\":2,\"opcode\":\"move-result-object v0\",\"disasm\":\"move-result-object v0\",\"bytes\":\"0c00\",\"family\":\"cpu\",\"type\":\"mov\",\"reloc\":false,\"type_num\":9,\"type2_num\":0},{\"offset\":2974144,\"esil\":\"v0,v7,=\",\"refptr\":0,\"fcn_addr\":2974110,\"fcn_last\":2974166,\"size\":2,\"opcode\":\"move-object v7, v0\",\"disasm\":\"move-object v7, v0\",\"bytes\":\"0707\",\"family\":\"cpu\",\"type\":\"mov\",\"reloc\":false,\"type_num\":9,\"type2_num\":0},{\"offset\":2974146,\"esil\":\",\",\"refptr\":0,\"fcn_addr\":2974110,\"fcn_last\":2974164,\"size\":4,\"opcode\":\"check-cast v7, Lcom/google/firebase/auth/PhoneAuthProvider$OnVerificationStateChangedCallbacks;\",\"disasm\":\"check-cast v7, Lcom/google/firebase/auth/PhoneAuthProvider$OnVerificationStateChangedCallbacks;\",\"bytes\":\"1f07480f\",\"family\":\"cpu\",\"type\":\"cmp\",\"reloc\":false,\"type_num\":15,\"type2_num\":0},{\"offset\":2974150,\"esil\":\"v9,v0,=\",\"refptr\":0,\"fcn_addr\":2974110,\"fcn_last\":2974166,\"size\":2,\"opcode\":\"move-object v0, v9\",\"disasm\":\"move-object v0, v9\",\"bytes\":\"0790\",\"family\":\"cpu\",\"type\":\"mov\",\"reloc\":false,\"type_num\":9,\"type2_num\":0},{\"offset\":2974152,\"esil\":\"v11,v2,=,v12,v3,=\",\"refptr\":0,\"fcn_addr\":2974110,\"fcn_last\":2974166,\"size\":2,\"opcode\":\"move-wide v2, v11\",\"disasm\":\"move-wide v2, v11\",\"bytes\":\"04b2\",\"family\":\"cpu\",\"type\":\"mov\",\"reloc\":false,\"type_num\":9,\"type2_num\":0},{\"offset\":2974154,\"esil\":\"v13,v4,=\",\"refptr\":0,\"fcn_addr\":2974110,\"fcn_last\":2974166,\"size\":2,\"opcode\":\"move-object v4, v13\",\"disasm\":\"move-object v4, v13\",\"bytes\":\"07d4\",\"family\":\"cpu\",\"type\":\"mov\",\"reloc\":false,\"type_num\":9,\"type2_num\":0},{\"offset\":2974156,\"esil\":\"v16,v8,=\",\"refptr\":0,\"fcn_addr\":2974110,\"fcn_last\":2974164,\"size\":4,\"opcode\":\"move-object/from16 v8, v16\",\"disasm\":\"move-object/from16 v8, v16\",\"bytes\":\"08081000\",\"family\":\"cpu\",\"type\":\"mov\",\"reloc\":false,\"type_num\":9,\"type2_num\":0},{\"offset\":2974160,\"esil\":\"8,sp,-=,0x2d61d6,sp,=[8],0xffffffffffffffff,ip,=\",\"refptr\":0,\"fcn_addr\":2974110,\"fcn_last\":2974162,\"size\":6,\"opcode\":\"invoke-direct/range {v0..v8}, Lcom/google/firebase/auth/PhoneAuthProvider.zza(Ljava/lang/String;JLjava/util/concurrent/TimeUnit;Landroid/app/Activity;Ljava/util/concurrent/Executor;Lcom/google/firebase/auth/PhoneAuthProvider$OnVerificationStateChangedCal\",\"disasm\":\"invoke-direct/range {v0..v8}, Lcom/google/firebase/auth/PhoneAuthProvider.zza(Ljava/lang/String;JLjava/util/concurrent/TimeUnit;Landroid/app/Activity;Ljava/util/concurrent/Executor;Lcom/google/firebase/auth/PhoneAuthProvider$OnVerificationStateChangedCallbacks;Lcom/google/firebase/auth/PhoneAuthProvider$ForceResendingToken;)V\",\"bytes\":\"7609bd7d0000\",\"family\":\"cpu\",\"type\":\"ucall\",\"reloc\":false,\"type_num\":4,\"type2_num\":0},{\"offset\":2974166,\"esil\":\"sp,[8],ip,=,8,sp,+=\",\"refptr\":0,\"fcn_addr\":2974110,\"fcn_last\":2974166,\"size\":2,\"opcode\":\"return-void\",\"disasm\":\"return-void\",\"bytes\":\"0e00\",\"family\":\"cpu\",\"type\":\"ret\",\"reloc\":false,\"type_num\":5,\"type2_num\":0}]}\r\n```\r\n","createdAt":"2024-02-23T10:35:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21864#issuecomment-1961088471","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs506ode","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Theres an option to disablw this nopskip thing if this is just the problem you can disable it:\r\n\r\ne anal.nopskip=false","createdAt":"2024-02-23T15:23:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21864#issuecomment-1961527134","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs51k4xc","author":{"login":"zinwang"},"authorAssociation":"NONE","body":"Thank you, @trufae. I tested the command you provided and found it can resolve the issue caused by skipping NOP instructions. However, Radare2 still cannot find the specified function in other samples. I will continue to investigate.","createdAt":"2024-03-01T06:44:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21864#issuecomment-1972603996","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs53YTI_","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Any updates?","createdAt":"2024-03-18T03:24:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21864#issuecomment-2002858559","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6HM1FW","author":{"login":"zinwang"},"authorAssociation":"NONE","body":"Hi, @trufae. I have no further progress for now. But I can confirm the issue still exists on the following APKs:\r\n\r\n1. [Vuldroid.apk](https://github.com/quark-engine/apk-samples/blob/master/vulnerable-samples/Vuldroid.apk)\r\n\r\n    ```\r\n    $r2 apk://Vuldroid.apk                                                     \r\n     -- For HTTP authentication 'e http.auth = 1', 'e http.authfile = <path>'\r\n    [0x0049e06b]> e anal.nopskip=false\r\n    [0x0049e06b]> aa\r\n    INFO: Analyze all flags starting with sym. and entry0 (aa)\r\n    INFO: Analyze imports (af@@@i)\r\n    INFO: Analyze entrypoint (af@ entry0)\r\n    ERROR: af: Cannot find function at 0x0049e06b\r\n    INFO: Analyze symbols (af@@@s)\r\n    WARN: set your favourite calling convention in `e anal.cc=?`\r\n    INFO: Recovering variables\r\n    INFO: Analyze all functions arguments/locals (afva@@@F)\r\n    [0x0049e06b]> is.j @ 0x0051f690\r\n    {\"symbols\":{\"name\":\"Lcom/google/android/gms/common/api/internal/zabb.method.connect()V\",\"flagname\":\"sym.Lcom_google_android_gms_common_api_internal_zabb.method.connect__V\",\"realname\":\"Lcom/google/android/gms/common/api/internal/zabb.method.connect()V\",\"ordinal\":13711,\"bind\":\"GLOBAL\",\"size\":0,\"type\":\"METH\",\"vaddr\":5371536,\"paddr\":4435088,\"is_imported\":false}}\r\n    [0x0049e06b]> pdfj @ 0x0051f690\r\n    ERROR: Cannot find function at 0x0051f690\r\n    ```\r\n    \r\n\r\n    \r\n2. [InjuredAndroid.apk](https://github.com/quark-engine/apk-samples/blob/master/vulnerable-samples/InjuredAndroid.apk)\r\n\r\n\r\n    ```\r\n    $r2 apk://InjuredAndroid.apk                                               \r\n     -- Buy a mac\r\n    [0x00175b50]> e anal.nopskip=false\r\n    [0x00175b50]> aa\r\n    INFO: Analyze all flags starting with sym. and entry0 (aa)\r\n    INFO: Analyze imports (af@@@i)\r\n    INFO: Analyze entrypoint (af@ entry0)\r\n    WARN: set your favourite calling convention in `e anal.cc=?`\r\n    INFO: Analyze symbols (af@@@s)\r\n    TODO: getoffset object\r\n    INFO: Recovering variables\r\n    INFO: Analyze all functions arguments/locals (afva@@@F)\r\n    [0x00175b50]> is.j @ 0x00356cba\r\n    {\"symbols\":{\"name\":\"Lcom/google/firebase/database/p/h0/e.method.toString()Ljava/lang/String;\",\"flagname\":\"sym.Lcom_google_firebase_database_p_h0_e.method.toString__Ljava_lang_String_\",\"realname\":\"Lcom/google/firebase/database/p/h0/e.method.toString()Ljava/lang/String;\",\"ordinal\":22096,\"bind\":\"GLOBAL\",\"size\":0,\"type\":\"METH\",\"vaddr\":3501242,\"paddr\":3434202,\"is_imported\":false}}\r\n    [0x00175b50]> pdfj @ 0x00356cba\r\n    ERROR: Cannot find function at 0x00356cba\r\n    ```\r\n    \r\n\r\n    \r\n3. [14d9f1a92dd984d6040cc41ed06e273e.apk](https://github.com/quark-engine/apk-samples/blob/master/malware-samples/14d9f1a92dd984d6040cc41ed06e273e.apk)\r\n\r\n\r\n    ```\r\n    $r2 apk://14d9f1a92dd984d6040cc41ed06e273e.apk                                 \r\n     -- The more 'a' you add after 'aa' the more analysis steps are executed.\r\n    [0x00021298]> e anal.nopskip=false\r\n    [0x00021298]> aa\r\n    INFO: Analyze all flags starting with sym. and entry0 (aa)\r\n    INFO: Analyze imports (af@@@i)\r\n    INFO: Analyze entrypoint (af@ entry0)\r\n    WARN: set your favourite calling convention in `e anal.cc=?`\r\n    INFO: Analyze symbols (af@@@s)\r\n    INFO: Recovering variables\r\n    INFO: Analyze all functions arguments/locals (afva@@@F)\r\n    [0x00021298]> is.j @ 0x0005ec0c\r\n    {\"symbols\":{\"name\":\"Lcom/android/internal/telephony/ITelephony.method.getCallState()I\",\"flagname\":\"sym.Lcom_android_internal_telephony_ITelephony.method.getCallState__I\",\"realname\":\"Lcom/android/internal/telephony/ITelephony.method.getCallState()I\",\"ordinal\":11,\"bind\":\"GLOBAL\",\"size\":0,\"type\":\"METH\",\"vaddr\":388108,\"paddr\":332828,\"is_imported\":false}}\r\n    [0x00021298]> pdfj @ 0x0005ec0c\r\n    ERROR: Cannot find function at 0x0005ec0c\r\n    ```\r\n    \r\n    \r\n4. [com.cdim.driver.core.apk](https://github.com/quark-engine/apk-samples/blob/master/malware-samples/com.cdim.driver.core.apk)\r\n\r\n\r\n    ```\r\n    $r2 apk://com.cdim.driver.core.apk                                                î‚² âœ” î‚² 1m 32s ï‰’ \r\n     -- rip and tear until it compiles\r\n    [0x00040740]> e anal.nopskip=false\r\n    [0x00040740]> aa\r\n    INFO: Analyze all flags starting with sym. and entry0 (aa)\r\n    INFO: Analyze imports (af@@@i)\r\n    INFO: Analyze entrypoint (af@ entry0)\r\n    WARN: set your favourite calling convention in `e anal.cc=?`\r\n    INFO: Analyze symbols (af@@@s)\r\n    TODO: getoffset object\r\n    TODO: getoffset object\r\n    TODO: getoffset object\r\n    TODO: getoffset object\r\n    INFO: Recovering variables\r\n    INFO: Analyze all functions arguments/locals (afva@@@F)\r\n    [0x00040740]> is.j @ 0x0012e076\r\n    {\"symbols\":{\"name\":\"Lcom/baidu/mobads/z.method.getPackageName()Ljava/lang/String;\",\"flagname\":\"sym.Lcom_baidu_mobads_z.method.getPackageName__Ljava_lang_String_\",\"realname\":\"Lcom/baidu/mobads/z.method.getPackageName()Ljava/lang/String;\",\"ordinal\":1450,\"bind\":\"GLOBAL\",\"size\":0,\"type\":\"METH\",\"vaddr\":1237110,\"paddr\":1182214,\"is_imported\":false}}\r\n    [0x00040740]> pdfj @ 0x0012e076\r\n    ERROR: Cannot find function at 0x0012e076\r\n    ```\r\n    \r\n\r\n    \r\n5. [0c2494c03f07f891c67bb31390c12c84b0bb5eea132821c0873db7a87f27ccef.apk](https://github.com/quark-engine/apk-samples/blob/master/malware-samples/0c2494c03f07f891c67bb31390c12c84b0bb5eea132821c0873db7a87f27ccef.apk)\r\n\r\n\r\n    ```\r\n    $r2 apk://0c2494c03f07f891c67bb31390c12c84b0bb5eea132821c0873db7a87f27ccef.apk\r\n     -- Control the height of the terminal on serial consoles with e scr.height\r\n    [0x000ce770]> e anal.nopskip=false\r\n    [0x000ce770]> aa\r\n    INFO: Analyze all flags starting with sym. and entry0 (aa)\r\n    INFO: Analyze imports (af@@@i)\r\n    INFO: Analyze entrypoint (af@ entry0)\r\n    WARN: set your favourite calling convention in `e anal.cc=?`\r\n    INFO: Analyze symbols (af@@@s)\r\n    INFO: Recovering variables\r\n    INFO: Analyze all functions arguments/locals (afva@@@F)\r\n    [0x000ce770]> is.j @ 0x0017d6aa\r\n    {\"symbols\":{\"name\":\"La/b/d/a/B.method.a()I\",\"flagname\":\"sym.La_b_d_a_B.method.a__I\",\"realname\":\"La/b/d/a/B.method.a()I\",\"ordinal\":1965,\"bind\":\"GLOBAL\",\"size\":0,\"type\":\"METH\",\"vaddr\":1562282,\"paddr\":1483626,\"is_imported\":false}}\r\n    [0x000ce770]> pdfj @ 0x0017d6aa\r\n    ERROR: Cannot find function at 0x0017d6aa\r\n    ```\r\n    \r\n","createdAt":"2024-08-05T06:38:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21864#issuecomment-2268287318","viewerDidAuthor":false}],"number":21864,"title":"R2 fails to find the functions at some addresses"},{"body":"## Environment\r\n\r\n```\r\nFriday, 26 may 2023 11:18:50 (MSK)\r\n\r\nradare2 5.8.6 0 @ darwin-x86-64\r\nbirth: git.5.8.6 2023-05-05__19:38:15\r\ncommit: 5.8.6\r\n\r\nDarwin x86_64\r\n\r\n```\r\n## Description\r\n\r\nWhen trying to install a plug-in for the PowerPC architecture, the following error is displayed during the build of the plug-in:\r\n\r\n```\r\nFinal report:\r\n - PREFIX = /Users/armdn/.local/share/radare2/prefix\r\nrm -f *.dylib *.o asm_x86_udis.o asm_spc700.o asm_ba2.o asm_x86_olly.o ../arch/x86/ollyasm/disasm.o ../arch/x86/ollyasm/asmserv.o ../arch/x86/ollyasm/assembl.o asm_x86_tab.o asm_armthumb.o ../arch/arm/armthumb.o ../arch/ppc/ppc_disasm/ppc_disasm.o asm_ppc_disasm.o asm_psosvm.o ../arch/psosvm/vmas/vmas.o asm_m68k_net.o ../arch/m68k/m68k_disasm/m68k_disasm.o arch_blackfin.o asm_x86_bea.o ../arch/x86/bea/BeaEngine.o asm_msil.o asm_swf.o ../arch/swf/swfdis.o asm_vc4.o ../arch/vc4/vc4-dis.o ../arch/vc4/vc4-asm.o ../arch/vc4/vc4-desc.o ../arch/vc4/vc4-ibld.o ../arch/vc4/vc4-opc.o ../arch/vc4/cgen-bitset.o ../arch/vc4/cgen-dis.o ../arch/vc4/cgen-asm.o ../arch/vc4/cgen-opc.o ../arch/vc4/libvc4/eval.o ../arch/vc4/libvc4/decode.o ../arch/vc4/libvc4/vc4_decode.o ../arch/vc4/libvc4/vc4_arch.o ../arch/vc4/libvc4/vc4_util.o asm_mc6809.o asm_z80_nc.o asm_x86_zyan.o ../arch/x86/zyan/src/Decoder.o ../arch/x86/zyan/src/Formatter.o ../arch/x86/zyan/src/InstructionTable.o ../arch/x86/zyan/src/Mnemonic.o ../arch/x86/zyan/src/Register.o ../arch/x86/zyan/src/Utils.o ../arch/x86/zyan/src/Zydis.o asm_evm.o ../arch/evm/evm.o asm_atombios.o ../arch/atombios/atombios.o\r\ngcc -I/usr/local/Cellar/radare2/5.8.6/include/libr -g -I/shlr -I../../include -I../arch/ -I../arch/include -Wall -shared -fPIC  -DLIL_ENDIAN=1   -c -o ../arch/ppc/ppc_disasm/ppc_disasm.o ../arch/ppc/ppc_disasm/ppc_disasm.c\r\nclang: warning: argument unused during compilation: '-shared' [-Wunused-command-line-argument]\r\ngcc -I/usr/local/Cellar/radare2/5.8.6/include/libr -g -I/shlr -I../../include -I../arch/ -I../arch/include -Wall -shared -fPIC  -DLIL_ENDIAN=1   -c -o asm_ppc_disasm.o asm_ppc_disasm.c\r\nclang: warning: argument unused during compilation: '-shared' [-Wunused-command-line-argument]\r\nasm_ppc_disasm.c:13:33: error: unknown type name 'RAsmOp'; did you mean 'RAsm'?\r\nstatic int disassemble(RAsm *a, RAsmOp *aop, const ut8 *buf, int len) {\r\n                                ^~~~~~\r\n                                RAsm\r\n/usr/local/Cellar/radare2/5.8.6/include/libr/r_asm.h:66:3: note: 'RAsm' declared here\r\n} RAsm;\r\n  ^\r\nasm_ppc_disasm.c:29:22: error: no member named 'buf_asm' in 'struct r_asm_t'\r\n        r_strbuf_set (&aop->buf_asm, res);\r\n                       ~~~  ^\r\nasm_ppc_disasm.c:30:7: error: no member named 'size' in 'struct r_asm_t'\r\n        aop->size = 4;\r\n        ~~~  ^\r\nasm_ppc_disasm.c:31:14: error: no member named 'size' in 'struct r_asm_t'\r\n        return aop->size;\r\n               ~~~  ^\r\nasm_ppc_disasm.c:34:1: error: unknown type name 'RAsmPlugin'\r\nRAsmPlugin r_asm_plugin_ppc_disasm = {\r\n^\r\n5 errors generated.\r\nmake: *** [asm_ppc_disasm.o] Error 1\r\n```\r\n\r\n## Test\r\n\r\nOn macOS 10.14.6 Mojave. radare2 installed via homebrew;\r\n\r\nWith command: `r2pm -i ppcdisasm`\r\n\r\nAlways reproducible. Tried on different machines with same OS and installation.\r\n","comments":[{"id":"IC_kwDOAEpMrs5dO9ep","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"R2 ships native support for ppc theres no need to install this old and unmaintained plugin. But in any case. This is an issue in the extras repository where this plugin lives. \r\n\r\nThe reason why it doesnt compile is because its implemented as an asm plugin which was deprectaed a year ago. Now we only do arch plugins. Its easy to translate them","createdAt":"2023-05-26T10:48:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21782#issuecomment-1564202921","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5dQ_bO","author":{"login":"armdn"},"authorAssociation":"NONE","body":"Oh, thank you!","createdAt":"2023-05-26T17:58:55Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21782#issuecomment-1564735182","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5kMncb","author":{"login":"upintheairsheep"},"authorAssociation":"NONE","body":"Did you post about the AppleInternal apps on BetaArchive?","createdAt":"2023-08-16T17:41:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21782#issuecomment-1681028891","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5t84q1","author":{"login":"riptl"},"authorAssociation":"CONTRIBUTOR","body":"IMO This issue should be closed (and re-opened in the plugin repo) ","createdAt":"2023-12-07T06:11:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21782#issuecomment-1844677301","viewerDidAuthor":false}],"number":21782,"title":"PowerPC plugin error during building"},{"body":"## Environment\r\n\r\n```\r\nMon May 22 08:29:00 AM 2023\r\nradare2 5.5.0 0 @ linux-x86-64 git.5.5.0\r\nLinux x86_64\r\n```\r\n\r\nWhen I want to check the appearance of the map of heap a warning appears like this\r\n*Warning: Can't find glibc mapped in memory (see dm)*\r\n\r\n> [0x7fad1cf049c0]> pdf @ main\r\n            ; DATA XREF from entry0 @ 0x4010a4\r\nâ”Œ 188: int main (int argc, char **argv);\r\nâ”‚           ; var int64_t var_20h @ rbp-0x20\r\nâ”‚           ; var int64_t var_14h @ rbp-0x14\r\nâ”‚           ; var int64_t var_10h @ rbp-0x10\r\nâ”‚           ; var int64_t var_8h @ rbp-0x8\r\nâ”‚           ; arg int argc @ rdi\r\nâ”‚           ; arg char **argv @ rsi\r\nâ”‚           0x004011a2      55             push rbp\r\nâ”‚           0x004011a3      4889e5         mov rbp, rsp\r\nâ”‚           0x004011a6      4883ec20       sub rsp, 0x20\r\nâ”‚           0x004011aa      897dec         mov dword [var_14h], edi    ; argc\r\nâ”‚           0x004011ad      488975e0       mov qword [var_20h], rsi    ; argv\r\nâ”‚           0x004011b1      837dec01       cmp dword [var_14h], 1\r\nâ”‚       â”Œâ”€< 0x004011b5      7f19           jg 0x4011d0\r\nâ”‚       â”‚   0x004011b7      488d05c20e00.  lea rax, str.Please_specify_an_argument_to_copy_:__ ; 0x402080 ; \"Please specify an argument to copy :-)\"\r\nâ”‚       â”‚   0x004011be      4889c7         mov rdi, rax\r\nâ”‚       â”‚   0x004011c1      e87afeffff     call sym.imp.puts           ; int puts(const char *s)\r\nâ”‚       â”‚   0x004011c6      bf01000000     mov edi, 1\r\nâ”‚       â”‚   0x004011cb      e8b0feffff     call sym.imp.exit\r\nâ”‚       â””â”€> 0x004011d0      bf40000000     mov edi, 0x40               ; elf_phdr\r\nâ”‚           0x004011d5      e886feffff     call sym.imp.malloc         ;  void *malloc(size_t size)\r\nâ”‚           0x004011da      488945f8       mov qword [var_8h], rax\r\nâ”‚           0x004011de      bf40000000     mov edi, 0x40               ; elf_phdr\r\nâ”‚           0x004011e3      e878feffff     call sym.imp.malloc         ;  void *malloc(size_t size)\r\nâ”‚           0x004011e8      488945f0       mov qword [var_10h], rax\r\nâ”‚           0x004011ec      488b45f0       mov rax, qword [var_10h]\r\nâ”‚           0x004011f0      488d1595ffff.  lea rdx, [sym.nowinner]     ; 0x40118c\r\nâ”‚           0x004011f7      488910         mov qword [rax], rdx\r\nâ”‚           0x004011fa      488b45e0       mov rax, qword [var_20h]\r\nâ”‚           0x004011fe      4883c008       add rax, 8\r\nâ”‚           0x00401202      488b10         mov rdx, qword [rax]\r\nâ”‚           0x00401205      488b45f8       mov rax, qword [var_8h]\r\nâ”‚           0x00401209      4889d6         mov rsi, rdx\r\nâ”‚           0x0040120c      4889c7         mov rdi, rax\r\nâ”‚           0x0040120f      e81cfeffff     call sym.imp.strcpy         ; char *strcpy(char *dest, const char *src)\r\nâ”‚           0x00401214      488b45f0       mov rax, qword [var_10h]\r\nâ”‚           0x00401218      488b08         mov rcx, qword [rax]\r\nâ”‚           0x0040121b      488b55f0       mov rdx, qword [var_10h]\r\nâ”‚           0x0040121f      488b45f8       mov rax, qword [var_8h]\r\nâ”‚           0x00401223      4889c6         mov rsi, rax\r\nâ”‚           0x00401226      488d057b0e00.  lea rax, str.data_is_at__p__fp_is_at__p__will_be_calling__p_n ; 0x4020a8 ; \"data is at %p, fp is at %p, will be calling %p\\n\"\r\nâ”‚           0x0040122d      4889c7         mov rdi, rax\r\nâ”‚           0x00401230      b800000000     mov eax, 0\r\nâ”‚           0x00401235      e816feffff     call sym.imp.printf         ; int printf(const char *format)\r\nâ”‚           0x0040123a      488b05ff2d00.  mov rax, qword [obj.stdout] ; obj.__TMC_END__\r\nâ”‚                                                                      ; [0x404040:8]=0\r\nâ”‚           0x00401241      4889c7         mov rdi, rax\r\nâ”‚           0x00401244      e827feffff     call sym.imp.fflush         ; int fflush(FILE *stream)\r\nâ”‚           0x00401249      488b45f0       mov rax, qword [var_10h]\r\nâ”‚           0x0040124d      488b10         mov rdx, qword [rax]\r\nâ”‚           0x00401250      b800000000     mov eax, 0\r\nâ”‚           0x00401255      ffd2           call rdx\r\nâ”‚           0x00401257      b800000000     mov eax, 0\r\nâ”‚           0x0040125c      c9             leave\r\nâ””           0x0040125d      c3             ret\r\n[0x7fad1cf049c0]> db 0x00401214\r\n[0x7fad1cf049c0]> dc\r\nhit breakpoint at: 0x401214\r\n[0x00401214]> dmh\r\nWarning: Can't find glibc mapped in memory (see dm)\r\n[0x00401214]> dm\r\n0x0000000000400000 - 0x0000000000401000 - usr     4K s r-- /home/sebastian/Downloads/heap0/pwn-32 /home/sebastian/Downloads/heap0/pwn-32 ; segment.ehdr\r\n0x0000000000401000 - 0x0000000000402000 * usr     4K s r-x /home/sebastian/Downloads/heap0/pwn-32 /home/sebastian/Downloads/heap0/pwn-32 ; map._home_sebastian_Downloads_heap0_pwn_32.r_x\r\n0x0000000000402000 - 0x0000000000403000 - usr     4K s r-- /home/sebastian/Downloads/heap0/pwn-32 /home/sebastian/Downloads/heap0/pwn-32 ; map._home_sebastian_Downloads_heap0_pwn_32.r__\r\n0x0000000000403000 - 0x0000000000404000 - usr     4K s r-- /home/sebastian/Downloads/heap0/pwn-32 /home/sebastian/Downloads/heap0/pwn-32 ; map._home_sebastian_Downloads_heap0_pwn_32.rw_\r\n0x0000000000404000 - 0x0000000000405000 - usr     4K s rw- /home/sebastian/Downloads/heap0/pwn-32 /home/sebastian/Downloads/heap0/pwn-32 ; reloc.strcpy\r\n0x000000000135d000 - 0x000000000137e000 - usr   132K s rw- [heap] [heap]\r\n0x00007fad1cced000 - 0x00007fad1ccf0000 - usr    12K s rw- unk0 unk0\r\n0x00007fad1ccf0000 - 0x00007fad1cd16000 - usr   152K s r-- /usr/lib/x86_64-linux-gnu/libc.so.6 /usr/lib/x86_64-linux-gnu/libc.so.6\r\n0x00007fad1cd16000 - 0x00007fad1ce6b000 - usr   1.3M s r-x /usr/lib/x86_64-linux-gnu/libc.so.6 /usr/lib/x86_64-linux-gnu/libc.so.6\r\n0x00007fad1ce6b000 - 0x00007fad1cebe000 - usr   332K s r-- /usr/lib/x86_64-linux-gnu/libc.so.6 /usr/lib/x86_64-linux-gnu/libc.so.6\r\n0x00007fad1cebe000 - 0x00007fad1cec2000 - usr    16K s r-- /usr/lib/x86_64-linux-gnu/libc.so.6 /usr/lib/x86_64-linux-gnu/libc.so.6\r\n0x00007fad1cec2000 - 0x00007fad1cec4000 - usr     8K s rw- /usr/lib/x86_64-linux-gnu/libc.so.6 /usr/lib/x86_64-linux-gnu/libc.so.6\r\n0x00007fad1cec4000 - 0x00007fad1ced1000 - usr    52K s rw- unk1 unk1\r\n0x00007fad1cee8000 - 0x00007fad1ceea000 - usr     8K s rw- unk2 unk2\r\n0x00007fad1ceea000 - 0x00007fad1ceeb000 - usr     4K s r-- /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2 /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2\r\n0x00007fad1ceeb000 - 0x00007fad1cf10000 - usr   148K s r-x /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2 /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2 ; map._usr_lib_x86_64_linux_gnu_ld_linux_x86_64.so.2.r_x\r\n0x00007fad1cf10000 - 0x00007fad1cf1a000 - usr    40K s r-- /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2 /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2 ; map._usr_lib_x86_64_linux_gnu_ld_linux_x86_64.so.2.r__\r\n0x00007fad1cf1a000 - 0x00007fad1cf1c000 - usr     8K s r-- /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2 /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2 ; map._usr_lib_x86_64_linux_gnu_ld_linux_x86_64.so.2.rw_\r\n0x00007fad1cf1c000 - 0x00007fad1cf1e000 - usr     8K s rw- /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2 /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2\r\n0x00007fffb184c000 - 0x00007fffb186d000 - usr   132K s rw- [stack] [stack] ; map._stack_.rw_\r\n0x00007fffb1920000 - 0x00007fffb1924000 - usr    16K s r-- [vvar] [vvar] ; map._vvar_.r__\r\n0x00007fffb1924000 - 0x00007fffb1926000 - usr     8K s r-x [vdso] [vdso] ; map._vdso_.r_x\r\n[0x00401214]> \r\n","comments":[{"id":"IC_kwDOAEpMrs5cz_GY","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Is there any specific reason to use a 2 year old version of radare?","createdAt":"2023-05-22T12:26:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21762#issuecomment-1557131672","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5c01iR","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"Yes, I agree with pancake. Do `git clone https://github.com/radareorg/radare2; cd radare2; sh sys/install.sh`\r\n\r\nthen try with:\r\n\r\n```\r\ndmhg `dmha~main_arena[2]`\r\n```\r\n\r\nThen could you tell us if you still have a bug please?\r\n","createdAt":"2023-05-22T14:47:25Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21762#issuecomment-1557354641","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5c01xC","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"@trufae probably a package from a Linux distro.","createdAt":"2023-05-22T14:48:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21762#issuecomment-1557355586","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5c9R9b","author":{"login":"azrielpamungkas"},"authorAssociation":"NONE","body":"> Yes, I agree with pancake. Do `git clone https://github.com/radareorg/radare2; cd radare2; sh sys/install.sh`\r\n> \r\n> then try with:\r\n> \r\n> ```\r\n> dmhg `dmha~main_arena[2]`\r\n> ```\r\n> \r\n> Then could you tell us if you still have a bug please?\r\n\r\nI don't know if this is still a bug or something is wrong with me, let's compare the results with this\r\n![Screenshot_2023-05-23_21_37_35](https://github.com/radareorg/radare2/assets/100214154/71bbeacb-a8a5-41ed-9a00-c81eee5d8c4a)\r\n","createdAt":"2023-05-23T14:42:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21762#issuecomment-1559568219","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5c9iol","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Is this output with the latest r2? anyway it's been like 5 years since someone had a look at this code, and libc changes the heap algorithm every 1-2 years, so its expected to break, shuold be easy to fix but i cant handle more unrelated paralel development right now, if you want to dig into the code to fix it i can guide you","createdAt":"2023-05-23T15:09:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21762#issuecomment-1559636517","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5c9naj","author":{"login":"azrielpamungkas"},"authorAssociation":"NONE","body":"yes, the output is from the latest r2. Please provide me with a simple guide to fix it, and I will do my best to resolve the issue.","createdAt":"2023-05-23T15:21:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21762#issuecomment-1559656099","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5dD6GP","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"(sorry for the delay, i was busy re-reading the code and cleaning it up a bit for giving you an explanation)\r\n\r\nCool! Thanks for confirming on master. Let me give you some pointers in the source to locate all the code of interest:\r\n\r\nYou can find the structs used by the heap allocator from gnu libc in:\r\n* https://github.com/bminor/glibc/blob/glibc-2.28/malloc/malloc.c#L1658\r\n\r\nIn r2, the dmh commands are handled in libr/core/cmd_debug.c you can /search for `\"dmh\"` (with the quotes included to find the code that implements the handler. (spoiler: it's `r_debug_heap`). which is implemented in the same file (despite it should be moved to r_debug at some point.\r\n\r\n* This function switches between glibc and jemalloc (or windows). But i have added initial macos support now.\r\n* You can check the code that the bug should be in dmh_glibc.c\r\n\r\nThis code is glibc specific, but i would like to make it generic, but didnt wanted to put any pressure to the contributors at the time, i will do the refactoring when everything is in shape again, for now i would say that its important to get it working for latests glibc, and maybe add tests, but this is hard because requires shipping old linuxes on the CI and so on.\r\n\r\nanyway, the dmh command does the following\r\n\r\n* find glibc in memory (uses dm - debugger maps) to find the base address)\r\n* runs rabin2 (using the api) on the associated file from disk to find the symbols\r\n* when the global heap arena symbol is resolved then it walks the pointers\r\n* the GHT() macro allows to implement the same code for 32 and 64bit\r\n\r\nSo having this in mind\r\n\r\n* use eprintf statements to follow the calls and trace the data\r\n* create simple programs and oneliners with r2 for quickly testing\r\n* read code from GEF and GLIBC to follow the structs\r\n\r\nNotes for my future self:\r\n\r\n* The macOS allocator support zones, which is multiple isolated heap arenas for a single program\r\n* ^ i will take this as inspiration for the generic api in the upcoming release to unify all those implementations\r\n* this code should be independent from the debugger, because it must work on static or with remote debugging\r\n* standarizing with common apis/structs will make it easier to export to JSON and unify the output for all heap implementations","createdAt":"2023-05-24T14:49:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21762#issuecomment-1561305487","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5dtlSM","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"any other question?","createdAt":"2023-06-01T15:04:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21762#issuecomment-1572230284","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5gqK88","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"ping?","createdAt":"2023-07-05T12:33:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21762#issuecomment-1621667644","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5gq0gZ","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"me? I was waiting as well lol.","createdAt":"2023-07-05T14:08:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21762#issuecomment-1621837849","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs54MrLH","author":{"login":"koyaan"},"authorAssociation":"CONTRIBUTOR","body":"@gogo2464  Please try again from git if still bugged, provide binary + glibc version used","createdAt":"2024-03-23T19:57:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21762#issuecomment-2016588487","viewerDidAuthor":false}],"number":21762,"title":"Display map of heap is not showing"},{"body":"## Environment\r\n\r\n```sh\r\n# copypaste this script into your shell and replace it with the output\r\ndate\r\nr2 -v\r\nuname -ms\r\n```\r\n\r\n```\r\nSat May  6 18:44:13 CST 2023\r\nradare2 5.8.6 30523 @ linux-x86-64\r\nbirth: git.5.8.6 2023-05-06__09:46:18\r\ncommit: 3c9ad151adf52658d814f56b9bb80bc9231da36b\r\noptions: gpl -O? checks=2\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\n`zo` failed to load some signatures(unfortunately they are just what I'm interested in).\r\n\r\n## Test\r\n\r\nGenerate signature file:\r\n```\r\nzhichyu@ck98:~/grpc_whl/notstripped$ ls -l 1.44.0-cygrpc.cpython-310-x86_64-linux-gnu.so\r\n-rwxr-xr-x 1 zhichyu eoi 200942120 Mar 19 11:36 1.44.0-cygrpc.cpython-310-x86_64-linux-gnu.so\r\nzhichyu@ck98:~/grpc_whl/notstripped$ md5sum 1.44.0-cygrpc.cpython-310-x86_64-linux-gnu.so\r\n78427e7551ab6b78c549e5ee3cd8efc6  1.44.0-cygrpc.cpython-310-x86_64-linux-gnu.so\r\n\r\nzhichyu@ck98:~/grpc_whl/notstripped$ r2 1.44.0-cygrpc.cpython-310-x86_64-linux-gnu.so\r\nWARN: run r2 with -e bin.cache=true to fix relocations in disassembly\r\n -- Use /m to carve for known magic headers. speedup with search.\r\n[0x0007f2c0]> e zign.mangled=true;e anal.hasnext=true;afr;aac\r\n[0x0007f2c0]> zg\r\n[0x0007f2c0]> zos /data01/zhichyu/grpc_whl/notstripped/1.44.0-cygrpc.cpython-36m-x86_64-linux-gnu.so.sdb\r\n```\r\n\r\nLoad signature file:\r\n```\r\nzhichyu@ck98:~/grpc_whl/notstripped$ r2 1.44.0-cygrpc.cpython-310-x86_64-linux-gnu.so\r\n[0x0007f2c0]> zo /data01/zhichyu/grpc_whl/notstripped/1.44.0-cygrpc.cpython-36m-x86_64-linux-gnu.so.sdb\r\nWARN: Skipping signature with invalid key ()                                                                                                                                                                      \r\nERROR: cannot deserialize zign                                                                                                                                                                                    \r\nWARN: Skipping signature with invalid key (nager__HttpFilter____const__grpc_core__XdsRouteConfigR ()|N:_ZNKSt8_Rb_treeISsSt4pairIKSsN9grpc_core17XdsHttpFi)                                                       \r\nERROR: cannot deserialize zign                                                                                                                                                                                    \r\nWARN: Skipping signature with invalid key (01e884aadeff498b45204889c248d1ea4c39f277cd418b4500488b0c)                                                                                                              \r\nERROR: cannot deserialize zign                                                                                                                                                                                    \r\nWARN: Skipping signature with invalid key (igned_long__std::allocator_char__const_,sym.std::_Rb_tree_std::string__std::pair_std::string_co)                                                                       \r\nERROR: cannot deserialize zign                                                                                                                                                                                    \r\nWARN: Skipping signature with invalid key (84489e05b5d415c415d415e415fc30f1f00e843b5f3ff4989c4)                                                                                                                   \r\nERROR: cannot deserialize zign                                                                                                                                                                                    ```\r\n\r\nI've sent the the sample file `1.44.0-cygrpc.cpython-310-x86_64-linux-gnu.so` to [pancake@nopcode.org](mailto:pancake@nopcode.org) with title `sample file for radare2 #21718`.","comments":[{"id":"IC_kwDOAEpMrs5bqlp8","author":{"login":"yuzhichang"},"authorAssociation":"NONE","body":"Following patch print unexpected klen and vlen and advance `s->pos` accordingly:\r\n```\r\ndiff --git a/shlr/sdb/src/sdb.c b/shlr/sdb/src/sdb.c\r\nindex f7e744b694..1e2144cdcb 100644\r\n--- a/shlr/sdb/src/sdb.c\r\n+++ b/shlr/sdb/src/sdb.c\r\n@@ -982,6 +982,7 @@ SDB_API bool sdb_dump_dupnext(Sdb* s, char *key, char **value, int *_vlen) {\r\n        if (!cdb_getkvlen (&s->db, &klen, &vlen, s->pos)) {\r\n                return false;\r\n        }\r\n+       uint32_t sign_off = s->pos;\r\n        s->pos += 4;\r\n        if (klen < 1 || vlen < 1) {\r\n                return false;\r\n@@ -996,6 +997,9 @@ SDB_API bool sdb_dump_dupnext(Sdb* s, char *key, char **value, int *_vlen) {\r\n                                return 0;\r\n                        }\r\n                        key[klen] = 0;\r\n+               }else{\r\n+                       printf(\"Got unexpected klen %d at offset %x\\n\", klen, sign_off);\r\n+                       s->pos += klen;\r\n                }\r\n        }\r\n        if (value) {\r\n@@ -1011,6 +1015,9 @@ SDB_API bool sdb_dump_dupnext(Sdb* s, char *key, char **value, int *_vlen) {\r\n                                return false;\r\n                        }\r\n                        (*value)[vlen] = 0;\r\n+               }else{\r\n+                       printf(\"Got unexpected vlen %d at offset %x\\n\", vlen, sign_off);\r\n+                       s->pos += vlen;\r\n                }\r\n        }\r\n        return true;\r\n```\r\n\r\nWith the above patch, `zo` catches unexpected klen  and vlen, and continue loading signatures after that failed one.\r\n```\r\n[0x0007f2c0]> zo /data01/zhichyu/grpc_whl/notstripped/1.44.0-cygrpc.cpython-310-x86_64-linux-gnu.so.sdb\r\nGot unexpected klen 255 at offset d19c1  ********HERE!********\r\nWARN: Skipping signature with invalid key ()\r\nERROR: cannot deserialize zign\r\nERROR: Invalid types: ```void __cxa_throw (void *thrown_exception, struct std::type_info *tinfo, void *dest)``` in signatuer for zign|*|imp.__cxa_throw\r\nERROR: cannot deserialize zign\r\n```\r\n\r\nThe four bytes at offset 0xd19c1 of the sdb file is `FF 0E 18 00`:\r\n![image](https://user-images.githubusercontent.com/153784/236761916-81f1c269-b328-4025-8952-cce9fc8dd95f.png)\r\n\r\n@radare  Looks like radare cannot handle symbols longer than 254 bytes. However mangled long function name is common.","createdAt":"2023-05-08T07:31:11Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21718#issuecomment-1537890940","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5eXvaI","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Thanks for the patch. Now we entered into the abi breaking season. Can you submit a pr for that? The size limit will be removed too","createdAt":"2023-06-08T20:16:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21718#issuecomment-1583281800","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5egkfi","author":{"login":"yuzhichang"},"authorAssociation":"NONE","body":"Is it  appropriate to extend the size limit of symbol from 255 to 65535?\r\nOptimizing `zos` from O(n*n) to O(n) would be more important than this issue.","createdAt":"2023-06-10T10:12:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21718#issuecomment-1585596386","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5egwxw","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"More than defining a larger limit is about to use char* insyead of a fixed size. Its abi breaking season now so its time to do those changes :) the abidiff job is disabled. And yes other optimizations and the need to support mangled name storage will be done too. Agree perf is important here","createdAt":"2023-06-10T12:27:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21718#issuecomment-1585646704","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5qUU2S","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Ping?","createdAt":"2023-10-28T05:49:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21718#issuecomment-1783713170","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6PO8Sp","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Moving fed because enotime to chk as usual. Would be good if the person who filled the ticket could verify it because i think it should work","createdAt":"2024-10-09T18:44:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21718#issuecomment-2403058857","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6Ptxl9","author":{"login":"yuzhichang"},"authorAssociation":"NONE","body":"@trufae The latest `r2` still has the issue.\r\n![Screenshot_2024-10-14_20-46-34](https://github.com/user-attachments/assets/910838f1-c368-4f74-b669-3aaf1e3c57a1)\r\n","createdAt":"2024-10-14T12:48:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21718#issuecomment-2411141501","viewerDidAuthor":false}],"number":21718,"title":"cannot deserialize zign"},{"body":"There are different types of UUIDs, which depend on time or seeds, this fits wlel with the print time and hash algorithms command and features that may be useful also to generate unique IDs using r2 scripting for sample files or so\r\n\r\nhttps://www.uuidtools.com/uuid-versions-explained#version-1\r\n\r\nHere's a sample code we can use as inspiration https://github.com/rxi/uuid4\r\n\r\nExtracting the timestamp from a plaintext UUID can be also useful, having libuuid as testground https://gist.github.com/yoggy/4483031","comments":[{"id":"IC_kwDOAEpMrs5fu7ym","author":{"login":"dvertx"},"authorAssociation":"CONTRIBUTOR","body":"I like to give a try on this. Some pointers, as a starting point, to what files should be affected and such would be nice","createdAt":"2023-06-25T15:45:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21660#issuecomment-1606139046","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5fzkaX","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"That's just an idea at this point, the idea was to have a command in r2 (probably under the p command to print) unique identifiers. this can be useful for a variety of uses, but first we need to classify the concepts, and sources to generate them\r\n\r\n* timestamp (could be 4 byte/ 8 byte from memory)\r\n* random data (can be made from data too)\r\n\r\n* Version-1 is based on the current time and the MAC address for the computer or \"node\" generating the UUID.\r\n* version-2 is flawed and not much used, so probably no need to support\r\n* version3-5 uses  md5 or truncated sha1\r\n* hashed name+namespace strings, ..\r\n\r\nso i'm open to suggestions and discussions at this point :)","createdAt":"2023-06-26T12:19:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21660#issuecomment-1607354007","viewerDidAuthor":true}],"number":21660,"title":"UUID APIs and commands"},{"body":"## Environment\r\n\r\n```sh\r\n# copypaste this script into your shell and replace it with the output\r\n$ date\r\nTue Apr 11 09:06:36 PM CST 2023\r\n$ r2 -v\r\nradare2 5.8.5 30180 @ linux-x86-64 git.5.8.4-115-g9501a38638\r\ncommit: 9501a38638a7a6bfdfaf2af6fc47e81e292f4029 build: 2023-04-11__15:21:08\r\n$ uname -ms\r\nLinux x86_64\r\n```\r\n\r\n\r\n## Description\r\nCondition: stop at `syscall` after `dts+` and `-i foo.script` seems no use\r\n\r\nExpected: can record the `syscall` and can use `-i` to load script\r\n<!-- Explain what's the issue and what would you expect to see -->\r\n\r\n## Test\r\n1- I tried the same as this official [video](https://asciinema.org/a/12020) but failed. Do I miss some key steps?\r\n<!-- Steps to reproduce the issue and provide files/links/images/.. -->\r\n```bash\r\n[root ~]$ cat ~/.radare2rc                          \r\ne bin.cache=true\r\n[root ~]$ cat /home/czg/r2_script/test.r2s\r\npx 10\r\npD 10\r\n[root ~]$ r2 /bin/ls -i /home/czg/r2_script/test.r2s\r\nWARN: Don't use -B on unknown files. Consider using -m\r\n -- Use +,-,*,/ to change the size of the block\r\n[0x00005f70]>\r\n```\r\n\r\n2- is `syscall` record a little unrealistic and thorny ? (gdb can't record tested with 13.1 ver) Please tell me if my thoughts are wrong.\r\n\r\nBest regards.","comments":[{"id":"IC_kwDOAEpMrs5ZmzQV","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"You are not suposed to pass flags after the filename. R2 doesnt uses the overengineered gnu getopt thing","createdAt":"2023-04-11T13:22:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21585#issuecomment-1503343637","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Zp42D","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Use \"dcs\" to continue until syscall","createdAt":"2023-04-11T21:51:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21585#issuecomment-1504152963","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Zq8IH","author":{"login":"sci-42ver"},"authorAssociation":"NONE","body":"Sorry, I didn't notice the parameter order in `r2 -h`\r\n\r\n1- if I run `r2  -i /home/czg/r2_script/test.r2s /bin/ls` it shows `r2slides` which I don't find references in book and source codes. (`~/.radare2rc` same with shown above ).\r\n\r\nwhen I read official book more carefully, changing file suffix to `r2` works. \r\n\r\nso could you tell me does the source code has suffix detection and where it is. Besides , what does `r2slides` do (does it similar to slides aming to representation on conferences like r2cons) ? \r\n\r\n```bash\r\n[root ~]$ r2  -i /home/czg/r2_script/test.r2s /bin/ls\r\n# after clearing screen\r\n [r2slides] [page:0/0]\r\n     px 10\r\n     pD 10\r\n```\r\n\r\n2- after searching `syscall` in `?*~...` and `e??~syscall`, I modified `~/.radare2rc` to skipping all syscall when recording with `dts+`, but seems no such option. And whether `dbg.aftersyscall` is true or false, `dcs` would always stop execution after the syscall is executed\r\n\r\ntemporarily modified `~/.radare2rc` (here `cmd.onsyscall` has one small delay when running)\r\n```bash\r\ne cmd.onsyscall=dc\r\ne dbg.aftersyscall=false\r\n```\r\n\r\nrunning result\r\n```bash\r\n[0x7fdb7e32eed0]> e dbg.aftersyscall=true;dcs;pd-- 2;dr rip\r\nINFO: Running child until next syscall\r\nINFO: --> SN 0x7fdb7e33408b syscall 12 brk (0x0)\r\n\r\n            0x7fdb7e32a398      b89e000000     mov eax, 0x9e           ; 158 ; moves data from src to dst ; rax=0x9e\r\n            0x7fdb7e32a39d      0f05           syscall                 ; fast system call ; 158 = arch_prctl (0x00003001, 0x7ffed205f8a0, 0x7fdb7e32e800)\r\n            0x7fdb7e32a39f      4885c0         test rax, rax           ; set eflags after comparing two registers (AF, CF, OF, PF, SF, ZF) ; zf=0x0 ; pf=0x0 ; sf=0x1 ; cf=0x0 ; of=0x0\r\n        â”Œâ”€< 0x7fdb7e32a3a2      0f84b0010000   je 0x7fdb7e32a558       ; jump short if equal (zf=1) ; unlikely\r\n0x7fdb7e32a39f\r\n[0x7fdb7e32a39f]> e dbg.aftersyscall=false;dcs;pd-- 2;dr rip\r\nINFO: Running child until next syscall\r\nINFO: --> SN 0x7fdb7e335177 syscall 9 mmap (0x0 0x2000 0x3 0x7fdb7e335177 0xffffffff 0x0)\r\n\r\n            0x7fdb7e334fca      bf9cffffff     mov edi, 0xffffff9c     ; 4294967196 ; moves data from src to dst ; rdi=0xffffff9c\r\n            0x7fdb7e334fcf      0f05           syscall                 ; fast system call ; 257 = openat (0xffffff9c, 0x7fdb7e312070, 0x00080000, 0x7fdb7e334fd1)\r\n            0x7fdb7e334fd1      483d00f0ffff   cmp rax, 0xfffffffffffff000 ; compare two operands ; zf=0x0 ; cf=0x1 ; pf=0x1 ; sf=0x0 ; of=0x0 ; af=0x0\r\n        â”Œâ”€< 0x7fdb7e334fd7      772f           ja 0x7fdb7e335008       ; jump short if above (cf=0 and zf=0) ; unlikely\r\n0x7fdb7e334fd1\r\n```","createdAt":"2023-04-12T02:04:04Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21585#issuecomment-1504428551","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5ZtSNw","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"r2s is the extension for r2 slides. so its expected that it loads the slides. the extension for r2 scripts is just 'r2', maybe thats confusing and we can use a different file extension for r2 slides, but thats how it works and thats expected behaviour.\r\n\r\nThe book is very unmaintained, and this feature was added 2 years ago and presented in 3 conferences. check my fosdem talk, i also published the slides if you are interested in using it.\r\n\r\nSo if I understand properly your last message, syscall tracing is working, right?","createdAt":"2023-04-12T10:32:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21585#issuecomment-1505043312","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Z0PPc","author":{"login":"sci-42ver"},"authorAssociation":"NONE","body":"Thanks for replies.\r\n> r2s is the extension for r2 slides. so its expected that it loads the slides. the extension for r2 scripts is just 'r2', maybe thats confusing and we can use a different file extension for r2 slides, but thats how it works and thats expected behaviour.\r\n> \r\n> The book is very unmaintained, and this feature was added 2 years ago and presented in 3 conferences. check my fosdem talk, i also published the slides if you are interested in using it.\r\n\r\nOh, I saw your 2023 fosdem talk after seeing your comment , slides rendered well. But maybe temporarily not needed for my daily development. Thanks.\r\n> So if I understand properly your last message, syscall tracing is working, right?\r\n\r\nYes, it can record syscall and also AVX instruction. (In gdb 13.1, both seem can't work)\r\n\r\nAnd I want to know if `r2` can skip all syscall temporarily when running `dcu foo` after `dts+`. I tried two parameter tweaks in above comment, but fails. Hope you can help me with this question.","createdAt":"2023-04-13T12:18:06Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21585#issuecomment-1506866140","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5Z0VTO","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Uhm, just use 'dc' instead of 'dcs' if you want to continue without stopping on syscalls. not sure if im understanding well the problem","createdAt":"2023-04-13T12:37:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21585#issuecomment-1506890958","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Z0jH7","author":{"login":"sci-42ver"},"authorAssociation":"NONE","body":"It seems not work\r\n```bash\r\n$ r2 -NAdq -c \"db main;dts+;db;dc;pd-- 2\" /mnt/ubuntu/home/czg/csapp3e/asm/prog         \r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\nINFO: Analyze function calls (aac)\r\nINFO: Analyze len bytes of instructions for references (aar)\r\nINFO: Finding and parsing C++ vtables (avrr)\r\nINFO: Skipping type matching analysis in debugger mode (aaft)\r\nINFO: Propagate noreturn information (aanr)\r\nINFO: Integrate dwarf function information\r\nINFO: Use -AA or aaaa to perform additional experimental analysis\r\nINFO: Reading 8192 byte(s) from 0x00403000\r\nINFO: Reading 16384 byte(s) from 0x7f66c46fa000\r\nINFO: Reading 135168 byte(s) from 0x7ffcdc3e2000\r\n0x00401136 - 0x00401137 1 --x sw break enabled valid cmd=\"\" cond=\"\" name=\"main\" module=\"/mnt/ubuntu/home/czg/csapp3e/asm/prog\"\r\n            0x7f66c46e9084      b80c000000     mov eax, 0xc            ; 12\r\n            0x7f66c46e9089      0f05           syscall\r\n            0x7f66c46e908b      488905e64101.  mov qword [0x7f66c46fd278], rax ; [0x7f66c46fd278:8]=0\r\n            0x7f66c46e9092      4839f8         cmp rax, rdi\r\nfree(): invalid pointer\r\nzsh: IOT instruction (core dumped)  r2 -NAdq -c \"db main;dts+;db;dc;pd-- 2\" /mnt/ubuntu/home/czg/csapp3e/asm/prog\r\n```\r\n\r\nCould I ask where to get how to use `r2` better more quickly since the book is not well maintained ?\r\np.s. I also found r2 has one [r2wiki having some good resources](https://r2wiki.readthedocs.io/en/latest/home/tips/) which has been archived although. Also with reverseengineering stackexchange and other blogs (But maybe not systematic)","createdAt":"2023-04-13T13:15:40Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21585#issuecomment-1506947579","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5Z1dPw","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Personally I would say that it's better to ask in the chat (telegram / matrix / discord / irc), i dont have time to update the book but im very active in the chat.\r\n\r\ni fixed the crash you reported btw, thanks!\r\n\r\n","createdAt":"2023-04-13T15:36:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21585#issuecomment-1507185648","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Z95Me","author":{"login":"sci-42ver"},"authorAssociation":"NONE","body":"thanks for your help , I would try asking in community chat then.","createdAt":"2023-04-14T23:44:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21585#issuecomment-1509397278","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5aacgR","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"That's the oneliner you want:\r\n\r\n`r2 -c â€œdcu main;e dbg.trace=true;dsu -1;dtâ€ -d /bin/ls`\r\n\r\nSome comments below:\r\n\r\n* The dts+ command is used for stepback and dumps/records the state of memory in disk for every step which is not what you want\r\n* dbg.swstep is causing an stack exhaustion if you try to run the whole program ( i need to fix this )\r\n* dsu -1 is the only way you have to perform step until the program is gone. a helper command under `dc` would be easier to spot\r\n* You cant pass flags after the -d\r\n* No need to analyze the program or avoid home scripts (-NA)\r\n* dt command doesnt have table or json support, shuold be easy to implement\r\n\r\nAlso, bear in mind that you can't use `dtd` if you run the traces until the program dies, because there will be no memory allocated and you cant disassemble . better to continue until a specific address or exit syscall or so.\r\n\r\nanother thing is that you are tracing EVERYTHING so you probably want to see other vars like dbg.trace.inrange or dbg.trace.libs to avoid recording instructions from libraries or from sections of the binary that you dont need.\r\n","createdAt":"2023-04-20T20:06:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21585#issuecomment-1516881937","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5aahsC","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I have implemented the dtj command to print the traces in json format","createdAt":"2023-04-20T20:26:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21585#issuecomment-1516903170","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5vJ9Jp","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"@czg-sci-42ver you are confused with the term plugin.\r\n\r\nit is a debug plugin.\r\n\r\nlist plugin with `radare2 -L` and then choose one for example with `radare2 -d windbg://file.exe`. should work.","createdAt":"2023-12-20T17:40:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21585#issuecomment-1864880745","viewerDidAuthor":false}],"number":21585,"title":"can't record the `syscall` and seems not to  use `-i` to load script"},{"body":"As mentioned in https://github.com/radareorg/radare2/issues/21536#issuecomment-1489587530 by @yuzhichang\r\n\r\nThe signature name is converted from the mangled C++ function name. However it's not possible to infer the mangled C++ function name from the signature name. This cause a minor difficulty to identify which function of a signature is for. I would prefer use the mangled one as the signature name, use the demangled one as signature types.\r\n\r\nFor example,\r\n\r\n```\r\nzhichyu@ck98:~/grpc_whl$ nm notstripped/1.41.1-cygrpc.cpython-310-x86_64-linux-gnu.so | grep grpc_chttp2_list_pop_writing_stream\r\n000000000017ff10 t _Z35grpc_chttp2_list_pop_writing_streamP21grpc_chttp2_transportPP18grpc_chttp2_stream\r\nzhichyu@ck98:~/grpc_whl$ c++filt _Z35grpc_chttp2_list_pop_writing_streamP21grpc_chttp2_transportPP18grpc_chttp2_stream\r\ngrpc_chttp2_list_pop_writing_stream(grpc_chttp2_transport*, grpc_chttp2_stream**)\r\nThe signature for this function is:\r\n\r\n    {\r\n        \"addr\": 1572624,\r\n        \"name\": \"dbg.grpc_chttp2_list_pop_writing_stream_grpc_chttp2_transport__grpc_chttp2_stream_\",\r\n        \"next\": \"dbg.grpc_chttp2_list_add_waiting_for_concurrency(grpc_chttp2_transport*, grpc_chttp2_stream*)\",\r\n        \"types\": \"void dbg.grpc_chttp2_list_pop_writing_stream_grpc_chttp2_transport__grpc_chttp2_stream_ ()\",\r\n...\r\n    }\r\n```","comments":[{"id":"IC_kwDOAEpMrs5ZeelL","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I have added `zign.mangled` eval var (disabled by default) and added a test for this. the symbol names are not demanlged when applied later. so this must be done later after some more testing. can you please test it and confirm the behaviour is correct for you?\r\n\r\nthank you!","createdAt":"2023-04-09T16:08:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21546#issuecomment-1501161803","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5ZfGQ3","author":{"login":"yuzhichang"},"authorAssociation":"NONE","body":"@radare With `e zign.mangled=true`, `zg` hangs, cost 100% CPU, and the `RES` becomes larger and larger.\r\n\r\n```\r\nMon Apr 10 10:49:46 AM CST 2023\r\nradare2 5.8.5 30228 @ linux-x86-64 git.5.8.4-111-g4968d69f18\r\ncommit: 4968d69f1848c2f9f2333d649a845009b59ba2a7 build: 2023-04-10__09:53:17\r\nLinux x86_64\r\n```\r\n\r\nThe so is `notstripped/1.41.1-cygrpc.cpython-310-x86_64-linux-gnu.so`.\r\n\r\n`perf record` output:\r\n```\r\n-   41.02%     0.00%  radare2  [.] __libc_start_call_main                          â–’\r\n     __libc_start_call_main                                                        â–’\r\n     main                                                                          â—†\r\n     r_main_radare2                                                                â–’\r\n     r_core_prompt_loop                                                            â–’\r\n     r_core_prompt_exec                                                            â–’\r\n     r_core_cmd                                                                    â–’\r\n     run_cmd_depth                                                                 â–’\r\n     r_core_cmd_subst                                                              â–’\r\n     r_core_cmd_subst_i                                                            â–’\r\n     r_cmd_call                                                                    â–’\r\n     cmd_zign                                                                      â–’\r\n     cmdAdd                                                                        â–’\r\n   + r_sign_all_functions                                                          â–’\r\n+   24.66%    18.08%  radare2  [.] _int_malloc                                     â–’\r\n+   15.43%    14.91%  radare2  [.] malloc_consolidate                              â–’\r\n```","createdAt":"2023-04-10T02:53:02Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21546#issuecomment-1501324343","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5Zfbec","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I dont think it hangs but it takes much more time because resolving symbols via rbin is o(n) and that bin have a lot of aymbols. To make it o(1) i need to break the abi or use globals. Can u try with a smaller reproducer? I plan to implement it propeely flr 5.9 where i can break the abi","createdAt":"2023-04-10T05:24:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21546#issuecomment-1501411228","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Zf-I5","author":{"login":"yuzhichang"},"authorAssociation":"NONE","body":"@trufae I confirm that  `e zign.mangled=true`, `zg` use the mangled one as the signature name.\r\nThanks for your help!","createdAt":"2023-04-10T08:33:01Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21546#issuecomment-1501553209","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5ZkaAD","author":{"login":"yuzhichang"},"authorAssociation":"NONE","body":"Update:  zg for `notstripped/1.41.1-cygrpc.cpython-310-x86_64-linux-gnu.so` cost ~116 minutes.","createdAt":"2023-04-11T05:41:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21546#issuecomment-1502715907","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5ZlbPv","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Yeah that's quite a lot of time because of the O(n) problem of finding symbols in a list. i'll have some time this week to cache that into a hashtable, but i would prefer to break abi and store the mangled name inside the Function struct instead","createdAt":"2023-04-11T09:25:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21546#issuecomment-1502983151","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5zczWe","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"All the mangling symbol naming logic has been wrapped into rbinname. This shoyld be enough to get this issue resolved. Can you give it a try again and see if the current behaviour works best for u? We have only one test about zignatures and mangling but as long as the code logic is stable now it should be good to add more tests and review the way it works","createdAt":"2024-02-10T08:23:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21546#issuecomment-1936930206","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5zmRia","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"@as0ler did a bunch of fixes in this logic, we should be adding more tests and verify everything works as intended now. can anyone do these tests?","createdAt":"2024-02-12T19:32:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21546#issuecomment-1939413146","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5z1xYZ","author":{"login":"yuzhichang"},"authorAssociation":"NONE","body":"@trufae I tested the revision `7552613e0959029f4bad5a3bd2e74e3f8932b337`, `e zign.mangled=true;e anal.hasnext=true;afr;aac;zg; zos 1.json` doesn't work as expected! A piece of 1.json is:\r\n```\r\n\"name\": \"sym.grpc_chttp2_list_pop_waiting_for_concurrency_grpc_chttp2_transport__grpc_chttp2_stream_\",\r\n\"next\": \"sym.grpc_chttp2_list_remove_waiting_for_concurrency_grpc_chttp2_transport__grpc_chttp2_stream_\",\r\n```\r\n\r\nWhat I expect is:\r\n```\r\n\"name\": \"sym._Z44grpc_chttp2_list_pop_waiting_for_concurrencyP21grpc_chttp2_transportPP18grpc_chttp2_stream\",\r\n\"next\": \"sym._Z47grpc_chttp2_list_remove_waiting_for_concurrencyP21grpc_chttp2_transportP18grpc_chttp2_stream\",\r\n\r\n```\r\n\r\n\r\n\r\n","createdAt":"2024-02-14T10:28:22Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21546#issuecomment-1943475737","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs53Ktw-","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"enotime to check this issue right now, i have many other urgent tickets and in theory it shuold not be needed to break ABI to fix it after the RBinName refactor. So i'm calling @as0ler in case he can take a look to fix it meanwhile. but im moving the ticket forward to not block the already delayed release.\r\n\r\nsorry for the slow timings","createdAt":"2024-03-15T09:49:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21546#issuecomment-1999297598","viewerDidAuthor":true}],"number":21546,"title":"Use mangled symbol names for zignatures"},{"body":"![photo_2023-03-23 18 42 33](https://user-images.githubusercontent.com/6431515/227294555-1e356f41-dddd-4283-8c5e-a5825c1fbf72.jpeg)\r\n\r\nthe bin used here is from the testsuite","comments":[],"number":21516,"title":"aab causes some functions to have 0 bbs, or not, but its not correct"},{"body":"## Environment\r\n\r\n```sh\r\nSun Mar 19 01:22:53 PM +00 2023\r\nradare2 5.8.5 1 @ linux-x86-64 git.5.8.5\r\ncommit: 8527abff556297080539e47f7da88c14183af90e build: 2023-03-16__17:22:42\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nIn previous versions, I used to use ``ddd`` to dynamically change the fd that I was first assigning with ``dor`` to ``stdin``, this way:\r\n\r\n```\r\ndor stdin=input1\r\ndoo\r\ndd input2\r\nddd 3 0\r\n```\r\n\r\nHowever, it seems now to constantly raise an error, regardless of the debugged program or of the passed file:\r\n\r\n```\r\nERROR: r_debug_execute: Cannot get stack pointer\r\nERROR: Failed to execute code\r\n```\r\n\r\n## Test\r\n\r\nYou can reproduce it by using ``ddd`` during the debug of a program.","comments":[{"id":"IC_kwDOAEpMrs5YF7Nb","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"half fixed in here https://github.com/radareorg/radare2/pull/21501 still looking into solving the reamining bug to close this ticket. thanks for reporting","createdAt":"2023-03-21T14:32:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21496#issuecomment-1477948251","viewerDidAuthor":true}],"number":21496,"title":"File descriptors management broken"},{"body":"Version: radare2-5.8.2-1\r\n\r\nWhen debugging with the tracing enabled, the instruction pointer reaches somewhere in libc when stepping inside/over a function.\r\nBoth for imported and static functions.\r\n\r\n## How to reproduce?\r\n1. use dts+ to start tracing session at an instruction.\r\n2. step over a function using dso or pressing F8 in visual mode.\r\n3. The instruction pointer reaches somewhere in libc.\r\n\r\n","comments":[],"number":21494,"title":"Weird issue with reverse debugging"},{"body":"## Environment\r\n\r\n```sh\r\n$ radare2 -v\r\nradare2 5.8.3 30097 @ linux-x86-64 git.5.8.2-259-g4e43e320cd\r\ncommit: 4e43e320cd4d19b8848ce117db41d8c10dbe4c5c build: 2023-03-12__21:36:21\r\n\r\n$ uname -ms\r\nLinux x86_64\r\n```\r\n\r\n\r\n\r\n## Description\r\nI was reverse engineering an hash algorithm. Then I decided to copy and past code in order to recompile and document this part of code.\r\n\r\nI decided to use nasm with:\r\n\r\n```\r\nnasm -f elf64 decomp.asm -g -O0\r\nld -o out -dynamic-linker /lib64/ld-linux-x86-64.so.2 -lc decomp.o -O0\r\n```\r\n\r\nsadly nasm has rised some errors. Including the xmmword unrecognized.\r\n\r\nSo I want to do 3 stuff:\r\n\r\n1-replace `xmmword` with `oword`.\r\n2-make radare2 more nasm compliant to ensure there is no bug.\r\n3-use nasm to compare with r2 output for testing as I did with 8051.\r\n\r\nDO you agree with the first point?","comments":[{"id":"IC_kwDOAEpMrs5X1Q9w","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"so you want to add/have xmm instructions supported in the x86.nz assembler? yeah that sounds good to me","createdAt":"2023-03-17T10:03:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21492#issuecomment-1473580912","viewerDidAuthor":true}],"number":21492,"title":"`movdqa xmm12, oword [inputA]` unexpectedly assembled as `movdqa xmm12, xmmword [obj.inputA]` in x86_64"},{"body":"## Description\r\n\r\nIn the [radare2 snap version](https://github.com/radareorg/radare2-snap) the installation paths changes on every build install because it is using the classic confinement and the actual installed path changes on runtime.\r\n\r\nCurrently the following environment variables are set to address this issue:\r\n```yaml\r\nenvironment:\r\n  R2_LIBR_PLUGINS: \"$SNAP/usr/lib/radare2/$SNAP_VERSION\"\r\n  R2_MAGICPATH: \"$SNAP/usr/share/radare2/$SNAP_VERSION/magic\"\r\n  SLEIGHHOME: \"$SNAP/usr/lib/radare2/$SNAP_VERSION\"\r\n```\r\n\r\nWith this configuration plugins, sleigh and magic files are loaded correctly.\r\n\r\n## First issue: radare2 -H\r\nThe first issue would be that the paths changed on runtime currently are not reported back when running `radare2 -H` command, not sure the importance/effects of this.\r\n\r\n## Second issue: the rest of share files\r\nThe second issue are that radare2 in snap don't load any other file from `/usr/share/radare2/VERSION/*`, example of files not loaded are: charsets, cons, fcnsign, flag, format, hid, opcodes, syscall, www, ...\r\n\r\nInspired on what is observed the `radare2 -H` output a possible solution could be to implemented the use of `R2_PREFIX` env var for those paths, also allowing to remove the now unneeded `R2_MAGICPATH` from the snap environment.\r\n\r\nAlternatively adding variables for each non working paths, like the one currently working for `R2_MAGICPATH` could also be a possible solution.\r\n\r\nWhatever fits best for the project rest of environments where it is executed.","comments":[{"id":"IC_kwDOAEpMrs5Xi9mk","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"that may help towards this :) https://github.com/radareorg/radare2/pull/21486","createdAt":"2023-03-14T20:21:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21484#issuecomment-1468783012","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5XjqHl","author":{"login":"prodrigestivill"},"authorAssociation":"MEMBER","body":"I think it works, just as a comment, the variables `R2_INCDIR` and `R2_LIBDIR` are still reported wrong in the `radare2 -H`. But I don't think it will affect anything for now...","createdAt":"2023-03-14T22:42:36Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21484#issuecomment-1468965349","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5Xm4nG","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Yep. im aware, incdir/libdir are not tied to prefix, its a similar issue to the problem i faced when generating the pkg config files. But those vars are not used anywhere outside r2pm. So i think that for runtime we are good to go. i'll look into testing r2pm with the snap package installed (without any local installation) and come back to you. But i think we are good to update the snap package now!\r\n\r\nThanks!","createdAt":"2023-03-15T11:11:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21484#issuecomment-1469811142","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6Kpx6J","author":{"login":"prodrigestivill"},"authorAssociation":"MEMBER","body":"As a note, this will affect the new [iaito-snap](https://github.com/radareorg/iaito-snap) implementation (linked issue above).\r\n\r\nCurrent iaito snap implementation defines correctly `R2_PREFIX` environment varible, but this doesn't fix R2_INCDIR, R2_LIBDIR and R2_BINDIR.\r\n\r\nSo my understanding is that as of now, if somebody tries to use `iaito.r2pm` when only having [iaito snap](https://snapcraft.io/iaito) installed, it will try to access to the paths from [radare2 snap](https://snapcraft.io/radare2).\r\n","createdAt":"2024-09-03T10:47:10Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21484#issuecomment-2326208137","viewerDidAuthor":false}],"number":21484,"title":"Support runtime configurable paths"},{"body":"## Environment\r\nradare2 5.8.3 34052 @ linux-x86-64 git.5.8.2-6-g8663de81c3\r\ncommit: 8663de81c34ea453977b58bb3feeb7dde1624733 build: 2023-01-25__13:29:17\r\nLinux x86_64\r\n\r\n## Description\r\n\r\nThe command '/as to search for syscalls' returns a list of time-variant list of values.\r\n\r\n## Test\r\nThe test can be performed using the x86_64 library attached.\r\nThe first time, no syscalls matched with the address prefix \"0x0004ed\", then one syscall (rt_sigprocmask), and the fourth time two syscalls are detected (rt_sigprocmask, rt_sigpending).\r\n\r\n```\r\n$ radare2 -e anal.nopskip=false -e bin.cache=true libc.so.6\r\n -- Check your IO plugins with 'r2 -L'\r\n[0x0003ae60]> aa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nWARN: Invalid address from 0x001617c9\r\nWARN: Invalid address from 0x001617db\r\nWARN: Invalid address from 0x001618b9\r\nWARN: Invalid address from 0x001618cb\r\nWARN: Cannot find basic block for switch case at 0x000ae416 bbdelta = 34\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\n[0x0003ae60]> aei\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n0x0004edbf rt_sigprocmask\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n0x0004edbf rt_sigprocmask\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n0x0004edbf rt_sigprocmask\r\n0x0004edfe rt_sigpending\r\n```\r\n\r\n### Test files\r\n[libc.so.6.gz](https://github.com/radareorg/radare2/files/10723937/libc.so.6.gz)","comments":[{"id":"IC_kwDOAEpMrs5VMCqh","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Please confirm the fix works for you too. I added tests","createdAt":"2023-02-14T06:55:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21339#issuecomment-1429220001","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5VMVuw","author":{"login":"mauriziopapini"},"authorAssociation":"CONTRIBUTOR","body":"Hi @trufae, the problem is still there (using the same example cited in the issue)\r\n\r\n```\r\nradare2 -e anal.nopskip=false -e bin.cache=true libc.so.6\r\n -- You can use registers in math expressions. For example: 'wx 1234 @ esp - 2'\r\n[0x0003ae60]> aa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nWARN: Invalid address from 0x001617c9\r\nWARN: Invalid address from 0x001617db\r\nWARN: Invalid address from 0x001618b9\r\nWARN: Invalid address from 0x001618cb\r\nWARN: Cannot find basic block for switch case at 0x000ae416 bbdelta = 34\r\n\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\n[0x0003ae60]> \r\n[0x0003ae60]> aei\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n0x0004edbf rt_sigprocmask\r\n0x0004edfe rt_sigpending\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n0x0004edbf rt_sigprocmask\r\n0x0004edfe rt_sigpending\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n0x0004edbf rt_sigprocmask\r\n[0x0003ae60]> \r\n```\r\n\r\n","createdAt":"2023-02-14T08:07:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21339#issuecomment-1429298096","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5VM2Oi","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"cant repro. for me it works the same all the time\r\n<img width=\"527\" alt=\"Screenshot 2023-02-14 at 10 45 29\" src=\"https://user-images.githubusercontent.com/6431515/218698726-d1da3946-1b6c-41a2-9be7-2dfcd11c0636.png\">\r\n\r\n","createdAt":"2023-02-14T09:45:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21339#issuecomment-1429431202","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5VM26H","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"even with all the a analysis to confirm same steps\r\n\r\n<img width=\"555\" alt=\"Screenshot 2023-02-14 at 10 47 21\" src=\"https://user-images.githubusercontent.com/6431515/218699270-88f40ebd-a092-4252-9016-0cb910ef2dbf.png\">\r\n","createdAt":"2023-02-14T09:47:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21339#issuecomment-1429433991","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5VN9s9","author":{"login":"mauriziopapini"},"authorAssociation":"CONTRIBUTOR","body":"The problem seems to be related to the option:\r\n\r\n**e bin.cache=true**\r\n\r\nNote that I run it with it:\r\n`$ radare2 -e anal.nopskip=false -e bin.cache=true libc.so.6`\r\n\r\nUsing only the **-e bin.cache=true** option I'm still getting:\r\n\r\n```\r\nradare2 -e bin.cache=true libc.so.6\r\n -- Use /m to carve for known magic headers. speedup with search.\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n0x0004edbf rt_sigprocmask\r\n0x0004edfe rt_sigpending\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n0x0004edbf rt_sigprocmask\r\n0x0004edfe rt_sigpending\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n0x0004edbf rt_sigprocmask\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n0x0004edbf rt_sigprocmask\r\n0x0004edfe rt_sigpending\r\n[0x0003ae60]> \r\n```\r\n\r\nPlease note also the missing syscall, from your screenshot:\r\n\r\n```\r\n0x0004edfe rt_sigpending\r\n```\r\n\r\nis effectively a syscall but not found without using **bin.cache=true** option.\r\n\r\n","createdAt":"2023-02-14T13:09:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21339#issuecomment-1429723965","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5VVy_L","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"sorry im a bit busy now. can you try setting `esil.romem=true` and try again?","createdAt":"2023-02-15T17:55:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21339#issuecomment-1431777227","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5VV9B4","author":{"login":"mauriziopapini"},"authorAssociation":"CONTRIBUTOR","body":"Sure np @trufae.\r\nI'm getting same results:\r\n\r\n```\r\n$ radare2 -e bin.cache=true -e esil.romem=true libc.so.6\r\n -- Command layout is: <repeat><command><bytes>@<offset>.  For example: 3x20@0x33 will show 3 hexdumps of 20 bytes at 0x33\r\n[0x0003ae60]> aa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nWARN: Invalid address from 0x001617c9\r\nWARN: Invalid address from 0x001617db\r\nWARN: Invalid address from 0x001618b9\r\nWARN: Invalid address from 0x001618cb\r\nWARN: Cannot find basic block for switch case at 0x000ae416 bbdelta = 34\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n[0x0003ae60]> /as | grep 0x0004ed\r\n+INFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n0x0004edbf rt_sigprocmask\r\n0x0004edfe rt_sigpending\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n0x0004edbf rt_sigprocmask\r\n0x0004edfe rt_sigpending\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n0x0004edbf rt_sigprocmask\r\n[0x0003ae60]> \r\n```","createdAt":"2023-02-15T18:24:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21339#issuecomment-1431818360","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5VZK46","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Ehm this invalid address was fixed a while ago.. you are not using latest code from git, do you?","createdAt":"2023-02-16T07:53:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21339#issuecomment-1432661562","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5VZSWn","author":{"login":"mauriziopapini"},"authorAssociation":"CONTRIBUTOR","body":"I'm using the version that includes your commits about this problem:\r\n\r\n```\r\nradare2 5.8.3 34220 @ linux-x86-64 git.5.8.2-76-g008b6baf8c\r\ncommit: 008b6baf8c7cff2a54a5c97b5a7ca1732a5c2a5c build: 2023-02-14__08:49:46\r\n```\r\n\r\nShould I use another version?\r\n","createdAt":"2023-02-16T08:20:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21339#issuecomment-1432692135","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5VZZV7","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"You are missing 22 commits. In which at least 2 commits may be affecting your problem. git pull ; sys/install.sh\r\n\r\ni think today ill have some time to check this issue again. but first update :)","createdAt":"2023-02-16T08:47:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21339#issuecomment-1432720763","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5VZbce","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I have a workaround and yes i can repro in local its because esil in /as is ignoring the romem option. ill fix that now, but mean while you can run 'wc-*' after /as to clear the write cache, this way /as gives the same results all the time :)","createdAt":"2023-02-16T08:53:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21339#issuecomment-1432729374","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5VZ60h","author":{"login":"mauriziopapini"},"authorAssociation":"CONTRIBUTOR","body":"> You are missing 22 commits. In which at least 2 commits may be affecting your problem. git pull ; sys/install.sh\r\n> \r\n> i think today ill have some time to check this issue again. but first update :)\r\n\r\nYes, I did it on purpose: I'd like to include only the commits related to this issue to minimally change the test environment.\r\n\r\n> I have a workaround and yes i can repro in local its because esil in /as is ignoring the romem option. ill fix that now, but mean while you can run 'wc-*' after /as to clear the write cache, this way /as gives the same results all the time :)\r\n\r\nOk, thanks.\r\n\r\nNote that this is true except for the first run of \"/as | grep 0x0004ed\" which gives 0 results.\r\n\r\n## Environment (008b6baf8c7cff2a54a5c97b5a7ca1732a5c2a5c)\r\n```\r\n$ r2 -v\r\nradare2 5.8.3 34220 @ linux-x86-64 git.5.8.2-76-g008b6baf8c\r\ncommit: 008b6baf8c7cff2a54a5c97b5a7ca1732a5c2a5c build: 2023-02-14__08:49:46\r\n```\r\n### Test\r\n```\r\n$ radare2 -e bin.cache=true -e esil.romem=true libc.so.6\r\n -- Move the comments to the right changing their margin with asm.cmt.margin\r\n^C\r\n[0x0003ae60]> \r\n[0x0003ae60]> aa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nWARN: Invalid address from 0x001617c9\r\nWARN: Invalid address from 0x001617db\r\nWARN: Invalid address from 0x001618b9\r\nWARN: Invalid address from 0x001618cb\r\nWARN: Cannot find basic block for switch case at 0x000ae416 bbdelta = 34\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\n[0x0003ae60]> aei\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n[0x0003ae60]> wc-*\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n0x0004edbf rt_sigprocmask\r\n[0x0003ae60]> wc-*\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n0x0004edbf rt_sigprocmask\r\n[0x0003ae60]> wc-*\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n0x0004edbf rt_sigprocmask\r\n[0x0003ae60]> \r\n\r\n```\r\n\r\n## Environment (f58373e00d86bcab3638c7e1d87285258a15ac9a)\r\n\r\n$ r2 -v\r\nradare2 5.8.3 34267 @ linux-x86-64 git.5.8.2-98-gf58373e00d\r\ncommit: f58373e00d86bcab3638c7e1d87285258a15ac9a build: 2023-02-16__11:15:38\r\n\r\n### Test\r\n\r\n```\r\n$ radare2 -e bin.cache=true -e esil.romem=true libc.so.6\r\n -- Command layout is: <repeat><command><bytes>@<offset>.  For example: 3x20@0x33 will show 3 hexdumps of 20 bytes at 0x33\r\n[0x0003ae60]> aa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nWARN: Cannot find basic block for switch case at 0x000ae416 bbdelta = 34\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\n[0x0003ae60]> aei\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n[0x0003ae60]> wc-*\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n0x0004edbf rt_sigprocmask\r\n[0x0003ae60]> wc-*\r\n[0x0003ae60]> /as | grep 0x0004ed\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\nINFO: [ESIL] Trap, trying to execute on non-executable memory\r\n0x0004edbf rt_sigprocmask\r\n[0x0003ae60]> \r\n\r\n```","createdAt":"2023-02-16T10:24:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21339#issuecomment-1432857889","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5VaMUD","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Works finen if you do wc-* before /as in the first run, the reason is because bin.cache patches the relocs in memory, and those relocs are the ones affecting the emulation and cause the wrong results. ill investigate on that, but at least the issue is clear to me now. thanks for the patience and testing","createdAt":"2023-02-16T11:17:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21339#issuecomment-1432929539","viewerDidAuthor":true}],"number":21339,"title":"The output of the command '/as' changes firing it several time."},{"body":"ref: https://github.com/radareorg/radare2/blob/master/libr/arch/p/arm/armass64.c#L820\r\n\r\n```\r\nwa tbz w0, 0, 0x74862c\r\npdi 1\r\n6031a436  tbz w0, 0x14, 0xffffffffffff862c\r\n```\r\n0 != 0x14\r\n","comments":[{"id":"IC_kwDOAEpMrs5VO9HB","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Ive improved the bit editor to make that more easy to implement. in case anyone wanna handle it","createdAt":"2023-02-14T16:00:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21318#issuecomment-1429983681","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5udrc6","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Can you chck if its fixed now?","createdAt":"2023-12-13T05:03:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21318#issuecomment-1853273914","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5ueOF8","author":{"login":"alex-bender"},"authorAssociation":"CONTRIBUTOR","body":"Cannot assebmle it\r\n```\r\n[0x6031a436]> wa tbz w0, 0, 0x74862c\r\nERROR: invalid destination for tbz\r\nERROR: invalid destination for tbz\r\nERROR: invalid destination for tbz\r\nERROR: Cannot assemble 'tbz w0, 0, 0x74862c' at line 1\r\n```","createdAt":"2023-12-13T07:46:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21318#issuecomment-1853415804","viewerDidAuthor":false}],"number":21318,"title":"wa tbz w0, 0, ... is broken"},{"body":"## Environment\r\n\r\n```sh\r\n\r\nDo 26. Jan 14:47:18 CET 2023\r\n\r\nradare2 5.8.3 29823 @ linux-x86-64 git.5.8.2-2-g4d256dbae1\r\ncommit: 4d256dbae164e50a060d3e35be7dbd1506580853 build: 2023-01-23__17:39:08\r\n\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\nWhen running aae on (some) ARM binaries the pointer to the string gets substituted with the whole string overwriting program code. Some parts of the fcn.08000380 gets overwritten with a string.\r\n![BeforeAAE](https://user-images.githubusercontent.com/38127951/214852186-2535b2e0-a5e4-47b3-aefb-fedc499daa58.png)\r\n![AfterAAE](https://user-images.githubusercontent.com/38127951/214852183-170a3164-afee-4691-9de6-93ccb6006dfb.png)\r\n\r\nFirst picture: Before running aee\r\nSecond picture: After running aae\r\n<!-- Explain what's the issue and what would you expect to see -->\r\n\r\n## Test\r\nTo reproduce: \r\nLoad binary from here (original from attify): [click me](https://drive.google.com/file/d/1ZQeJuKd2b8PgTxCk1VU3k6p0kZQMcMQU/view)\r\n\r\nI used this configuration in an r2 script \r\ne asm.arch=arm\r\ne asm.bits=16\r\ne asm.emu = true\r\ne emu.str=true\r\ne anal.loads=true\r\ne asm.cpu=cortex\r\ne anal.strings=true\r\ne r2ghidra.roprop=3\r\ne r2ghidra.indent=2\r\ne anal.armthumb=true\r\ne bin.baddr = 0x08000000\r\nf flash = 0x08000000\r\non STM32F103C-firmware.bin flash rwx\r\nom 3 0xE0000000 0x100000 0xE0000000 rw- Peripherals\r\nom 3 0x20000000 0x5000 0x20000000 rwx SRAM\r\nom 3 0x00000000 0xffff 0x00000000 rwx flash_mirror\r\n\r\nThen run aap and aac to get the output of the first picture. \r\nAfter running the two commands above run aae to get the output of the second picture.\r\n<!-- Steps to reproduce the issue and provide files/links/images/.. -->\r\n","comments":[{"id":"IC_kwDOAEpMrs6N5v_8","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Sorry for the late reply. it works for me. here's the config im using:\r\n\r\n```\r\n$ r2 -a arm -b 16 -m 0x08000000 STM32F103C-firmware.bin\r\nWARN: using oba to load the syminfo from different mapaddress\r\nDo you want to run the 'STM32F103C-firmware.bin.r2' script? (y/N)  y\r\n -- nothing personal, just bitness\r\n[0x08000000]> aae\r\n[0x08000000]> f~str\r\n0x080027b8 2 str.m\r\n0x08007600 2 str.Y2\r\n0x080076e8 2 str.i2\r\n0x0800b350 2 str.pG\r\n0x0800d1a8 21 str.Authentication_Failed\r\n0x0800d1be 23 str.obj__pin____PinName_NC\r\n0x0800d1c3 18 str.pin____PinName_NC\r\n0x0800d1d6 68 str._._mbed_TARGET_NUCLEO_F103RB_TARGET_STM_TARGET_STM32F1_gpio_object.h\r\n0x0800d21b 25 str.Authentication_Successful\r\n0x0800d235 10 str.Door_Open\r\n0x0800d240 6 str.attify\r\n0x0800d247 38 str.Offensive_IoT_Exploitation_by_Attify_\r\n0x0800d248 37 str.ffensive_IoT_Exploitation_by_Attify_\r\n0x0800d26e 20 str.Enter_the_password:_\r\n0x0800d278 10 str.password:_\r\n0x0800d285 6 str._stdin\r\n0x0800d28c 7 str._stderr\r\n0x0800d2d4 49 str.pacembed_2_build_libraryhalcommon_retarget.cpp\r\n0x0800d348 25 str.rator_new_out_of_memory\r\n0x0800d358 9 str.memory\r\n0x0800d364 28 str.erator_new___out_of_memory\r\n0x0800d381 19 str._ptr___T___data\r\n0x0800d395 68 str.C:_Jenkins_workspace_mbed_2_build_library_.build_mbed_SingletonPtr.h\r\n0x0800d3da 3 str.:_p\r\n..\r\n```\r\n\r\n```\r\n$ r2 -a arm -b 16 -m 0x08000000 STM32F103C-firmware.bin\r\n130$ cat STM32F103C-firmware.bin.r2\r\ne asm.arch=arm\r\ne asm.bits=16\r\ne emu.str=true\r\ne asm.cpu=cortex\r\ne anal.strings=true\r\ne anal.fixed.thumb=true\r\nf entry0=0x08000000\r\ns entry0\r\non malloc://0x100000 0xE0000000 rw- Peripherals\r\non malloc://0x5000 0x20000000 rwx SRAM\r\nom 3 malloc://0xffff 0x00000000 rwx SRAM\r\n0$\r\n```","createdAt":"2024-09-28T16:25:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21294#issuecomment-2380726268","viewerDidAuthor":true}],"number":21294,"title":"String detection via aae on ARM Thumb binary fails"},{"body":"## Description\r\n\r\nLet's get radare2 back on Debian and Ubuntu.\r\n\r\nhttps://www.mail-archive.com/debian-release@lists.debian.org/msg128481.html\r\n\r\nhttps://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1014478\r\n\r\nDebian has their own fork of radare2 here: https://salsa.debian.org/pkg-security-team/radare2/-/tree/debian/master/debian","comments":[{"id":"IC_kwDOAEpMrs5TUaBI","author":{"login":"riptl"},"authorAssociation":"CONTRIBUTOR","body":"I'll take a first look at it but probably won't have enough bandwidth nor know-how to step up as a package maintainer.","createdAt":"2023-01-20T02:42:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21266#issuecomment-1397858376","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5TUc47","author":{"login":"riptl"},"authorAssociation":"CONTRIBUTOR","body":"https://wiki.debian.org/PackagingWithGit\r\n\r\n@radare Clearly, there are a lot of Debian users. How about we maintain a \"debianized\" branch on this repo?\r\nWould be a show of goodwill and makes it easier for us to maintain.\r\n\r\n> If upstream is using git to manage their source, the debianization repository can live in a branch off of the main upstream tree. Clearly this can work only with some upstreams, but the big upside is that the relationship between the debianization and the upstream code is VERY clear. Patching and releasing are much more natural. Since the Debian APT repositories still use tarballs you still have to manage those with this setup, but pristine-tar exists for that purpose.","createdAt":"2023-01-20T03:05:25Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21266#issuecomment-1397870139","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5VWi4y","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Any update on this?","createdAt":"2023-02-15T20:16:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21266#issuecomment-1431973426","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5YtUkq","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"ping","createdAt":"2023-03-29T09:42:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21266#issuecomment-1488275754","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5qUVDa","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Ping","createdAt":"2023-10-28T05:54:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21266#issuecomment-1783714010","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5s43GY","author":{"login":"riptl"},"authorAssociation":"CONTRIBUTOR","body":"@trufae Unfortunately not. I filed 3 PRs 10 months ago and nobody responded. Do you have any contacts to ping? Maybe I can escalate this via my workplace too. \r\n\r\n- https://salsa.debian.org/pkg-security-team/radare2/-/merge_requests/5\r\n- https://salsa.debian.org/pkg-security-team/radare2/-/merge_requests/6\r\n- https://salsa.debian.org/pkg-security-team/radare2/-/merge_requests/7","createdAt":"2023-11-26T17:43:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21266#issuecomment-1826845080","viewerDidAuthor":false}],"number":21266,"title":"[Packaging] Fix Debian packages"},{"body":"## Environment\r\n\r\n```\r\nSun Jan 15 10:12:17 AM CET 2023\r\nVersion: radare2 5.8.1 29834 @ linux-x86-64 git.5.7.4-1336-g8b544aff81\r\nOn Linux x86_64 (Kali)\r\nCommand used:\r\nr2 -aarm -b32 blah\r\n```\r\n\r\n## Description\r\n\r\nAssembly code generated by r2 for instruction 14300be5 is wrong (bad offset)\r\nThe comment is good, but not the assembly.\r\n\r\n## Test\r\n\r\nCode on radare2\r\n![Capture d'Ã©cran_20230115_004011](https://user-images.githubusercontent.com/122721783/212532984-82cc39a7-39d7-44be-b24f-5d793ca27e51.png)\r\n\r\nCode on gdb\r\n![Capture d'Ã©cran_20230115_004359](https://user-images.githubusercontent.com/122721783/212533001-25db804e-cdc2-4ca5-adbd-93b5746859db.png)\r\n\r\nDisassembly expected\r\n![Capture dâ€™Ã©cran 2023-01-15-1](https://user-images.githubusercontent.com/122721783/212533020-dbebbae2-78e0-4765-ba1f-ac337559f9ae.png)\r\n","comments":[{"id":"IC_kwDOAEpMrs5Sc8ZD","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Can you share the binary or provide a way to repro without it?\r\n\r\n```\r\n$ r2 -a arm -b 32 -\r\n -- The stripping process is not deep enough\r\n[0x00000000]> wx 14300b520301be5\r\n[0x00000000]> pd 2\r\n            0x00000000      14300b52       andpl r3, fp, 0x14\r\n            0x00000004      0301be50       adcspl r0, lr, r3, lsl 2\r\n[0x00000000]>\r\n```","createdAt":"2023-01-16T01:07:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21251#issuecomment-1383319107","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5SeRB5","author":{"login":"l0kh"},"authorAssociation":"CONTRIBUTOR","body":"It's at the start of main of this small ctf\r\n[blah.zip](https://github.com/radareorg/radare2/files/10423861/blah.zip)\r\n","createdAt":"2023-01-16T08:34:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21251#issuecomment-1383665785","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5SfNUw","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"For fine here:\r\n\r\n```\r\n[0x000083b8]> s main \r\n[0x00008470]> af\r\n[0x00008470]> pd 20\r\nâ”Œ 484: int main (int argc, char **argv);\r\nâ”‚           ; arg int argc @ r0\r\nâ”‚           ; arg char **argv @ r1\r\nâ”‚           ; var int32_t var_10h @ fp-0x10\r\nâ”‚           ; var int32_t var_14h @ fp-0x14\r\nâ”‚           ; var int32_t var_18h @ fp-0x18\r\nâ”‚           ; var int32_t var_1ch @ fp-0x1c\r\nâ”‚           ; var int32_t var_20h @ fp-0x20\r\nâ”‚           ; var int32_t var_24h @ fp-0x24\r\nâ”‚           0x00008470      10482de9       push {r4, fp, lr}\r\nâ”‚           0x00008474      08b08de2       add fp, sp, 8\r\nâ”‚           0x00008478      1cd04de2       sub sp, sp, 0x1c\r\nâ”‚           0x0000847c      20000be5       str r0, [var_20h]           ; 0x20 ; 32 ; argc\r\nâ”‚           0x00008480      24100be5       str r1, [var_24h]           ; 0x24 ; 36 ; argv\r\nâ”‚           0x00008484      0630a0e3       mov r3, 6\r\nâ”‚           0x00008488      10300be5       str r3, [var_10h]           ; 0x10 ; 16\r\nâ”‚           0x0000848c      0030a0e3       mov r3, 0\r\nâ”‚           0x00008490      14300be5       str r3, [var_14h]           ; 0x14 ; 20\r\nâ”‚           0x00008494      20301be5       ldr r3, [var_20h]           ; 0x20 ; 32\r\nâ”‚           0x00008498      020053e3       cmp r3, 2                   ; 2\r\nâ”‚       â”Œâ”€< 0x0000849c      0300000a       beq 0x84b0\r\n\r\n```","createdAt":"2023-01-16T11:33:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21251#issuecomment-1383912752","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5SfNfh","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"oh well its happening if i do `aaaaaa`, so its probably a bug in the type propagation .. ill look into that. if you do `af` it works fine","createdAt":"2023-01-16T11:34:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21251#issuecomment-1383913441","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5SfNxr","author":{"login":"l0kh"},"authorAssociation":"CONTRIBUTOR","body":"I always do `aaa` (just FYI)","createdAt":"2023-01-16T11:35:30Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21251#issuecomment-1383914603","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5SfZng","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Its usually not recommended to do full analysis because of bugs like this that happen when combining different analysis at once. But it's a common practice and the default for most people. So there's nothing wrong with it, but it's usually good to try alternative ways to analyze the code to understand better the cause of the bug. i have some separate patches that fix and improve other issues i found in this binary, so i''ll push it to the testsuite and improve the analysis based on it.\r\n\r\nthanks. i'll let you know when i merge the fixing pr","createdAt":"2023-01-16T12:11:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21251#issuecomment-1383963104","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Sfa1f","author":{"login":"l0kh"},"authorAssociation":"CONTRIBUTOR","body":"Noted. I'll change this habit.\r\nThanks for your work.\r\n","createdAt":"2023-01-16T12:15:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21251#issuecomment-1383968095","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5Sfl3i","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"so here's the bug\r\n![Screenshot from 2023-01-16 13-52-44](https://user-images.githubusercontent.com/6431515/212682675-7c3ef746-5fd7-4f16-8491-ad695463881d.png)\r\n","createdAt":"2023-01-16T12:53:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21251#issuecomment-1384013282","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Sfv0h","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Fixed here https://github.com/radareorg/radare2/pull/21257 ill close the issue when merged","createdAt":"2023-01-16T13:21:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21251#issuecomment-1384054049","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5SgO0R","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"that fix breaks other tests, but the logic behind this code is wrong . more summer of code crap that needs to be rewritten. i will try to massage the patch and try to get something working soon","createdAt":"2023-01-16T14:57:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21251#issuecomment-1384181009","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5SjuHg","author":{"login":"l0kh"},"authorAssociation":"CONTRIBUTOR","body":"I'm currently using `aa` and it seems to work for now.\r\nGood luck with your patch","createdAt":"2023-01-17T09:33:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21251#issuecomment-1385095648","viewerDidAuthor":false}],"number":21251,"title":"Bad assembly generated on arm 32bits"},{"body":"## Environment\r\n\r\n```sh\r\npeter@peter-VirtualBox:~/tmp/test_radare2$ /home/peter/bin/r2 -v\r\nradare2 5.8.1 1 @ linux-x86-64 git.5.8.1\r\ncommit: db0033a4e7caa6c5224c5ecc6b5d466c8266bbe4 build: 2023-01-09__10:06:23\r\npeter@peter-VirtualBox:~/tmp/test_radare2$ uname -ms\r\nLinux x86_64\r\npeter@peter-VirtualBox:~/tmp/test_radare2$ date\r\n2023å¹´ 01æœˆ 10æ—¥ æ˜ŸæœŸäºŒ 11:46:29 CST\r\npeter@peter-VirtualBox:~/tmp/test_radare2$ \r\n```\r\n\r\n## Description\r\n```sh\r\npeter@peter-VirtualBox:~/tmp/test_radare2$ /home/peter/bin/r2 -a mips -b 32 -e asm.cpu=micro /mnt/share/AppFW_flash_no_fs.elf \r\n -- Thanks for using radare2!\r\n[0x98384b0f]> aac\r\n[0x98384b0f]> s sym.libFS_copy\r\n[0x98541e8c]> s\r\n0x98541e8c\r\n[0x98541e8c]> pdf\r\nERROR: Cannot find function at 0x98541e8c\r\n[0x98541e8c]> pd 20@sym.libFS_copy\r\n            ;-- libFS_copy:\r\n            0x98541e8c      4fe5           addiusp -0x38\r\n            0x98541e8e      22fd           unaligned\r\n            0x98541e90      d01840e4       andi zero, t8, 0x40e4\r\n            0x98541e94      0007ae92       invalid\r\n            0x98541e98      0e25           move s1, a1\r\n            0x98541e9a      41a4           unaligned\r\n            0x98541e9c      9860cc06       invalid\r\n            0x98541ea0      30847090       addiu a0, a0, 0x7090\r\n            ;-- .L88:\r\n            0x98541ea4      41a49860       lui a0, 0x9860\r\n            0x98541ea8      30847074       addiu a0, a0, 0x7074\r\n            ;-- .L105:\r\n            0x98541eac      f41c79a0       jal 0x38f340\r\n            0x98541eb0      3220ffff       addiu s1, zero, -1\r\n            0x98541eb4      0c51           move v0, s1\r\n            ;-- .L106:\r\n            0x98541eb6      22fd           unaligned\r\n            0x98541eb8      5018470e       ori zero, t8, 0x470e\r\n            ;-- .L103:\r\n            0x98541ebc      f42a4f00       jal 0x549e00\r\n            0x98541ec0      00049290       or s2, a0, zero\r\n            0x98541ec4      4042000f       bgez v0, 0x1e\r\n            0x98541ec8      0e02           move s0, v0\r\n            0x98541eca      f4             unaligned\r\n[0x98541e8c]>\r\n```\r\n\r\ncompare with gdb disassemble output: (sorry for gdb alignment)\r\n```sh\r\nDump of assembler code for function libFS_copy:\r\n   0x98541e8d <+0>:     4f e5               addiu   sp,sp,-56\r\n   0x98541e8e <+2>:     22 fd d0 18     swm     s0-s6,ra,24(sp)\r\n   0x98541e92 <+6>:     40 e4 00 07     beqzc   a0,0x98541ea5 <libFS_copy+24>\r\n   0x98541e96 <+10>:    ae 92              bnez    a1,0x98541ebd <libFS_copy+48>\r\n   0x98541e98 <+12>:    0e 25              move    s1,a1\r\n   0x98541e9a <+14>:    41 a4 98 60     lui     a0,0x9860\r\n   0x98541e9e <+18>:    cc 06               b       0x98541ead <libFS_copy+32>\r\n   0x98541ea0 <+20>:    30 84 70 90     addiu   a0,a0,28816\r\n   0x98541ea4 <+24>:    41 a4 98 60     lui     a0,0x9860\r\n   0x98541ea8 <+28>:    30 84 70 74     addiu   a0,a0,28788\r\n   0x98541eac <+32>:    f4 1c 79 a0      jal     0x9838f341 <puts>\r\n   0x98541eb0 <+36>:    32 20 ff ff       li      s1,-1\r\n   0x98541eb4 <+40>:    0c 51   move    v0,s1\r\n   0x98541eb6 <+42>:    22 fd 50 18     lwm     s0-s6,ra,24(sp)\r\n   0x98541eba <+46>:    47 0e   jraddiusp       56\r\n   0x98541ebc <+48>:    f4 2a 4f 00     jal     0x98549e01 <fsm_filelength>\r\n   0x98541ec0 <+52>:    00 04 92 90     move    s2,a0\r\n   0x98541ec4 <+56>:    40 42 00 0f     bgez    v0,0x98541ee7 <libFS_copy+90>\r\n   0x98541ec8 <+60>:    0e 02   move    s0,v0\r\n   0x98541eca <+62>:    f4 2a 50 00     jal     0x9854a001 <fsm_getlasterror>\r\n   0x98541ece <+66>:    32 20 ff fe     li      s1,-2\r\n   0x98541ed2 <+70>:    41 a4 98 60     lui     a0,0x9860\r\n   0x98541ed6 <+74>:    85 4a   movep   a2,a3,s2,s0\r\n   0x98541ed8 <+76>:    0c a2   move    a1,v0\r\n   0x98541eda <+78>:    f4 1c 79 06     jal     0x9838f20d <printf>\r\n   0x98541ede <+82>:    30 84 70 b0     addiu   a0,a0,28848\r\n   0x98541ee2 <+86>:    cf e9   b       0x98541eb7 <libFS_copy+42>\r\n```\r\nso, is it a issue of radare2 or how to configure it correctly?\r\nThanks in advance.\r\n","comments":[{"id":"IC_kwDOAEpMrs5SIpiA","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"aac is not going to analyze everything, you must find the best command for your target or use the generic `aaa`. you can also try `e anal.hasnext=true;afr`","createdAt":"2023-01-10T22:52:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1377998976","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5SJGeS","author":{"login":"tkernelcn"},"authorAssociation":"NONE","body":"there are some other issue on my buildï¼Œ let aaa crashï¼š\r\n```sh\r\npeter@peter-VirtualBox:~/tmp/test_radare2$ /home/peter/bin/r2 -a mips -b 32 -e asm.cpu=micro /mnt/share/AppFW_flash_no_fs.elf \r\n -- Interpret radare2 scripts with '. <path-to-script>'. Similar to the bash source alias command.\r\n[0x98384b0f]> aaa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nERROR: af: Cannot find function at 0x98384b0f\r\nSegmentation fault (core dumped)\r\npeter@peter-VirtualBox:~/tmp/test_radare2$ \r\n```\r\n\r\nso try to other command your suggestion\r\n```sh\r\npeter@peter-VirtualBox:~/tmp/test_radare2$ /home/peter/bin/r2 -a mips -b 32 -e asm.cpu=micro /mnt/share/AppFW_flash_no_fs.elf \r\n -- Bindiff two files with '$ radiff2 /bin/true /bin/false'\r\n[0x98384b0f]> aac\r\n[0x98384b0f]> afr\r\n[0x98384b0f]> e anal.hasnext=true\r\n[0x98384b0f]> aac\r\n[0x98384b0f]> afr\r\n[0x98384b0f]> s sym.libFS_copy\r\n[0x98541e8c]> s\r\n0x98541e8c\r\n[0x98541e8c]> pdf\r\nERROR: Cannot find function at 0x98541e8c\r\n[0x98541e8c]> pd 20@sym.libFS_copy\r\n            ;-- libFS_copy:\r\n            0x98541e8c      4fe5           addiusp -0x38\r\n            0x98541e8e      22fd           unaligned\r\n            0x98541e90      d01840e4       andi zero, t8, 0x40e4\r\n            0x98541e94      0007ae92       invalid\r\n            0x98541e98      0e25           move s1, a1\r\n            0x98541e9a      41a4           unaligned\r\n            0x98541e9c      9860cc06       invalid\r\n            0x98541ea0      30847090       addiu a0, a0, 0x7090\r\n            ;-- .L88:\r\n            0x98541ea4      41a49860       lui a0, 0x9860\r\n            0x98541ea8      30847074       addiu a0, a0, 0x7074\r\n            ;-- .L105:\r\n            0x98541eac      f41c79a0       jal 0x38f340\r\n            0x98541eb0      3220ffff       addiu s1, zero, -1\r\n            0x98541eb4      0c51           move v0, s1\r\n            ;-- .L106:\r\n            0x98541eb6      22fd           unaligned\r\n            0x98541eb8      5018470e       ori zero, t8, 0x470e\r\n            ;-- .L103:\r\n            0x98541ebc      f42a4f00       jal 0x549e00\r\n            0x98541ec0      00049290       or s2, a0, zero\r\n            0x98541ec4      4042000f       bgez v0, 0x1e\r\n            0x98541ec8      0e02           move s0, v0\r\n            0x98541eca      f4             unaligned\r\n[0x98541e8c]>\r\n```\r\n\r\nthe problem is disassemble errors also.","createdAt":"2023-01-11T01:23:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1378117522","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5SJH6O","author":{"login":"tkernelcn"},"authorAssociation":"NONE","body":"try to use `apt-get install radare2` software in another linux\r\n```sh\r\np10:~/git_workspace/REPO_FW/common/CP/images$ r2 -a mips -b 32 -e asm.cpu=micro ./AppFW_flash_no_fs.elf\r\n[0x98384b0f]> e anal.hasnext=true\r\n[0x98384b0f]> afr\r\n[0x98384b0f]> aaa\r\n[Cannot find function at 0x98384b0f sym. and entry0 (aa)\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Check for objc references\r\n[x] Check for vtables\r\n[x] Finding xrefs in noncode section with anal.in=io.maps\r\n[x] Analyze value pointers (aav)\r\n[x] Value from 0x9861a0a0 to 0x9861b000 (aav)\r\n[x] 0x9861a0a0-0x9861b000 in 0x9861a0a0-0x9861b000 (aav)\r\n[x] 0x9861a0a0-0x9861b000 in 0x9c0883e4-0x9c089220 (aav)\r\n[x] 0x9861a0a0-0x9861b000 in 0x9c082400-0x9c0883e4 (aav)\r\n[x] 0x9861a0a0-0x9861b000 in 0x98384b0c-0x98613280 (aav)\r\n[x] 0x9861a0a0-0x9861b000 in 0xb8384a00-0xb8384b0c (aav)\r\n[x] 0x9861a0a0-0x9861b000 in 0x98384000-0x98384a00 (aav)\r\n[x] Value from 0x9c0883e4 to 0x9c089220 (aav)\r\n[x] 0x9c0883e4-0x9c089220 in 0x9861a0a0-0x9861b000 (aav)\r\n[x] 0x9c0883e4-0x9c089220 in 0x9c0883e4-0x9c089220 (aav)\r\n[x] 0x9c0883e4-0x9c089220 in 0x9c082400-0x9c0883e4 (aav)\r\n[x] 0x9c0883e4-0x9c089220 in 0x98384b0c-0x98613280 (aav)\r\n[x] 0x9c0883e4-0x9c089220 in 0xb8384a00-0xb8384b0c (aav)\r\n[x] 0x9c0883e4-0x9c089220 in 0x98384000-0x98384a00 (aav)\r\n[x] Value from 0x9c082400 to 0x9c0883e4 (aav)\r\n[x] 0x9c082400-0x9c0883e4 in 0x9861a0a0-0x9861b000 (aav)\r\n[x] 0x9c082400-0x9c0883e4 in 0x9c0883e4-0x9c089220 (aav)\r\n[x] 0x9c082400-0x9c0883e4 in 0x9c082400-0x9c0883e4 (aav)\r\n[x] 0x9c082400-0x9c0883e4 in 0x98384b0c-0x98613280 (aav)\r\n[x] 0x9c082400-0x9c0883e4 in 0xb8384a00-0xb8384b0c (aav)\r\n[x] 0x9c082400-0x9c0883e4 in 0x98384000-0x98384a00 (aav)\r\n[x] Value from 0x98384b0c to 0x98613280 (aav)\r\n[x] 0x98384b0c-0x98613280 in 0x9861a0a0-0x9861b000 (aav)\r\n[x] 0x98384b0c-0x98613280 in 0x9c0883e4-0x9c089220 (aav)\r\n[x] 0x98384b0c-0x98613280 in 0x9c082400-0x9c0883e4 (aav)\r\n[x] 0x98384b0c-0x98613280 in 0x98384b0c-0x98613280 (aav)\r\n[x] 0x98384b0c-0x98613280 in 0xb8384a00-0xb8384b0c (aav)\r\n[x] 0x98384b0c-0x98613280 in 0x98384000-0x98384a00 (aav)\r\n[x] Value from 0xb8384a00 to 0xb8384b0c (aav)\r\n[x] 0xb8384a00-0xb8384b0c in 0x9861a0a0-0x9861b000 (aav)\r\n[x] 0xb8384a00-0xb8384b0c in 0x9c0883e4-0x9c089220 (aav)\r\n[x] 0xb8384a00-0xb8384b0c in 0x9c082400-0x9c0883e4 (aav)\r\n[x] 0xb8384a00-0xb8384b0c in 0x98384b0c-0x98613280 (aav)\r\n[x] 0xb8384a00-0xb8384b0c in 0xb8384a00-0xb8384b0c (aav)\r\n[x] 0xb8384a00-0xb8384b0c in 0x98384000-0x98384a00 (aav)\r\n[x] Value from 0x98384000 to 0x98384a00 (aav)\r\n[x] 0x98384000-0x98384a00 in 0x9861a0a0-0x9861b000 (aav)\r\n[x] 0x98384000-0x98384a00 in 0x9c0883e4-0x9c089220 (aav)\r\n[x] 0x98384000-0x98384a00 in 0x9c082400-0x9c0883e4 (aav)\r\n[x] 0x98384000-0x98384a00 in 0x98384b0c-0x98613280 (aav)\r\n[x] 0x98384000-0x98384a00 in 0xb8384a00-0xb8384b0c (aav)\r\n[x] 0x98384000-0x98384a00 in 0x98384000-0x98384a00 (aav)\r\n[x] Emulate code to find computed references (aae)\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Propagate noreturn information\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\n[0x98384b0f]> s sym.libFS_copy\r\n[0x98541e8c]> s\r\n0x98541e8c\r\n[0x98541e8c]> pdf\r\np: Cannot find function at 0x98541e8c\r\n[0x98541e8c]> pd 20@sym.libFS_copy\r\n            ;-- libFS_copy:\r\n            0x98541e8c      4fe522fd       invalid\r\n            0x98541e90      d01840e4       andi zero, t8, 0x40e4\r\n            0x98541e94      0007ae92       invalid\r\n            0x98541e98      0e2541a4       invalid\r\n            0x98541e9c      9860cc06       invalid\r\n            0x98541ea0      30847090       addiu a0, a0, 0x7090\r\n            ;-- .L88:\r\n            0x98541ea4      41a49860       lui a0, 0x9860\r\n            0x98541ea8      30847074       addiu a0, a0, 0x7074\r\n            ;-- .L105:\r\n            0x98541eac      f41c79a0       jal 0x38f340\r\n            0x98541eb0      3220ffff       addiu s1, zero, -1\r\n            0x98541eb4  ~   0c5122fd       invalid\r\n            ;-- .L106:\r\n            0x98541eb6                    unaligned\r\n            0x98541eb7                    unaligned\r\n            0x98541eb8      5018470e       ori zero, t8, 0x470e\r\n            ;-- .L103:\r\n            0x98541ebc      f42a4f00       jal 0x549e00\r\n            0x98541ec0      00049290       or s2, a0, zero\r\n            0x98541ec4      4042000f       bgez v0, 0x1e\r\n            0x98541ec8      0e02f42a       invalid\r\n            0x98541ecc      50003220       ori zero, zero, 0x3220\r\n            0x98541ed0      fffe41a4       lw ra, 0x41a4(fp)\r\n[0x98541e8c]>\r\n```\r\n\r\nenvironment:\r\n```sh\r\np10:~/git_workspace/REPO_FW/common/CP/images$ r2 -v\r\nradare2 4.2.1 0 @ linux-x86-64 git.4.2.1\r\ncommit: unknown build:\r\n10:~/git_workspace/REPO_FW/common/CP/images$ uname -ms\r\nLinux x86_64\r\np10:~/git_workspace/REPO_FW/common/CP/images$\r\n```\r\n\r\nso, I think, some thing configuration wrong maybe.\r\n\r\nThanks.","createdAt":"2023-01-11T01:30:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1378123406","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5SJqaz","author":{"login":"tkernelcn"},"authorAssociation":"NONE","body":"the point is: a lot of `unaligned` and `invalid` in disassemble code \r\n```sh\r\n            ;-- libFS_copy:\r\n            0x98541e8c      4fe5           addiusp -0x38\r\n            0x98541e8e      22fd           unaligned\r\n            0x98541e90      d01840e4       andi zero, t8, 0x40e4\r\n            0x98541e94      0007ae92       invalid\r\n            0x98541e98      0e25           move s1, a1\r\n            0x98541e9a      41a4           unaligned\r\n            0x98541e9c      9860cc06       invalid\r\n            0x98541ea0      30847090       addiu a0, a0, 0x7090\r\n```\r\nbut gdb disassemble like:\r\n```sh\r\nDump of assembler code for function libFS_copy:\r\n   0x98541e8d <+0>:     4f e5               addiu   sp,sp,-56\r\n   0x98541e8e <+2>:     22 fd d0 18     swm     s0-s6,ra,24(sp)\r\n   0x98541e92 <+6>:     40 e4 00 07     beqzc   a0,0x98541ea5 <libFS_copy+24>\r\n   0x98541e96 <+10>:    ae 92              bnez    a1,0x98541ebd <libFS_copy+48>\r\n   0x98541e98 <+12>:    0e 25              move    s1,a1\r\n   0x98541e9a <+14>:    41 a4 98 60     lui     a0,0x9860\r\n   0x98541e9e <+18>:    cc 06               b       0x98541ead <libFS_copy+32>\r\n   0x98541ea0 <+20>:    30 84 70 90     addiu   a0,a0,28816\r\n   0x98541ea4 <+24>:    41 a4 98 60     lui     a0,0x9860\r\n```\r\nI don't known how to configure for mips m4k instruction set.\r\nThanks.","createdAt":"2023-01-11T05:39:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1378264755","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5SK7kB","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i dont think aaa crashes. if you are running `/home/peter/bin/r2 ` without using rpath or forcing ldlibrary path you are probably mixing old and new libraries of r2 which probably have different abi and ends up causing a segfault because of that. Also r2-4.5.1 is super hyper old. there are more than 3 years of changes since that release. So please update from git or last release.\r\n\r\nthe 'mips' plugin is based on capstone, and capstone didnt supported m4k at the time, but it does now. also, bear in mind that you need to build capstone from git, because the last release of capstone and the one that is shipped in all distros is more than 6 years old and its completely useless for any modern cpu, it misses lot of instructions for arm64 or x64 for example.\r\n\r\nYou are configuring r2 properly, but you are using the wrong version of r2.\r\n```\r\nr2 -a mips -e asm.cpu=micro ...\r\n```\r\n\r\nYou can confirm the disasm works properly with rasm2:\r\n```\r\n0$ rasm2 -a mips -b32 -c micro -d 22fdd018\r\nlw t1, 0x18d0(v0)\r\n0$\r\n```\r\n\r\ni'll add micromips support to the gnu plugin today (the code is there, its just not used), and add test for this","createdAt":"2023-01-11T11:17:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1378597121","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5SPOjD","author":{"login":"tkernelcn"},"authorAssociation":"NONE","body":"@trufae Thanks for your support!\r\n\r\nIt's very strange, I `git pull` and `$ ./sys/user.sh` to build a latest version\r\nPS: before build r2, I also git clone latest capstone and build install it.\r\n```sh\r\npeter@peter-VirtualBox:~/tmp/test_radare2$ git clone -b next https://github.com/capstone-engine/capstone\r\npeter@peter-VirtualBox:~/tmp/test_radare2$ cd capstone/\r\npeter@peter-VirtualBox:~/tmp/test_radare2/capstone$ ./make.sh\r\npeter@peter-VirtualBox:~/tmp/test_radare2/capstone$ sudo ./make.sh install\r\n```\r\n```sh\r\npeter@peter-VirtualBox:~/tmp/test_radare2$ r2 -v\r\nradare2 5.8.1 22 @ linux-x86-64 git.5.8.1\r\ncommit: a740698298113d3b4c18c45a9543616d27cd7218 build: 2023-01-12__09:55:27\r\npeter@peter-VirtualBox:~/tmp/test_radare2$ rasm2 -a mips -b32 -c micro -d 22fdd018\r\nlw t1, 0x18d0(v0)\r\npeter@peter-VirtualBox:~/tmp/test_radare2$ rasm2 -a mips -b32 -c micro -d 4fe522fdd01840e40007ae920e2541a49860cc0630847090\r\ninvalid\r\nsb a2, -0x1bc0(s0)\r\naddu16 a2, s0, s0\r\nslti s5, t6, 0x250e\r\ninvalid\r\naddu16 a1, a2, a0\r\nmovep a1, a2, zero, v1\r\npeter@peter-VirtualBox:~/tmp/test_radare2$ \r\n```\r\n\r\nattachment  for comparition:\r\ngdb disassemble:\r\n```sh\r\n0x98541e8d <+0>:     4f e5           addiu   sp,sp,-56\r\n0x98541e8e <+2>:     22 fd d0 18     swm     s0-s6,ra,24(sp)\r\n0x98541e92 <+6>:     40 e4 00 07     beqzc   a0,0x98541ea5 <libFS_copy+24>\r\n0x98541e96 <+10>:    ae 92           bnez    a1,0x98541ebd <libFS_copy+48>\r\n0x98541e98 <+12>:    0e 25           move    s1,a1\r\n0x98541e9a <+14>:    41 a4 98 60     lui     a0,0x9860\r\n0x98541e9e <+18>:    cc 06           b       0x98541ead <libFS_copy+32>\r\n0x98541ea0 <+20>:    30 84 70 90     addiu   a0,a0,28816\r\n0x98541ea4 <+24>:    41 a4 98 60     lui     a0,0x9860\r\n0x98541ea8 <+28>:    30 84 70 74     addiu   a0,a0,28788\r\n0x98541eac <+32>:    f4 1c 79 a0     jal     0x9838f341 <puts>\r\n0x98541eb0 <+36>:    32 20 ff ff     li      s1,-1\r\n```\r\nt32 disassemble:(not same elf, so not same address, but same instructions)\r\n```sh\r\nT:9852F9B4|4FE5      libFS_copy:  addiusp   #-0x0E\r\nT:9852F9B6|22FDD018               swm32     r16,r17,r18,r19,r20,r21,r22,r31,0x18(r29)   ; r16,r17,r18,r19,r20,r21,r22,r31,24(r29)\r\nT:9852F9BA|40E40007               beqzc     r4,0x9852F9CC   ; fileName,.L88\r\nT:9852F9BE|AE92                   bnez16    r5,0x9852F9E4   ; newFileName,.L103\r\nT:9852F9C0|0E25                   move16    r17,r5         ; r17,newFileName\r\nT:9852F9C2|41A4985F               lui       r4,#0x985F     ; fileName,#39007\r\nT:9852F9C6|CC06                   b16       0x9852F9D4     ; .L105\r\nT:9852F9C8|3084A9C8               addiu     r4,r4,#0xA9C8\r\nT:9852F9CC|41A4985F    .L88:      lui       r4,#0x985F     ; fileName,#39007\r\nT:9852F9D0|3084A9AC               addiu     r4,r4,#0xA9AC\r\nT:9852F9D4|F41C79A0    .L105:     jal       0x9038F340\r\nT:9852F9D8|3220FFFF               addiu     r17,r0,#0xFFFF\r\n```\r\n\r\nthere are also have invalid in `r2` disassemble\r\n\r\nThanks.","createdAt":"2023-01-12T02:11:56Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1379723459","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5SQx7y","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"This is probably because of missing instructions in capstone. Feel free to test cstool and report the missing instructions there.\r\n\r\ni didnt had time to finish the mips.gnu integration of Micromips yesterday. But will finish it today for sure. I will add tests and ping u back when done","createdAt":"2023-01-12T10:37:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1380130546","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5SSezM","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"you can try with -a mips.gnu -c micro -b 32:\r\n\r\n```\r\n$ rasm2 -a mips.gnu -b32  -c micro -d 4fe522fdd01840e40007ae920e2541a49860cc0630847090\r\nsb a2, -7104(s0)\r\naddu a2, s0, s0\r\nsll v0, s0, 7\r\nlwl a0, 1740(t8)\r\nmovep a1,a2, zero, v1\r\n```\r\n\r\nso it works as expected now. I'm closing the ticket, can you please test cstool and report the missing instructions to https://github.com/capstone-engine/capstone?\r\n\r\nthanks!","createdAt":"2023-01-12T15:36:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1380576460","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5SUzIO","author":{"login":"tkernelcn"},"authorAssociation":"NONE","body":"@trufae please see the details instructions, not the same meaning with gdb disassemble result\r\n```sh\r\n0x98541e8d <+0>:     4f e5           addiu   sp,sp,-56\r\n0x98541e8e <+2>:     22 fd d0 18     swm     s0-s6,ra,24(sp)\r\n0x98541e92 <+6>:     40 e4 00 07     beqzc   a0,0x98541ea5 <libFS_copy+24>\r\n0x98541e96 <+10>:    ae 92           bnez    a1,0x98541ebd <libFS_copy+48>\r\n0x98541e98 <+12>:    0e 25           move    s1,a1\r\n0x98541e9a <+14>:    41 a4 98 60     lui     a0,0x9860\r\n0x98541e9e <+18>:    cc 06           b       0x98541ead <libFS_copy+32>\r\n0x98541ea0 <+20>:    30 84 70 90     addiu   a0,a0,28816\r\n```\r\nthe instuction `4f e5` is operate on `sp` register\r\nso it 's also not expected result yet","createdAt":"2023-01-13T01:16:39Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1381184014","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5Sc4Da","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"https://github.com/radareorg/radare2/pull/21253","createdAt":"2023-01-16T00:28:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1383301338","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Sc4Jy","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Both capstone and gnu plugins do the right thing. I overlooked the issue because i dont have any binary to test it properly. if you could provide one micromips binary for the testsuite i can add some tests and probably fix more bugs.","createdAt":"2023-01-16T00:29:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1383301746","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Sc8hw","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Check the -e flag to fix the endianness issue, after merging #21253 it should be fine, please re-try and thanks for the patience","createdAt":"2023-01-16T01:08:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1383319664","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Sc-9j","author":{"login":"tkernelcn"},"authorAssociation":"NONE","body":"hello @trufae, due to company policy can't provide the entire elf binary file, sorry for that.\r\nis it suitable that use the instructions string: `4fe522fdd01840e40007ae920e2541a49860cc0630847090`\r\n(If needed, I can dump a bigger instructions binary file for your CI test)\r\n\r\nI test the -e flag:\r\n```sh\r\n$ rasm2 -a mips.gnu -b32  -c micro -e -d 4fe522fdd01840e40007ae920e2541a49860cc0630847090\r\naddiu sp, sp, -56\r\nandi zero, t8, 0x40e4\r\ncop2 0xf5d2\r\nmove s1, a1\r\nswc1 $f3, -13306(zero)\r\naddiu a0, a0, 28816\r\n```\r\nlooks better than before, but compare with gdb's result: (also have more difference)\r\n```sh\r\n0x98541e8d <+0>:     4f e5           addiu   sp,sp,-56\r\n0x98541e8e <+2>:     22 fd d0 18     swm     s0-s6,ra,24(sp)\r\n0x98541e92 <+6>:     40 e4 00 07     beqzc   a0,0x98541ea5 <libFS_copy+24>\r\n0x98541e96 <+10>:    ae 92           bnez    a1,0x98541ebd <libFS_copy+48>\r\n0x98541e98 <+12>:    0e 25           move    s1,a1\r\n0x98541e9a <+14>:    41 a4 98 60     lui     a0,0x9860\r\n0x98541e9e <+18>:    cc 06           b       0x98541ead <libFS_copy+32>\r\n0x98541ea0 <+20>:    30 84 70 90     addiu   a0,a0,28816\r\n```\r\n\r\nso maybe have other missing?\r\n\r\nThanks a lot.","createdAt":"2023-01-16T01:23:40Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1383329635","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5SfZ-l","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"what is missing is that the PR fixing the bug wasnt merged so you had to test the branch, not master. please try again on master","createdAt":"2023-01-16T12:12:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1383964581","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5SfaST","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"if you find any binary, even a hello world (or compile radareorg/r0 for example) using the micromips toolchain send it for the testsuite, and i'll add tests around it. to improve the quality of the analysis and avoid breaking changes in the near fuiture when i move this plugin into the arch","createdAt":"2023-01-16T12:13:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1383965843","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5SiTHd","author":{"login":"tkernelcn"},"authorAssociation":"NONE","body":"cool, It works, Thanks your great effort!\r\n```sh\r\n$ rasm2 -a mips.gnu -b32  -c micro -e -d 4fe522fdd01840e40007ae920e2541a49860cc0630847090\r\naddiu sp, sp, -56\r\nswm s0-s6,ra, 24(sp)\r\nbeqzc a0, 0x00000019\r\nbnez a1, 0x00000031\r\nmove s1, a1\r\nlui a0, 0x9860\r\nb 0x00000021\r\naddiu a0, a0, 28816\r\n```\r\nsame with gdb result:\r\n```sh\r\n0x98541e8d <+0>:     4f e5           addiu   sp,sp,-56\r\n0x98541e8e <+2>:     22 fd d0 18     swm     s0-s6,ra,24(sp)\r\n0x98541e92 <+6>:     40 e4 00 07     beqzc   a0,0x98541ea5 <libFS_copy+24>\r\n0x98541e96 <+10>:    ae 92           bnez    a1,0x98541ebd <libFS_copy+48>\r\n0x98541e98 <+12>:    0e 25           move    s1,a1\r\n0x98541e9a <+14>:    41 a4 98 60     lui     a0,0x9860\r\n0x98541e9e <+18>:    cc 06           b       0x98541ead <libFS_copy+32>\r\n0x98541ea0 <+20>:    30 84 70 90     addiu   a0,a0,28816\r\n```\r\nI will upload a binary or investigate the compiler\r\nThanks again.","createdAt":"2023-01-17T01:22:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1384722909","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5SiiG2","author":{"login":"tkernelcn"},"authorAssociation":"NONE","body":"also have confusion on r2 disassemble display:(many `unaligned` error instructions)\r\n```sh\r\n$ r2 -a mips.gnu -b 32 -e asm.cpu=micro -e cfg.bigendian=true /mnt/share/AppFW_flash_no_fs.elf\r\n[0x98384b0f]> aaa\r\n[0x98384b0f]> s sym.libFS_copy\r\n[0x98541e8c]> s\r\n0x98541e8c\r\n[0x98541e8c]> pdf\r\nâ”Œ 348: sym.libFS_copy ();\r\nâ”‚       â•Ž   0x98541e8c      4fe5           addiu sp, sp, -56\r\nâ”‚       â•Ž   0x98541e8e      22             unaligned\r\nâ”‚       â•Ž   0x98541e8f      fd             unaligned\r\nâ”‚       â•Ž   0x98541e90      d01840e4       andi zero, t8, 0x40e4\r\nâ”‚       â•Ž   0x98541e94      0007ae92       cop2 0xf5d2\r\nâ”‚       â•Ž   0x98541e98      0e25           move s1, a1\r\nâ”‚       â•Ž   0x98541e9a      41             unaligned\r\nâ”‚       â•Ž   0x98541e9b      a4             unaligned\r\nâ”‚       â•Ž   0x98541e9c      9860cc06       swc1 fv1f, -13306(zero)\r\nâ”‚       â•Ž   0x98541ea0      30847090       addiu a0, a0, 28816\r\nâ”‚       â•Ž   ;-- .L88:\r\nâ”‚       â•Ž   0x98541ea4      41a49860       lui a0, 0x9860\r\nâ”‚       â•Ž   0x98541ea8      30847074       addiu a0, a0, 28788\r\nâ”‚       â•Ž   ;-- .L105:\r\nâ”‚       â•Ž   0x98541eac      f41c79a0       jal 0x9838f341\r\nâ”‚       â•Ž   0x98541eb0      3220ffff       li s1, -1\r\nâ”‚       â•Ž   0x98541eb4      0c51           move v0, s1\r\nâ”‚       â•Ž   ;-- .L106:\r\nâ”‚       â•Ž   0x98541eb6      22             unaligned\r\nâ”‚       â•Ž   0x98541eb7      fd             unaligned\r\n.......\r\n[0x98541e8c]> pd 20@sym.libFS_copy\r\nâ”Œ 348: sym.libFS_copy ();\r\nâ”‚           0x98541e8c      4fe5           addiu sp, sp, -56\r\nâ”‚           0x98541e8e      22fd           unaligned\r\nâ”‚           0x98541e90      d01840e4       andi zero, t8, 0x40e4\r\nâ”‚           0x98541e94      0007ae92       cop2 0xf5d2\r\nâ”‚           0x98541e98      0e25           move s1, a1\r\nâ”‚           0x98541e9a      41a4           unaligned\r\nâ”‚           0x98541e9c      9860cc06       swc1 fv1f, -13306(zero)\r\nâ”‚           0x98541ea0      30847090       addiu a0, a0, 28816\r\nâ”‚           ;-- .L88:\r\nâ”‚           0x98541ea4      41a49860       lui a0, 0x9860\r\nâ”‚           0x98541ea8      30847074       addiu a0, a0, 28788\r\nâ”‚           ;-- .L105:\r\nâ”‚           0x98541eac      f41c79a0       jal 0x9838f341\r\nâ”‚           0x98541eb0      3220ffff       li s1, -1\r\nâ”‚           0x98541eb4      0c51           move v0, s1\r\n```\r\nso any other configurations needed?\r\nThanks.\r\n\r\nBTW: a lot of warning show when `aaa` like:\r\n```sh\r\nWARN: Analysis of 0x98384d28 stopped at 0x983b241c, use a higher anal.depth to continue\r\nWARN: Analysis of 0x98384d28 stopped at 0x983a10b8, use a higher anal.depth to continue\r\nWARN: Analysis of 0x98384d28 stopped at 0x983a1e6c, use a higher anal.depth to continue\r\n\r\nWARN: No SN reg alias for 'mips.gnu'\r\nWARN: No SN reg alias for 'mips.gnu'\r\nWARN: No SN reg alias for 'mips.gnu'\r\nWARN: No SN reg alias for 'mips.gnu'\r\nWARN: No SN reg alias for 'mips.gnu'\r\n```","createdAt":"2023-01-17T03:19:56Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1384784310","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5SizVt","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Ill take the bytes of this disassembly as a sample and fix all those warnings today. Thanks for reporting!","createdAt":"2023-01-17T05:32:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1384854893","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Si-yY","author":{"login":"tkernelcn"},"authorAssociation":"NONE","body":"[libFS_copy_binary.zip](https://github.com/radareorg/radare2/files/10432027/libFS_copy_binary.zip)\r\n\r\nupload the memory instructions binary for your CI test\r\ncompare with the gdb results:\r\n```sh\r\nDump of assembler code for function libFS_copy:\r\n   0x98542285 <+0>:     4f e5   addiu   sp,sp,-56\r\n   0x98542286 <+2>:     22 fd d0 18     swm     s0-s6,ra,24(sp)\r\n   0x9854228a <+6>:     40 e4 00 07     beqzc   a0,0x9854229d <libFS_copy+24>\r\n   0x9854228e <+10>:    ae 92   bnez    a1,0x985422b5 <libFS_copy+48>\r\n   0x98542290 <+12>:    0e 25   move    s1,a1\r\n   0x98542292 <+14>:    41 a4 98 60     lui     a0,0x9860\r\n   0x98542296 <+18>:    cc 06   b       0x985422a5 <libFS_copy+32>\r\n   0x98542298 <+20>:    30 84 75 58     addiu   a0,a0,30040\r\n   0x9854229c <+24>:    41 a4 98 60     lui     a0,0x9860\r\n   0x985422a0 <+28>:    30 84 75 3c     addiu   a0,a0,30012\r\n   0x985422a4 <+32>:    f4 1c 79 a0     jal     0x9838f341 <puts>\r\n   0x985422a8 <+36>:    32 20 ff ff     li      s1,-1\r\n   0x985422ac <+40>:    0c 51   move    v0,s1\r\n   0x985422ae <+42>:    22 fd 50 18     lwm     s0-s6,ra,24(sp)\r\n   0x985422b2 <+46>:    47 0e   jraddiusp       56\r\n   0x985422b4 <+48>:    f4 2a 50 fc     jal     0x9854a1f9 <fsm_filelength>\r\n   0x985422b8 <+52>:    00 04 92 90     move    s2,a0\r\n   0x985422bc <+56>:    40 42 00 0f     bgez    v0,0x985422df <libFS_copy+90>\r\n   0x985422c0 <+60>:    0e 02   move    s0,v0\r\n   0x985422c2 <+62>:    f4 2a 51 fc     jal     0x9854a3f9 <fsm_getlasterror>\r\n   0x985422c6 <+66>:    32 20 ff fe     li      s1,-2\r\n   0x985422ca <+70>:    41 a4 98 60     lui     a0,0x9860\r\n   0x985422ce <+74>:    85 4a   movep   a2,a3,s2,s0\r\n   0x985422d0 <+76>:    0c a2   move    a1,v0\r\n   0x985422d2 <+78>:    f4 1c 79 06     jal     0x9838f20d <printf>\r\n   0x985422d6 <+82>:    30 84 75 78     addiu   a0,a0,30072\r\n   0x985422da <+86>:    cf e9   b       0x985422af <libFS_copy+42>\r\n   0x985422dc <+88>:    0c 51   move    v0,s1\r\n   0x985422de <+90>:    41 a5 98 61     lui     a1,0x9861\r\n   0x985422e2 <+94>:    30 a5 36 54     addiu   a1,a1,13908\r\n   0x985422e6 <+98>:    f4 27 be d0     jal     0x984f7da1 <__wrap_fopen>\r\n   0x985422ea <+102>:   00 12 22 90     move    a0,s2\r\n   0x985422ee <+106>:   ad 0e   bnez    v0,0x9854230d <libFS_copy+136>\r\n   0x985422f0 <+108>:   0e 82   move    s4,v0\r\n   0x985422f2 <+110>:   f4 2a 51 fc     jal     0x9854a3f9 <fsm_getlasterror>\r\n   0x985422f6 <+114>:   32 20 ff fd     li      s1,-3\r\n   0x985422fa <+118>:   41 a4 98 60     lui     a0,0x9860\r\n   0x985422fe <+122>:   84 54   movep   a1,a2,v0,s2\r\n   0x98542300 <+124>:   f4 1c 79 06     jal     0x9838f20d <printf>\r\n   0x98542304 <+128>:   30 84 75 a8     addiu   a0,a0,30120\r\n   0x98542308 <+132>:   cf d2   b       0x985422af <libFS_copy+42>\r\n   0x9854230a <+134>:   0c 51   move    v0,s1\r\n   0x9854230c <+136>:   41 a5 98 5d     lui     a1,0x985d\r\n   0x98542310 <+140>:   30 a5 b9 40     addiu   a1,a1,-18112\r\n   0x98542314 <+144>:   f4 27 be d0     jal     0x984f7da1 <__wrap_fopen>\r\n   0x98542318 <+148>:   00 11 22 90     move    a0,s1\r\n   0x9854231c <+152>:   ad 14   bnez    v0,0x98542347 <libFS_copy+194>\r\n   0x9854231e <+154>:   0e a2   move    s5,v0\r\n   0x98542320 <+156>:   f4 2a 51 fc     jal     0x9854a3f9 <fsm_getlasterror>\r\n   0x98542324 <+160>:   00 00 00 00     nop\r\n   0x98542328 <+164>:   41 a4 98 60     lui     a0,0x9860\r\n   0x9854232c <+168>:   84 14   movep   a1,a2,v0,s1\r\n   0x9854232e <+170>:   f4 1c 79 06     jal     0x9838f20d <printf>\r\n   0x98542332 <+174>:   30 84 75 cc     addiu   a0,a0,30156\r\n   0x98542336 <+178>:   32 20 ff fc     li      s1,-4\r\n   0x9854233a <+182>:   f4 27 be ec     jal     0x984f7dd9 <__wrap_fclose>\r\n   0x9854233e <+186>:   00 14 22 90     move    a0,s4\r\n   0x98542342 <+190>:   cf b5   b       0x985422af <libFS_copy+42>\r\n   0x98542344 <+192>:   0c 51   move    v0,s1\r\n   0x98542346 <+194>:   8c 10   beqz    s0,0x98542369 <libFS_copy+228>\r\n   0x98542348 <+196>:   0e 20   move    s1,zero\r\n   0x9854234a <+198>:   f4 27 c6 fa     jal     0x984f8df5 <pvPortMalloc>\r\n   0x9854234e <+202>:   00 10 22 90     move    a0,s0\r\n   0x98542352 <+206>:   ad 10   bnez    v0,0x98542375 <libFS_copy+240>\r\n   0x98542354 <+208>:   0e 62   move    s3,v0\r\n   0x98542356 <+210>:   41 a4 98 60     lui     a0,0x9860\r\n   0x9854235a <+214>:   0c b0   move    a1,s0\r\n   0x9854235c <+216>:   f4 1c 79 06     jal     0x9838f20d <printf>\r\n   0x98542360 <+220>:   30 84 75 f4     addiu   a0,a0,30196\r\n   0x98542364 <+224>:   32 20 ff fb     li      s1,-5\r\n   0x98542368 <+228>:   f4 27 be ec     jal     0x984f7dd9 <__wrap_fclose>\r\n   0x9854236c <+232>:   00 15 22 90     move    a0,s5\r\n   0x98542370 <+236>:   cf e4   b       0x9854233b <libFS_copy+182>\r\n   0x98542372 <+238>:   0c 00   nop\r\n   0x98542374 <+240>:   85 78   movep   a2,a3,s0,s4\r\n   0x98542376 <+242>:   ee 81   li      a1,1\r\n   0x98542378 <+244>:   f4 27 bf 06     jal     0x984f7e0d <__wrap_fread>\r\n   0x9854237c <+248>:   00 02 22 90     move    a0,v0\r\n   0x98542380 <+252>:   0e c2   move    s6,v0\r\n   0x98542382 <+254>:   02 02 13 50     slt     v0,v0,s0\r\n   0x98542386 <+258>:   8d 15   beqz    v0,0x985423b3 <libFS_copy+302>\r\n   0x98542388 <+260>:   0c f5   move    a3,s5\r\n   0x9854238a <+262>:   f4 2a 51 fc     jal     0x9854a3f9 <fsm_getlasterror>\r\n   0x9854238e <+266>:   32 20 ff fa     li      s1,-6\r\n   0x98542392 <+270>:   41 a4 98 60     lui     a0,0x9860\r\n   0x98542396 <+274>:   85 58   movep   a2,a3,s0,s2\r\n   0x98542398 <+276>:   0c a2   move    a1,v0\r\n   0x9854239a <+278>:   30 84 76 18     addiu   a0,a0,30232\r\n   0x9854239e <+282>:   f4 1c 79 06     jal     0x9838f20d <printf>\r\n   0x985423a2 <+286>:   fa dd 00 10     sw      s6,16(sp)\r\n   0x985423a6 <+290>:   f4 27 c7 44     jal     0x984f8e89 <vPortFree>\r\n   0x985423aa <+294>:   00 13 22 90     move    a0,s3\r\n   0x985423ae <+298>:   cf dc   b       0x98542369 <libFS_copy+228>\r\n   0x985423b0 <+300>:   0c 00   nop\r\n   0x985423b2 <+302>:   0c d0   move    a2,s0\r\n   0x985423b4 <+304>:   ee 81   li      a1,1\r\n   0x985423b6 <+306>:   f4 27 bf 26     jal     0x984f7e4d <__wrap_fwrite>\r\n   0x985423ba <+310>:   00 13 22 90     move    a0,s3\r\n   0x985423be <+314>:   94 50 ff f2     beq     s0,v0,0x985423a7 <libFS_copy+290>\r\n   0x985423c2 <+318>:   0e c2   move    s6,v0\r\n   0x985423c4 <+320>:   f4 2a 51 fc     jal     0x9854a3f9 <fsm_getlasterror>\r\n   0x985423c8 <+324>:   32 20 ff f9     li      s1,-7\r\n   0x985423cc <+328>:   41 a4 98 60     lui     a0,0x9860\r\n   0x985423d0 <+332>:   85 58   movep   a2,a3,s0,s2\r\n   0x985423d2 <+334>:   0c a2   move    a1,v0\r\n   0x985423d4 <+336>:   30 84 76 60     addiu   a0,a0,30304\r\n   0x985423d8 <+340>:   f4 1c 79 06     jal     0x9838f20d <printf>\r\n   0x985423dc <+344>:   fa dd 00 10     sw      s6,16(sp)\r\n   0x985423e0 <+348>:   cf e2   b       0x985423a7 <libFS_copy+290>\r\n   0x985423e2 <+350>:   0c 00   nop\r\n   0x985423e4 <+0>:     09 c0   lbu     v1,0(a0)\r\nEnd of assembler dump.\r\n```","createdAt":"2023-01-17T06:37:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1384901784","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5SjBmZ","author":{"login":"tkernelcn"},"authorAssociation":"NONE","body":"[test_micro-mips.zip](https://github.com/radareorg/radare2/files/10432105/test_micro-mips.zip)\r\ncan compare the result with gdb output\r\n```sh\r\nDump of assembler code for function main:\r\n   0x004000d1 <+0>:     lui     gp,0x2\r\n   0x004000d5 <+4>:     addiu   gp,gp,-32225\r\n   0x004000d9 <+8>:     addu    gp,gp,t9\r\n   0x004000dd <+12>:    addiu   sp,sp,-40\r\n   0x004000df <+14>:    lw      t9,-32740(gp)\r\n   0x004000e3 <+18>:    sw      gp,16(sp)\r\n   0x004000e7 <+22>:    sw      ra,36(sp)\r\n   0x004000e9 <+24>:    addiu   a1,sp,24\r\n   0x004000eb <+26>:    jalr    t9\r\n   0x004000ed <+28>:    li      a0,5\r\n   0x004000f1 <+32>:    lw      ra,36(sp)\r\n   0x004000f3 <+34>:    jraddiusp       40\r\nEnd of assembler dump.\r\nDump of assembler code for function nthFibonacciTerm:\r\n   0x00400221 <+0>:     lui     gp,0x2\r\n   0x00400225 <+4>:     addiu   gp,gp,-32561\r\n   0x00400229 <+8>:     addu    gp,gp,t9\r\n   0x0040022d <+12>:    addiu   sp,sp,-56\r\n   0x0040022f <+14>:    sw      gp,16(sp)\r\n   0x00400233 <+18>:    swm     s0-s6,ra,24(sp)\r\n   0x00400237 <+22>:    beqz    a1,0x400243 <nthFibonacciTerm+34>\r\n   0x00400239 <+24>:    move    s0,zero\r\n   0x0040023b <+26>:    bgez    a0,0x40024b <nthFibonacciTerm+42>\r\n   0x0040023f <+30>:    li      v0,-1\r\n   0x00400241 <+32>:    sw      v0,0(a1)\r\n   0x00400243 <+34>:    move    v0,s0\r\n   0x00400245 <+36>:    lwm     s0-s6,ra,24(sp)\r\n   0x00400249 <+40>:    jraddiusp       56\r\n   0x0040024b <+42>:    beqz    a0,0x4002a5 <nthFibonacciTerm+132>\r\n   0x0040024d <+44>:    move    s1,a1\r\n   0x0040024f <+46>:    move    s2,a0\r\n   0x00400251 <+48>:    li      s5,2\r\n   0x00400255 <+52>:    move    s4,zero\r\n   0x00400257 <+54>:    li      s0,1\r\n   0x00400259 <+56>:    li      s3,1\r\n   0x0040025d <+60>:    li      s6,1\r\n   0x00400261 <+64>:    sw      zero,0(a1)\r\n   0x00400263 <+66>:    slt     v0,s5,s2\r\n   0x00400267 <+70>:    bnez    v0,0x400279 <nthFibonacciTerm+88>\r\n   0x00400269 <+72>:    lw      t9,-32744(gp)\r\n   0x0040026d <+76>:    li      v0,1\r\n   0x0040026f <+78>:    beqz    s4,0x400243 <nthFibonacciTerm+34>\r\n   0x00400273 <+82>:    sw      v0,0(s1)\r\n   0x00400275 <+84>:    b       0x400243 <nthFibonacciTerm+34>\r\n   0x00400277 <+86>:    move    s0,s3\r\n   0x00400279 <+88>:    movep   a0,a1,s3,s0\r\n   0x0040027b <+90>:    jalr    t9\r\n   0x0040027d <+92>:    nop\r\n   0x00400281 <+96>:    bne     v0,s6,0x40028d <nthFibonacciTerm+108>\r\n   0x00400285 <+100>:   lw      gp,16(sp)\r\n   0x00400287 <+102>:   li      s0,-1\r\n   0x00400289 <+104>:   b       0x400243 <nthFibonacciTerm+34>\r\n   0x0040028b <+106>:   sw      zero,0(s1)\r\n   0x0040028d <+108>:   bnez    s4,0x40029f <nthFibonacciTerm+126>\r\n   0x00400291 <+112>:   addu    v0,s3,s0\r\n   0x00400295 <+116>:   move    s3,v0\r\n   0x00400297 <+118>:   li      s4,1\r\n   0x0040029b <+122>:   b       0x400263 <nthFibonacciTerm+66>\r\n   0x0040029d <+124>:   addiu   s5,s5,1\r\n   0x0040029f <+126>:   move    s0,v0\r\n   0x004002a1 <+128>:   b       0x40029b <nthFibonacciTerm+122>\r\n   0x004002a3 <+130>:   move    s4,zero\r\n   0x004002a5 <+132>:   li      v0,1\r\n   0x004002a7 <+134>:   move    s0,zero\r\n   0x004002a9 <+136>:   b       0x400243 <nthFibonacciTerm+34>\r\n   0x004002ab <+138>:   sw      v0,0(a1)\r\nEnd of assembler dump.\r\n```\r\n\r\n\r\nthis elf for your CI test\r\nplease also try to use `radare2` to parser the `test.elf`,  Thanks.\r\n","createdAt":"2023-01-17T06:54:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1384913305","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5SjCHY","author":{"login":"tkernelcn"},"authorAssociation":"NONE","body":"I try the upstairs uploaded test.elf, also have many `unaligned` in disassemble\r\n\r\n```sh\r\n$ r2 -a mips.gnu -b 32 -e asm.cpu=micro -e cfg.bigendian=true ./test.elf\r\n -- Pass '-j' to rabin2 to get the information of the binary in JSON format.\r\n[0x004000d0]> aaa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\nINFO: Analyze function calls (aac)\r\nINFO: Analyze len bytes of instructions for references (aar)\r\nINFO: Finding and parsing C++ vtables (avrr)\r\nINFO: Finding xrefs in noncode section (e anal.in=io.maps.x)\r\nINFO: Analyze value pointers (aav)\r\nINFO: aav: 0x00400000-0x004002ec in 0x400000-0x4002ec\r\nINFO: Emulate functions to find computed references (aaef)\r\nWARN: No SN reg alias for 'mips.gnu'\r\nWARN: No SN reg alias for 'mips.gnu'\r\nWARN: No SN reg alias for 'mips.gnu'\r\nWARN: No SN reg alias for 'mips.gnu'\r\nWARN: No SN reg alias for 'mips.gnu'\r\nWARN: No SN reg alias for 'mips.gnu'\r\nINFO: Type matching analysis for all functions (aaft)\r\nINFO: Propagate noreturn information (aanr)\r\nINFO: Integrate dwarf function information\r\nINFO: Use -AA or aaaa to perform additional experimental analysis\r\n[0x004000d0]> s sym.main\r\n[0x004000d0]> s\r\n0x4000d0\r\n[0x004000d0]> pdf\r\n            ;-- section..text:\r\n            ;-- .text:\r\n            ;-- main:\r\n            ;-- entry0:\r\n            ;-- _ftext:\r\nâ”Œ 36: int dbg.main (int argc, char **argv, char **envp);\r\nâ”‚           ; var int success @ fp+0x0\r\nâ”‚           0x004000d0      41bc0002       lui gp, 0x2                 ; int main(int argc,char ** argv);\r\nâ”‚           0x004000d4      339c821f       addiu gp, gp, -32225\r\nâ”‚           0x004000d8      033ce150       addu gp, gp, t9\r\nâ”‚           0x004000dc      4fed           addiu sp, sp, -40\r\nâ”‚           0x004000de      ff             unaligned\r\nâ”‚           0x004000df      3c             unaligned                   ; main.c:65\r\nâ”‚           0x004000e0      801cfb9d       0x801cfb9d\r\nâ”‚           0x004000e4      0010cbe9       0x10cbe9\r\nâ”‚           0x004000e8      6e8d           addiu a1, sp, 24\r\nâ”‚           0x004000ea      45             unaligned\r\nâ”‚           0x004000eb      d9             unaligned                   ; main.c:62\r\nâ”‚           0x004000ec      30800005       li a0, 5\r\nâ”‚           0x004000f0      4be9           lw ra, 36(sp)\r\nâ””           0x004000f2      47             unaligned\r\nâ””           0x004000f3      0a             unaligned                   ; main.c:65\r\n[0x004000d0]> \r\n```","createdAt":"2023-01-17T06:57:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1384915416","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5Skyet","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"everything should be fixed here https://github.com/radareorg/radare2/pull/21262\r\n\r\nthanks for the snippets and the test binary!! i can finally test it properly and i think after merging this it will be good :) ðŸ¤ž ","createdAt":"2023-01-17T12:48:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1385375661","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Sk35k","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i have also extended the ELF parser to set the right asm.cpu when loading a micromips binary ðŸ‘ ","createdAt":"2023-01-17T13:07:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1385397860","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Sonhr","author":{"login":"tkernelcn"},"authorAssociation":"NONE","body":"I `git pull` and rebuild\r\n```sh\r\n$ r2 -v\r\nradare2 5.8.1 44 @ linux-x86-64 git.5.8.1\r\ncommit: 9fac6494957d9bd41fcb8dc34b6d3fe444a05378 build: 2023-01-18__09:51:20\r\n```\r\nthe disassemble result not same with upstairs GDB result: (with a lot of `unaligned` instructions)\r\n```sh\r\n$ r2 -a mips.gnu -b 32 -e asm.cpu=micro -e cfg.bigendian=true ./test.elf\r\n -- Pass '-j' to rabin2 to get the information of the binary in JSON format.\r\n[0x004000d0]> aaa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\nINFO: Analyze function calls (aac)\r\nINFO: Analyze len bytes of instructions for references (aar)\r\nINFO: Finding and parsing C++ vtables (avrr)\r\nINFO: Finding xrefs in noncode section (e anal.in=io.maps.x)\r\nINFO: Analyze value pointers (aav)\r\nINFO: aav: 0x00400000-0x004002ec in 0x400000-0x4002ec\r\nINFO: Emulate functions to find computed references (aaef)\r\nINFO: Type matching analysis for all functions (aaft)\r\nINFO: Propagate noreturn information (aanr)\r\nINFO: Integrate dwarf function information\r\nINFO: Use -AA or aaaa to perform additional experimental analysis\r\n[0x004000d0]> pdf@sym.main\r\n            ;-- section..text:\r\n            ;-- .text:\r\n            ;-- main:\r\n            ;-- entry0:\r\n            ;-- _ftext:\r\nâ”Œ 36: int dbg.main (int argc, char **argv, char **envp);\r\nâ”‚           ; var int success @ fp+0x0\r\nâ”‚           0x004000d0      41bc0002       lui gp, 0x2                 ; int main(int argc,char ** argv);\r\nâ”‚           0x004000d4      339c821f       addiu gp, gp, -32225\r\nâ”‚           0x004000d8      033ce150       addu gp, gp, t9\r\nâ”‚           0x004000dc      4fed           addiu sp, sp, -40\r\n..\r\nâ”‚           0x004000df      3c             unaligned                   ; main.c:65\r\nâ”‚           0x004000e0      801cfb9d       0x801cfb9d\r\nâ”‚           0x004000e4      0010cbe9       0x10cbe9\r\nâ”‚           0x004000e8      6e8d           addiu a1, sp, 24\r\n..\r\nâ”‚           0x004000eb      d9             unaligned                   ; main.c:62\r\nâ”‚           0x004000ec      30800005       li a0, 5\r\nâ”‚           0x004000f0      4be9           lw ra, 36(sp)\r\n..\r\nâ””           0x004000f3      0a             unaligned                   ; main.c:65\r\n[0x004000d0]> pdf@sym.nthFibonacciTerm\r\nâ”Œ 140: sym.nthFibonacciTerm ();\r\nâ”‚       â•Ž   0x00400220      41bc0002       lui gp, 0x2                 ; main.c:12\r\nâ”‚       â•Ž   0x00400224      339c80cf       addiu gp, gp, -32561\r\nâ”‚       â•Ž   0x00400228      033ce150       addu gp, gp, t9\r\nâ”‚       â•Ž   0x0040022c      4fe5           addiu sp, sp, -56\r\n..\r\nâ”‚       â•Ž   0x0040022f      9d             unaligned\r\nâ”‚       â•Ž   0x00400230      001022fd       0x1022fd\r\nâ”‚       â•Ž   0x00400234      d0188e85       andi zero, t8, 0x8e85\r\nâ”‚       â•Ž   0x00400238      0e00           move s0, zero\r\n..\r\nâ”‚       â•Ž   0x0040023b      44             unaligned                   ; main.c:22\r\nâ”‚       â•Ž   0x0040023c      0006ed7f       0x6ed7f\r\nâ”‚       â•Ž   0x00400240      e950           sw v0, 0(a1)\r\nâ”‚       â•Ž   ;-- .L2:\r\n..\r\nâ”‚       â•Ž   0x00400243      50             unaligned                   ; main.c:59\r\nâ”‚       â•Ž   0x00400244      22fd5018       lwm s0-s6,ra, 24(sp)\r\nâ”‚       â•Ž   ; CODE XREF from sym.register_tm_clones @ 0x400130(x)\r\nâ”‚       â•Ž   0x00400248      470e           jraddiusp 56\r\nâ”‚       â•Ž   ;-- .L4:\r\n..\r\nâ”‚       â•Ž   0x0040024b      2c             unaligned                   ; main.c:27\r\nâ”‚       â•Ž   0x0040024c      0e25           move s1, a1\r\n..\r\nâ”‚       â•Ž   0x0040024f      44             unaligned\r\nâ”‚       â•Ž   0x00400250      32a00002       li s5, 2\r\nâ”‚       â•Ž   0x00400254      0e80           move s4, zero\r\n..\r\nâ”‚       â•Ž   0x00400257      01             unaligned\r\nâ”‚       â•Ž   0x00400258      32600001       li s3, 1\r\nâ”‚       â•Ž   0x0040025c      32c00001       li s6, 1\r\nâ”‚       â•Ž   0x00400260      e850           sw zero, 0(a1)\r\nâ”‚       â•Ž   ;-- .L6:\r\n..\r\nâ”‚       â•Ž   0x00400263      55             unaligned                   ; main.c:37\r\nâ”‚       â””â”€< 0x00400264      1350ad08       addi k0, s0, -21240\r\nâ”‚           0x00400268      ff3c8018       lw t9, -32744(gp)\r\nâ”‚           0x0040026c      ed01           li v0, 1\r\n..\r\nâ”‚           0x0040026f      14             unaligned                   ; main.c:52\r\nâ”‚           0x00400270      ffe8e910       lw ra, -5872(t0)\r\nâ”‚           0x00400274      cfe6           b 0x00400243\r\n..\r\nâ”‚           0x00400277      13             unaligned\r\nâ”‚           ;-- .L10:\r\nâ”‚           0x00400278      86cc           movep a0,a1, s3, s0         ; [0x45d9:2]=0xffff\r\n..\r\nâ”‚           0x0040027b      d9             unaligned\r\nâ”‚           0x0040027c      00000000       nop\r\nâ”‚           0x00400280      b6c20004       bne v0, s6, 0x0040028d\r\nâ”‚           0x00400284      4b84           lw gp, 16(sp)\r\n..\r\nâ”‚           0x00400287      7f             unaligned                   ; main.c:40\r\nâ”‚           0x00400288      cfdc           b 0x00400243\r\n..\r\nâ”‚           0x0040028b      10             unaligned\r\nâ”‚           ;-- .L7:\r\nâ”‚           0x0040028c      b4140007       bnez s4, 0x0040029f\r\nâ”‚           0x00400290      02131150       addu v0, s3, s0\r\nâ”‚           0x00400294      0e62           move s3, v0\r\n..\r\nâ”‚           0x00400297      80             unaligned                   ; main.c:45\r\nâ”‚           0x00400298  ~   0001cfe3       0x1cfe3\r\nâ”‚           ;-- .L9:\r\n..\r\nâ”‚           0x0040029b      e3             unaligned                   ; main.c:37\r\nâ”‚           0x0040029c      4ea2           addiu s5, s5, 1\r\nâ”‚           ;-- .L8:\r\n..\r\nâ”‚           0x0040029f      02             unaligned                   ; main.c:47\r\nâ”‚           0x004002a0      cffc           b 0x0040029b\r\n..\r\nâ”‚           0x004002a3      80             unaligned\r\nâ”‚           ;-- .L5:\r\nâ”‚           0x004002a4      ed01           li v0, 1\r\n..\r\nâ”‚           0x004002a7      00             unaligned                   ; main.c:29\r\nâ”‚           0x004002a8      cfcc           b 0x00400243\r\n..\r\nâ””           0x004002ab      50             unaligned\r\n[0x004000d0]>\r\n```\r\nis there any other `PR`  pending or needed be Merge?\r\nThanks.","createdAt":"2023-01-18T02:23:46Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1386379371","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5TXxek","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"that looks correct to me, also from rasm2\r\n\r\n```\r\n$ rasm2 -a mips.gnu -b32 -e -c micro -d 4fe522fdd01840e40007ae920e2541a49860cc0630847090\r\naddiu sp, sp, -56\r\nswm s0-s6,ra, 24(sp)\r\nbeqzc a0, 0x00000019\r\nbnez a1, 0x00000031\r\nmove s1, a1\r\nlui a0, 0x9860\r\nb 0x00000021\r\naddiu a0, a0, 28816\r\n$\r\n```\r\n\r\n<img width=\"549\" alt=\"Screenshot 2023-01-20 at 18 45 31\" src=\"https://user-images.githubusercontent.com/6431515/213770206-9f467f88-e907-4cb1-abcf-47f915e41f7b.png\">\r\n\r\nThe output from capstone is different from the gnu one, but you are free to use the one you like. Also i dont have much more time to improve the mips support before this release, and the remaining things should be easy to do, so i would appreciate if you try to extend the current implementation by sending PRs with your findings, test capstone and report bugs in there.\r\n\r\nMaybe on sunday i have some spare time to get my hands on this again, but i have other priorities in my plate right now. please confirm you have the same behaviour as i do","createdAt":"2023-01-20T17:51:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1398740900","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5TYBc1","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i found the reason of the invalid instructions in the middle of the disasm and should be fixed in master","createdAt":"2023-01-20T18:56:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1398806325","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5TYBiv","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"the red instructions in the mips.gnu plugin is because the analysis is not as complete as in the capstone plugin","createdAt":"2023-01-20T18:57:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1398806703","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5ToWEJ","author":{"login":"tkernelcn"},"authorAssociation":"NONE","body":"already got great achievement now, seems `pd` works well but `pdf` not\r\n1,missing some instructions bytes let `unaligned` error\r\n2, command `axt` and `axf` also not work, no result output\r\n\r\n![image](https://user-images.githubusercontent.com/90441159/214480126-72023ba0-dbfd-4cf8-9ea3-682a4ddaa5b5.png)","createdAt":"2023-01-25T04:31:29Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21246#issuecomment-1403085065","viewerDidAuthor":false}],"number":21246,"title":"disassemble mips m4k architechture instructions confusion, and `Cannot find function at`"},{"body":"## Environment\r\n\r\n```sh\r\nWed Dec 28 03:22:07 PM EST 2022\r\nradare2 5.8.1 29769 @ linux-x86-64 git.5.7.8-780-g99b72288bf\r\ncommit: 99b72288bf01b736e69ea5271935ec8b1cc2d495 build: 2022-12-28__14:38:38\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nCan not assemble with the m68k plugin\r\n\r\n## Test\r\n\r\nHello, I have the Motorolla 68000 plugin installed as shown by \r\nrasm2 \r\n\r\nThe disassembly works fine but the assembler does not work.\r\n\r\n```sh\r\n rasm2 -L\r\n_de 8           6502        LGPL3   6502/NES analysis plugin\r\n_de 32          amd29k      BSD     AMD 29k decoder\r\na__ 16 32 64    any.as      LGPL3   Uses system gnu/clang 'as' assembler (by pancake)\r\na__ 8 16 32 64  any.vasm    MIT     Use -a arm.vasm, 6502.vasm, 6809, c16x, jagrisc, m68k, pdp11, ppc, qnice, tr3200, vidcore, x86, z80 (by http://sun.hasenbraten.de/vasm/ (r2pm -ci vasm))\r\na__ 16 32 64    arm         LGPL3   custom thumb, arm32 and arm64 assembler (by pancake)\r\nade 4           i4004       LGPL3   i4004 decoder plugin (by pancake, condret)\r\n_de 16          jdh8        LGPL3   jdh-8 toy architecture\r\n_de 8 16 32 64  null        LGPL3   Fallback/Null archysis plugin\r\nade 8           pickle      BSD     Python Pickle Machine Disassembler\r\nade 32 64       riscv       GPL     RISC-V analysis plugin\r\n_de 32          rsp         LGPL3   RSP code analysis plugin\r\n_de 32          sh          LGPL3   SH-4 code analysis plugin\r\n_de 8 16        snes        LGPL3   SNES analysis plugin (by pancake)\r\n_de 32          v810        LGPL3   V810 code analysis plugin\r\nade 32          v850        MIT     V850 code analysis plugin\r\na__ 16 32 64    x86.nasm    LGPL3   X86 nasm assembler\r\na__ 16 32 64    x86.nz      LGPL3   x86 handmade assembler (by pancake)\r\n_de 16          xap         LGPL3   XAP code analysis plugin (by pancake)\r\n```\r\n\r\n```sh\r\nrasm2 -d -a m68k '10 39 00 A1 00 01'\r\nmove.b 0xa10001.l, d0\r\n\r\nrasm2 -a m68k 'move.b 0xa10001.l, d0'\r\nERROR: Cannot assemble 'move.b 0xa10001.l, d0' at line 3\r\n\r\nrasm2 -a m68k -b 16 'move.b 0xa10001.l, d0'\r\nERROR: Cannot assemble 'move.b 0xa10001.l, d0' at line 3\r\n\r\n rasm2 -a m68k -b 32 'move.b 0xa10001.l, d0'\r\nERROR: Cannot assemble 'move.b 0xa10001.l, d0' at line 3\r\n```\r\n\r\nx86 works fine:\r\n```sh\r\nrasm2 -a x86 'push ebp'\r\n55\r\n\r\nrasm2 -a x86 'push esp'\r\n54\r\n```\r\n\r\nThe -w feature does seem to work:\r\n```sh\r\n rasm2 -a m68k -w tst\r\ntest operand\r\n```\r\n\r\nThank you, thank you, THANK YOU!\r\n\r\n","comments":[{"id":"IC_kwDOAEpMrs5RenmQ","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Theres no assembler for m68k in r2. So i guess this is a feature request. \r\n\r\nUse -LL to see the plugins you want. Eventually all will be moved into -L","createdAt":"2022-12-28T23:33:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21211#issuecomment-1366981008","viewerDidAuthor":true}],"number":21211,"title":"Implement assembler for m68k"},{"body":"## Environment\r\n\r\n```sh\r\nFri Dec 23 06:21:14 PM EST 2022\r\nradare2 5.8.1 30050 @ linux-x86-64 git.5.8.0-9-g341695d158\r\ncommit: 341695d1589386bcd56c2c3fd44c95cdfd0af00b build: 2022-12-23__17:22:16\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nThe `pd` command can get off track and does not jump the proper size forward before printing the next instruction. This error seems to hover around the 0x100 offset, so I suspect it has something to do with a buffer of that size.\r\n\r\nThe size seems to be reported by the plugin. This is evident because rasm2 is able to correctly jump forward.\r\n\r\n## Test\r\n\r\nBelow shows the behavior. The one byte op `short_bincode` (0x8c) at offset 0xb, is followed by 0xf4 for string length, then 0xf4 bytes for the string. This means the next op should be found on 0x00000101 but pd prints the invalid op for the last character of the string \"Z\" at 0x100.\r\n\r\n```\r\n$ r2 -a pickle -qqc 'pd 6' file.pickle\r\n            0x00000000      8004           proto 0x4\r\n            0x00000002      95f800000000.  frame 0xf8\r\n            0x0000000b      8cf441424344.  short_binunicode \"ABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCD\"truncated ; 0xd\r\n            0x00000100      5a             invalid\r\n            0x00000101      94             memoize\r\n            0x00000102      2e             stop\r\n ```\r\n\r\nRasm2, `V` and pickletools gets it right\r\n```\r\n$ rasm2 -Bda pickle -f file.pickle\r\nproto 0x4\r\nframe 0xf8\r\nshort_binunicode \"ABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCD\"truncated\r\nmemoize\r\nstop\r\n$ python3 -m pickletools file.pickle\r\n    0: \\x80 PROTO      4\r\n    2: \\x95 FRAME      248\r\n   11: \\x8c SHORT_BINUNICODE 'ABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDZZZZ'\r\n  257: \\x94 MEMOIZE    (as 0)\r\n  258: .    STOP\r\nhighest protocol among opcodes = 4\r\n```\r\n\r\n`V` will mess up on a larger string though:\r\n```\r\n[0x00000000 [xAdvc]0 0% 285 log]> pd $r                                                                                                                                                                                                       \r\n            0x00000000      8004           proto 0x4                                                                                                                                                                                          \r\n            0x00000002      951701000000.  frame 0x117                                                                                                                                                                                        \r\n            0x0000000b      581001000041.  binunicode \"ABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCD\"truncated    ; 0x10                                   \r\n            0x0000011d      5a             invalid                                                                                                                                                                                            \r\n            0x0000011e      5a             invalid                                                                                                                                                                                            \r\n            0x0000011f      5a             invalid                                                                                                                                                                                            \r\n            0x00000120      94             memoize                                                                                                                                                                                            \r\n            0x00000121      2e             stop                                                                                                                                                                                               \r\n```\r\nBut when I move the cursor closer to the 0xb opcode, `V` starts fixing itself:\r\n```\r\n[0x00000002 [xAdvc]0 0% 285 log]> pd $r                                                                                                                                                                                                       \r\n            0x00000002      951701000000.  frame 0x117                                                                                                                                                                                        \r\n            0x0000000b      581001000041.  binunicode \"ABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCD\"truncated    ; 0x10                                   \r\n            0x0000011f      5a             invalid                                                                                                                                                                                            \r\n            0x00000120      94             memoize                                                                                                                                                                                            \r\n            0x00000121      2e             stop                                                                                                                                                                                                                                                                                                                                                                                          \r\n```\r\n\r\nI will look into it eventually but I don't know much about `pd`. \r\n\r\n[files.zip](https://github.com/radareorg/radare2/files/10297647/files.zip)","comments":[{"id":"IC_kwDOAEpMrs5RdPeZ","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"0x100 is the blocksize yo uhave configured probably","createdAt":"2022-12-28T12:35:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21195#issuecomment-1366620057","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5SIwsC","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"The size of the instruction right now cant be bigger than the provided buffer . And thats tied to the blocksize. Imho you should handle this case in the pickle plugin\r\n\r\noh wait.. how big is the maxinstsize the plugin reportint? Because if thats correct then theres a bug in pd","createdAt":"2023-01-10T23:26:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21195#issuecomment-1378028290","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5XVsjU","author":{"login":"Lazula"},"authorAssociation":"COLLABORATOR","body":"> The size of the instruction right now cant be bigger than the provided buffer\r\n\r\nThe updated pd is handles this in the retry section, it allocates a new buffer to use of a sufficient size (maxinstrsize+32). In this case it looks like this is occurring because pickle's R_ANAL_ARCHINFO_MAX_OP_SIZE is 129. So, what happens here is:\r\n\r\n* The first few instructions are read properly\r\n* When it's time to disasm at 0xb, the buffer looks like this (ds->addr is still 0 and the buffer is the configured blocksize of 0x100 bytes): `800495f8000000000000008cf44142434441424344414243444142434441424344414243444142434441424344414243444142434441424344414243444142434441424344414243444142434441424344414243444142434441424344414243444142434441424344414243444142434441424344414243444142434441424344414243444142434441424344414243444142434441424344414243444142434441424344414243444142434441424344414243444142434441424344414243444142434441424344414243444142434441424344414243444142434441424344414243444142434441424344414243444142434441424344414243445a5a5a` (note that it contains only the last 3 `5a` bytes - one is cut off)\r\n* pd doesn't know that the instruction is cut off (it thinks buf extends past the longest possible instruction) when this buffer is passed to r_asm_disassemble, which doesn't see the bytes past the buffer.\r\n* In the retry loop, ds->addr is updated to 0x100, since this is where pd thinks the instruction ended, so disassembly continues at 0x100.\r\n\r\nTo confirm, changing `libr/arch/p/pickle/plugin.c` MAXSTRLEN to 256 fixes this since the buffer is large enough, but it would still fail with a sufficiently long string. So, the problem is the plugin's MAX_OP_SIZE. The snes plugin has the same problem of arbitrary length strings.","createdAt":"2023-03-12T21:32:50Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21195#issuecomment-1465305300","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5XVtlw","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Imho this should be handled as payload. Not as the instruction size. Dalvik have similar instructions, the size of the payload is defined inside the instruction so it is not needed to read 1KB of data everytime we parse an instruction imho","createdAt":"2023-03-12T21:54:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21195#issuecomment-1465309552","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5XVunX","author":{"login":"Lazula"},"authorAssociation":"COLLABORATOR","body":"It looks like that's a predefined payload size and not for arbitrary length NULL-terminated strings, I'm not sure how this is intended to be implemented.","createdAt":"2023-03-12T22:12:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21195#issuecomment-1465313751","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5ZetqW","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"No intention to implement this but if anybody have an idea or proposal it seems like a good time to do it before breaking the abi","createdAt":"2023-04-09T22:07:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21195#issuecomment-1501223574","viewerDidAuthor":true}],"number":21195,"title":"pd gets off track on large instructions crossing 0x100 offset"},{"body":"```\r\n0$ echo '\\x41\\x42' | rax2 -s |hexdump -C\r\n00000000  ab                                                |.|\r\n00000001\r\n0$\r\n```","comments":[],"number":21190,"title":"rax2 may support more types of input and be more solid"},{"body":"## Environment\r\n\r\n```sh\r\nroot@ubuntu-s-1vcpu-512mb-10gb-sfo3-01:~# date\r\nr2 -v\r\nuname -ms\r\nSat Dec 10 06:54:36 PM UTC 2022\r\nradare2 5.7.8 1 @ linux-x86-64 git.5.7.8\r\ncommit: 8e965bef30457a12e07a32a9047a9620a944bc39 build: 2022-09-13__16:22:19\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\n`dmhb` shows corrupted bins:\r\n```\r\n Bin 017:\r\n  double linked list small bin {\r\n    0x7f98107fd5b8->fd = 0x0Double linked list corrupted\r\n\r\n  }\r\n  ```\r\n  \r\n![image](https://user-images.githubusercontent.com/4618288/206870965-2472c409-b5c7-4576-a96d-e9cb432861f6.png)\r\n\r\nalso `dmhf`:\r\n```\r\n[0x55bd63f26d20]> dmhf\r\nfastbinY {\r\n Fastbin 01\r\n  Empty bin  0x0\r\n Fastbin 02\r\n  Empty bin  0x0\r\n Fastbin 03\r\n  fastbin 3 @ 0x7f3bba5fd478 {\r\n   0x10e162854fa0b86e Linked list corrupted\r\n\r\n  }\r\n..\r\n```\r\n![image](https://user-images.githubusercontent.com/4618288/206871080-3d490108-6edd-4c85-a163-d6236bdb772e.png)\r\n\r\n\r\nI expect `dmhb` and `dmhf` commands to work properly.   \r\n\r\n## Test\r\n\r\n```\r\n# r2 -d /bin/ls\r\n\r\n[0x7f98108a0880]> dcu main\r\nINFO: Continue until 0x56160b278d20 using 1 bpsize\r\nhit breakpoint at: 0x56160b278d20\r\n\r\n[0x56160b278d20]> dmhb\r\n```\r\n","comments":[{"id":"IC_kwDOAEpMrs5QwL7q","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"Are you sure the bin is not really corrupted? Are you exploiting a buffer overflow or else?","createdAt":"2022-12-16T13:50:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21156#issuecomment-1354809066","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5Qwi8K","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Ehn.. its /bin/ls i doubt its corrupted or so. The problem is probably that glibc or musl or whatever lib is linking to is using a different heap data structures than the ones that was implemented in dmh","createdAt":"2022-12-16T14:09:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/21156#issuecomment-1354903306","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5RdvXQ","author":{"login":"b10s"},"authorAssociation":"CONTRIBUTOR","body":"> Are you sure the bin is not really corrupted? Are you exploiting a buffer overflow or else?\r\n\r\n@gogo2464 the bin must be not corrupted, since I tested the standard `/bin/ls` on a fresh VM.\r\n\r\nI'm trying to explore heap via r2 - to look at bins, chunks, etc.","createdAt":"2022-12-28T15:53:26Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21156#issuecomment-1366750672","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs54MrVU","author":{"login":"koyaan"},"authorAssociation":"CONTRIBUTOR","body":"@b10s `/bin/ls` does not have a heap setup at the start of `main` do  `40 dso` or something, works for me with latest version\r\n\r\n```\r\n~/code/r2heap >>> r2 -d /bin/ls \r\nWARN: Relocs has not been applied. Please use `-e bin.relocs.apply=true` or `-e bin.cache=true` next time\r\n[0x7f5693918b60]> dcu main\r\nINFO: Continue until 0x5579c6de2050 using 1 bpsize\r\nINFO: hit breakpoint at: 0x5579c6de2050\r\n[0x5579c6de2050]> 40 dso\r\nINFO: hit breakpoint at: 0x5579c6de209a\r\nINFO: hit breakpoint at: 0x5579c6de2109\r\n[0x5579c6de211a]> dmhb\r\nINFO: libc version 2.39 identified from .rodata banner\r\nWARN: Could not find main_arena via symbol or relocations\r\nWARN: Found main_arena offset with pattern matching\r\nBins {\r\n Bin 001:\r\n  double linked list unsorted bin {\r\n    0x7f56938aeb20->fd = 0x7f56938aeb20\r\n    0x7f56938aeb20->bk = 0x7f56938aeb20\r\n  }\r\n Bin 002:\r\n  double linked list small bin {\r\n    0x7f56938aeb30->fd = 0x7f56938aeb30\r\n    0x7f56938aeb30->bk = 0x7f56938aeb30\r\n  }\r\n[...]\r\n```","createdAt":"2024-03-23T20:00:33Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21156#issuecomment-2016589140","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs56qNcL","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Can we close this ticket? Maybe we can imrpove the parsing on corrupted heap chunks?","createdAt":"2024-04-15T22:01:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21156#issuecomment-2057885451","viewerDidAuthor":true}],"number":21156,"title":"dmhb and dmhf show corrupted bins in heap"},{"body":"thoughs on this?\r\n<img width=\"227\" alt=\"Screenshot 2022-12-08 at 13 09 27\" src=\"https://user-images.githubusercontent.com/6431515/206443186-c33be544-f7d9-4397-ac19-58857bcd1b02.png\">\r\n","comments":[{"id":"IC_kwDOAEpMrs5YtkCI","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Nobody thinks ","createdAt":"2023-03-29T10:27:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21144#issuecomment-1488339080","viewerDidAuthor":true}],"number":21144,"title":"verbose  / debug - can be replaced with R_LOG imho"},{"body":"`| /ad/ ins1;ins2        search for regex instruction 'ins1' followed by regex 'ins2'`\r\n`/ad/` is not working without the space prefixed\r\n[0x100003a3c]>  \"/ad/ str;cmp\"\r\n\r\nAlso it is not included into the help message of `/ad?`","comments":[{"id":"IC_kwDOAEpMrs5Oz4px","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"btw, today i re-learned that `,,` is an alias for `;`  for separating instructions in oneliners for `wa` and such","createdAt":"2022-11-21T15:20:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/21036#issuecomment-1322224241","viewerDidAuthor":true}],"number":21036,"title":"Command /ad/ is broken"},{"body":"## Environment\r\n\r\n```sh\r\n$ Mon 31 Oct 2022 12:25:00 PM PDT\r\n$ radare2 5.7.9 29303 @ linux-x86-64 git.5.7.2-971-g6ec1d8667d\r\ncommit: 6ec1d8667d41ac074e096b9b76f77bdb3f10acda build: 2022-10-31__12:11:21\r\n$ Linux x86_64\r\n```\r\n\r\n## Description\r\n\r\nThe binary in question is `pigz`, a multithreaded alternative to gz.\r\n\r\nFunction `sym.join_` joins spawned threads. Interestingly, it has multiple exit points - most of them being to function `sym.fail` which is non-returning. This is analyzed by r2 correctly. However, one exit point is at end of block starting at `0x411cda` which is a tail call to a relocatable address to `free` stored in `0x4243a0`.\r\n\r\n![image](https://user-images.githubusercontent.com/6960646/199093364-dd7c1604-38f8-4f79-a46a-a147a5663699.png)\r\n\r\nr2 also analyzes this as a no-return call, which then results in `sym.join_` being marked as noreturn. Below is `aflt` output.\r\n\r\n```\r\naddr       size  name                                           noret nbbs nins xref calls cc                                                                                                                       \r\nâ€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• \r\n0x00411420 401   sym.fail                                       1     13   86   47   3     40\r\n0x00411c30 255   sym.join_                                      1     18   69   14   4     11\r\n```\r\n\r\nHowever, I think this leads to incomplete exploration of the CFG at `sym.join_` callsites. Specifically, at `0x404bc5` in `sym.load.part.6`.\r\n\r\n![image](https://user-images.githubusercontent.com/6960646/199093869-97097c62-31c9-499b-925f-2a8b56cf224c.png)\r\n\r\nMy analysis could be wrong, but the followup to that call is part of the function `sym.load.part.6` which then later merges into the larger control flow. Below is output from BinaryNinja.\r\n\r\n![image](https://user-images.githubusercontent.com/6960646/199094129-27b1e795-01b5-414e-bc01-13ddc04a4844.png)\r\n\r\n## Test\r\n\r\nAttached binary:\r\n\r\n[pigz.tar.gz](https://github.com/radareorg/radare2/files/9904197/pigz.tar.gz)\r\n","comments":[{"id":"IC_kwDOAEpMrs5NdZn-","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I've added these config vars to tweak the noreturn analysis. can you give it a try?\r\n\r\nhttps://github.com/radareorg/radare2/pull/20965","createdAt":"2022-11-02T04:33:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20961#issuecomment-1299552766","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5NjDYJ","author":{"login":"chinmaydd"},"authorAssociation":"CONTRIBUTOR","body":"As always, thanks for the help pancake ! I think for this particular binary I can get away with disabling `anal.noret`. For reference, we now explore the rest of the basic block that the call to `sym.join_` belongs to.\r\n\r\n![image](https://user-images.githubusercontent.com/6960646/199566058-f50b7adc-2ddc-4c6d-9d5b-52825d13bb2f.png)\r\n \r\nI would like to make the case that we should still leverage noret information in `libr/anal/d/types-*.txt` for imported functions. For instance, `sym.fail` whose sole exit is through `sym.imp.exit` should be marked as noreturn but that information should not be propagated any further. For now, my plan is to perform this manually by using output from `tn`","createdAt":"2022-11-02T18:12:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20961#issuecomment-1301034505","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5NmrGI","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Maybe `aa` can run `aanr` at the end in case that `anal.noret` is false but a new `anal.noret.XXX` is set. Can you give it a try to some different workflows you use and make a PR with the improvements on that?","createdAt":"2022-11-03T11:47:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20961#issuecomment-1301983624","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5NmrJw","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I mean you can use `aanr` instead of doing stuff manually with `tn`","createdAt":"2022-11-03T11:47:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20961#issuecomment-1301983856","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5NurYl","author":{"login":"chinmaydd"},"authorAssociation":"CONTRIBUTOR","body":"Ah, I did not realise that `aaa` runs `aanr` at the end to propagate noret information. I can give this a shot.\r\n\r\nI was trying to play around with the `noret` workflow and noticed that information from `types-*.txt` is not leveraged when functions are added initially with `aa`. `r_anal_add_function` uses `r_anal_noreturn_at_addr` which does not identify functions which are known to be noret (maybe this should use `r_anal_noreturn_at_name` ?). In which case `aanr`, is kinda useless because it does not propagate anything honestly. \r\n\r\nCorrect me if I'm wrong here.","createdAt":"2022-11-04T19:39:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20961#issuecomment-1304081957","viewerDidAuthor":false}],"number":20961,"title":"Aggressive noreturn analysis results in incomplete CFG"},{"body":"## Environment\r\n```\r\nThu 20 Oct 2022 10:27:04 AM EDT\r\nradare2 5.7.9 29128 @ linux-x86-64 git.5.7.8-260-gccbd36e88\r\ncommit: ccbd36e8853afdee48c7d6d37a66c17b85c97698 build: 2022-10-07__01:04:35\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\nRop is not expected, as least for excluding characters.\r\n\r\n## Test\r\nUsing https://github.com/radareorg/radare2-testbins/blob/master/elf/analysis/ls-linux64\r\n<!-- Steps to reproduce the issue and provide files/links/images/.. -->\r\n```\r\nr2 ./ls-linux64\r\ne rop.len = 2\r\n\"/R/q [^p]\"\r\n...\r\n0x0001a219: add al, byte [rsi + 0xa]; ret;\r\n0x0001a229: push rdi; ret;\r\n0x0001a26a: add byte [rax], al; int3;\r\n...\r\n```\r\nSame results for:\r\n`\"/R/q [^p]+\"` or `\"/R/q [^p]+;\"`\r\n\r\nFurther, another possibly more interesting case, using same rop.len and same binary:\r\n```\r\n\"/R/q r[^d]i\"\r\n...\r\n0x0001358b: mov rdi, rsi; jmp rax;\r\n0x0001358c: mov rdi, rsi; jmp rax;\r\n0x0001358d: mov rdi, rsi; jmp rax;\r\n...\r\n```\r\nBasically same results for\r\n`\"/R/q r[^d]i;\"`\r\n\r\nHowever, the semicolon does make a difference:\r\n```\r\n\"/R/q r[^d]i\"\r\n...\r\n0x0001011b: mov rsi, qword [rsp + 0x38]; call 0xf190;\r\n0x000102d3: xor rdi, r15; jmp qword [rsi + 0xf];\r\n0x000102d4: xor edi, edi; jmp qword [rsi + 0xf];\r\n...\r\n\"/R/q r[^d]i;\"\r\n0x0001011b: mov rsi, qword [rsp + 0x38]; call 0xf190;\r\n0x00010424: mov rsi, 0xffffffffffffffff; jmp 0x10360;\r\n...\r\n```\r\n\r\nIs there a specification on how the rop regex is supposed to work? I don't understand the logic in `construct_rop_gadget(...)` in `libr/core/cmd_search.c`. but there seems to be some processing to split tokens at the semicolon before and after calls to\r\nr_regex_match. Further, I'm not sure what should happen if the \"regex tokens\" separated by semicolons is < rop.len. \r\n\r\nEven if I make sure num(regex_tokens) == rop.len, I don't get expected results. \r\nThis test uses rop.len =2, with two regex expressions separated by token\r\n\r\n```\r\n...\r\n \"/R/q [^p]+;[^p]+\"\r\n0x0001baf1: jp 0x1baf2; call qword [rip]\r\n...\r\n```\r\nNormally I would expected [^p]+ to match the semicolon, but because of the preprocessing, it shouldn't be passed to regcomp. I have also experimented with putting \\3b inside the excluded character set and sometimes I get better results (not correct), but this seems likely to break things if the intent is to scan for the semicolon before any regex match is attempted.\r\n","comments":[{"id":"IC_kwDOAEpMrs5Nx7n1","author":{"login":"Lazula"},"authorAssociation":"COLLABORATOR","body":"Seems to be caused by quiet mode.\r\n\r\n```\r\n$ r2 -\r\n[0x00000000]> e rop.len\r\n5\r\n[0x00000000]> \"wa mov rdi, rsi; jmp rax;\"\r\nINFO: Written 5 byte(s) (mov rdi, rsi; jmp rax;) = wx 4889f7ffe0 @ 0x00000000\r\n[0x00000000]> \"/R/q r[^d]i\"\r\n0x00000000: mov rdi, rsi; jmp rax;\r\n[0x00000000]> \"/R r[^d]i\"\r\n[0x00000000]> e rop.len=2\r\n[0x00000000]> \"/R/q [^p]+;[^p]+\"\r\n0x00000000: mov rdi, rsi; jmp rax;\r\n0x00000001: mov edi, esi; jmp rax;\r\n[0x00000000]> \"/R [^p]+;[^p]+\"\r\n\r\n```","createdAt":"2022-11-07T00:06:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20923#issuecomment-1304934901","viewerDidAuthor":false}],"number":20923,"title":"ROP regex is not as expected for excluding characters"},{"body":"To read:\r\n* https://ffri.github.io/ProjectChampollion/part1/\r\n* https://ffri.github.io/ProjectChampollion/part2/\r\n\r\nTo run:\r\nhttps://github.com/FFRI/ProjectChampollion/blob/main/AotSharedCacheExtractor/main.py","comments":[{"id":"IC_kwDOAEpMrs5ZetiL","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"LC_AOT_METADATA is now supported.","createdAt":"2023-04-09T22:04:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20922#issuecomment-1501223051","viewerDidAuthor":true}],"number":20922,"title":"Add support for rosetta AOT caches"},{"body":"## Environment\r\n\r\n```sh\r\n# copypaste this script into your shell and replace it with the output\r\ndate\r\nr2 -v\r\nuname -ms\r\n```\r\nMon Oct 17 13:08:51 CDT 2022\r\nradare2 4.4.0 0 @ linux-x86-64 git.4.4.0\r\ncommit: HEAD build: 2022-02-22__01:15:10\r\nLinux x86_64\r\n## Description\r\n\r\n<!-- Explain what's the issue and what would you expect to see -->\r\nHi,\r\n\r\nI am working with radare to analyze basic blocks and control flow edges. On comparing the same with Ghidra, I have found that the basic blocks and edges generated by radare are considerably different compared to those generated by Ghidra. There are some fall through and conditional edges that radare misses that I was curious about. Is there some specific reason for this? Here are some examples.\r\n0x408402 -> 0x408421\r\n0x40848e -> 0x4084a0\r\n0x4078c4 -> 0x407909\r\n0x41b896 -> 0x41b89f\r\n\r\nThank you!\r\n\r\n## Test\r\n\r\n<!-- Steps to reproduce the issue and provide files/links/images/.. -->\r\nI am attaching the ssh binary that I am analyzing. You can refer to the edges mentioned above in the binary.\r\n\r\n[ssh.tar.gz](https://github.com/radareorg/radare2/files/9803331/ssh.tar.gz)\r\n","comments":[{"id":"IC_kwDOAEpMrs5Mj3ie","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"It looks the same to me, what do you mean about those edges? you mean those are missing in the graph?\r\n\r\nthis was a bug that was fixed a while back, r2-4.4 is really really old, please update to the last relese or build it from git.\r\n\r\n![Screenshot from 2022-10-19 21-14-08](https://user-images.githubusercontent.com/6431515/196783142-80c65e75-7352-4739-aecf-1c7f3e1d72a5.png)\r\n![Screenshot from 2022-10-19 21-20-50](https://user-images.githubusercontent.com/6431515/196784390-48692b97-f0cf-43ae-bbf9-357d9c7fc209.png)\r\n\r\n![Screenshot from 2022-10-19 21-22-36](https://user-images.githubusercontent.com/6431515/196784720-1fe87aa6-dc0c-418b-af23-c80767b709d3.png)\r\n","createdAt":"2022-10-19T19:24:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20911#issuecomment-1284470942","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Mj4MG","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Actually I find an important difference here which is the `jmp` that r2 considers it a tail call optimization, where ghidra considers it part of the same function. Actually the code that references is not a function, but its a self-contained block of code, that can be treated as a subroutine so i would say that it's not the same but it's also correct.","createdAt":"2022-10-19T19:26:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20911#issuecomment-1284473606","viewerDidAuthor":true}],"number":20911,"title":"radare basic blocks in CFG"},{"body":"## Environment\r\n\r\n```sh\r\n$ radare2 -v\r\nradare2 5.7.8 1 @ windows-x86-32 git.5.7.8\r\ncommit: 8e965bef30457a12e07a32a9047a9620a944bc39 build: Tue 09/13/2022__16:37:06.1\r\n```\r\n\r\nafl | findStr entry0\r\n\r\nprints all the functions. Not just entry0.\r\n","comments":[{"id":"IC_kwDOAEpMrs5ZetwQ","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Thats an important thing to be implemented to properly support windows. Even if pipes in windows are kind of a joke it should work right like in cmd","createdAt":"2023-04-09T22:09:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20863#issuecomment-1501223952","viewerDidAuthor":true}],"number":20863,"title":"pipe not working on windows 7"},{"body":"## Environment\r\n\r\n```sh\r\nThu  6 Oct 2022 20:42:26 UTC\r\nradare2 5.7.9 29130 @ darwin-arm-64 git.5.7.8-258-g0c0effcd1\r\ncommit: 0c0effcd1b405d93b49018c0489e3819aae34c01 build: 2022-10-06__20:38:20\r\nDarwin arm64\r\n```\r\n\r\n## Description\r\n\r\nWhen debugging an x86 executable under macOS with Apple silicon (I'm using an M2 chip), breakpoints seem to crash when hit with the following error:\r\n\r\n```bash\r\ntsk_setperm: Invalid argument\r\nERROR: io.mach: Cannot restore page perms\r\n```\r\n\r\nSome notes:\r\n\r\n- This does not occur when debugging that same binary, compiled for arm (also included in the archive above). Since I get a message saying `hw breakpoints not yet supported`, the breakpoints I use to repro this are all software breakpoints (`e dbg.hwbp=false`);\r\n- I've installed r2 using `./sys/install.sh` and made sure my `r2` binary is signed;\r\n- I've disabled SIP and updated the security authorization policies through `sudo DevToolsSecurity -enable`;\r\n- This error occurs whether or not I'm running `r2` as sudo.\r\n\r\n## Test\r\n\r\n\r\nHere is a test binary I'm using to reproduce this issue:\r\n[x86_and_arm_binaries_r2_macos_crash.zip](https://github.com/radareorg/radare2/files/9728592/x86_and_arm_binaries_r2_macos_crash.zip)\r\n\r\nIf you'd rather compile a binary yourselves, a simple C \"Hello, World!\" program is sufficient to repro, such as:\r\n```c\r\n#include <stdio.h>\r\n\r\nint main(void)\r\n{\r\n  printf(\"Hello, World!\\n\");\r\n  return 0;\r\n}\r\n```\r\n\r\nI used `arch -x86_64 clang hello_world.c -o hello_world_x86` to compile this to the x86 above.\r\n\r\nRepro steps:\r\n\r\n```bash\r\nr2 -d hello_world_x86\r\n> e dbg.hwbp=false\r\n> db main\r\n> dc\r\ntsk_setperm: Invalid argument\r\nERROR: io.mach: Cannot restore page perms\r\n```\r\n","comments":[],"number":20859,"title":"macOS: Debugging x86 under ARM crashes when breakpoint is hit."},{"body":"Many archs document some undefined behaviour of some instructions. The implementation is stable and defined at hardware level, but that can change between different CPUs in theory. So it will be worth for r2 users to have the ability to scan an app for identifying such instructions as well as extending ESIL to support UB with tainted registers support and so on.\r\n\r\nLiterature:\r\n\r\n* x86 https://www.felixcloutier.com/x86/bsf (The CF, OF, SF, AF, and PF flags are undefined.)\r\n* x86 https://www.felixcloutier.com/x86/shld (If a count is greater than the operand size, the result is undefined.)\r\n* arm32 https://developer.arm.com/documentation/ddi0406/c/System-Level-Architecture/The-System-Level-Programmers--Model/Exception-descriptions/Undefined-Instruction-exception","comments":[],"number":20845,"title":"Report instruction-level UB details"},{"body":"xdg support is already there but we can do better. This ticket aims to track the remaining tasks to be implemented. Not urgent or necessary but good to have\r\n\r\n* [ ] Add support for XDG_DATA_DIRS (its a colon:separated list of paths to check for system-wide files)\r\n* [ ] Port and test on windows using %AppData%\r\n* [ ] Use ~/Library/Application Support.. on mac?","comments":[],"number":20829,"title":"Improve XDG Support"},{"body":"ðŸ¤”","comments":[],"number":20820,"title":"Merge asm.abi and anal.cxxabi somehow"},{"body":"taking inspiration on a chat discussion:\r\n\r\n* Theres no \"inline\" attribute in r2, and im not sure how that should be handled. As it ferls like inline functions could be analyzed as byte patterns using zignatures. But those may be different kind of monsters because a single name can refer to N addresses where this function is implemented\r\n* The graph could be folding the basic blocks of the inline function in the fcn cfg\r\n* This seems like an interesting thing to implement in r2\r\n* As the analyzer could define inline functions and the disasm can take advantage of this information to reduce duplicated code\r\n* Maybe radius can be abused to handle this but i think that byte batterns associated with a name can be enough. The disasm can check if the byte pattern matches somewhere inside the block and fold it and the search command can be used to search for inline functions\r\n* It can be even used to reduce prologues and epilogues\r\n* For now i think that byte pattern can be enough but will be good to be open to support esil dfg analysis or other scan methods to detect such patterns\r\n","comments":[{"id":"IC_kwDOAEpMrs5KrieX","author":{"login":"swoops"},"authorAssociation":"COLLABORATOR","body":"Inline functions would be a very welcome addition.\r\n\r\nFor starters we could allow users to designate a set of basic blocks as an inline function. Then r2 would auto search for other inline. Zignatures should work to discover the other inlines very easily, though with false negatives.\r\n\r\nInlines don't obey calling conventions, there is no call. The compiler seems to choose which registers to use depending on the context of the surrounding code. So we should have a translation map to let the user know what the input and output of the inline function is. This could be abstracted by variables maybe.","createdAt":"2022-09-20T21:22:42Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20773#issuecomment-1252927383","viewerDidAuthor":false}],"number":20773,"title":"inline functions"},{"body":"## Environment\r\n\r\n```sh\r\nSat Sep 17 06:51:47 PM CEST 2022\r\nradare2 5.7.4 0 @ linux-x86-64 git.\r\ncommit: 5.7.4 build: 2022-09-17__18:09:59\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nthe entire suite of dmh* subcommands is useless. im sorry i have to say it like this but really, nothing works as intended. `dmh` related commands have the following issues:\r\n1) cant find main arena, complains that \"this address is not part of any arenas\"\r\n    have to check all arenas with `dmha` only to be greeted by this:\r\n```\r\nmain_arena @ 0x7f832794f4a0\r\nthread arena @ 0x0\r\nthread arena @ 0xffffffffffffffff\r\nthread arena @ 0xffffffffffffffff\r\nthread arena @ 0xffffffffffffffff\r\n<-snip->\r\nthread arena @ 0xffffffffffffffff\r\nthread arena @ 0xffffffffffffffff\r\nthread arena @ 0xffffffffffffffff\r\nthread arena @ 0xffffffffffffffff\r\nthread arena @ 0xffffffffffffffff\r\nthread arena @ 0xffffffffffffffff\r\nthread arena @ 0xffffffffffffffff\r\nthread arena @ 0xffffffffffffffff\r\nthread arena @ 0xffffffffffffffff\r\n```\r\nI have to scroll all the way up for the main arena address, sometimes, it prints several kilobytes of \"thread arena\" into my terminal, when there are no threads to begin with.\r\n2) dmhb and friends straight up dont work, shows a bunch of \"corrupted\" bins and chunk when they arent, dmh doesnt show any chunks only the top chunk, but sometimes it shows other chunks, feels random.\r\n3) \"corrupted\" bins after 3 mallocs\r\n```\r\n Bin 015:\r\n Bin 016:\r\n  double linked list small bin {\r\n    0x7f9fb0cd65e8->fd = 0x0Double linked list corrupted\r\n\r\n  }\r\n Bin 017:\r\n  double linked list small bin {\r\n    0x7f9fb0cd65f8->fd = 0x0Double linked list corrupted\r\n\r\n  }\r\n Bin 018:\r\n Bin 019:\r\n\r\n```\r\n4) example of a fast bin chunk of size 100 bytes\r\n```\r\nstruct malloc_chunk @ 0x55f4de9b2187 {\r\n  prev_size = 0xfffffea1e8c78948,\r\n  size = 0xe8c78948f8458b48,\r\n  flags: |N:0 |M:0 |P:0,\r\n  fd = 0xb8fffffe95,\r\n  bk = 0xec83480000c3c900,\r\n  fd-nextsize = 0xc308c4834808,\r\n  bk-nextsize = 0x0,\r\n}\r\nchunk too big to be displayed\r\nchunk data = \r\n0x55f4de9b2197  0x000000b8fffffe95  0xec83480000c3c900   .............H..\r\n0x55f4de9b21a7  0x0000c308c4834808  0x0000000000000000   .H..............\r\n0x55f4de9b21b7  0x0000000000000000  0x0000000000000000   ................\r\n0x55f4de9b21c7  0x0000000000000000  0x0000000000000000   ................\r\n0x55f4de9b21d7  0x0000000000000000  0x0000000000000000   ................\r\n0x55f4de9b21e7  0x0000000000000000  0x0000000000000000   ................\r\n0x55f4de9b21f7  0x0000000000000000  0x0000000000000000   ................\r\n0x55f4de9b2207  0x0000000000000000  0x0000000000000000   ................\r\n0x55f4de9b2217  0x0000000000000000  0x0000000000000000   ................\r\n0x55f4de9b2227  0x0000000000000000  0x0000000000000000   ................\r\n0x55f4de9b2237  0x0000000000000000  0x0000000000000000   ................\r\n0x55f4de9b2247  0x0000000000000000  0x0000000000000000   ................\r\n0x55f4de9b2257  0x0000000000000000  0x0000000000000000   ................\r\n0x55f4de9b2267  0x0000000000000000  0x0000000000000000   ................\r\n0x55f4de9b2277  0x0000000000000000  0x0000000000000000   ................\r\n0x55f4de9b2287  0x0000000000000000  0x0000000000000000   ................\r\n0x55f4de9b2297  0x0000000000000000  0x0000000000000000   ................\r\n0x55f4de9b22a7  0x0000000000000000  0x0000000000000000   ................\r\n0x55f4de9b22b7  0x0000000000000000  0x0000000000000000   ................\r\n0x55f4de9b22c7  0x0000000000000000  0x0000000000000000   ................\r\n```\r\n6) dmhg  shows nothing but the top chunk.\r\n7) main_arena pointer doesnt actually point to the heap, so its like a garbage pointer of some sort\r\n8) you get the picture.\r\n\r\ncant use the module/functionality in any useful capacity. The rest of the program works fine. Is there another program i could use to inspect the heap more reliably?\r\n\r\nThe only real \"expected\" output I can provide, is the ones you feature in some videos and tutorials, and for example from pwndbg. i am providing output from pwndbg `heap` and `vmmap` commands for comparission\r\n\r\n```\r\npwndbg> heap\r\nAllocated chunk | PREV_INUSE\r\nAddr: 0x55dabe0e0000\r\nSize: 0x291\r\n\r\nFree chunk (tcache) | PREV_INUSE\r\nAddr: 0x55dabe0e0290\r\nSize: 0x71\r\nfd: 0x55dabe0e0\r\n\r\nAllocated chunk | PREV_INUSE\r\nAddr: 0x55dabe0e0300\r\nSize: 0x71\r\n\r\nAllocated chunk | PREV_INUSE\r\nAddr: 0x55dabe0e0370\r\nSize: 0x71\r\n\r\nTop chunk | PREV_INUSE\r\nAddr: 0x55dabe0e03e0\r\nSize: 0x20c21\r\n\r\npwndbg> vmmap\r\nLEGEND: STACK | HEAP | CODE | DATA | RWX | RODATA\r\n    0x55dabcb78000     0x55dabcb79000 r--p     1000 0      /home/tino/Software/cyberdiskdir/cyber/trainning/research/experiments/heap_spray_learning/a.out\r\n    0x55dabcb79000     0x55dabcb7a000 r-xp     1000 1000   /home/tino/Software/cyberdiskdir/cyber/trainning/research/experiments/heap_spray_learning/a.out\r\n    0x55dabcb7a000     0x55dabcb7b000 r--p     1000 2000   /home/tino/Software/cyberdiskdir/cyber/trainning/research/experiments/heap_spray_learning/a.out\r\n    0x55dabcb7b000     0x55dabcb7c000 r--p     1000 2000   /home/tino/Software/cyberdiskdir/cyber/trainning/research/experiments/heap_spray_learning/a.out\r\n    0x55dabcb7c000     0x55dabcb7d000 rw-p     1000 3000   /home/tino/Software/cyberdiskdir/cyber/trainning/research/experiments/heap_spray_learning/a.out\r\n    0x55dabe0e0000     0x55dabe101000 rw-p    21000 0      [heap]\r\n    0x7f7742a48000     0x7f7742a4a000 rw-p     2000 0      [anon_7f7742a48]\r\n    0x7f7742a4a000     0x7f7742a72000 r--p    28000 0      /lib64/libc.so.6\r\n    0x7f7742a72000     0x7f7742bdb000 r-xp   169000 28000  /lib64/libc.so.6\r\n    0x7f7742bdb000     0x7f7742c33000 r--p    58000 191000 /lib64/libc.so.6\r\n    0x7f7742c33000     0x7f7742c37000 r--p     4000 1e8000 /lib64/libc.so.6\r\n    0x7f7742c37000     0x7f7742c39000 rw-p     2000 1ec000 /lib64/libc.so.6\r\n    0x7f7742c39000     0x7f7742c43000 rw-p     a000 0      [anon_7f7742c39]\r\n    0x7f7742c5f000     0x7f7742c61000 r--p     2000 0      /lib64/ld-linux-x86-64.so.2\r\n    0x7f7742c61000     0x7f7742c87000 r-xp    26000 2000   /lib64/ld-linux-x86-64.so.2\r\n    0x7f7742c87000     0x7f7742c92000 r--p     b000 28000  /lib64/ld-linux-x86-64.so.2\r\n    0x7f7742c93000     0x7f7742c95000 r--p     2000 33000  /lib64/ld-linux-x86-64.so.2\r\n    0x7f7742c95000     0x7f7742c97000 rw-p     2000 35000  /lib64/ld-linux-x86-64.so.2\r\n    0x7fffecd94000     0x7fffecdb6000 rw-p    22000 0      [stack]\r\n    0x7fffecdcf000     0x7fffecdd3000 r--p     4000 0      [vvar]\r\n    0x7fffecdd3000     0x7fffecdd5000 r-xp     2000 0      [vdso]\r\n0xffffffffff600000 0xffffffffff601000 --xp     1000 0      [vsyscall]\r\n```\r\nSo, i'd expect the radare2 output to be simmilar to the one of pwndbg\r\n\r\nSame binary was used as attached. its nothing more than a .c file with 3 mallocs and 3 frees.\r\n\r\n## Test\r\ncompile the attached file\r\nrun with r2 -d a.out\r\nstep through program until som mallocs/frees\r\nrun any dmh* command\r\n\r\n[cfile.tgz](https://github.com/radareorg/radare2/files/9592200/cfile.tgz)\r\n\r\n## system\r\nLinux localhost 5.15.41-gentoo-x86_64 #1 SMP Sat Jun 25 12:51:37 CEST 2022 x86_64 Intel(R) Core(TM)2 Quad CPU Q6600 @ 2.40GHz GenuineIntel GNU/Linux\r\n\r\n## glibc\r\n> strings /lib64/libc.so.6 | grep libc.2\r\nglibc 2.35\r\n","comments":[{"id":"IC_kwDOAEpMrs5Kg8FU","author":{"login":""},"authorAssociation":"NONE","body":"Also checked with the master branch. Same problem.\r\nalso, `e dbg.malloc = glibc` has been set as well as `e dbg.glibc.demangle = true` and still same thing","createdAt":"2022-09-17T22:17:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20767#issuecomment-1250148692","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5KwJwZ","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Thanks for the detailed report, the dmh command isnt actively maintained or tested, it will be good to port the code from pwndbg to support last versions of glibc which i assume is the problem, as the heap structures change over time, would you like to help on that?\r\n\r\nr2frida also have dmh support but i think its macos/ios specific as its not implemented on linux","createdAt":"2022-09-21T19:28:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20767#issuecomment-1254136857","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Kw-JY","author":{"login":""},"authorAssociation":"NONE","body":"@trufae Yeah absolutely. I was in the process of writing some heap inspection programs myself anyway since there is virtually none out there, and the few that are, are too old or dont work with various versions. Give me a basic rundow of what needs to be done basically and where I should start digging through the sources.","createdAt":"2022-09-22T00:05:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20767#issuecomment-1254351448","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5KzT1t","author":{"login":""},"authorAssociation":"NONE","body":"@trufae I have forked the repo and started fixing some of the issues I mentioned. I already fixed the issue with the thread arena prints. If you want to follow along or have any hints or comments, here is the repo link to my devel branch: https://github.com/majorendian/radare2/tree/g0zar_devel","createdAt":"2022-09-22T12:38:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20767#issuecomment-1254964589","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5K0Ow1","author":{"login":""},"authorAssociation":"NONE","body":"I managed to get this working by manually finding the address of the main arena. Turns out radare2 gets the wrong address mapping for libc. Instead of fetching the data segment of libc, it fetches some random segment based on how they are mapped. Its possible to partially fix this by manually finding the main arena and then doing `dmhm @ <actuall_address_of_main_arena>` and then the output seems to look a lot more reasonable. But it periodically gets busted so i will still need to fix this.\r\n\r\nBased on the structures present in `r_heap_glibc.h` it seems like the newest/up-to-date structures are present. So its very likely the bug is simply in fetching the wrong segment from the `dm` mappings for libc. The code in question:\r\n```c\r\n\tif (is_debugged) {\r\n\t\tRListIter *iter;\r\n\t\tRDebugMap *map;\r\n\t\tr_debug_map_sync (core->dbg);\r\n\t\tr_list_foreach (core->dbg->maps, iter, map) {\r\n\t\t\t/* Try to find the main arena address using the glibc's symbols. */\r\n\t\t\tif ((strstr (map->name, \"/libc-\") || strstr (map->name, \"/libc.\"))\r\n\t\t\t\t\t&& first_libc && main_arena_sym == GHT_MAX) {\r\n\t\t\t\tfirst_libc = false;\r\n\t\t\t\tmain_arena_sym = GH (get_main_arena_with_symbol) (core, map);\r\n\t\t\t}\r\n\t\t\tif ((strstr (map->name, \"/libc-\") || strstr (map->name, \"/libc.\"))\r\n\t\t\t\t\t&& map->perm == R_PERM_RW) {\r\n\t\t\t\tlibc_addr_sta = map->addr;\r\n\t\t\t\tlibc_addr_end = map->addr_end;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\r\n```\r\nSome extra info, checked which map gets associated with the main arena. Its an 'unkn' map region right after the libc RW region (the correct one)\r\n```\r\n[0x7f90d46044a0]> dmha\r\nmain_arena @ 0x7f90d46044a0\r\nthread arena @ 0x0\r\n[0x7f90d46044a0]> dm.\r\n0x00007f90d45ff000 - 0x00007f90d4609000 * usr    40K s rw- unk1 unk1\r\n[0x7f90d46044a0]> dm\r\n0x000055fbde276000 - 0x000055fbde277000 - usr     4K s r-- /home/tino/Software/cyberdiskdir/cyber/trainning/research/experiments/first_fit_testing/c/a.out /home/tino/Software/cyberdiskdir/cyber/trainning/research/experiments/first_fit_testing/c/a.out ; loc.imp._ITM_registerTMCloneTable\r\n0x000055fbde277000 - 0x000055fbde278000 - usr     4K s r-x /home/tino/Software/cyberdiskdir/cyber/trainning/research/experiments/first_fit_testing/c/a.out /home/tino/Software/cyberdiskdir/cyber/trainning/research/experiments/first_fit_testing/c/a.out ; map._home_tino_Software_cyberdiskdir_cyber_trainning_research_experiments_first_fit_testing_c_a.out.r_x\r\n0x000055fbde278000 - 0x000055fbde279000 - usr     4K s r-- /home/tino/Software/cyberdiskdir/cyber/trainning/research/experiments/first_fit_testing/c/a.out /home/tino/Software/cyberdiskdir/cyber/trainning/research/experiments/first_fit_testing/c/a.out ; map._home_tino_Software_cyberdiskdir_cyber_trainning_research_experiments_first_fit_testing_c_a.out.r__\r\n0x000055fbde279000 - 0x000055fbde27a000 - usr     4K s r-- /home/tino/Software/cyberdiskdir/cyber/trainning/research/experiments/first_fit_testing/c/a.out /home/tino/Software/cyberdiskdir/cyber/trainning/research/experiments/first_fit_testing/c/a.out ; map._home_tino_Software_cyberdiskdir_cyber_trainning_research_experiments_first_fit_testing_c_a.out.rw_\r\n0x000055fbde27a000 - 0x000055fbde27b000 - usr     4K s rw- /home/tino/Software/cyberdiskdir/cyber/trainning/research/experiments/first_fit_testing/c/a.out /home/tino/Software/cyberdiskdir/cyber/trainning/research/experiments/first_fit_testing/c/a.out ; obj._GLOBAL_OFFSET_TABLE_\r\n0x000055fbdfdd3000 - 0x000055fbdfdf4000 - usr   132K s rw- [heap] [heap]\r\n0x00007f90d440d000 - 0x00007f90d4410000 - usr    12K s rw- unk0 unk0\r\n0x00007f90d4410000 - 0x00007f90d4438000 - usr   160K s r-- /lib64/libc.so.6 /lib64/libc.so.6\r\n0x00007f90d4438000 - 0x00007f90d45a1000 - usr   1.4M s r-x /lib64/libc.so.6 /lib64/libc.so.6\r\n0x00007f90d45a1000 - 0x00007f90d45f9000 - usr   352K s r-- /lib64/libc.so.6 /lib64/libc.so.6\r\n0x00007f90d45f9000 - 0x00007f90d45fd000 - usr    16K s r-- /lib64/libc.so.6 /lib64/libc.so.6\r\n0x00007f90d45fd000 - 0x00007f90d45ff000 - usr     8K s rw- /lib64/libc.so.6 /lib64/libc.so.6\r\n0x00007f90d45ff000 - 0x00007f90d4609000 * usr    40K s rw- unk1 unk1\r\n0x00007f90d4626000 - 0x00007f90d4628000 - usr     8K s r-- /lib64/ld-linux-x86-64.so.2 /lib64/ld-linux-x86-64.so.2\r\n0x00007f90d4628000 - 0x00007f90d464e000 - usr   152K s r-x /lib64/ld-linux-x86-64.so.2 /lib64/ld-linux-x86-64.so.2 ; map._lib64_ld_linux_x86_64.so.2.r_x\r\n0x00007f90d464e000 - 0x00007f90d4659000 - usr    44K s r-- /lib64/ld-linux-x86-64.so.2 /lib64/ld-linux-x86-64.so.2 ; map._lib64_ld_linux_x86_64.so.2.r__\r\n0x00007f90d465a000 - 0x00007f90d465c000 - usr     8K s r-- /lib64/ld-linux-x86-64.so.2 /lib64/ld-linux-x86-64.so.2 ; map._lib64_ld_linux_x86_64.so.2.rw_\r\n0x00007f90d465c000 - 0x00007f90d465e000 - usr     8K s rw- /lib64/ld-linux-x86-64.so.2 /lib64/ld-linux-x86-64.so.2 ; r15\r\n0x00007ffd5d132000 - 0x00007ffd5d154000 - usr   136K s rw- [stack] [stack] ; map._stack_.rw_\r\n0x00007ffd5d16e000 - 0x00007ffd5d172000 - usr    16K s r-- [vvar] [vvar] ; map._vvar_.r__\r\n0x00007ffd5d172000 - 0x00007ffd5d174000 - usr     8K s r-x [vdso] [vdso] ; map._vdso_.r_x\r\n0xffffffffff600000 - 0xffffffffff601000 - usr     4K s --x [vsyscall] [vsyscall] ; map._vsyscall_.__x\r\n[0x7f90d46044a0]> \r\n```","createdAt":"2022-09-22T15:37:51Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20767#issuecomment-1255205941","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5LAauU","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Hey @majorendian sorry for my late reply.\r\n\r\nSo it seems like the problem is just a wrong detection of the region containing the glibc to find out the global. this code has changed a couple of times and the reason was mainly that on some distros this library was placed on a different path so it was impossible to have a 100%. and we should be adding tests for this, but that's not easy because we may probably use chroots inside privileged containers to do that in ghci to emulate different distros easily.\r\n\r\nif you have some fixes for this issue or maybe a workaround feel free to submit a PR with the contents of your branch. Feel free to join irc, discord or telegram chats if you want a faster response. ive been busy this weekend O:)\r\n\r\nthanks for digging in!","createdAt":"2022-09-26T17:49:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20767#issuecomment-1258400660","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5L9rlC","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"ping?","createdAt":"2022-10-11T10:16:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20767#issuecomment-1274460482","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5L-Cut","author":{"login":""},"authorAssociation":"NONE","body":"@trufae Sorry I have a few things going on at the moment. I might join the discord. Right now I only have a fix for the thread_arena spam.","createdAt":"2022-10-11T11:46:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20767#issuecomment-1274555309","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5NxlQT","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"can you send a PR with that fix? so the changes are not lost at least ðŸ‘ ","createdAt":"2022-11-06T16:51:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20767#issuecomment-1304843283","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5OvKNt","author":{"login":""},"authorAssociation":"NONE","body":"@trufae I submited a pull request for the thread_arena spam. Sorry for my late reply.","createdAt":"2022-11-19T22:44:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20767#issuecomment-1320985453","viewerDidAuthor":false}],"number":20767,"title":"heap inspection in r2 5.7.4 disfunctional - no dmh* command works as intended"},{"body":"all _init() methods should return void imho\r\n\r\n```\r\n0$ git grep _init| grep R_API| grep -v void\r\nlibr/anal/xrefs.c:R_API bool r_anal_xrefs_init(RAnal *anal) {\r\nlibr/core/cconfig.c:R_API int r_core_config_init(RCore *core) {\r\nlibr/core/cmd_seek.c:R_API int r_core_lines_initcache(RCore *core, ut64 start_addr, ut64 end_addr) {\r\nlibr/core/core.c:R_API bool r_core_init(RCore *core) {\r\nlibr/core/cplugin.c:R_API bool r_core_plugin_init(RCmd *cmd) {\r\nlibr/core/rvc.c:R_API Rvc *r_vc_git_init(const char *path) {\r\nlibr/core/rvc.c:R_API Rvc *rvc_git_init(const RCore *core, const char *path) {\r\nlibr/crypto/crypto.c:R_API RCrypto *r_crypto_init(RCrypto *cry, int hard) {\r\nlibr/debug/p/bfvm.c:R_API int bfvm_init(BfvmCPU *c, ut32 size, int circular) {\r\nlibr/include/r_anal.h:R_API bool r_anal_xrefs_init(RAnal *anal);\r\nlibr/include/r_cons.h:R_API int r_cons_palette_init(const unsigned char *pal);\r\nlibr/include/r_core.h:R_API bool r_core_init(RCore *core);\r\nlibr/include/r_core.h:R_API int r_core_config_init(RCore *core);\r\nlibr/include/r_core.h:R_API int r_core_lines_initcache(RCore *core, ut64 start_addr, ut64 end_addr);\r\nlibr/include/r_core.h:R_API bool r_core_plugin_init(RCmd *cmd);\r\nlibr/include/r_crypto.h:R_API RCrypto *r_crypto_init(RCrypto *cry, int hard);\r\nlibr/include/r_io.h:R_API RIO *r_io_init(RIO *io);\r\nlibr/include/r_io.h:R_API bool r_io_plugin_init(RIO *io);\r\nlibr/include/r_io.h:R_API int r_io_undo_init(RIO *io);\r\nlibr/include/r_io.h:R_API bool r_io_desc_cache_init(RIODesc *desc);\r\nlibr/include/r_reg.h:R_API RReg *r_reg_init(RReg *reg);\r\nlibr/include/r_regex.h:R_API int r_regex_init(RRegex*, const char *pattern, int flags);\r\nlibr/include/r_util/r_spaces.h:R_API bool r_spaces_init(RSpaces *sp, const char *name);\r\nlibr/include/r_util/r_str_constpool.h:R_API bool r_str_constpool_init(RStrConstPool *pool);\r\nlibr/include/r_util/r_strbuf.h:R_API const char *r_strbuf_initf(RStrBuf *sb, const char *fmt, ...); // same as init + setf for convenience\r\nlibr/include/rvc.h:R_API Rvc *r_vc_git_init(const char *path);\r\nlibr/include/rvc.h:R_API Rvc *rvc_git_init(const RCore *core, const char *path);\r\nlibr/io/io_plugin.c:R_API bool r_io_plugin_init(RIO *io) {\r\nlibr/io/p_cache.c:R_API bool r_io_desc_cache_init(RIODesc *desc) {\r\nlibr/io/undo.c:R_API int r_io_undo_init(RIO *io) {\r\nlibr/reg/reg.c:R_API RReg *r_reg_init(RReg *reg) {\r\nlibr/util/regex/regcomp.c:R_API int r_regex_init(RRegex *preg, const char *pattern, int cflags) {\r\nlibr/util/spaces.c:R_API bool r_spaces_init(RSpaces *sp, const char *name) {\r\nlibr/util/str_constpool.c:R_API bool r_str_constpool_init(RStrConstPool *pool) {\r\nlibr/util/strbuf.c:R_API const char *r_strbuf_initf(RStrBuf *sb, const char *fmt, ...) {\r\n0$\r\n```","comments":[{"id":"IC_kwDOAEpMrs5KfwG0","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"the how do you know if init was successful? init in io intentionally returns bool.","createdAt":"2022-09-16T21:32:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20754#issuecomment-1249837492","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5Kf-ZM","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Its kind of common that init methods return void. Its done in gobject, objc, java, vala, python, swift..\r\n\r\nUsually in object oriented paradigns like new/init/fini/free work the same. They cannot throw exceptions or fail. Thats quite imprecise because you can call allocators inside the init method and they can fail and theres no way to report back to the user because those languages assume a malloc failure implies a full program crash. R2 aims to be more flexible on this. But then we open the door of error reporting with error code or string, to be clear on whats actualy failing.\r\n\r\nI may find some literature on this to see how that's handled in languages that really consider those corner cases and the only one i know is zig. Which returns !void which is an optional error or void\r\n\r\nmy only concern is that it will be good to be consistent and use R_MUSTUSE to force programmers check for the return value when calling them in that case","createdAt":"2022-09-16T22:12:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20754#issuecomment-1249896012","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Ks2Od","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"Such conventions do not really matter imo. I'm not jumping off a bridge because the cool kids do it.","createdAt":"2022-09-21T06:38:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20754#issuecomment-1253270429","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5QHufL","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"totally not a blocker for 5.8","createdAt":"2022-12-09T11:41:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20754#issuecomment-1344202699","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5ideJC","author":{"login":"RHL120"},"authorAssociation":"CONTRIBUTOR","body":"> the how do you know if init was successful? init in io intentionally returns bool.\r\n\r\nI did a quick git grep for `r_core_config_init` and `r_core_init` none of their callers use their return values as far as I can tell.","createdAt":"2023-07-26T14:13:34Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20754#issuecomment-1651892802","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5ifoHP","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Worth improving","createdAt":"2023-07-26T20:36:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20754#issuecomment-1652457935","viewerDidAuthor":true}],"number":20754,"title":"void init"},{"body":"\r\n![ksnip_20220914-214502](https://user-images.githubusercontent.com/5904302/190248023-74ad6b10-8ed3-48e4-8ca4-b621a265cca5.png)\r\n\r\n","comments":[{"id":"IC_kwDOAEpMrs5KWOwx","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Imho the dword shouldnt be necessary","createdAt":"2022-09-14T21:56:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20743#issuecomment-1247341617","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5KWQQ9","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"yes, for this case regsize is also wordsize","createdAt":"2022-09-14T22:05:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20743#issuecomment-1247347773","viewerDidAuthor":false}],"number":20743,"title":"Cannot assemble bsr eax, dword [4]"},{"body":"```\r\n==51943==ERROR: AddressSanitizer: heap-use-after-free on address 0x000105304384 at pc 0x0001056d8cb4 bp 0x00016b7926d0 sp 0x00016b7926c8\r\nREAD of size 1 at 0x000105304384 thread T1\r\n    #0 0x1056d8cb0 in r_th_lock_enter thread_lock.c:98\r\n    #1 0x104706924 in sigchld_th run.c:457\r\n    #2 0x1056d6764 in _r_th_launcher thread.c:36\r\n    #3 0x1bbbe0268 in _pthread_start+0x90 (libsystem_pthread.dylib:arm64e+0x7268)\r\n    #4 0x1bbbdb088 in thread_start+0x4 (libsystem_pthread.dylib:arm64e+0x2088)\r\n\r\n0x000105304384 is located 4 bytes inside of 72-byte region [0x000105304380,0x0001053043c8)\r\nfreed by thread T2 here:\r\n    #0 0x106047c94 in wrap_free+0x98 (libclang_rt.asan_osx_dynamic.dylib:arm64e+0x3fc94)\r\n    #1 0x1056d92e4 in r_th_lock_free thread_lock.c:162\r\n    #2 0x10471923c in subprocess_runner run.c:808\r\n    #3 0x104710174 in run_r2_test run.c:921\r\n    #4 0x10470f900 in r2r_run_cmd_test run.c:960\r\n    #5 0x104716c78 in r2r_run_test run.c:1297\r\n    #6 0x10471e9e8 in worker_th r2r.c:629\r\n    #7 0x1056d6764 in _r_th_launcher thread.c:36\r\n    #8 0x1bbbe0268 in _pthread_start+0x90 (libsystem_pthread.dylib:arm64e+0x7268)\r\n    #9 0x1bbbdb088 in thread_start+0x4 (libsystem_pthread.dylib:arm64e+0x2088)\r\n\r\npreviously allocated by thread T2 here:\r\n    #0 0x106047f24 in wrap_calloc+0x9c (libclang_rt.asan_osx_dynamic.dylib:arm64e+0x3ff24)\r\n    #1 0x1056d84a8 in r_th_lock_new thread_lock.c:71\r\n    #2 0x104707d08 in r2r_subprocess_start run.c:533\r\n    #3 0x104718f2c in subprocess_runner run.c:795\r\n    #4 0x104710174 in run_r2_test run.c:921\r\n    #5 0x10470f900 in r2r_run_cmd_test run.c:960\r\n    #6 0x104716c78 in r2r_run_test run.c:1297\r\n    #7 0x10471e9e8 in worker_th r2r.c:629\r\n    #8 0x1056d6764 in _r_th_launcher thread.c:36\r\n    #9 0x1bbbe0268 in _pthread_start+0x90 (libsystem_pthread.dylib:arm64e+0x7268)\r\n    #10 0x1bbbdb088 in thread_start+0x4 (libsystem_pthread.dylib:arm64e+0x2088)\r\n\r\nThread T1 created by T0 here:\r\n    #0 0x106041f58 in wrap_pthread_create+0x54 (libclang_rt.asan_osx_dynamic.dylib:arm64e+0x39f58)\r\n    #1 0x1056d6074 in r_th_new thread.c:219\r\n    #2 0x104705fb4 in r2r_subprocess_init run.c:486\r\n    #3 0x10471a55c in main r2r.c:336\r\n    #4 0x104a51088 in start+0x204 (dyld:arm64e+0x5088)\r\n\r\nThread T2 created by T0 here:\r\n    #0 0x106041f58 in wrap_pthread_create+0x54 (libclang_rt.asan_osx_dynamic.dylib:arm64e+0x39f58)\r\n    #1 0x1056d6074 in r_th_new thread.c:219\r\n    #2 0x10471c748 in main r2r.c:481\r\n    #3 0x104a51088 in start+0x204 (dyld:arm64e+0x5088)\r\n\r\nSUMMARY: AddressSanitizer: heap-use-after-free thread_lock.c:98 in r_th_lock_enter\r\nShadow bytes around the buggy address:\r\n  0x007020a80820: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x007020a80830: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x007020a80840: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x007020a80850: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x007020a80860: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n=>0x007020a80870:[fd]fd fd fd fd fd fd fd fd fa fa fa fa fa fd fd\r\n  0x007020a80880: fd fd fd fd fd fd fd fa fa fa fa fa fd fd fd fd\r\n  0x007020a80890: fd fd fd fd fd fa fa fa fa fa fd fd fd fd fd fd\r\n  0x007020a808a0: fd fd fd fa fa fa fa fa fd fd fd fd fd fd fd fd\r\n  0x007020a808b0: fd fa fa fa fa fa fd fd fd fd fd fd fd fd fd fa\r\n  0x007020a808c0: fa fa fa fa fd fd fd fd fd fd fd fd fd fa fa fa\r\nShadow byte legend (one shadow byte represents 8 application bytes):\r\n  Addressable:           00\r\n  Partially addressable: 01 02 03 04 05 06 07\r\n  Heap left redzone:       fa\r\n  Freed heap region:       fd\r\n  Stack left redzone:      f1\r\n  Stack mid redzone:       f2\r\n  Stack right redzone:     f3\r\n  Stack after return:      f5\r\n  Stack use after scope:   f8\r\n  Global redzone:          f9\r\n  Global init order:       f6\r\n  Poisoned by user:        f7\r\n  Container overflow:      fc\r\n  Array cookie:            ac\r\n  Intra object redzone:    bb\r\n  ASan internal:           fe\r\n  Left alloca redzone:     ca\r\n  Right alloca redzone:    cb\r\n```","comments":[{"id":"IC_kwDOAEpMrs5Q_OmH","author":{"login":"DaKnig"},"authorAssociation":"CONTRIBUTOR","body":"how to reproduce?","createdAt":"2022-12-20T02:24:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20736#issuecomment-1358752135","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5ROrjY","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"You have to build r2 with the thread sanitizer  (edit sys/sanitize.sh), comment the first line and uncomment the second line:\r\n\r\n```sh\r\n # SANITIZE=${SANITIZE:=\"address undefined signed-integer-overflow\"}\r\n SANITIZE=${SANITIZE:=\"thread\"}\r\n```\r\n\r\nthen run the script and you can repro the bug when running `r2r -i test/db/cmd` and pressing ^C","createdAt":"2022-12-22T12:53:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20736#issuecomment-1362802904","viewerDidAuthor":true}],"number":20736,"title":"Race condition in r2r"},{"body":"## Environment\r\n\r\n```\r\n$ date\r\nMon Aug 22 22:27:25 JST 2022\r\n\r\n$ r2 -v\r\nradare2 5.7.7 29397 @ linux-x86-64 git.5.7.6-160-gf9f9e367de\r\ncommit: f9f9e367de2c5e2ad252d10a21575bf949a3937d build: 2022-08-22__22:20:13\r\n\r\n$ uname -ms\r\nLinux x86_64\r\n\r\n```\r\n\r\n## Description\r\n\r\nmcall - memroy calls\r\nrcall - register calls\r\nucall - unknown calls\r\n\r\nthe `/at mcall`, `/at rcall` outputs must be subsets of `/at ucall` output but it is not\r\n## Test\r\n\r\n```\r\n$ r2 /bin/ls\r\n[0x00005850]> /at mcall | wc -l\r\n0\r\n[0x00005850]> /at rcall | wc -l\r\n33\r\n[0x00005850]> /at ucall | wc -l\r\n25\r\n```\r\n0 + 33 != 25\r\n\r\nAdditionally rcall is not in the list of instruction types:\r\n\r\n`| /atl                  list all the instruction types (RAnalOp.Type)`:\r\n```\r\n[0x00005850]> /atl ~call\r\ncall\r\nucall\r\n```\r\n\r\n","comments":[{"id":"IC_kwDOAEpMrs5JqYU9","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"mcall doesn't exist.\r\n\r\nwe use ucall for memory calls, and rcall for register calls. historically register calls were treated as ucalls, but this is no longer the case","createdAt":"2022-09-02T19:50:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20632#issuecomment-1235846461","viewerDidAuthor":false}],"number":20632,"title":"make mcall and rcall be a subsets of ucall"},{"body":"## Description\r\n\r\nThis issue tracks remaining items to support Solana's SBFv2 arch (to be implemented in `bpf.cs`)\r\n\r\n- [ ] Syscall detection (see https://bpf.wtf/sol-0x04-syscalls/)\r\n- [ ] Syscall emulation\r\n- [ ] Remote debugging support\r\n- [ ] `sdiv32` / `sdiv64` opcode (needs Capstone change)\r\n","comments":[{"id":"IC_kwDOAEpMrs6_PSew","author":{"login":"LaurieValcLach"},"authorAssociation":"NONE","body":"I'm interest in this feature and would like to contribute. Can i start working on it ?","createdAt":"2025-08-20T23:38:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20614#issuecomment-3208456112","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs6_Usmg","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Of course! All yours. Im not aware of anyone working on this","createdAt":"2025-08-21T10:07:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/20614#issuecomment-3209873824","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs6_xeKc","author":{"login":"LaurieValcLach"},"authorAssociation":"NONE","body":"Good i'm on it!","createdAt":"2025-08-23T21:11:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20614#issuecomment-3217416860","viewerDidAuthor":false}],"number":20614,"title":"Solana (SBFv2) CPU support"},{"body":"* https://www.ibm.com/docs/en/aix/7.2?topic=formats-xcoff-object-file-format\r\n* https://github.com/silentsignal/xcoff-ks\r\n* https://www.ibm.com/docs/en/ssw_aix_72/filesreference/filesreference_pdf.pdf\r\n* http://www.oss4aix.org/download/latest/aix72/","comments":[{"id":"IC_kwDOAEpMrs5IytQl","author":{"login":"riptl"},"authorAssociation":"CONTRIBUTOR","body":"Yay. Taking this one","createdAt":"2022-08-20T07:44:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20601#issuecomment-1221252133","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5JBLDQ","author":{"login":"ZzEeKkAa"},"authorAssociation":"NONE","body":"I'm new to radare2, but I've recently discovered that llvm has pretty wide support for different binary formats. XCOFF including, may be will be helpful:\r\nhttps://github.com/llvm/llvm-project/blob/main/llvm/lib/BinaryFormat/XCOFF.cpp","createdAt":"2022-08-24T01:01:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/radareorg/radare2/issues/20601#issuecomment-1225044176","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5L0eSF","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"@ZzEeKkAa I can only agree with you. KIt sounds very cool! BUT if you want to launch yourself in this adventure, do not forget to create tests for your own code. at least as many as there are instructions in your architetcture: create a file with name \"xcoff\" here: https://github.com/radareorg/radare2/tree/master/test/db/asm. AND edit documentation: to r2 blog: https://github.com/radareorg/blog additionally add it to the readme: add it to readme at https://github.com/radareorg/radare2#file-formats\r\n\r\n\r\nUse 8051 anal architecture plugin as template.  The code of this plugin is just almost perfect. Check : https://github.com/radareorg/radare2/blob/master/libr/anal/p/anal_8051.c\r\n\r\nFor the make file, read https://book.rada.re/plugins/dev-asm.html and https://book.rada.re/plugins/dev-anal.html\r\n\r\nThese two type of plugin have been merged in anal. Put it all together here.\r\n\r\nGood luck.\r\n\r\nLet me check for a review please.","createdAt":"2022-10-07T20:07:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20601#issuecomment-1272046725","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5L0erE","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"> I'm new to radare2, but I've recently discovered that llvm has pretty wide support for different binary formats. XCOFF including, may be will be helpful: https://github.com/llvm/llvm-project/blob/main/llvm/lib/BinaryFormat/XCOFF.cpp\r\n\r\nyes but r2 does not want to have libraries in his code. Do not import llvm please. Reimplement all instead.","createdAt":"2022-10-07T20:09:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20601#issuecomment-1272048324","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5UJGGh","author":{"login":"riptl"},"authorAssociation":"CONTRIBUTOR","body":"Go is the best resource on this: https://go.dev/src/internal/xcoff/xcoff.go","createdAt":"2023-02-01T08:43:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20601#issuecomment-1411670433","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5Zetlu","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"@terorie can we close this?","createdAt":"2023-04-09T22:05:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20601#issuecomment-1501223278","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5qUVOT","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Ping @terorie ","createdAt":"2023-10-28T05:58:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20601#issuecomment-1783714707","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5s42DV","author":{"login":"riptl"},"authorAssociation":"CONTRIBUTOR","body":"@trufae No, we still don't have XCOFF(32) support. Only XCOFF64\r\n\r\n```\r\n% build/priv_install_dir/bin/rabin2 -I test/bins/xcoff/gcc-ppc32-aix-dwarf2-exec\r\nbinsz    54694\r\nbits     0\r\ncanary   false\r\ninjprot  false\r\ncrypto   false\r\nendian   little\r\nhavecode false\r\n```\r\n\r\nXCOFF is an odd middle ground between COFF and XCOFF64. (way weirder than the relationship between ELF32 and ELF64)\r\nProbably best to start a new plugin for it. \r\n\r\nI'm pretty sure I have some unpublished code for it somewhere on my PC, let me try to dig it up. ","createdAt":"2023-11-26T17:23:02Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20601#issuecomment-1826840789","viewerDidAuthor":false}],"number":20601,"title":"Add support for XCOFF binaries"},{"body":"## Description\r\n\r\nA few good practices that will improve the code.\r\n\r\n1. Replace ```malloc``` with ```calloc``` everywhere.\r\n2. Use ```r_free``` instead of ```free``` - this will zeroize the pointer which is being freed.\r\n3. Initialize local variables to a definite value (generally zeroize everything)\r\n4. Codebase has ```strcpy``` and such unsafe functions - which should be replaced by their safer variants (strncpy).\r\n\r\nI believe the above 4 can be done without much effort/decision making.\r\n\r\nBelow are a few things we'll have to discuss and decide on.\r\n\r\n1. Would it be a good idea to use the safeC library (https://rurban.github.io/safeclib/doc/safec-3.0/index.html) instead of plain C functions? - it'll enforce stronger checks(NULL checks, boundary/length checks etc.,) - hardens code against corruption and crashes.\r\n7. A few tools are leaking memory (which can be easily caught on valgrind) - can we aim to fix all the memory leaks? Do you think it is necessary at this stage or can it be ignored?\r\n\r\nRegards,\r\nAdwaith","comments":[{"id":"IC_kwDOAEpMrs5IHM8G","author":{"login":"richardpl"},"authorAssociation":"CONTRIBUTOR","body":"1. can impact performance\r\n2. not always possible\r\n3. this can hide bugs\r\n4. strcpy is safe if used in safe way","createdAt":"2022-08-09T20:34:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20568#issuecomment-1209847558","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5IHkXO","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Good suggestions!\r\n\r\nsome of those changes were planned already, so let me elaborate:\r\n\r\n1 for malloc/free i plan to change them all in 5.8 with macros named r_malloc() and r_free() this way we can use a different allocator at compile time and also add early return versions to check for null\r\n\r\n2 we have R_FREE which nulls the pointer. Theres no need to nullify the contents before freeing. It may seem safer but if sthg is accessed theres a bug somewhere else\r\n\r\n3 coverity and last gcc and valgrind are able to catch most. Not to say all uninitialized variables. It may affect performance as richard said\r\n\r\n4 strcpy is a very bad function and should be avoided to avoid bad uses. Most of the time theres a better way to rewrite the code than using strcpy. Im in favour to add a lint for this\r\n\r\n","createdAt":"2022-08-09T22:11:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20568#issuecomment-1209943502","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5IIcEv","author":{"login":"swoops"},"authorAssociation":"COLLABORATOR","body":"IMO `strncpy` is more scary than `strcpy` because it's danger is subtler. I know `strcpy` is unsafe just from it's prototype. However, `strncpy` can cause leaks and even overflows if you don't ensure the string is null terminated after the copy. Consider:\r\n\r\n```\r\n#include <stdio.h>\r\n#include <string.h>\r\nint main(int argc, char *argv[]) {\r\n\tchar buf1[4];\r\n\tchar buf2[4];\r\n\tif (argc == 3) {\r\n\t\tstrncpy (buf1, argv[1], 4);\r\n\t\tstrncpy (buf2, argv[2], 4);\r\n\t\tprintf(\"buf1: %s\\n\", buf1);\r\n\t\tprintf(\"buf2: %s\\n\", buf2);\r\n\t}\r\n\treturn 0;\r\n}\r\n```\r\nThe code above seems safe but:\r\n```\r\n./a.out AAAA BBBB\r\nbuf1: AAAA\r\nbuf2: BBBBAAAA\r\n```\r\n\r\nNow the buf2 string is longer then expected which could lead to an overflow depending how it's used. Additionally, it's only by chance that `buf1` ends with a NULL byte, otherwise there would be a stack leak, potentially exposing the stack canary. I believe `snprintf` has this behavior as well.\r\n\r\nChanging the `strncpy` size from 4 to 3 does not help, the same behavior will be seen as long as `buf2[3]` is not a NULL.\r\n\r\nSo I would rather have a `r_strncpy` available that always NULL terminates.","createdAt":"2022-08-10T05:18:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20568#issuecomment-1210171695","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5IQGX9","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Agree strncpy is also dangerous and should be forbidden in r2land","createdAt":"2022-08-11T15:56:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20568#issuecomment-1212179965","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5JxUEW","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"I think that strcpy and strncpy have their valid niches in r2 codebase (copy const strings to destinations of guaranteed length, doing copy operations within apis like r_strbuf).\r\n\r\nI don't see the argument for replacing all calls to malloc (R_NEW) with calloc (R_NEW0) in our existing codebase. But i don't have a strong opinion on that.\r\n\r\nLocal vars should only be declared on or nearby first write access.\r\n\r\nWe're aware where the memleaks come from, and it's a rather structural problem instead of being caused by the usage of certain \"unsafe\" functions.\r\n\r\n@swoops snprintf is better\r\n\r\n","createdAt":"2022-09-06T05:07:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20568#issuecomment-1237664022","viewerDidAuthor":false}],"number":20568,"title":"Code guidelines suggestions"},{"body":"## Environment\r\n\r\n```sh\r\nMon 08 Aug 2022 10:13:28 AM CEST\r\nradare2 5.7.7 28617 @ linux-x86-64 git.5.7.6-38-gc0d3c226f\r\ncommit: c0d3c226f161663248975fc90e20af464b683b27 build: 2022-08-08__08:38:18\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\nThe last PR #20471 is meant to introduce the ESIL feature to have a more accurate syscall detection.\r\nAlthough it solves some corner cases, it takes a step back on the overall quality of the feature.\r\nThe test bench where I verified my claims is the glibc-2.34-40.el9.x86_64 (md5 f9a583d92191dc57dc5996a55c936892).\r\nIn this binary the `__pthread_mutex_lock_full` starts @ 0x000a2380, ends @0x000a2b08, and  has  four syscall in its body ash shown below.\r\n```\r\n0x000a251c      0f05           syscall\r\n0x000a2653      0f05           syscall\r\n0x000a281d      0f05           syscall\r\n0x000a2999      0f05           syscall\r\n```\r\nThe syscall list is missing 2 of its 4 syscall as shown below:\r\n```\r\n[0x000a2380]>  /as | grep 0x000a2\r\n0x000a2315 futex        ; not in __pthread_mutex_lock_full\r\n0x000a251c futex\r\n0x000a2653 rt_sigprocmask\r\n0x000a2ec9 rt_sigprocmask   ; not in __pthread_mutex_lock_full\r\n0x000a2f43 futex            ; not in __pthread_mutex_lock_full\r\n```\r\nthe syscall @0x000a281d, and @0x000a2999 are not listed.\r\nThe syscall@0x000a2653 is identified as `rt_sigprocmask`, where in reality it is a `futex`. The syscall_nr is loaded at 0x000a23ee.\r\n\r\nI attach to this issue the glibc version where I verified this issue.\r\n## Test\r\n\r\n```\r\n$ r2 /tmp/glibc-2.34-40.el9.x86_64_libc.so \r\nWarning: run r2 with -e bin.cache=true to fix relocations in disassembly\r\n -- Radare2 is like violence. If it doesn't solve your problem, you aren't using enough.\r\n[0x00040070]> aa\r\n[ERROR: Cannot find basic block for switch case at 0x0012c3a2 bbdelta = 18\r\nERROR: Cannot find basic block for switch case at 0x000d6556 bbdelta = 34\r\nERROR: Cannot find basic block for switch case at 0x001980d9 bbdelta = 23\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze all functions arguments/locals\r\n[0x00040070]> s sym.__pthread_mutex_lock_full\r\n[0x000a2380]> pdf\r\nDo you want to print 443 lines? (y/N) y\r\n            ; CODE XREF from sym.pthread_mutex_lock @ 0xa2bd0(x)\r\nâ”Œ 1875: sym.__pthread_mutex_lock_full (int64_t arg1, int64_t arg2, int64_t arg_4h, int64_t arg_8h, int64_t arg_ch, int64_t arg_10h, int64_t arg_18h, int64_t arg_20h);\r\nâ”‚           ; arg int64_t arg1 @ rdi\r\nâ”‚           ; arg int64_t arg2 @ rsi\r\nâ”‚           ; arg int64_t arg_4h @ rbp+0x4\r\nâ”‚           ; arg int64_t arg_8h @ rbp+0x8\r\nâ”‚           ; arg int64_t arg_ch @ rbp+0xc\r\nâ”‚           ; arg int64_t arg_10h @ rbp+0x10\r\nâ”‚           ; arg int64_t arg_18h @ rbp+0x18\r\nâ”‚           ; arg int64_t arg_20h @ rbp+0x20\r\nâ”‚           ; var int64_t var_ch @ rsp-0x4c\r\nâ”‚           ; var int64_t var_14h @ rsp-0x44\r\nâ”‚           ; var int64_t var_18h @ rsp-0x40\r\nâ”‚           0x000a2380      4157           push r15\r\nâ”‚           0x000a2382      4156           push r14\r\nâ”‚           0x000a2384      4155           push r13\r\nâ”‚           0x000a2386      4154           push r12\r\nâ”‚           0x000a2388      55             push rbp\r\nâ”‚           0x000a2389      4889fd         mov rbp, rdi                ; arg1\r\nâ”‚           0x000a238c      53             push rbx\r\nâ”‚           0x000a238d      4883ec28       sub rsp, 0x28\r\nâ”‚           0x000a2391      64488b042528.  mov rax, qword fs:[0x28]\r\nâ”‚           0x000a239a      4889442418     mov qword [var_18h], rax\r\nâ”‚           0x000a239f      31c0           xor eax, eax\r\nâ”‚           0x000a23a1      648b0425d002.  mov eax, dword fs:[0x2d0]\r\nâ”‚           0x000a23a9      8944240c       mov dword [var_ch], eax\r\nâ”‚           0x000a23ad      8b5710         mov edx, dword [rdi + 0x10] ; arg1\r\nâ”‚           0x000a23b0      4c8d7710       lea r14, [rdi + 0x10]       ; arg1\r\nâ”‚           0x000a23b4      89d0           mov eax, edx\r\nâ”‚           0x000a23b6      83e07f         and eax, 0x7f\r\nâ”‚           0x000a23b9      83f833         cmp eax, 0x33\r\nâ”‚       â”Œâ”€< 0x000a23bc      0f8fd6010000   jg 0xa2598\r\nâ”‚       â”‚   0x000a23c2      83f82f         cmp eax, 0x2f\r\nâ”‚      â”Œâ”€â”€< 0x000a23c5      0f8ff5000000   jg 0xa24c0\r\nâ”‚      â”‚â”‚   0x000a23cb      83f813         cmp eax, 0x13\r\nâ”‚     â”Œâ”€â”€â”€< 0x000a23ce      0f8fe4000000   jg 0xa24b8\r\nâ”‚     â”‚â”‚â”‚   0x000a23d4      83e270         and edx, 0x70\r\nâ”‚    â”Œâ”€â”€â”€â”€< 0x000a23d7      0f84ab000000   je 0xa2488\r\nâ”‚    â”‚â”‚â”‚â”‚   0x000a23dd      4c8d4f20       lea r9, [rdi + 0x20]        ; arg1\r\nâ”‚    â”‚â”‚â”‚â”‚   0x000a23e1      644c890c25f0.  mov qword fs:[0x2f0], r9\r\nâ”‚    â”‚â”‚â”‚â”‚   0x000a23ea      8b17           mov edx, dword [rdi]        ; arg1\r\nâ”‚    â”‚â”‚â”‚â”‚   0x000a23ec      31c9           xor ecx, ecx\r\nâ”‚    â”‚â”‚â”‚â”‚   0x000a23ee      41bdca000000   mov r13d, 0xca\r\nâ”‚    â”‚â”‚â”‚â”‚   0x000a23f4      bb81080000     mov ebx, 0x881\r\nâ”‚    â”‚â”‚â”‚â”‚   ; CODE XREFS from sym.__pthread_mutex_lock_full @ 0xa2833(x), 0xa28df(x), 0xa2974(x)\r\nâ”‚ â”Œâ”Œâ”Œâ”€â”€â”€â”€â”€> 0x000a23f9      85d2           test edx, edx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a23fb      0f85e4030000   jne 0xa27e5\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2401      8b74240c       mov esi, dword [var_ch]\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2405      89d0           mov eax, edx\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2407      09ce           or esi, ecx\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2409      f00fb17500     lock cmpxchg dword [rbp], esi\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a240e      89c2           mov edx, eax\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2410      85c0           test eax, eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2412      0f85cd030000   jne 0xa27e5\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2418      817d08feffff.  cmp dword [arg_8h], 0x7ffffffe\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a241f      0f840e050000   je 0xa2933\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2425      c74504010000.  mov dword [arg_4h], 1\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a242c      64488b0425e0.  mov rax, qword fs:[0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2435      4883e0fe       and rax, 0xfffffffffffffffe\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2439      4c8948f8       mov qword [rax - 8], r9\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a243d      64488b0425e0.  mov rax, qword fs:[0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2446      48894520       mov qword [arg_20h], rax\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a244a      64488b042510.  mov rax, qword fs:[0x10]\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2453      4805e0020000   add rax, 0x2e0\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2459      48894518       mov qword [arg_18h], rax\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a245d      644c890c25e0.  mov qword fs:[0x2e0], r9\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2466      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   ; CODE XREFS from sym.__pthread_mutex_lock_full @ 0xa2692(x), 0xa2727(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2473      8b44240c       mov eax, dword [var_ch]\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2477      83450c01       add dword [arg_ch], 1\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a247b      894508         mov dword [arg_8h], eax\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a247e      90             nop\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a247f      4531c0         xor r8d, r8d\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2482      eb0a           jmp 0xa248e\r\n..\r\nâ”‚ â”€â”€â”€â””â”€â”€â”€â”€> 0x000a2488      41b816000000   mov r8d, 0x16\r\nâ”‚ â•Žâ•Žâ•Ž â”‚â”‚â”‚   ; XREFS: CODE 0x000a2482  CODE 0x000a2756  CODE 0x000a27e0  CODE 0x000a285f  CODE 0x000a292e  CODE 0x000a2959  \r\nâ”‚ â•Žâ•Žâ•Ž â”‚â”‚â”‚   ; XREFS: CODE 0x000a29de  CODE 0x000a2a3e  CODE 0x000a2a91  CODE 0x000a2ac5  \r\nâ”‚ â”€â”€â”€â”Œâ”€â”€â”€â”€> 0x000a248e      488b442418     mov rax, qword [var_18h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2493      64482b042528.  sub rax, qword fs:[0x28]\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a249c      0f8566060000   jne 0xa2b08\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24a2      4883c428       add rsp, 0x28\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24a6      4489c0         mov eax, r8d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24a9      5b             pop rbx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24aa      5d             pop rbp\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24ab      415c           pop r12\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24ad      415d           pop r13\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24af      415e           pop r14\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24b1      415f           pop r15\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24b3      c3             ret\r\n..\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ””â”€â”€â”€> 0x000a24b8      83e820         sub eax, 0x20               ; sym.__libc_tsd_CTYPE_TOUPPER ; \"@\"\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž â”‚â”‚   0x000a24bb      83f803         cmp eax, 3\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a24be      77c8           ja 0xa2488\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž â””â”€â”€> 0x000a24c0      8b4510         mov eax, dword [arg_10h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž  â”‚   0x000a24c3      4189c1         mov r9d, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž  â”‚   0x000a24c6      4183e103       and r9d, 3\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž  â”‚   0x000a24ca      83e010         and eax, 0x10               ; sym.__libc_errno\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž  â”‚   0x000a24cd      4189c0         mov r8d, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž â”Œâ”€â”€< 0x000a24d0      0f85d2010000   jne 0xa26a8\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž â”‚â”‚   ; CODE XREF from sym.__pthread_mutex_lock_full @ 0xa26b9(x)\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”Œâ”€â”€â”€> 0x000a24d6      8b4500         mov eax, dword [rbp]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a24d9      25ffffff3f     and eax, 0x3fffffff\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a24de      3944240c       cmp dword [var_ch], eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a24e2      0f8413040000   je 0xa28fb\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a24e8      8b5c240c       mov ebx, dword [var_ch]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a24ec      31c0           xor eax, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a24ee      f00fb15d00     lock cmpxchg dword [rbp], ebx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a24f3      85c0           test eax, eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a24f5      0f84c3010000   je 0xa26be\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a24fb      be06000000     mov esi, 6\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2500      41bd80000000   mov r13d, 0x80              ; sym.thread_rpc_vars ; \" 7\\x1c\"\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2506      4585c0         test r8d, r8d\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2509      0f84d5030000   je 0xa28e4\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   ; CODE XREF from sym.__pthread_mutex_lock_full @ 0xa28f6(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a250f      4531d2         xor r10d, r10d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2512      31d2           xor edx, edx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2514      4889ef         mov rdi, rbp\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2517      b8ca000000     mov eax, 0xca\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a251c      0f05           syscall\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a251e      83f892         cmp eax, 0xffffff92\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2521      0f8434020000   je 0xa275b\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2527      8d5023         lea edx, [rax + 0x23]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a252a      83fa23         cmp edx, 0x23\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a252d      0f873d010000   ja 0xa2670\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2533      48b901200081.  movabs rcx, 0x981002001\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a253d      480fa3d1       bt rcx, rdx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2541      0f8329010000   jae 0xa2670\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2547      89c2           mov edx, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2549      83e2df         and edx, 0xffffffdf         ; 4294967263\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a254c      83fadd         cmp edx, 0xffffffdd\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a254f      0f8506020000   jne 0xa275b\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2555      83f8dd         cmp eax, 0xffffffdd\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2558      0f8432030000   je 0xa2890\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a255e      83f8fd         cmp eax, 0xfffffffd\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2561      7509           jne 0xa256c\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2563      4585c0         test r8d, r8d\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2566      0f855e050000   jne 0xa2aca\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a256c      488d5c2414     lea rbx, [var_14h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2571      0f1f80000000.  nop dword [rax]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   ; CODE XREF from sym.__pthread_mutex_lock_full @ 0xa2591(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2578      4589e8         mov r8d, r13d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a257b      31c9           xor ecx, ecx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a257d      31d2           xor edx, edx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a257f      31f6           xor esi, esi\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2581      4889df         mov rdi, rbx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2584      c74424140000.  mov dword [var_14h], 0\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a258c      e84f9effff     call sym.__GI___futex_abstimed_wait64\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2591      ebe5           jmp 0xa2578\r\n..\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â””â”€> 0x000a2598      83e840         sub eax, 0x40               ; case.0x18e554.1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚    0x000a259b      83f803         cmp eax, 3\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a259e      0f87e4feffff   ja 0xa2488\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚    0x000a25a4      8b4710         mov eax, dword [rdi + 0x10] ; arg1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚    0x000a25a7      41bdffffffff   mov r13d, 0xffffffff        ; -1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚    0x000a25ad      448b27         mov r12d, dword [rdi]       ; arg1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚    0x000a25b0      8b5c240c       mov ebx, dword [var_ch]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚    0x000a25b4      3b5f08         cmp ebx, dword [rdi + 8]    ; arg1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”Œâ”€< 0x000a25b7      0f846f010000   je 0xa272c\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a25bd      41bfca000000   mov r15d, 0xca\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25c3      0f1f440000     nop dword [rax + rax]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   ; CODE XREF from sym.__pthread_mutex_lock_full @ 0xa26a3(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a25c8      4489e3         mov ebx, r12d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25cb      c1eb13         shr ebx, 0x13\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25ce      e84d570000     call sym.__GI___pthread_current_priority\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25d3      39d8           cmp eax, ebx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a25d5      0f8f5d020000   jg 0xa2838\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25db      89de           mov esi, ebx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25dd      4489ef         mov edi, r13d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25e0      e83b530000     call sym.__pthread_tpp_change_priority\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25e5      4189c0         mov r8d, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25e8      85c0           test eax, eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a25ea      0f859efeffff   jne 0xa248e\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25f0      4589e0         mov r8d, r12d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25f3      4181e00000f8.  and r8d, 0xfff80000\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25fa      4589c1         mov r9d, r8d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25fd      4489c0         mov eax, r8d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2600      4183c901       or r9d, 1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2604      f0440fb14d00   lock cmpxchg dword [rbp], r9d\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a260a      7474           je 0xa2680\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a260c      4489c2         mov edx, r8d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a260f      83ca02         or edx, 2\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2612      eb0e           jmp 0xa2622\r\n..\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2618      4489c0         mov eax, r8d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a261b      f00fb15500     lock cmpxchg dword [rbp], edx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2620      745e           je 0xa2680\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   ; CODE XREF from sym.__pthread_mutex_lock_full @ 0xa2612(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2622      4489c8         mov eax, r9d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2625      f00fb15500     lock cmpxchg dword [rbp], edx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a262a      89c1           mov ecx, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a262c      4189c4         mov r12d, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a262f      81e10000f8ff   and ecx, 0xfff80000\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2635      4139c8         cmp r8d, ecx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2638      7566           jne 0xa26a0\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a263a      4139c0         cmp r8d, eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a263d      74d9           je 0xa2618\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a263f      418b36         mov esi, dword [r14]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2642      4531d2         xor r10d, r10d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2645      4889ef         mov rdi, rbp\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2648      4489f8         mov eax, r15d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a264b      f7d6           not esi\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a264d      81e680000000   and esi, 0x80               ; sym.thread_rpc_vars ; \" 7\\x1c\"\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2653      0f05           syscall\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2655      483d00f0ffff   cmp rax, 0xfffffffffffff000\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a265b      76bb           jbe 0xa2618\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a265d      83c00b         add eax, 0xb\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2660      83f80b         cmp eax, 0xb\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2663      770b           ja 0xa2670\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2665      bf81080000     mov edi, 0x881\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a266a      480fa3c7       bt rdi, rax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a266e      72a8           jb 0xa2618\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2670      488d3dc1b111.  lea rdi, str.The_futex_facility_returned_an_unexpected_error_code._n ; 0x1bd838 ; \"The futex facility returned an unexpected error code.\\n\"\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2677      e8242fffff     call sym.__libc_fatal\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a267c      0f1f4000       nop dword [rax]\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2680      8b4508         mov eax, dword [arg_8h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2683      85c0           test eax, eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2685      0f855e040000   jne 0xa2ae9\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a268b      c74504010000.  mov dword [arg_4h], 1\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2692      e9dcfdffff     jmp 0xa2473\r\n..\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a26a0      4189dd         mov r13d, ebx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a26a3      e920ffffff     jmp 0xa25c8\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ””â”€â”€> 0x000a26a8      488d4520       lea rax, [arg_20h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Ž â”‚   0x000a26ac      4883c801       or rax, 1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Ž â”‚   0x000a26b0      6448890425f0.  mov qword fs:[0x2f0], rax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ””â”€â”€â”€< 0x000a26b9      e918feffff     jmp 0xa24d6\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a26be      4585c0         test r8d, r8d\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a26c1      74c8           je 0xa268b\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž â”Œâ”€â”€> 0x000a26c3      817d08feffff.  cmp dword [arg_8h], 0x7ffffffe\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”Œâ”€â”€â”€< 0x000a26ca      0f84b0020000   je 0xa2980\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26d0      c74504010000.  mov dword [arg_4h], 1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26d7      64488b1425e0.  mov rdx, qword fs:[0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26e0      488d4520       lea rax, [arg_20h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26e4      4883e2fe       and rdx, 0xfffffffffffffffe\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26e8      488942f8       mov qword [rdx - 8], rax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26ec      64488b1425e0.  mov rdx, qword fs:[0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26f5      48895520       mov qword [arg_20h], rdx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26f9      64488b1c2510.  mov rbx, qword fs:[0x10]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2702      488d93e00200.  lea rdx, [rbx + 0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2709      48895518       mov qword [arg_18h], rdx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a270d      4883c801       or rax, 1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2711      6448890425e0.  mov qword fs:[0x2e0], rax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a271a      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2727      e947fdffff     jmp 0xa2473\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ””â”€> 0x000a272c      83e003         and eax, 3\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Ž    0x000a272f      83f802         cmp eax, 2\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”Œâ”€< 0x000a2732      0f84a0020000   je 0xa29d8\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2738      83f801         cmp eax, 1\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a273b      0f857cfeffff   jne 0xa25bd\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2741      8b4704         mov eax, dword [rdi + 4]    ; arg1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2744      83f8ff         cmp eax, 0xffffffff\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2747      0f84db010000   je 0xa2928\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a274d      83c001         add eax, 1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2750      4531c0         xor r8d, r8d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2753      894504         mov dword [arg_4h], eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2756      e933fdffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a275b      8b4500         mov eax, dword [rbp]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a275e      2500000040     and eax, 0x40000000\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2763      4585c0         test r8d, r8d\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2766      0f84f8000000   je 0xa2864\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a276c      85c0           test eax, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â””â”€â”€< 0x000a276e      0f844fffffff   je 0xa26c3\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a2774      f0816500ffff.  lock and dword [rbp], 0xbfffffff ; [0xbfffffff:4]=-1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a277c      48b801000000.  movabs rax, 0x7fffffff00000001 ; 9223372032559808513\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a2786      48894504       mov qword [arg_4h], rax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a278a      64488b1425e0.  mov rdx, qword fs:[0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a2793      488d4520       lea rax, [arg_20h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a2797      4883e2fe       and rdx, 0xfffffffffffffffe\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a279b      488942f8       mov qword [rdx - 8], rax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a279f      64488b1425e0.  mov rdx, qword fs:[0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27a8      48895520       mov qword [arg_20h], rdx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27ac      64488b1c2510.  mov rbx, qword fs:[0x10]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27b5      488d93e00200.  lea rdx, [rbx + 0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27bc      48895518       mov qword [arg_18h], rdx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27c0      4883c801       or rax, 1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27c4      6448890425e0.  mov qword fs:[0x2e0], rax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27cd      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27da      41b882000000   mov r8d, 0x82\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a27e0      e9a9fcffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a27e5      4189d0         mov r8d, edx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27e8      4181e0000000.  and r8d, 0x40000000\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”Œâ”€â”€< 0x000a27ef      0f85cb000000   jne 0xa28c0\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a27f5      89d0           mov eax, edx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a27f7      25ffffff3f     and eax, 0x3fffffff\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a27fc      3944240c       cmp dword [var_ch], eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2800      0f8458020000   je 0xa2a5e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2806      89d6           mov esi, edx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2808      85d2           test edx, edx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a280a      0f894e010000   jns 0xa295e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2810      89f2           mov edx, esi\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2812      4531d2         xor r10d, r10d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2815      31f6           xor esi, esi\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2817      4889ef         mov rdi, rbp\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a281a      4489e8         mov eax, r13d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a281d      0f05           syscall\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a281f      483d00f0ffff   cmp rax, 0xfffffffffffff000\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2825      0f8718020000   ja 0xa2a43\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   ; CODE XREF from sym.__pthread_mutex_lock_full @ 0xa2a59(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a282b      8b5500         mov edx, dword [rbp]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a282e      b900000080     mov ecx, 0x80000000\r\nâ”‚ â””â”€â”€â”€â”€â”€â”€â”€< 0x000a2833      e9c1fbffff     jmp 0xa23f9\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2838      41b816000000   mov r8d, 0x16\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a283e      4183fdff       cmp r13d, 0xffffffff\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2842      0f8446fcffff   je 0xa248e\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2848      beffffffff     mov esi, 0xffffffff         ; -1\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a284d      4489ef         mov edi, r13d\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2850      448944240c     mov dword [var_ch], r8d\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2855      e8c6500000     call sym.__pthread_tpp_change_priority\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a285a      448b44240c     mov r8d, dword [var_ch]\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a285f      e92afcffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2864      85c0           test eax, eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2866      0f841ffeffff   je 0xa268b\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a286c      488d0dfdea11.  lea rcx, str.__pthread_mutex_lock_full ; 0x1c1370 ; \"__pthread_mutex_lock_full\"\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2873      babb010000     mov edx, 0x1bb\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2878      488d35b26711.  lea rsi, [0x001b9031]       ; \"pthread_mutex_lock.c\"\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a287f      488d3d1ab111.  lea rdi, str.robust___oldval__FUTEX_OWNER_DIED___0 ; 0x1bd9a0 ; \"robust || (oldval & FUTEX_OWNER_DIED) == 0\"\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2886      e895b3faff     call sym.__assert_fail      ; void __assert_fail(const char *assertion, const char *file, unsigned int line, const char *function)\r\n..\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2890      4183e901       sub r9d, 1\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2894      4183f901       cmp r9d, 1\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2898      0f87cefcffff   ja 0xa256c\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a289e      488d0dcbea11.  lea rcx, str.__pthread_mutex_lock_full ; 0x1c1370 ; \"__pthread_mutex_lock_full\"\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a28a5      baac010000     mov edx, 0x1ac\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a28aa      488d35806711.  lea rsi, [0x001b9031]       ; \"pthread_mutex_lock.c\"\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a28b1      488d3d88b011.  lea rdi, str.e___EDEADLK___kind___PTHREAD_MUTEX_ERRORCHECK_NP__kind___PTHREAD_MUTEX_RECURSIVE_NP_ ; 0x1bd940 ; \"e != EDEADLK || (kind != PTHREAD_MUTEX_ERRORCHECK_NP && kind != PTHREAD_MUTEX_RECURSIVE_NP)\"\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a28b8      e863b3faff     call sym.__assert_fail      ; void __assert_fail(const char *assertion, const char *file, unsigned int line, const char *function)\r\n..\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â””â”€â”€> 0x000a28c0      8b44240c       mov eax, dword [var_ch]\r\nâ”‚  â•Žâ•Žâ•Žâ”‚ â”‚   0x000a28c4      89d6           mov esi, edx\r\nâ”‚  â•Žâ•Žâ•Žâ”‚ â”‚   0x000a28c6      81e600000080   and esi, 0x80000000\r\nâ”‚  â•Žâ•Žâ•Žâ”‚ â”‚   0x000a28cc      09c8           or eax, ecx\r\nâ”‚  â•Žâ•Žâ•Žâ”‚ â”‚   0x000a28ce      09c6           or esi, eax\r\nâ”‚  â•Žâ•Žâ•Žâ”‚ â”‚   0x000a28d0      89d0           mov eax, edx\r\nâ”‚  â•Žâ•Žâ•Žâ”‚ â”‚   0x000a28d2      f00fb17500     lock cmpxchg dword [rbp], esi\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”Œâ”€â”€< 0x000a28d7      0f8406010000   je 0xa29e3\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a28dd      89c2           mov edx, eax\r\nâ”‚  â””â”€â”€â”€â”€â”€â”€< 0x000a28df      e915fbffff     jmp 0xa23f9\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a28e4      448b6d10       mov r13d, dword [arg_10h]\r\nâ”‚   â•Žâ•Žâ”‚â”‚â”‚   0x000a28e8      4181e5800000.  and r13d, 0x80              ; sym.thread_rpc_vars ; \" 7\\x1c\"\r\nâ”‚   â•Žâ•Žâ”‚â”‚â”‚   0x000a28ef      4489ee         mov esi, r13d\r\nâ”‚   â•Žâ•Žâ”‚â”‚â”‚   0x000a28f2      4080f686       xor sil, 0x86\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a28f6      e914fcffff     jmp 0xa250f\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a28fb      4183f902       cmp r9d, 2\r\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€< 0x000a28ff      0f84ad010000   je 0xa2ab2\r\nâ”‚  â”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a2905      4183f901       cmp r9d, 1\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2909      0f85d9fbffff   jne 0xa24e8\r\nâ”‚  â”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a290f      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚  â”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a291c      8b4504         mov eax, dword [arg_4h]\r\nâ”‚  â”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a291f      83f8ff         cmp eax, 0xffffffff\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2922      0f8525feffff   jne 0xa274d\r\nâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€> 0x000a2928      41b80b000000   mov r8d, 0xb\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a292e      e95bfbffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2933      c74504000000.  mov dword [arg_4h], 0\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a293a      875500         xchg dword [rbp], edx\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a293d      83fa01         cmp edx, 1\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2940      0f8f5a010000   jg 0xa2aa0\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   ; CODE XREFS from sym.__pthread_mutex_lock_full @ 0xa29cc(x), 0xa2aad(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2946      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a2953      41b883000000   mov r8d, 0x83\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2959      e930fbffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a295e      81ce00000080   or esi, 0x80000000\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a2964      89d0           mov eax, edx\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a2966      f00fb17500     lock cmpxchg dword [rbp], esi\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a296b      0f849ffeffff   je 0xa2810\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a2971      8b5500         mov edx, dword [rbp]\r\nâ”‚ â•Žâ”‚â””â”€â”€â”€â”€â”€< 0x000a2974      e980faffff     jmp 0xa23f9\r\n..\r\nâ”‚ â•Žâ”‚ â•Žâ””â”€â”€â”€> 0x000a2980      c74504000000.  mov dword [arg_4h], 0\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a2987      4531d2         xor r10d, r10d\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a298a      31d2           xor edx, edx\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a298c      4889ef         mov rdi, rbp\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a298f      be07000000     mov esi, 7\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a2994      b8ca000000     mov eax, 0xca\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a2999      0f05           syscall\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a299b      483d00f0ffff   cmp rax, 0xfffffffffffff000\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a29a1      76a3           jbe 0xa2946\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29a3      83f892         cmp eax, 0xffffff92\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a29a6      749e           je 0xa2946\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29a8      83c026         add eax, 0x26\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29ab      83f826         cmp eax, 0x26\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a29ae      0f87bcfcffff   ja 0xa2670\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29b4      48ba09000008.  movabs rdx, 0x6c08000009\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29be      89c1           mov ecx, eax\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29c0      48d3ea         shr rdx, cl\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29c3      80e201         and dl, 1\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a29c6      0f84a4fcffff   je 0xa2670\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a29cc      e975ffffff     jmp 0xa2946\r\n..\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â””â”€> 0x000a29d8      41b823000000   mov r8d, 0x23               ; '#'\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a29de      e9abfaffff     jmp 0xa248e\r\nâ”‚ â•Žâ”‚ â•Ž â””â”€â”€> 0x000a29e3      48b801000000.  movabs rax, 0x7fffffff00000001 ; 9223372032559808513\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a29ed      48894504       mov qword [arg_4h], rax\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a29f1      64488b0425e0.  mov rax, qword fs:[0x2e0]\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a29fa      4883e0fe       and rax, 0xfffffffffffffffe\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a29fe      4c8948f8       mov qword [rax - 8], r9\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a02      64488b0425e0.  mov rax, qword fs:[0x2e0]\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a0b      48894520       mov qword [arg_20h], rax\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a0f      64488b042510.  mov rax, qword fs:[0x10]\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a18      4805e0020000   add rax, 0x2e0\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a1e      48894518       mov qword [arg_18h], rax\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a22      644c890c25e0.  mov qword fs:[0x2e0], r9\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a2b      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a38      41b882000000   mov r8d, 0x82\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2a3e      e94bfaffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2a43      83c00b         add eax, 0xb\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a46      83f80b         cmp eax, 0xb\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2a49      0f8721fcffff   ja 0xa2670\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a4f      480fa3c3       bt rbx, rax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2a53      0f8317fcffff   jae 0xa2670\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2a59      e9cdfdffff     jmp 0xa282b\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2a5e      418b06         mov eax, dword [r14]\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a61      83e07f         and eax, 0x7f\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a64      83f812         cmp eax, 0x12\r\nâ”‚ â•Žâ”‚ â•Ž  â”Œâ”€< 0x000a2a67      7449           je 0xa2ab2\r\nâ”‚ â•Žâ”‚ â•Ž  â”‚   0x000a2a69      83f811         cmp eax, 0x11\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2a6c      0f8594fdffff   jne 0xa2806\r\nâ”‚ â•Žâ”‚ â•Ž  â”‚   0x000a2a72      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚ â•Žâ”‚ â•Ž  â”‚   0x000a2a7f      8b4504         mov eax, dword [arg_4h]\r\nâ”‚ â•Žâ”‚ â•Ž  â”‚   0x000a2a82      83f8ff         cmp eax, 0xffffffff\r\nâ”‚ â””â”€â”€â”€â”€â”€â”€â”€< 0x000a2a85      0f849dfeffff   je 0xa2928\r\nâ”‚  â”‚ â•Ž  â”‚   0x000a2a8b      83c001         add eax, 1\r\nâ”‚  â”‚ â•Ž  â”‚   0x000a2a8e      894504         mov dword [arg_4h], eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2a91      e9f8f9ffff     jmp 0xa248e\r\n..\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2aa0      be80000000     mov esi, 0x80               ; sym.thread_rpc_vars ; \" 7\\x1c\"\r\nâ”‚  â”‚ â•Ž  â”‚   0x000a2aa5      4889ef         mov rdi, rbp\r\nâ”‚  â”‚ â•Ž  â”‚   0x000a2aa8      e8139bffff     call sym.__GI___lll_lock_wake\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2aad      e994feffff     jmp 0xa2946\r\nâ”‚  â””â”€â”€â”€â”€â””â”€> 0x000a2ab2      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚    â•Ž      0x000a2abf      41b823000000   mov r8d, 0x23               ; '#'\r\nâ”‚    â””â”€â”€â”€â”€< 0x000a2ac5      e9c4f9ffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2aca      488d0d9fe811.  lea rcx, str.__pthread_mutex_lock_full ; 0x1c1370 ; \"__pthread_mutex_lock_full\"\r\nâ”‚           0x000a2ad1      bab1010000     mov edx, 0x1b1\r\nâ”‚           0x000a2ad6      488d35546511.  lea rsi, [0x001b9031]       ; \"pthread_mutex_lock.c\"\r\nâ”‚           0x000a2add      488d3d626511.  lea rdi, str.e___ESRCH___robust ; 0x1b9046 ; \"e != ESRCH || !robust\"\r\nâ”‚           0x000a2ae4      e837b1faff     call sym.__assert_fail      ; void __assert_fail(const char *assertion, const char *file, unsigned int line, const char *function)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2ae9      488d0d80e811.  lea rcx, str.__pthread_mutex_lock_full ; 0x1c1370 ; \"__pthread_mutex_lock_full\"\r\nâ”‚           0x000a2af0      ba4e020000     mov edx, 0x24e\r\nâ”‚           0x000a2af5      488d35356511.  lea rsi, [0x001b9031]       ; \"pthread_mutex_lock.c\"\r\nâ”‚           0x000a2afc      488d3d596511.  lea rdi, str.mutex____data.__owner__0 ; 0x1b905c ; \"mutex->__data.__owner == 0\"\r\nâ”‚           0x000a2b03      e818b1faff     call sym.__assert_fail      ; void __assert_fail(const char *assertion, const char *file, unsigned int line, const char *function)\r\nâ”” â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2b08      e873a70b00     call sym.__stack_chk_fail   ; void __stack_chk_fail(void)\r\n[0x000a2380]> \r\n[0x000a2380]> aei\r\n[0x000a2380]> /as | grep 0x000a281d\r\n0x000a281d read\r\n[0x000a2380]> /as | grep 0x000a2\r\n0x000a2315 futex\r\n0x000a251c futex\r\n0x000a2653 rt_sigprocmask\r\n0x000a2ec9 rt_sigprocmask\r\n0x000a2f43 futex\r\n[0x000a2380]> /as | grep 0x000a281d\r\n[0x000a2380]> \r\n```\r\n\r\n","comments":[{"id":"IC_kwDOAEpMrs5H_iMW","author":{"login":"alessandrocarminati"},"authorAssociation":"CONTRIBUTOR","body":"[glibc-2.34-40.el9.x86_64_libc.so.tar.gz](https://github.com/radareorg/radare2/files/9280294/glibc-2.34-40.el9.x86_64_libc.so.tar.gz)\r\nTest bench","createdAt":"2022-08-08T08:42:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20559#issuecomment-1207837462","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5M9pA5","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Can you try again? I have improved this functionality at least for arm64 but other targets may be fixed too","createdAt":"2022-10-25T22:59:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20559#issuecomment-1291227193","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5NMsLO","author":{"login":"alessandrocarminati"},"authorAssociation":"CONTRIBUTOR","body":"Hello,\r\nThank you for your work.\r\nNot sure on how it performs on arm64, but for this issue here, there's no change.\r\n```\r\n$ r2 -v\r\nradare2 5.7.9 29326 @ linux-x86-64 git.5.7.8-415-g432791f8ce\r\ncommit: 432791f8cedb675703c477fc8842968e48e9acab build: 2022-10-28__17:32:04\r\n$ r2 glibc-2.34-40.el9.x86_64_libc.so\r\nWARN: run r2 with -e bin.cache=true to fix relocations in disassembly\r\n -- Using radare2 to generate intelligence ...\r\n[0x00040070]> aa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nERROR: Cannot find basic block for switch case at 0x0012c3a2 bbdelta = 18\r\nERROR: Cannot find basic block for switch case at 0x000d6556 bbdelta = 34\r\nERROR: Cannot find basic block for switch case at 0x001980d9 bbdelta = 23\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\n[0x00040070]> s sym.__pthread_mutex_lock_full\r\n[0x000a2380]> pdf\r\nDo you want to print 443 lines? (y/N) y\r\n            ; CODE XREF from sym.pthread_mutex_lock @ 0xa2bd0(x)\r\nâ”Œ 1875: sym.__pthread_mutex_lock_full (int64_t arg1, int64_t arg2, int64_t arg_4h, int64_t arg_8h, int64_t arg_ch, int64_t arg_10h, int64_t arg_18h, int64_t arg_20h);\r\nâ”‚           ; arg int64_t arg1 @ rdi\r\nâ”‚           ; arg int64_t arg2 @ rsi\r\nâ”‚           ; arg int64_t arg_4h @ rbp+0x4\r\nâ”‚           ; arg int64_t arg_8h @ rbp+0x8\r\nâ”‚           ; arg int64_t arg_ch @ rbp+0xc\r\nâ”‚           ; arg int64_t arg_10h @ rbp+0x10\r\nâ”‚           ; arg int64_t arg_18h @ rbp+0x18\r\nâ”‚           ; arg int64_t arg_20h @ rbp+0x20\r\nâ”‚           ; var int64_t var_ch @ rsp-0x4c\r\nâ”‚           ; var int64_t var_14h @ rsp-0x44\r\nâ”‚           ; var int64_t var_18h @ rsp-0x40\r\nâ”‚           0x000a2380      4157           push r15\r\nâ”‚           0x000a2382      4156           push r14\r\nâ”‚           0x000a2384      4155           push r13\r\nâ”‚           0x000a2386      4154           push r12\r\nâ”‚           0x000a2388      55             push rbp\r\nâ”‚           0x000a2389      4889fd         mov rbp, rdi                ; arg1\r\nâ”‚           0x000a238c      53             push rbx\r\nâ”‚           0x000a238d      4883ec28       sub rsp, 0x28\r\nâ”‚           0x000a2391      64488b042528.  mov rax, qword fs:[0x28]\r\nâ”‚           0x000a239a      4889442418     mov qword [var_18h], rax\r\nâ”‚           0x000a239f      31c0           xor eax, eax\r\nâ”‚           0x000a23a1      648b0425d002.  mov eax, dword fs:[0x2d0]\r\nâ”‚           0x000a23a9      8944240c       mov dword [var_ch], eax\r\nâ”‚           0x000a23ad      8b5710         mov edx, dword [rdi + 0x10] ; arg1\r\nâ”‚           0x000a23b0      4c8d7710       lea r14, [rdi + 0x10]       ; arg1\r\nâ”‚           0x000a23b4      89d0           mov eax, edx\r\nâ”‚           0x000a23b6      83e07f         and eax, 0x7f\r\nâ”‚           0x000a23b9      83f833         cmp eax, 0x33\r\nâ”‚       â”Œâ”€< 0x000a23bc      0f8fd6010000   jg 0xa2598\r\nâ”‚       â”‚   0x000a23c2      83f82f         cmp eax, 0x2f\r\nâ”‚      â”Œâ”€â”€< 0x000a23c5      0f8ff5000000   jg 0xa24c0\r\nâ”‚      â”‚â”‚   0x000a23cb      83f813         cmp eax, 0x13\r\nâ”‚     â”Œâ”€â”€â”€< 0x000a23ce      0f8fe4000000   jg 0xa24b8\r\nâ”‚     â”‚â”‚â”‚   0x000a23d4      83e270         and edx, 0x70\r\nâ”‚    â”Œâ”€â”€â”€â”€< 0x000a23d7      0f84ab000000   je 0xa2488\r\nâ”‚    â”‚â”‚â”‚â”‚   0x000a23dd      4c8d4f20       lea r9, [rdi + 0x20]        ; arg1\r\nâ”‚    â”‚â”‚â”‚â”‚   0x000a23e1      644c890c25f0.  mov qword fs:[0x2f0], r9\r\nâ”‚    â”‚â”‚â”‚â”‚   0x000a23ea      8b17           mov edx, dword [rdi]        ; arg1\r\nâ”‚    â”‚â”‚â”‚â”‚   0x000a23ec      31c9           xor ecx, ecx\r\nâ”‚    â”‚â”‚â”‚â”‚   0x000a23ee      41bdca000000   mov r13d, 0xca\r\nâ”‚    â”‚â”‚â”‚â”‚   0x000a23f4      bb81080000     mov ebx, 0x881\r\nâ”‚    â”‚â”‚â”‚â”‚   ; CODE XREFS from sym.__pthread_mutex_lock_full @ 0xa2833(x), 0xa28df(x), 0xa2974(x)\r\nâ”‚ â”Œâ”Œâ”Œâ”€â”€â”€â”€â”€> 0x000a23f9      85d2           test edx, edx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a23fb      0f85e4030000   jne 0xa27e5\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2401      8b74240c       mov esi, dword [var_ch]\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2405      89d0           mov eax, edx\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2407      09ce           or esi, ecx\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2409      f00fb17500     lock cmpxchg dword [rbp], esi\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a240e      89c2           mov edx, eax\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2410      85c0           test eax, eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2412      0f85cd030000   jne 0xa27e5\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2418      817d08feffff.  cmp dword [arg_8h], 0x7ffffffe\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a241f      0f840e050000   je 0xa2933\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2425      c74504010000.  mov dword [arg_4h], 1\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a242c      64488b0425e0.  mov rax, qword fs:[0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2435      4883e0fe       and rax, 0xfffffffffffffffe\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2439      4c8948f8       mov qword [rax - 8], r9\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a243d      64488b0425e0.  mov rax, qword fs:[0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2446      48894520       mov qword [arg_20h], rax\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a244a      64488b042510.  mov rax, qword fs:[0x10]\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2453      4805e0020000   add rax, 0x2e0\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2459      48894518       mov qword [arg_18h], rax\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a245d      644c890c25e0.  mov qword fs:[0x2e0], r9\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2466      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   ; CODE XREFS from sym.__pthread_mutex_lock_full @ 0xa2692(x), 0xa2727(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2473      8b44240c       mov eax, dword [var_ch]\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2477      83450c01       add dword [arg_ch], 1\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a247b      894508         mov dword [arg_8h], eax\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a247e      90             nop\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a247f      4531c0         xor r8d, r8d\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2482      eb0a           jmp 0xa248e\r\n..\r\nâ”‚ â”€â”€â”€â””â”€â”€â”€â”€> 0x000a2488      41b816000000   mov r8d, 0x16\r\nâ”‚ â•Žâ•Žâ•Ž â”‚â”‚â”‚   ; XREFS: CODE 0x000a2482  CODE 0x000a2756  CODE 0x000a27e0  CODE 0x000a285f  CODE 0x000a292e  CODE 0x000a2959  \r\nâ”‚ â•Žâ•Žâ•Ž â”‚â”‚â”‚   ; XREFS: CODE 0x000a29de  CODE 0x000a2a3e  CODE 0x000a2a91  CODE 0x000a2ac5  \r\nâ”‚ â”€â”€â”€â”Œâ”€â”€â”€â”€> 0x000a248e      488b442418     mov rax, qword [var_18h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2493      64482b042528.  sub rax, qword fs:[0x28]\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a249c      0f8566060000   jne 0xa2b08\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24a2      4883c428       add rsp, 0x28\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24a6      4489c0         mov eax, r8d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24a9      5b             pop rbx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24aa      5d             pop rbp\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24ab      415c           pop r12\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24ad      415d           pop r13\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24af      415e           pop r14\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24b1      415f           pop r15\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24b3      c3             ret\r\n..\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ””â”€â”€â”€> 0x000a24b8      83e820         sub eax, 0x20               ; sym.__libc_tsd_CTYPE_TOUPPER ; \"@\"\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž â”‚â”‚   0x000a24bb      83f803         cmp eax, 3\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a24be      77c8           ja 0xa2488\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž â””â”€â”€> 0x000a24c0      8b4510         mov eax, dword [arg_10h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž  â”‚   0x000a24c3      4189c1         mov r9d, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž  â”‚   0x000a24c6      4183e103       and r9d, 3\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž  â”‚   0x000a24ca      83e010         and eax, 0x10               ; sym.__libc_errno\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž  â”‚   0x000a24cd      4189c0         mov r8d, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž â”Œâ”€â”€< 0x000a24d0      0f85d2010000   jne 0xa26a8\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž â”‚â”‚   ; CODE XREF from sym.__pthread_mutex_lock_full @ 0xa26b9(x)\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”Œâ”€â”€â”€> 0x000a24d6      8b4500         mov eax, dword [rbp]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a24d9      25ffffff3f     and eax, 0x3fffffff\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a24de      3944240c       cmp dword [var_ch], eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a24e2      0f8413040000   je 0xa28fb\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a24e8      8b5c240c       mov ebx, dword [var_ch]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a24ec      31c0           xor eax, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a24ee      f00fb15d00     lock cmpxchg dword [rbp], ebx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a24f3      85c0           test eax, eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a24f5      0f84c3010000   je 0xa26be\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a24fb      be06000000     mov esi, 6\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2500      41bd80000000   mov r13d, 0x80              ; sym.thread_rpc_vars ; \" 7\\x1c\"\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2506      4585c0         test r8d, r8d\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2509      0f84d5030000   je 0xa28e4\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   ; CODE XREF from sym.__pthread_mutex_lock_full @ 0xa28f6(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a250f      4531d2         xor r10d, r10d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2512      31d2           xor edx, edx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2514      4889ef         mov rdi, rbp\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2517      b8ca000000     mov eax, 0xca\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a251c      0f05           syscall\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a251e      83f892         cmp eax, 0xffffff92\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2521      0f8434020000   je 0xa275b\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2527      8d5023         lea edx, [rax + 0x23]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a252a      83fa23         cmp edx, 0x23\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a252d      0f873d010000   ja 0xa2670\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2533      48b901200081.  movabs rcx, 0x981002001\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a253d      480fa3d1       bt rcx, rdx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2541      0f8329010000   jae 0xa2670\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2547      89c2           mov edx, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2549      83e2df         and edx, 0xffffffdf         ; 4294967263\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a254c      83fadd         cmp edx, 0xffffffdd\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a254f      0f8506020000   jne 0xa275b\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2555      83f8dd         cmp eax, 0xffffffdd\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2558      0f8432030000   je 0xa2890\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a255e      83f8fd         cmp eax, 0xfffffffd\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2561      7509           jne 0xa256c\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2563      4585c0         test r8d, r8d\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2566      0f855e050000   jne 0xa2aca\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a256c      488d5c2414     lea rbx, [var_14h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2571      0f1f80000000.  nop dword [rax]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   ; CODE XREF from sym.__pthread_mutex_lock_full @ 0xa2591(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2578      4589e8         mov r8d, r13d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a257b      31c9           xor ecx, ecx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a257d      31d2           xor edx, edx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a257f      31f6           xor esi, esi\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2581      4889df         mov rdi, rbx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2584      c74424140000.  mov dword [var_14h], 0\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a258c      e84f9effff     call sym.__GI___futex_abstimed_wait64\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2591      ebe5           jmp 0xa2578\r\n..\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â””â”€> 0x000a2598      83e840         sub eax, 0x40               ; case.0x18e554.1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚    0x000a259b      83f803         cmp eax, 3\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a259e      0f87e4feffff   ja 0xa2488\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚    0x000a25a4      8b4710         mov eax, dword [rdi + 0x10] ; arg1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚    0x000a25a7      41bdffffffff   mov r13d, 0xffffffff        ; -1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚    0x000a25ad      448b27         mov r12d, dword [rdi]       ; arg1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚    0x000a25b0      8b5c240c       mov ebx, dword [var_ch]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚    0x000a25b4      3b5f08         cmp ebx, dword [rdi + 8]    ; arg1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”Œâ”€< 0x000a25b7      0f846f010000   je 0xa272c\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a25bd      41bfca000000   mov r15d, 0xca\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25c3      0f1f440000     nop dword [rax + rax]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   ; CODE XREF from sym.__pthread_mutex_lock_full @ 0xa26a3(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a25c8      4489e3         mov ebx, r12d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25cb      c1eb13         shr ebx, 0x13\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25ce      e84d570000     call sym.__GI___pthread_current_priority\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25d3      39d8           cmp eax, ebx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a25d5      0f8f5d020000   jg 0xa2838\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25db      89de           mov esi, ebx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25dd      4489ef         mov edi, r13d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25e0      e83b530000     call sym.__pthread_tpp_change_priority\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25e5      4189c0         mov r8d, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25e8      85c0           test eax, eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a25ea      0f859efeffff   jne 0xa248e\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25f0      4589e0         mov r8d, r12d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25f3      4181e00000f8.  and r8d, 0xfff80000\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25fa      4589c1         mov r9d, r8d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25fd      4489c0         mov eax, r8d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2600      4183c901       or r9d, 1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2604      f0440fb14d00   lock cmpxchg dword [rbp], r9d\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a260a      7474           je 0xa2680\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a260c      4489c2         mov edx, r8d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a260f      83ca02         or edx, 2\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2612      eb0e           jmp 0xa2622\r\n..\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2618      4489c0         mov eax, r8d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a261b      f00fb15500     lock cmpxchg dword [rbp], edx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2620      745e           je 0xa2680\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   ; CODE XREF from sym.__pthread_mutex_lock_full @ 0xa2612(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2622      4489c8         mov eax, r9d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2625      f00fb15500     lock cmpxchg dword [rbp], edx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a262a      89c1           mov ecx, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a262c      4189c4         mov r12d, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a262f      81e10000f8ff   and ecx, 0xfff80000\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2635      4139c8         cmp r8d, ecx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2638      7566           jne 0xa26a0\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a263a      4139c0         cmp r8d, eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a263d      74d9           je 0xa2618\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a263f      418b36         mov esi, dword [r14]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2642      4531d2         xor r10d, r10d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2645      4889ef         mov rdi, rbp\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2648      4489f8         mov eax, r15d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a264b      f7d6           not esi\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a264d      81e680000000   and esi, 0x80               ; sym.thread_rpc_vars ; \" 7\\x1c\"\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2653      0f05           syscall\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2655      483d00f0ffff   cmp rax, 0xfffffffffffff000\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a265b      76bb           jbe 0xa2618\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a265d      83c00b         add eax, 0xb\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2660      83f80b         cmp eax, 0xb\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2663      770b           ja 0xa2670\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2665      bf81080000     mov edi, 0x881\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a266a      480fa3c7       bt rdi, rax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a266e      72a8           jb 0xa2618\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2670      488d3dc1b111.  lea rdi, str.The_futex_facility_returned_an_unexpected_error_code._n ; 0x1bd838 ; \"The futex facility returned an unexpected error code.\\n\"\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2677      e8242fffff     call sym.__libc_fatal\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a267c      0f1f4000       nop dword [rax]\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2680      8b4508         mov eax, dword [arg_8h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2683      85c0           test eax, eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2685      0f855e040000   jne 0xa2ae9\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a268b      c74504010000.  mov dword [arg_4h], 1\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2692      e9dcfdffff     jmp 0xa2473\r\n..\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a26a0      4189dd         mov r13d, ebx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a26a3      e920ffffff     jmp 0xa25c8\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ””â”€â”€> 0x000a26a8      488d4520       lea rax, [arg_20h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Ž â”‚   0x000a26ac      4883c801       or rax, 1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Ž â”‚   0x000a26b0      6448890425f0.  mov qword fs:[0x2f0], rax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ””â”€â”€â”€< 0x000a26b9      e918feffff     jmp 0xa24d6\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a26be      4585c0         test r8d, r8d\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a26c1      74c8           je 0xa268b\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž â”Œâ”€â”€> 0x000a26c3      817d08feffff.  cmp dword [arg_8h], 0x7ffffffe\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”Œâ”€â”€â”€< 0x000a26ca      0f84b0020000   je 0xa2980\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26d0      c74504010000.  mov dword [arg_4h], 1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26d7      64488b1425e0.  mov rdx, qword fs:[0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26e0      488d4520       lea rax, [arg_20h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26e4      4883e2fe       and rdx, 0xfffffffffffffffe\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26e8      488942f8       mov qword [rdx - 8], rax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26ec      64488b1425e0.  mov rdx, qword fs:[0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26f5      48895520       mov qword [arg_20h], rdx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26f9      64488b1c2510.  mov rbx, qword fs:[0x10]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2702      488d93e00200.  lea rdx, [rbx + 0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2709      48895518       mov qword [arg_18h], rdx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a270d      4883c801       or rax, 1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2711      6448890425e0.  mov qword fs:[0x2e0], rax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a271a      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2727      e947fdffff     jmp 0xa2473\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ””â”€> 0x000a272c      83e003         and eax, 3\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Ž    0x000a272f      83f802         cmp eax, 2\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”Œâ”€< 0x000a2732      0f84a0020000   je 0xa29d8\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2738      83f801         cmp eax, 1\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a273b      0f857cfeffff   jne 0xa25bd\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2741      8b4704         mov eax, dword [rdi + 4]    ; arg1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2744      83f8ff         cmp eax, 0xffffffff\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2747      0f84db010000   je 0xa2928\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a274d      83c001         add eax, 1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2750      4531c0         xor r8d, r8d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2753      894504         mov dword [arg_4h], eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2756      e933fdffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a275b      8b4500         mov eax, dword [rbp]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a275e      2500000040     and eax, 0x40000000\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2763      4585c0         test r8d, r8d\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2766      0f84f8000000   je 0xa2864\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a276c      85c0           test eax, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â””â”€â”€< 0x000a276e      0f844fffffff   je 0xa26c3\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a2774      f0816500ffff.  lock and dword [rbp], 0xbfffffff ; [0xbfffffff:4]=-1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a277c      48b801000000.  movabs rax, 0x7fffffff00000001 ; 9223372032559808513\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a2786      48894504       mov qword [arg_4h], rax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a278a      64488b1425e0.  mov rdx, qword fs:[0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a2793      488d4520       lea rax, [arg_20h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a2797      4883e2fe       and rdx, 0xfffffffffffffffe\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a279b      488942f8       mov qword [rdx - 8], rax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a279f      64488b1425e0.  mov rdx, qword fs:[0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27a8      48895520       mov qword [arg_20h], rdx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27ac      64488b1c2510.  mov rbx, qword fs:[0x10]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27b5      488d93e00200.  lea rdx, [rbx + 0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27bc      48895518       mov qword [arg_18h], rdx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27c0      4883c801       or rax, 1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27c4      6448890425e0.  mov qword fs:[0x2e0], rax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27cd      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27da      41b882000000   mov r8d, 0x82\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a27e0      e9a9fcffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a27e5      4189d0         mov r8d, edx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27e8      4181e0000000.  and r8d, 0x40000000\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”Œâ”€â”€< 0x000a27ef      0f85cb000000   jne 0xa28c0\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a27f5      89d0           mov eax, edx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a27f7      25ffffff3f     and eax, 0x3fffffff\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a27fc      3944240c       cmp dword [var_ch], eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2800      0f8458020000   je 0xa2a5e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2806      89d6           mov esi, edx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2808      85d2           test edx, edx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a280a      0f894e010000   jns 0xa295e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2810      89f2           mov edx, esi\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2812      4531d2         xor r10d, r10d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2815      31f6           xor esi, esi\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2817      4889ef         mov rdi, rbp\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a281a      4489e8         mov eax, r13d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a281d      0f05           syscall\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a281f      483d00f0ffff   cmp rax, 0xfffffffffffff000\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2825      0f8718020000   ja 0xa2a43\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   ; CODE XREF from sym.__pthread_mutex_lock_full @ 0xa2a59(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a282b      8b5500         mov edx, dword [rbp]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a282e      b900000080     mov ecx, 0x80000000\r\nâ”‚ â””â”€â”€â”€â”€â”€â”€â”€< 0x000a2833      e9c1fbffff     jmp 0xa23f9\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2838      41b816000000   mov r8d, 0x16\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a283e      4183fdff       cmp r13d, 0xffffffff\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2842      0f8446fcffff   je 0xa248e\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2848      beffffffff     mov esi, 0xffffffff         ; -1\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a284d      4489ef         mov edi, r13d\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2850      448944240c     mov dword [var_ch], r8d\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2855      e8c6500000     call sym.__pthread_tpp_change_priority\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a285a      448b44240c     mov r8d, dword [var_ch]\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a285f      e92afcffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2864      85c0           test eax, eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2866      0f841ffeffff   je 0xa268b\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a286c      488d0dfdea11.  lea rcx, str.__pthread_mutex_lock_full ; 0x1c1370 ; \"__pthread_mutex_lock_full\"\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2873      babb010000     mov edx, 0x1bb\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2878      488d35b26711.  lea rsi, [0x001b9031]       ; \"pthread_mutex_lock.c\"\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a287f      488d3d1ab111.  lea rdi, str.robust___oldval__FUTEX_OWNER_DIED___0 ; 0x1bd9a0 ; \"robust || (oldval & FUTEX_OWNER_DIED) == 0\"\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2886      e895b3faff     call sym.__assert_fail      ; void __assert_fail(const char *assertion, const char *file, unsigned int line, const char *function)\r\n..\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2890      4183e901       sub r9d, 1\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2894      4183f901       cmp r9d, 1\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2898      0f87cefcffff   ja 0xa256c\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a289e      488d0dcbea11.  lea rcx, str.__pthread_mutex_lock_full ; 0x1c1370 ; \"__pthread_mutex_lock_full\"\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a28a5      baac010000     mov edx, 0x1ac\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a28aa      488d35806711.  lea rsi, [0x001b9031]       ; \"pthread_mutex_lock.c\"\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a28b1      488d3d88b011.  lea rdi, str.e___EDEADLK___kind___PTHREAD_MUTEX_ERRORCHECK_NP__kind___PTHREAD_MUTEX_RECURSIVE_NP_ ; 0x1bd940 ; \"e != EDEADLK || (kind != PTHREAD_MUTEX_ERRORCHECK_NP && kind != PTHREAD_MUTEX_RECURSIVE_NP)\"\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a28b8      e863b3faff     call sym.__assert_fail      ; void __assert_fail(const char *assertion, const char *file, unsigned int line, const char *function)\r\n..\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â””â”€â”€> 0x000a28c0      8b44240c       mov eax, dword [var_ch]\r\nâ”‚  â•Žâ•Žâ•Žâ”‚ â”‚   0x000a28c4      89d6           mov esi, edx\r\nâ”‚  â•Žâ•Žâ•Žâ”‚ â”‚   0x000a28c6      81e600000080   and esi, 0x80000000\r\nâ”‚  â•Žâ•Žâ•Žâ”‚ â”‚   0x000a28cc      09c8           or eax, ecx\r\nâ”‚  â•Žâ•Žâ•Žâ”‚ â”‚   0x000a28ce      09c6           or esi, eax\r\nâ”‚  â•Žâ•Žâ•Žâ”‚ â”‚   0x000a28d0      89d0           mov eax, edx\r\nâ”‚  â•Žâ•Žâ•Žâ”‚ â”‚   0x000a28d2      f00fb17500     lock cmpxchg dword [rbp], esi\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”Œâ”€â”€< 0x000a28d7      0f8406010000   je 0xa29e3\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a28dd      89c2           mov edx, eax\r\nâ”‚  â””â”€â”€â”€â”€â”€â”€< 0x000a28df      e915fbffff     jmp 0xa23f9\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a28e4      448b6d10       mov r13d, dword [arg_10h]\r\nâ”‚   â•Žâ•Žâ”‚â”‚â”‚   0x000a28e8      4181e5800000.  and r13d, 0x80              ; sym.thread_rpc_vars ; \" 7\\x1c\"\r\nâ”‚   â•Žâ•Žâ”‚â”‚â”‚   0x000a28ef      4489ee         mov esi, r13d\r\nâ”‚   â•Žâ•Žâ”‚â”‚â”‚   0x000a28f2      4080f686       xor sil, 0x86\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a28f6      e914fcffff     jmp 0xa250f\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a28fb      4183f902       cmp r9d, 2\r\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€< 0x000a28ff      0f84ad010000   je 0xa2ab2\r\nâ”‚  â”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a2905      4183f901       cmp r9d, 1\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2909      0f85d9fbffff   jne 0xa24e8\r\nâ”‚  â”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a290f      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚  â”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a291c      8b4504         mov eax, dword [arg_4h]\r\nâ”‚  â”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a291f      83f8ff         cmp eax, 0xffffffff\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2922      0f8525feffff   jne 0xa274d\r\nâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€> 0x000a2928      41b80b000000   mov r8d, 0xb\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a292e      e95bfbffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2933      c74504000000.  mov dword [arg_4h], 0\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a293a      875500         xchg dword [rbp], edx\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a293d      83fa01         cmp edx, 1\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2940      0f8f5a010000   jg 0xa2aa0\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   ; CODE XREFS from sym.__pthread_mutex_lock_full @ 0xa29cc(x), 0xa2aad(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2946      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a2953      41b883000000   mov r8d, 0x83\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2959      e930fbffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a295e      81ce00000080   or esi, 0x80000000\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a2964      89d0           mov eax, edx\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a2966      f00fb17500     lock cmpxchg dword [rbp], esi\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a296b      0f849ffeffff   je 0xa2810\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a2971      8b5500         mov edx, dword [rbp]\r\nâ”‚ â•Žâ”‚â””â”€â”€â”€â”€â”€< 0x000a2974      e980faffff     jmp 0xa23f9\r\n..\r\nâ”‚ â•Žâ”‚ â•Žâ””â”€â”€â”€> 0x000a2980      c74504000000.  mov dword [arg_4h], 0\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a2987      4531d2         xor r10d, r10d\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a298a      31d2           xor edx, edx\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a298c      4889ef         mov rdi, rbp\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a298f      be07000000     mov esi, 7\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a2994      b8ca000000     mov eax, 0xca\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a2999      0f05           syscall\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a299b      483d00f0ffff   cmp rax, 0xfffffffffffff000\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a29a1      76a3           jbe 0xa2946\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29a3      83f892         cmp eax, 0xffffff92\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a29a6      749e           je 0xa2946\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29a8      83c026         add eax, 0x26\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29ab      83f826         cmp eax, 0x26\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a29ae      0f87bcfcffff   ja 0xa2670\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29b4      48ba09000008.  movabs rdx, 0x6c08000009\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29be      89c1           mov ecx, eax\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29c0      48d3ea         shr rdx, cl\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29c3      80e201         and dl, 1\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a29c6      0f84a4fcffff   je 0xa2670\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a29cc      e975ffffff     jmp 0xa2946\r\n..\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â””â”€> 0x000a29d8      41b823000000   mov r8d, 0x23               ; '#'\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a29de      e9abfaffff     jmp 0xa248e\r\nâ”‚ â•Žâ”‚ â•Ž â””â”€â”€> 0x000a29e3      48b801000000.  movabs rax, 0x7fffffff00000001 ; 9223372032559808513\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a29ed      48894504       mov qword [arg_4h], rax\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a29f1      64488b0425e0.  mov rax, qword fs:[0x2e0]\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a29fa      4883e0fe       and rax, 0xfffffffffffffffe\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a29fe      4c8948f8       mov qword [rax - 8], r9\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a02      64488b0425e0.  mov rax, qword fs:[0x2e0]\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a0b      48894520       mov qword [arg_20h], rax\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a0f      64488b042510.  mov rax, qword fs:[0x10]\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a18      4805e0020000   add rax, 0x2e0\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a1e      48894518       mov qword [arg_18h], rax\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a22      644c890c25e0.  mov qword fs:[0x2e0], r9\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a2b      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a38      41b882000000   mov r8d, 0x82\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2a3e      e94bfaffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2a43      83c00b         add eax, 0xb\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a46      83f80b         cmp eax, 0xb\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2a49      0f8721fcffff   ja 0xa2670\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a4f      480fa3c3       bt rbx, rax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2a53      0f8317fcffff   jae 0xa2670\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2a59      e9cdfdffff     jmp 0xa282b\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2a5e      418b06         mov eax, dword [r14]\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a61      83e07f         and eax, 0x7f\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a64      83f812         cmp eax, 0x12\r\nâ”‚ â•Žâ”‚ â•Ž  â”Œâ”€< 0x000a2a67      7449           je 0xa2ab2\r\nâ”‚ â•Žâ”‚ â•Ž  â”‚   0x000a2a69      83f811         cmp eax, 0x11\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2a6c      0f8594fdffff   jne 0xa2806\r\nâ”‚ â•Žâ”‚ â•Ž  â”‚   0x000a2a72      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚ â•Žâ”‚ â•Ž  â”‚   0x000a2a7f      8b4504         mov eax, dword [arg_4h]\r\nâ”‚ â•Žâ”‚ â•Ž  â”‚   0x000a2a82      83f8ff         cmp eax, 0xffffffff\r\nâ”‚ â””â”€â”€â”€â”€â”€â”€â”€< 0x000a2a85      0f849dfeffff   je 0xa2928\r\nâ”‚  â”‚ â•Ž  â”‚   0x000a2a8b      83c001         add eax, 1\r\nâ”‚  â”‚ â•Ž  â”‚   0x000a2a8e      894504         mov dword [arg_4h], eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2a91      e9f8f9ffff     jmp 0xa248e\r\n..\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2aa0      be80000000     mov esi, 0x80               ; sym.thread_rpc_vars ; \" 7\\x1c\"\r\nâ”‚  â”‚ â•Ž  â”‚   0x000a2aa5      4889ef         mov rdi, rbp\r\nâ”‚  â”‚ â•Ž  â”‚   0x000a2aa8      e8139bffff     call sym.__GI___lll_lock_wake\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2aad      e994feffff     jmp 0xa2946\r\nâ”‚  â””â”€â”€â”€â”€â””â”€> 0x000a2ab2      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚    â•Ž      0x000a2abf      41b823000000   mov r8d, 0x23               ; '#'\r\nâ”‚    â””â”€â”€â”€â”€< 0x000a2ac5      e9c4f9ffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2aca      488d0d9fe811.  lea rcx, str.__pthread_mutex_lock_full ; 0x1c1370 ; \"__pthread_mutex_lock_full\"\r\nâ”‚           0x000a2ad1      bab1010000     mov edx, 0x1b1\r\nâ”‚           0x000a2ad6      488d35546511.  lea rsi, [0x001b9031]       ; \"pthread_mutex_lock.c\"\r\nâ”‚           0x000a2add      488d3d626511.  lea rdi, str.e___ESRCH___robust ; 0x1b9046 ; \"e != ESRCH || !robust\"\r\nâ”‚           0x000a2ae4      e837b1faff     call sym.__assert_fail      ; void __assert_fail(const char *assertion, const char *file, unsigned int line, const char *function)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2ae9      488d0d80e811.  lea rcx, str.__pthread_mutex_lock_full ; 0x1c1370 ; \"__pthread_mutex_lock_full\"\r\nâ”‚           0x000a2af0      ba4e020000     mov edx, 0x24e\r\nâ”‚           0x000a2af5      488d35356511.  lea rsi, [0x001b9031]       ; \"pthread_mutex_lock.c\"\r\nâ”‚           0x000a2afc      488d3d596511.  lea rdi, str.mutex____data.__owner__0 ; 0x1b905c ; \"mutex->__data.__owner == 0\"\r\nâ”‚           0x000a2b03      e818b1faff     call sym.__assert_fail      ; void __assert_fail(const char *assertion, const char *file, unsigned int line, const char *function)\r\nâ”” â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2b08      e873a70b00     call sym.__stack_chk_fail   ; void __stack_chk_fail(void)\r\n[0x000a2380]>  aei\r\n[0x000a2380]> /as | grep 0x000a281d\r\n0x000a281d read\r\n[0x000a2380]> /as | grep 0x000a2\r\n0x000a2315 futex\r\n0x000a251c futex\r\n0x000a2653 rt_sigprocmask\r\n0x000a2ec9 rt_sigprocmask\r\n0x000a2f43 futex\r\n[0x000a2380]> /as | grep 0x000a281d\r\n[0x000a2380]> \r\n```\r\n\r\nSyscalls @0x000a2999  and @0x000a281d are not detected nor identified.\r\n\r\nTrivial note: if I try to complete \"ver\" by using tab, the system crashes consistently.\r\n\r\n\r\n\r\n","createdAt":"2022-10-28T16:01:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20559#issuecomment-1295172302","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5VM0Cs","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Can you try again? i did some improvements and updated tests too :)","createdAt":"2023-02-14T09:40:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20559#issuecomment-1429422252","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5VZ7nw","author":{"login":"alessandrocarminati"},"authorAssociation":"CONTRIBUTOR","body":"Hello,\r\nPlease forgive me for my late answer.\r\nFrom my standpoint, the problem remains, but it is slightly different from what it was back in August.\r\nThe syscall  @0x000a281d is now wrongly reported as `read`. \r\nThis smells fishy, since `read` is the syscall `0` in x86_64. \r\nI argue this is somehow related to ESIL registers initialization. \r\nCouldn't be registers initialized with -1?\r\nIn this way, we could at least be able to say a syscall is detected, but we couldn't determine which one.\r\nPlease note that this syscall detection is somehow more complicated than others (at least for humans), because it loads `eax` with `r13d` and `r13d` is loaded @0x000a23EE (distant more than 1k) with `0xca` (futex).\r\nThe other syscall @0x000a2999 is still not listed, not sure why since it should be trivial to spot. Its number is loaded at the previous instruction.\r\n```\r\n$ r2 -v\r\nradare2 5.8.3 30140 @ linux-x86-64 git.5.8.2-98-gf58373e00d\r\ncommit: f58373e00d86bcab3638c7e1d87285258a15ac9a build: 2023-02-16__10:42:09\r\n$ r2 glibc-2.34-40.el9.x86_64_libc.so\r\nWARN: run r2 with -e bin.cache=true to fix relocations in disassembly\r\n -- The motion picture contained in this videodisc is protected under the copyright laws.\r\n[0x00040070]> aa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nWARN: Cannot find basic block for switch case at 0x0012c3a2 bbdelta = 18\r\nWARN: Cannot find basic block for switch case at 0x000d6556 bbdelta = 34\r\nWARN: Cannot find basic block for switch case at 0x001980d9 bbdelta = 23\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\n[0x00040070]> s sym.__pthread_mutex_lock_full\r\n[0x000a2380]> pdf\r\nDo you want to print 443 lines? (y/N) y\r\n            ; JUMP XREF from sym.pthread_mutex_lock @ 0xa2bd0(x)\r\nâ”Œ 1875: sym.__pthread_mutex_lock_full (int64_t arg1, int64_t arg2, int64_t arg_4h, int64_t arg_8h, int64_t arg_ch, int64_t arg_10h, int64_t arg_18h, int64_t arg_20h);\r\nâ”‚           ; arg int64_t arg1 @ rdi\r\nâ”‚           ; arg int64_t arg2 @ rsi\r\nâ”‚           ; arg int64_t arg_4h @ rbp+0x4\r\nâ”‚           ; arg int64_t arg_8h @ rbp+0x8\r\nâ”‚           ; arg int64_t arg_ch @ rbp+0xc\r\nâ”‚           ; arg int64_t arg_10h @ rbp+0x10\r\nâ”‚           ; arg int64_t arg_18h @ rbp+0x18\r\nâ”‚           ; arg int64_t arg_20h @ rbp+0x20\r\nâ”‚           ; var int64_t var_ch @ rsp-0x4c\r\nâ”‚           ; var int64_t var_14h @ rsp-0x44\r\nâ”‚           ; var int64_t var_18h @ rsp-0x40\r\nâ”‚           0x000a2380      4157           push r15\r\nâ”‚           0x000a2382      4156           push r14\r\nâ”‚           0x000a2384      4155           push r13\r\nâ”‚           0x000a2386      4154           push r12\r\nâ”‚           0x000a2388      55             push rbp\r\nâ”‚           0x000a2389      4889fd         mov rbp, rdi                ; arg1\r\nâ”‚           0x000a238c      53             push rbx\r\nâ”‚           0x000a238d      4883ec28       sub rsp, 0x28\r\nâ”‚           0x000a2391      64488b042528.  mov rax, qword fs:[0x28]\r\nâ”‚           0x000a239a      4889442418     mov qword [var_18h], rax\r\nâ”‚           0x000a239f      31c0           xor eax, eax\r\nâ”‚           0x000a23a1      648b0425d002.  mov eax, dword fs:[0x2d0]\r\nâ”‚           0x000a23a9      8944240c       mov dword [var_ch], eax\r\nâ”‚           0x000a23ad      8b5710         mov edx, dword [rdi + 0x10] ; arg1\r\nâ”‚           0x000a23b0      4c8d7710       lea r14, [rdi + 0x10]       ; arg1\r\nâ”‚           0x000a23b4      89d0           mov eax, edx\r\nâ”‚           0x000a23b6      83e07f         and eax, 0x7f\r\nâ”‚           0x000a23b9      83f833         cmp eax, 0x33               ; '3'\r\nâ”‚       â”Œâ”€< 0x000a23bc      0f8fd6010000   jg 0xa2598\r\nâ”‚       â”‚   0x000a23c2      83f82f         cmp eax, 0x2f               ; '/'\r\nâ”‚      â”Œâ”€â”€< 0x000a23c5      0f8ff5000000   jg 0xa24c0\r\nâ”‚      â”‚â”‚   0x000a23cb      83f813         cmp eax, 0x13\r\nâ”‚     â”Œâ”€â”€â”€< 0x000a23ce      0f8fe4000000   jg 0xa24b8\r\nâ”‚     â”‚â”‚â”‚   0x000a23d4      83e270         and edx, 0x70\r\nâ”‚    â”Œâ”€â”€â”€â”€< 0x000a23d7      0f84ab000000   je 0xa2488\r\nâ”‚    â”‚â”‚â”‚â”‚   0x000a23dd      4c8d4f20       lea r9, [rdi + 0x20]        ; arg1\r\nâ”‚    â”‚â”‚â”‚â”‚   0x000a23e1      644c890c25f0.  mov qword fs:[0x2f0], r9\r\nâ”‚    â”‚â”‚â”‚â”‚   0x000a23ea      8b17           mov edx, dword [rdi]        ; arg1\r\nâ”‚    â”‚â”‚â”‚â”‚   0x000a23ec      31c9           xor ecx, ecx\r\nâ”‚    â”‚â”‚â”‚â”‚   0x000a23ee      41bdca000000   mov r13d, 0xca\r\nâ”‚    â”‚â”‚â”‚â”‚   0x000a23f4      bb81080000     mov ebx, 0x881\r\nâ”‚    â”‚â”‚â”‚â”‚   ; CODE XREFS from sym.__pthread_mutex_lock_full @ 0xa2833(x), 0xa28df(x), 0xa2974(x)\r\nâ”‚ â”Œâ”Œâ”Œâ”€â”€â”€â”€â”€> 0x000a23f9      85d2           test edx, edx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a23fb      0f85e4030000   jne 0xa27e5\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2401      8b74240c       mov esi, dword [var_ch]\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2405      89d0           mov eax, edx\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2407      09ce           or esi, ecx\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2409      f00fb17500     lock cmpxchg dword [rbp], esi\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a240e      89c2           mov edx, eax\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2410      85c0           test eax, eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2412      0f85cd030000   jne 0xa27e5\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2418      817d08feffff.  cmp dword [arg_8h], 0x7ffffffe\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a241f      0f840e050000   je 0xa2933\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2425      c74504010000.  mov dword [arg_4h], 1\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a242c      64488b0425e0.  mov rax, qword fs:[0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2435      4883e0fe       and rax, 0xfffffffffffffffe\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2439      4c8948f8       mov qword [rax - 8], r9\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a243d      64488b0425e0.  mov rax, qword fs:[0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2446      48894520       mov qword [arg_20h], rax\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a244a      64488b042510.  mov rax, qword fs:[0x10]\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2453      4805e0020000   add rax, 0x2e0\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2459      48894518       mov qword [arg_18h], rax\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a245d      644c890c25e0.  mov qword fs:[0x2e0], r9\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2466      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   ; CODE XREFS from sym.__pthread_mutex_lock_full @ 0xa2692(x), 0xa2727(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2473      8b44240c       mov eax, dword [var_ch]\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a2477      83450c01       add dword [arg_ch], 1\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a247b      894508         mov dword [arg_8h], eax\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a247e      90             nop\r\nâ”‚ â•Žâ•Žâ•Žâ”‚â”‚â”‚â”‚   0x000a247f      4531c0         xor r8d, r8d\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2482      eb0a           jmp 0xa248e\r\n..\r\nâ”‚ â”€â”€â”€â””â”€â”€â”€â”€> 0x000a2488      41b816000000   mov r8d, 0x16\r\nâ”‚ â•Žâ•Žâ•Ž â”‚â”‚â”‚   ; XREFS: CODE 0x000a2482  CODE 0x000a2756  CODE 0x000a27e0  CODE 0x000a285f  CODE 0x000a292e  CODE 0x000a2959  \r\nâ”‚ â•Žâ•Žâ•Ž â”‚â”‚â”‚   ; XREFS: CODE 0x000a29de  CODE 0x000a2a3e  CODE 0x000a2a91  CODE 0x000a2ac5  \r\nâ”‚ â”€â”€â”€â”Œâ”€â”€â”€â”€> 0x000a248e      488b442418     mov rax, qword [var_18h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2493      64482b042528.  sub rax, qword fs:[0x28]\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a249c      0f8566060000   jne 0xa2b08\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24a2      4883c428       add rsp, 0x28\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24a6      4489c0         mov eax, r8d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24a9      5b             pop rbx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24aa      5d             pop rbp\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24ab      415c           pop r12\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24ad      415d           pop r13\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24af      415e           pop r14\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24b1      415f           pop r15\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a24b3      c3             ret\r\n..\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ””â”€â”€â”€> 0x000a24b8      83e820         sub eax, 0x20               ; sym.__libc_tsd_CTYPE_TOUPPER ; \"@\"\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž â”‚â”‚   0x000a24bb      83f803         cmp eax, 3\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a24be      77c8           ja 0xa2488\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž â””â”€â”€> 0x000a24c0      8b4510         mov eax, dword [arg_10h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž  â”‚   0x000a24c3      4189c1         mov r9d, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž  â”‚   0x000a24c6      4183e103       and r9d, 3\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž  â”‚   0x000a24ca      83e010         and eax, 0x10               ; sym.__libc_errno\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž  â”‚   0x000a24cd      4189c0         mov r8d, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž â”Œâ”€â”€< 0x000a24d0      0f85d2010000   jne 0xa26a8\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž â”‚â”‚   ; CODE XREF from sym.__pthread_mutex_lock_full @ 0xa26b9(x)\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”Œâ”€â”€â”€> 0x000a24d6      8b4500         mov eax, dword [rbp]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a24d9      25ffffff3f     and eax, 0x3fffffff\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a24de      3944240c       cmp dword [var_ch], eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a24e2      0f8413040000   je 0xa28fb\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a24e8      8b5c240c       mov ebx, dword [var_ch]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a24ec      31c0           xor eax, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a24ee      f00fb15d00     lock cmpxchg dword [rbp], ebx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a24f3      85c0           test eax, eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a24f5      0f84c3010000   je 0xa26be\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a24fb      be06000000     mov esi, 6\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2500      41bd80000000   mov r13d, 0x80              ; sym.thread_rpc_vars ; \" 7\\x1c\"\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2506      4585c0         test r8d, r8d\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2509      0f84d5030000   je 0xa28e4\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   ; CODE XREF from sym.__pthread_mutex_lock_full @ 0xa28f6(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a250f      4531d2         xor r10d, r10d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2512      31d2           xor edx, edx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2514      4889ef         mov rdi, rbp\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2517      b8ca000000     mov eax, 0xca\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a251c      0f05           syscall\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a251e      83f892         cmp eax, 0xffffff92\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2521      0f8434020000   je 0xa275b\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2527      8d5023         lea edx, [rax + 0x23]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a252a      83fa23         cmp edx, 0x23               ; '#'\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a252d      0f873d010000   ja 0xa2670\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2533      48b901200081.  movabs rcx, 0x981002001\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a253d      480fa3d1       bt rcx, rdx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2541      0f8329010000   jae 0xa2670\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2547      89c2           mov edx, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2549      83e2df         and edx, 0xffffffdf         ; 4294967263\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a254c      83fadd         cmp edx, 0xffffffdd\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a254f      0f8506020000   jne 0xa275b\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2555      83f8dd         cmp eax, 0xffffffdd\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2558      0f8432030000   je 0xa2890\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a255e      83f8fd         cmp eax, 0xfffffffd\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2561      7509           jne 0xa256c\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2563      4585c0         test r8d, r8d\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2566      0f855e050000   jne 0xa2aca\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a256c      488d5c2414     lea rbx, [var_14h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2571      0f1f80000000.  nop dword [rax]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   ; CODE XREF from sym.__pthread_mutex_lock_full @ 0xa2591(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2578      4589e8         mov r8d, r13d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a257b      31c9           xor ecx, ecx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a257d      31d2           xor edx, edx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a257f      31f6           xor esi, esi\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2581      4889df         mov rdi, rbx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2584      c74424140000.  mov dword [var_14h], 0\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a258c      e84f9effff     call sym.__GI___futex_abstimed_wait64\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2591      ebe5           jmp 0xa2578\r\n..\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â””â”€> 0x000a2598      83e840         sub eax, 0x40               ; case.0x18e554.1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚    0x000a259b      83f803         cmp eax, 3\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a259e      0f87e4feffff   ja 0xa2488\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚    0x000a25a4      8b4710         mov eax, dword [rdi + 0x10] ; arg1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚    0x000a25a7      41bdffffffff   mov r13d, 0xffffffff        ; -1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚    0x000a25ad      448b27         mov r12d, dword [rdi]       ; arg1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚    0x000a25b0      8b5c240c       mov ebx, dword [var_ch]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚    0x000a25b4      3b5f08         cmp ebx, dword [rdi + 8]    ; arg1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”Œâ”€< 0x000a25b7      0f846f010000   je 0xa272c\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a25bd      41bfca000000   mov r15d, 0xca\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25c3      0f1f440000     nop dword [rax + rax]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   ; CODE XREF from sym.__pthread_mutex_lock_full @ 0xa26a3(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a25c8      4489e3         mov ebx, r12d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25cb      c1eb13         shr ebx, 0x13\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25ce      e84d570000     call sym.__GI___pthread_current_priority\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25d3      39d8           cmp eax, ebx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a25d5      0f8f5d020000   jg 0xa2838\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25db      89de           mov esi, ebx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25dd      4489ef         mov edi, r13d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25e0      e83b530000     call sym.__pthread_tpp_change_priority\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25e5      4189c0         mov r8d, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25e8      85c0           test eax, eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a25ea      0f859efeffff   jne 0xa248e\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25f0      4589e0         mov r8d, r12d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25f3      4181e00000f8.  and r8d, 0xfff80000\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25fa      4589c1         mov r9d, r8d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a25fd      4489c0         mov eax, r8d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2600      4183c901       or r9d, 1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2604      f0440fb14d00   lock cmpxchg dword [rbp], r9d\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a260a      7474           je 0xa2680\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a260c      4489c2         mov edx, r8d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a260f      83ca02         or edx, 2\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2612      eb0e           jmp 0xa2622\r\n..\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2618      4489c0         mov eax, r8d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a261b      f00fb15500     lock cmpxchg dword [rbp], edx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2620      745e           je 0xa2680\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   ; CODE XREF from sym.__pthread_mutex_lock_full @ 0xa2612(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2622      4489c8         mov eax, r9d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2625      f00fb15500     lock cmpxchg dword [rbp], edx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a262a      89c1           mov ecx, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a262c      4189c4         mov r12d, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a262f      81e10000f8ff   and ecx, 0xfff80000\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2635      4139c8         cmp r8d, ecx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2638      7566           jne 0xa26a0\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a263a      4139c0         cmp r8d, eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a263d      74d9           je 0xa2618\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a263f      418b36         mov esi, dword [r14]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2642      4531d2         xor r10d, r10d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2645      4889ef         mov rdi, rbp\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2648      4489f8         mov eax, r15d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a264b      f7d6           not esi\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a264d      81e680000000   and esi, 0x80               ; sym.thread_rpc_vars ; \" 7\\x1c\"\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2653      0f05           syscall\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2655      483d00f0ffff   cmp rax, 0xfffffffffffff000\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a265b      76bb           jbe 0xa2618\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a265d      83c00b         add eax, 0xb\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2660      83f80b         cmp eax, 0xb\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2663      770b           ja 0xa2670\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2665      bf81080000     mov edi, 0x881\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a266a      480fa3c7       bt rdi, rax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a266e      72a8           jb 0xa2618\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2670      488d3dc1b111.  lea rdi, str.The_futex_facility_returned_an_unexpected_error_code._n ; 0x1bd838 ; \"The futex facility returned an unexpected error code.\\n\"\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2677      e8242fffff     call sym.__libc_fatal\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a267c      0f1f4000       nop dword [rax]\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2680      8b4508         mov eax, dword [arg_8h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ”‚â”‚   0x000a2683      85c0           test eax, eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2685      0f855e040000   jne 0xa2ae9\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a268b      c74504010000.  mov dword [arg_4h], 1\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2692      e9dcfdffff     jmp 0xa2473\r\n..\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a26a0      4189dd         mov r13d, ebx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a26a3      e920ffffff     jmp 0xa25c8\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Žâ””â”€â”€> 0x000a26a8      488d4520       lea rax, [arg_20h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Ž â”‚   0x000a26ac      4883c801       or rax, 1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ•Ž â”‚   0x000a26b0      6448890425f0.  mov qword fs:[0x2f0], rax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ””â”€â”€â”€< 0x000a26b9      e918feffff     jmp 0xa24d6\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a26be      4585c0         test r8d, r8d\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a26c1      74c8           je 0xa268b\r\nâ”‚ â•Žâ•Žâ•Žâ•Ž â”Œâ”€â”€> 0x000a26c3      817d08feffff.  cmp dword [arg_8h], 0x7ffffffe\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”Œâ”€â”€â”€< 0x000a26ca      0f84b0020000   je 0xa2980\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26d0      c74504010000.  mov dword [arg_4h], 1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26d7      64488b1425e0.  mov rdx, qword fs:[0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26e0      488d4520       lea rax, [arg_20h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26e4      4883e2fe       and rdx, 0xfffffffffffffffe\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26e8      488942f8       mov qword [rdx - 8], rax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26ec      64488b1425e0.  mov rdx, qword fs:[0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26f5      48895520       mov qword [arg_20h], rdx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a26f9      64488b1c2510.  mov rbx, qword fs:[0x10]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2702      488d93e00200.  lea rdx, [rbx + 0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2709      48895518       mov qword [arg_18h], rdx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a270d      4883c801       or rax, 1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2711      6448890425e0.  mov qword fs:[0x2e0], rax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a271a      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2727      e947fdffff     jmp 0xa2473\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ””â”€> 0x000a272c      83e003         and eax, 3\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Ž    0x000a272f      83f802         cmp eax, 2\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”Œâ”€< 0x000a2732      0f84a0020000   je 0xa29d8\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2738      83f801         cmp eax, 1\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a273b      0f857cfeffff   jne 0xa25bd\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2741      8b4704         mov eax, dword [rdi + 4]    ; arg1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2744      83f8ff         cmp eax, 0xffffffff\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2747      0f84db010000   je 0xa2928\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a274d      83c001         add eax, 1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2750      4531c0         xor r8d, r8d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2753      894504         mov dword [arg_4h], eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2756      e933fdffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a275b      8b4500         mov eax, dword [rbp]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a275e      2500000040     and eax, 0x40000000\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a2763      4585c0         test r8d, r8d\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2766      0f84f8000000   je 0xa2864\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â•Žâ”‚   0x000a276c      85c0           test eax, eax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â””â”€â”€< 0x000a276e      0f844fffffff   je 0xa26c3\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a2774      f0816500ffff.  lock and dword [rbp], 0xbfffffff ; [0xbfffffff:4]=-1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a277c      48b801000000.  movabs rax, 0x7fffffff00000001 ; 9223372032559808513\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a2786      48894504       mov qword [arg_4h], rax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a278a      64488b1425e0.  mov rdx, qword fs:[0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a2793      488d4520       lea rax, [arg_20h]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a2797      4883e2fe       and rdx, 0xfffffffffffffffe\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a279b      488942f8       mov qword [rdx - 8], rax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a279f      64488b1425e0.  mov rdx, qword fs:[0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27a8      48895520       mov qword [arg_20h], rdx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27ac      64488b1c2510.  mov rbx, qword fs:[0x10]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27b5      488d93e00200.  lea rdx, [rbx + 0x2e0]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27bc      48895518       mov qword [arg_18h], rdx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27c0      4883c801       or rax, 1\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27c4      6448890425e0.  mov qword fs:[0x2e0], rax\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27cd      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27da      41b882000000   mov r8d, 0x82\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a27e0      e9a9fcffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a27e5      4189d0         mov r8d, edx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚ â”‚   0x000a27e8      4181e0000000.  and r8d, 0x40000000\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”Œâ”€â”€< 0x000a27ef      0f85cb000000   jne 0xa28c0\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a27f5      89d0           mov eax, edx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a27f7      25ffffff3f     and eax, 0x3fffffff\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a27fc      3944240c       cmp dword [var_ch], eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2800      0f8458020000   je 0xa2a5e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2806      89d6           mov esi, edx\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2808      85d2           test edx, edx\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a280a      0f894e010000   jns 0xa295e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2810      89f2           mov edx, esi\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2812      4531d2         xor r10d, r10d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2815      31f6           xor esi, esi\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2817      4889ef         mov rdi, rbp\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a281a      4489e8         mov eax, r13d\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a281d      0f05           syscall ; <<<<<<<<<<<<<<<<<<<<<<<<<<<<<< this\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a281f      483d00f0ffff   cmp rax, 0xfffffffffffff000\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2825      0f8718020000   ja 0xa2a43\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   ; CODE XREF from sym.__pthread_mutex_lock_full @ 0xa2a59(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a282b      8b5500         mov edx, dword [rbp]\r\nâ”‚ â•Žâ•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a282e      b900000080     mov ecx, 0x80000000\r\nâ”‚ â””â”€â”€â”€â”€â”€â”€â”€< 0x000a2833      e9c1fbffff     jmp 0xa23f9\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2838      41b816000000   mov r8d, 0x16\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a283e      4183fdff       cmp r13d, 0xffffffff\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2842      0f8446fcffff   je 0xa248e\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2848      beffffffff     mov esi, 0xffffffff         ; -1\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a284d      4489ef         mov edi, r13d\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2850      448944240c     mov dword [var_ch], r8d\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2855      e8c6500000     call sym.__pthread_tpp_change_priority\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a285a      448b44240c     mov r8d, dword [var_ch]\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a285f      e92afcffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2864      85c0           test eax, eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2866      0f841ffeffff   je 0xa268b\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a286c      488d0dfdea11.  lea rcx, str.__pthread_mutex_lock_full ; 0x1c1370 ; \"__pthread_mutex_lock_full\"\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2873      babb010000     mov edx, 0x1bb\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2878      488d35b26711.  lea rsi, [0x001b9031]       ; \"pthread_mutex_lock.c\"\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a287f      488d3d1ab111.  lea rdi, str.robust___oldval__FUTEX_OWNER_DIED___0 ; 0x1bd9a0 ; \"robust || (oldval & FUTEX_OWNER_DIED) == 0\"\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2886      e895b3faff     call sym.__assert_fail      ; void __assert_fail(const char *assertion, const char *file, unsigned int line, const char *function)\r\n..\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2890      4183e901       sub r9d, 1\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a2894      4183f901       cmp r9d, 1\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2898      0f87cefcffff   ja 0xa256c\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a289e      488d0dcbea11.  lea rcx, str.__pthread_mutex_lock_full ; 0x1c1370 ; \"__pthread_mutex_lock_full\"\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a28a5      baac010000     mov edx, 0x1ac\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a28aa      488d35806711.  lea rsi, [0x001b9031]       ; \"pthread_mutex_lock.c\"\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a28b1      488d3d88b011.  lea rdi, str.e___EDEADLK___kind___PTHREAD_MUTEX_ERRORCHECK_NP__kind___PTHREAD_MUTEX_RECURSIVE_NP_ ; 0x1bd940 ; \"e != EDEADLK || (kind != PTHREAD_MUTEX_ERRORCHECK_NP && kind != PTHREAD_MUTEX_RECURSIVE_NP)\"\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a28b8      e863b3faff     call sym.__assert_fail      ; void __assert_fail(const char *assertion, const char *file, unsigned int line, const char *function)\r\n..\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â””â”€â”€> 0x000a28c0      8b44240c       mov eax, dword [var_ch]\r\nâ”‚  â•Žâ•Žâ•Žâ”‚ â”‚   0x000a28c4      89d6           mov esi, edx\r\nâ”‚  â•Žâ•Žâ•Žâ”‚ â”‚   0x000a28c6      81e600000080   and esi, 0x80000000\r\nâ”‚  â•Žâ•Žâ•Žâ”‚ â”‚   0x000a28cc      09c8           or eax, ecx\r\nâ”‚  â•Žâ•Žâ•Žâ”‚ â”‚   0x000a28ce      09c6           or esi, eax\r\nâ”‚  â•Žâ•Žâ•Žâ”‚ â”‚   0x000a28d0      89d0           mov eax, edx\r\nâ”‚  â•Žâ•Žâ•Žâ”‚ â”‚   0x000a28d2      f00fb17500     lock cmpxchg dword [rbp], esi\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”Œâ”€â”€< 0x000a28d7      0f8406010000   je 0xa29e3\r\nâ”‚  â•Žâ•Žâ•Žâ”‚â”‚â”‚   0x000a28dd      89c2           mov edx, eax\r\nâ”‚  â””â”€â”€â”€â”€â”€â”€< 0x000a28df      e915fbffff     jmp 0xa23f9\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a28e4      448b6d10       mov r13d, dword [arg_10h]\r\nâ”‚   â•Žâ•Žâ”‚â”‚â”‚   0x000a28e8      4181e5800000.  and r13d, 0x80              ; sym.thread_rpc_vars ; \" 7\\x1c\"\r\nâ”‚   â•Žâ•Žâ”‚â”‚â”‚   0x000a28ef      4489ee         mov esi, r13d\r\nâ”‚   â•Žâ•Žâ”‚â”‚â”‚   0x000a28f2      4080f686       xor sil, 0x86\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a28f6      e914fcffff     jmp 0xa250f\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a28fb      4183f902       cmp r9d, 2\r\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€< 0x000a28ff      0f84ad010000   je 0xa2ab2\r\nâ”‚  â”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a2905      4183f901       cmp r9d, 1\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2909      0f85d9fbffff   jne 0xa24e8\r\nâ”‚  â”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a290f      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚  â”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a291c      8b4504         mov eax, dword [arg_4h]\r\nâ”‚  â”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a291f      83f8ff         cmp eax, 0xffffffff\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2922      0f8525feffff   jne 0xa274d\r\nâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€> 0x000a2928      41b80b000000   mov r8d, 0xb\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a292e      e95bfbffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2933      c74504000000.  mov dword [arg_4h], 0\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a293a      875500         xchg dword [rbp], edx\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a293d      83fa01         cmp edx, 1\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2940      0f8f5a010000   jg 0xa2aa0\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   ; CODE XREFS from sym.__pthread_mutex_lock_full @ 0xa29cc(x), 0xa2aad(x)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2946      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a2953      41b883000000   mov r8d, 0x83\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2959      e930fbffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a295e      81ce00000080   or esi, 0x80000000\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a2964      89d0           mov eax, edx\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a2966      f00fb17500     lock cmpxchg dword [rbp], esi\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a296b      0f849ffeffff   je 0xa2810\r\nâ”‚ â•Žâ”‚â•Žâ•Žâ”‚â”‚â”‚   0x000a2971      8b5500         mov edx, dword [rbp]\r\nâ”‚ â•Žâ”‚â””â”€â”€â”€â”€â”€< 0x000a2974      e980faffff     jmp 0xa23f9\r\n..\r\nâ”‚ â•Žâ”‚ â•Žâ””â”€â”€â”€> 0x000a2980      c74504000000.  mov dword [arg_4h], 0\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a2987      4531d2         xor r10d, r10d\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a298a      31d2           xor edx, edx\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a298c      4889ef         mov rdi, rbp\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a298f      be07000000     mov esi, 7\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a2994      b8ca000000     mov eax, 0xca\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a2999      0f05           syscall ; <<<<<<<<<<<<<<<<<<<<<<<<<<<<<< this\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a299b      483d00f0ffff   cmp rax, 0xfffffffffffff000\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a29a1      76a3           jbe 0xa2946\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29a3      83f892         cmp eax, 0xffffff92\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a29a6      749e           je 0xa2946\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29a8      83c026         add eax, 0x26\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29ab      83f826         cmp eax, 0x26               ; '&'\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a29ae      0f87bcfcffff   ja 0xa2670\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29b4      48ba09000008.  movabs rdx, 0x6c08000009\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29be      89c1           mov ecx, eax\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29c0      48d3ea         shr rdx, cl\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â”‚   0x000a29c3      80e201         and dl, 1\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a29c6      0f84a4fcffff   je 0xa2670\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a29cc      e975ffffff     jmp 0xa2946\r\n..\r\nâ”‚ â•Žâ”‚ â•Ž â”‚â””â”€> 0x000a29d8      41b823000000   mov r8d, 0x23               ; '#'\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a29de      e9abfaffff     jmp 0xa248e\r\nâ”‚ â•Žâ”‚ â•Ž â””â”€â”€> 0x000a29e3      48b801000000.  movabs rax, 0x7fffffff00000001 ; 9223372032559808513\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a29ed      48894504       mov qword [arg_4h], rax\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a29f1      64488b0425e0.  mov rax, qword fs:[0x2e0]\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a29fa      4883e0fe       and rax, 0xfffffffffffffffe\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a29fe      4c8948f8       mov qword [rax - 8], r9\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a02      64488b0425e0.  mov rax, qword fs:[0x2e0]\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a0b      48894520       mov qword [arg_20h], rax\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a0f      64488b042510.  mov rax, qword fs:[0x10]\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a18      4805e0020000   add rax, 0x2e0\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a1e      48894518       mov qword [arg_18h], rax\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a22      644c890c25e0.  mov qword fs:[0x2e0], r9\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a2b      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a38      41b882000000   mov r8d, 0x82\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2a3e      e94bfaffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2a43      83c00b         add eax, 0xb\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a46      83f80b         cmp eax, 0xb\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2a49      0f8721fcffff   ja 0xa2670\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a4f      480fa3c3       bt rbx, rax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2a53      0f8317fcffff   jae 0xa2670\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2a59      e9cdfdffff     jmp 0xa282b\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2a5e      418b06         mov eax, dword [r14]\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a61      83e07f         and eax, 0x7f\r\nâ”‚ â•Žâ”‚ â•Ž      0x000a2a64      83f812         cmp eax, 0x12\r\nâ”‚ â•Žâ”‚ â•Ž  â”Œâ”€< 0x000a2a67      7449           je 0xa2ab2\r\nâ”‚ â•Žâ”‚ â•Ž  â”‚   0x000a2a69      83f811         cmp eax, 0x11\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2a6c      0f8594fdffff   jne 0xa2806\r\nâ”‚ â•Žâ”‚ â•Ž  â”‚   0x000a2a72      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚ â•Žâ”‚ â•Ž  â”‚   0x000a2a7f      8b4504         mov eax, dword [arg_4h]\r\nâ”‚ â•Žâ”‚ â•Ž  â”‚   0x000a2a82      83f8ff         cmp eax, 0xffffffff\r\nâ”‚ â””â”€â”€â”€â”€â”€â”€â”€< 0x000a2a85      0f849dfeffff   je 0xa2928\r\nâ”‚  â”‚ â•Ž  â”‚   0x000a2a8b      83c001         add eax, 1\r\nâ”‚  â”‚ â•Ž  â”‚   0x000a2a8e      894504         mov dword [arg_4h], eax\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2a91      e9f8f9ffff     jmp 0xa248e\r\n..\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2aa0      be80000000     mov esi, 0x80               ; sym.thread_rpc_vars ; \" 7\\x1c\"\r\nâ”‚  â”‚ â•Ž  â”‚   0x000a2aa5      4889ef         mov rdi, rbp\r\nâ”‚  â”‚ â•Ž  â”‚   0x000a2aa8      e8139bffff     call sym.__GI___lll_lock_wake\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€< 0x000a2aad      e994feffff     jmp 0xa2946\r\nâ”‚  â””â”€â”€â”€â”€â””â”€> 0x000a2ab2      6448c70425f0.  mov qword fs:[0x2f0], 0\r\nâ”‚    â•Ž      0x000a2abf      41b823000000   mov r8d, 0x23               ; '#'\r\nâ”‚    â””â”€â”€â”€â”€< 0x000a2ac5      e9c4f9ffff     jmp 0xa248e\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2aca      488d0d9fe811.  lea rcx, str.__pthread_mutex_lock_full ; 0x1c1370 ; \"__pthread_mutex_lock_full\"\r\nâ”‚           0x000a2ad1      bab1010000     mov edx, 0x1b1\r\nâ”‚           0x000a2ad6      488d35546511.  lea rsi, [0x001b9031]       ; \"pthread_mutex_lock.c\"\r\nâ”‚           0x000a2add      488d3d626511.  lea rdi, str.e___ESRCH___robust ; 0x1b9046 ; \"e != ESRCH || !robust\"\r\nâ”‚           0x000a2ae4      e837b1faff     call sym.__assert_fail      ; void __assert_fail(const char *assertion, const char *file, unsigned int line, const char *function)\r\nâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2ae9      488d0d80e811.  lea rcx, str.__pthread_mutex_lock_full ; 0x1c1370 ; \"__pthread_mutex_lock_full\"\r\nâ”‚           0x000a2af0      ba4e020000     mov edx, 0x24e\r\nâ”‚           0x000a2af5      488d35356511.  lea rsi, [0x001b9031]       ; \"pthread_mutex_lock.c\"\r\nâ”‚           0x000a2afc      488d3d596511.  lea rdi, str.mutex____data.__owner__0 ; 0x1b905c ; \"mutex->__data.__owner == 0\"\r\nâ”‚           0x000a2b03      e818b1faff     call sym.__assert_fail      ; void __assert_fail(const char *assertion, const char *file, unsigned int line, const char *function)\r\nâ”” â”€â”€â”€â”€â”€â”€â”€â”€> 0x000a2b08      e873a70b00     call sym.__stack_chk_fail   ; void __stack_chk_fail(void)\r\n[0x000a2380]> aei\r\n[0x000a2380]> /as | grep 0x000a281d\r\n0x000a281d read\r\n[0x000a2380]> /as | grep 0x000a2\r\n0x000a2315 futex\r\n0x000a251c futex\r\n0x000a2653 read\r\n0x000a281d read\r\n0x000a2ec9 read\r\n0x000a2f43 futex\r\n[0x000a2380]> \r\n```","createdAt":"2023-02-16T10:26:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20559#issuecomment-1432861168","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5oVD21","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"can you try again? i did a bunch of improvements in this logic","createdAt":"2023-10-06T10:19:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20559#issuecomment-1750351285","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5qBugR","author":{"login":"alessandrocarminati"},"authorAssociation":"CONTRIBUTOR","body":"Hello,\r\n\r\nI apologize for the delay in my response. \r\nRegarding the issue, there has indeed been a change in the radare2 response, but it may not be substantial enough to declare the issue as completely resolved.\r\n\r\nBack in August 2022, when I initially reported the issue, we observed the following situation:\r\n\r\nThe function I was concerned about was located at memory address `0x000a2380` and contained four syscalls: \r\n```\r\n(0x000a251c, 0x000a2653, 0x000a281d, 0x000a2999).\r\n```\r\nWhen I asked radare2 to print syscalls within a range of addresses where the function resides, it yielded the following results:\r\n```\r\n[0x000a2380]> /as | grep 0x000a2\r\n0x000a2315 futex \r\n0x000a251c futex   <----------------- interest\r\n0x000a2653 rt_sigprocmask <----------------- interest\r\n0x000a281d <----------------- missing\r\n0x000a2999 <----------------- missing\r\n0x000a2ec9 rt_sigprocmask\r\n0x000a2f43 futex\r\n```\r\nNow, with the current version of radare2 (5.8.9), there have been improvements. \r\n```\r\n$ r2 -v\r\nradare2 5.8.9 31590 @ linux-x86-64\r\nbirth: git.5.8.8-716-gf4d0517be4 2023-10-25__09:27:41\r\ncommit: f4d0517be497fd00eedbdd9a73eccf9bd38f4189\r\noptions: gpl -O? cs:5 cl:2 make\r\n$ r2 -e bin.cache=true glibc-2.34-40.el9.x86_64_libc.so\r\n -- I script in C, because I can.\r\n[0x00040070]> aaa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nINFO: Analyze imports (af@@@i)\r\nINFO: Analyze entrypoint (af@ entry0)\r\nINFO: Analyze symbols (af@@@s)\r\nWARN: Cannot find basic block for switch case at 0x0012c3a2 bbdelta = 18\r\nWARN: Cannot find basic block for switch case at 0x000d6556 bbdelta = 34\r\nWARN: Cannot find basic block for switch case at 0x001980d9 bbdelta = 23\r\nINFO: Recovering variables\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\nINFO: Analyze function calls (aac)\r\nINFO: Analyze len bytes of instructions for references (aar)\r\nINFO: Finding and parsing C++ vtables (avrr)\r\nINFO: Analyzing methods\r\nINFO: Recovering local variables (afva)\r\nINFO: Type matching analysis for all functions (aaft)\r\nSegmentation fault (core dumped)\r\n$ r2 -e bin.cache=true glibc-2.34-40.el9.x86_64_libc.so\r\n -- Add comments using the ';' key in visual mode or the 'CC' command from the radare2 shell\r\n[0x00040070]> aa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nINFO: Analyze imports (af@@@i)\r\nINFO: Analyze entrypoint (af@ entry0)\r\nINFO: Analyze symbols (af@@@s)\r\nWARN: Cannot find basic block for switch case at 0x0012c3a2 bbdelta = 18\r\nWARN: Cannot find basic block for switch case at 0x000d6556 bbdelta = 34\r\nWARN: Cannot find basic block for switch case at 0x001980d9 bbdelta = 23\r\nINFO: Recovering variables\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\n[0x00040070]> aei\r\n[0x00040070]> s sym.__pthread_mutex_lock_full\r\n[0x000a2380]> /as | grep 0x000a2\r\nSegmentation fault (core dumped)\r\n$ r2 glibc-2.34-40.el9.x86_64_libc.so\r\nWARN: Relocs has not been applied. Please use `-e bin.relocs.apply=true` or `-e bin.cache=true` next time\r\n -- Beer in mind.\r\n[0x00040070]> aaa\r\nINFO: Analyze all flags starting with sym. and entry0 (aa)\r\nINFO: Analyze imports (af@@@i)\r\nINFO: Analyze entrypoint (af@ entry0)\r\nINFO: Analyze symbols (af@@@s)\r\nWARN: Cannot find basic block for switch case at 0x0012c3a2 bbdelta = 18\r\nWARN: Cannot find basic block for switch case at 0x000d6556 bbdelta = 34\r\nWARN: Cannot find basic block for switch case at 0x001980d9 bbdelta = 23\r\nINFO: Recovering variables\r\nINFO: Analyze all functions arguments/locals (afva@@@F)\r\nINFO: Analyze function calls (aac)\r\nINFO: Analyze len bytes of instructions for references (aar)\r\nINFO: Finding and parsing C++ vtables (avrr)\r\nINFO: Analyzing methods\r\nINFO: Recovering local variables (afva)\r\nINFO: Type matching analysis for all functions (aaft)\r\nINFO: Propagate noreturn information (aanr)\r\nINFO: Use -AA or aaaa to perform additional experimental analysis\r\n[0x00040070]> aei\r\n[0x00040070]> s sym.__pthread_mutex_lock_full\r\n[0x000a2380]>  /as | grep 0x000a2\r\n0x000a2315 futex\r\n0x000a251c futex <----------------- interest\r\n0x000a2653 read <----------------- interest\r\n0x000a281d rt_sigtimedwait <----------------- interest\r\n0x000a2999 futex <----------------- interest\r\n0x000a2ec9 read\r\n0x000a2f43 futex\r\n```\r\nAll syscalls are reported, but the accuracy of the syscall numbers still needs refinement. \r\nTo make a comparison, this is the output of the plugin[1] I'm working on:\r\n```\r\n[0x000a2380]> sysno\r\n[*] sysno is starting computation\r\n[*] Generating cfg for the given function\r\n[*] checking a path\r\n0x000a2380,0x000a23c2,0x000a23cb,0x000a23d4,0x000a23dd,0x000a23f9,0x000a2401,0x000a27e5,0x000a27f5,0x000a2806,0x000a2810,\r\n[*] checking a path\r\n0x000a2380,0x000a23c2,0x000a23cb,0x000a24b8,0x000a24c0,0x000a24d6,0x000a24e8,0x000a24fb,0x000a250f,\r\n[*] checking a path\r\n0x000a2380,0x000a23c2,0x000a23cb,0x000a24b8,0x000a24c0,0x000a24d6,0x000a24e8,0x000a24fb,0x000a250f,0x000a2527,0x000a2533,0x000a2547,0x000a275b,0x000a276c,0x000a26c3,0x000a2980,\r\n[*] checking a path\r\n0x000a2380,0x000a2598,0x000a25a4,0x000a25bd,0x000a25c8,0x000a25db,0x000a25f0,0x000a260c,0x000a2622,0x000a263a,0x000a263f,\r\n[*] Syscall found are 4, cfg results are 4, there are 0 still to figure out.!!!\r\n[*] Skip block at 0x000a250f syscall at 0x000a251c is known\r\n[*] Skip block at 0x000a263f syscall at 0x000a2653 is known\r\n[*] Skip block at 0x000a2810 syscall at 0x000a281d is known\r\n[*] Skip block at 0x000a2980 syscall at 0x000a2999 is known\r\n[*] Results:\r\n{address: \"0x000a281d\", number:\"202\"}{address: \"0x000a251c\", number:\"202\"}{address: \"0x000a2999\", number:\"202\"}{address: \"0x000a2653\", number:\"202\"}\r\n```\r\nThe numbers have been verified manually, and I can confirm the tools are accurate.\r\nBasically, this means that all the syscalls in this function corresponds to `futex`.\r\nPlease note that the tool development is extremely slow, and for the moment can not be considered an alternative to the radare2 syscall function.\r\n\r\n[1]. https://github.com/alessandrocarminati/sys_no/tree/ac-radare2-plugin\r\nThank you for your hard work, but I can not say the issue is solved yet.","createdAt":"2023-10-25T09:09:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20559#issuecomment-1778837521","viewerDidAuthor":false}],"number":20559,"title":"Syscalls are not detected correctly"},{"body":"I'm using radare2 to disassemble an elf on arm32.\r\n\r\none function like this:\r\n```\r\n0x00010b3c      push    {r4, lr}\r\n0x00010b40      mov     r0, 1\r\n0x00010b44      bl      fcn.0001308c\r\n0x00010b48      ldr     r4, [fcn.00010b78] ; 0x10b78\r\n0x00010b4c      ldr     r3, [0x00010b7c]\r\n0x00010b50      mov     r1, 0\r\n0x00010b54      mov     r0, 1\r\n0x00010b58      str     r3, [r4, 4]\r\n0x00010b5c      bl      fcn.00012fc8\r\n0x00010b60      ldrh    r0, [r0]\r\n0x00010b64      strh    r0, [r4, 2]\r\n0x00010b68      mov     r0, 1\r\n0x00010b6c      bl      fcn.00012fec\r\n0x00010b70      pop     {r4, lr}\r\n0x00010b74      bx      lr\r\nfcn.00010b78 ();\r\n0x00010b78      .dword 0x00026420\r\n0x00010b7c      .dword 0xb6a85f2d\r\n```\r\ni get datarefs with aflj and find 0x00010b3c datarefs is:\r\n`\r\n\"datarefs\": [\r\n    {\r\n      \"from\": 68424,\r\n      \"to\": 0x00010b78,\r\n      \"type\": \"DATA\"\r\n    },\r\n    {\r\n      \"from\": 68428,\r\n      \"to\": 0x00010b7c,\r\n      \"type\": \"DATA\"\r\n    }\r\n  ],\r\n`\r\nwe know this is incorrect, I want to get datarefs below (IDA can get this result):\r\n`\r\n\"datarefs\": [\r\n    {\r\n      \"from\": 68424,\r\n      \"to\": 0x00026420,\r\n      \"type\": \"DATA\"\r\n    },\r\n    {\r\n      \"from\": 68428,\r\n      \"to\": 0xb6a85f2d,\r\n      \"type\": \"DATA\"\r\n    }\r\n  ],\r\n`\r\nHow can I get this result with any command, or can radare2 improve this problem?\r\nThanks, radare2 project.\r\n\r\n[arm_sample.zip](https://github.com/radareorg/radare2/files/9207353/arm_sample.zip)","comments":[{"id":"IC_kwDOAEpMrs5Y0P_v","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Thanks for reporting, i'll take a look when i have some time to focus on that ðŸ‘ ","createdAt":"2023-03-30T10:51:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20499#issuecomment-1490092015","viewerDidAuthor":true}],"number":20499,"title":"Radare2 cannot detect datarefs correctly like IDA on arm32"},{"body":"## Environment\r\n\r\n```sh\r\n>> ~/Code/radare2/binr/rabin2/rabin2 -v\r\nrabin2 5.6.6 0 @ linux-x86-64 git.5.6.6\r\ncommit: unknown build: 2022-03-24__21:51:21\r\n>> uname -ms\r\nLinux x86_64\r\n\r\n```\r\n\r\n## Description\r\n\r\n<!-- Explain what's the issue and what would you expect to see -->\r\n\r\nCan not get version info by command `rabin2 -V xxx.exe`\r\n\r\n## Test\r\n\r\n```sh\r\nhacksign@XSignLaptop [19:05:27] : ~/Documents/SharedFolder \r\n>> curl -s https://down.360safe.com/setup.exe -o setup.exe\r\nhacksign@XSignLaptop [19:05:58] : ~/Documents/SharedFolder \r\n>> file setup.exe \r\nsetup.exe: PE32 executable (GUI) Intel 80386, for MS Windows\r\nhacksign@XSignLaptop [19:06:24] : ~/Documents/SharedFolder \r\n>> ~/Code/radare2/binr/rabin2/rabin2 -v\r\nrabin2 5.6.6 0 @ linux-x86-64 git.5.6.6\r\ncommit: unknown build: 2022-03-24__21:51:21\r\nhacksign@XSignLaptop [19:06:37] : ~/Documents/SharedFolder \r\n>> ~/Code/radare2/binr/rabin2/rabin2 -V ./setup.exe \r\n=== VS_VERSIONINFO ===\r\n\r\nhacksign@XSignLaptop [19:06:45] : ~/Documents/SharedFolder \r\n>> uname -ms\r\nLinux x86_64\r\n```\r\n","comments":[{"id":"IC_kwDOAEpMrs5F1Cim","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"there's nothing corrupt in the r2 output, is this binary suposed to contain any versioninfo? because by checking the parser it fails in many different ways and stops early. but even skipping some of the checks still results on no parseable version info. Could be a bug in the PE parser.\r\n\r\nis this binary corrupted?.\r\n\r\nthe `=== VS_VER...` line is totally misleading and inconsistent with the rest of code in r2, so i'll try to find some time to cleanup the implementation but im not sure if that file may contain any version info here. can you confirm? thanks for reporting!","createdAt":"2022-06-30T18:15:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20377#issuecomment-1171531942","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5F7tJb","author":{"login":"Hacksign"},"authorAssociation":"NONE","body":"> \r\n\r\nI'm pretty sure this file contains version information.\r\n\r\nThis is another file which is compile by myself (with version information controled by myself too):\r\n\r\n![File with version info](https://i.imgur.com/cvu9EIK.png)\r\n\r\n","createdAt":"2022-07-04T02:45:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20377#issuecomment-1173279323","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5LtJDs","author":{"login":"alex-bender"},"authorAssociation":"CONTRIBUTOR","body":"@trufae there is actually some strings in file, like File Version\r\n<img width=\"660\" alt=\"image\" src=\"https://user-images.githubusercontent.com/3628862/194335351-7882dc7d-af52-4d87-8037-f7cd029fa41a.png\">\r\nDon't know how to read the number after, can't get it as on screan","createdAt":"2022-10-06T14:11:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/20377#issuecomment-1270124780","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5L9nga","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Where are those strings taken from @alex-bender ? can you find them from RBin?","createdAt":"2022-10-11T10:02:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20377#issuecomment-1274443802","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5MAlsp","author":{"login":"alex-bender"},"authorAssociation":"CONTRIBUTOR","body":"I don't know what exactly I should do but you can find it at addr `0x00c4a276` in binary https://down.360safe.com/setup.exe","createdAt":"2022-10-11T20:15:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20377#issuecomment-1275222825","viewerDidAuthor":false}],"number":20377,"title":"rabin2 -V corrupt"},{"body":"As shown in the figure below: V enters the GUI interface but cannot click the menu bar with the mouse (this function works normally in Linux version)\r\n* Windows version\r\n![image](https://user-images.githubusercontent.com/74580422/175224966-afea44f4-1487-4dc9-abdd-2720ed91f94b.png)\r\n* Linux version\r\n![image](https://user-images.githubusercontent.com/74580422/175227103-7e8f965c-66a5-4d28-91f5-379e7e7061ee.png)\r\n\r\nTest versionï¼š\r\n* radare2 5.6.8 1 @ windows-x86-64 git.5.6.8\r\n* radare2 5.7.2 1 @ windows-x86-64 git.5.7.2\r\n* radare2 5.7.2 28305 @ linux-x86-64 git.5.7.2-2-ge8a8a3532","comments":[{"id":"IC_kwDOAEpMrs5Fail2","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Did the mouse ever worked on windows in r2? Is this a regression? First time using windows for me was in 5.6.0 and i always used the keyboard. You can press the \"m\" key as a workaround.\r\n\r\nthanks for reporting. I plan to improve the windows support from now on. Let me know if you find any previous version of r2 for windows handling the mouse","createdAt":"2022-06-23T15:50:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20350#issuecomment-1164585334","viewerDidAuthor":true}],"number":20350,"title":"Windowsï¼šThe mouse cannot click the menu bar."},{"body":"Add a `dt` subcommand to dump the execution trace in llvm-coverage format\r\n\r\nref:\r\n\r\n* https://github.com/elastic/bpfcov\r\n* https://leodido.dev/demystifying-profraw/","comments":[],"number":20293,"title":"generate coverage file from tracing information"},{"body":"## Description\r\n\r\nThis is a tracking issue to add cycle count reporting for m68k CPUs.\r\n\r\nRelates to #20102 ","comments":[{"id":"IC_kwDOAEpMrs5GNaI4","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"do you have any numbers or documentation about this? i have an 68030 around that i should boot one day and i could give some numbers on this","createdAt":"2022-07-07T16:48:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20284#issuecomment-1177920056","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5GTTvZ","author":{"login":"riptl"},"authorAssociation":"CONTRIBUTOR","body":"I don't â€“ tagging @CrypticalCode0 who might have","createdAt":"2022-07-09T03:00:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20284#issuecomment-1179466713","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5GTyGo","author":{"login":"CrypticalCode0"},"authorAssociation":"CONTRIBUTOR","body":"I am working on a complete spreadsheet for the M68K, but haven't been at it in a while. 68000 and similar are pretty straight forward, but from 68020 and up it's a little different with best average and worst cases depending on the previous instruction and the small caches. Most relevant is the User Manual to be fair the can be found on NXP's product archive.","createdAt":"2022-07-09T19:00:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/20284#issuecomment-1179591080","viewerDidAuthor":false}],"number":20284,"title":"Add cycle info for m68k"},{"body":"## Environment\r\n\r\n```sh\r\n# copypaste this script into your shell and replace it with the output\r\nTuesday 07 June 2022 05:06:57 PM IST\r\nradare2 5.7.1 28589 @ linux-x86-64 git.5.7.0-44-gd71629bf3\r\ncommit: d71629bf386cfe908ff85a5b656cfcb972b0b682 build: 2022-06-07__16:45:42\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nradare2 isn't following the forked process.\r\n\r\n## Test\r\n\r\nsample program \r\n```C\r\n#include <stdio.h>\r\n#include <string.h>\r\n#include <unistd.h>\r\n\r\nint main(int argc, char *argv[])\r\n{\r\n    if (fork() == 0) {\r\n        char buffer[5];\r\n        strcpy(buffer, argv[1]);\r\n    }\r\n    return 0;\r\n}\r\n```\r\nCompile Instructions: \r\n```sh\r\ngcc file.c -o binary\r\n```\r\n\r\nr2  commands:\r\n```sh\r\nr2 -d binary configurationconfiguration\r\ne dbg.follow.child=true\r\ndc\r\n```\r\nscreenshots: \r\n![image](https://user-images.githubusercontent.com/55893621/172371047-fde51a85-9647-49d1-9ffb-bfedb9ba59cc.png)\r\n\r\n\r\n","comments":[],"number":20240,"title":"Follow child doest not work"},{"body":"## Description\r\n\r\nWhen analyzing code that uses [AVX, AVX2 or AVX512](https://en.wikipedia.org/wiki/Advanced_Vector_Extensions) vector instructions, Radare2 does not generate ESIL for those instructions.\r\n\r\nFor instance, when analyzing a binary containing the `vmovups zmmword [rsp + 0x140], zmm0` instruction, then dumping it using eg. `pdfj`, the `esil` field of the corresponding instruction is an empty string.\r\n\r\nIt seems that the `X86_INS_VMOVUPS` value is not handled in `libr/anal/p/anal_x86_cs.c`, along with (I believe, I did not look extensively) most (all?) AVX* instructions, although Capstone [supports them](https://github.com/capstone-engine/capstone/blob/master/include/capstone/x86.h).\r\n\r\nIt definitely looks like cumbersome work and tiresome testing, but it would be incredibly nice if those instructions were translated to ESIL!","comments":[{"id":"IC_kwDOAEpMrs5EG0mF","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"I once had some of those ready written on a piece of paper","createdAt":"2022-05-31T21:05:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20193#issuecomment-1142638981","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5ENn7f","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"I improved general support for avx, but still no esil","createdAt":"2022-06-02T04:24:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20193#issuecomment-1144422111","viewerDidAuthor":false}],"number":20193,"title":"Support for x86 AVX* in ESIL"},{"body":"\r\n* [ ] Create PACKAGING document (f.ex: https://github.com/ifreund/waylock/blob/master/PACKAGING.md)\r\n* [ ] Support Ubuntu via AppImage (https://docs.appimage.org/introduction/software-overview.html#ref-appimagetool)\r\n* [ ] Support Fedora (looking at repology it seems to be pretty well updated) but dist/rpm/radare2.spec needs updating\r\n* [ ] Haiku - needs to be updated\r\n* [ ] Windows (winget is the official pkg manager) https://docs.microsoft.com/en-us/windows/package-manager/","comments":[{"id":"IC_kwDOAEpMrs5EvQbV","author":{"login":"nikkej"},"authorAssociation":"NONE","body":"I could have a look over this. I have not made rpm spec which uses maven and/or ninja to build binaries but I'm very keen to learn that too as I have adequate understanding how packaging is made for rpm and deb based systems.","createdAt":"2022-06-12T17:19:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20179#issuecomment-1153238741","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5EvRSr","author":{"login":"nikkej"},"authorAssociation":"NONE","body":"Sorry, I meant meson, not maven...","createdAt":"2022-06-12T17:35:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20179#issuecomment-1153242283","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5E_QFb","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Maybe good to extend this ticket to also cover iaito https://repology.org/project/iaito/versions","createdAt":"2022-06-16T09:20:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20179#issuecomment-1157431643","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5E_QPp","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"There is an rpm spec file, but as long as rpm is not a generic package like it happens with debian ones it will require a differene one for each rpm-based distro ðŸ˜ž ","createdAt":"2022-06-16T09:21:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20179#issuecomment-1157432297","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5E_dCs","author":{"login":"nikkej"},"authorAssociation":"NONE","body":"That's  true. In which case rpm limitations should be mentioned  PACKAGING.md file imho. Also, should preparing and building rely on meson / ninja rather than gnu autotools in rpm (and in deb)? I was thinking shall it ease maintaining if there are fewer ways to build radare2?","createdAt":"2022-06-16T10:12:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20179#issuecomment-1157484716","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5F4FWK","author":{"login":"nikkej"},"authorAssociation":"NONE","body":"I'm a bit puzzled for what comes to radare2 version info. While smashing rpm spec file (and any other package definition), I try to get rid of any statically written information like version. Thus, I dig latest git tag by:\r\n`curl -s https://api.github.com/repos/radareorg/radare2/tags | grep -oP '(?<=\")[0-9]\\.[0-9]\\.[0-9](?=\")' | sort -n | tail -1` \r\n\r\nwhich produces in time of writing this: 5.7.2\r\nBut on the other hand, git master is next 5.7.3 which, naturally, does not yet exist in git tags. Should I parse version information from some other mean, like from file configure.acr e.g.?","createdAt":"2022-07-01T13:08:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20179#issuecomment-1172329866","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5F5LMB","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Git will always have an odd number. The reason is because meson doesnt support rc/git/alpha/dev tags like it does acr.\r\n\r\ntheres a document describing the version numbering rules. \r\n\r\nIf you are packaging a release the version will be always end with 0,2,4,6 or 8. Which is imho the way to to (dont package git because its not a fixed version).\r\n\r\nthe tags will only handle pair numbers, and you can use a meson oneliner or grep or ./configure -qV to get the version before compiling. If you wait some days i will release 5.7.4 in about a week","createdAt":"2022-07-01T18:35:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20179#issuecomment-1172615937","viewerDidAuthor":true}],"number":20179,"title":"EPIC: Packaging objectives for 5.x.x"},{"body":"This is the probably the behaviour that people expect","comments":[{"id":"IC_kwDOAEpMrs5DOoiP","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i dont think jumps or cjmps should creates xrefs unless the target destination is a function. we can follow bb edges to track those references instead","createdAt":"2022-05-16T16:55:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20099#issuecomment-1127909519","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5DbEnG","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"REF_TYPE_JUMP?","createdAt":"2022-05-19T03:48:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20099#issuecomment-1131170246","viewerDidAuthor":false}],"number":20099,"title":"Make anal.jmp.cref true as default"},{"body":"\r\n![7206CCA6-094D-42C9-925E-7176BC978BFE](https://user-images.githubusercontent.com/6431515/168055293-7e6bfe87-b292-410a-b387-f0611b117bf1.jpeg)\r\n## Environment\r\n\r\n```sh\r\n# copypaste this script into your shell and replace it with the output\r\ndate\r\nr2 -v\r\nuname -ms\r\n```\r\n\r\n## Description\r\n\r\n<!-- Explain what's the issue and what would you expect to see -->\r\n\r\n## Test\r\n\r\n<!-- Steps to reproduce the issue and provide files/links/images/.. -->\r\n","comments":[],"number":20092,"title":"Cmpne cmpeq thumb assembler hut"},{"body":"Its easier to read. just keep the old naming for compat for about a year, and then we can deprecate them","comments":[{"id":"IC_kwDOAEpMrs5C7Atm","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"I'd prefer removing them","createdAt":"2022-05-10T19:11:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20062#issuecomment-1122765670","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5NOHRC","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"how would u implement ASR? using rotate + and ? what about adding back the macro system, but for that case. in C you don't have rotate, only shift, so that will make esil not easily translatable to C as it will add one more indirection.","createdAt":"2022-10-28T22:22:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20062#issuecomment-1295545410","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5NOH7R","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"imho renaming will improve the situation, but i agree that we can remove them easily, we should rush a little the breaking changes as i dont wanna delay 5.8 more than 2 weeks","createdAt":"2022-10-28T22:23:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20062#issuecomment-1295548113","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5zmRPd","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"tired of waiting, enotime to delay this rls more time","createdAt":"2024-02-12T19:31:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20062#issuecomment-1939411933","viewerDidAuthor":true}],"number":20062,"title":"Rename >>>><<<>> operators in ESIL with LSL, ASR, .."},{"body":"Hi and apologies for my poor English,\r\nI've been using r2 for a while trying to debug firmware images and I've seen behavior I don't understand when using cmd.esil.mdev to log memory operations.\r\n```r2 -w -i mdev.r2 bios.bin```\r\n```\r\ne asm.arch=arm\r\ne asm.bits=32\r\ne cfg.bigendian=true\r\non malloc://16K 0x10000000 rwx\r\nomn 0x10000000 sram_1\"\r\non malloc://128M 0x20000000 rwx\r\nomn 0x20000000 sram_2\"\r\non 0x3c000000.bin 0x3c000000 rw\r\naei\r\n\"e cmd.esil.mdev=#!pipe node cmd.esil.mdev.js\"\r\n\"e esil.mdev.range=0x3c000000-0x3c400000\"\r\ne io.cache=true\r\naeim\r\naeip\r\n```\r\nWhen I launch r2 with the previous configuration, the memory mapping is as follows:\r\n```[0x00000000]> om\r\n- 5 fd: 7 +0x00000000 0x30000000 - 0x300effff rw- mem.0x30000000_0xf0000\r\n- 4 fd: 6 +0x00000000 0x3c000000 - 0x3c3fffff rw-\r\n- 3 fd: 5 +0x00000000 0x20000000 - 0x27ffffff rwx sram_2\"\r\n- 2 fd: 4 +0x00000000 0x10000000 - 0x10003fff rwx sram_1\"\r\n* 1 fd: 3 +0x00000000 0x00000000 - 0x001fffff rwx\r\n```\r\nThat is, it adds another block named mem.0x30000000_0xf0000 and overlaps the previous one. I don't understand why this happens.\r\n\r\nWhen I start debugging and a memory read happens, I always get 0 as the value if I use cmd.esil.mdev. I have tried to delete the new block that it creates with the same result 0 as value.\r\n```\r\n     sb 0x00000000       sl 0x00000000       fp 0x30078000       ip 0x00000000                                                                            \r\n     sp 0x1000003c       lr 0x00002098       pc 0x00002d84       r0 0x00000040                                                                            \r\n     r1 0x00000000       r2 0x3c040000       r3 0x00000000       r4 0x00000000                                                                            \r\n     r5 0x00000000       r6 0x00000000       r7 0x00000000       r8 0x00000000                                                                            \r\n     r9 0x00000000      r10 0x00000000      r11 0x30078000      r12 0x00000000                                                                            \r\n    r13 0x1000003c      r14 0x00002098      r15 0x00002d84     cpsr 0x00000060                                                                            \r\ns:0 z:1 c:1 o:0 p:0                                                                                                                                       \r\n            0x00002d74      e92d0100       stmdb sp!, {r8}                                                                                                \r\n            0x00002d78      e3a02701       mov r2, 0x40000                                                                                                \r\n            0x00002d7c      e282230f       add r2, r2, 0x3c000000                                                                                         \r\n            0x00002d80      e5921000       ldr r1, [r2]                                                                                                   \r\n            ;-- pc:                                                                                                                                       \r\n            ;-- r15:                                                                        \r\n```\r\n```\r\n:> x @0x3c040000\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x3c040000  0034 0100 70f9 0000 0000 0000 0000 0000  .4..p...........\r\n0x3c040010  0034 0100 0000 0400 01f6 6950 0025 56fc  .4........iP.%V.\r\n```\r\nI don't know why this happens when I use cmd.esil.mdev. If I don't use cmd.esil.mdev the memory reading is correct.\r\n\r\nAm I doing something wrong?\r\nAm I not understanding the correct usage of cmd.esil.mdev?","comments":[{"id":"IC_kwDOAEpMrs5ClizX","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Didn't tried the script, but thanks for the detailed reporting. But let me drop some comments for you to try before i have time to check.\r\n\r\n* aeim creates a new map for the stack, see `esil.stack.` vars, which is i guess the new map you see\r\n* You can change the priority of the maps using the omp command or change the base address of the stack to avoid that overlap\r\n* By reading the code related to mdev in anal/esil.c it calls the command specified by the cmd.esil.mdev variable, and returns only if its successful, otherwise it passes thru, so maybe you need to make the script return 1 instead of 0.\r\n* You can use `. foo.js` instead of `#!pipe node foo.js` its shorter :)","createdAt":"2022-05-04T10:05:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20034#issuecomment-1117138135","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Cn-7I","author":{"login":"pipothebit"},"authorAssociation":"CONTRIBUTOR","body":"I have removed aeim from the list and it is correct, the new memory map no longer appears. I haven't tried changing the properties yet.\r\n\r\nI have tried the way of calling the script that you comment, but it has not worked for me. In fact, I have tried all the ways that have occurred to me and these are the results:\r\n```\r\n\"e cmd.esil.mdev=. cmd.esil.mdev\"\r\n[0x00002d74]> ds\r\nr2 < 3c040000\r\nCannot find script 'cmd.esil.mdev 1006895104 0'\r\n0x3c040000 R> 00000000\r\nr1 < 10000040\r\nr1=0x0\r\nr1 = 0\r\n\r\n\"e cmd.esil.mdev=./cmd.esil.mdev\"\r\n[0x00002d74]> ds\r\nr2 < 3c040000\r\n|ERROR| Invalid command 'Usage: /c  Search for crypto materials' (0x1b)\r\n0x3c040000 R> 00340100\r\nr1 < 10000040\r\nr1=0x340100\r\nr1 = 340100\r\n\r\n\"e cmd.esil.mdev=/home/pipothebit/tmp/cmd.esil.mdev\"\r\n[0x00002d74]> ds\r\nr2 < 3c040000\r\nSearching ome/pipothebit/tmp/cmd.esil.mdev for 256 byte length.\r\nSearch in range 0x00000000 and 0x00200000\r\nCarving 2096896 blocks...\r\nHash fail\r\nSearch in range 0x10000000 and 0x10004000\r\nCarving 16128 blocks...\r\nHash fail\r\nSearch in range 0x20000000 and 0x28000000\r\nCarving 134217472 blocks...\r\nHash fail\r\nSearch in range 0x3c000000 and 0x3c400000\r\nCarving 4194048 blocks...\r\nHash fail\r\nNo hashes found\r\n0x3c040000 R> 00340100\r\nr1 < 10000040\r\nr1=0x340100\r\nr1 = 340100\r\n\r\n\"e cmd.esil.mdev=#!pipe cmd.esil.mdev\"\r\nr2 < 3c040000\r\nsh: 1: cmd.esil.mdev: not found\r\n0x3c040000 R> 00000000\r\nr1 < 10000040\r\nr1=0x0\r\nr1 = 0\r\n\r\n\"e cmd.esil.mdev=#!pipe ./cmd.esil.mdev\"\r\n[0x00002d74]> ds\r\nr2 < 3c040000\r\n0x3c040000 R> 00000000\r\nr1 < 10000040\r\nr1=0x0\r\nr1 = 0\r\n```\r\nThe only way that has worked for me is the last one, through pipes.  \r\n\r\nI have been examining the code for ```libr/anal/esil.c``` and the ```internal_esil_mem_read``` function. Using gdb and patching the code to log, I got to ```libr/lang/p/pipe.c``` which is where the script execution takes place.\r\n\r\nThis condition is always true ```if (esil->cmd (esil, esil->cmd_mdev, addr, 0)) {```, no matter what my script returns, it is always true. I have tried to return 0, 1, -1, 32, 64....\r\n\r\nThe call to ```esil->cmd (esil, esil->cmd_mdev, addr, 0)``` is made to ```r_core_esil_cmd``` which returns ```core->num->value```. I have not found the place where the result of execution script is assigned to this variable. But as I mentioned before, no matter what my script returns, ```core->num->value``` is always true.\r\n\r\n```r2 -v\r\nradare2 5.6.9 27913 @ linux-x86-64 git.5.6.8\r\ncommit: da38c8388727e1f0d67c06ffec1762e90fc572e0 build: 2022-05-04__15:26:20\r\n```\r\n\r\nI hope I have been helpful.","createdAt":"2022-05-04T19:41:48Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20034#issuecomment-1117777608","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5ECqxp","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Thanks for the detailed report, i'll look into that, but if you want to run an `r2` script you should name it like this (change the extension to `.r2`)\r\n\r\nAlso the `#!pipe` command expects the program as argument. `#!pipe python foo.py`. (unless the .mdev thing is an executable)","createdAt":"2022-05-31T00:10:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/20034#issuecomment-1141550185","viewerDidAuthor":true}],"number":20034,"title":"Strange behavior in cmd.esil.mdev I think"},{"body":"Types defined in r2 are not exposed in the TCC runtime, so its not possible to reuse previous definitions if they are defined in separate files or lines. Example:\r\n\r\n\r\n```\r\n[0x00000000]> \"td typedef int Number;struct Lala{Number je;}\"\r\n[0x00000000]> tt\r\nNumber\r\n[0x00000000]> ts Lala\r\npf d je\r\n[0x00000000]>\r\n```\r\n\r\nbut then:\r\n\r\n```\r\n[0x00000000]> \"td struct Lala{Number je;}\"\r\nERROR: <string>:1: error: bracket expected\r\n<string>:1: error: '}' expected (got \"Number\")\r\n<string>:1: error: declaration expected\r\n\r\n[0x00000000]>\r\n```","comments":[],"number":20032,"title":"Typedefs only work if used in a single line"},{"body":"## Environment\r\n\r\n```sh\r\n# copypaste this script into your shell and replace it with the output\r\ndate\r\nr2 -v\r\nuname -ms\r\n```\r\n\r\n## Description\r\n\r\n<!-- Explain what's the issue and what would you expect to see -->\r\n\r\n## Test\r\n\r\n<!-- Steps to reproduce the issue and provide files/links/images/.. -->\r\n","comments":[],"number":20014,"title":"Compile in CI with -Wshadow -Werror"},{"body":"## Refactoring `c`\r\n\r\nThis issue tracks progress in the large project of giving the `c` command a full pass for code quality, bugfixing, and other improvements.\r\n\r\nFollowing is a list of each subcommand. I'm creating the issue with only the top-level ones, but more sub-commands may be added for tracking specific progress.\r\n\r\n## Subcommand progress\r\n\r\n* [ ] c\r\n* [ ] c*\r\n* [x] c1 - #19958\r\n* [x] c[248] - #20412\r\n* [x] cat - #19886\r\n* [ ] cc\r\n* [ ] ccc\r\n* [ ] ccd\r\n* [ ] ccdd\r\n* [ ] cd\r\n* [ ] cf\r\n* [ ] cg\r\n* [ ] ci\r\n* [ ] cl\r\n* [x] cp - #19785\r\n* [ ] cu\r\n* [ ] cud\r\n* [ ] cv[1248]\r\n* [ ] cV[1248]\r\n* [x] cw - #19889\r\n* [ ] cx\r\n* [ ] cx*\r\n* [ ] cX\r\n","comments":[{"id":"IC_kwDOAEpMrs5BnpVC","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"moved to 5.7.0 as its no blocker for pushing a minor release","createdAt":"2022-04-17T16:36:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19887#issuecomment-1100911938","viewerDidAuthor":true}],"number":19887,"title":"EPIC: Refactoring project - `c` command"},{"body":"## Environment\r\n\r\n```sh\r\nSun Mar 27 01:42:24 AM +01 2022\r\nradare2 5.6.5 27886 @ linux-x86-64 git.5.5.4\r\ncommit: e85ad664a658e0b83bf82fb1fcf6284de8a2d858 build: 2022-03-19__16:30:43\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nWhen attaching radare2 to QEMU with ``r2 -b 64 -D gdb gdb://127.0.0.1:1234``, ``dr`` gives wrong values for control registers. I can notice that CR0 actually holds the CR4 value, but I cannot figure out from where the other values are coming. I'm taking as a reference the output of \"info registers\" given in QEMU monitor.\r\n\r\nIt doesn't seem to be a protocol problem, since GDB would give the correct values.\r\n\r\n## Test\r\n\r\n![r2](https://user-images.githubusercontent.com/22577625/160261771-84aa5ebb-bf5b-4ad0-a18c-d058305af8b0.png)\r\n![qemu](https://user-images.githubusercontent.com/22577625/160261774-4ad64f41-5974-496c-a698-052732d5c4c5.png)\r\n\r\nI am running the QEMU image with ``qemu-system-x86_64 -s -S debian-7.11.0-amd64.qcow2 -d in_asm``. You can find the image I'm using for testing here: https://github.com/palmercluff/qemu-images/tree/master/debian-7.11.0\r\n","comments":[{"id":"IC_kwDOAEpMrs5Spl22","author":{"login":"vsbogd"},"authorAssociation":"CONTRIBUTOR","body":"I can confirm this is still reproducible after fixing other GDB client issues by #21258 and #21264.\r\n\r\nSteps to reproduce:\r\n- run empty QEMU as GDB server: `qemu-system-x86_64 -S -s`\r\n- attach radare2: `r2 -b 64 -d gdb://127.0.0.1:1234`\r\n- set `CR0` register: `dr cr0=0x12345678`\r\n- check `CR0` and `CR4` values in gdb: `=!monitor info registers`\r\n\r\nActual result:\r\n```\r\nCR0=00000010 CR2=00000000 CR3=00000000 CR4=12145678\r\n```\r\n\r\nradare2 built from master:\r\n```\r\n$ r2 -v\r\nradare2 5.8.1 29787 @ linux-x86-64 git.5.8.0-136-g52ba949fef\r\ncommit: 52ba949fefbfaeece81fd1bd23d1a81d0d4e1be8 build: 2023-01-18__10:58:47\r\n```","createdAt":"2023-01-18T08:00:56Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19878#issuecomment-1386634678","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5SprNy","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Can you try with -d gdb://... instead of -D gdb gdb://..? I will take a look. Thanks for the reproducer steps","createdAt":"2023-01-18T08:19:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19878#issuecomment-1386656626","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Spx-f","author":{"login":"vsbogd"},"authorAssociation":"CONTRIBUTOR","body":"> Can you try with -d gdb://... instead of -D gdb gdb://..?\r\n\r\nSure, I have tried it, the same result.","createdAt":"2023-01-18T08:43:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19878#issuecomment-1386684319","viewerDidAuthor":false}],"number":19878,"title":"Attachement with QEMU gives wrong values for control registers"},{"body":"exe.asm\r\n\r\n```\r\n.model small\r\n.stack 1deh\r\n\r\ncseg segment 'CODE'   \r\n  assume cs:cseg\r\nstart:        \r\n  mov ax,4c00h\r\n  int 21h\r\ncseg ends\r\n\r\nend start\r\n```\r\n\r\nhttps://github.com/open-watcom/open-watcom-v2/releases/tag/Current-build\r\nhttps://github.com/open-watcom/open-watcom-v2/releases/download/Current-build/open-watcom-2_0-c-win-x64.exe\r\nhttps://github.com/open-watcom/open-watcom-v2/releases/download/Current-build/open-watcom-2_0-c-linux-x64\r\nno installation needed just unpack\r\n\r\nopen-watcom-2_0-c-win-x64\\binnt64\\wasm exe.asm\r\nopen-watcom-2_0-c-win-x64\\binnt64\\wlink.exe name exe.exe system dos file exe.obj\r\nor\r\nopen-watcom-2_0-c-win-x64\\binnt64\\wlink.exe name exe.exe format dos file exe.obj\r\n\r\nradare2-5.6.6-w64\\bin\\rabin2.exe -H exe.exe\r\n\r\ndoes show nothing - not even an error message\r\n\r\nmy own exe header dumper shows:\r\n\r\n```\r\nexe_header:\r\n  signature: MZ\r\n  bytes_in_last_block: 0x0025\r\n  blocks_in_file: 0x0001\r\n  num_relocs: 0x0000\r\n  header_paragraphs: 0x0002\r\n  min_extra_paragraphs: 0x0101\r\n  max_extra_paragraphs: 0xffff\r\n  ss:sp: 0x0001:0x1000\r\n  checksum: 0x0000\r\n  cs:ip: 0x0000:0x0000\r\n  reloc_table_offset: 0x0020\r\n  overlay_number: 0x0000\r\n```\r\n\r\nobj and exe file\r\n[exe_loader.zip](https://github.com/radareorg/radare2/files/8354850/exe_loader.zip)\r\n\r\n","comments":[{"id":"IC_kwDOAEpMrs5AwFGB","author":{"login":"Lazula"},"authorAssociation":"COLLABORATOR","body":"The current magic MZ detection doesn't work with non-PE binaries. It expects the full header `MZ\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0PE\\0\\0 \\b, PE for MS Windows`, but this compiler uses only `MZ` as the header. However, the MZ plugin still works. You can force rabin2 to use it with the `-F mz` option.\r\n\r\n```\r\n$ rabin2 -H exe.exe\r\n$ rabin2 -F mz -H exe.exe\r\nii 37 32\r\n[0000:0000]  Signature           MZ\r\n[0000:0002]  BytesInLastBlock    0x0025\r\n[0000:0004]  BlocksInFile        0x0001\r\n[0000:0006]  NumRelocs           0x0000\r\n[0000:0008]  HeaderParagraphs    0x0002\r\n[0000:000a]  MinExtraParagraphs  0x0101\r\n[0000:000c]  MaxExtraParagraphs  0xffff\r\n[0000:000e]  InitialSs           0x0001\r\n[0000:0010]  InitialSp           0x1000\r\n[0000:0012]  Checksum            0x0000\r\n[0000:0014]  InitialIp           0x0000\r\n[0000:0016]  InitialCs           0x0000\r\n[0000:0018]  RelocTableOffset    0x0020\r\n[0000:001a]  OverlayNumber       0x0000\r\n```\r\n\r\n@trufae:\r\n\r\nResolving `MZ` alone to MS-DOS was removed in 2014.\r\n\r\n```\r\n$ git blame libr/magic/d/default/microsoft | grep ' 4[12])'\r\n1d9955b2d41 libr/magic/d/default/microsoft (pancake           2014-10-22 00:56:11 +0200  41) #0 string  MZ              MS-DOS executable\r\n1d9955b2d41 libr/magic/d/default/microsoft (pancake           2014-10-22 00:56:11 +0200  42) 0  string  MZ\r\n$ git log -n1 1d9955b2d41\r\ncommit 1d9955b2d4168e763c72e151ff61c09926775017\r\nAuthor: pancake <pancake@nopcode.org>\r\nDate:   Wed Oct 22 00:56:11 2014 +0200\r\n\r\n    Clean unnecessary MAGIC rules and optimize its search\r\n    \r\n    - Cleanup MAGIC database to avoid false positives,\r\n    - Optimize magic search loop 6x faster /m\r\n```\r\n\r\nThoughts? Just emit an error saying no headers were found and instructing the user to check plugins?","createdAt":"2022-04-01T21:33:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19873#issuecomment-1086345601","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5Aw2rF","author":{"login":"LowLevelMahn"},"authorAssociation":"NONE","body":"`The current magic MZ detection doesn't work with non-PE binaries. It expects the full header MZ\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0PE\\0\\0 \\b, PE for MS Windows, but this compiler uses only MZ as the header.`\r\n\r\nthanks for the info\r\nbut it seems that the Header detection is still then not fully correct - or based on a size check\r\n\r\nthe same asm example linked with \r\n\r\n1. current UniLink v1.13 [beta] (build 3.09) (ftp://ftp.styx.cabel.net/pub/UniLink) --> exe_unilinker.zip\r\n\r\n`ulink.exe -Tde exe.obj`\r\n(wich normaly produces a larger gap between header and relocation table)\r\n\r\nshows the header with just -H\r\n\r\n2. Microsoft (R) Segmented Executable Linker  Version 5.60.339 Dec  5 1994 - latest 16bit able\r\n-->exe_mslink.zip\r\n\r\nshows also the header with just -H\r\n\r\n3. current OPTLINK (R) for Win32  Release 8.00.17 produces a exe where -H does NOT show header info\r\n\r\n4. TLink Version 7.1.30.1. Copyright (c) 1987 - latest 16bit from TASM 5.x package\r\n\r\nshows also the header info with -H\r\n\r\n| Linker    | Headersize | Space to relocation table            | Space to header end | Image    | just -H works |                          \r\n| :-------- | :--------- | :----------------------------------- | :------------------ | :------- | :------------ |\r\n| wlink\t    | 28 bytes\t |  00 00                               | 00 00               | 5 bytes  | NO            |\r\n| ulink\t    | 28 bytes\t |  55 6E 69 4C 69 6E 6B +29 null bytes | 0 bytes             | 5 bytes  | YES           |\r\n| mslink\t  | 28 bytes\t |  01 00                               | 482 null bytes      | 5 bytes  | YES           |\r\n| optlink   | 28 bytes\t |  00 00                               | 00 00               | 5 bytes  | NO            |\r\n| tlink   | 28 bytes\t |  01 00 FB 71 6A 72 +28 null bytes   | 450 null bytes              | 5 bytes  | YES            |\r\n\r\n[exe_unilinker.zip](https://github.com/radareorg/radare2/files/8401859/exe_unilinker.zip)\r\n[exe_mslink.zip](https://github.com/radareorg/radare2/files/8401884/exe_mslink.zip)\r\n[exe_tlink.zip](https://github.com/radareorg/radare2/files/8401937/exe_tlink.zip)\r\n\r\n","createdAt":"2022-04-02T05:06:59Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19873#issuecomment-1086548677","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5AznR8","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"You carload the file with `r2 -F mz exe.exe`. but it's indeed a bug that this is not handled properly probably because the PE plugin tries to handle it before the mz one and just returns error instead of redirecting the handling to the mz plugin.\r\n\r\nAbout iH not printing anything, yes, I think it's fine to print an error when the plugin doesn't implement such callback","createdAt":"2022-04-04T08:34:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19873#issuecomment-1087272060","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5BMp6E","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"is this what you mean? https://github.com/radareorg/radare2/pull/19926","createdAt":"2022-04-09T09:23:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19873#issuecomment-1093836420","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5BN9jL","author":{"login":"LowLevelMahn"},"authorAssociation":"NONE","body":"> is this what you mean? #19926\r\n\r\ni think this will print an error message (can't test - waiting for next release) if there are no header fields found\r\nthats it definitily bettern then printing nothing :)\r\n\r\n","createdAt":"2022-04-10T05:13:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19873#issuecomment-1094179019","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5BOD8_","author":{"login":"Lazula"},"authorAssociation":"COLLABORATOR","body":"works with r2 but not rabin2\r\n\r\n```\r\n$ r2 -q -c 'iH' ~/r2-files/issues/19873/exe.exe\r\nNo header fields found\r\n$ rabin2 -H ~/r2-files/issues/19873/exe.exe\r\n<no output>\r\n```","createdAt":"2022-04-10T07:25:04Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19873#issuecomment-1094205247","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5BR_1G","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"done in rabin2 -H too. i'll drop the milestone because no hurry to implement that support for this short release. anyone feel free to do it. thanks for reporting","createdAt":"2022-04-11T15:54:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19873#issuecomment-1095236934","viewerDidAuthor":true}],"number":19873,"title":"rabin2 -H does not show header of exe build with WatcomV2 wlink"},{"body":"https://github.com/radareorg/radare2/security/code-scanning?page=1","comments":[{"id":"IC_kwDOAEpMrs5Cvyip","author":{"login":"VolkerSchlegel"},"authorAssociation":"NONE","body":"![image](https://user-images.githubusercontent.com/66200818/167179744-e3c86b00-a60f-4418-bef3-af7690b7d695.png)\r\n?","createdAt":"2022-05-06T17:09:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19821#issuecomment-1119824041","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5Cx6Z4","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"The link works for me, but maybe it's because github restrict codeql logs to users having commit access in the repo :?","createdAt":"2022-05-08T09:12:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19821#issuecomment-1120380536","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Cx6qK","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"![Screenshot (133)](https://user-images.githubusercontent.com/6431515/167289711-3d8cdd18-33eb-4d1b-a541-e4a42182a71e.png)\r\n![Screenshot (134)](https://user-images.githubusercontent.com/6431515/167289712-2241f153-8e73-4360-b6e8-d4cbc2731909.png)\r\n\r\n\r\nThose are all the findings. they are not many. only two pages","createdAt":"2022-05-08T09:17:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19821#issuecomment-1120381578","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5CyIF8","author":{"login":"VolkerSchlegel"},"authorAssociation":"NONE","body":"oh wow...","createdAt":"2022-05-08T15:15:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19821#issuecomment-1120436604","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5CyJp_","author":{"login":"VolkerSchlegel"},"authorAssociation":"NONE","body":"![Unbenannt](https://user-images.githubusercontent.com/66200818/167304342-76df3cec-3fe5-44d4-86ea-c023f854079d.PNG)\r\nyeah, doesn't seem to be public","createdAt":"2022-05-08T15:55:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19821#issuecomment-1120443007","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5CzPxP","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I tried to make this public for everyone but no luck :( bugs want to be free","createdAt":"2022-05-09T07:17:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"CONFUSED","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/19821#issuecomment-1120730191","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5DGEKf","author":{"login":"VolkerSchlegel"},"authorAssociation":"NONE","body":"I don't get why converting a multiplication result to a larger type would be an issue ðŸ¤·â€â™‚ï¸","createdAt":"2022-05-13T05:12:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19821#issuecomment-1125663391","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5DVZQO","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"the result of multiplying two 32bit variables doesn't fit in 32bit as result. So, if those variables are signed the result can be negative or smaller, or even zero. Which may cause a variety of bugs:\r\n\r\n* invalid allocations (smaller or undefined behaviour)\r\n* buffer overflows\r\n* oobread/oobwrite using wrong index in arrays\r\n* division by zero\r\n* etc..","createdAt":"2022-05-18T07:45:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/radareorg/radare2/issues/19821#issuecomment-1129681934","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5DWLE7","author":{"login":"VolkerSchlegel"},"authorAssociation":"NONE","body":"Ah :D Thanks ","createdAt":"2022-05-18T11:21:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19821#issuecomment-1129886011","viewerDidAuthor":false}],"number":19821,"title":"Fix all the bugs found by codeql"},{"body":"## Environment\r\n\r\n```sh\r\n$ date\r\nMon 07 Mar 2022 02:24:33 PM JST\r\n\r\n$ r2 -v\r\nradare2 5.3.0-git 26390 @ linux-x86-64 git.5.2.1\r\ncommit: 40ae0fa7d0bd468f7560426e87c034c6843778a5 build: 2021-05-31__15:14:05\r\n\r\n$ uname -ms\r\nLinux x86_64\r\n```\r\n\r\n![Selection_999(1008)](https://user-images.githubusercontent.com/4618288/156973156-de5d1e06-4220-430c-bad4-1594b8b00aaf.png)\r\n\r\n\r\nOn the left side is expected interpretation, on the right - not expected.\r\nOn the left side `r2 <binary-name>`, on the right - `r2 -d <pid>`.","comments":[],"number":19796,"title":"in debug and non debug mode r2 interpret the same part of binary differently"},{"body":"## Environment\r\n\r\n```sh\r\n# copypaste this script into your shell and replace it with the output\r\ndate\r\nr2 -v\r\nuname -ms\r\nMon Jan 31 04:06:46 PM EST 2022\r\nradare2 5.5.5 27779 @ linux-x86-64 git.5.5.4\r\ncommit: feaa4e7f7399c51ee6f52deb84dc3f795b4035d6 build: 2022-01-31__16:04:40\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nThe size of the jump table is acquired from the `default` case comparison and uses the immediate value as the table size. When this value is negative, r2 ends up thinking the table is inflated in size. Included is a binary that shows a couple examples of this.\r\n\r\nSo for `cmp edi, 0xfffffff6` (from `sym.int_neg_switch_diff` in binary), the size is assumed to be 0xfffffffffffffff6 (not sure why it's sign extended). This is too large so r2 gives up parsing the table.\r\n\r\nFor `cmp dil, 0xf6` (from `sym.char_neg_switch` in binary) the size is thought to be 0xf6. This is not unreasonable but it's too large. So the jump table ends up sucking up invalid cases. In the provided binary, this analysis seems to creep into the next function modifying it's basic blocks and breaking it. Though this might also be due to other things.\r\n\r\n## Test\r\n\r\n<!-- Steps to reproduce the issue and provide files/links/images/.. -->\r\n```\r\n[0x000010b0]> aa\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[0x000010b0]> s 0x000011ad # sym.char_neg_switch switch table basic block\r\n[0x000011ad]> afb. # should have 10 cases and default, not 30\r\n0x000011ad 0x000011c0 00:0000 19 s 0x000011f0 s 0x00001200 s 0x00001210 s 0x00001220 s 0x00001230 s 0x00001240 s 0x000011c0 s 0x000011d0 s 0x000011e0 s 0x00001288 s 0x00001298 s 0x000012a8 s 0x000012b8 s 0x000012c8 s 0x000012d8 s 0x00001258 s 0x00001268 s 0x00001278 s 0x00001320 s 0x00001330 s 0x00001340 s 0x00001350 s 0x00001360 s 0x00001370 s 0x000012f0 s 0x00001300 s 0x00001310\r\n[0x000011ad]> s 0x0000132c # sym.int_neg_switch_diff switch table basic block\r\n[0x0000132c]> afb. # should have 10 cases\r\n0x0000132c 0x0000133c 00:0000 16\r\n```\r\n\r\n## FIX\r\n\r\nI am happy to patch this but I am not sure how. \r\n\r\nThe 32-bit case is an easy fix. If the jump table size is too big check if it's inverse is acceptable. The difference between `-x` and `x` on a 32-bit or even 16-bit values is larger then accepted table sizes of 0x200. (need to pay attention to `-0x8000 == 0x8000` sillyness).\r\n\r\nThe 8 bit value is more difficult. Is 0xf6 meant as `if (case < -10) goto default;` or `if (case > 246) goto default;`. Both are reasonable. \r\n\r\nThe best approach would be to detect if `<` or `>` is being used in the compare, then negate appropriately. Is there a way to do that in a way that is architecture agnostic without using ESIL? Should we use ESIL here? Solving this would also mean we could take care of the `<` vs `<=` problem. So should a solution here be used for all cases, even 32-bit cases?\r\n\r\nIf I can get answer to those questions I can send a pull to fix this and we can add this executable to the tests.\r\n\r\n## files\r\n`tar -zxvf` to get the executable `a.out` and the source code. \r\n[switch_table_fun.tar.gz](https://github.com/radareorg/radare2/files/7974523/switch_table_fun.tar.gz)\r\n","comments":[{"id":"IC_kwDOAEpMrs4-Epau","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Do you plan to implement support for this kind of switch tables?","createdAt":"2022-02-16T11:47:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19651#issuecomment-1041405614","viewerDidAuthor":true}],"number":19651,"title":"Jump table with negative cases imporoperly handled"},{"body":"## Environment\r\n\r\n```\r\n$ date\r\nwto, 18 sty 2022, 22:08:11 CET\r\n$ r2 -v\r\nradare2 5.5.5 27758 @ linux-x86-64 git.5.5.4\r\ncommit: 4884287b81a3fdd1d9c81cceaccce45b1cebdf31 build: 2022-01-18__21:56:56\r\n$ uname -ms\r\nLinux x86_64\r\n$ \r\n```\r\n\r\n## Description\r\n\r\nasm.segoff config is not preserved in some cases for x86-16bit, in general it is not preserved when disassembly of analysed function (\"pd\" or \"pdf\"), or after load binary file using \"o\" command\r\n\r\n## Test\r\n\r\ntest1:\r\n```\r\n$ r2 -\r\ne asm.arch=x86\r\ne asm.bits=16\r\ne asm.seggrn=8\r\ne asm.segoff=false\r\n\r\nwx 55c3\r\n\r\npd 1\r\ne asm.segoff\r\n\r\naf\r\ne asm.segoff\r\n\r\npd 2\r\ne asm.segoff\r\n```\r\n\r\ntest2:\r\n```\r\n$ echo -ne \"\\x55\\xc3\" > test.bin\r\n$ r2 -\r\ne asm.arch=x86\r\ne asm.bits=16\r\ne asm.seggrn=8\r\ne asm.segoff=false\r\n\r\ne asm.segoff\r\n\r\no test.bin 0 rwx\r\ne asm.segoff\r\n\r\ne asm.segoff=false\r\npd 2\r\npd 2\r\n\r\naf\r\ne asm.segoff\r\n\r\npd 2\r\ne asm.segoff\r\n```\r\n\r\ntest3:\r\n```\r\n$ echo -ne \"\\x55\\xc3\" > test.bin\r\n$ r2 test.bin\r\ne asm.arch=x86\r\ne asm.bits=16\r\ne asm.seggrn=8\r\ne asm.segoff=false\r\n\r\npd 2\r\n\r\npd 2\r\n\r\naf\r\ne asm.segoff\r\n\r\npd 2\r\ne asm.segoff\r\n```\r\n\r\n## Output\r\n\r\n![Screenshot from 2022-01-18 21-59-20](https://user-images.githubusercontent.com/79937932/150019824-9d379b0b-4b1d-49b2-a62c-d00e34bf5331.png)\r\n![Screenshot from 2022-01-18 22-02-12](https://user-images.githubusercontent.com/79937932/150019833-2d84a313-5d6d-46e5-b34b-05498a082109.png)\r\n![Screenshot from 2022-01-18 22-03-45](https://user-images.githubusercontent.com/79937932/150019848-0264e1b4-06e7-4100-b129-854453dd6a02.png)\r\n\r\n\r\n","comments":[{"id":"IC_kwDOAEpMrs49M74E","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"is this fixed?","createdAt":"2022-02-01T12:41:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19599#issuecomment-1026801156","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs49QLPn","author":{"login":"lasek0"},"authorAssociation":"CONTRIBUTOR","body":"Yes and No. Yes I have found places where this can be fixed, and No because solutions does not satisfy me. In general each time when `r_config_set_i` is called with \"asm.bits\" = 16 then segoff is set. I think that asm.segoff should be only set when e sam.bits = 16 is executed from console or from script file, but not as direct call via `r_config_set_i`. That is why I not pushed to PR yet for that issue. And  quick simple restore segoff for pd is not valid way to go. I fixed this by save and restore around `r_config_set_i (\"asm.bits\", ...)` in few places. But as I said this can be done better.","createdAt":"2022-02-02T07:17:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19599#issuecomment-1027650535","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs49cwbh","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Got it, thanks for the explanation\n\n> On 2 Feb 2022, at 08:18, lasek0 ***@***.***> wrote:\n> \n> ï»¿\n> Yes and No. Yes I have found places where this can be fixed, and No because solutions does not satisfy me. In general each time when r_config_set_i is called with \"asm.bits\" = 16 then segoff is set. I think that asm.segoff should be only set when e sam.bits = 16 is executed from console or from script file, but not as direct call via r_config_set_i. That is why I not pushed to PR yet for that issue. And quick simple restore segoff for pd is not valid way to go. I fixed this by save and restore around r_config_set_i (\"asm.bits\", ...) in few places. But as I said this can be done better.\n> \n> â€”\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n> You are receiving this because you commented.\n","createdAt":"2022-02-07T00:12:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19599#issuecomment-1030948577","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs4_ppSQ","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i thikn the best way to proceed is to add some tests for this, can you do that? @lasek0 ","createdAt":"2022-03-15T11:28:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19599#issuecomment-1067881616","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5ZeuJo","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Ping?","createdAt":"2023-04-09T22:21:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19599#issuecomment-1501225576","viewerDidAuthor":true}],"number":19599,"title":"x86-16bit asm.segoff config is not preserved in some cases"},{"body":"## Environment\r\n\r\n```\r\n$ date\r\npon, 17 sty 2022, 23:31:20 CET\r\n$ uname -ms\r\nLinux x86_64\r\n$ r2 -v\r\nradare2 5.5.5 27756 @ linux-x86-64 git.5.5.4\r\ncommit: 7127e204a2c75f857c764918794bb0bed71476a1 build: 2022-01-17__21:36:50\r\n$ \r\n```\r\n\r\n## Description\r\n\r\nfor a while I noticed to have some additional arguments when I analyse data as function using af for x86-16bit arch. \r\ntesting similar code in 32bit workds as expected.\r\n\r\nr2 incorrectly think that ax register is an parater even if al and ah is previously set from const or other regs.\r\n\r\n**In general I could try and I will fix that by self, but please point me to where try to find that bug for faster results.**\r\n\r\n## Test\r\n\r\n16bit first:\r\n\r\n```\r\n$r2 -\r\ne asm.arch=x86.nasm\r\ne asm.bits=16\r\ne asm.seggrn=8\r\ne asm.segoff=true\r\n\"wa push bp; mov bp, sp; mov dx, word [bp+6]; mov al, dl; mov ah, 0; mov bx, ax; test byte [bx + 0x4141], 0x80; pop bp; ret\"\r\npd 9\r\naf\r\npdf\r\n```\r\n\r\n32bit for comparison:\r\n\r\n```\r\n$r2 -\r\ne asm.bits=32\r\n\"wa push ebp; mov ebp, esp; mov edx, word [ebp+6]; mov al, dl; mov ah, 0; mov ebx, eax; test byte [ebx + 0x4141], 0x80; pop ebp; ret\"\r\npd 9\r\naf\r\npdf\r\n\r\n```\r\n\r\n## Output:\r\n\r\n16bit:\r\n```\r\n -- Wait a minute! I found a bug, self-fixing ... OK\r\n[0x00000000]> e asm.arch=x86.nasm\r\n[0x00000000]> e asm.bits=16\r\n[0000:0000]> e asm.seggrn=8\r\n[0000:0000]> e asm.segoff=true\r\n[0000:0000]> \"wa push bp; mov bp, sp; mov dx, word [bp+6]; mov al, dl; mov ah, 0; mov bx, ax; test byte [bx + 0x4141], 0x80; pop bp; ret\"\r\nWritten 19 byte(s) (push bp; mov bp, sp; mov dx, word [bp+6]; mov al, dl; mov ah, 0; mov bx, ax; test byte [bx + 0x4141], 0x80; pop bp; ret) = wx 5589e58b560688d0b40089c3f6874141805dc3\r\n[0000:0000]> pd 9\r\n            0000:0000      55             push bp\r\n            0000:0001      89e5           mov bp, sp\r\n            0000:0003      8b5606         mov dx, word ptr [bp + 6]\r\n            0000:0006      88d0           mov al, dl\r\n            0000:0008      b400           mov ah, 0\r\n            0000:000a      89c3           mov bx, ax\r\n            0000:000c      f687414180     test byte ptr [bx + 0x4141], 0x80\r\n            0000:0011      5d             pop bp\r\n            0000:0012      c3             ret\r\n[0000:0000]> af\r\n[0000:0000]> pdf\r\nâ”Œ 19: fcn.00000000 (int16_t arg1, int16_t arg_6h);\r\nâ”‚           ; arg int16_t arg_6h @ bp+0x6\r\nâ”‚           ; arg int16_t arg1 @ ax\r\nâ”‚           0000:0000      55             push bp\r\nâ”‚           0000:0001      89e5           mov bp, sp\r\nâ”‚           0000:0003      8b5606         mov dx, word ptr [arg_6h]\r\nâ”‚           0000:0006      88d0           mov al, dl\r\nâ”‚           0000:0008      b400           mov ah, 0\r\nâ”‚           0000:000a      89c3           mov bx, ax                   ; arg1\r\nâ”‚           0000:000c      f687414180     test byte ptr [bx + 0x4141], 0x80\r\nâ”‚           0000:0011      5d             pop bp\r\nâ””           0000:0012      c3             ret\r\n```\r\n\r\n![Screenshot from 2022-01-17 23-29-33](https://user-images.githubusercontent.com/79937932/149844146-8af12da7-3172-4278-846c-9deb893453f6.png)\r\n\r\n\r\n32bit:\r\n```\r\n -- Don't wait for Travis\r\n[0x00000000]> e asm.bits=32\r\n[0x00000000]> \"wa push ebp; mov ebp, esp; mov edx, word [ebp+6]; mov al, dl; mov ah, 0; mov ebx, eax; test byte [ebx + 0x4141], 0x80; pop ebp; ret\"\r\nWritten 17 byte(s) (push ebp; mov ebp, esp; mov edx, word [ebp+6]; mov al, dl; mov ah, 0; mov ebx, eax; test byte [ebx + 0x4141], 0x80; pop ebp; ret) = wx 5589e58b550688d0b40089c3f603805dc3\r\n[0x00000000]> pd 9\r\n            0x00000000      55             push ebp\r\n            0x00000001      89e5           mov ebp, esp\r\n            0x00000003      8b5506         mov edx, dword [ebp + 6]\r\n            0x00000006      88d0           mov al, dl\r\n            0x00000008      b400           mov ah, 0\r\n            0x0000000a      89c3           mov ebx, eax\r\n            0x0000000c      f60380         test byte [ebx], 0x80\r\n            0x0000000f      5d             pop ebp\r\n            0x00000010      c3             ret\r\n[0x00000000]> af\r\n[0x00000000]> pdf\r\nâ”Œ 17: fcn.00000000 (int32_t arg_6h);\r\nâ”‚           ; arg int32_t arg_6h @ ebp+0x6\r\nâ”‚           0x00000000      55             push ebp\r\nâ”‚           0x00000001      89e5           mov ebp, esp\r\nâ”‚           0x00000003      8b5506         mov edx, dword [arg_6h]\r\nâ”‚           0x00000006      88d0           mov al, dl\r\nâ”‚           0x00000008      b400           mov ah, 0\r\nâ”‚           0x0000000a      89c3           mov ebx, eax\r\nâ”‚           0x0000000c      f60380         test byte [ebx], 0x80\r\nâ”‚           0x0000000f      5d             pop ebp\r\nâ””           0x00000010      c3             ret\r\n```\r\n\r\n![Screenshot from 2022-01-17 23-29-48](https://user-images.githubusercontent.com/79937932/149844158-ab2e2e49-005c-421c-9e75-e26a1ca8fe27.png)\r\n","comments":[],"number":19595,"title":"x86-16bit function analysis false positive argument"},{"body":"## Environment\r\n\r\nRadare 5.5.4 (or today's master, 0c6d40c) on Ubuntu focal 64 bit\r\n\r\n\r\n## Description\r\n\r\nThe disassembly in mfc/mtc instructions allows to read and write coprocessor registers.  For example\r\n```\r\n00608340 mtc0 v1, $12\r\n```\r\nWrites v1 to the coprocessor 0 register 12.\r\nThe disassembly when using `-e mips.gnu` is correct, as shown above.\r\nWhen using `-e mips`, the disassembly references the GPR number 12 (i.e. `t4`):\r\n```\r\n00608340  mtc0 v1, t4, 0\r\n```\r\n\r\n### Test\r\n\r\nCorrect:\r\n```\r\n% rasm2 -a mips -D 00608340\r\n0x00000000   4                 00608340  mtc0 v1, t4, 0\r\n```\r\n\r\nIncorrect:\r\n```\r\n% rasm2 -a mips.gnu -D 00608340\r\n0x00000000   4                 00608340  mtc0 v1, $12\r\n```","comments":[{"id":"IC_kwDOAEpMrs47oY0X","author":{"login":"cavedon"},"authorAssociation":"NONE","body":"Actually this is a duplicate of #17372. The bug is actually in the capstone project https://github.com/capstone-engine/capstone/issues/1673.\r\nIt may be worthwhile keeping the bug open in radare2 as well until the upstream bug is resolved, as it manifests as bug in radare2 as well. ","createdAt":"2021-12-23T17:36:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19528#issuecomment-1000443159","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs47okrq","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Thanks\n\n\n\n> On 23 Dec 2021, at 18:37, Ludovico Cavedon ***@***.***> wrote:\n> \n> ï»¿\n> Actually this is a duplicate of #17372. The bug is actually in the capstone project capstone-engine/capstone#1673.\n> It may be worthwhile keeping the bug open in radare2 as well until the upstream bug is resolved, as it manifests as bug in radare2 as well.\n> \n> â€”\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n> Triage notifications on the go with GitHub Mobile for iOS or Android. \n> You are receiving this because you are subscribed to this thread.\n","createdAt":"2021-12-23T19:35:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19528#issuecomment-1000491754","viewerDidAuthor":false}],"number":19528,"title":"disassembly for mips mtc/mfc: incorrect coprocessor registry "},{"body":"Every child should be susceptible to be sandboxed.\r\n\r\nThe idea behind this funny title is to implement sandbox features in rarun2 to let the user disable some capabilities in the child process, this is, disable filesystem, fork, exec, network access.","comments":[{"id":"IC_kwDOAEpMrs5ZeuS9","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Lets just support pledge for openbsd and serenityos to handle this. Other sandbox systems can come later","createdAt":"2023-04-09T22:24:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19517#issuecomment-1501226173","viewerDidAuthor":true}],"number":19517,"title":"One sandbox per child"},{"body":"## Description\r\n\r\n*Please describe what are you missing or wanting to be improved*\r\n\r\nI was going to push the test for travis-ci/cd for a decompilation project for a 8051 firmware when I found a bug on recompilation: \r\n\r\n> Cannot assemble 'jbc 0x20.0, 0x8018' at line 36342\r\n\r\nI also have 4 invalid instructions during the disassembly step.\r\n\r\nI thing implementing tests over this way is a good deal to catch almost any bug on disassembling/reassembling. It should not even miss any single instruction.\r\n\r\nI also would like to use r2 like that to disassemble/document/decompile old architecture. I currently can not really due to bug and people want to use another asm compiler...\r\n\r\n*Provide images, ascii-art, test files and anything that may help us understand your request*\r\n\r\n```\r\n#!/bin/bash\r\n\r\nradare2 -a 8051 -m 0x8000 -e \"scr.color=0\" -qf -c \"pI\" MP_8192E_FW_NIC.bin > out.asm\r\nrasm2 -a 8051 -f out.asm > recompiled-firmware.bin\r\n\r\nexport old_bin=$(md5sum MP_8192E_FW_NIC.bin) ;\r\nexport new_bin=$(md5sum recompiled-firmware.bin) ;\r\n\r\nif [ \"$old_bin\" = \"$new_bin\" ]\r\nthen\r\n  echo \"OK\"\r\nelse\r\n  echo \"NOT OK\"\r\n  exit 1 ;\r\nfi\r\n```\r\n","comments":[{"id":"IC_kwDOAEpMrs46_Nkb","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"yep. that should be possible and its planned, but there's no serious effort towards this beside fixing the assembler when there's a missing instruction or alignment issue or so","createdAt":"2021-12-09T09:05:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19481#issuecomment-989649179","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs47EsdJ","author":{"login":"Lazula"},"authorAssociation":"COLLABORATOR","body":"i see no use for a checksum as opposed to a direct diff check: `if $(diff -q file1 file2 >/dev/null); then echo OK; fi`\r\n\r\nno need to process the entire files if a mismatch occurs early on","createdAt":"2021-12-10T15:54:24Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/radareorg/radare2/issues/19481#issuecomment-991086409","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs47EtWW","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"@Lazula This is actually another project than radare2. Could we talk about with discord instead please?\r\n","createdAt":"2021-12-10T15:59:18Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19481#issuecomment-991090070","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs4_Xmsz","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"agree with @Lazula a checksum is more of a problem than a real benefit, for the developer and the user.\r\n","createdAt":"2022-03-09T17:04:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19481#issuecomment-1063152435","viewerDidAuthor":true}],"number":19481,"title":"add a new test to disassemble+reassemble a full file and check the checksum of these files for each architectures"},{"body":"## Description\r\n\r\nAnother change that should be done related to #19295 is that lots of commands do not have a help prompt with a ? postfix, instead simply running the command. This is especially important now that this can occur simply by pressing tab. It's not a huge issue with `p` commands (pushing current info offscreen can be annoying), but commands that change program state such as `s` could cause problems.\r\n\r\nAlso, some help output either lacks color, has an incorrect `|` at the start, or both, such as `pI?`. Others are simply inconsistent, such as `pix`, `pdx`, and `pad`.\r\n\r\n## Test\r\n\r\n### Tab completion\r\n\r\n```\r\n[0x00000000]> pd<TAB>\r\nUsage: p[dD][ajbrfils] [[-]len]   # Print N bytes/instructions bw/forward\r\n| NOTE: len        parameter can be negative\r\n| NOTE:            Pressing ENTER on empty command will repeat last print command in next page\r\n| pD N             disassemble N bytes\r\n| pd -N            disassemble N instructions backwards\r\n| pd N             disassemble N instructions\r\n| pd--[n]          context disassembly of N instructions\r\n| pda[?]           disassemble all possible opcodes (byte per byte)\r\n| pdb[?]           disassemble basic block\r\n| pdc[?][c]        pseudo disassembler output in C-like syntax\r\n| pdC              show comments found in N instructions\r\n| pde[q|qq|j] [N]  disassemble N instructions following execution flow from current PC\r\n| pdo[N]           convert esil expressions of N instructions to C (bytes for pdO)\r\n| pdf[?]           disassemble function\r\n| pdi              like 'pi', with offset and bytes\r\n| pdj              disassemble to json\r\n| pdJ              formatted disassembly like pd as json\r\n| pdk[?]           disassemble all methods of a class\r\n| pdl              show instruction sizes\r\n| pdp[?]           disassemble by following pointers to read ropchains\r\n| pdr[?]           recursive disassemble across the function graph\r\n| pdr.             recursive disassemble across the function graph (from current basic block)\r\n| pdR              recursive disassemble block size bytes without analyzing functions\r\n| pds[?]           disassemble summary (strings, calls, jumps, refs) (see pdsf and pdfs)\r\n| pd, [n] [query]  disassemble N instructions in a table (see dtd for debug traces)\r\n| pdx [hex]        alias for pad or pix\r\n[0x00000000]> pda<TAB>\r\nUsage: pda[j]  Print disassembly of all possbile opcodes\r\n| pdaj  Display the disassembly of all possbile opcodes (byte per byte) in JSON\r\n[0x00000000]> pdi<TAB>\r\n0x00000000                 0000  add byte [rax], al\r\n0x00000002                 0000  add byte [rax], al\r\n0x00000004                 0000  add byte [rax], al\r\n0x00000006                 0000  add byte [rax], al\r\n<snip>\r\n```\r\n\r\n### Incorrect or inconsistent help text\r\n\r\n```\r\n[0x00000000]> pi?\r\nUsage: pi[bdefrj] [num]\r\n| pia              print all possible opcodes (byte per byte)\r\n| pib              print instructions of basic block\r\n| pid              alias for pdi\r\n| pie              print offset + esil expression\r\n| pif[?]           print instructions of function\r\n| pij              print N instructions in JSON\r\n| pir              like 'pdr' but with 'pI' output\r\n| piu[q] [optype]  disassemble until instruction of given optype is found (See /atl)\r\n| pix  [hexpairs]  alias for pdx and pad\r\n[0x00000000]> pix?\r\nUsage: pad [hexpairs] # disassembly given bytes\r\n[0x00000000]> pdx?\r\nUsage: pad [hexpairs] # disassembly given bytes\r\n[0x00000000]> pad?\r\n|Usage: pad [hex]       print assembly expression from hexpairs\r\n```","comments":[{"id":"IC_kwDOAEpMrs46SK-k","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Yep this is known, i made a call a month ago for people to test and improve help messages, many of those fixes got in, but its hard to not miss any, so if you can make a list of those missing helps that will be helpful for new contributors too\r\n","createdAt":"2021-11-24T12:42:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19437#issuecomment-977842084","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5LtNAn","author":{"login":"alex-bender"},"authorAssociation":"CONTRIBUTOR","body":"I will take a look into what's left","createdAt":"2022-10-06T14:19:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19437#issuecomment-1270140967","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5L9nHC","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Cool. also all the `eprintf (\"Usage: \")` must be changed to proper RCoreHelp ","createdAt":"2022-10-11T10:00:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19437#issuecomment-1274442178","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5ZeuY3","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I think thats a recurrent well known issue. Do u think we can close it? In case we find a command without help we can just implement it","createdAt":"2023-04-09T22:27:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19437#issuecomment-1501226551","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5Zfk-G","author":{"login":"alex-bender"},"authorAssociation":"CONTRIBUTOR","body":"By recurrent you mean that from time to time we're getting commands without help message?\r\nIt's indeed fine to close it, always can get new ticket.","createdAt":"2023-04-10T06:24:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19437#issuecomment-1501450118","viewerDidAuthor":false}],"number":19437,"title":"All commands should support ? postfix for help"},{"body":"## Description\r\n\r\n`R_STR_` macros provided in r_str.h are missing in a lot of places.\r\nThe following searches are imperfect and need some degree of manual review rather than en masse automatic replacement. Might be able to do some tweaking with the regex after identifying problem cases to do it all in one pass.\r\n\r\n`R_STR_ISNOTEMPTY`:\r\n`$ grep -RE '([^ ]+) ?&& ?\\*\\1'`\r\n\r\n`R_STR_ISEMPTY`:\r\n`$ grep -RE '!([^ ]+) ?\\|\\| ?!\\*\\1'`\r\n\r\n`R_STR_DUP`:\r\n`$ grep -RE '([^ ]+) ?\\? ?strdup ?\\(\\1\\) ?: ?NULL'`","comments":[{"id":"IC_kwDOAEpMrs47mkq7","author":{"login":"Lazula"},"authorAssociation":"COLLABORATOR","body":"@trufae still interested in resolving this one\r\n\r\nimo:\r\n\r\n* rename current r_str_dup() to r_str_redup() (intended usage seems similar to realloc?) or just remove it entirely\r\n* remove R_STR_DUP() and replace with r_str_new()\r\n\r\nthoughts?","createdAt":"2021-12-23T00:56:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19422#issuecomment-999967419","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5ZeubG","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Can you add those greps in lint.sh? I think we are quite good now about this","createdAt":"2023-04-09T22:27:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19422#issuecomment-1501226694","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5qUVWY","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Ping? I think we can close this ticket already. I have fixed most of those cases but worth having a last double check","createdAt":"2023-10-28T06:00:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19422#issuecomment-1783715224","viewerDidAuthor":true}],"number":19422,"title":"String emptiness check macros are underutilized"},{"body":"Allow r2 commands to be executed on files at mounted filesystem\r\n\r\n```$r2 img.iso\r\nMounted iso9660 on /root at 0x0\r\n[0x00000000]> ms\r\n[/root]> ls\r\nd .\r\nd ..\r\nd etc\r\nf sample.elf\r\n[/root]> r2 sample.elf\r\nUnknown command r2 sample.elf\r\n[/root]>\r\n```","comments":[{"id":"IC_kwDOAEpMrs46I7el","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"for now you may need to use `get sample.elf` and then `!r2 sample.elf`","createdAt":"2021-11-22T11:19:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19411#issuecomment-975419301","viewerDidAuthor":true}],"number":19411,"title":"Allow r2 commands inside mounted filesystems"},{"body":"If you want read-only mem, create new ro-maps or mark existing ones as ro","comments":[{"id":"IC_kwDOAEpMrs44xNFr","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"The config var is independent from how its implemented behind the scenes. i think its important to have an easy way to emulate code without changing memory\n\n> On 27 Oct 2021, at 00:14, condret ***@***.***> wrote:\n> \n> \n> If you want read-only mem, create new ro-maps or mark existing ones as ro\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/19320>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FRF6XC57OMKADY5H53UI4Y3ZANCNFSM5GY3X6UA>.\n> Triage notifications on the go with GitHub Mobile for iOS <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675> or Android <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>. \n> \n\n","createdAt":"2021-10-27T00:03:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19320#issuecomment-952422763","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs44yuxo","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"if you don't use the r2 io implementation for mem-access, which you could do, you'd need to write your own mem-access functions, which would be the right place to enforce ro. to me this var is just bloat","createdAt":"2021-10-27T11:26:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19320#issuecomment-952822888","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs4_Xnjg","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"the option is imho useful, the implementation could be changed, but imho esil.romem should stay there. can you provide a poc of your proposal to move the problem outside the esil vm?","createdAt":"2022-03-09T17:08:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19320#issuecomment-1063155936","viewerDidAuthor":true}],"number":19320,"title":"Consider dropping esil.romem"},{"body":"When disassembling dll or exe files in radare2, I sometimes encounter function calls via ordinals (call sub. mfc140u.dll_Ordinal_2246). As I understand it, the problem is that there is no pdb file for the mfc140u library.\r\n\r\nIn Ida Pro, this situation does not occur (call AfxGetModuleState(void)), the function call is quite readable.\r\n\r\nTo solve this problem in radare2 I use the following algorithm:\r\n\r\n1. I open it in radare2 mfc140u.dll;\r\n2. I load the PDB file for this library using the command \"idpd\" (I get the file mfc140u.i386.pdb);\r\n3. I open the file again in which there are calls via ordinals from the mfc140 library and load the PDB file with the command \"idp\" in response I get a lot of lines of the type - \"parse_tpi_streams(): unsupported leaf type: 0x151d\".\r\n\r\nAs a result, nothing changes! All the same function calls via ordinals. What am I doing wrong?","comments":[],"number":19247,"title":"Function name from Ordinal number in Radare2"},{"body":"https://github.com/madler/crcany","comments":[],"number":19209,"title":"Add more crcs"},{"body":"## Environment\r\n\r\n```sh\r\n$ date\r\nSat 09 Oct 2021 02:31:18 AM EDT\r\n$ r2 -v\r\nradare2 5.4.3 0 @ linux-x86-64 git.\r\ncommit: 5.4.3 build: 2021-10-08__17:14:37\r\n$ uname -ms\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nPiping external programs into rarun2 profile options fails. It's expected that external programs output can be piped to stdin or used as arguments. Workaround is to pipe commands to file and load from file.\r\n\r\n## Test\r\n#### Test commands\r\n```\r\nprotostar@protostar:~/c$ cat profile.rr\r\n#!/usr/bin/rarun2\r\nstdin=!./output.o\r\n```\r\n```\r\nr2 -r profile.rr -d test.o\r\nr2 -R stdin=\\!.output.o -d input.o\r\nr2 -e dbg.profile=profile.rr -d test.o\r\n```\r\n- Testing inside r2\r\n```\r\ndor arg1=!./command; ood\r\n```\r\n#### Test output\r\n- arg1 inside r2\r\n```\r\n[0x7f7e964bd699]> dor arg1=XXXX; ood\r\nPTRACE_CONT: No such process\r\nchild received signal 9\r\nContinue until 0x5647f544b145 using 1 bpsize\r\nWarning: Breakpoint won't be placed since it's not in a valid map.\r\nYou can bypass this check by setting dbg.bpinmaps to false.\r\nThe argument supplied is XXXX\r\n(81952) Process exited with status=0x0\r\nFile dbg:///home/protostar/c/test.o reopened in read-write mode\r\n\r\n[0x7fde5cb1a699]> !./output.o\r\nSSSSSSSSSSSSSSSSSSSSSSS\r\n\r\n[0x7fde5cb1a699]> dor arg1=!./output.o; ood\r\nPTRACE_CONT: No such process\r\nchild received signal 9\r\nWARNING: r_str_trim_tail: assertion 'str' failed (line 173)\r\nContinue until 0x557f8feee145 using 1 bpsize\r\nWarning: Breakpoint won't be placed since it's not in a valid map.\r\nYou can bypass this check by setting dbg.bpinmaps to false.\r\nOne argument expected.\r\n(81955) Process exited with status=0x0\r\nFile dbg:///home/protostar/c/test.o reopened in read-write mode\r\n```\r\n- stdin inside r2\r\n```\r\n[0x55d0a808f145]> dor stdin=stdin.txt; doo\r\nchild received signal 9\r\nStepping failed!\r\nContinue until 0x55d0a808f145 using 1 bpsize\r\nAAAAAA\r\n(82098) Process exited with status=0x0\r\nFile dbg:///home/protostar/c/input.o reopened in read-write mode\r\n\r\n[0x7f3eaaabb699]> !./output.o\r\nSSSSSSSSSSSSSSSSSSSSSSS\r\n\r\n[0x7f3eaaabb699]> dor stdin=!./output.o; doo\r\nPTRACE_CONT: No such process\r\nchild received signal 9\r\nptrace (PT_ATTACH): No such process\r\nptrace (PT_ATTACH): No such process\r\nptrace (PT_ATTACH): No such process\r\nptrace (PT_ATTACH): No such process\r\nContinue until 0x55c494158145 using 1 bpsize\r\nCannot continue, run ood?\r\nptrace (PT_ATTACH): No such process\r\nr_core_file_reopen: Cannot reopen file: dbg:///home/protostar/c/input.o with perms 0x7, attempting to open read-only.\r\nCannot open '/proc/82098/maps': No such file or directory\r\n```\r\n- stdin from cli\r\n```\r\nprotostar@protostar:~/c$ r2 -R stdin=stdin.txt -d input.o\r\nContinue until 0x55fcf9c40145 using 1 bpsize\r\nhit breakpoint at: 0x55fcf9c40145\r\n -- Thank you for using radare2. Have a nice night!\r\n[0x55fcf9c40145]> dc\r\nAAAAAA\r\n(82142) Process exited with status=0x0\r\n\r\nprotostar@protostar:~/c$ r2 -r profile.rr -d input.o\r\n[w] Cannot open 'dbg://./input.o' for writing.\r\n\r\nprotostar@protostar:~/c$ r2 -R stdin=\\!.output.o -d input.o\r\nCan't find profile '/tmp/.rarun2.5cde5fc92e445'\r\n[w] Cannot open 'dbg://./input.o' for writing.\r\n```\r\n  \r\n","comments":[],"number":19196,"title":"Piping external commands to rarun2 stdin/arg1 fails"},{"body":"## Description\r\nThe output of radare2. Attention to address 0x08048436\r\n```\r\nâ”‚           0x080483ff      e832000000     call 0x8048436              ; int main(int argc, char **argv, char **envp)\r\nâ”‚           0x08048404      31c0           xor eax, eax\r\nâ”‚           0x08048406      0205849a0408   add al, byte [0x8049a84]    ; [0x8049a84:1]=0\r\nâ”‚           0x0804840c      83f800         cmp eax, 0\r\nâ”‚       â”Œâ”€< 0x0804840f      7405           je 0x8048416\r\nâ”‚       â”‚   0x08048411      b801000000     mov eax, 1\r\nâ”‚       â”‚   ; CODE XREF from main @ 0x804840f\r\nâ”‚       â””â”€> 0x08048416      c1e002         shl eax, 2\r\nâ”‚           0x08048419      8b80179d0408   mov eax, dword [eax + 0x8049d17]\r\nâ”‚           0x0804841f      50             push eax\r\nâ”‚           0x08048420      689a9d0408     push str._r_n_s_r_n_s       ; 0x8049d9a ; \"\\r\\n%s\\r\\n%s\" ; const char *format\r\nâ”‚           0x08048425      e832060000     call sym.imp.printf         ; int printf(const char *format)\r\nâ”‚           0x0804842a      b801000000     mov eax, 1\r\nâ”‚           0x0804842f      bb00000000     mov ebx, 0\r\nâ”‚           0x08048434      cd80           int 0x80\r\nâ”‚           ; CALL XREF from main @ 0x80483ff\r\nâ”‚           0x08048436      be959a0408     mov esi, 0x8049a95    ; new function should be here\r\nâ”‚           ; CODE XREF from main @ 0x80488eb\r\n```\r\nIda output:\r\n![Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ](https://user-images.githubusercontent.com/59787538/136576766-d9c5334f-044f-4351-8d61-a85a8edd6aac.png)\r\n","comments":[{"id":"IC_kwDOAEpMrs43-a07","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"int 0x80 is not always sys_exit. this requires some deeper esil analysis to reliably determine the syscall","createdAt":"2021-10-08T20:53:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19190#issuecomment-939109691","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs43-b8p","author":{"login":"Lazula"},"authorAssociation":"COLLABORATOR","body":"if we can track when an instruction causes program termination (including a sys_exit syscall like this example), we can just treat that as a function terminator like a ret. maybe some similar functionality already exists?","createdAt":"2021-10-08T21:03:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19190#issuecomment-939114281","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs43_CG7","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Yes. Any call to a noreturn function results in this too. Thats whats also named tailcall optimizations","createdAt":"2021-10-09T10:08:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19190#issuecomment-939270587","viewerDidAuthor":true}],"number":19190,"title":"Create a new function after \"int 0x80\" (used instead of \"ret\")"},{"body":"Using x86.nz.. the resulting bytes should be: \r\n\r\n0f294810","comments":[{"id":"IC_kwDOAEpMrs43-c11","author":{"login":"Lazula"},"authorAssociation":"COLLABORATOR","body":"if this is accurate we also have incorrect disasm:\r\n\r\n```\r\n$ rasm2 -a x86 -b 64 -d 0f294810\r\nmovaps xmmword [rax + 0x10], xmm1\r\n```","createdAt":"2021-10-08T21:10:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19171#issuecomment-939117941","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs43-dKH","author":{"login":"Lazula"},"authorAssociation":"COLLABORATOR","body":"currently using the last byte as an 8-bit offset for rax:\r\n\r\n```\r\n$ rasm2 -a x86 -b 64 -d 0f294800\r\nmovaps xmmword [rax], xmm1\r\n```\r\n\r\n```\r\n$ rasm2 -a x86 -b 64 -d 0f29481010\r\nmovaps xmmword [rax + 0x10], xmm1\r\ninvalid\r\n```","createdAt":"2021-10-08T21:13:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19171#issuecomment-939119239","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5MGT-W","author":{"login":"pmeerw"},"authorAssociation":"CONTRIBUTOR","body":"rasm2 cannot assemble \"movaps xmmword [rax], xmm1\"\r\nit should result in 0f2908 (contrary to what is stated above)\r\nhowever, disassembly seems to work: \r\n```\r\nrasm2 -d -a x86.nz -b 64 \"0f2908\"\r\nmovaps xmmword [rax], xmm1\r\n```","createdAt":"2022-10-12T20:49:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19171#issuecomment-1276723094","viewerDidAuthor":false}],"number":19171,"title":"Cannot assemble 'movaps xmmword [rax], xmm1'"},{"body":"Hi everyone,\r\nI want to modify a binary (ELF file) and would like to add a large string constant (of length 3100) using radare2.\r\nSo, first I tried extending the .rodata using the following commands\r\n\r\n- oo+ \r\n- iO r/.rodata/value (Message came: successfully shifted x numberof bytes.)\r\nThen I seeked at the particular location and executed the below commands.\r\n\r\n- `wff </path/to/file> <fileSize>`\r\n\r\n- wz \\x00\r\n- `objdump -s <executable>` . Execution of this command reveals that size of the .rodata is not increased only.\r\n\r\nWhen I printed the string, it is showing only the substring which is of the length (~400).\r\n\r\nSo, below are my few queries.\r\n\r\n- How to increase the size of a particular section ( .rodata) of binary and what are the commands that need to be executed regarding the same, if possible?\r\n- How to know whether we are successful in increasing the size of a section?\r\n- Is it possible to add such a large string constant (of length 3100) using radare2?\r\n- For the scenario mentioned above, why a substring is getting printed instead of the entire string?\r\n\r\n![Screenshot from 2021-09-28 09-31-24](https://user-images.githubusercontent.com/24733479/135021384-ee834a37-cb09-4b6a-be17-32c2b1510076.png)\r\nAbove is the image of the objdump of the various section of the binary.\r\nThanks for the help.","comments":[],"number":19143,"title":"Adding a large string constant in binary"},{"body":"https://github.com/SDL-Hercules-390/hyperion/blob/master/codepage.c","comments":[{"id":"IC_kwDOAEpMrs4_Xn-m","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"@gogo2464 do you want to add those?","createdAt":"2022-03-09T17:09:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19139#issuecomment-1063157670","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs4_XxO4","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"Yes. I just update (or not) the doc on charset on r2book and then I will do this charset.","createdAt":"2022-03-09T17:49:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19139#issuecomment-1063195576","viewerDidAuthor":false}],"number":19139,"title":"charsets: add more from hyperion"},{"body":"/*\r\n *  Summary:\r\n *    Virtual keycodes\r\n *  \r\n *  Discussion:\r\n *    These constants are the virtual keycodes defined originally in\r\n *    Inside Mac Volume V, pg. V-191. They identify physical keys on a\r\n *    keyboard. Those constants with \"ANSI\" in the name are labeled\r\n *    according to the key position on an ANSI-standard US keyboard.\r\n *    For example, kVK_ANSI_A indicates the virtual keycode for the key\r\n *    with the letter 'A' in the US keyboard layout. Other keyboard\r\n *    layouts may have the 'A' key label on a different physical key;\r\n *    in this case, pressing 'A' will generate a different virtual\r\n *    keycode.\r\n */\r\nenum {\r\n  kVK_ANSI_A                    = 0x00,\r\n  kVK_ANSI_S                    = 0x01,\r\n  kVK_ANSI_D                    = 0x02,\r\n  kVK_ANSI_F                    = 0x03,\r\n  kVK_ANSI_H                    = 0x04,\r\n  kVK_ANSI_G                    = 0x05,\r\n  kVK_ANSI_Z                    = 0x06,\r\n  kVK_ANSI_X                    = 0x07,\r\n  kVK_ANSI_C                    = 0x08,\r\n  kVK_ANSI_V                    = 0x09,\r\n  kVK_ANSI_B                    = 0x0B,\r\n  kVK_ANSI_Q                    = 0x0C,\r\n  kVK_ANSI_W                    = 0x0D,\r\n  kVK_ANSI_E                    = 0x0E,\r\n  kVK_ANSI_R                    = 0x0F,\r\n  kVK_ANSI_Y                    = 0x10,\r\n  kVK_ANSI_T                    = 0x11,\r\n  kVK_ANSI_1                    = 0x12,\r\n  kVK_ANSI_2                    = 0x13,\r\n  kVK_ANSI_3                    = 0x14,\r\n  kVK_ANSI_4                    = 0x15,\r\n  kVK_ANSI_6                    = 0x16,\r\n  kVK_ANSI_5                    = 0x17,\r\n  kVK_ANSI_Equal                = 0x18,\r\n  kVK_ANSI_9                    = 0x19,\r\n  kVK_ANSI_7                    = 0x1A,\r\n  kVK_ANSI_Minus                = 0x1B,\r\n  kVK_ANSI_8                    = 0x1C,\r\n  kVK_ANSI_0                    = 0x1D,\r\n  kVK_ANSI_RightBracket         = 0x1E,\r\n  kVK_ANSI_O                    = 0x1F,\r\n  kVK_ANSI_U                    = 0x20,\r\n  kVK_ANSI_LeftBracket          = 0x21,\r\n  kVK_ANSI_I                    = 0x22,\r\n  kVK_ANSI_P                    = 0x23,\r\n  kVK_ANSI_L                    = 0x25,\r\n  kVK_ANSI_J                    = 0x26,\r\n  kVK_ANSI_Quote                = 0x27,\r\n  kVK_ANSI_K                    = 0x28,\r\n  kVK_ANSI_Semicolon            = 0x29,\r\n  kVK_ANSI_Backslash            = 0x2A,\r\n  kVK_ANSI_Comma                = 0x2B,\r\n  kVK_ANSI_Slash                = 0x2C,\r\n  kVK_ANSI_N                    = 0x2D,\r\n  kVK_ANSI_M                    = 0x2E,\r\n  kVK_ANSI_Period               = 0x2F,\r\n  kVK_ANSI_Grave                = 0x32,\r\n  kVK_ANSI_KeypadDecimal        = 0x41,\r\n  kVK_ANSI_KeypadMultiply       = 0x43,\r\n  kVK_ANSI_KeypadPlus           = 0x45,\r\n  kVK_ANSI_KeypadClear          = 0x47,\r\n  kVK_ANSI_KeypadDivide         = 0x4B,\r\n  kVK_ANSI_KeypadEnter          = 0x4C,\r\n  kVK_ANSI_KeypadMinus          = 0x4E,\r\n  kVK_ANSI_KeypadEquals         = 0x51,\r\n  kVK_ANSI_Keypad0              = 0x52,\r\n  kVK_ANSI_Keypad1              = 0x53,\r\n  kVK_ANSI_Keypad2              = 0x54,\r\n  kVK_ANSI_Keypad3              = 0x55,\r\n  kVK_ANSI_Keypad4              = 0x56,\r\n  kVK_ANSI_Keypad5              = 0x57,\r\n  kVK_ANSI_Keypad6              = 0x58,\r\n  kVK_ANSI_Keypad7              = 0x59,\r\n  kVK_ANSI_Keypad8              = 0x5B,\r\n  kVK_ANSI_Keypad9              = 0x5C\r\n};\r\n\r\n/* keycodes for keys that are independent of keyboard layout*/\r\nenum {\r\n  kVK_Return                    = 0x24,\r\n  kVK_Tab                       = 0x30,\r\n  kVK_Space                     = 0x31,\r\n  kVK_Delete                    = 0x33,\r\n  kVK_Escape                    = 0x35,\r\n  kVK_Command                   = 0x37,\r\n  kVK_Shift                     = 0x38,\r\n  kVK_CapsLock                  = 0x39,\r\n  kVK_Option                    = 0x3A,\r\n  kVK_Control                   = 0x3B,\r\n  kVK_RightShift                = 0x3C,\r\n  kVK_RightOption               = 0x3D,\r\n  kVK_RightControl              = 0x3E,\r\n  kVK_Function                  = 0x3F,\r\n  kVK_F17                       = 0x40,\r\n  kVK_VolumeUp                  = 0x48,\r\n  kVK_VolumeDown                = 0x49,\r\n  kVK_Mute                      = 0x4A,\r\n  kVK_F18                       = 0x4F,\r\n  kVK_F19                       = 0x50,\r\n  kVK_F20                       = 0x5A,\r\n  kVK_F5                        = 0x60,\r\n  kVK_F6                        = 0x61,\r\n  kVK_F7                        = 0x62,\r\n  kVK_F3                        = 0x63,\r\n  kVK_F8                        = 0x64,\r\n  kVK_F9                        = 0x65,\r\n  kVK_F11                       = 0x67,\r\n  kVK_F13                       = 0x69,\r\n  kVK_F16                       = 0x6A,\r\n  kVK_F14                       = 0x6B,\r\n  kVK_F10                       = 0x6D,\r\n  kVK_F12                       = 0x6F,\r\n  kVK_F15                       = 0x71,\r\n  kVK_Help                      = 0x72,\r\n  kVK_Home                      = 0x73,\r\n  kVK_PageUp                    = 0x74,\r\n  kVK_ForwardDelete             = 0x75,\r\n  kVK_F4                        = 0x76,\r\n  kVK_End                       = 0x77,\r\n  kVK_F2                        = 0x78,\r\n  kVK_PageDown                  = 0x79,\r\n  kVK_F1                        = 0x7A,\r\n  kVK_LeftArrow                 = 0x7B,\r\n  kVK_RightArrow                = 0x7C,\r\n  kVK_DownArrow                 = 0x7D,\r\n  kVK_UpArrow                   = 0x7E\r\n};","comments":[],"number":19138,"title":"charsets: add xnu virtual keycode to ascii/ansi"},{"body":"## Environment\r\n\r\n```sh\r\nradare2 5.4.0 1 @ linux-x86-64 git.\r\ncommit: fd3870c4375112b2991451856ae037494c3dcc97 build: 2021-08-20__12:42:26\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\nYou can see I've chained a bunch of commands here, and then tried to print out `pxQq 8 @ rax`. When chaining commands, radare2 gives the output 0xffffffffffffffff, but this is wrong. If I run the same command again afterwards, then radare2 gives the correct answer: 0x0000564f12458700.\r\n\r\n```\r\n[0x7f18a2fc9100]> db sym.get_filenames_abi:cxx11___; dc; dsf;echo rax is:; dr rax; echo value at rax is:;pxQq 8 @ rax\r\nBreakpoint already set at this address.\r\nCannot set breakpoint at 'sym.get_filenames_abi:cxx11___'\r\nhit breakpoint at: 0x564f1177ad17\r\nhit breakpoint at: 0x564f1177ad4c\r\nhit breakpoint at: 0x564f1177ad58\r\nhit breakpoint at: 0x564f1177ad7c\r\nhit breakpoint at: 0x564f1177ad96\r\nhit breakpoint at: 0x564f1177ada9\r\nhit breakpoint at: 0x564f1177adb8\r\nhit breakpoint at: 0x564f1177add5\r\nhit breakpoint at: 0x564f1177adef\r\nhit breakpoint at: 0x564f1177adfb\r\nhit breakpoint at: 0x564f1177ae0a\r\nhit breakpoint at: 0x564f1177ae16\r\nhit breakpoint at: 0x564f1177ae22\r\nhit breakpoint at: 0x564f1177ae31\r\nhit breakpoint at: 0x564f1177ae4c\r\nhit breakpoint at: 0x564f1177ae62\r\nhit breakpoint at: 0x564f1177ae7c\r\nhit breakpoint at: 0x564f1177ae95\r\nhit breakpoint at: 0x564f1177aeae\r\nhit breakpoint at: 0x564f1177aebd\r\nhit breakpoint at: 0x564f1177aed6\r\nhit breakpoint at: 0x564f1177aeef\r\nhit breakpoint at: 0x564f1177aefe\r\nhit breakpoint at: 0x564f1177af17\r\nhit breakpoint at: 0x564f1177af2a\r\nhit breakpoint at: 0x564f1177af40\r\nhit breakpoint at: 0x564f1177af52\r\nhit breakpoint at: 0x564f1177af68\r\nhit breakpoint at: 0x564f1177af74\r\nhit breakpoint at: 0x564f1177af83\r\nhit breakpoint at: 0x564f1177af17\r\nhit breakpoint at: 0x564f1177af2a\r\nhit breakpoint at: 0x564f1177af40\r\nhit breakpoint at: 0x564f1177af52\r\nhit breakpoint at: 0x564f1177af68\r\nhit breakpoint at: 0x564f1177af74\r\nhit breakpoint at: 0x564f1177af83\r\nhit breakpoint at: 0x564f1177af17\r\nhit breakpoint at: 0x564f1177af2a\r\nhit breakpoint at: 0x564f1177af40\r\nhit breakpoint at: 0x564f1177af52\r\nhit breakpoint at: 0x564f1177af68\r\nhit breakpoint at: 0x564f1177af74\r\nhit breakpoint at: 0x564f1177af83\r\nhit breakpoint at: 0x564f1177af17\r\nhit breakpoint at: 0x564f1177af2a\r\nhit breakpoint at: 0x564f1177af40\r\nhit breakpoint at: 0x564f1177af52\r\nhit breakpoint at: 0x564f1177af68\r\nhit breakpoint at: 0x564f1177af74\r\nhit breakpoint at: 0x564f1177af83\r\nhit breakpoint at: 0x564f1177af17\r\nhit breakpoint at: 0x564f1177af97\r\nhit breakpoint at: 0x564f1177afa6\r\nhit breakpoint at: 0x564f1177afb5\r\nhit breakpoint at: 0x564f1177afc4\r\nrax is:\r\n0x7fffd6518410\r\nvalue at rax is:\r\n0xffffffffffffffff\r\n[0x564f1177b327]> dr rax\r\n0x7fffd6518410\r\n[0x564f1177b327]>  pxQq 8 @ rax\r\n0x0000564f12458700\r\n\r\n```\r\n\r\n## Test\r\n\r\nI've attached the executable below for a test case. Try running the command `db sym.get_filenames_abi:cxx11___; dc; dsf;echo rax is:; dr rax; echo value at rax is:;pxQq 8 @ rax` first and see that you get `value at rax is: 0xffffffffffffffff`. Then, run `pxQq 8 @ rax` and you will get a different output.\r\n\r\nPS: The executable will attempt to send your SSH keys over the network. Only run it in a sandbox.\r\n\r\n[executable.zip](https://github.com/radareorg/radare2/files/7210317/executable.zip)\r\n","comments":[{"id":"IC_kwDOAEpMrs43IKgv","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Yes, thats known and expected. The register name the way you access it is as a flag. Those flags only get updated before the prompt, so you may want to use @r:rax instead","createdAt":"2021-09-22T12:33:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19124#issuecomment-924887087","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs43QlaX","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Closing? ideally those flags should be only updated when accessed instead of unnecessarily refresh them on the prompt line, So fixing that will require making the RFlag API to be event based and cache the results when they don't change. I think it's a good idea to extend the rflag api to handle that, but still for your use case I think using `@r:` is more precise.","createdAt":"2021-09-25T09:26:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19124#issuecomment-927094423","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs43Q41d","author":{"login":"heinosasshallik"},"authorAssociation":"NONE","body":"Yeah ideally my example would work. But I understand if it's too much effort. Just letting you know, because I switched to GDB for my use case due of this problem. `@r:` isn't really very common knowledge. \r\n\r\nOther people may have this problem as well, if they need to script stuff using radare2. You might suggest using r2pipe (I think that's what the radare2 python scripting thing is called?) instead, but after reading that Cutter uses the command line due to how buggy r2pipe is, I've never tried.","createdAt":"2021-09-25T19:43:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19124#issuecomment-927173981","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs43RT1_","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Uhm sorry but iâ€™m getting a bit lost in your response. R2pipe is the interface to run commands in r2 from any language (from js, python or ruby to c, rust or awk).\r\n\r\ni dont see what cutter plays in here. Cutter is a gui and it doesnt uses r2. I assume you mean to call the c apis instead of the r2 commands. Because thats what r2pipe is.\r\n\r\nthe reason for calling apis instead of commands is because of performance reasons (avoids the parsing evaluation times and avoids some side effects).\r\n\r\n if theres any bug in r2pipe, please let me know and iâ€™ll fix.\r\n\r\nthe issue you are mentioning its related to the way flags work and how and when the flag registers are updated. Thats unrelated to cutter or r2pipe or to call the apis.\r\n\r\nOne solution could be to remove the registers from the flags. Forcing people to use sr instead of s. For example, that would be more correct but a more dynamic solution can be done by adding callbacks when accessing them by specifying which command to run when they are accessed. This requires corebind in rflag but its also possible.\r\n\r\nand additionally you can also run .dr* when you want those flags updated. This behaviour have been like this since r1. So its nothing new or surprising. Let me know what feels more natural and correct to you","createdAt":"2021-09-26T11:00:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19124#issuecomment-927284607","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs43RexU","author":{"login":"heinosasshallik"},"authorAssociation":"NONE","body":"Ah, sorry, I suppose I could have been more clear.\r\n\r\n> Uhm sorry but iâ€™m getting a bit lost in your response. R2pipe is the interface to run commands in r2 from any language (from js, python or ruby to c, rust or awk).\r\n\r\nWhat I was saying was that instead of using r2pipe to interface with radare2, I was using radare2 directly in my script. I passed all the commands I wanted in a flag, separated by semicolons. I forgot the exact syntax, but it looked something like this:\r\n\r\n```\r\nr2 --command=\"db sym.get_filenames_abi:cxx11___; dc; dsf;echo rax is:; dr rax; pxr @ rax\" ./sketchy\r\n```\r\n\r\n> i dont see what cutter plays in here. Cutter is a gui and it doesnt uses r2. I assume you mean to call the c apis instead of the r2 commands. Because thats what r2pipe is.\r\n\r\nCutter is a GUI tool that uses radare2 (or rather, Rizin, I think) for its debugging capabilities. \r\n\r\nThe reason I mentioned Cutter is because I remember reading something like this from its developers: \"Cutter calls radare2 commands directly instead of using r2pipe because it's less buggy that way\". \r\n\r\nEssentially, I mentioned Cutter because I expected you to say \"why don't you just use r2pipe\". I didn't use it because I had heard negative things about it.\r\n\r\n> Let me know what feels more natural and correct to you\r\n\r\n\r\nTo have a world where everything works as it is, but this bug doesn't exist. \r\n\r\nHowever, I understand that this is a lot of work, and you're probably not getting paid to do this, so I don't expect you to do anything about it. We can leave this bug closed. Thanks for responding to it :)\r\n\r\n","createdAt":"2021-09-26T16:04:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19124#issuecomment-927329364","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs43TNJm","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Those \"words from Cutter\" are not correct, r2pipe supports many different transports and one of them is native api calls, so there's no difference in performance or stability compared to calling the commands directly.\r\n\r\nR2pipe is stable, and widely used, but if you want to have more control on the memory usage, side effects, etc it's always possible to use the apis directly natively or via bindings from any programming language.\r\n\r\nNo its not a lot of work, dont take my words wrong :) i'm just trying to know what makes more sense for you to be done, i can implement any of those solutions in few hours. and nope i don't get paid for this, but it feels irresponsible to me to not solve known bugs in something I maintain and i agree with you that things should work out without special tricks.\r\n\r\nLet's keep this open and i'll come back with a solution ðŸ‘ \r\n\r\nThanks!","createdAt":"2021-09-27T11:25:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/19124#issuecomment-927781478","viewerDidAuthor":true}],"number":19124,"title":"Examining memory at a register does not work correctly when chaining commands."},{"body":"The following files are considered malware, we should make windows builds free from such files, most of the files are in the testsuite, but for r2, the r2agent is still considered a trojan. Which it is.\r\n\r\n```\r\n      file:C:\\Users\\pancake\\Desktop\\w32\\bin\\bin\\r2agent.exe quarantined at 9/12/2021 3:47:58 PM (UTC)\r\n```\r\n\r\nHere's the full listing, we shouldn't be distributing malware even if its for a testsuite, and afaik those samples have an empty entrypoint, but this issue is all about checking this and solving those issues\r\n\r\n```\r\nC:\\> cd C:\\ProgramData\\Microsoft\\Windows Defender\\Platform\\4.18.2108.7-0\r\nC:\\ProgramData\\Microsoft\\Windows Defender\\Platform\\4.18.2108.7-0> MpCmdRun -Restore -ListAll\r\nThe following items are quarantined:\r\n\r\nThreatName = PWS:Win32/Zbot\r\n      file:C:\\Users\\pancake\\prg\\radare2\\test\\bins\\pe\\winmain.exe quarantined at 9/18/2021 9:50:01 PM (UTC)\r\n\r\nThreatName = Backdoor:Win32/Guptachar.2_0\r\n      file:C:\\Users\\pancake\\prg\\radare2\\test\\bins\\pe\\bcc1.ex quarantined at 9/18/2021 9:50:01 PM (UTC)\r\n\r\nThreatName = Trojan:Win32/HawkEye.D!MTB\r\n      file:C:\\Users\\pancake\\prg\\radare2\\test\\bins\\pe\\Reborn_Stub-strings.exe quarantined at 9/18/2021 9:50:01 PM (UTC)\r\n\r\nThreatName = VirTool:Win32/Obfuscator.XZ\r\n      file:C:\\Users\\pancake\\prg\\radare2\\test\\bins\\pe\\15004.file quarantined at 9/18/2021 9:50:01 PM (UTC)\r\n\r\nThreatName = Trojan:Win32/Tnega!MSR\r\n      file:C:\\Users\\pancake\\prg\\radare2\\test\\bins\\pe\\Lab01-03.exe quarantined at 9/18/2021 9:50:01 PM (UTC)\r\n\r\nThreatName = Trojan:Win32/Sabsik.TE.A!ml\r\n      file:C:\\Users\\pancake\\Desktop\\w32\\bin\\bin\\r2agent.exe quarantined at 9/12/2021 3:47:58 PM (UTC)\r\n\r\nThreatName = Backdoor:Win32/Idicaf.gen!B\r\n      file:C:\\Users\\pancake\\prg\\radare2\\test\\bins\\pe\\Lab05-01.dll quarantined at 9/18/2021 9:50:01 PM (UTC)\r\n\r\nThreatName = Backdoor:Win32/Neporoot.A\r\n      file:C:\\Users\\pancake\\prg\\radare2\\test\\bins\\pe\\lab11.malware quarantined at 9/18/2021 9:50:01 PM (UTC)\r\n\r\nThreatName = Trojan:AndroidOS/Looter.C!MTB\r\n      file:C:\\Users\\pancake\\prg\\radare2\\test\\bins\\elf\\libexploit.so quarantined at 9/18/2021 9:50:01 PM (UTC)\r\n\r\nThreatName = Backdoor:Linux/Tsunami.C!MTB\r\n      file:C:\\Users\\pancake\\prg\\radare2\\test\\bins\\elf\\analysis\\dwarf_load quarantined at 9/18/2021 8:48:49 PM (UTC)\r\n\r\nThreatName = Backdoor:Linux/Gafgyt.M!xp\r\n      file:C:\\Users\\pancake\\prg\\radare2\\test\\bins\\elf\\bashbot.arm.gcc.O0.elf quarantined at 9/18/2021 9:50:01 PM (UTC)\r\n      file:C:\\Users\\pancake\\prg\\radare2\\test\\bins\\elf\\bashbot.x86_64.O0.elf quarantined at 9/18/2021 9:50:01 PM (UTC)\r\n```","comments":[{"id":"IC_kwDOAEpMrs43QopE","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Needs to be submitted here to resolve the issues https://www.microsoft.com/en-us/wdsi/filesubmission","createdAt":"2021-09-25T11:29:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19114#issuecomment-927107652","viewerDidAuthor":true}],"number":19114,"title":"Windows Defender issues"},{"body":"```\r\n\r\n>Native: mov rax, qword fs:[0x28]\r\n>ESIL: 0x28,[8],rax,=\r\n\r\n```","comments":[{"id":"IC_kwDOAEpMrs421OeR","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":">0x64, 0x48, 0x8B, 0x04, 0x25, 0x28, 0x00, 0x00, 0x00","createdAt":"2021-09-15T11:07:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19086#issuecomment-919922577","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs433eaA","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"this is because we don't have a satisfying description for segments, e.g. esil cannot switch between 32 and 64 bit","createdAt":"2021-10-06T22:43:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19086#issuecomment-937289344","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs46I_UT","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"any proposal for this @condret?","createdAt":"2021-11-22T11:41:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19086#issuecomment-975435027","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5BrJkC","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I think we can add a memory selector esil command, that takes the value from a register or immediate and passes it to configure \"whatever\" externally to the esil vm with a new callback. That can look like this:\r\n\r\n```\r\n65a114000000   mov eax, dword gs:[0x14]\r\nnow its: 0x14,[4],rax,=\r\n```\r\n\r\nbut it shuold be:\r\n```\r\n0x14,gs,@=,[4],rax,=\r\n```\r\n\r\nthis can be also useful for iobanks. so.. maybe we can setup the segments as different iobanks configured.","createdAt":"2022-04-18T22:48:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19086#issuecomment-1101830402","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5BrJ0H","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Maybe we need two commands, one for temporal iobank selection (gets discarted after reading the memory. or keeps working after change. This can be useful for emulating syscalls by doing a context switch exposing the kernel memory instead of userspace layout. I would say `@@=` and `@=` but maybe something like `BANK` or easier for the reader.","createdAt":"2022-04-18T22:50:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19086#issuecomment-1101831431","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5D2q-g","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"shouldn't that be fs,0x28,+,[8],rax,:=","createdAt":"2022-05-26T10:51:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19086#issuecomment-1138405280","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5NdcN_","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"maybe instead of breaking all the current ops we can make the memory selector as a separate esil command.\r\n\r\n```\r\ngs,@@,0x14,[4],rax,=,0,@@\r\n```\r\n\r\nim proposing `@@` but that could be anything else. the ranalesil struct can keep track of that variable that selects the memory bank or segment to use for reading or writing. this var ir reset after parsing every statement.\r\n\r\nThis could be also an internal var.","createdAt":"2022-11-02T04:47:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19086#issuecomment-1299563391","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs56tYAH","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"depends on https://github.com/radareorg/radare2/pull/22258","createdAt":"2024-04-16T10:03:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19086#issuecomment-2058715143","viewerDidAuthor":true}],"number":19086,"title":"Segment registers not honored on ESIL"},{"body":"## Description\r\n\r\n*Please describe what are you missing or wanting to be improved*\r\nRecently I read a new syntax coloring technique for programing languages. Instead of highlighting grammar, highlight the things you are likely to mistake. So make sure `strcpy` and `strncpy` are easily distinguishable by their color. It would be cool to apply this to immediate values in assembly and the `?` command.\r\n\r\nFor example, it is difficult to distinguish between 0x9d343f8b318614d1 and 0x9d345f8b318614d1. I don't even read that number all the way when I see it, I won't recognize it if I see it again later in code. If later the result of a math operation (from `?` cmd) is 0x9d343f8b318614d1, I won't remember the significance of the number. Applying a unique color to similar numbers would help the user remember if they had seen the number before. It would make it easy to see if the same number is used a lot in large chunks of code, or if numbers vary slightly.\r\n\r\nInitial implementation could just be a simple hash of the immediate, then index that value from an accepted color space.\r\n\r\n** If anyone knows the article I am speaking of, please link it. I can't find it anymore and I would like them to receive credit for the idea.\r\n","comments":[{"id":"IC_kwDOAEpMrs5Q41Vn","author":{"login":"hlee131"},"authorAssociation":"NONE","body":"Could I take this issue? If so, could I get some pointers on which files I should be looking at to implement this? Also, what's the build process like during development? Should I be running `sys/install.sh` after every change I make? ","createdAt":"2022-12-19T04:22:01Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19003#issuecomment-1357075815","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5RUq2v","author":{"login":"swoops"},"authorAssociation":"COLLABORATOR","body":"@hlee131  Yeah, feel free to take it.\r\n\r\nOnce you use `sys/install.sh` once, you *should* just be able to run `make` for each of your updates.\r\n\r\nNot sure where to start. I imagine pointer printing is all over the place. I would open `/bin/ls` like you are going to reverse it, find the first pointer you see in your normal reversing processes and figure out what printed that code. It should be a `r_cons_printf` so you might break on that.\r\n\r\nSorry I can't be of more help there.\r\n","createdAt":"2022-12-23T22:52:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/19003#issuecomment-1364372911","viewerDidAuthor":false}],"number":19003,"title":"Unique coloring for similar immediates"},{"body":"## Environment\r\n\r\n```\r\nThu Aug 12 10:55:14 AM CEST 2021\r\nradare2 5.4.0-git 26622 @ linux-x86-64 git.5.4.0-git\r\ncommit: 078714d0b22c6cc2bfc66e3cb18439842a2046e4 build: 2021-08-12__10:29:54\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\nWhen debugging a AARCH64 binary the register x0 cannot be modified.\r\n\r\nThe attached [ldp.zip](https://github.com/radareorg/radare2/files/6974122/ldp.zip) file contains a compiled binary for this architecture which can be used to launch a qemu to reproduce the bug:\r\n\r\n`qemu-aarch64-static -singlestep -g 1234  binary`\r\n\r\nOn another shell, launch radare2 with the desired backend (gdb-multiarch or aarch64-linux-gnu-gdb)\r\n\r\n`r2 -e asm.arch=arm -e asm.bits=64 -e bin.cache=true  -D gdb-multiarch gdb://127.0.0.1:1234`\r\n\r\nThen attempt to modify the value of the `x0` register the register is not updated \r\n\r\n```\r\n[0x00400078]> dr x0\r\n0x00000000\r\n[0x00400078]> dr x0=1\r\n0x00000000 ->0x00000001\r\n[0x00400078]> dr x0\r\n0x00000000\r\n```\r\n\r\nIf the same is performed on `x1` register, the register gets updated\r\n\r\n```\r\n[0x00400078]> dr x1\r\n0x00000000\r\n[0x00400078]> dr x1=1\r\n0x00000000 ->0x00000001\r\n[0x00400078]> dr x1\r\n0x00000001\r\n```\r\n\r\nBy capturing the traffic on the loopback interface it is possible to confirm that the command is not even being sent to the debugger when attempting to set the `x0` register. (see [wireshark.zip](https://github.com/radareorg/radare2/files/6974230/wireshark.zip))\r\n\r\nI have added a capture of the normal flow using gdb-multiarch alone to show what would be expected\r\n[r2_gdb.zip](https://github.com/radareorg/radare2/files/7139252/r2_gdb.zip)\r\n\r\n\r\n[ldp.zip](https://github.com/radareorg/radare2/files/6974122/ldp.zip)\r\n[wireshark.zip](https://github.com/radareorg/radare2/files/6974230/wireshark.zip)","comments":[{"id":"IC_kwDOAEpMrs5qUVhy","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Is this still happening? We have now the sysgdb:// io which may also work","createdAt":"2023-10-28T06:05:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18975#issuecomment-1783715954","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5rfq5v","author":{"login":"4z0x"},"authorAssociation":"CONTRIBUTOR","body":"Still happening according to my test today.\r\nDid not test the sysgdb io yet","createdAt":"2023-11-09T09:28:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18975#issuecomment-1803464303","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5rqAdr","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"<img width=\"1394\" alt=\"Screenshot 2023-11-10 at 18 54 47\" src=\"https://github.com/radareorg/radare2/assets/6431515/4eb68f63-7eaf-4336-9e99-9b07d6136b96\">\r\n i can repro, didnt had time to test until now","createdAt":"2023-11-10T17:55:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18975#issuecomment-1806174059","viewerDidAuthor":true}],"number":18975,"title":"Cannot set X0 register while debugging AARCH64"},{"body":"## Environment\r\n\r\n```sh\r\nMon Aug  2 11:53:42 UTC 2021\r\nradare2 5.4.0-git 26605 @ linux-x86-64 git.5.4.0-git\r\ncommit: 23119004b7fe82dbad8f9bf9c7213ae4ee64ebdb build: 2021-08-02__11:37:13\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nRadare2's analysis somehow manages to assign the wrong address offsets to variables in a Microsoft x64 executable. \r\n\r\nHere is the disassembly of a function in objdump (pay attention to the **first four lines**):\r\n\r\n```\r\nobjdump -M intel -d ms64_params.exe | grep '1400382e0:' --after 20\r\n   1400382e0:\t44 89 4c 24 20       \tmov    DWORD PTR [rsp+0x20],r9d\r\n   1400382e5:\t44 89 44 24 18       \tmov    DWORD PTR [rsp+0x18],r8d\r\n   1400382ea:\t89 54 24 10          \tmov    DWORD PTR [rsp+0x10],edx\r\n   1400382ee:\t89 4c 24 08          \tmov    DWORD PTR [rsp+0x8],ecx\r\n   1400382f2:\t55                   \tpush   rbp\r\n   1400382f3:\t57                   \tpush   rdi\r\n   1400382f4:\t48 81 ec e8 00 00 00 \tsub    rsp,0xe8\r\n   1400382fb:\t48 8d 6c 24 20       \tlea    rbp,[rsp+0x20]\r\n   140038300:\t48 8d 0d fc 8c 08 00 \tlea    rcx,[rip+0x88cfc]        # 0x1400c1003\r\n   140038307:\te8 e5 c9 ff ff       \tcall   0x140034cf1\r\n   14003830c:\t44 8b 8d f0 00 00 00 \tmov    r9d,DWORD PTR [rbp+0xf0]\r\n   140038313:\t44 8b 85 e8 00 00 00 \tmov    r8d,DWORD PTR [rbp+0xe8]\r\n   14003831a:\t8b 95 e0 00 00 00    \tmov    edx,DWORD PTR [rbp+0xe0]\r\n   140038320:\t48 8d 0d 71 7c 06 00 \tlea    rcx,[rip+0x67c71]        # 0x14009ff98\r\n   140038327:\te8 87 b2 ff ff       \tcall   0x1400335b3\r\n   14003832c:\tb8 ef cd 9a 78       \tmov    eax,0x789acdef\r\n   140038331:\t48 8d a5 c8 00 00 00 \tlea    rsp,[rbp+0xc8]\r\n   140038338:\t5f                   \tpop    rdi\r\n   140038339:\t5d                   \tpop    rbp\r\n   14003833a:\tc3                   \tret    \r\n```\r\nNow, here's the disassembly of that same function in radare2 (again, look at the **first four lines** of instructions):\r\n\r\n```\r\n[0x140033e91]> pdf @ loc.1400382e0\r\n            ; CODE XREF from fcn.140033e73 @ 0x140033e73\r\nâ”œ 91: loc.1400382e0 (int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4);\r\nâ”‚           ; var int64_t var_c8h @ rbp+0xc8\r\nâ”‚           ; var int64_t var_20h_2 @ rsp+0x20\r\nâ”‚           ; var int64_t var_8h @ rsp+0x100\r\nâ”‚           ; var int64_t var_10h @ rsp+0x108\r\nâ”‚           ; var int64_t var_18h @ rsp+0x110\r\nâ”‚           ; var int64_t var_20h @ rsp+0x118\r\nâ”‚           ; arg int64_t arg1 @ rcx\r\nâ”‚           ; arg int64_t arg2 @ rdx\r\nâ”‚           ; arg int64_t arg3 @ r8\r\nâ”‚           ; arg int64_t arg4 @ r9\r\nâ”‚           0x1400382e0      44894c2420     mov dword [var_20h], r9d   ; arg4\r\nâ”‚           0x1400382e5      4489442418     mov dword [var_18h], r8d   ; arg3\r\nâ”‚           0x1400382ea      89542410       mov dword [var_10h], edx   ; arg2\r\nâ”‚           0x1400382ee      894c2408       mov dword [var_8h], ecx    ; arg1\r\nâ”‚           0x1400382f2      55             push rbp\r\nâ”‚           0x1400382f3      57             push rdi\r\nâ”‚           0x1400382f4      4881ece80000.  sub rsp, 0xe8\r\nâ”‚           0x1400382fb      488d6c2420     lea rbp, [var_20h_2]\r\nâ”‚           0x140038300      488d0dfc8c08.  lea rcx, [0x1400c1003]\r\nâ”‚           0x140038307      e8e5c9ffff     call fcn.140034cf1\r\nâ”‚           0x14003830c      448b8df00000.  mov r9d, dword [var_18h]\r\nâ”‚           0x140038313      448b85e80000.  mov r8d, dword [var_10h]\r\nâ”‚           0x14003831a      8b95e0000000   mov edx, dword [var_8h]\r\nâ”‚           0x140038320      488d0d717c06.  lea rcx, str._d__d__d      ; 0x14009ff98 ; \"%d %d %d\"\r\nâ”‚           0x140038327      e887b2ffff     call fcn.1400335b3\r\nâ”‚           0x14003832c      b8efcd9a78     mov eax, 0x789acdef\r\nâ”‚           0x140038331      488da5c80000.  lea rsp, [var_c8h]\r\nâ”‚           0x140038338      5f             pop rdi\r\nâ”‚           0x140038339      5d             pop rbp\r\nâ””           0x14003833a      c3             ret\r\n```\r\nLook at the first line, `mov dword [var_20h], r9d`. In radare2, `var_20h`  is `rsp+0x118`, which is **wrong**. It's really supposed to be `rsp+0x20` (shadow space), as you can see from the objdump output.\r\n\r\nThis is a pretty grievous error. It can be quite confusing to see the registers being spilled into who knows where instead of into shadow space, like they're supposed to.\r\n\r\nBy the way, I found a similar issue in Ghidra, in case that's useful. Ghidra also displays the variable addresses wrong after analysis, but in the main function.\r\n\r\n## Test\r\n\r\nSource code:\r\n\r\n```\r\n#include <stdio.h>\r\n\r\nlong test(int a, int b, int c, int d, int e, int f, int g, int h, int i, int j) {\r\n  printf(\"%d %d %d\", a, b, c);\r\n  return 0x0123456789acdef;\r\n}\r\n\r\nint main() {\r\n  test(1,2,3,4,5,6,7,8,9,10);\r\n}\r\n```\r\n\r\nCompiled in **Visual Studio Community 2019**, as a **static executable**, using the standard Microsoft x64 calling convention (probably in debug mode).\r\n\r\nI've attached the executable, which produces the error.\r\n[ms64_params.zip](https://github.com/radareorg/radare2/files/6916709/ms64_params.zip)\r\n\r\n\r\n","comments":[{"id":"IC_kwDOAEpMrs41J6-D","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"This is a known issue and i think there are other issues tracking the same problem for other use cases. rewriting all the var analysis logic its in my plans after the current release. So hopefully i'll be able to catch up on this soon. thanks for the testcase and example!","createdAt":"2021-08-03T12:07:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/18962#issuecomment-891793283","viewerDidAuthor":false}],"number":18962,"title":"Variables use wrong address offsets in Microsoft x64 executable."},{"body":"## Description\r\n\r\n*Please describe what are you missing or wanting to be improved*\r\n\r\nWhen I am using radare2, the code analysis to destroy methodically any drm of a virus is very slow. You first have to localize and patch any call to suspicious system functions. You also need to know these all.\r\n\r\nExample : \r\n-flag ptrace call in linux.\r\n-flag anti-debug tricks in windows such as IsDebuggerPresent call See https://docs.microsoft.com/en-us/windows/win32/api/debugapi/nf-debugapi-isdebuggerpresent\r\n\r\nTo answer to these two issues I plan to write a c script to flag (put a flag) on any suspicious call to libc in linux or to system call in windows.\r\n\r\n*Provide images, ascii-art, test files and anything that may help us understand your request*\r\n\r\nThis work should be written in a specific repo or in the r2 code itself. Anyway we have to code a specific place to store script in order to call these with the command `-I`.\r\n\r\n\r\nIf you think this is a good idea. Let me know it and assign me to this issue please.\r\n","comments":[],"number":18930,"title":"write a script to automatically localize and flag any virus code analysis protection"},{"body":"## Environment\r\n\r\n```\r\nSaturday 17 July 2021 12:14:15 PM CEST\r\nradare2 5.4.0-git 26734 @ linux-x86-64 git.5.4.0-git\r\ncommit: 346d457b335ceadd313d7a417700f5b8c842ded9 build: 2021-07-17__12:10:32\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nAfter trying to set a watchpoint using `dbw <addr> rw` and listing all breakpoints using `db`. The output shows normal breakpoints as valid and watchpoints as invalid (they're never triggered from what I have observed). \r\nThe watchpoints for the memory locations are listed as invalid whereas the memory locations. \r\n\r\nBelow is the screenshot of output of db command and data at desired memory locations:\r\n![image](https://user-images.githubusercontent.com/11855299/126033828-672ae369-129b-4e1f-8b75-ac50fe66945c.png)\r\n\r\nI'm not sure if there's a lapse in my understanding of the output of db command or am I doing something wrong when setting the watchpoint. \r\n\r\nPlease suggest.\r\n","comments":[],"number":18910,"title":"Debugger - Invalid Watchpoint for memory locations with valid data"},{"body":"## Description\r\nAllow `iz` and `izz` commands to show only requested type of the strings:\r\n- a for ascii\r\n- u for unicode\r\n- w for wide strings\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDg1ODQ4NjYzNw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Bear in mind that now rbin supports cfg.charset for a larger set of encodings like for gameboy roms or MVS objects with ebcdic37, so there must be also a way to specify the full name for the encoding. maybe `iz:pokered` or `iz:utf8` and such","createdAt":"2021-06-10T09:58:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18821#issuecomment-858486637","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs43qr7U","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I think we should just use rtable in cbin","createdAt":"2021-10-04T23:39:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18821#issuecomment-933936852","viewerDidAuthor":true}],"number":18821,"title":"Add arguments for iz and izz to show only ascii unicode or wide strings"},{"body":"## Environment\r\n\r\n```sh\r\nK 09 june 2021 13:27:48 EEST\r\nradare2 5.3.0 26438 @ linux-x86-64 git.5.3.0\r\ncommit: 7a2b03d4c50f5b6ccadd1951311088397776914e build: 2021-06-08__18:28:36\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nOutput of running radare2 with analysis:\r\n\r\n```\r\nr2 -A ./systemv_params \r\n[Cannot find basic block for switch case at 0x00437023 bbdelta = 30\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Finding and parsing C++ vtables (avrr)\r\n[ ] Type matching analysis for all functions (aaft)\r\n```\r\n\r\nI'd expect the `Cannot find basic block for switch case at 0x00437023 bbdelta = 30` error not to exist.\r\n\r\n## Test\r\n\r\n[params.zip](https://github.com/radareorg/radare2/files/6623136/params.zip)\r\n\r\nCompile the params.c file or use the attached static file:\r\n\r\n```\r\ngcc -static ./params.c -o systemv_params\r\n```\r\n\r\nAnalyze it with radare:\r\n\r\n```\r\nr2 -A ./systemv_params \r\n```\r\n","comments":[{"id":"IC_kwDOAEpMrs44z_uI","author":{"login":"bobbyhaliwela"},"authorAssociation":"NONE","body":"I got similar issue to this one. I compiled busybox with gcc with optimization -O2, and the process goes on forever. When i ended the process, it says:\r\n\r\n```\r\nCannot find basic block for switch case at 0x00060c06 bbdelta = 16\r\nCannot find basic block for switch case at 0x00061c3c bbdelta = 3\r\n```\r\n\r\nThis only happens with optimization level -O2 and -O3 for busybox alone. Busybox compiled with -O0 and -O1 are fine. I've  also compiled some other projects with four optimization level and they are fine.","createdAt":"2021-10-27T17:32:44Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18816#issuecomment-953154440","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs4_XqHD","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"it's a warning, probably a false positive or a jump table wrongly handled. do you have a real problem with that jump table issue or its just the warning that anoys you?\r\n\r\nfor 5.7.x i plan to refactor all the error message handling logic, so this message will be hidden under `anal.verbose`. but still i think its a good idea to take a look at the code and see if its analyzing the switch case properly","createdAt":"2022-03-09T17:18:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18816#issuecomment-1063166403","viewerDidAuthor":true}],"number":18816,"title":"Error: Cannot find basic block for switch case at 0x00437033 bbdelta = 30"},{"body":"## Environment\r\n\r\n```sh\r\nT 08 june 2021 18:39:32 EEST\r\nradare2 5.3.0 26438 @ linux-x86-64 git.5.3.0\r\ncommit: 7a2b03d4c50f5b6ccadd1951311088397776914e build: 2021-06-08__18:28:36\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nGetting \"Invalid address\" messages when analyzing executable. Very similar to [this issue](https://github.com/radareorg/radare2/issues/18525), but cannot get the segfault anymore.\r\n\r\nOutput:\r\n\r\n```\r\nr2 -A -d ./cdecl_params_float\r\nProcess with PID 141746 started...\r\n= attach 141746 141746\r\nbin.baddr 0x08048000\r\nUsing 0x8048000\r\nasm.bits 32\r\nglibc.fc_offset = 0x00148\r\n[Invalid address from 0x080a7271ith sym. and entry0 (aa)\r\nInvalid address from 0x080a3d36\r\nInvalid address from 0x080a3d9d\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[Invalid address from 0x0804a4b7\r\nInvalid address from 0x0804a5f1\r\nInvalid address from 0x0804ae4a\r\nInvalid address from 0x0804b56d\r\nInvalid address from 0x0804b5cb\r\nInvalid address from 0x0804b5e7\r\nInvalid address from 0x0804b900\r\nInvalid address from 0x0804bba0\r\nInvalid address from 0x0804bd1b\r\nInvalid address from 0x0804bfef\r\nInvalid address from 0x0804bffd\r\nInvalid address from 0x0804c04c\r\nInvalid address from 0x0804c097\r\nInvalid address from 0x0804c3a6\r\nInvalid address from 0x0804c3b4\r\nInvalid address from 0x0804c43f\r\nInvalid address from 0x0804c44d\r\nInvalid address from 0x0804c4df\r\nInvalid address from 0x0804c4ed\r\nInvalid address from 0x0804c6c4\r\nInvalid address from 0x0804c703\r\nInvalid address from 0x0804c78e\r\nInvalid address from 0x0804c7e5\r\nInvalid address from 0x0804c910\r\nInvalid address from 0x0804c967\r\nInvalid address from 0x0804d036\r\nInvalid address from 0x0804d1a6\r\nInvalid address from 0x08050834\r\nInvalid address from 0x080545e6\r\nInvalid address from 0x08054bbe\r\nInvalid address from 0x08057287\r\nInvalid address from 0x0805732b\r\nInvalid address from 0x0805d691\r\nInvalid address from 0x0805d81c\r\nInvalid address from 0x0805d9a5\r\nInvalid address from 0x0805dad3\r\nInvalid address from 0x0805ea97\r\nInvalid address from 0x0805ec5a\r\nInvalid address from 0x0805edc5\r\nInvalid address from 0x0805ef96\r\nInvalid address from 0x0805f167\r\nInvalid address from 0x0805f2f6\r\nInvalid address from 0x080750bf\r\nInvalid address from 0x08075231\r\nInvalid address from 0x0807e61e\r\nInvalid address from 0x0808629b\r\nInvalid address from 0x080862e0\r\nInvalid address from 0x0808646b\r\nInvalid address from 0x080865ac\r\nInvalid address from 0x08086628\r\nInvalid address from 0x08086874\r\nInvalid address from 0x080868c1\r\nInvalid address from 0x08091f3c\r\nInvalid address from 0x0809226e\r\nInvalid address from 0x08094c7a\r\nInvalid address from 0x08094d30\r\nInvalid address from 0x08096f33\r\nInvalid address from 0x0809e5dd\r\nInvalid address from 0x0809e6dd\r\nInvalid address from 0x0809e7bc\r\nInvalid address from 0x0809eb17\r\nInvalid address from 0x0809f07a\r\nInvalid address from 0x0809f0d8\r\nInvalid address from 0x0809f1cf\r\nInvalid address from 0x0809f250\r\nInvalid address from 0x0809f2c0\r\nInvalid address from 0x0809f438\r\nInvalid address from 0x0809f86d\r\nInvalid address from 0x0809f8df\r\nInvalid address from 0x080a6f2e\r\nInvalid address from 0x080a6f99\r\nInvalid address from 0x080a70cb\r\nInvalid address from 0x080a710f\r\nInvalid address from 0x080a7271\r\nInvalid address from 0x080a72b3\r\nInvalid address from 0x080a7347\r\nInvalid address from 0x080a738a\r\nInvalid address from 0x080a73bb\r\nInvalid address from 0x080a8581\r\nInvalid address from 0x080a864a\r\nInvalid address from 0x080a8673\r\nInvalid address from 0x080a86da\r\nInvalid address from 0x080a9d7e\r\nInvalid address from 0x080a9e16\r\nInvalid address from 0x080a9e42\r\nInvalid address from 0x080a9fbf\r\nInvalid address from 0x080aa3f9\r\nInvalid address from 0x080aa48b\r\nInvalid address from 0x080aa4c7\r\nInvalid address from 0x080aa4eb\r\nInvalid address from 0x080aa7e5\r\nInvalid address from 0x080aa806\r\nInvalid address from 0x080aa87c\r\nInvalid address from 0x080aa9c7\r\nInvalid address from 0x080aab1a\r\nInvalid address from 0x080aab8b\r\nInvalid address from 0x080aaba6\r\nInvalid address from 0x080ab08e\r\nInvalid address from 0x080ab252\r\nInvalid address from 0x080ab74b\r\nInvalid address from 0x080ab78b\r\nInvalid address from 0x080ab843\r\nInvalid address from 0x080ab883\r\nInvalid address from 0x080afacd\r\nInvalid address from 0x080b1a3e\r\nInvalid address from 0x080b1a6d\r\nInvalid address from 0x080b1b9c\r\nInvalid address from 0x080b1bcb\r\nInvalid address from 0x080b1c80\r\nInvalid address from 0x080b1cc3\r\nInvalid address from 0x080b1d36\r\nInvalid address from 0x080b1e78\r\nInvalid address from 0x080b1ec0\r\nInvalid address from 0x080b1fa6\r\nInvalid address from 0x080b2483\r\nInvalid address from 0x080b257f\r\nInvalid address from 0x080b27af\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Finding and parsing C++ vtables (avrr)\r\n[x] Skipping type matching analysis in debugger mode (aaft)\r\n[x] Propagate noreturn information (aanr)\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\n -- In r2land usability is treated as a bug\r\n[0x08049b80]> exit\r\nDo you want to quit? (Y/n) y\r\nDo you want to kill the process? (Y/n) y\r\n```\r\n\r\nI would expect to not see those \"Invalid address\" messages.\r\n\r\n## Test\r\n\r\n[cdecl_params_float.zip](https://github.com/radareorg/radare2/files/6617909/cdecl_params_float.zip)\r\n\r\nCompile the C file with (or use the one in the zip): \r\n\r\n```\r\ngcc -m32 -static ./cdecl_params_float.c -o cdecl_params_float\r\n```\r\n\r\nDebug the executable with analysis:\r\n\r\n```\r\nr2 -A -d ./cdecl_params_float\r\n```\r\n","comments":[{"id":"IC_kwDOAEpMrs5Zeue9","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I think this was solved some time ago, can you confirm?","createdAt":"2023-04-09T22:29:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18815#issuecomment-1501226941","viewerDidAuthor":true}],"number":18815,"title":"Invalid Address when analyzing executable"},{"body":"```\r\n$ r2 -a arm -b64 -\r\nwx f30f1ef8fd7b01a9fd430091fd7b41a9e00313aaf30742f8c0035fd6\r\naap\r\naaef\r\nafvx\r\npdf\r\n```\r\n\r\n![Screenshot 2021-05-31 at 21 04 35](https://user-images.githubusercontent.com/6431515/120232430-db2a7900-c253-11eb-9de0-f268d0dddc21.png)\r\n\r\nthat's how ghidra analises this function:\r\n\r\n![Screenshot from 2021-05-31 21-21-12](https://user-images.githubusercontent.com/917142/120233543-5a20b100-c256-11eb-8d2d-d8e649b5a4d4.png)\r\n\r\nHopper fails to decompile this function not sure about ida or binary ninja.. but i'm afraid this function makes not much sense without context, but still the analysis should take care of this at low level\r\n\r\nIDA does it wrong too:\r\n\r\n```c\r\nint __cdecl main(int argc, const char **argv, const char **envp)\r\n{\r\n  int v3; // w19\r\nâ€‹\r\n  return v3;\r\n}\r\n```\r\n![IMAGE 2021-06-01 13:16:09](https://user-images.githubusercontent.com/6431515/120314435-88949f80-c2db-11eb-8419-68de6d818b25.jpg)\r\n\r\n----\r\n\r\nSo it seems to be that the function is not a generic one.\r\n\r\n* x29 is the frame pointer.. would be nice if capstone could show `fp` instead\r\n* x29 and x30 in this case are stored and restored in local variables\r\n* x19 register is saved and restored to keep the value for the caller\r\n* x19 is returned in x0, without applying any change to it.\r\n\r\nWonder where this code snippet was taken from :D but still i think this function takes 1 arg and have 2 vars, so neither r2 (before or after) neither ghidra do it right\r\n\r\nHere's the binary i cooked for testing this \r\n[hello-ios-arm64.zip](https://github.com/radareorg/radare2/files/6572047/hello-ios-arm64.zip)\r\n\r\n","comments":[],"number":18788,"title":"ARM64 var analysis issue"},{"body":"Most files specify the respective license in the first line, but is is unclear if \"LGPL\" means \"only version 3\" or \"or any later version\"\r\n\r\nSee also https://github.com/radareorg/radare2/issues/12504","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDg1MTY2OTgxMw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I think it's safer to be \"only version 3\" in case future versions of gpl came out the code license will be modified without the author's will. which is somewhat wrong imho. I think Linus had the same complains when gpl3 was out.\r\n\r\nabout #12504 I'm aware of it and tried to address the issue by documenting all the code files and licenses in `doc/license.md` and improved the json output of the `rasm2 -Lj` `r2 -Lj` ... to report license and allow to use r2pipe to verify all licenses contained in the build if needed.\r\n\r\nBecause i think what really matters here is the licenses found in the sourced LINKED into the final binary and libraries. And not what's being distributed (yes, this is important, but all licenses used in r2 have no distribution restrictions iirc).\r\n\r\nBSD systems use to have global variables on each .c containing a string with the copyright statement and license used. This is useful for finding out which licenses are used in binary builds of programs. We could do the same, but that means bigger builds and tedious changes here and there to preserve unused globals around many .c files.","createdAt":"2021-05-31T20:20:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18777#issuecomment-851669813","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs42_R9b","author":{"login":"thymol0"},"authorAssociation":"CONTRIBUTOR","body":"The [License Text](https://www.gnu.org/licenses/lgpl-3.0.txt) says:\r\n> If the Library as you\r\nreceived it does not specify a version number of the GNU Lesser\r\nGeneral Public License, you may choose any version of the GNU Lesser\r\nGeneral Public License ever published by the Free Software Foundation.\r\n\r\nSo practically speaking any file without a specific license number is as if it said or \"any later\".\r\n\r\nI will not touch any GPL code in my projects that doesn't have the \"or later\" phrase, I have come across GPLv2 only software that I couldn't use because one can be sued for combining GPLv2 only software with GPLv3, so your code becomes effectively worthless. Since you mentioned Linus, I have no problem saying that he is an idiot. If he had re-licensed the kernel to GPLv3 the world would be a better place today. Or better if the GPL was automatically compatible with later versions that would solve remove the problem, which RMS said at fosdem one year that he would do in the future if there is a new license, especially after seeing that GPLv2 software becomes as good as as proprietary to GPLv3 software.\r\n\r\nAll of that being said my favorite license for sharing is public domain, copyright is restrictive which is not in the spirit of sharing.","createdAt":"2021-09-19T23:53:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18777#issuecomment-922558299","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs42_TcF","author":{"login":"thymol0"},"authorAssociation":"CONTRIBUTOR","body":"In my opinion the best practice is to ask new contributors to not specify any specific version of the GPL for new files, because that makes it compatible with GPL versions both forward and backward, for instance you can even use it with GPLv1 if such thing even exists. Most contributors in fact are happy to share under any license or under public domain, you just need to ask at the time of their contribution and explain that their contribution will be sharable with more people if they do so.","createdAt":"2021-09-20T00:24:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18777#issuecomment-922564357","viewerDidAuthor":false}],"number":18777,"title":"License - LGPL-3.0-only or LGPL-3.0-or-later?"},{"body":"## Magic Breakpoint\r\n\r\nHey! I will really appreaciate if someone might implement \"magic breakpoint\" similar to Bochs Internal Debugger\r\n\r\nBochs (config file)\r\n`magic_break: enabled=1`\r\n\r\nHow it should work:\r\n  - if magic breakpoint is enabled\r\n  - and inside the binary file there is CPU instruction like \r\n\r\n`xchg bx,bx`\r\n\r\nRadare should stop executing further code and show actual state of CPU (registers, memory, assembly)\r\n\r\nIt might  really helps us to get inside some specific functions at some behavior.\r\n\r\n![image](https://user-images.githubusercontent.com/53617677/118254483-70371f00-b4ab-11eb-8d08-611aab4a478d.png)\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDg0MTg0MjkyMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Uhm, from what i read a magic breakpoint is just something tied to the emulator internals that handles a nop instruction as a breakpoint, so the app wont contain real breakpoints, but the debugger can take them as is.\r\n\r\nI can think on two ways to solve this:\r\n\r\n* Method 1: patching in memory\r\n\r\n```\r\nwa int3 @@/ad xchg ebx, ebx\r\n```\r\n\r\n* Method 2: Step tracing\r\n\r\nDebug-step-until-disasm matches the given  expression.\r\n```\r\ndsui xchg ebx, ebx\r\n```","createdAt":"2021-05-16T16:46:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18693#issuecomment-841842920","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg0Mzk3NjEzNQ==","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"`e magic_break enabled=1` could be nice. I will check what I can do. I just need time.","createdAt":"2021-05-19T10:39:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HOORAY","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/18693#issuecomment-843976135","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg0NTE5NjYzOQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"You need something more than time to fix this. Let me explain:\r\n\r\n* `e magic_break enabled`is not a valid eval var name and its just confusing. better go for `e dbg.bpmagic` or so\r\n* magic breakpoints ONLY work when you have control of the CPU itself. r2 debugger is an userland debugger . so its FAR from being able to do this\r\n* You can use magic breakpoints already when using the bochs:// plugin\r\n* I have suggested two approaches to achieve the same, but require manual work because those are just not going to work well without human review.\r\n","createdAt":"2021-05-20T14:57:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18693#issuecomment-845196639","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDg0NTIyNDI5MA==","author":{"login":"CorruptedByCPU"},"authorAssociation":"NONE","body":">     * magic breakpoints ONLY work when you have control of the CPU itself. r2 debugger is an userland debugger . so its FAR from being able to do this\r\n\r\nI'm using Qemu + gdb + r2, so it might work :)","createdAt":"2021-05-20T15:31:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18693#issuecomment-845224290","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg0NTI1MjY0MQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"you will need to modify qemu to support magic breakpoints. qemu JIT works by basicblocks, so you dont have instruction accuracy. it's a BOCHS specific feature","createdAt":"2021-05-20T16:08:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18693#issuecomment-845252641","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDg0NTkyOTg2OQ==","author":{"login":"CorruptedByCPU"},"authorAssociation":"NONE","body":"Hmm...\r\n\r\nbut ... let's say I stop the virtual machine and execute the command (shortcut?) in r2 to scavenge all memory from address X up to size of Y bytes for corresponding Z instruction and put the software breakpoint there automatically :) is it possible to implement?\r\n\r\nexample:\r\n\r\n```\r\n  -- Have you ever ordered a pizza using radare2?\r\n  [0x0000fff0]> dba 0x100000 0x2000 \"xchg ebx,ebx\"\r\n  found magic breakpoint \"xchg ebx,ebx\" at: 0x101623 (registered)\r\n  [0x0000fff0]> db\r\n  0x00101623 - 0x00101624 1 --x sw break enabled valid cmd=\"\" cond=\"\" name=\"0x101623\" module=\"\"\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/53617677/119139913-d7bd1380-ba43-11eb-9904-f91ce2d99ff6.png)\r\n","createdAt":"2021-05-21T12:54:20Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18693#issuecomment-845929869","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg0NjQ2Njk5NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Of course, as i said in my previous response this is the way to go. But then those breakpoints are not magic :D\n\nYou can use db $$@@/ad xchg ebx,ebx\n\nAnd youâ€™ll get all the breakpoints set\n\n> \n> On 21 May 2021, at 14:54, Andrzej Adamczyk ***@***.***> wrote:\n> \n> ï»¿\n> Hmm...\n> \n> but ... let's say I stop the virtual machine and execute the command (shortcut?) in r2 to scavenge all memory from address from X up to size of Y bytes for corresponding Z instruction and put the software breakpoint there automatically :) is it possible to implement?\n> \n> example:\n> \n>   -- Have you ever ordered a pizza using radare2?\n>   [0x0000fff0]> dba 0x100000 0x2000\n>   found magic breakpoint \"xchg ebx,ebx\" at: 0x101623 (registered)\n>   [0x0000fff0]> db\n>   0x00101623 - 0x00101624 1 --x sw break enabled valid cmd=\"\" cond=\"\" name=\"0x101623\" module=\"\"\n> \n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2021-05-22T21:42:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18693#issuecomment-846466995","viewerDidAuthor":false}],"number":18693,"title":"Magic Breakpoint"},{"body":"## Environment\r\n\r\n```\r\nThu May 13 09:11:15 PM CEST 2021\r\nradare2 5.2.1 0 @ linux-x86-64 git.5.2.1\r\ncommit: unknown build: 2021-04-26__23:00:17\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nI expect radare2 to resolve syscalls even in debug mode.\r\n\r\n## Test\r\n\r\n1. Create a simplified example binary to analyze:\r\n\r\n```\r\n$ cat hello.asm \r\n          global    _start\r\n\r\n          section   .text\r\n_start:   mov       rax, 1                  ; system call for write\r\n          mov       rdi, 1                  ; file handle 1 is stdout\r\n          mov       rsi, message            ; address of string to output\r\n          mov       rdx, 13                 ; number of bytes\r\n          syscall                           ; invoke operating system to do the write\r\n          mov       rax, 60                 ; system call for exit\r\n          xor       rdi, rdi                ; exit code 0\r\n          syscall                           ; invoke operating system to exit\r\n\r\n          section   .data\r\nmessage:  db        \"Hello, World\", 10      ; note the newline at the end\r\n```\r\n\r\n```\r\n$ nasm -felf64 hello.asm && ld hello.o && ./a.out\r\nHello, World\r\n```\r\n\r\n2. Let radare2 resolve the syscalls of this a.out in static analysis mode:\r\n\r\n```\r\n$ r2 -A a.out\r\n[...]\r\n[0x00401000]> e asm.emu=1\r\n[0x00401000]> pdf\r\n[...]\r\nâ”‚           0x00401019      0f05           syscall                     ; 1 = write (1, \"Hello, World...................................................\", 13)\r\n[...]\r\nâ””           0x00401023      0f05           syscall                     ; 60 = exit (0)\r\n```\r\n\r\nGood, this is what i expected.\r\n\r\n3. Let radare2 resolve the syscalls of this a.out in debug mode:\r\n\r\n```\r\n[0x00401000]> ood\r\n[...]\r\n[0x00401000]> pdf\r\n[...]\r\nâ”‚           0x00401019      0f05           syscall                     ; 59 = execve (\"...............................................................\", \"...............................................................\", \"...............................................................\")\r\n[...]\r\nâ””           0x00401023      0f05           syscall                     ; 59 = execve (\"...............................................................\", \"...............................................................\", \"...............................................................\")\r\n```\r\n\r\nBad, this execve for any syscall looks off.\r\n\r\n4. Lets run it:\r\n\r\n```\r\n[0x00401000]> db 0x00401019\r\n[0x00401000]> dc\r\nhit breakpoint at: 0x401019\r\n[0x00401019]> pdf\r\n[...]\r\nâ”‚           0x00401019 b    0f05           syscall                     ; -1 = unknown ()\r\n[...]\r\nâ””           0x00401023      0f05           syscall                     ; -1 = unknown ()\r\n```\r\n\r\nBad, this -1 for any syscall looks off.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDg2NDkwMzE3Mg==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"This is probably caused by the abuse of RAnal->esil instance, the pd loop may have its own instance so it doesnt affect the debugging session which in some cases its tied to native reg and non-cached io. Should be easy to fix but requires some refactoring in disasm.c","createdAt":"2021-06-21T09:59:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18691#issuecomment-864903172","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs41CVjw","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"![Screenshot 2021-07-30 at 12 37 18](https://user-images.githubusercontent.com/6431515/127641230-9a7e863c-8ade-46c6-85b7-679dbd2605d2.png)\r\n","createdAt":"2021-07-30T10:37:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18691#issuecomment-889805040","viewerDidAuthor":true}],"number":18691,"title":"syscall resolving doesnt work in debug mode"},{"body":"## Environment\r\n\r\nThu May  6 01:42:57 CEST 2021\r\nrabin2 5.3.0-git 26252 @ linux-x86-64 git.5.2.1\r\ncommit: 51e890ca3e496f2aad6b293efbdd1441a892f9e7 build: 2021-05-04__20:27:48\r\nLinux x86_64\r\n\r\n## Description\r\n\r\nWhen running rabin -P (show debug/pdb information) the members field  of all types is always an empty list and the following message is displayed:\r\n\r\nparse_tpi_streams(): unsupported leaf type: 0x1609\r\n\r\n## Test\r\n\r\nwget http://msdl.microsoft.com/download/symbols/ntkrnlmp.pdb/BDBCB929E503FD2ACC1D8F9F95B79E401/ntkrnlmp.pdb\r\nrabin2 -Pj ntkrnlmp.pdb\r\n","comments":[],"number":18661,"title":"unsupported leaf type: 0x1609"},{"body":"## Description\r\n\r\nI absolutely adore visual panel mode, it is pure brilliancy, but what would be incredibly nice would be to have the ability to either change the views of Graph panel (in visual panel mode) the way you can in Visual Graph mode with `p/P`, or simply just add a panel for Graph with Offsets which makes it easier to debug etc.\r\nAlso i noticed there is no Disassemble with Offsets either which should also be added I believe.\r\n\r\nThis setup would be perfect here imo with offsets able to be added\r\n![image](https://user-images.githubusercontent.com/35006332/116000050-a6743380-a5bc-11eb-98b3-8820ad1d5654.png)\r\n\r\nWould look like this but within a panel\r\n![image](https://user-images.githubusercontent.com/35006332/116000069-bee44e00-a5bc-11eb-8474-5bcab8de5518.png)\r\n\r\nI think y'all get the point haha. Thanks so much!","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDgyNjM1MTIzMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"just set graph.offset=true in your settings\n\n> On 25 Apr 2021, at 17:55, Shadorain ***@***.***> wrote:\n> \n> \n> Description\n> \n> I absolutely adore visual panel mode, it is pure brilliancy, but what would be incredibly nice would be to have the ability to either change the views of Graph panel (in visual panel mode) the way you can in Visual Graph mode with p/P, or simply just add a panel for Graph with Offsets which makes it easier to debug etc.\n> Also i noticed there is no Disassemble with Offsets either which should also be added I believe.\n> \n> This setup would be perfect here imo with offsets able to be added\n>  <https://user-images.githubusercontent.com/35006332/116000050-a6743380-a5bc-11eb-98b3-8820ad1d5654.png>\n> Would look like this but within a panel\n>  <https://user-images.githubusercontent.com/35006332/116000069-bee44e00-a5bc-11eb-8474-5bcab8de5518.png>\n> I think y'all get the point haha. Thanks so much!\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/18631>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FUGBTHYSDTXZRCBSZTTKQ3PTANCNFSM43RNE6SQ>.\n> \n\n","createdAt":"2021-04-25T16:28:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/18631#issuecomment-826351233","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgyNjM1NjkwMg==","author":{"login":"Shadorain"},"authorAssociation":"CONTRIBUTOR","body":"Ooh awesome! I figured it was simple, should have looked there first instead of commands.\r\nDo you know if there is a way to switch those views? (like in Visual Graph mode)\r\nWill close if not.","createdAt":"2021-04-25T17:11:04Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18631#issuecomment-826356902","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgyNjM2MDE0MA==","author":{"login":"Shadorain"},"authorAssociation":"CONTRIBUTOR","body":"Im wondering if it could be done with some sort of alias/macro that you can press it visual mode that toggles `e graph.offset=...`\r\nIf that makes sense^","createdAt":"2021-04-25T17:34:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18631#issuecomment-826360140","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgyNjcxMTY4NQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Yes this could be added easily, the main problem is deciding the right approach for panels where most keys are used for window manipualtion and such, any proposal to improve panels usability?","createdAt":"2021-04-26T10:19:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/18631#issuecomment-826711685","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDgyNjcxNDU1Nw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i think it makes sense to add this option in one of those two options:\r\n\r\n* add a menu entry to toggle this option and refresh the panels containing a graph\r\n* add another graph panel entry with this option set\r\n\r\nThis would be less keybinding disruptive at least..","createdAt":"2021-04-26T10:23:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18631#issuecomment-826714557","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDgyNjc4NTg1Nw==","author":{"login":"Shadorain"},"authorAssociation":"CONTRIBUTOR","body":"> Yes this could be added easily, the main problem is deciding the right approach for panels where most keys are used for window manipualtion and such, any proposal to improve panels usability?\r\n\r\nSure i have an idea! \r\nEither 1: In Window mode (`w`) instead of having the normal Visual Pane `p/P` have in window mode it change the modes\r\nOr 2: Click enter on the pane to enlarge it then open the `p/P` keys to it to change the modes (like in Visual Graph)\r\n\r\nWould these be ideal ways of doing it? not sure, would need to be documentation to show this as well but I think it could work","createdAt":"2021-04-26T12:12:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18631#issuecomment-826785857","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgyNjc4NzMyOQ==","author":{"login":"Shadorain"},"authorAssociation":"CONTRIBUTOR","body":"Yeh so to your approaches \r\n- That would be interesting! Never thought of that, I was thinking more modal binds (i use too much vim lol)\r\n- That was my original idea but I think everyone could benefit from many different changeable views instead of changing the entire panel setup (in turn making them resave their layout)","createdAt":"2021-04-26T12:15:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18631#issuecomment-826787329","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg2NDc5NDE0MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Do you want to implement one of those proposals?","createdAt":"2021-06-21T07:21:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18631#issuecomment-864794141","viewerDidAuthor":false}],"number":18631,"title":"Add \"Graph with Offsets\" to Visual/Panel mode"},{"body":"https://github.com/vmactions/freebsd-vm","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDgyMjkzMTU1Mg==","author":{"login":"koobs"},"authorAssociation":"NONE","body":"See also Cirrus CI, which generously provides CI free for OpenSource projects. Don't hesitate to reach out if you need tips/pointers","createdAt":"2021-04-20T02:44:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18597#issuecomment-822931552","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgyMzkyMDYzNQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Im quite interesting into having r2 in CI building for freebsd, netbsd and openbsd. I am setting up a build farm at home, and i tried to simplify the current CI to just use GHA for maintainance reasons. if someone is willing to submit a PR adding the cirrus CI for freebsd it will be good to go. i can add the settings needed in the r2 side.\r\n\r\nDo you know if its possible run net and open in cirrus? maybe using an emulation layer on top of freebsd?\r\n\r\nthanks","createdAt":"2021-04-21T09:29:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18597#issuecomment-823920635","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDgyMzk3MjA2Nw==","author":{"login":"koobs"},"authorAssociation":"NONE","body":"Cirrus supports OS's that provide images in GCE, and I see open issues for at least requesting OpenBSD support (so, not yet it seems).\n\nI'll try to organise a PR adding Cirrus/FreeBSD for you, and I also provide FreeBSD buildbot workers for several upstream incl Python, and would be happy to provide one for you too. Just let me know if that would be valuable.","createdAt":"2021-04-21T10:58:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18597#issuecomment-823972067","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgyMzk3MzM3OA==","author":{"login":"koobs"},"authorAssociation":"NONE","body":"OpenBSD and NetBSD on FreeBSD via bhyve may be possible, but likely not the least amount of long-term maintenance. I'd reco GHA+Cirrus+lightweight CI (like buildbot) you run (or a SaaS), where people can provide remote workers for other OS's ","createdAt":"2021-04-21T11:01:04Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18597#issuecomment-823973378","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgyMzk5MjYxNA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"That sounds perfect! looking forward your PR. btw just curious about which versions of freebsd are supported in cirrus :? i think some people would be interested in testing r2 on some old versions too.","createdAt":"2021-04-21T11:37:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18597#issuecomment-823992614","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDgyNDQzMjI0OQ==","author":{"login":"koobs"},"authorAssociation":"NONE","body":"> \r\n> \r\n> That sounds perfect! looking forward your PR. btw just curious about which versions of freebsd are supported in cirrus :? i think some people would be interested in testing r2 on some old versions too.\r\n\r\nAll supported branches (currently 11.x, 12,x 13,x) + development branch (14-CURRENT), but the basis is whichever our (FreeBSD's) release engineering push to GCE. I can make any specific requests for other versions if and when necessary, including for !x86 archs if supported in GCE","createdAt":"2021-04-21T23:35:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18597#issuecomment-824432249","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgyNjE1NjY4Nw==","author":{"login":"meme"},"authorAssociation":"CONTRIBUTOR","body":"Have you considered sr.ht: https://man.sr.ht/builds.sr.ht/compatibility.md? It supports FreeBSD and OpenBSD","createdAt":"2021-04-24T21:36:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18597#issuecomment-826156687","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg1NzQyNDI1MQ==","author":{"login":"devnexen"},"authorAssociation":"CONTRIBUTOR","body":"seems to have been removed since ? not criticized it but as I try to find CI for openbsd wanted to know the legitimate concern about sr ht.","createdAt":"2021-06-09T06:35:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18597#issuecomment-857424251","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg1ODU1MzIxNQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Yes. it was removed in 3a5c35f68fc610c6862676488d4e0d347ec3006a because it was no longer working because the account wasn't created by me so i couldnt access. could be added back and im totally +1 for it","createdAt":"2021-06-10T11:48:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/18597#issuecomment-858553215","viewerDidAuthor":true}],"number":18597,"title":"Add FreeBSD CI"},{"body":"## Description\r\n\r\nIn there are some situations, in which the node that should be deleted is already found from a previous search,\r\nr_rbtree_delete or r_rbtree_cont_delete in these situations perform unnecessary search.","comments":[],"number":18491,"title":"Implement r_rbtree_node_delete and r_rbtree_cont_node_delete"},{"body":"## Description\r\n\r\n*Please describe what are you missing or wanting to be improved*\r\n\r\nI would like to be able to redirect input to a process to a specific filedescriptor number,\r\nas in  `./binary 123< input_file` where the content of `input_file` is written into filedescriptor `123` of the process\r\n\r\nThis feature seems to be missing in rarun2.\r\n\r\nIf i understand this properly, the function `handle_redirection_proc` in libr/socket/run.c would need to be more general\r\n\r\n*Provide images, ascii-art, test files and anything that may help us understand your request*\r\n\r\nhttps://tldp.org/LDP/abs/html/io-redirection.html","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc5OTMyNDQ5MQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"That should be easy to implement, Do you want to give it a try? i think this only makes sense on UNIX systems. See libr/socket/run.c if you want to impelment it there. you are correct in your file assumptions :)","createdAt":"2021-03-15T10:58:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18445#issuecomment-799324491","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDgwMDY2MzM0MA==","author":{"login":"badgateway666"},"authorAssociation":"NONE","body":"Sure, i will try!\r\nI can't promise anything, but this seems like a great excuse to learn some stuff =)","createdAt":"2021-03-16T22:48:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18445#issuecomment-800663340","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgwMDY2Nzg0MQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Yay :) ping me up on the chat or here in case you need any guidance","createdAt":"2021-03-16T22:59:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18445#issuecomment-800667841","viewerDidAuthor":true}],"number":18445,"title":"rarun2 should interact with more filedescriptors than stdin, stdout and stderr"},{"body":"## Environment\r\n\r\n```sh\r\n$ date\r\nMon Mar  1 20:26:13 CET 2021\r\n$ r2 -v\r\nradare2 5.1.1 29003 @ darwin-x86-64 git.5.1.1\r\ncommit: 0fc7cf35168e0fc646749747efd84b1cec6c228d build: 2021-02-11__12:40:06\r\n$ uname -ms\r\nDarwin x86_64\r\n```\r\n\r\n## Description\r\nMy goal is to set a breakpoint into libsystem_c --> sysctl function for which I need to get an address. The target application is a macOS (Catalina 10.15.7) application running on my Intel MacBook Pro. I am following the [memory map documentation](https://radare.gitbooks.io/radare2book/content/debugger/memory_maps.html):\r\n\r\n1. sudo r2 -d targetApp\r\n```sh\r\n= attach 9532 9532\r\nbin.baddr 0x100764000\r\nUsing 0x100764000\r\nasm.bits 64\r\n```\r\n2. dcu entry0\r\nContinue until 0x1007e88a0 using 1 bpsize\r\nhit breakpoint at: 0x1007e88a0\r\n3. dmm | grep libsystem_c.dylib\r\n0x7fff6a350000 0x7fff6a351000  /usr/lib/system/libsystem_c.dylib\r\n4. dmS libsystem_c.dylib\r\n```sh\r\n[Sections]\r\n\r\nnth paddr          size vaddr             vsize perm name\r\nâ€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•\r\n0   0x00001b4c  0x7e492 0x7fff6a351b4c  0x7e492 -r-x libsystem_c.dylib.0.__TEXT.__text\r\n1   0x0007ffde    0x654 0x7fff6a3cffde    0x654 -r-x libsystem_c.dylib.1.__TEXT.__stubs\r\n2   0x00080634    0xa9c 0x7fff6a3d0634    0xa9c -r-x libsystem_c.dylib.2.__TEXT.__stub_helper\r\n3   0x000810d0   0x2358 0x7fff6a3d10d0   0x2358 -r-x libsystem_c.dylib.3.__TEXT.__const\r\n4   0x00083430   0x3a17 0x7fff6a3d3430   0x3a17 -r-x libsystem_c.dylib.4.__TEXT.__cstring\r\n5   0x00086e50     0x5e 0x7fff6a3d6e50     0x5e -r-x libsystem_c.dylib.5.__TEXT.__oslogstring\r\n6   0x00086eb0   0x1114 0x7fff6a3d6eb0   0x1114 -r-x libsystem_c.dylib.6.__TEXT.__unwind_info\r\n7   0x00087fc8     0x38 0x7fff6a3d7fc8     0x38 -r-x libsystem_c.dylib.7.__TEXT.__eh_frame\r\n8   0x00088000      0x8 0x7fff6a3d8000      0x8 -rw- libsystem_c.dylib.8.__DATA.__nl_symbol_ptr\r\n9   0x00088008     0x68 0x7fff6a3d8008     0x68 -rw- libsystem_c.dylib.9.__DATA.__got\r\n10  0x00088070    0x870 0x7fff6a3d8070    0x870 -rw- libsystem_c.dylib.10.__DATA.__la_symbol_ptr\r\n11  0x000888e0   0x18b0 0x7fff6a3d88e0   0x18b0 -rw- libsystem_c.dylib.11.__DATA.__const\r\n12  0x0008a190     0x40 0x7fff6a3da190     0x40 -rw- libsystem_c.dylib.12.__DATA.__crash_info\r\n13  0x0008a1d0   0x1bc1 0x7fff6a3da1d0   0x1bc1 -rw- libsystem_c.dylib.13.__DATA.__data\r\n14  0x0008bd98   0x1978 0x7fff6a3dbd98   0x1978 -rw- libsystem_c.dylib.14.__DATA.__constrw\r\n15  0x00000000      0x0 0x7fff6a3dd710   0x2538 -rw- libsystem_c.dylib.15.__DATA.__bss\r\n16  0x00000000      0x0 0x7fff6a3dfc48     0x68 -rw- libsystem_c.dylib.16.__DATA.__common\r\n```\r\n5. s 0x7fff6a350000; x\r\n```\r\n- offset -       0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x7fff6a350000  cffa edfe 0700 0001 0300 0000 0600 0000  ................\r\n0x7fff6a350010  1e00 0000 900b 0000 8500 1082 0000 0000  ................\r\n0x7fff6a350020  1900 0000 c802 0000 5f5f 5445 5854 0000  ........__TEXT..\r\n0x7fff6a350030  0000 0000 0000 0000 0000 3667 ff7f 0000  ..........6g....\r\n0x7fff6a350040  0080 0800 0000 0000 0000 3647 0000 0000  ..........6G....\r\n0x7fff6a350050  0080 0800 0000 0000 0500 0000 0500 0000  ................\r\n0x7fff6a350060  0800 0000 0000 0000 5f5f 7465 7874 0000  ........__text..\r\n0x7fff6a350070  0000 0000 0000 0000 5f5f 5445 5854 0000  ........__TEXT..\r\n0x7fff6a350080  0000 0000 0000 0000 4c1b 3667 ff7f 0000  ........L.6g....\r\n0x7fff6a350090  92e4 0700 0000 0000 4c1b 3647 0200 0000  ........L.6G....\r\n0x7fff6a3500a0  0000 0000 0000 0000 0004 0080 0000 0000  ................\r\n0x7fff6a3500b0  0000 0000 0000 0000 5f5f 7374 7562 7300  ........__stubs.\r\n0x7fff6a3500c0  0000 0000 0000 0000 5f5f 5445 5854 0000  ........__TEXT..\r\n0x7fff6a3500d0  0000 0000 0000 0000 deff 3d67 ff7f 0000  ..........=g....\r\n0x7fff6a3500e0  5406 0000 0000 0000 deff 3d47 0100 0000  T.........=G....\r\n0x7fff6a3500f0  0000 0000 0000 0000 0804 0080 0000 0000  ................\r\n```\r\n6. dmi.\r\n```sh\r\n[Symbols]\r\n\r\nnth paddr      vaddr          bind   type size lib name\r\nâ€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•\r\n582 0x0013efc0 0x7fff6a48efc0 GLOBAL FUNC 0        boost::integral_constant<bool, true>::operator mpl_::bool_<true> const&() const::pdata\r\n```\r\n7. dmi libsystem_c.dylib\r\nreturns nothing\r\n8. dmi 0x7fff6a350000\r\nreturns an wrong address segment (0x7fff6a43d1c0 , 0x7fff6a444f40) to which 0x7fff6a350000 is not belonging to:\r\n```sh\r\n[Symbols]\r\n\r\nnth  paddr      vaddr          bind   type size lib name\r\nâ€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•\r\n0    0x000ed1c0 0x7fff6a43d1c0 GLOBAL FUNC 0        isascii(int)\r\n...\r\n4842 0x000f4f40 0x7fff6a444f40 LOCAL  FUNC 0        func.1000f4f40\r\n```\r\n9. dmi 0x7fff6a350000 | grep -i sysctl\r\nreturns nothing\r\n\r\n## Analysis of /usr/lib/system/libsystem_c.dylib\r\n1. r2 -AA /usr/lib/system/libsystem_c.dylib\r\n```sh\r\n[Invalid address from 0x00022f87ith sym. and entry0 (aa)\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Check for objc references\r\n[x] Check for vtables\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Propagate noreturn information\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\n[Invalid address from 0x000daf87\r\n[x] Finding function preludes\r\n[x] Enable constraint types analysis for variables\r\n```\r\n2. iS\r\n```sh\r\n[Sections]\r\n\r\nnth paddr          size vaddr         vsize perm name\r\nâ€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•\r\n0   0x00001b4c  0x7e492 0x00001b4c  0x7e492 -r-x 0.__TEXT.__text\r\n1   0x0007ffde    0x654 0x0007ffde    0x654 -r-x 1.__TEXT.__stubs\r\n2   0x00080634    0xa9c 0x00080634    0xa9c -r-x 2.__TEXT.__stub_helper\r\n3   0x000810d0   0x2358 0x000810d0   0x2358 -r-x 3.__TEXT.__const\r\n4   0x00083430   0x3a17 0x00083430   0x3a17 -r-x 4.__TEXT.__cstring\r\n5   0x00086e50     0x5e 0x00086e50     0x5e -r-x 5.__TEXT.__oslogstring\r\n6   0x00086eb0   0x1114 0x00086eb0   0x1114 -r-x 6.__TEXT.__unwind_info\r\n7   0x00087fc8     0x38 0x00087fc8     0x38 -r-x 7.__TEXT.__eh_frame\r\n8   0x00088000      0x8 0x00088000      0x8 -rw- 8.__DATA.__nl_symbol_ptr\r\n9   0x00088008     0x68 0x00088008     0x68 -rw- 9.__DATA.__got\r\n10  0x00088070    0x870 0x00088070    0x870 -rw- 10.__DATA.__la_symbol_ptr\r\n11  0x000888e0   0x18b0 0x000888e0   0x18b0 -rw- 11.__DATA.__const\r\n12  0x0008a190     0x40 0x0008a190     0x40 -rw- 12.__DATA.__crash_info\r\n13  0x0008a1d0   0x1bc1 0x0008a1d0   0x1bc1 -rw- 13.__DATA.__data\r\n14  0x0008bd98   0x1978 0x0008bd98   0x1978 -rw- 14.__DATA.__constrw\r\n15  0x00000000      0x0 0x0008d710   0x2538 -rw- 15.__DATA.__bss\r\n16  0x00000000      0x0 0x0008fc48     0x68 -rw- 16.__DATA.__common\r\n```\r\n\r\n3. afl \r\n```sh\r\n0x000b8000    1 1            int.000b8000\r\n0x00081104    1 2            sym._ld_weak_os10.11__basename_r\r\n0x00081101    1 1            sym._ld_weak_os10.11__clock_getres\r\n...\r\n0x00136f38    5 154          fcn.00136f38\r\n```\r\n4. afl | grep sysctl\r\n```sh\r\n0x0002b7c4   40 398          sym._sysctl\r\n0x0002b9a0    9 253          sym._sysctlbyname\r\n0x0002ba9d    3 128          sym._sysctlnametomib\r\n0x000800d4    1 6            sym.imp.__sysctl\r\n0x000800da    1 6            sym.imp.__sysctlbyname\r\n```\r\n\r\n## Conclusion\r\nIt looks like r2 is not parsing the memory map, where libsystem_c.dylib is loaded by an macOS application, correctly. A reason for this might be those \r\n```sh\r\nInvalid address from 0x00022f87\r\nInvalid address from 0x000daf87\r\n```\r\nif r2 runs directly on libsystem_c.dylib.\r\n\r\nOr maybe I am missing something - any hints/help would be very appreciated.\r\n\r\n## Additional information\r\nA breakpoint set to libsystem_c.dylib address + sym._sysctl offset: \r\n```sh\r\ndb 0x7fff6a350000 + 0x0002b7c4\r\ndc\r\n```\r\ngot hit:\r\n```sh\r\nhit breakpoint at: 0x7fff6a37b7c4\r\n```\r\nbut I am not sure if I am really in sysctl function.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc4ODg1ODYyNw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i can confirm the issue, its weird, but should be easy to fix. as a workaround you can do:\r\n\r\n[0x7fff6f301000]> .!rabin2 -B 0x7fff6f301000 -rE /usr/lib/system/libsystem_c.dylib\r\n\r\n","createdAt":"2021-03-02T12:01:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18400#issuecomment-788858627","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc4ODg4ODMzNg==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I pushed this workaround https://github.com/radareorg/radare2/pull/18410, this will work for now, but a proper fix may come later when i have some more spare time","createdAt":"2021-03-02T12:55:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18400#issuecomment-788888336","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc4ODkwMjU1NQ==","author":{"login":"siarsky"},"authorAssociation":"NONE","body":"The workaround you have proposed:\r\n\r\n```sh\r\n[0x7fff6f301000]> .!rabin2 -B 0x7fff6f301000 -E /usr/lib/system/libsystem_c.dylib\r\n```\r\n\r\ndoes not work and returns nothing. Only if it runs without \"!\" it calls the external rabin2:\r\n```sh\r\n[0x7fff6f301000]> .rabin2 -B 0x7fff6f301000 -E /usr/lib/system/libsystem_c.dylib\r\n<result_list>\r\n```\r\n\r\nbut the result cannot be filtered:\r\n\r\n```sh\r\n[0x7fff6f301000]> .rabin2 -B 0x7fff6f301000 -E /usr/lib/system/libsystem_c.dylib ~ sysctl\r\n<result_list_grep_sysctl>\r\n```\r\n\r\nmeaning <result_list> is equal to <result_list_grep_sysctl>. If I do\r\n\r\n```sh\r\n[0x7fff6f301000]> .rabin2 -B 0x7fff6f301000 -E /usr/lib/system/libsystem_c.dylib | grep -i sysctl\r\n```\r\n\r\nterminal hangs.\r\n\r\n## Conclusion\r\nIt is better to call rabin2 externally on Mac and make manual calculation for a dynamic base address till a final fix is delivered.","createdAt":"2021-03-02T13:18:45Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18400#issuecomment-788902555","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc4ODk2NDI3Nw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"The . prefix means: execute the output of the command as r2 commands. so yes it works. just check the flags","createdAt":"2021-03-02T14:52:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18400#issuecomment-788964277","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc4ODk2NTE4NA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"about filtering, yes it works too. but you are using the command wrongly.\r\n\r\nyou have to use !! as prefix to rabin2 instead of ., !! is like ! (escape to shell) but buffering all the output and printing it via rcons. so you can use | grep and ~\r\n\r\nand yes hanging the terminal is expected when you grep something that have no input","createdAt":"2021-03-02T14:53:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18400#issuecomment-788965184","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc4OTA3MDE4Nw==","author":{"login":"siarsky"},"authorAssociation":"NONE","body":"I am interpreting probably the \"flags\" wrongly... as you can see in the PS, I see no difference after applying the workaround... \r\ndmi libsystem_c.dylib returns nothing\r\ndmi 0x7fff6e17d000 returns a wrong address area in which no sysctl function exists.\r\n\r\nCould you maybe drop a word more what \"flags\" I should check and how?\r\n\r\n```sh\r\n$ sudo r2 -d targetApp\r\n= attach 44969 44969\r\nbin.baddr 0x10d5cc000\r\nUsing 0x10d5cc000\r\nasm.bits 64\r\n[0x116679584]> dcu entry0\r\nContinue until 0x10d6508a0 using 1 bpsize\r\nhit breakpoint at: 0x10d6508a0\r\n[0x10d6508a0]> dmm | grep libsystem_c.dylib\r\n0x7fff6e17d000 0x7fff6e17e000  /usr/lib/system/libsystem_c.dylib\r\n[0x10d6508a0]> .!rabin2 -B 0x7fff6e17d000 -rE /usr/lib/system/libsystem_c.dylib\r\n[0x10d6508a0]> dmi libsystem_c.dylib\r\n[0x10d6508a0]> dmi 0x7fff6e17d000\r\n[Symbols]\r\n\r\nnth  paddr      vaddr          bind   type size lib name\r\nâ€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•\r\n0    0x000ed1c0 0x7fff6e26a1c0 GLOBAL FUNC 0        isascii(int)\r\n...\r\n4842 0x000f4f40 0x7fff6e271f40 LOCAL  FUNC 0        func.1000f4f40\r\n\r\n[0x10d6508a0]> dmi 0x7fff6e17d000 | grep -i sysctl\r\n[0x10d6508a0]>\r\n```","createdAt":"2021-03-02T17:17:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18400#issuecomment-789070187","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc4OTA3NTg0Ng==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"projects dont work with debugger mode, so PS wont do anything here.\r\n\r\nflags are named offsets. just type f, and see the output after running the .!rabin -rEB 0x7... /usr/lib line","createdAt":"2021-03-02T17:26:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18400#issuecomment-789075846","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc4OTIzMzEwMw==","author":{"login":"siarsky"},"authorAssociation":"NONE","body":"1. I am confirming the workaround works - thx for explanation\r\n```sh\r\nsudo r2 -d targetApp\r\n= attach 56464 56464\r\nbin.baddr 0x10be50000\r\nUsing 0x10be50000\r\nasm.bits 64\r\n[0x10cf9061e]> dcu entry0\r\nContinue until 0x10bed48a0 using 1 bpsize\r\nhit breakpoint at: 0x10bed48a0\r\n[0x10bed48a0]> dmiv | grep libsystem_c.dylib\r\n0x7fff6e17d000 0x7fff6e17e000  /usr/lib/system/libsystem_c.dylib\r\n[0x10bed48a0]> .!rabin2 -B 0x7fff6e17d000 -rE /usr/lib/system/libsystem_c.dylib\r\n[0x10bed48a0]> s 0x7fff6e17d000\r\n[0x7fff6e17d000]> f | grep -i sysctl\r\n0x7fff6e1a87c4 0 sym._sysctl\r\n0x7fff6e1a89a0 0 sym._sysctlbyname\r\n0x7fff6e1a8a9d 0 sym._sysctlnametomib\r\n```\r\n\r\n2. I am just curious what do you mean by \r\n - \"projects dont work with debugger mode\": Am I using a project somewhere in my commands? I cannot identify anything like this... what are you referencing? Or is a project an application with dynamic libraries?\r\n - \"PS wont do anything here\" - what is PS? Do you mean the \"dmi\" command? \r\n\r\nI just want to understand your \"radare2\" language.\r\n\r\nPS:\r\nThanks for \"!!command\" - a very useful piece of knowledge - working smoothly with grep/~","createdAt":"2021-03-02T21:33:30Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18400#issuecomment-789233103","viewerDidAuthor":false}],"number":18400,"title":"Cannot get symbols from libsystem_c.dylib on macOS"},{"body":"Hi,\r\nI'm just wondering if there's some way for selecting/ marking the visited edges in the disassembly graph while doing code traversal. What happens is when the control flow is too big to fit on one screen or even when there are too many jumps/ calls to a particular code block, it gets pretty difficult to keep track of what's already visited and whats not. \r\n\r\nI can't find any help from the documentation regarding the same.\r\n\r\nInputs are appreciated.\r\n  ","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc4Njk4MDA4NA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"You can set a color for the basic blocks, not for the edges yet. Do this work for you?","createdAt":"2021-02-27T01:38:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-786980084","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc4NzA0MDI1OQ==","author":{"login":"rhythmize"},"authorAssociation":"NONE","body":"Hi,\r\nIt'll work in a linear flow, but in case where we have different edges coming into the same block, it'll not be possible to backtrace the previous block or distinguish among which edge we came through or already traversed.\r\n\r\nI hope it makes sense.","createdAt":"2021-02-27T09:01:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-787040259","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc4NzQxNzYyMQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Yep totally makes sense to me. I have opened a pr with an initial implementation for this feature. Feel free to try it out. Ill close this issue when merged","createdAt":"2021-02-28T08:41:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-787417621","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc4NzQzMDAzNg==","author":{"login":"rhythmize"},"authorAssociation":"NONE","body":"Sure.\r\nThanks a lot.","createdAt":"2021-02-28T10:29:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-787430036","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc4NzQ2ODY4Mg==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Check the new ageh command. works well when the graph is properly generated, i have identified some deep bugs in the way graphs are generated that make this new logic break.. and actually most jump table analysis are wrong because of this. But this will help me to debug and fix it. Thanks! hope it works for you now!\r\n\r\nPD: i will also extend ageh to also highlight the edges in the graphviz output","createdAt":"2021-02-28T15:19:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-787468682","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc4NzQ2OTYyOQ==","author":{"login":"rhythmize"},"authorAssociation":"NONE","body":"Thanks, I'll check.","createdAt":"2021-02-28T15:25:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-787469629","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc4NzQ3NzIzNg==","author":{"login":"rhythmize"},"authorAssociation":"NONE","body":"Hi,\r\nFor the testing sake, I wanted to highlight the edge between block `0xad8` and `0xae3`. The help message shows the command format as \r\n> ageh 0xad8 0xae3\r\n\r\nI see the edge in the list of highlighted edges with property set to `true`, using following command\r\n> ageh\r\n\r\nBut visually there's no difference I can see. Am I missing something?\r\nThanks for your help\r\n\r\n![image](https://user-images.githubusercontent.com/11855299/109425170-be31a000-79ef-11eb-8fe2-e55dd35077ce.png)\r\n","createdAt":"2021-02-28T16:17:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-787477236","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc4NzQ5NzI2Mw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Oh found the bug, fixing now :)","createdAt":"2021-02-28T18:22:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-787497263","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc4NzQ5NzI4MQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"also adding tests","createdAt":"2021-02-28T18:22:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-787497281","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc4NzUwNTMxNQ==","author":{"login":"rhythmize"},"authorAssociation":"NONE","body":"Thanks","createdAt":"2021-02-28T19:11:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-787505315","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc4NzUxMjgxMg==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Fixed your bug in a PR (will merge as soon as it passes the CI), but i found another one that is making some edges not highlightable. But ill need more time to find a proper fix for this, maybe tomorrow.","createdAt":"2021-02-28T20:01:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-787512812","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc4NzUxMzI1Ng==","author":{"login":"rhythmize"},"authorAssociation":"NONE","body":"Hi, yeah sure no worries.\r\nThanks for taking up this issue on such a short notice.","createdAt":"2021-02-28T20:03:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-787513256","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc5ODc4MDE2Mw==","author":{"login":"rhythmize"},"authorAssociation":"NONE","body":"Hi,\r\nJust wanted to update that I was able to successfully test these changes and now I'm able to mark the necessary edges as I need.\r\n\r\nJust another query:  So in visual graph mode, I have noticed that whatever changes I make using command console in radare2 for example, marking an edge or renaming a variable, the changes doesn't reflect immediately, I need to close the graph view and then reopen it so as to be able to see the changes. Is there any workaround for this?\r\nMoreover, I noticed that while adding a comment (using the shortcut key \";\") changes are reflected immediately, but whereas doing the same from command console requires re-opening the graph mode.\r\n\r\nThanks","createdAt":"2021-03-13T20:24:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-798780163","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc5ODc4NzgwOQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"There are two issues to be solved for this issue:\r\n\r\n- long edges use fake nodes to draw the paths which result in non colorized lines in some situations because the split of anal graph and ascii graph which is a little pain to work on.\r\n- the refresh can be done by pressing R key. But other actions refresh the graph so those may work too for u no need to leave and join the graph\r\n\r\nIm currently having some medical issues in the eyes that dont permit me to use any screen for more than few minutes in a row. Otherwise all this stuff would be solved :( i hope to be better in a month but meanwhile i would appreciate contribs or feedback in any case im not forgetting those issues which i hope to get solved soon or late\r\n","createdAt":"2021-03-13T21:23:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-798787809","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc5ODc4NzgzNQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Thanks for the update :)","createdAt":"2021-03-13T21:23:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-798787835","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc5ODg4Nzg3OQ==","author":{"login":"rhythmize"},"authorAssociation":"NONE","body":"Hi,\r\nThanks for information the refresh using R key is working fine for me. \r\nActually, I started using this project recently and really liked it and wanted to contribute to the codebase so I started delving into the codebase, but I wasn't even able to understand the control flow of basic r2 modules. Even developer guide doesn't specifically explain various submodules, or maybe I need to invest more time to make sense of it. It's a pretty mature codebase and seems a bit complicated to directly understand it. Perhaps maybe sometime in future I'd be able to do that once I have enough bandwidth to investigate and contribure to this codebase. \r\n\r\nTake care and thanks for all your help.\r\nCheers!","createdAt":"2021-03-14T11:08:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-798887879","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc5OTYzODI1Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Cool! i have done several presentations and development trainings on how to contribute, understand the modules and extend the codebase, you may find videos in youtube. But usually if you know C, the only thing you need is just `git grep`. You dont need to understand the whole to fix a bug or improve a specific part.\n\nWhich is the question you have? I was thinking in recording some videos or doing quick explanations on some stuff, the problem is that i need to know what's what new contributors struggle with, because for me the whole thing is obvious and maybe i can document/explain better with your feedback.\n\nThanks!\n\n> On 14 Mar 2021, at 12:08, Rhythm Chopra ***@***.***> wrote:\n> \n> \n> Hi,\n> Thanks for information the refresh using R key is working fine for me.\n> Actually, I started using this project recently and really liked it and wanted to contribute to the codebase so I started delving into the codebase, but I wasn't even able to understand the control flow of basic r2 modules. Even developer guide doesn't specifically explain various submodules, or maybe I need to invest more time to make sense of it. It's a pretty mature codebase and seems a bit complicated to directly understand it. Perhaps maybe sometime in future I'd be able to do that once I have enough bandwidth to investigate and contribure to this codebase.\n> \n> Take care and thanks for all your help.\n> Cheers!\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/18374#issuecomment-798887879>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FWMGYDOLXCON4HKQCTTDSKKJANCNFSM4YALZQQQ>.\n> \n\n","createdAt":"2021-03-15T18:13:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-799638256","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc5OTY1NTMzNA==","author":{"login":"rhythmize"},"authorAssociation":"NONE","body":"Yeah, I have good understanding of development in C, although I have worked more with C++, working is C isn't that big a challenge for me. I'll try to find resources on youtube and try to see if I can pickup some small issues to get started with. In case I face some problems or need assistance, I'll definitely ping.\r\n\r\nThanks.","createdAt":"2021-03-15T18:35:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-799655334","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgwMTE1MTY3MQ==","author":{"login":"rhythmize"},"authorAssociation":"NONE","body":"Hi,\r\nI have a very basic question. Since radare2 seems to use the current terminal console as its display window, where are the log messages are being redirected? For example, in order to understand the control flow, if I add a `printf` statements, where is that message being logged, I'm not able to see those messages, since it appears like radare2 output overlays the actual terminal. \r\n\r\nMaybe I have some wrong understanding, in case, please correct me. Or is there any other way that is used by developers to track the control flow at runtime?\r\n\r\nThanks for your inputs.","createdAt":"2021-03-17T14:56:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-801151671","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgwMjA1MDc4MA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"if you use printf debugging in visual mode, the best way to debug that is using eprintf, which print things to stderr and just run r2 with 2> /tmp/log.txt, in another terminal you can tail -f /tmp/log.txt ","createdAt":"2021-03-18T16:05:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/18374#issuecomment-802050780","viewerDidAuthor":true}],"number":18374,"title":"Marking edges on disassembly graph view"},{"body":"## Environment\r\n\r\n```sh\r\n# copypaste this script into your shell and replace it with the output\r\n11.02.2021 18:42:23 +05\r\nradare2 5.1.1 25773 @ linux-x86-64 git.5.1.1\r\ncommit: 7516c079f0e903551574934b3ae428a5e907a101 build: 2021-02-11__16:54:34\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nDebugging windows applications (usermode) via network/pipe.\r\n\r\n## Test\r\n\r\n### Windows side\r\n\r\ncdb.exe -p 1234\r\n\r\n.server tcp:port=5005\r\n\r\n### Linux side\r\n\r\nr2 -d winkd://windows_host:5005\r\n\r\n```Error: Could not open the kdnet\r\n[r] Cannot open 'winkd://10.0.0.64:5005'\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc4NzQ5MjYxMA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"The winkd uri syntax requires a key to be passed, can you try with this:\r\n\r\n```\r\n$ r2 wink'd://?'\r\nUsage: winkd://(host:port:key) | (/tmp/windbg.pipe)\r\n winkd://192.168.1.33:1234:key)  # UDP to host:port:key\r\n winkd:///tmp # pipe - \\\\.\\pipe\\com_1 /tmp/windbg.pipe\r\n[r] Cannot open 'winkd://?'\r\n$\r\n```","createdAt":"2021-02-28T17:57:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18353#issuecomment-787492610","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc4NzgzNTM0Ng==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"I have not any errors if I run `r2 winkd://10.0.0.64:5555:`\r\nBut it doesn't work anyway. It can't send any packets.\r\nWhat is the `key`?","createdAt":"2021-03-01T10:23:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18353#issuecomment-787835346","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc5OTYzMDcxOQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Sorry i dont have much time for this, but i didnt forgot the issue, all i can do is blind guesses by reading the code and spawning a netcat to see what happens, i never used this backend and the last windows i had was the w95. So I totally ignore what's this key parameter (neither a friend of me who does windbg debugging). My guess is that the RSocket API changed its behaviour and the backends using it wrongly are now failing apart.\r\n\r\nDo you have some time for testing some changes in the codebase? I think this week i may have some time for doing those blind fixes and i'll ping you back for testing it again","createdAt":"2021-03-15T18:04:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18353#issuecomment-799630719","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDgwMjU5NzMxOQ==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"Sure. ","createdAt":"2021-03-19T06:45:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18353#issuecomment-802597319","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgwODM4Mjg3Ng==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Enotime yet, sorry, my chaotic life is slowly wrapping up into more spare time, meanwhile I found this interesting article from January using the winkd:// plugin https://hvinternals.blogspot.com/2021/01/hyper-v-debugging-for-beginners-2nd.html check it out","createdAt":"2021-03-26T17:12:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18353#issuecomment-808382876","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDgxNzIzNzk5NA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"From my tests the udp packet is sent. But i dont have the environmwnt to test. I have improved the error messages. And i still see the way it behaves a little confusing. But wont hold the release for it. If someone use windows and wants to give it a try it would be great","createdAt":"2021-04-11T02:48:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18353#issuecomment-817237994","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDgxNzI3MzA2Ng==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"I have managed to do only `radare2 -D winkd winkd://10.0.0.64:50011:1.2.3.4`\r\nIt really sends one UDP packet, but it freeze after starting. So I cant obtain remote debugging session.\r\nI run r2 to Linux machine.","createdAt":"2021-04-11T08:52:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18353#issuecomment-817273066","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgxNzI3NDcwMg==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"Opened kdnet 10.0.0.64:50012:1.2.3.4 with fd 0x5623f5adee70\r\n[freeze here]\r\n[ctrl-c]\r\nCould not connect to winkd","createdAt":"2021-04-11T09:05:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18353#issuecomment-817274702","viewerDidAuthor":false}],"number":18353,"title":"winkd net/pipe supporting"},{"body":"## Environment\r\n\r\n```sh\r\n# copypaste this script into your shell and replace it with the output\r\n$ date\r\nmer. 03 fÃ©vr. 2021 13:24:41 CET\r\n$ radare2 -v\r\nradare2 5.1.0 25632 @ linux-x86-64 git.5.1.0\r\ncommit: ecb6b6477787b7809b96a24993459bfc93025ba3 build: 2021-01-28__02:45:39\r\n$ uname -ms\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\n<!-- Explain what's the issue and what would you expect to see -->\r\nI do not see the console on the radare2 terminal. I expect to see the console of radare2 on the terminal. I mean the [0x00000000]>.\r\n\r\n## Test\r\n\r\n<!-- Steps to reproduce the issue and provide files/links/images/.. -->\r\n\r\n```\r\n$ VisualBoyAdvance -Gtcp pokered.gbc;\r\nVisualBoyAdvance version 1.8.0 [SDL]\r\nSearching for file VisualBoyAdvance.cfg\r\nSearching current directory: /home/ME/MYFOLDERS/pokered\r\nSearching home directory: /home/ME/.vba\r\nSearching system config directory: /etc\r\nReading configuration file.\r\nListening for a connection at port 55555\r\nGot a connection from 127.0.0.1 39546\r\nColor depth: 32\r\nShutting down\r\nClosing remote socket\r\nClosing listen socket\r\n\r\n$ radare2 -d gdb://localhost:55555;\r\ngdb.io.open: Cannot connect to host.\r\nWARNING: r_file_exists: assertion '!R_STR_ISEMPTY (str)' failed (line 192)\r\n[r] Cannot open 'gdb://localhost:55555'\r\n```\r\n\r\n\r\nI also tried with mgba-sdl:\r\n\r\n```\r\n$sudo apt install mgba-sdl;\r\n$mgba --gdb pokered.gbc;\r\n$radare2 -a gb -b 32 -d gdb://localhost:2345;\r\n\r\nCould not resolve address 'localhost' or failed to connect\r\ngdb.io.open: Cannot connect to host.\r\nWARNING: r_file_exists: assertion '!R_STR_ISEMPTY (str)' failed (line 192)\r\ngdbr_get_reg_profile: unsupported x86 bits: 16\r\nWARNING: r_reg_set_profile_string: assertion 'reg && str' failed (line 135)\r\nWARNING: r_reg_set_profile_string: assertion 'reg && str' failed (line 135)\r\nWARNING: r_reg_set_profile_string: assertion 'reg && str' failed (line 135)\r\nWARNING: r_reg_set_profile_string: assertion 'reg && str' failed (line 135)\r\n[r] Cannot open 'gdb://localhost:2345'\r\n```\r\n\r\n\r\nWith no asserts (R2_DEBUG_ASSERT=1) you have :\r\n\r\n```\r\n$ radare2 R2_DEBUG_ASSERT=1 -d gdb://localhost:55555;\r\ngdb.io.open: Cannot connect to host.\r\n[r] Cannot open 'gdb://localhost:55555\r\n```\r\n\r\nfor visual boy advance and you have \r\n```\r\n\r\n$ radare2 R2_DEBUG_ASSERT=1 -a gb -b 32 -d gdb://localhost:2345;Could not resolve address 'localhost' or failed to connect\r\ngdb.io.open: Cannot connect to host.\r\n[r] Cannot open 'gdb://localhost:2345'\r\n```\r\n\r\nfor mgba","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc3NDc4MTEzMA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"environment variables must be defined before the program like this:\r\n\r\n```\r\nR2_DEBUG_ASSERT=1 gdb --args radare2 -a gb -b 32 -d gdb://localhost:2345\r\n```\r\n\r\nwhen you get the gdb prompt type the following commands:\r\n```\r\nrun\r\n.. wait until crash ..\r\ni r\r\nbt\r\nup\r\nup\r\nup\r\n...\r\nprint str \r\n```\r\n\r\nwith this info you may be able to see why this null ptr is reaching the assert and add an if in the caller to avoid this to happen, this is sometimes useful to identify code that is being executed when it shouldnt.","createdAt":"2021-02-07T22:38:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18329#issuecomment-774781130","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc3NDc4NDM2Nw==","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"Thank you very much I will try as soon as possible.","createdAt":"2021-02-07T23:02:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18329#issuecomment-774784367","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgyNjM3NjYxMg==","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"EDIT : I think VisualBoy advance nor mgba supports remote debugging server for gameboy color. They do only support that for gameboy advance.","createdAt":"2021-04-25T19:25:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18329#issuecomment-826376612","viewerDidAuthor":false}],"number":18329,"title":"radare2 does not show console on remote debugging the gameboy"},{"body":"Now that we have esil, a cleaner way to emulate and debug bf would be esil. so maybe we no longer need bfdbg","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc3MDQwMzE2OA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Indeed. But its a simple and friendly plugin to be taken as example when implementing a debug plugin. What about moving to extras? Anyway bfdbg is setting up devices and such too (screen, leyboard..) is there any test for it?","createdAt":"2021-01-31T15:52:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18314#issuecomment-770403168","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc4MDc3MjY2Ng==","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"moving it to extras sounds good","createdAt":"2021-02-17T18:51:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18314#issuecomment-780772666","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5Zeupx","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"That helped us find some really scary bugs in the arch refactoring so imho its a good plugin to keep in order to test debugging and arxh swapping","createdAt":"2023-04-09T22:34:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18314#issuecomment-1501227633","viewerDidAuthor":true}],"number":18314,"title":"Consider dropping bfdbg"},{"body":"***Disclaimer*** This is only my ~10th experience with binary exploitation so apologies in advance if anything I'm asking is overly basic.  I've RTFM every one I could find but let's call it a 'niche' topic.  Thank YOU in advance.\r\n\r\n## Environment\r\n\r\nThu Jan 14 10:15:02 +08 2021\r\nradare2 4.5.1 0 @ linux-x86-64 git.4.5.1\r\ncommit: unknown build: 2020-09-24__20:31:44\r\nLinux x86_64\r\n\r\nBinary: https://tryhackme.com/room/brainstorm\r\n\r\n## Description\r\n\r\nI'm trying to recreate the above buffer overflow but using my new favorite tool radare rather than a VM.\r\n\r\nPayload: \"A\"*2012+\"BBBB\"+\"C\"*300\r\n\r\nWhen running the executable via \r\n\r\n`winedbg chatserver.exe` \r\n\r\nThe stack dump and register values are as expected.\r\n\r\n```\r\nUnhandled exception: page fault on read access to 0x42424242 in 32-bit c\r\node (0x0000000042424242).\r\nRegister dump:\r\n CS:0023 SS:002b DS:002b ES:002b FS:0063 GS:006b\r\n EIP:42424242 ESP:00b4ee60 EBP:41414141 EFLAGS:00010246(  R- --  I  Z- -\r\nP- )\r\n EAX:00b4e680 EBX:0000d192 ECX:00b4e680 EDX:00000000\r\n ESI:00000000 EDI:00000000\r\nStack dump:\r\n0x0000000000b4ee60:  4343434343434343 4343434343434343\r\n0x0000000000b4ee70:  4343434343434343 4343434343434343\r\n0x0000000000b4ee80:  4343434343434343 4343434343434343\r\n0x0000000000b4ee90:  4343434343434343 4343434343434343\r\n0x0000000000b4eea0:  4343434343434343 4343434343434343\r\n0x0000000000b4eeb0:  4343434343434343 4343434343434343\r\n0x0000000000b4eec0:  0000000a43434343 0000000000000000\r\n0x0000000000b4eed0:  0000000000000000 0000000000000000\r\n0x0000000000b4eee0:  0000000000000000 0000000000000000\r\n0x0000000000b4eef0:  0000000000000000 0000000000000000\r\n0x0000000000b4ef00:  0000000000000000 0000000000000000\r\n0x0000000000b4ef10:  0000000000000000 0000000000000000\r\nBacktrace:\r\n=>0 0x0000000042424242 (0x0000000041414141)\r\n0x0000000042424242: -- no code accessible --\r\n```\r\n\r\n\r\n## Test\r\n\r\nWhen running the executable via:\r\n\r\n`r2 -a x86 -b 32 -d winedbg://chatserver.exe`\r\n\r\nthe stack dump only contains 0xffffffff across all values\r\n\r\n```\r\n[0x42424242]> dr\r\neip = 0x42424242\r\nesp = 0x00b4ee60\r\nebp = 0x41414141\r\neflags = 0x00010246\r\neax = 0x00b4e680\r\nebx = 0x0000d1c2\r\necx = 0x00b4e680\r\nedx = 0x00000000\r\nesi = 0x00000000\r\nedi = 0x00000000\r\n[0x42424242]> px 10 @ esp\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x00b4ee60  ffff ffff ffff ffff ff00 \r\n```\r\n\r\nWhen you quit r2, exiting the winedbg process, winedbg dumps the stack trace into a window which contains the expected results with 434343 written across the stack.\r\n\r\nFinally, I initially tried to initially run r2 via GDB using the below commands:\r\n\r\n```\r\nwinedbg --gdb --no-start chatserver.exe\r\nr2 -a x86 -b 32 -d gdb://localhost:xxxxx\r\n```\r\n\r\nHowever, in that example EIP is not overwritten only the CS register is overwritten.\r\n\r\n`[0x0060eefc]> dc\r\n[+] signal 11 aka SIGSEGV received 0\r\n[0x00b4ee60]> dr\r\neax = 0x00b4e680\r\nedx = 0x00b4e680\r\nesp = 0x00000000\r\nesi = 0x0000d5d0\r\neip = 0x00b4ee60\r\ncs = 0x41414141\r\nds = 0x00000000\r\nfs = 0x00000000\r\nfioff = 0x00000000\r\nfooff = 0x00000000\r\nmxcsr = 0x0023ffff\r\n`\r\n\r\nFinally I've attempted to run R2 with aslr=no but that has not made a difference.\r\n\r\nCan anyone explain why r2 doesn't pick up the stack overflow with px @ esp despite it showing in the winedbg stack trace upon exit?\r\n\r\nI also don't know enough about assembly to understand why the register behavior is different with gdb and the CS register.\r\n\r\nBest Regards,\r\n\r\nRob","comments":[],"number":18228,"title":"Different overflow behavior with winedbg / gdb"},{"body":"## Environment\r\n\r\n```sh\r\n# copypaste this script into your shell and replace it with the output\r\ndate\r\nr2 -v\r\nuname -ms\r\n```\r\n\r\n## Description\r\n\r\n<!-- Explain what's the issue and what would you expect to see -->\r\n\r\n## Test\r\n\r\n<!-- Steps to reproduce the issue and provide files/links/images/.. -->\r\n","comments":[],"number":18219,"title":"Set io.unalloc=true and optimize it"},{"body":"## Environment\r\n\r\n```sh\r\n> date\r\nr2 -v\r\nuname -ms\r\nSat Jan  9 09:30:59 PM UTC 2021\r\nradare2 5.0.1-git 25582 @ linux-x86-64 git.5.0.0\r\ncommit: c96f1f64d0cd1bf6dfbabe479925978f4f7894d7 build: 2021-01-09__21:28:20\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nThe `r_core_file_open` expects  `r_core_file_open_many` will return a non-NULL pointer on success. However, `r_core_file_open_many` always returns NULL (and leaks r_list structure). \r\n\r\nI am not really sure what is `r_core_file_open_many` should return. If someone can explain what should happen, I can attempt a fix myself.\r\n\r\n## Test\r\n\r\nZip is the only open many IO plugin I know of. So you can verify zipall does not work.\r\n```\r\n> r2 zipall://out.zip\r\nr_core_bin_load: no file specified\r\n[r] Cannot open 'zipall://out.zip'\r\n```\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc4MDc2ODk2NQ==","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"I guess this requires iobanks for a proper fix","createdAt":"2021-02-17T18:46:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18194#issuecomment-780768965","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5qUVq-","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"That's an abi breaking issue. In case you wanna fix it we are about to end this seasson soon","createdAt":"2023-10-28T06:08:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18194#issuecomment-1783716542","viewerDidAuthor":true}],"number":18194,"title":"r_core_file_open_many is broken"},{"body":"## Environment\r\n\r\nDi 5. Jan 06:23:22 CET 2021\r\nradare2 4.3.1 0 @ linux-x86-64 git.4.3.1\r\ncommit: unknown build: \r\nLinux x86_64\r\n\r\n## Description\r\n\r\nWhen disassembling an AVR binary (in this case for the ATmega328), the addresses in disassembly are incremented by 2 if it's a 16-bit instruction, and by 4 if it's a 32-bit instruction, although the AVR Flash is organized as (n * 16-bit) memory.\r\n\r\n**Expected:** An address increment of 1 if it's a 16-bit opcode and an increment of 2 if it's a 32-bit opcode.\r\n\r\n## Test\r\n\r\n```console\r\nr2 main.bin\r\n```\r\n, where main.bin is an AVR binary.\r\n\r\n![r2bug](https://user-images.githubusercontent.com/46600932/103610992-9d822800-4f21-11eb-824b-d82a163704f8.png)\r\n\r\nAtmega328 contains a 32kBytes Flash which has a range from 0x0000 to 0x3fff. This is only possible if an address represents 2 bytes of memory (0x4000 * 2 = 0x8000, so 32kBytes).\r\n\r\n![flash](https://user-images.githubusercontent.com/46600932/103611030-b094f800-4f21-11eb-85c2-917650749aed.png)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc1NDQ5ODE0Mw==","author":{"login":"karliss"},"authorAssociation":"CONTRIBUTOR","body":"Even though some parts of documentation show addresses in words. SPM and LPM instructions which access flash memory use byte based addressing. So it's possible to have constant tables which are not word aligned.\r\n\r\nOther instructions for saving bits in instruction encoding probably encode addresses as words. But architectures with byte based addressing also do this. The disassembler doesn't need to print numbers exactly as encoded. As different instructions might have different tradeoffs in the encoding.\r\n\r\nI assume that something like intel hex files containing AVR programs also uses byte based addressing.\r\n\r\nSlightly off-topic. I wonder how the tooling in general (not r2) and  constant tables are handled for architectures like PIC with word size that isn't multiple of 8.\r\n\r\nSo as long as all the jumps are resolved correctly and displayed consistently I wouldn't call this wrong as much as it is different view on the same data.\r\n\r\nThat said for ease of comparison with datasheet it might be convenient to have an option for word based address display mode, just like there is an option for relative addresses. ","createdAt":"2021-01-05T08:51:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/18174#issuecomment-754498143","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc1NDU2Mjk4Ng==","author":{"login":"Milo-D"},"authorAssociation":"NONE","body":"> So as long as all the jumps are resolved correctly and displayed consistently I wouldn't call this wrong as much as it is different view on the same data.\r\n\r\nYes, you are right, I assumed that the addressing is implemented as word based addressing ^^ I will edit the issue's title, because, if it's intended as byte address, then there is no real issue (atleast no bug) here. \r\n\r\n> That said for ease of comparison with datasheet it might be convenient to have an option for word based address display mode, just like there is an option for relative addresses.\r\n\r\nThat would be a good idea. So this issue probably belongs to \"Feature Request\", but my life is not depending on this feature, so others have to decide ^^ \r\n\r\nThank you for your respond.","createdAt":"2021-01-05T10:55:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18174#issuecomment-754562986","viewerDidAuthor":false}],"number":18174,"title":"AVR: Byte/Word addressing in disassembly"},{"body":"\r\n## Environment\r\n\r\n```sh\r\n# copypaste this script into your shell and replace it with the output\r\nWednesday, December 30, 2020 23:38:03 CST\r\n\r\nradare2 5.0.1-git 25348 @ linux-x86-64 git.5.0.0\r\ncommit: 4b60f0f2bbab5dd44cc8f4d0a7d17ec511422dd1 build: 2020-12-28__19:04:30\r\n\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\nubuntu uses gdbserver to remotely debug vbox win10 program issues!\r\n\r\nMany functions cannot be used after gdbserver is connectedï¼\r\n\r\nWhat is the problem?\r\n\r\n## Test\r\n\r\nhttps://user-images.githubusercontent.com/37778956/103364075-c8224a00-4af7-11eb-964a-05e671adbe5f.mp4\r\n\r\n","comments":[],"number":18142,"title":"ubuntu uses gdbserver to remotely debug vbox win10 program issues"},{"body":"## Environment\r\n\r\n```sh\r\nWed Dec 30 02:22:55 PM MSK 2020\r\nradare2 5.0.1-git 25519 @ linux-x86-64 git.5.0.0-50-g85cce84722\r\ncommit: 85cce84722708274fce5432174b3d9f2a64df76a build: 2020-12-29__00:14:46\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nIn disassembler output, immediate (constant) value may gets \"shortened\" with dots (..), but it only makes things worse.\r\n\r\n```\r\n0x563a833549a8      c745e078563412     mov dword [var_20h], ..12345678    ; 0x12345678\r\n0x563a833549af      488d05b1160000     lea rax, [..6067]    ; 0x563a83356067 ; \"1-1\"\r\n```\r\n\r\n1. There's no gain in replacing `0x` with `..` in the first row\r\n2. I'd also suggest eliding second row from the middle, i.e. `0x..6067`\r\n\r\n## Test\r\n\r\nOpen some binary, analyze and disassemble. \r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc1NzUxNjkxOQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Without a reproducer i can't tell, but i assume the bug is in: libr/core/disasm.c:2604, can you submit a PR fixing this and a reproducer?","createdAt":"2021-01-10T17:59:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18140#issuecomment-757516919","viewerDidAuthor":true}],"number":18140,"title":"When shortening stuff, make sure it actually saves space"},{"body":"## Environment\r\n\r\n```\r\nÐ¡Ñ€ 23 Ð´ÐµÐº 2020 13:05:33 +05\r\nradare2 5.0.0 25286 @ linux-x86-64 git.\r\ncommit: 15d8de3819d25dd24575a520e19af908d2c18d16 build: 2020-12-22__21:06:21\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nI have the simple struct: `ts*`: `pf.A dcz a b c`\r\n\r\nDoesn't work automate or manual structure definition\r\n\r\n## Test\r\n\r\n`pi 1`: `mov byte [rax + 4], 0x41`\r\n\r\n`ahts 4`: `A.b`\r\n\r\n`aht A.b`: `wrong type for opcode offset`","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc1MDQ1ODk5NQ==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"Current implementation of `aht` uses first available immediate/delta value from operands as an field offset. Firstly it scans all source operands, then tries destination operand. In the given instruction source operand is immediate value `0x41`.","createdAt":"2020-12-23T20:22:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18098#issuecomment-750458995","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc1MDQ2NzAxMA==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"Sadly. WIll it implemented?\r\nIn my humple oppinion it is very important feature. Because reverse engineering it is mainly reconstruction of structs.","createdAt":"2020-12-23T20:45:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18098#issuecomment-750467010","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc1MDQ3NjU0Mw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"@pelijah so where do you think the fix must be done? Anal hints allow to specify the nth numeric value of the opcode string. So the hint should be possible but i assume the current analysis code is not considering how many numeric arguments an instruction have","createdAt":"2020-12-23T21:14:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18098#issuecomment-750476543","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc1MDQ5MTI5MQ==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"1. Search of immediate/delta \r\n     - iterate over all operands until offset match (will cause collision in case `mov byte [rax + 4], 4`)\r\n     - allow to specify operand position for `aht`\r\n2. Creating anal hint with position\r\n3. Printing diassembly according to anal hint (as I understood `pd` just replaces the first occurrence)","createdAt":"2020-12-23T22:06:27Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18098#issuecomment-750491291","viewerDidAuthor":false}],"number":18098,"title":"manual immediate structure offset"},{"body":"## Description\r\n\r\nFirst, more recent\r\nhttps://github.com/radareorg/radare2/blob/55ce4ce303c2ad0f144e541e4c7470a86d9bd44a/libr/core/cmd_anal.c#L6696-L6707\r\n\r\nSecond, older\r\nhttps://github.com/radareorg/radare2/blob/55ce4ce303c2ad0f144e541e4c7470a86d9bd44a/libr/core/cmd_anal.c#L6722-L6733\r\n\r\nI think the old one should be removed.\r\n\r\n<!-- Steps to reproduce the issue and provide files/links/images/.. -->\r\n","comments":[],"number":18094,"title":"Two implementations of aeab command handler"},{"body":"## Description\r\n\r\nCurrent help subsystem is not adequate anymore.\r\n\r\n1. Those lists of 3 (or 2 for modes) string items + NULL is a very fragile format.  All it takes is to forget one comma â€” and have fun.  I even managed not to crash radare2, instead it printed all the way through the memory of other help text which happened to be located next.\r\n\r\n2. Only two colors and strict ordering of cmd+args is not the end of the story.  For example, check out `?@?`: backticks are not properly colored because \"opening\" one is considered a command, and \"closing\" one is part of an args string.\r\n\r\nOn a more general note, I'd like to see these features:\r\n\r\n**Grouping:** help page can be sorted by alphabet or by those groups.  Because sometimes it makes more sense to gather related commands in huge menu.  Groups have headers which are printed accordingly.\r\n\r\nGrouping would be especially useful in interactive modes. For example, in visual functions/variables analysis mode (`Vv`) or xrefs analysis mode (`Vv` + `x`) actions may be grouped into\r\n- Movements: `j/k`, `J/K`, `g/G`\r\n- XRefs Analysis: `x/<`, `X/>`, `l/Space/Enter`, `p/P`\r\n- Menu: `h/q/Q`, `:`, `/`, `?`\r\n\r\n**Aliases:** some actions are grouped in one line because they are complementary (like `j/k` movements), others are simply serving exactly same purpose (`h/q/Q` in XRefs mode). Regardless, it should be possible to semantically highlight, group and sort both types of aliases.\r\n\r\n**Extended description:** many commands used to suffer from overly abbreviated summary. New help page can toggle extended (multi-line) description of each command.\r\n\r\n**Flexible markup:** consider roff (manpages), for example. Many open source developers wrote documentation in roff at least once, so it should be familiar. Surely, no need to over-engineer, but at least _some_ semantic markup (e.g. bold literals, italic/underline variables etc) is a must.\r\n\r\n---\r\n\r\nTo the best of my knowledge, there is ongoing work of reworking internal command handling API in radare2, and there is Rizin which already switched to YAML and hash-tables of commands.\r\n\r\nRicardo @ret2libc wrote:\r\n> I saw your message on #radare channel and I just wanted to let you know that in Rizin, a fork of radare2, we have worked a lot on this because we think it's an important part of the user experience and you can see at https://github.com/rizinorg/rizin/blob/dev/librz/core/cmd_descs.yaml the approach we have taken to define commands. We have already autocompletion based on the declared arguments and we are slowly moving commands to the this new way\r\n\r\nRelated to https://github.com/radareorg/radare2/issues/4459","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc0OTY5Mjg3NQ==","author":{"login":"ratijas"},"authorAssociation":"CONTRIBUTOR","body":"Here is my new favorite: `mK/'K    mark/go to Key (any key)`.\r\n\r\n![mark/go to Key](https://user-images.githubusercontent.com/6737986/102918477-05ebf680-4498-11eb-9efa-24f4db2f2a5f.png)\r\n\r\nWhile I have no idea what that description means, I assume it refers to the same concept of local bookmarks as in vim. In manpages it would've been formatted like this:\r\n\r\n> **m**_{a-z}_    Set mark {a-z} at cursor position.\r\n> **'**_{a-z}_     Jump to mark _{a-z}_.\r\n\r\ntrust me, with colored monospace font bold single quote looks much brighter.\r\n\r\n![marks manpage](https://user-images.githubusercontent.com/6737986/102918980-089b1b80-4499-11eb-851d-6d749d9aa490.png)\r\n\r\nSource code:\r\n\r\n```man\r\n.TH CHECK 1\r\n.SH CHECK\r\n.\r\n.TP 10\r\n\\fBm\\fP{\\fIa-z\\fP}\r\nSet mark\r\n.RI { a-z }\r\nat cursor position.\r\n.\r\n.TP 10\r\n\\fB'\\fP{\\fIa-z\\fP}\r\nJump to mark\r\n.RI { a-z }.\r\n```","createdAt":"2020-12-22T18:03:12Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18093#issuecomment-749692875","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc1MDU3NTQwNQ==","author":{"login":"ratijas"},"authorAssociation":"CONTRIBUTOR","body":"One more thing:\r\n\r\n**Format string arguments:** in some rare cases help text depends on runtime values which can not be determined at compile time, e.g.: `r_sys_prefix()`. There is no need for the whole printf format craziness, but something as simple as `%1s` or `{1}` would save the day from manually constructing a list of help text parameters.\r\n\r\nUse case: `pfo?` command.","createdAt":"2020-12-23T23:39:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18093#issuecomment-750575405","viewerDidAuthor":false}],"number":18093,"title":"Wishlist for documentation / help subsystem"},{"body":"## Environment\r\n\r\n```sh\r\n# copypaste this script into your shell and replace it with the output\r\nSun Dec 20 17:16:22 CET 2020\r\nradare2 4.6.0-git 27703 @ darwin-x86-64 git.\r\ncommit: 7f794714e0541686b66c9e9687e9e476336b9d94 build: 2020-12-20__14:46:01\r\nDarwin x86_64\r\n```\r\n\r\n## Description\r\n\r\nThe idea for this PR is to clarify and unify the usage of visual/panels cursor and mouse support. The reason for that is because visual introduced the cursor mode (toggled with `c`) and now r2 supports keyboard driven mouse control.\r\n\r\nSo we need the following things to address this issue:\r\n\r\n* [ ] Add config var to toggle visual cursor (what `c` do in visual and panels/graphs)\r\n* [ ] Find a key to toggle the keyboard mouse\r\n* [ ] Find better name (or specify/clarify it) for scr.cursor and scr.mouse or maybe scr.wheel or scr.pointer\r\n\r\n## Test\r\n\r\nJust test all the stuff explained above and provide your comments/^Pfeedback below","comments":[],"number":18073,"title":"Clarify/Unify cursor/pointer"},{"body":"I have no idea how complicated this is, but during todays bbb presentation people asked for this","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc0NDA5NTQ4OQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"`/af sse` may work. if there are unhandled instructions may be good to add another cathegory named `sse`. But implementing this requires having a sample file with all the avx instructions or at least the most common ones. by checking the documentation seems quite large. not sure if capstone is up to date for all of them either.","createdAt":"2020-12-14T00:17:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18034#issuecomment-744095489","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs46I_p8","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Can we close this?","createdAt":"2021-11-22T11:43:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18034#issuecomment-975436412","viewerDidAuthor":true}],"number":18034,"title":"Add avx support in /af"},{"body":"## Environment\r\n\r\n```\r\n$ date\r\nThu Dec 10 02:51:04 PM UTC 2020\r\n$ r2 -v\r\nradare2 4.5.1 0 @ linux-x86-64 git.4.5.1\r\ncommit: unknown build: 2020-09-24__20:31:44\r\n$ uname -ms\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nRadiff2 produces just one side of the diff, instead of two. Furthermore, in some cases there's a warning about an assertion failing.\r\n\r\n## Test\r\n\r\n```\r\n$ radiff2 -g main ./5 ./4\r\nWARNING: r_list_append: assertion 'list && data' failed (line 196)\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚  0x1050                                                                                                         â”‚\r\nâ”‚   ;-- section..text:                                                                                            â”‚\r\nâ”‚   ;-- .text:                                                                                                    â”‚\r\nâ”‚ 87: int main (int argc, char **argv, char **envp);                                                              â”‚\r\nâ”‚ 0x00001050      mov edi, 6                                             ; [13] -r-x section size 469 named .text â”‚\r\nâ”‚ 0x00001055      sub rsp, 8                                                                                      â”‚\r\nâ”‚ 0x00001059      call sym operator new(unsigned long)                   ; sym.imp.operator_new_unsigned_long     â”‚\r\nâ”‚ 0x0000105e      mov rdi, rax                                                                                    â”‚\r\nâ”‚ 0x00001061      mov dword [rax], 0x3090607                             ; [0x3090607:4]=-1                       â”‚\r\nâ”‚ 0x00001067      mov eax, 2                                                                                      â”‚\r\nâ”‚ 0x0000106c      mov word [rdi + 4], ax                                                                          â”‚\r\nâ”‚ 0x00001070      mov ecx, 0x10000000                                                                             â”‚\r\nâ”‚ 0x00001075      lea rdx, [rdi + 6]                                                                              â”‚\r\nâ”‚ 0x00001079      nop dword [rax]                                                                                 â”‚\r\nâ”‚                                                                                                                 â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n    v\r\n    â”‚\r\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n                                 â”‚              â”‚ â”‚\r\n                                 â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n                                 â”‚        â”‚  0x1080                    â”‚\r\n                                 â”‚        â”‚      mov rax, rdi          â”‚\r\n                                 â”‚        â”‚      nop dword [rax + rax] â”‚\r\n                                 â”‚        â”‚                            â”‚\r\n                                 â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n                                 â”‚            v\r\n                                 â”‚            â”‚\r\n                                 â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n                                 â”‚                       â”‚\r\n                                 â”‚                       â”‚\r\n                                 â”‚                       â”‚\r\n                                 â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n                                 â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”\r\n                                 â”‚â”‚      â”‚ â”‚\r\n                                 â”‚â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n                                 â”‚â”‚â”‚  0x1088             â”‚\r\n                                 â”‚â”‚â”‚      inc byte [rax] â”‚\r\n                                 â”‚â”‚â”‚      inc rax        â”‚\r\n                                 â”‚â”‚â”‚      cmp rax, rdx   â”‚\r\n                                 â”‚â”‚â”‚      jne 0x1088     â”‚\r\n                                 â”‚â”‚â”‚                     â”‚\r\n                                 â”‚â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n                                 â”‚â”‚        f t\r\n                                 â”‚â”‚        â”‚ â”‚\r\n                                 â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n                                 â”‚     â”Œâ”€â”€â”€â”˜\r\n                                 â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n                                 â”‚ â”‚  0x1092            â”‚\r\n                                 â”‚ â”‚      dec ecx       â”‚\r\n                                 â”‚ â”‚      jne 0x1080    â”‚\r\n                                 â”‚ â”‚                    â”‚\r\n                                 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n                                 â”‚         f t\r\n                                 â”‚         â”‚ â”‚\r\n                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n                       â”‚\r\n                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n                   â”‚  0x1096                                             â”‚\r\n                   â”‚      mov esi, 6                                     â”‚\r\n                   â”‚      ; sym.imp.operator_delete_void___unsigned_long â”‚\r\n                   â”‚      call sym operator delete(void*, unsigned long) â”‚\r\n                   â”‚      xor eax, eax                                   â”‚\r\n                   â”‚      add rsp, 8                                     â”‚\r\n                   â”‚      ret                                            â”‚\r\n                   â”‚                                                     â”‚\r\n                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n```\r\n\r\n```\r\n$ radiff2 -g main ./4 ./5\r\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚  0x1050                                                                                                         â”‚\r\nâ”‚   ;-- section..text:                                                                                            â”‚\r\nâ”‚   ;-- .text:                                                                                                    â”‚\r\nâ”‚ 129: int main (int argc, char **argv, char **envp);                                                             â”‚\r\nâ”‚ 0x00001050      mov edi, 6                                             ; [13] -r-x section size 517 named .text â”‚\r\nâ”‚ 0x00001055      sub rsp, 8                                                                                      â”‚\r\nâ”‚ 0x00001059      call sym operator new(unsigned long)                   ; sym.imp.operator_new_unsigned_long     â”‚\r\nâ”‚ 0x0000105e      mov dword [rax], 0x3090607                             ; [0x3090607:4]=-1                       â”‚\r\nâ”‚ 0x00001064      mov r9, rax                                                                                     â”‚\r\nâ”‚ 0x00001067      mov eax, 2                                                                                      â”‚\r\nâ”‚ 0x0000106c      mov word [r9 + 4], ax                                                                           â”‚\r\nâ”‚ 0x00001071      mov r10d, 0x10000000                                                                            â”‚\r\nâ”‚ 0x00001077      mov r8d, 6                                                                                      â”‚\r\nâ”‚ 0x0000107d      mov edi, 9                                                                                      â”‚\r\nâ”‚ 0x00001082      mov esi, 3                                                                                      â”‚\r\nâ”‚ 0x00001087      mov ecx, 2                                                                                      â”‚\r\nâ”‚ 0x0000108c      xor edx, edx                                                                                    â”‚\r\nâ”‚ 0x0000108e      nop                                                                                             â”‚\r\nâ”‚                                                                                                                 â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n    v\r\n    â”‚\r\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n                                                         â”‚\r\n                                                         â”‚\r\n                                                         â”‚\r\n                                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n                             â”‚                  â”‚ â”‚\r\n                             â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n                             â”‚            â”‚  0x1090                     â”‚\r\n                             â”‚            â”‚      movzx eax, byte [r9]   â”‚\r\n                             â”‚            â”‚      inc eax                â”‚\r\n                             â”‚            â”‚      mov byte [r9], al      â”‚\r\n                             â”‚            â”‚      inc r8d                â”‚\r\n                             â”‚            â”‚      mov byte [r9 + 1], r8b â”‚\r\n                             â”‚            â”‚      inc edi                â”‚\r\n                             â”‚            â”‚      mov byte [r9 + 2], dil â”‚\r\n                             â”‚            â”‚      inc esi                â”‚\r\n                             â”‚            â”‚      mov byte [r9 + 3], sil â”‚\r\n                             â”‚            â”‚      inc ecx                â”‚\r\n                             â”‚            â”‚      mov byte [r9 + 4], cl  â”‚\r\n                             â”‚            â”‚      inc edx                â”‚\r\n                             â”‚            â”‚      mov byte [r9 + 5], dl  â”‚\r\n                             â”‚            â”‚      dec r10d               â”‚\r\n                             â”‚            â”‚      jne 0x1090             â”‚\r\n                             â”‚            â”‚                             â”‚\r\n                             â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n                             â”‚                    f t\r\n                             â”‚                    â”‚ â”‚\r\n                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n                                  â”‚\r\n                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\n                              â”‚  0x10bd                                             â”‚\r\n                              â”‚      mov esi, 6                                     â”‚\r\n                              â”‚      mov rdi, r9                                    â”‚\r\n                              â”‚      ; sym.imp.operator_delete_void___unsigned_long â”‚\r\n                              â”‚      call sym operator delete(void*, unsigned long) â”‚\r\n                              â”‚      xor eax, eax                                   â”‚\r\n                              â”‚      add rsp, 8                                     â”‚\r\n                              â”‚      ret                                            â”‚\r\n                              â”‚                                                     â”‚\r\n                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n```\r\n\r\nELF Linux Glibc GCC C++20 executable files: [a.zip](https://github.com/radareorg/radare2/files/5673612/a.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc0MzE2MjU3NQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Yep thats expected, if you want the other graph run the same command swapping the files","createdAt":"2020-12-11T12:21:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18015#issuecomment-743162575","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc0Mzk1MTM5Ng==","author":{"login":"nsajko"},"authorAssociation":"CONTRIBUTOR","body":"> Yep thats expected, if you want the other graph run the same command swapping the files\r\n\r\nI guess that even makes sense as a feature, but there should be some indication of which graph is from which file.\r\n\r\nE.g., just prefix the output graph with a line containing the executable name, with an empty line in between.","createdAt":"2020-12-13T05:11:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18015#issuecomment-743951396","viewerDidAuthor":false}],"number":18015,"title":"radiff2 graph view broken"},{"body":"## Environment\r\n\r\n```sh\r\nWed 09 Dec 2020 01:18:14 PM EST\r\nradare2 4.5.1 0 @ linux-x86-64 git.4.5.1\r\ncommit: HEAD build: 1980-01-01__00:00:00\r\nLinux x86_64\r\n```\r\n\r\n## Description\r\n\r\nI am trying to use radare2 on `crackme0x01` (IOLI CrackMe from the book). The tricky part, that I suspect might be relevant, is that the binary is 32 bit, while I am running it on a 64 bit system.\r\n\r\nI paused it right before the call to `scanf`, and here is what I see:\r\n\r\n```\r\nâ”‚           ;-- eip:\r\nâ”‚           0x08048426      e8e1feffff     call sym.imp.scanf          ; int scanf(const char *format) ; esp=0xffe1efec ; eip=0x804830c\r\nâ”‚                                                                      ; int scanf(\",\\xcd\\x1d\")\r\n```\r\n\r\nThe computed argument of `scanf` makes no sense. At the same time:\r\n\r\n```\r\n[0x08048426]> ps @ [esp]\r\n%d\r\n```\r\n\r\nI am new to radare2, so I donâ€™t have even any guesses of where things could go wrong and where to start looking. I checked that the calling convention was detected correctly though:\r\n\r\n```\r\n[0x08048426]> afc\r\ncdecl\r\n[0x08048426]> afc @ sym.imp.scanf\r\ncdecl\r\n```\r\n\r\n## Test\r\n\r\n<details>\r\n<summary>All steps</summary>\r\n\r\n```\r\nâ€º r2 -Ad crackme0x01\r\nProcess with PID 18001 started...\r\n= attach 18001 18001\r\nbin.baddr 0x08047000\r\nUsing 0x8047000\r\nasm.bits 32\r\nglibc.fc_offset = 0x00148\r\n[Invalid address from 0x080483cfith sym. and entry0 (aa)\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Check for objc references\r\nWarning: aao experimental on 32bit binaries\r\n[x] Check for vtables\r\n[TOFIX: aaft can't run in debugger mode.ions (aaft)\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Propagate noreturn information\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\n[0xf7f610b0]> s main\r\n[0x080483e4]> dcu 0x08048426\r\nContinue until 0x08048426 using 1 bpsize\r\nIOLI Crackme Level 0x01\r\nhit breakpoint at: 8048426\r\n[0x08048426]> e asm.emu=true\r\n[0x08048426]> pdf\r\n            ; DATA XREF from entry0 @ 0x8048347\r\nâ”Œ 113: int main (int argc, char **argv, char **envp);\r\nâ”‚           ; var int32_t var_4h @ ebp-0x4\r\nâ”‚           ; var int32_t var_sp_4h @ esp+0x4\r\nâ”‚           0x080483e4      55             push ebp                    ; esp=0xffe1f01c -> 0x89fc458d\r\nâ”‚           0x080483e5      89e5           mov ebp, esp                ; ebp=0xffe1f01c -> 0x89fc458d\r\nâ”‚           0x080483e7      83ec18         sub esp, 0x18               ; esp=0xffe1f004 (pstr 0x08048541) \"Password: \" ; of=0x0 ; sf=0x1 ; zf=0x0 ; pf=0x0 ; cf=0x0\r\nâ”‚           0x080483ea      83e4f0         and esp, 0xfffffff0         ; esp=0xffe1f000 -> 0xfbad2a84 ; zf=0x0 ; pf=0x1 ; sf=0x1 ; cf=0x0 ; of=0x0\r\nâ”‚           0x080483ed      b800000000     mov eax, 0                  ; eax=0x0\r\nâ”‚           0x080483f2      83c00f         add eax, 0xf                ; 15 ; eax=0xf ; of=0x0 ; sf=0x0 ; zf=0x0 ; cf=0x0 ; pf=0x1\r\nâ”‚           0x080483f5      83c00f         add eax, 0xf                ; 15 ; eax=0x1e ; of=0x0 ; sf=0x0 ; zf=0x0 ; cf=0x0 ; pf=0x1\r\nâ”‚           0x080483f8      c1e804         shr eax, 4                  ; cf=0x0 ; cf=0x1 ; eax=0x1 ; zf=0x0 ; pf=0x0 ; sf=0x0\r\nâ”‚           0x080483fb      c1e004         shl eax, 4                  ; eax=0x10 ; zf=0x0 ; pf=0x0 ; sf=0x0 ; cf=0x0\r\nâ”‚           0x080483fe      29c4           sub esp, eax                ; esp=0xffe1eff0 -> 0x1dcd2c ; of=0x0 ; sf=0x1 ; zf=0x0 ; pf=0x1 ; cf=0x0\r\nâ”‚           0x08048400      c70424288504.  mov dword [esp], str.IOLI_Crackme_Level_0x01 ; [0x8048528:4]=0x494c4f49 ; \"IOLI Crackme Level 0x01\\n\"\r\nâ”‚           0x08048407      e810ffffff     call sym.imp.printf         ; int printf(const char *format) ; esp=0xffe1efec ; eip=0x804831c\r\nâ”‚                                                                      ; int printf(\",\\xcd\\x1d\")\r\nâ”‚           0x0804840c      c70424418504.  mov dword [esp], str.Password: ; [0x8048541:4]=0x73736150 ; \"Password: \"\r\nâ”‚           0x08048413      e804ffffff     call sym.imp.printf         ; int printf(const char *format) ; esp=0xffe1efec ; eip=0x804831c\r\nâ”‚                                                                      ; int printf(\",\\xcd\\x1d\")\r\nâ”‚           0x08048418      8d45fc         lea eax, [var_4h]           ; eax=0xffe1f018 -> 0x18ec8f05\r\nâ”‚           0x0804841b      89442404       mov dword [var_sp_4h], eax\r\nâ”‚           0x0804841f      c704244c8504.  mov dword [esp], 0x804854c  ; [0x804854c:4]=0x49006425\r\nâ”‚           ;-- eip:\r\nâ”‚           0x08048426      e8e1feffff     call sym.imp.scanf          ; int scanf(const char *format) ; esp=0xffe1efec ; eip=0x804830c\r\nâ”‚                                                                      ; int scanf(\",\\xcd\\x1d\")\r\nâ”‚           0x0804842b      817dfc9a1400.  cmp dword [var_4h], 0x149a  ; zf=0x0 ; cf=0x0 ; pf=0x0 ; sf=0x1 ; of=0x0\r\nâ”‚       â”Œâ”€< 0x08048432      740e           je 0x8048442                ; unlikely\r\nâ”‚       â”‚   0x08048434      c704244f8504.  mov dword [esp], str.Invalid_Password ; [0x804854f:4]=0x61766e49 ; \"Invalid Password!\\n\"\r\nâ”‚       â”‚   0x0804843b      e8dcfeffff     call sym.imp.printf         ; int printf(const char *format) ; esp=0xffe1efec ; eip=0x804831c\r\nâ”‚       â”‚                                                              ; int printf(\",\\xcd\\x1d\")\r\nâ”‚      â”Œâ”€â”€< 0x08048440      eb0c           jmp 0x804844e               ; eip=0x804844e\r\nâ”‚      â”‚â””â”€> 0x08048442      c70424628504.  mov dword [esp], str.Password_OK_: ; [0x8048562:4]=0x73736150 ; \"Password OK :)\\n\"\r\nâ”‚      â”‚    0x08048449      e8cefeffff     call sym.imp.printf         ; int printf(const char *format) ; esp=0xffe1efec ; eip=0x804831c\r\nâ”‚      â”‚                                                               ; int printf(\",\\xcd\\x1d\")\r\nâ”‚      â”‚    ; CODE XREF from main @ 0x8048440\r\nâ”‚      â””â”€â”€> 0x0804844e      b800000000     mov eax, 0                  ; eax=0x0\r\nâ”‚           0x08048453      c9             leave                       ; esp=0xffe1f01c -> 0x89fc458d ; ebp=0x8048418 ; esp=0xffe1f020 (pstr 0x0804854c) \"%d\" esp\r\nâ””           0x08048454      c3             ret                         ; eip=0x804854c ; esp=0xffe1f024 -> 0xf7f53e24\r\n[0x08048426]> ps [eip]\r\nDo you want to print 2 lines? (y/N) n\r\n[0x08048426]> ps @ [esp]\r\n%d\r\n\r\n[0x08048426]> iI\r\narch     x86\r\nbaddr    0x8047000\r\nbinsz    11595\r\nbintype  elf\r\nbits     32\r\ncanary   false\r\nclass    ELF32\r\ncompiler GCC: (GNU) 3.4.6 (Gentoo 3.4.6-r2, ssp-3.4.6-1.0, pie-8.7.10)\r\ncrypto   false\r\nendian   little\r\nhavecode true\r\nintrp    /nix/store/7k3vlmpvzjqrc7lbmz1csbhg5d1rn4fw-glibc-2.31/lib/ld-linux.so.2\r\nladdr    0x0\r\nlang     c\r\nlinenum  true\r\nlsyms    true\r\nmachine  Intel 80386\r\nmaxopsz  16\r\nminopsz  1\r\nnx       true\r\nos       linux\r\npcalign  0\r\npic      false\r\nrelocs   true\r\nrelro    partial\r\nrpath    /nix/store/7k3vlmpvzjqrc7lbmz1csbhg5d1rn4fw-glibc-2.31/lib\r\nsanitiz  false\r\nstatic   false\r\nstripped false\r\nsubsys   linux\r\nva       true\r\n```\r\n\r\n</details>","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc0MjAxMDEyMA==","author":{"login":"kirelagin"},"authorAssociation":"NONE","body":"Hmmm, looks like it depends on the disassembly starting point. If I go to visual mode and scroll around, at some point it changes to a complete garbage, but then at some point starts to show the correct value. Here are these points:\r\n\r\n<details>\r\n<summary><tt>pd 16 @ 0x080483e7</tt> (garbage)</summary>\r\n\r\n```\r\n[0x08048400]> pd 16 @ 0x080483e7\r\nâ”‚           0x080483e7      83ec18         sub esp, 0x18               ; esp=0xffa48cb8 -> 0xffa48cf4 ; of=0x0 ; sf=0x1 ; zf=0x0 ; pf=0x1 ; cf=0x0\r\nâ”‚           0x080483ea      83e4f0         and esp, 0xfffffff0         ; esp=0xffa48cb0 -> 0xfbad2a84 ; zf=0x0 ; pf=0x0 ; sf=0x1 ; cf=0x0 ; of=0x0\r\nâ”‚           0x080483ed      b800000000     mov eax, 0                  ; eax=0x0\r\nâ”‚           0x080483f2      83c00f         add eax, 0xf                ; 15 ; eax=0xf ; of=0x0 ; sf=0x0 ; zf=0x0 ; cf=0x0 ; pf=0x1\r\nâ”‚           0x080483f5      83c00f         add eax, 0xf                ; 15 ; eax=0x1e ; of=0x0 ; sf=0x0 ; zf=0x0 ; cf=0x0 ; pf=0x1\r\nâ”‚           0x080483f8      c1e804         shr eax, 4                  ; cf=0x0 ; cf=0x1 ; eax=0x1 ; zf=0x0 ; pf=0x0 ; sf=0x0\r\nâ”‚           0x080483fb      c1e004         shl eax, 4                  ; eax=0x10 ; zf=0x0 ; pf=0x0 ; sf=0x0 ; cf=0x0\r\nâ”‚           0x080483fe      29c4           sub esp, eax                ; esp=0xffa48ca0 -> 0x1dcd2c ; of=0x0 ; sf=0x1 ; zf=0x0 ; pf=0x1 ; cf=0x0\r\nâ”‚           0x08048400      c70424288504.  mov dword [esp], str.IOLI_Crackme_Level_0x01 ; [0x8048528:4]=0x494c4f49 ; \"IOLI Crackme Level 0x01\\n\"\r\nâ”‚           0x08048407      e810ffffff     call sym.imp.printf         ; int printf(const char *format) ; esp=0xffa48c9c ; eip=0x804831c\r\nâ”‚                                                                      ; int printf(\",\\xcd\\x1d\")\r\nâ”‚           0x0804840c      c70424418504.  mov dword [esp], str.Password: ; [0x8048541:4]=0x73736150 ; \"Password: \"\r\nâ”‚           0x08048413      e804ffffff     call sym.imp.printf         ; int printf(const char *format) ; esp=0xffa48c9c ; eip=0x804831c\r\nâ”‚                                                                      ; int printf(\",\\xcd\\x1d\")\r\nâ”‚           0x08048418      8d45fc         lea eax, [var_4h]           ; eax=0xffa48cf4 -> 0x1dcd2c\r\nâ”‚           0x0804841b      89442404       mov dword [var_sp_4h], eax\r\nâ”‚           0x0804841f      c704244c8504.  mov dword [esp], 0x804854c  ; [0x804854c:4]=0x49006425\r\nâ”‚           ;-- eip:\r\nâ”‚           0x08048426      e8e1feffff     call sym.imp.scanf          ; int scanf(const char *format) ; esp=0xffa48c9c ; eip=0x804830c\r\nâ”‚                                                                      ; int scanf(\",\\xcd\\x1d\")\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary><tt>pd 15 @ 0x080483ea</tt> (absolute garbage)</summary>\r\n\r\n```\r\n[0x08048400]> pd 15 @ 0x080483ea\r\nâ”‚           0x080483ea      83e4f0         and esp, 0xfffffff0         ; esp=0xffa48cd0 (pstr 0x0804854c) \"%d\" ; zf=0x0 ; pf=0x0 ; sf=0x1 ; cf=0x0 ; of=0x0\r\nâ”‚           0x080483ed      b800000000     mov eax, 0                  ; eax=0x0\r\nâ”‚           0x080483f2      83c00f         add eax, 0xf                ; 15 ; eax=0xf ; of=0x0 ; sf=0x0 ; zf=0x0 ; cf=0x0 ; pf=0x1\r\nâ”‚           0x080483f5      83c00f         add eax, 0xf                ; 15 ; eax=0x1e ; of=0x0 ; sf=0x0 ; zf=0x0 ; cf=0x0 ; pf=0x1\r\nâ”‚           0x080483f8      c1e804         shr eax, 4                  ; cf=0x0 ; cf=0x1 ; eax=0x1 ; zf=0x0 ; pf=0x0 ; sf=0x0\r\nâ”‚           0x080483fb      c1e004         shl eax, 4                  ; eax=0x10 ; zf=0x0 ; pf=0x0 ; sf=0x0 ; cf=0x0\r\nâ”‚           0x080483fe      29c4           sub esp, eax                ; esp=0xffa48cc0 ; of=0x0 ; sf=0x1 ; zf=0x0 ; pf=0x1 ; cf=0x0\r\nâ”‚           0x08048400      c70424288504.  mov dword [esp], str.IOLI_Crackme_Level_0x01 ; [0x8048528:4]=0x494c4f49 ; \"IOLI Crackme Level 0x01\\n\"\r\nâ”‚           0x08048407      e810ffffff     call sym.imp.printf         ; int printf(const char *format) ; esp=0xffa48cbc ; eip=0x804831c\r\nâ”‚                                                                      ; int printf(\"\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\")\r\nâ”‚           0x0804840c      c70424418504.  mov dword [esp], str.Password: ; [0x8048541:4]=0x73736150 ; \"Password: \"\r\nâ”‚           0x08048413      e804ffffff     call sym.imp.printf         ; int printf(const char *format) ; esp=0xffa48cbc ; eip=0x804831c\r\nâ”‚                                                                      ; int printf(\"\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\")\r\nâ”‚           0x08048418      8d45fc         lea eax, [var_4h]           ; eax=0xffa48cf4 -> 0x1dcd2c\r\nâ”‚           0x0804841b      89442404       mov dword [var_sp_4h], eax\r\nâ”‚           0x0804841f      c704244c8504.  mov dword [esp], 0x804854c  ; [0x804854c:4]=0x49006425\r\nâ”‚           ;-- eip:\r\nâ”‚           0x08048426      e8e1feffff     call sym.imp.scanf          ; int scanf(const char *format) ; esp=0xffa48cbc ; eip=0x804830c\r\nâ”‚                                                                      ; int scanf(\"\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\xff\")\r\n```\r\n\r\n</details>\r\n\r\n\r\n<details>\r\n<summary><tt>pd 8 @ 0x08048400</tt> (correct)</summary>\r\n\r\n```\r\n[0x08048400]> pd 8 @ 0x08048400\r\nâ”‚           0x08048400      c70424288504.  mov dword [esp], str.IOLI_Crackme_Level_0x01 ; [0x8048528:4]=0x494c4f49 ; \"IOLI Crackme Level 0x01\\n\"\r\nâ”‚           0x08048407      e810ffffff     call sym.imp.printf         ; int printf(const char *format) ; esp=0xffa48ccc -> 0x89fc458d ; eip=0x804831c\r\nâ”‚                                                                      ; int printf(\"%d\")\r\nâ”‚           0x0804840c      c70424418504.  mov dword [esp], str.Password: ; [0x8048541:4]=0x73736150 ; \"Password: \"\r\nâ”‚           0x08048413      e804ffffff     call sym.imp.printf         ; int printf(const char *format) ; esp=0xffa48ccc -> 0x89fc458d ; eip=0x804831c\r\nâ”‚                                                                      ; int printf(\"%d\")\r\nâ”‚           0x08048418      8d45fc         lea eax, [var_4h]           ; eax=0xffa48cf4 -> 0x1dcd2c\r\nâ”‚           0x0804841b      89442404       mov dword [var_sp_4h], eax\r\nâ”‚           0x0804841f      c704244c8504.  mov dword [esp], 0x804854c  ; [0x804854c:4]=0x49006425\r\nâ”‚           ;-- eip:\r\nâ”‚           0x08048426      e8e1feffff     call sym.imp.scanf          ; int scanf(const char *format) ; esp=0xffa48ccc -> 0x89fc458d ; eip=0x804830c\r\nâ”‚                                                                      ; int scanf(\"%d\")\r\n```\r\n\r\n</details>","createdAt":"2020-12-09T19:52:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18014#issuecomment-742010120","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs56q1sa","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"@kirelagin did u tried with latest releases?","createdAt":"2024-04-16T00:56:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18014#issuecomment-2058050330","viewerDidAuthor":true}],"number":18014,"title":"Incorrect function argument emulation for a 32bit binary"},{"body":"# This template is meant for bug reports, if you have a feature request, please be as descriptive as possible and delete the template\r\n\r\nMake sure you are testing using the latest git version of radare2 before submitting any issue.\r\n\r\n*If you would like to report a bug, please fill the template below*\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu20.04\r\n| File format of the file you reverse (mandatory)      | apk\r\n| Architecture/bits of the file (mandatory)            | dex\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.6.0-git 25326 @ linux-x86-64 git.4.4.0-989-ged8e66a17 commit: ed8e66a171ce63693865b67855ee82a6e15a8c01 build: 2020-12-06__19:43:55\r\n\r\n### Expected behavior\r\nI can find all classes contains in APK\r\n### Actual behavior\r\nI can not find all classes contains in APK\r\n### Steps to reproduce the behavior \r\n- r2 apk://tb.apk\r\n- Use command `icq~MethodEnum`\r\n- There is nothing output.\r\n\r\nWhen I use apktool to unzip apk, the class can be found.\r\n![burning](https://user-images.githubusercontent.com/20567891/101351217-398d2500-38cb-11eb-8c33-25be3fbb04b8.png)\r\n\r\n\r\nDrag and drop zip archives containing the Additional info here, don't use external services or link.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDczOTg5MjU5OA==","author":{"login":"BurningTeng"},"authorAssociation":"NONE","body":"The apk is bigger than limitation. You can get it at http://www.hacksprit.top:8090/files/tb.apk","createdAt":"2020-12-07T12:37:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18003#issuecomment-739892598","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDczOTg5OTM0NQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I'll tell you next week.\r\n\r\n![Screenshot 2020-12-07 at 13 50 40](https://user-images.githubusercontent.com/6431515/101353009-3e35e700-3893-11eb-8f78-0bcc0f7d3513.png)\r\n\r\nbut my blind guess is that you are greping for a class that is defined in a different .dex file. apktool merges them all when processing them. r2 needs bin.libs=true to do that. you can do this: `grep MethodEnum *.dex`","createdAt":"2020-12-07T12:51:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18003#issuecomment-739899345","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDczOTkwODY4NA==","author":{"login":"BurningTeng"},"authorAssociation":"NONE","body":"Yes. Defined in diffrent class. But \"bin.libs=true\" seems does not work. \r\n```\r\n[0x001e9598]> set bin.libs=true\r\n[0x001e9598]> aaaa\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Check for vtables\r\n[x] Finding xrefs in noncode section with anal.in=io.maps\r\n[x] Analyze value pointers (aav)\r\n[x] Value from 0x0014b0bc to 0x003b05b2 (aav)\r\n[x] 0x0014b0bc-0x003b05b2 in 0x14b0bc-0x3b05b2 (aav)\r\n[0x0015fb0c esil_neg: unknown reg v39d references (aaef)\r\n0x0015fa86 esil_neg: unknown reg v36\r\n0x0015f9da esil_neg: unknown reg v39\r\n0x0015f6dc esil_neg: unknown reg v40\r\n0x001622fa esil_neg: unknown reg v37\r\n0x001627a6 esil_neg: unknown reg v37\r\n0x002e2120 esil_neg: unknown reg v36\r\n0x0035a4c8 esil_neg: unknown reg v36\r\n[x] Emulate functions to find computed references (aaef)\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Propagate noreturn information\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\n[x] Finding function preludes\r\n[x] Enable constraint types analysis for variables\r\n[0x001e9598]> grep MethodEnum *.dex\r\n[0x001e9598]> !grep MethodEnum *.dex\r\n[0x001e9598]> !grep MethodEnum *.dex\r\n[0x001e9598]> !grep MethodEnum *.dex\r\n[0x001e9598]> !grep MethodEnum  *.dex\r\n[0x001e9598]> grep MethodEnum  *.dex\r\n\r\n```\r\nI have another quesion. **Is there anyway to analyze jar file.**\r\nI tried `r2 zip://antlr4-4.5.jar`, but there is error as below:\r\n![burning](https://user-images.githubusercontent.com/20567891/101355172-28dfad80-38d1-11eb-926b-2400aad259c3.png)\r\n","createdAt":"2020-12-07T13:10:19Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18003#issuecomment-739908684","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDczOTkzNzM3Ng==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"bin.libs only works when you open a binary. if the binary is already opened it wont do anything until tyou open another binary. so you have to set it with `r2 -e bin.libs=true ...`","createdAt":"2020-12-07T14:03:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18003#issuecomment-739937376","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDczOTkzNzc0Mw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"also its expected that `!grep` wont work with the files INSIDE the zip because you are opening the zip with r2, not with the shell.","createdAt":"2020-12-07T14:03:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18003#issuecomment-739937743","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDczOTk0OTIyMQ==","author":{"login":"BurningTeng"},"authorAssociation":"NONE","body":"Thanks your explanation. But `r2 -e bin.libs=true apk://tb.apk` does not work.\r\n![burning](https://user-images.githubusercontent.com/20567891/101361804-6dbc1200-38da-11eb-8fb4-581f9a8940cf.png)\r\n```\r\n[0x001e9598]> icq~MethodEnum\r\n[0x001e9598]> icq~+Method\r\n0x0012a95c [0x0061958f - 0x00619598] Landroid/databinding/BindingMethod Ljava/lang/Object;\r\n0x0012a97c [0x006195a0 - 0x006195a0] Landroid/databinding/BindingMethods Ljava/lang/Object;\r\n0x00130bfc [0x001f1f04 - 0x001f272a] Lcom/alibaba/wireless/security/framework/utils/UserTrackMethodJniBridge Ljava/lang/Object;\r\n0x001353fc [0x0026eab8 - 0x0026ec84] Lcom/taobao/android/trade/boost/annotations/MtopParams$RequestMethod Ljava/lang/Enum;\r\n0x001464dc [0x002c76f8 - 0x002c775e] Lcom/taobao/tao/log/godeye/methodtrace/MethodTraceInitializer Ljava/lang/Object;\r\n0x001464fc [0x002c7770 - 0x002c781c] Lcom/taobao/tao/log/godeye/methodtrace/a$1 Ltb/lax$a;\r\n0x0014651c [0x002c782c - 0x002c78d8] Lcom/taobao/tao/log/godeye/methodtrace/a$2 Ltb/lax$a;\r\n0x0014653c [0x002c78e8 - 0x002c7f8c] Lcom/taobao/tao/log/godeye/methodtrace/a Ltb/lav;\r\n[0x001e9598]> \r\n```","createdAt":"2020-12-07T14:22:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18003#issuecomment-739949221","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDczOTk2NTk2NA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Afaik this only works qith the unzipped directory. But its been an experimental feature for a long time, its useful for some situations but not many people payed attention to it.","createdAt":"2020-12-07T14:50:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18003#issuecomment-739965964","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc0MDM3NzA2Ng==","author":{"login":"BurningTeng"},"authorAssociation":"NONE","body":"Thanks. For r2frida, the comamnd works well.\r\n\r\n![burning](https://user-images.githubusercontent.com/20567891/101442158-abaa4c00-3955-11eb-9f38-56771f0234d3.png)\r\n","createdAt":"2020-12-08T05:02:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/18003#issuecomment-740377066","viewerDidAuthor":false}],"number":18003,"title":"Can not find some class which exist when using r2 to analyze apk."},{"body":"**Problem**\r\nI can not confirm address related  JNIEnv\r\n\r\n**Describe the solution you'd like**\r\nExplain how to see ESIL fo confirm JNIEnv address. \r\n\r\n**Steps as below**\r\n```\r\n$r2 -A libnative-lib.zip\r\n[0x0000f050]> afl~+jni\r\n0x0000f19c    1 56           sym._JNIEnv::NewStringUTF_char_const\r\n0x0000f08c    5 184  -> 156  sym.Java_com_example_myapplication_MainActivity_stringFromJNI\r\n[0x0000f050]> s 0x0000f08c\r\n[0x0000f08c]> pdf\r\n[0x0000f08c]> pdf\r\n            ; UNKNOWN XREF from aav.0x000032e0 @ +0x178\r\nâ”Œ 156: sym.Java_com_example_myapplication_MainActivity_stringFromJNI (int64_t arg1, int64_t arg2);\r\nâ”‚           ; var int64_t var_28h @ x29-0x28\r\nâ”‚           ; var int64_t var_bp_8h @ x29-0x8\r\nâ”‚           ; var int64_t var_0h @ sp+0x0\r\nâ”‚           ; var int64_t var_8h @ sp+0x8\r\nâ”‚           ; var int64_t var_10h @ sp+0x10\r\nâ”‚           ; var char *var_18h @ sp+0x18\r\nâ”‚           ; var int64_t var_0h_2 @ sp+0x30\r\nâ”‚           ; var int64_t var_20h @ sp+0x40\r\nâ”‚           ; var int64_t var_60h @ sp+0x60\r\nâ”‚           ; var int64_t var_60h_2 @ sp+0x68\r\nâ”‚           ; arg int64_t arg1 @ x0\r\nâ”‚           ; arg int64_t arg2 @ x1\r\nâ”‚           0x0000f08c      ffc301d1       sub sp, sp, 0x70\r\nâ”‚           0x0000f090      fd7b06a9       stp x29, x30, [var_60h]\r\nâ”‚           0x0000f094      fd830191       add x29, var_60h\r\nâ”‚           0x0000f098      48d03bd5       mrs x8, tpidr_el0\r\nâ”‚           0x0000f09c      081540f9       ldr x8, [x8, 0x28]          ; aav.0x00000028\r\nâ”‚                                                                      ; [0x28:4]=0x341f8\r\nâ”‚           0x0000f0a0      a8831ff8       stur x8, [var_bp_8h]\r\nâ”‚           0x0000f0a4      a0831df8       stur x0, [var_28h]          ; arg1\r\nâ”‚           0x0000f0a8      e11b00f9       str x1, [var_0h_2]          ; arg2\r\nâ”‚           0x0000f0ac      c10000b0       adrp x1, 0x28000\r\nâ”‚           0x0000f0b0      21201191       add x1, x1, 0x448           ; 0x28448 ; \"Hello from C++\"\r\nâ”‚           0x0000f0b4      a88300d1       sub x8, var_20h\r\nâ”‚           0x0000f0b8      e00308aa       mov x0, x8\r\nâ”‚           0x0000f0bc      e80f00f9       str x8, [var_18h]\r\nâ”‚           0x0000f0c0      94ffff97       bl fcn.0000ef10\r\nâ”‚           0x0000f0c4      a0835df8       ldur x0, [var_28h]\r\nâ”‚           0x0000f0c8      e80f40f9       ldr x8, [var_18h]           ; aav.0x00000018\r\nâ”‚                                                                      ; [0x18:4]=0xf050 pc ; \"P\\xf0\"\r\n[0x0000f08c]> to ./jniapi.h \r\n#include \"./stdarg.h\"\r\n[0x0000f08c]> tl JNINativeInterface = ?\r\n```\r\n I have read blog https://radareorg.github.io/blog/posts/crackme_with_tl/. I except the same result as these link.\r\nThe article said  \r\n> You can either use ESIL emulation or debugging to find the address of JNIEnv struct\r\n\r\nThere are little message to explain how to use  ESIL emulation to find the address of JNIEnv struct.\r\n**Additional context**\r\nlib as below:\r\n[libnative-lib.zip](https://github.com/radareorg/radare2/files/5610797/libnative-lib.zip)\r\n","comments":[],"number":17984,"title":"I can not confirm address related  JNIEnv"},{"body":"# Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Any\r\n| File format of the file you reverse (mandatory)      | Doesn't matter\r\n| Architecture/bits of the file (mandatory)            | Doesn't matter\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.6.0-git 25559 @ windows-x86-64 git.4.4.0-945-gdfe5f861 commit: dfe5f8616bc7b7151b558bbc15d9385fb6fc5224 build: 22/11/2020__19:32:06.83\r\n\r\nCaused by `r_flag_get_at()`, with `closest` set to `true`, even with `e scr.slow=false`\r\n\r\n### Expected behavior\r\n\r\nFast disassembly\r\n\r\n### Actual behavior\r\n\r\nDisassembly is very slow\r\n\r\n### Steps to reproduce the behavior \r\n```\r\nr2 malloc://50000\r\n/x 00\r\ns 50000\r\nfs symbols\r\nVp\r\n```\r\nTry moving around\r\n","comments":[],"number":17962,"title":"Slow disassembly with many flags and empty flag space selected"},{"body":"# r2 is unable to identify functions within stripped assembled binaries (no C)\r\n\r\n## setup information\r\n\r\n```\r\n$ \r\n$ cat /etc/redhat-release \r\nRed Hat Enterprise Linux Server release 7.9 (Maipo)\r\n$ \r\n```\r\n\r\n## r2 version\r\n\r\n```\r\n$ r2 -v\r\nradare2 4.6.0-git 25247 @ linux-x86-64 git.4.4.0-908-g91aebb6\r\ncommit: 91aebb64901285f5177151604816d270d0862039 build: 2020-11-09__01:33:51\r\n$ \r\n```\r\n\r\n## Expected results\r\n\r\nr2 should be able to identify functions in stripped binaries (assembled and linked, no C)\r\n\r\n## Actual results\r\n\r\nr2 is unable to identify functions in stripped binaries (assembled and linked, no C)\r\n\r\n\r\n\r\n## Sample assembly code which has a function named \"power\"\r\n\r\n```\r\n$ cat power.s\r\n.section .data\r\n\r\n.section .text\r\n\r\n.globl _start\r\n_start:\r\n pushl $3\r\n pushl $2\r\n call power\r\n addl $8, %esp\r\n pushl %eax\r\n pushl $2\r\n pushl $5\r\n call power\r\n addl $8, %esp\r\n popl %ebx\r\n addl %eax, %ebx\r\n movl $1, %eax\r\n int $0x80\r\n\r\n\r\n.type power, @function\r\npower:\r\n pushl %ebp\r\n movl %esp, %ebp\r\n subl $4, %esp\r\n movl 8(%ebp), %ebx\r\n movl 12(%ebp), %ecx\r\n movl %ebx, -4(%ebp)\r\n\r\npower_loop_start:\r\n cmpl $1, %ecx\r\n je end_power\r\n movl -4(%ebp), %eax\r\n movl %eax, -4(%ebp)\r\n decl %ecx\r\n jmp power_loop_start\r\n\r\nend_power:\r\n movl -4(%ebp), %eax\r\n movl %ebp, %esp\r\n popl %ebp\r\n ret\r\n$\r\n```\r\n\r\nAssemble the code using GNU as and link it to create a binary\r\n\r\n```\r\n$ as power.s -o power.o --32\r\n$ \r\n$ file power.o\r\npower.o: ELF 32-bit LSB relocatable, Intel 80386, version 1 (SYSV), not stripped\r\n$ \r\n$ ld power.o -o power -m elf_i386\r\n$ \r\n$ file power\r\npower: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), statically linked, not stripped\r\n$ \r\n$ ./power \r\n$\r\n```\r\n\r\nLoad the (un-stripped) binary within r2 and analyze, r2 is able to identify power function\r\n\r\n```\r\n$ r2 -A ./power\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Check for vtables\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Propagate noreturn information\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\n -- I love the smell of bugs in the morning.\r\n[0x08048054]> \r\n[0x08048054]> afl\r\n0x08048054    1 35           entry0\r\n0x08048077    4 36           sym.power                 <<<<<<<<<<<<<<<<< (power function)\r\n[0x08048054]> \r\n[0x08048054]> pdf @ entry0\r\n            ;-- section..text:\r\n            ;-- .text:\r\n            ;-- _start:\r\n            ;-- eip:\r\nâ”Œ 35: entry0 ();\r\nâ”‚           ; var int32_t var_4h @ ebp-0x4\r\nâ”‚           0x08048054      6a03           pushl $3                    ; 3 ; int32_t arg_ch ; [01] -r-x section size 71 named .text\r\nâ”‚           0x08048056      6a02           pushl $2                    ; 2 ; int32_t arg_8h\r\nâ”‚           0x08048058      e81a000000     calll sym.power\r\nâ”‚           0x0804805d      83c408         addl $8, %esp\r\nâ”‚           0x08048060      50             pushl %eax\r\nâ”‚           0x08048061      6a02           pushl $2                    ; 2 ; int32_t arg_ch\r\nâ”‚           0x08048063      6a05           pushl $5                    ; 5 ; int32_t arg_8h\r\nâ”‚           0x08048065      e80d000000     calll sym.power\r\nâ”‚           0x0804806a      83c408         addl $8, %esp\r\nâ”‚           0x0804806d      5b             popl %ebx\r\nâ”‚           0x0804806e      01c3           addl %eax, %ebx\r\nâ”‚           0x08048070      b801000000     movl $1, %eax\r\nâ””           0x08048075      cd80           int $0x80\r\n[0x08048054]> \r\n[0x08048054]> pdf @ sym.power\r\n            ; CALL XREFS from entry0 @ 0x8048058, 0x8048065\r\nâ”Œ 36: sym.power (int32_t arg_8h, int32_t arg_ch);\r\nâ”‚           ; var int32_t var_4h @ ebp-0x4\r\nâ”‚           ; arg int32_t arg_8h @ ebp+0x8\r\nâ”‚           ; arg int32_t arg_ch @ ebp+0xc\r\nâ”‚           0x08048077      55             pushl %ebp\r\nâ”‚           0x08048078      89e5           movl %esp, %ebp\r\nâ”‚           0x0804807a      83ec04         subl $4, %esp\r\nâ”‚           0x0804807d      8b5d08         movl arg_8h, %ebx\r\nâ”‚           0x08048080      8b4d0c         movl arg_ch, %ecx\r\nâ”‚           0x08048083      895dfc         movl %ebx, -4(%ebp)\r\nâ”‚           ; CODE XREF from sym.power @ 0x8048092\r\nâ”‚           ;-- power_loop_start:\r\nâ”‚       â”Œâ”€> 0x08048086      83f901         cmpl $1, %ecx               ; 1\r\nâ”‚      â”Œâ”€â”€< 0x08048089      7409           je loc.end_power\r\nâ”‚      â”‚â•Ž   0x0804808b      8b45fc         movl var_4h, %eax\r\nâ”‚      â”‚â•Ž   0x0804808e      8945fc         movl %eax, var_4h\r\nâ”‚      â”‚â•Ž   0x08048091      49             decl %ecx\r\nâ”‚      â”‚â””â”€< 0x08048092      ebf2           jmp loc.power_loop_start\r\nâ”‚      â”‚    ; CODE XREF from sym.power @ 0x8048089\r\nâ”‚      â”‚    ;-- end_power:\r\nâ”‚      â””â”€â”€> 0x08048094      8b45fc         movl var_4h, %eax\r\nâ”‚           0x08048097      89ec           movl %ebp, %esp\r\nâ”‚           0x08048099      5d             popl %ebp\r\nâ””           0x0804809a      c3             retl\r\n[0x08048054]> q\r\n$ \r\n```\r\n\r\nNow strip the binary\r\n\r\n``` \r\n$ \r\n$ cp power power.strip\r\n$ \r\n$ strip power.strip \r\n$ \r\n$ file power.strip \r\npower.strip: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), statically linked, stripped\r\n$ \r\n```\r\n\r\nLoad the stripped binary within r2, list functions,  r2 doesnt show an equivalent function name (with address) in place of \"power\" function\r\n\r\n```\r\n$ \r\n$ r2 -A ./power.strip \r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Check for vtables\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Propagate noreturn information\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\n -- Yo dawg!\r\n[0x08048054]> \r\n[0x08048054]> afl\r\n0x08048054    4 71           entry0               <<<<<<<<<<<<<<< (no power function or equivalent)\r\n[0x08048054]> \r\n[0x08048054]> pdf @ entry0\r\n            ;-- section..text:\r\n            ;-- eip:\r\nâ”Œ 71: entry0 (int32_t arg_8h, int32_t arg_ch);\r\nâ”‚           ; var int32_t var_4h @ ebp-0x4\r\nâ”‚           ; arg int32_t arg_8h @ ebp+0x8\r\nâ”‚           ; arg int32_t arg_ch @ ebp+0xc\r\nâ”‚           0x08048054      6a03           pushl $3                    ; 3 ; [01] -r-x section size 71 named .text\r\nâ”‚           0x08048056      6a02           pushl $2                    ; 2\r\nâ”‚           0x08048058      e81a000000     calll 0x8048077          <<<<<<<<< (calls to power function)\r\nâ”‚           0x0804805d      83c408         addl $8, %esp\r\nâ”‚           0x08048060      50             pushl %eax\r\nâ”‚           0x08048061      6a02           pushl $2                    ; 2\r\nâ”‚           0x08048063      6a05           pushl $5                    ; 5\r\nâ”‚           0x08048065      e80d000000     calll 0x8048077          <<<<<<<<< (calls to power function)\r\nâ”‚           0x0804806a      83c408         addl $8, %esp\r\nâ”‚           0x0804806d      5b             popl %ebx\r\nâ”‚           0x0804806e      01c3           addl %eax, %ebx\r\nâ”‚           0x08048070      b801000000     movl $1, %eax\r\nâ”‚           0x08048075      cd80           int $0x80\r\nâ”‚           ; CALL XREFS from entry0 @ 0x8048058, 0x8048065\r\nâ”‚           0x08048077      55             pushl %ebp                    <<<<<<<<<<< (start of power function)\r\nâ”‚           0x08048078      89e5           movl %esp, %ebp\r\nâ”‚           0x0804807a      83ec04         subl $4, %esp\r\nâ”‚           0x0804807d      8b5d08         movl arg_8h, %ebx\r\nâ”‚           0x08048080      8b4d0c         movl arg_ch, %ecx\r\nâ”‚           0x08048083      895dfc         movl %ebx, var_4h\r\nâ”‚           ; CODE XREF from entry0 @ 0x8048092\r\nâ”‚       â”Œâ”€> 0x08048086      83f901         cmpl $1, %ecx               ; 1\r\nâ”‚      â”Œâ”€â”€< 0x08048089      7409           je 0x8048094\r\nâ”‚      â”‚â•Ž   0x0804808b      8b45fc         movl var_4h, %eax\r\nâ”‚      â”‚â•Ž   0x0804808e      8945fc         movl %eax, var_4h\r\nâ”‚      â”‚â•Ž   0x08048091      49             decl %ecx\r\nâ”‚      â”‚â””â”€< 0x08048092      ebf2           jmp 0x8048086\r\nâ”‚      â”‚    ; CODE XREF from entry0 @ 0x8048089\r\nâ”‚      â””â”€â”€> 0x08048094      8b45fc         movl var_4h, %eax\r\nâ”‚           0x08048097      89ec           movl %ebp, %esp\r\nâ”‚           0x08048099      5d             popl %ebp\r\nâ””           0x0804809a      c3             retl\r\n[0x08048054]> \r\n```\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDczMTU5MzE5OA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Aaaa is only suposed to be used in standard binaries.\n\nFor your case i would use e anal.hasnext=1;afr or aac","createdAt":"2020-11-21T15:21:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17953#issuecomment-731593198","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDczMjAxMzE5MQ==","author":{"login":"kamathe"},"authorAssociation":"NONE","body":"Tried the suggested steps, did not make a difference\r\n\r\nStripped binary from before\r\n\r\n```\r\n$ file power.strip \r\npower.strip: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), statically linked, stripped\r\n$ \r\n```\r\n\r\nLoading into r2 and enabling `anal.hasnext`\r\n\r\n```\r\n$ r2 ./power.strip\r\n -- This incident will be reported\r\n[0x08048054]> \r\n[0x08048054]> e | grep anal.hasnext\r\nanal.hasnext = false\r\n[0x08048054]> \r\n[0x08048054]> e anal.hasnext = 1\r\n[0x08048054]> \r\n[0x08048054]> e | grep anal.hasnext\r\nanal.hasnext = true\r\n[0x08048054]> \r\n```\r\n\r\nRunning both `afr` and `aac`, however `afl` still does not detect and list the function\r\n\r\n```\r\n[0x08048054]> afr\r\n[0x08048054]> \r\n[0x08048054]> afl\r\n0x08048054    4 71           entry0\r\n[0x08048054]> \r\n[0x08048054]> aac\r\n[0x08048054]> \r\n[0x08048054]> afl\r\n0x08048054    4 71           entry0\r\n[0x08048054]> \r\n```\r\n\r\nWe can see the function is being called multiple times in below disassembly of entry0\r\n\r\n```\r\n[0x08048054]> pdf @ entry0\r\n            ;-- section..text:\r\n            ;-- eip:\r\nâ”Œ 71: entry0 (int32_t arg_8h, int32_t arg_ch);\r\nâ”‚           ; var int32_t var_4h @ ebp-0x4\r\nâ”‚           ; arg int32_t arg_8h @ ebp+0x8\r\nâ”‚           ; arg int32_t arg_ch @ ebp+0xc\r\nâ”‚           0x08048054      6a03           pushl $3                    ; 3 ; [01] -r-x section size 71 named .text\r\nâ”‚           0x08048056      6a02           pushl $2                    ; 2\r\nâ”‚           0x08048058      e81a000000     calll 0x8048077      <<<<<<<< function call\r\nâ”‚           0x0804805d      83c408         addl $8, %esp\r\nâ”‚           0x08048060      50             pushl %eax\r\nâ”‚           0x08048061      6a02           pushl $2                    ; 2\r\nâ”‚           0x08048063      6a05           pushl $5                    ; 5\r\nâ”‚           0x08048065      e80d000000     calll 0x8048077      <<<<<<<< function call\r\nâ”‚           0x0804806a      83c408         addl $8, %esp\r\nâ”‚           0x0804806d      5b             popl %ebx\r\nâ”‚           0x0804806e      01c3           addl %eax, %ebx\r\nâ”‚           0x08048070      b801000000     movl $1, %eax\r\nâ”‚           0x08048075      cd80           int $0x80\r\nâ”‚           ; CALL XREFS from entry0 @ 0x8048054, 0x8048058, 0x8048065\r\nâ”‚           0x08048077      55             pushl %ebp\r\nâ”‚           0x08048078      89e5           movl %esp, %ebp\r\nâ”‚           0x0804807a      83ec04         subl $4, %esp\r\nâ”‚           0x0804807d      8b5d08         movl arg_8h, %ebx\r\nâ”‚           0x08048080      8b4d0c         movl arg_ch, %ecx\r\nâ”‚           0x08048083      895dfc         movl %ebx, var_4h\r\nâ”‚           ; CODE XREFS from entry0 @ 0x8048054, 0x8048092\r\nâ”‚       â”Œâ”€> 0x08048086      83f901         cmpl $1, %ecx               ; 1\r\nâ”‚      â”Œâ”€â”€< 0x08048089      7409           je 0x8048094\r\nâ”‚      â”‚â•Ž   0x0804808b      8b45fc         movl var_4h, %eax\r\nâ”‚      â”‚â•Ž   0x0804808e      8945fc         movl %eax, var_4h\r\nâ”‚      â”‚â•Ž   0x08048091      49             decl %ecx\r\nâ”‚      â”‚â””â”€< 0x08048092      ebf2           jmp 0x8048086\r\nâ”‚      â””â”€â”€> 0x08048094      8b45fc         movl var_4h, %eax\r\nâ”‚           0x08048097      89ec           movl %ebp, %esp\r\nâ”‚           0x08048099      5d             popl %ebp\r\nâ””           0x0804809a      c3             retl\r\n[0x08048054]> \r\n```\r\n","createdAt":"2020-11-23T08:39:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17953#issuecomment-732013191","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDczMjM3NTI4MQ==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"The issue is that `exit` syscall (`mov eax, 1; int 0x80`) is not determined as a end of function and r2 stops analysis of function at `0x08048054` (`entry0`) only after reaching `ret` instruction at `0x0804809a` (which is actually the end of function `power`). In case of non-stripped binary function `power` is created forcefully during `aa` since there are a symbol at `0x08048077`. Thats why you see there 2 functions.             ","createdAt":"2020-11-23T19:26:24Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17953#issuecomment-732375281","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDczMjM3OTU5Ng==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"You can just call `af @ entry0` on non-stripped and stripped binaries to ensure that the issue is caused by this syscall.","createdAt":"2020-11-23T19:33:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17953#issuecomment-732379596","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDczMjk1Mjg0NQ==","author":{"login":"kamathe"},"authorAssociation":"NONE","body":"@pelijah Thank you for the detailed information, I did not take the `exit` syscall into account.\r\nMy understanding was that function prologue and epilogue instructions (below) should be enough to identify a function from stripped binary. However since this is a handwritten binary it shouldn't matter that much (other than CTF's), most of the (compiled) standard binaries will have required information in place.\r\nSo I think this isn't really a bug and can be closed ?\r\n\r\n```\r\n# function entry\r\npushl %ebp\r\nmovl %ebp, %esp\r\n\r\n\r\n# function exit\r\npopl %ebp\r\nmovl %esp, %ebp\r\n```","createdAt":"2020-11-24T12:48:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17953#issuecomment-732952845","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDczMjk4NTY4MA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"It actually is a bug, because the exit syscall in the simple form as `movl $1, %eax; int $0x80` should be detected and interpreted as a no_return function.","createdAt":"2020-11-24T13:52:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17953#issuecomment-732985680","viewerDidAuthor":false}],"number":17953,"title":"r2 is unable to identify functions within stripped assembled binaries (no C)"},{"body":"Hi,\r\n\r\nwhen i install debug symbols , ubuntu packages with -dbgsym at the end,  they are located in /usr/lib/debug/  . How can i say radare2 where they are ? \r\n\r\nI found this issue (https://github.com/radareorg/radare2/issues/5758) and tried oa command, but first i dont know exactly what arch and bits strings i should give the command, but it tells me, cannot find file ?\r\n\r\nI also found this issue (https://github.com/radareorg/radare2/issues/8666)  but there is sadly also no solution.\r\n\r\nAnd there is (https://radare.gitbooks.io/radare2book/content/analysis/symbols.html) where simply is stated:\r\nDWARF information loading, on the other hand, is completely automated. You don't need to run any commands/change any options:\r\n\r\nIs there a way to tell radare2 in which directories to search for ?\r\n\r\nthx\r\nflo\r\n","comments":[],"number":17949,"title":"how to use/load debug symbol files from ubuntu -dbgsym packages"},{"body":"Currently only glibc heap is tested with\r\n- [radare2-testbins/heap/linux_glibc-2.30_x64.bin](https://github.com/radareorg/radare2-testbins/blob/master/heap/linux_glibc-2.30_x64.bin)\r\n- [test/db/archos/linux-x64/dbg_dmh](https://github.com/radareorg/radare2/blob/master/test/db/archos/linux-x64/dbg_dmh)\r\n\r\n```\r\nNAME=dmh/dmha with memory dump\r\nFILE=bins/heap/linux_glibc-2.30_x64.bin\r\nARGS=-n\r\nCMDS=<<EOF\r\n#re-map arena and [heap]\r\nom 3 0x7ffff7f8a000 0x898 0x0 rw- arena\r\nom 3 0x555555559000 0x3200 0x898 rw- [heap]\r\n\r\ndmha~?0x7ffff7f8a000\r\ne dbg.glibc.tcache=0\r\ndmh~?allocated\r\ne dbg.glibc.tcache=1\r\ndmh~?allocated\r\nEOF\r\nEXPECT=<<EOF\r\n1\r\n3\r\n2\r\nEOF\r\nRUN\r\n```\r\n\r\nNote, that this static test probably should be moved under a separate category `heap`, since not really dependent from the operating system.\r\n\r\nWe need add this static tests for Windows heap parser and jemalloc too.\r\n\r\ncc @GustavoLCR @meowmeowxw ","comments":[],"number":17941,"title":"Add Windows and Jemalloc heap parsing tests"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 20.04\r\n| File format of the file you reverse (mandatory)      | arm\r\n| Architecture/bits of the file (mandatory)            | aarch64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.6.0-git 25255 @ linux-x86-64 git.4.4.0-919-g324a26f5c commit: 324a26f5c6290bcfd6d214b1665230d4d542c197 build: 2020-11-10__18:33:12\r\n\r\n### Expected behavior\r\nI can debug chrome process\r\n### Actual behavior\r\nChrome process quit\r\n### Steps to reproduce the behavior \r\nI have run gdbserver on Android 10 which is rooted to debug Chrome process.\r\n1. Run gdbserver to attach process\r\n```\r\nSOV39:/ # setenforce 0                                                                                                                                                                                    \r\nSOV39:/ # gdbs   \r\ngdbserver    gdbserver64\r\nSOV39:/ # gdbserver --version                                                                                                                                                                             \r\nGNU gdbserver (GDB) 7.11\r\nCopyright (C) 2016 Free Software Foundation, Inc.\r\ngdbserver is free software, covered by the GNU General Public License.\r\nThis gdbserver was configured as \"arm-eabi-linux\"\r\nSOV39:/ # gdbserver remote:1234 --attach 29931\r\nAttached; pid = 29931\r\nListening on port 1234\r\n```\r\n2. port forward\r\n```\r\n$ adb forward tcp:1234 tcp:1234\r\n```\r\n3. Remote debug\r\n```\r\n$ r2 -d gdb://127.0.0.1:1234\r\n```\r\nThe behavior as following:\r\n```\r\n$ r2 -d gdb://127.0.0.1:1234\r\nWARNING: r_file_exists: assertion '!R_STR_ISEMPTY (str)' failed (line 165)\r\n= attach 29931 29931\r\n -- r2 is meant to be read by machines.\r\nFor Android:\r\nSOV39:/ # gdbserver remote:1234 --attach 29931\r\nAttached; pid = 29931\r\nListening on port 1234\r\nRemote debugging from host 127.0.0.1\r\n```\r\n","comments":[],"number":17933,"title":"When start debug android process, the app is frozen and app process will quit"},{"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nProblem ? Not really !\r\n\r\n\r\nAs a newbie interested in Binary Analysis I often like to see the equivalent Assembly code generated by a C (or others) source code as a means of understanding Assembly in general. Off course this requires a debug binary to be build.\r\n\r\nCurrently I make use of `objdump -S <debug-bin-file>` and save the equivalent output to a file.\r\nThis provides a nice listing of a single line of C source code, followed by equivalent Assembly instructions for that specific line of C source code only. Listing below (ignore the line numbers towards the left)\r\n\r\n\r\nThe output is void of any syntax highlighting, however some things like cmix.vim exists which make it a bit saner\r\n\r\n```\r\n  247     if (argc != 2) {\r\n  248   400bef:   83 bd 1c f9 ff ff 02    cmpl   $0x2,-0x6e4(%rbp)\r\n  249   400bf6:   74 2d                   je     400c25 <main+0x58>\r\n  250         fprintf(stderr, \"Usage: %s <hostname>\\n\", argv[0]);\r\n  251   400bf8:   48 8b 85 10 f9 ff ff    mov    -0x6f0(%rbp),%rax\r\n  252   400bff:   48 8b 10                mov    (%rax),%rdx\r\n  253   400c02:   48 8b 05 ef 14 20 00    mov    0x2014ef(%rip),%rax        # 6020f8 <stderr@@GLIBC_2.2.5>\r\n  254   400c09:   be 50 12 40 00          mov    $0x401250,%esi\r\n  255   400c0e:   48 89 c7                mov    %rax,%rdi\r\n  256   400c11:   b8 00 00 00 00          mov    $0x0,%eax\r\n  257   400c16:   e8 15 fe ff ff          callq  400a30 <fprintf@plt>\r\n  258         exit(-1);\r\n  259   400c1b:   bf ff ff ff ff          mov    $0xffffffff,%edi\r\n  260   400c20:   e8 8b fe ff ff          callq  400ab0 <exit@plt>\r\n  261     }\r\n```\r\n\r\nThe only equivalent feature in r2 that I could find was `pdf` which shows following output.\r\nAs you can see it shows source code towards the right, however not all source code lines are shown.\r\nI understand this might be due to \"no assembly\" being generated for certain C source code lines like declaration of variables etc. However it still leads to missing some context when looking at a debug binary.\r\nThe output makes it difficult to pair 1 C source code line to few equivalent assembly instruction.\r\nThe `objdump -S` output shown above is much saner for this purpose\r\n\r\nI am not aware of any option already being available that I am not aware of.\r\nI had asked on the #freenode IRC channel as well, however didn't reach anywhere\r\n\r\n\r\n```\r\nâ”‚           0x00400bcd      55             pushq %rbp                  ; xping.c:40 { ; int main(int argc,char ** argv);\r\nâ”‚           0x00400bce      4889e5         movq %rsp, %rbp\r\nâ”‚           0x00400bd1      4881ecf00600.  subq $0x6f0, %rsp\r\nâ”‚           0x00400bd8      89bd1cf9ffff   movl %edi, var_6e4h         ; argc\r\nâ”‚           0x00400bde      4889b510f9ff.  movq %rsi, var_6f0h         ; argv\r\nâ”‚           0x00400be5      c7852cf9ffff.  movl $1, on                 ; xping.c:49  const int on = 1;\r\nâ”‚           0x00400bef      83bd1cf9ffff.  cmpl $2, var_6e4h           ; xping.c:51  if (argc != 2) {\r\nâ”‚       â”Œâ”€< 0x00400bf6      742d           je 0x400c25\r\nâ”‚       â”‚   0x00400bf8      488b8510f9ff.  movq var_6f0h, %rax         ; xping.c:52   fprintf(stderr, \"Usage: %s <hostname>\\n\", argv[0]);\r\nâ”‚       â”‚   0x00400bff      488b10         movq (%rax), %rdx\r\nâ”‚       â”‚   0x00400c02      488b05ef1420.  movq obj.stderr, %rax       ; obj.stderr__GLIBC_2.2.5\r\nâ”‚       â”‚                                                              ; [0x6020f8:8]=0\r\nâ”‚       â”‚   0x00400c09      be50124000     movl $str.Usage:__s__hostname, %esi ; 0x401250 ; \"Usage: %s <hostname>\\n\" ; const char *format\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n**Describe the solution you'd like**\r\n\r\nSimple, an output equivalent to `objdump -S` within radare2 with all the beautiful syntax highlighting (+ maybe other features)\r\n\r\n\r\n\r\n**Describe alternatives you've considered**\r\n\r\nOften leads me to reach out to `objdump` when I would prefer to use r2 for all my disassembly needs\r\n\r\n\r\n\r\n**In short**\r\n\r\nCurrent r2 view\r\n\r\n```\r\n<assembly instruction>                                            <source C code>\r\n```\r\n\r\nRequest for objdump equivalent feature in r2\r\n\r\n```\r\n<source C code>\r\n<equivalent assembly instructions>\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDcyNjExMzgxMQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Hi! Just to understand: is r2 missing any source lines or the problem is you prefer the objdump way of showing source code lines?","createdAt":"2020-11-12T14:31:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17917#issuecomment-726113811","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcyNjEyODQzOQ==","author":{"login":"kamathe"},"authorAssociation":"NONE","body":"@ret2libc Thank you for looking into this, for your above queries, both I think.\r\n\r\nI believe objdump takes the source first approach in case of -S option (for areas where source is available in debug binaries), so its as if you are opening C source file in vim which is followed by equivalent disassembly (below it). The C source is the focus.\r\n\r\nConfirmed from objdump's man page for -S option\r\n\r\n```\r\nDisplay source code intermixed with disassembly, if possible.\r\n```\r\n\r\nWhere as in the r2 since assembly is the main focus (even thought its a debug binary), you see assembly first (starting from left) and the equivalent C is printed on the right hand side where ever it can match instructions.\r\n\r\nIn the above r2 output you can see the first C source code line being `xping.c:40`, then directly it shows `xping.c:49` skipping source code lines in between (I understand they do not generate any assembly).\r\nSo the flow from source -> disassembly is *not* very clear.\r\n\r\nI understand r2 is mostly used for binaries where source code *isnt* available, however this could be a nice addition to existing r2 features for beginners who write code and want to see the disassembly it generates in a easy to read format (r2 could even do better than objdump -S) \r\n\r\n","createdAt":"2020-11-12T14:55:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17917#issuecomment-726128439","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcyNjE1MjU2Ng==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Could you also paste the source code of the file?","createdAt":"2020-11-12T15:33:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17917#issuecomment-726152566","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcyNjE4MTc2NA==","author":{"login":"kamathe"},"authorAssociation":"NONE","body":"@ret2libc It could be any sample source code, for purpose of current request I shamelessly picked source code from beej's guide below as it is (showip.c)\r\n\r\nhttp://beej.us/guide/bgnet/html/\r\n\r\n```\r\n$ cat showip.c \r\n#include <stdio.h>\r\n#include <string.h>\r\n#include <sys/types.h>\r\n#include <sys/socket.h>\r\n#include <netdb.h>\r\n#include <arpa/inet.h>\r\n#include <netinet/in.h>\r\n\r\nint main(int argc, char *argv[])\r\n{\r\n    struct addrinfo hints, *res, *p;\r\n    int status;\r\n    char ipstr[INET6_ADDRSTRLEN];\r\n\r\n    if (argc != 2) {\r\n        fprintf(stderr,\"usage: showip hostname\\n\");\r\n        return 1;\r\n    }\r\n\r\n    memset(&hints, 0, sizeof hints);\r\n    hints.ai_family = AF_UNSPEC; // AF_INET or AF_INET6 to force version\r\n    hints.ai_socktype = SOCK_STREAM;\r\n\r\n    if ((status = getaddrinfo(argv[1], NULL, &hints, &res)) != 0) {\r\n        fprintf(stderr, \"getaddrinfo: %s\\n\", gai_strerror(status));\r\n        return 2;\r\n    }\r\n\r\n    printf(\"IP addresses for %s:\\n\\n\", argv[1]);\r\n\r\n    for(p = res;p != NULL; p = p->ai_next) {\r\n        void *addr;\r\n        char *ipver;\r\n\r\n        // get the pointer to the address itself,\r\n        // different fields in IPv4 and IPv6:\r\n        if (p->ai_family == AF_INET) { // IPv4\r\n            struct sockaddr_in *ipv4 = (struct sockaddr_in *)p->ai_addr;\r\n            addr = &(ipv4->sin_addr);\r\n            ipver = \"IPv4\";\r\n        } else { // IPv6\r\n            struct sockaddr_in6 *ipv6 = (struct sockaddr_in6 *)p->ai_addr;\r\n            addr = &(ipv6->sin6_addr);\r\n            ipver = \"IPv6\";\r\n        }\r\n\r\n        // convert the IP to a string and print it:\r\n        inet_ntop(p->ai_family, addr, ipstr, sizeof ipstr);\r\n        printf(\"  %s: %s\\n\", ipver, ipstr);\r\n    }\r\n\r\n    freeaddrinfo(res); // free the linked list\r\n\r\n    return 0;\r\n}\r\n$ \r\n```\r\n\r\nCompile it with debug ON\r\n\r\n```\r\n$ gcc -g showip.c -o showip\r\n$ \r\n```\r\n\r\nCheck program flow (source + disassembly) via objdump -S\r\nYou are really able to see the complete flow of the program by following the source and equivalent disassembly\r\n\r\n```\r\n$ \r\n$ objdump -S showip | grep ^\\# -A 152\r\n#include <netdb.h>\r\n#include <arpa/inet.h>\r\n#include <netinet/in.h>\r\n\r\nint main(int argc, char *argv[])\r\n{\r\n  40077d:\t55                   \tpush   %rbp\r\n  40077e:\t48 89 e5             \tmov    %rsp,%rbp\r\n  400781:\t48 81 ec b0 00 00 00 \tsub    $0xb0,%rsp\r\n  400788:\t89 bd 5c ff ff ff    \tmov    %edi,-0xa4(%rbp)\r\n  40078e:\t48 89 b5 50 ff ff ff \tmov    %rsi,-0xb0(%rbp)\r\n    struct addrinfo hints, *res, *p;\r\n    int status;\r\n    char ipstr[INET6_ADDRSTRLEN];\r\n\r\n    if (argc != 2) {\r\n  400795:\t83 bd 5c ff ff ff 02 \tcmpl   $0x2,-0xa4(%rbp)\r\n  40079c:\t74 28                \tje     4007c6 <main+0x49>\r\n        fprintf(stderr,\"usage: showip hostname\\n\");\r\n  40079e:\t48 8b 05 cb 08 20 00 \tmov    0x2008cb(%rip),%rax        # 601070 <stderr@@GLIBC_2.2.5>\r\n  4007a5:\t48 89 c1             \tmov    %rax,%rcx\r\n  4007a8:\tba 17 00 00 00       \tmov    $0x17,%edx\r\n  4007ad:\tbe 01 00 00 00       \tmov    $0x1,%esi\r\n  4007b2:\tbf c0 09 40 00       \tmov    $0x4009c0,%edi\r\n  4007b7:\te8 a4 fe ff ff       \tcallq  400660 <fwrite@plt>\r\n        return 1;\r\n  4007bc:\tb8 01 00 00 00       \tmov    $0x1,%eax\r\n  4007c1:\te9 5e 01 00 00       \tjmpq   400924 <main+0x1a7>\r\n    }\r\n\r\n    memset(&hints, 0, sizeof hints);\r\n  4007c6:\t48 8d 45 a0          \tlea    -0x60(%rbp),%rax\r\n  4007ca:\tba 30 00 00 00       \tmov    $0x30,%edx\r\n  4007cf:\tbe 00 00 00 00       \tmov    $0x0,%esi\r\n  4007d4:\t48 89 c7             \tmov    %rax,%rdi\r\n  4007d7:\te8 44 fe ff ff       \tcallq  400620 <memset@plt>\r\n    hints.ai_family = AF_UNSPEC; // AF_INET or AF_INET6 to force version\r\n  4007dc:\tc7 45 a4 00 00 00 00 \tmovl   $0x0,-0x5c(%rbp)\r\n    hints.ai_socktype = SOCK_STREAM;\r\n  4007e3:\tc7 45 a8 01 00 00 00 \tmovl   $0x1,-0x58(%rbp)\r\n\r\n    if ((status = getaddrinfo(argv[1], NULL, &hints, &res)) != 0) {\r\n  4007ea:\t48 8b 85 50 ff ff ff \tmov    -0xb0(%rbp),%rax\r\n  4007f1:\t48 83 c0 08          \tadd    $0x8,%rax\r\n  4007f5:\t48 8b 00             \tmov    (%rax),%rax\r\n  4007f8:\t48 8d 4d 98          \tlea    -0x68(%rbp),%rcx\r\n  4007fc:\t48 8d 55 a0          \tlea    -0x60(%rbp),%rdx\r\n  400800:\tbe 00 00 00 00       \tmov    $0x0,%esi\r\n  400805:\t48 89 c7             \tmov    %rax,%rdi\r\n  400808:\te8 63 fe ff ff       \tcallq  400670 <getaddrinfo@plt>\r\n  40080d:\t89 45 e4             \tmov    %eax,-0x1c(%rbp)\r\n  400810:\t83 7d e4 00          \tcmpl   $0x0,-0x1c(%rbp)\r\n  400814:\t74 30                \tje     400846 <main+0xc9>\r\n        fprintf(stderr, \"getaddrinfo: %s\\n\", gai_strerror(status));\r\n  400816:\t8b 45 e4             \tmov    -0x1c(%rbp),%eax\r\n  400819:\t89 c7                \tmov    %eax,%edi\r\n  40081b:\te8 f0 fd ff ff       \tcallq  400610 <gai_strerror@plt>\r\n  400820:\t48 89 c2             \tmov    %rax,%rdx\r\n  400823:\t48 8b 05 46 08 20 00 \tmov    0x200846(%rip),%rax        # 601070 <stderr@@GLIBC_2.2.5>\r\n  40082a:\tbe d8 09 40 00       \tmov    $0x4009d8,%esi\r\n  40082f:\t48 89 c7             \tmov    %rax,%rdi\r\n  400832:\tb8 00 00 00 00       \tmov    $0x0,%eax\r\n  400837:\te8 04 fe ff ff       \tcallq  400640 <fprintf@plt>\r\n        return 2;\r\n  40083c:\tb8 02 00 00 00       \tmov    $0x2,%eax\r\n  400841:\te9 de 00 00 00       \tjmpq   400924 <main+0x1a7>\r\n    }\r\n\r\n    printf(\"IP addresses for %s:\\n\\n\", argv[1]);\r\n  400846:\t48 8b 85 50 ff ff ff \tmov    -0xb0(%rbp),%rax\r\n  40084d:\t48 83 c0 08          \tadd    $0x8,%rax\r\n  400851:\t48 8b 00             \tmov    (%rax),%rax\r\n  400854:\t48 89 c6             \tmov    %rax,%rsi\r\n  400857:\tbf e9 09 40 00       \tmov    $0x4009e9,%edi\r\n  40085c:\tb8 00 00 00 00       \tmov    $0x0,%eax\r\n  400861:\te8 9a fd ff ff       \tcallq  400600 <printf@plt>\r\n\r\n    for(p = res;p != NULL; p = p->ai_next) {\r\n  400866:\t48 8b 45 98          \tmov    -0x68(%rbp),%rax\r\n  40086a:\t48 89 45 f8          \tmov    %rax,-0x8(%rbp)\r\n  40086e:\te9 95 00 00 00       \tjmpq   400908 <main+0x18b>\r\n        void *addr;\r\n        char *ipver;\r\n\r\n        // get the pointer to the address itself,\r\n        // different fields in IPv4 and IPv6:\r\n        if (p->ai_family == AF_INET) { // IPv4\r\n  400873:\t48 8b 45 f8          \tmov    -0x8(%rbp),%rax\r\n  400877:\t8b 40 04             \tmov    0x4(%rax),%eax\r\n  40087a:\t83 f8 02             \tcmp    $0x2,%eax\r\n  40087d:\t75 22                \tjne    4008a1 <main+0x124>\r\n            struct sockaddr_in *ipv4 = (struct sockaddr_in *)p->ai_addr;\r\n  40087f:\t48 8b 45 f8          \tmov    -0x8(%rbp),%rax\r\n  400883:\t48 8b 40 18          \tmov    0x18(%rax),%rax\r\n  400887:\t48 89 45 d8          \tmov    %rax,-0x28(%rbp)\r\n            addr = &(ipv4->sin_addr);\r\n  40088b:\t48 8b 45 d8          \tmov    -0x28(%rbp),%rax\r\n  40088f:\t48 83 c0 04          \tadd    $0x4,%rax\r\n  400893:\t48 89 45 f0          \tmov    %rax,-0x10(%rbp)\r\n            ipver = \"IPv4\";\r\n  400897:\t48 c7 45 e8 00 0a 40 \tmovq   $0x400a00,-0x18(%rbp)\r\n  40089e:\t00 \r\n  40089f:\teb 20                \tjmp    4008c1 <main+0x144>\r\n        } else { // IPv6\r\n            struct sockaddr_in6 *ipv6 = (struct sockaddr_in6 *)p->ai_addr;\r\n  4008a1:\t48 8b 45 f8          \tmov    -0x8(%rbp),%rax\r\n  4008a5:\t48 8b 40 18          \tmov    0x18(%rax),%rax\r\n  4008a9:\t48 89 45 d0          \tmov    %rax,-0x30(%rbp)\r\n            addr = &(ipv6->sin6_addr);\r\n  4008ad:\t48 8b 45 d0          \tmov    -0x30(%rbp),%rax\r\n  4008b1:\t48 83 c0 08          \tadd    $0x8,%rax\r\n  4008b5:\t48 89 45 f0          \tmov    %rax,-0x10(%rbp)\r\n            ipver = \"IPv6\";\r\n  4008b9:\t48 c7 45 e8 05 0a 40 \tmovq   $0x400a05,-0x18(%rbp)\r\n  4008c0:\t00 \r\n        }\r\n\r\n        // convert the IP to a string and print it:\r\n        inet_ntop(p->ai_family, addr, ipstr, sizeof ipstr);\r\n  4008c1:\t48 8b 45 f8          \tmov    -0x8(%rbp),%rax\r\n  4008c5:\t8b 40 04             \tmov    0x4(%rax),%eax\r\n  4008c8:\t48 8d 95 60 ff ff ff \tlea    -0xa0(%rbp),%rdx\r\n  4008cf:\t48 8b 75 f0          \tmov    -0x10(%rbp),%rsi\r\n  4008d3:\tb9 2e 00 00 00       \tmov    $0x2e,%ecx\r\n  4008d8:\t89 c7                \tmov    %eax,%edi\r\n  4008da:\te8 11 fd ff ff       \tcallq  4005f0 <inet_ntop@plt>\r\n        printf(\"  %s: %s\\n\", ipver, ipstr);\r\n  4008df:\t48 8d 95 60 ff ff ff \tlea    -0xa0(%rbp),%rdx\r\n  4008e6:\t48 8b 45 e8          \tmov    -0x18(%rbp),%rax\r\n  4008ea:\t48 89 c6             \tmov    %rax,%rsi\r\n  4008ed:\tbf 0a 0a 40 00       \tmov    $0x400a0a,%edi\r\n  4008f2:\tb8 00 00 00 00       \tmov    $0x0,%eax\r\n  4008f7:\te8 04 fd ff ff       \tcallq  400600 <printf@plt>\r\n    for(p = res;p != NULL; p = p->ai_next) {\r\n  4008fc:\t48 8b 45 f8          \tmov    -0x8(%rbp),%rax\r\n  400900:\t48 8b 40 28          \tmov    0x28(%rax),%rax\r\n  400904:\t48 89 45 f8          \tmov    %rax,-0x8(%rbp)\r\n  400908:\t48 83 7d f8 00       \tcmpq   $0x0,-0x8(%rbp)\r\n  40090d:\t0f 85 60 ff ff ff    \tjne    400873 <main+0xf6>\r\n    }\r\n\r\n    freeaddrinfo(res); // free the linked list\r\n  400913:\t48 8b 45 98          \tmov    -0x68(%rbp),%rax\r\n  400917:\t48 89 c7             \tmov    %rax,%rdi\r\n  40091a:\te8 61 fd ff ff       \tcallq  400680 <freeaddrinfo@plt>\r\n\r\n    return 0;\r\n  40091f:\tb8 00 00 00 00       \tmov    $0x0,%eax\r\n}\r\n  400924:\tc9                   \tleaveq \r\n  400925:\tc3                   \tretq   \r\n  400926:\t66 2e 0f 1f 84 00 00 \tnopw   %cs:0x0(%rax,%rax,1)\r\n  40092d:\t00 00 00 \r\n\r\n0000000000400930 <__libc_csu_init>:\r\n$ \r\n```\r\n\r\nEquivalent r2 output via pdf, the flow of the program (combined with source) is not very clear here\r\n\r\n```\r\n$ \r\n$ r2 -A -qc \"pdf @dbg.main\" ./showip\r\n            ; DATA XREF from entry0 @ 0x4006ad\r\n            ;-- main:\r\nâ”Œ 425: int dbg.main (uint32_t argc, char **argv);\r\nâ”‚           ; var char **var_b0h @ rbp-0xb0\r\nâ”‚           ; var uint32_t var_a4h @ rbp-0xa4\r\nâ”‚           ; var char[46] ipstr @ rbp-0xa0\r\nâ”‚           ; var addrinfo *res @ rbp-0x68\r\nâ”‚           ; var addrinfo hints @ rbp-0x60\r\nâ”‚           ; var sockaddr_in6 *ipv6 @ rbp-0x30\r\nâ”‚           ; var sockaddr_in *ipv4 @ rbp-0x28\r\nâ”‚           ; var int status @ rbp-0x1c\r\nâ”‚           ; var char *ipver @ rbp-0x18\r\nâ”‚           ; var void *addr @ rbp-0x10\r\nâ”‚           ; var addrinfo *p @ rbp-0x8\r\nâ”‚           ; arg uint32_t argc @ rdi\r\nâ”‚           ; arg char **argv @ rsi\r\nâ”‚           0x0040077d      55             pushq %rbp                  ; showip.c:10 { ; int main(int argc,char ** argv);\r\nâ”‚           0x0040077e      4889e5         movq %rsp, %rbp\r\nâ”‚           0x00400781      4881ecb00000.  subq $0xb0, %rsp\r\nâ”‚           0x00400788      89bd5cffffff   movl %edi, var_a4h          ; argc\r\nâ”‚           0x0040078e      4889b550ffff.  movq %rsi, var_b0h          ; argv\r\nâ”‚           0x00400795      83bd5cffffff.  cmpl $2, var_a4h            ; showip.c:15     if (argc != 2) {\r\nâ”‚       â”Œâ”€< 0x0040079c      7428           je 0x4007c6\r\nâ”‚       â”‚   0x0040079e      488b05cb0820.  movq obj.stderr, %rax       ; showip.c:16         fprintf(stderr,\"usage: showip hostname\\n\"); ; obj.stderr__GLIBC_2.2.5\r\nâ”‚       â”‚                                                              ; [0x601070:8]=0\r\nâ”‚       â”‚   0x004007a5      4889c1         movq %rax, %rcx             ; FILE *stream\r\nâ”‚       â”‚   0x004007a8      ba17000000     movl $0x17, %edx            ; 23 ; size_t nitems\r\nâ”‚       â”‚   0x004007ad      be01000000     movl $1, %esi               ; size_t size\r\nâ”‚       â”‚   0x004007b2      bfc0094000     movl $str.usage:_showip_hostname, %edi ; 0x4009c0 ; \"usage: showip hostname\\n\" ; const void *ptr\r\nâ”‚       â”‚   0x004007b7      e8a4feffff     callq sym.imp.fwrite        ; size_t fwrite(const void *ptr, size_t size, size_t nitems, FILE *stream)\r\nâ”‚       â”‚   0x004007bc      b801000000     movl $1, %eax               ; showip.c:17         return 1;\r\nâ”‚      â”Œâ”€â”€< 0x004007c1      e95e010000     jmp 0x400924\r\nâ”‚      â”‚â”‚   ; CODE XREF from dbg.main @ 0x40079c\r\nâ”‚      â”‚â””â”€> 0x004007c6      488d45a0       leaq hints.ai_flags, %rax   ; showip.c:20     memset(&hints, 0, sizeof hints);\r\nâ”‚      â”‚    0x004007ca      ba30000000     movl $0x30, %edx            ; '0' ; 48 ; size_t n\r\nâ”‚      â”‚    0x004007cf      be00000000     movl $0, %esi               ; int c\r\nâ”‚      â”‚    0x004007d4      4889c7         movq %rax, %rdi             ; void *s\r\nâ”‚      â”‚    0x004007d7      e844feffff     callq sym.imp.memset        ; void *memset(void *s, int c, size_t n)\r\nâ”‚      â”‚    0x004007dc      c745a4000000.  movl $0, hints.ai_family    ; showip.c:21     hints.ai_family = AF_UNSPEC; // AF_INET or AF_INET6 to force version\r\nâ”‚      â”‚    0x004007e3      c745a8010000.  movl $1, hints.ai_socktype  ; showip.c:22     hints.ai_socktype = SOCK_STREAM;\r\nâ”‚      â”‚    0x004007ea      488b8550ffff.  movq var_b0h, %rax          ; showip.c:24     if ((status = getaddrinfo(argv[1], NULL, &hints, &res)) != 0) {\r\nâ”‚      â”‚    0x004007f1      4883c008       addq $8, %rax\r\nâ”‚      â”‚    0x004007f5      488b00         movq (%rax), %rax\r\nâ”‚      â”‚    0x004007f8      488d4d98       leaq res, %rcx\r\nâ”‚      â”‚    0x004007fc      488d55a0       leaq hints.ai_flags, %rdx\r\nâ”‚      â”‚    0x00400800      be00000000     movl $0, %esi\r\nâ”‚      â”‚    0x00400805      4889c7         movq %rax, %rdi\r\nâ”‚      â”‚    0x00400808      e863feffff     callq sym.imp.getaddrinfo\r\nâ”‚      â”‚    0x0040080d      8945e4         movl %eax, status\r\nâ”‚      â”‚    0x00400810      837de400       cmpl $0, status\r\nâ”‚      â”‚â”Œâ”€< 0x00400814      7430           je 0x400846\r\nâ”‚      â”‚â”‚   0x00400816      8b45e4         movl status, %eax           ; showip.c:25         fprintf(stderr, \"getaddrinfo: %s\\n\", gai_strerror(status));\r\nâ”‚      â”‚â”‚   0x00400819      89c7           movl %eax, %edi\r\nâ”‚      â”‚â”‚   0x0040081b      e8f0fdffff     callq sym.imp.gai_strerror\r\nâ”‚      â”‚â”‚   0x00400820      4889c2         movq %rax, %rdx\r\nâ”‚      â”‚â”‚   0x00400823      488b05460820.  movq obj.stderr, %rax       ; obj.stderr__GLIBC_2.2.5\r\nâ”‚      â”‚â”‚                                                              ; [0x601070:8]=0\r\nâ”‚      â”‚â”‚   0x0040082a      bed8094000     movl $str.getaddrinfo:__s, %esi ; 0x4009d8 ; \"getaddrinfo: %s\\n\" ; const char *format\r\nâ”‚      â”‚â”‚   0x0040082f      4889c7         movq %rax, %rdi             ; FILE *stream\r\nâ”‚      â”‚â”‚   0x00400832      b800000000     movl $0, %eax\r\nâ”‚      â”‚â”‚   0x00400837      e804feffff     callq sym.imp.fprintf       ; int fprintf(FILE *stream, const char *format,   ...)\r\nâ”‚      â”‚â”‚   0x0040083c      b802000000     movl $2, %eax               ; showip.c:26         return 2;\r\nâ”‚     â”Œâ”€â”€â”€< 0x00400841      e9de000000     jmp 0x400924\r\nâ”‚     â”‚â”‚â”‚   ; CODE XREF from dbg.main @ 0x400814\r\nâ”‚     â”‚â”‚â””â”€> 0x00400846      488b8550ffff.  movq var_b0h, %rax          ; showip.c:29     printf(\"IP addresses for %s:\\n\\n\", argv[1]);\r\nâ”‚     â”‚â”‚    0x0040084d      4883c008       addq $8, %rax\r\nâ”‚     â”‚â”‚    0x00400851      488b00         movq (%rax), %rax\r\nâ”‚     â”‚â”‚    0x00400854      4889c6         movq %rax, %rsi\r\nâ”‚     â”‚â”‚    0x00400857      bfe9094000     movl $str.IP_addresses_for__s:, %edi ; 0x4009e9 ; \"IP addresses for %s:\\n\\n\" ; const char *format\r\nâ”‚     â”‚â”‚    0x0040085c      b800000000     movl $0, %eax\r\nâ”‚     â”‚â”‚    0x00400861      e89afdffff     callq sym.imp.printf        ; int printf(const char *format)\r\nâ”‚     â”‚â”‚    0x00400866      488b4598       movq res, %rax              ; showip.c:31     for(p = res;p != NULL; p = p->ai_next) {\r\nâ”‚     â”‚â”‚    0x0040086a      488945f8       movq %rax, p\r\nâ”‚     â”‚â”‚â”Œâ”€< 0x0040086e      e995000000     jmp 0x400908\r\nâ”‚     â”‚â”‚â”‚   ; CODE XREF from dbg.main @ 0x40090d\r\nâ”‚    â”Œâ”€â”€â”€â”€> 0x00400873      488b45f8       movq p, %rax                ; showip.c:37         if (p->ai_family == AF_INET) { // IPv4\r\nâ”‚    â•Žâ”‚â”‚â”‚   0x00400877      8b4004         movl 4(%rax), %eax\r\nâ”‚    â•Žâ”‚â”‚â”‚   0x0040087a      83f802         cmpl $2, %eax               ; 2\r\nâ”‚   â”Œâ”€â”€â”€â”€â”€< 0x0040087d      7522           jne 0x4008a1\r\nâ”‚   â”‚â•Žâ”‚â”‚â”‚   0x0040087f      488b45f8       movq p, %rax                ; showip.c:38             struct sockaddr_in *ipv4 = (struct sockaddr_in *)p->ai_addr;\r\nâ”‚   â”‚â•Žâ”‚â”‚â”‚   0x00400883      488b4018       movq 0x18(%rax), %rax\r\nâ”‚   â”‚â•Žâ”‚â”‚â”‚   0x00400887      488945d8       movq %rax, ipv4\r\nâ”‚   â”‚â•Žâ”‚â”‚â”‚   0x0040088b      488b45d8       movq ipv4, %rax             ; showip.c:39             addr = &(ipv4->sin_addr);\r\nâ”‚   â”‚â•Žâ”‚â”‚â”‚   0x0040088f      4883c004       addq $4, %rax\r\nâ”‚   â”‚â•Žâ”‚â”‚â”‚   0x00400893      488945f0       movq %rax, addr\r\nâ”‚   â”‚â•Žâ”‚â”‚â”‚   0x00400897      48c745e8000a.  movq $str.IPv4, ipver       ; showip.c:40             ipver = \"IPv4\"; ; 0x400a00 ; \"IPv4\"\r\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€< 0x0040089f      eb20           jmp 0x4008c1\r\nâ”‚  â”‚â”‚â•Žâ”‚â”‚â”‚   ; CODE XREF from dbg.main @ 0x40087d\r\nâ”‚  â”‚â””â”€â”€â”€â”€â”€> 0x004008a1      488b45f8       movq p, %rax                ; showip.c:42             struct sockaddr_in6 *ipv6 = (struct sockaddr_in6 *)p->ai_addr;\r\nâ”‚  â”‚ â•Žâ”‚â”‚â”‚   0x004008a5      488b4018       movq 0x18(%rax), %rax\r\nâ”‚  â”‚ â•Žâ”‚â”‚â”‚   0x004008a9      488945d0       movq %rax, ipv6\r\nâ”‚  â”‚ â•Žâ”‚â”‚â”‚   0x004008ad      488b45d0       movq ipv6, %rax             ; showip.c:43             addr = &(ipv6->sin6_addr);\r\nâ”‚  â”‚ â•Žâ”‚â”‚â”‚   0x004008b1      4883c008       addq $8, %rax\r\nâ”‚  â”‚ â•Žâ”‚â”‚â”‚   0x004008b5      488945f0       movq %rax, addr\r\nâ”‚  â”‚ â•Žâ”‚â”‚â”‚   0x004008b9      48c745e8050a.  movq $str.IPv6, ipver       ; showip.c:44             ipver = \"IPv6\"; ; 0x400a05 ; \"IPv6\"\r\nâ”‚  â”‚ â•Žâ”‚â”‚â”‚   ; CODE XREF from dbg.main @ 0x40089f\r\nâ”‚  â””â”€â”€â”€â”€â”€â”€> 0x004008c1      488b45f8       movq p, %rax                ; showip.c:48         inet_ntop(p->ai_family, addr, ipstr, sizeof ipstr);\r\nâ”‚    â•Žâ”‚â”‚â”‚   0x004008c5      8b4004         movl 4(%rax), %eax\r\nâ”‚    â•Žâ”‚â”‚â”‚   0x004008c8      488d9560ffff.  leaq ipstr, %rdx\r\nâ”‚    â•Žâ”‚â”‚â”‚   0x004008cf      488b75f0       movq addr, %rsi\r\nâ”‚    â•Žâ”‚â”‚â”‚   0x004008d3      b92e000000     movl $0x2e, %ecx            ; '.' ; 46\r\nâ”‚    â•Žâ”‚â”‚â”‚   0x004008d8      89c7           movl %eax, %edi\r\nâ”‚    â•Žâ”‚â”‚â”‚   0x004008da      e811fdffff     callq sym.imp.inet_ntop\r\nâ”‚    â•Žâ”‚â”‚â”‚   0x004008df      488d9560ffff.  leaq ipstr, %rdx            ; showip.c:49         printf(\"  %s: %s\\n\", ipver, ipstr);\r\nâ”‚    â•Žâ”‚â”‚â”‚   0x004008e6      488b45e8       movq ipver, %rax\r\nâ”‚    â•Žâ”‚â”‚â”‚   0x004008ea      4889c6         movq %rax, %rsi\r\nâ”‚    â•Žâ”‚â”‚â”‚   0x004008ed      bf0a0a4000     movl $str.s:__s, %edi       ; 0x400a0a ; \"  %s: %s\\n\" ; const char *format\r\nâ”‚    â•Žâ”‚â”‚â”‚   0x004008f2      b800000000     movl $0, %eax\r\nâ”‚    â•Žâ”‚â”‚â”‚   0x004008f7      e804fdffff     callq sym.imp.printf        ; int printf(const char *format)\r\nâ”‚    â•Žâ”‚â”‚â”‚   0x004008fc      488b45f8       movq p, %rax                ; showip.c:31     for(p = res;p != NULL; p = p->ai_next) {\r\nâ”‚    â•Žâ”‚â”‚â”‚   0x00400900      488b4028       movq 0x28(%rax), %rax\r\nâ”‚    â•Žâ”‚â”‚â”‚   0x00400904      488945f8       movq %rax, p\r\nâ”‚    â•Žâ”‚â”‚â”‚   ; CODE XREF from dbg.main @ 0x40086e\r\nâ”‚    â•Žâ”‚â”‚â””â”€> 0x00400908      48837df800     cmpq $0, p\r\nâ”‚    â””â”€â”€â”€â”€< 0x0040090d      0f8560ffffff   jne 0x400873\r\nâ”‚     â”‚â”‚    0x00400913      488b4598       movq res, %rax              ; showip.c:52     freeaddrinfo(res); // free the linked list\r\nâ”‚     â”‚â”‚    0x00400917      4889c7         movq %rax, %rdi\r\nâ”‚     â”‚â”‚    0x0040091a      e861fdffff     callq sym.imp.freeaddrinfo\r\nâ”‚     â”‚â”‚    0x0040091f      b800000000     movl $0, %eax               ; showip.c:54     return 0;\r\nâ”‚     â”‚â”‚    ; CODE XREFS from dbg.main @ 0x4007c1, 0x400841\r\nâ”‚     â””â””â”€â”€> 0x00400924      c9             leave                       ; showip.c:55 }\r\nâ””           0x00400925      c3             retq\r\n$ \r\n```\r\n","createdAt":"2020-11-12T16:20:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17917#issuecomment-726181764","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcyNjE4Mzc4NA==","author":{"login":"kamathe"},"authorAssociation":"NONE","body":"Also just to be clear I am not requesting core functionality of `pdf` to change in any way. It works great.\r\nI think I am requesting a specific tweak flag which produces objdump -S like output when required in case of viewing debug binaries","createdAt":"2020-11-12T16:23:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17917#issuecomment-726183784","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcyNjM5NDExMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"e asm.dwarf=true\n\nSent from my iPhone\n\n> On 12 Nov 2020, at 17:23, kamathe <notifications@github.com> wrote:\n> \n> ï»¿\n> Also just to be clear I am not requesting core functionality of pdf to change in any way. It works great.\n> I think I am requesting a specific tweak flag which produces objdump -S like output when required in case of viewing debug binaries\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-11-12T23:01:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17917#issuecomment-726394112","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcyNjQ5ODkxNw==","author":{"login":"kamathe"},"authorAssociation":"NONE","body":"@radare tried that, I don't think it made any difference in the output\r\n\r\n```\r\n[0x00401180]> e asm.dwarf=true\r\n[0x00401180]> pdf @ dbg.main\r\n            ; DATA XREF from entry0 @ 0x4011a1\r\n            ;-- main:\r\nâ”Œ 636: int dbg.main (uint32_t argc, char **argv);\r\n```\r\n\r\n\r\nI think it picks up dwarf info during analysis phase itself in case of a debug binary \r\n\r\n```\r\n[0x00401180]> aaa\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Check for vtables\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Propagate noreturn information\r\n[x] Integrate dwarf function information.   <<<<<<<<<<<<<<<<<<<<\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\n[0x00401180]>\r\n```","createdAt":"2020-11-13T04:23:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17917#issuecomment-726498917","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5diMdG","author":{"login":"bryanpkc"},"authorAssociation":"NONE","body":"How do I get `dbg.main` to show up? I compiled a simple binary with `-g`, and `objdump -S` does the right thing with it, but `r2` doesn't know anything about `dbg.main`, only `sym.main`.","createdAt":"2023-05-30T23:00:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17917#issuecomment-1569244998","viewerDidAuthor":false}],"number":17917,"title":"Implement a objdump -S <debug-binary> output equivalent in r2"},{"body":"I just noticed that when **scrolling down even just one single line**\r\n1. radare2 apparently **doesn't cache** anything\r\n1.  **reads** the mapped region **again**\r\n1. calculates the disasm for a region that overlaps (close to 100%) what has previously been **disassembled already**\r\n\r\nAs a consequence, when showing 200+ lines of disasm, scrolling is slow, **very slow**.\r\n\r\n**Feature Request (for massive performance gain)**\r\n1. Cache disasm for all lines\r\n2. If scrolling (the disasm offset) or code change did not invalidate the previously calculated disasm, display the cached result.\r\n3. When scrolling to a \"new location\", only new instructions need to be recomputed.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDcyMzk3ODIxNg==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Use panels, graph or the webui where things are cached. It's known behaviour, and it shuoldnt be slow as far as i know all O(1) bottlenecks have been fixed. So the result is not slow, but can be faster of course if caching the output like the mentioned frontends do.\r\n\r\nAlso, i assume you are talking about the visual mode, right?","createdAt":"2020-11-09T12:18:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17907#issuecomment-723978216","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDcyNDIxODI1Mw==","author":{"login":"karliss"},"authorAssociation":"CONTRIBUTOR","body":"Last time I checked it not only reads mapped region again but it reads 1024 bytes for each instruction, so for printing 200 lines as suggested above it would read 200KB mostly overlapping which can be very slow when using debug IO backends.","createdAt":"2020-11-09T19:12:46Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17907#issuecomment-724218253","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcyNDI4MTQyOA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Thats exactly what core-block was about. But now every single read goes thru a large list of data structures and unnecessary operations just to get the data that is not cached by default (yes the io have an option to be flat and cached). And yep slow io backends are the main bottleneck on the whole thing but caching wont solve the problem of reading so much unnecessary data.","createdAt":"2020-11-09T21:13:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17907#issuecomment-724281428","viewerDidAuthor":true}],"number":17907,"title":"Feature Request: Performance (Speedup of e.g. Scrolling) by Caching Results (e.g. Disassembly)"},{"body":"### Work environment\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             |  Debian 4.19.146-1 x86 64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.6.0-git 25299 @ linux-x86-64 git.4.4.0-842-g027992970 commit: 027992970402ef2ba84478bc5c8b433de8a08967 build: 2020-10-25__18:36:32\r\n\r\n### Expected behavior\r\n\r\n```\r\n[0x56421b3281bb]> dmha\r\nmain_arena @ 0x7ffa332e8c40\r\nthread arena @ 0x7ffa2c000020\r\n[0x56421b3281bb]> dmh 0x7ffa332e8c40\r\n\r\n  Malloc chunk @ 0x56421b361250 [size: 0x3f0][free]\r\n  Malloc chunk @ 0x56421b361640 [size: 0x120][allocated]\r\n  Top chunk @ 0x56421b361760 - [brk_start: 0x56421b361000, brk_end: 0x56421b382000]\r\n\r\n[0x56421b3281bb]> dmh 0x7ffa2c000020\r\n\r\n  Malloc chunk @ 0x7ffa2c000b10 [size: 0x3f0][allocated]\r\n  Top chunk @ 0x7ffa2c000f00 - [brk_start: 0x7ffa2c000000, brk_end: 0x7ffa2c021000]\r\n\r\n```\r\n\r\n### Actual behavior\r\n\r\n```\r\n[0x56421b3281bb]> dmha\r\nmain_arena @ 0x7ffa332e8c40\r\nthread arena @ 0x7ffa2c000020\r\n[0x56421b3281bb]> dmh 0x7ffa332e8c40\r\n\r\n  Malloc chunk @ 0x56421b361250 [size: 0x3f0][free]\r\n  Malloc chunk @ 0x56421b361640 [size: 0x120][allocated]\r\n  Top chunk @ 0x56421b361760 - [brk_start: 0x56421b361000, brk_end: 0x56421b382000]\r\n\r\n[0x56421b3281bb]> dmh 0x7ffa2c000020\r\n\r\n  Malloc chunk @ 0x7ffa2c000b50 [corrupted]\r\n   size: 0x0\r\n   fd: 0x0, bk: 0x0\r\n\r\n  Top chunk @ 0x7ffa2c000f00 - [brk_start: 0x7ffa2c000000, brk_end: 0x7ffa2c021000]\r\n\r\n```\r\nThe heap of the thread is shown as corrupted. This could happen because of an structure at the top of the heap that is not correctly parsed.\r\n\r\n### Steps to reproduce the behavior \r\nThe binary is [heapthreads.zip](https://github.com/radareorg/radare2/files/5435613/heapthreads.zip).\r\n\r\nTo reproduce with the binary: \r\n```\r\nr2 -A -c 'db sym.thread_func+77;dc;dmha;dmh `dmha~:1[3]`' -d heapthreads\r\n```\r\n\r\nThe breakpoint is set before calling `free` in `thread_func`, then the heap of the thread arena is shown with `dmh`.\r\n\r\n### Source-code\r\n\r\nThe code of the binary is the following:\r\n```c\r\n#include <stdio.h>\r\n#include <stdlib.h>\r\n#include <pthread.h>\r\n#include <unistd.h>\r\n#include <string.h>\r\n#include <sys/types.h>\r\n\r\n#define print(msg) (write(STDOUT_FILENO, msg, strlen(msg)))\r\n\r\nvoid* thread_func(void* arg) {\r\n  print(\"Before malloc in thread 1\\n\");\r\n\r\n  char* addr = (char*) malloc(1000);\r\n  print(\"After malloc and before free in thread 1\\n\");\r\n  \r\n  free(addr);\r\n  print(\"After free in thread 1\\n\");\r\n\r\n  return NULL;\r\n}\r\n\r\nint main() {\r\n  pthread_t t1;\r\n  void* s;\r\n  int ret;\r\n  char* addr;\r\n\r\n  print(\"Before malloc in main thread\\n\");\r\n  \r\n  addr = (char*) malloc(1000);\r\n  print(\"After malloc and before free in main thread\\n\");\r\n  \r\n  free(addr);\r\n  print(\"After free in main thread\\n\");\r\n\r\n  ret = pthread_create(&t1, NULL, thread_func, NULL);\r\n  if(ret)\r\n    {\r\n      print(\"Thread creation error\\n\");\r\n      return -1;\r\n    }\r\n  ret = pthread_join(t1, &s);\r\n  if(ret)\r\n    {\r\n      print(\"Thread join error\\n\");\r\n      return -1;\r\n    }\r\n  return 0;\r\n}\r\n```\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDcxNjIyMzgzNw==","author":{"login":"meowmeowxw"},"authorAssociation":"CONTRIBUTOR","body":"Hi, what is the glibc version that are you using? With glibc 2.32 this is the output I got (which is the expected one):\r\n\r\n```\r\n$ r2 -A -c 'db sym.thread_func+77;dc;dmha;dmh `dmha~:1[3]`' -d heapthreads\r\nProcess with PID 149796 started...\r\n= attach 149796 149796\r\nbin.baddr 0x5564c87fa000\r\nUsing 0x5564c87fa000\r\nasm.bits 64\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Check for vtables\r\n[TOFIX: aaft can't run in debugger mode.ions (aaft)\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Propagate noreturn information\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\nBefore malloc in main thread\r\nAfter malloc and before free in main thread\r\nAfter free in main thread\r\n(149796) Created thread 149797\r\nBefore malloc in thread 1\r\nAfter malloc and before free in thread 1\r\nPTRACE_GETREGS: No such process\r\nPTRACE_GETFPREGS: No such process\r\nPTRACE_GETREGSET: No such process\r\nPTRACE_GETREGS: No such process\r\nPTRACE_GETREGS: No such process\r\n= attach 149796 149797\r\nhit breakpoint at: 0x5564c87fb1c2\r\nmain_arena @ 0x7f9aef710a00\r\nthread arena @ 0x7f9ae8000020\r\n\r\n  Malloc chunk @ 0x7f9ae8000b50 [size: 0x3f0][allocated]\r\n  Top chunk @ 0x7f9ae8000f40 - [brk_start: 0x7f9ae8000000, brk_end: 0x7f9ae8021000]\r\n```\r\n\r\nTo know which version you are using you can `strings` on the libc.so.6 and grep for \"libc 2.\"","createdAt":"2020-10-25T22:36:16Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17849#issuecomment-716223837","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcxNzY2NTY5MA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Can you please dump the corresponding memory chunk and attach it here? So we can add it in our autotests.\r\nSee how it's done in our tests:\r\n- https://github.com/radareorg/radare2/blob/master/test/db/archos/linux-x64/dbg_dmh#L33\r\n- https://github.com/radareorg/radare2-testbins/tree/master/heap","createdAt":"2020-10-28T03:05:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17849#issuecomment-717665690","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcxODQyMDA4Mw==","author":{"login":"zer1t0"},"authorAssociation":"NONE","body":"Hi, my glibc version is 2.28.\r\n\r\n@XVilka could you describe me the necessary commands to create a dump file like linux_glibc-2.30_x64.bin? It seems that the tests read linux_glibc-2.30_x64.bin, file but I don't understand how to create a similar file with glibc.2.28. ","createdAt":"2020-10-29T07:27:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17849#issuecomment-718420083","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcxODQzNzk3NA==","author":{"login":"zer1t0"},"authorAssociation":"NONE","body":"Hi, I been playing a little more with the arenas and when I use a 32-bit version of heapthreads then the behaviour is the opposite, it parses correctly the thread arena, but fails parsing the main arena. (Same environment)\r\n\r\nThe command is: \r\n```\r\nr2 -A -c 'db sym.thread_func+87;dc;dmha;dmh;dmh `dmha~:1[3]`' -d heapthreads32\r\n```\r\nSame as before, the breakpoint is set before calling `free` in `thread_func`, then the heap of the thread arena is shown with `dmh`.\r\n\r\nAnd my output is:\r\n```\r\nProcess with PID 2315 started...\r\n= attach 2315 2315\r\nbin.baddr 0x565f5000\r\nUsing 0x565f5000\r\nasm.bits 32\r\nglibc.fc_offset = 0x00148\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Check for vtables\r\n[TOFIX: aaft can't run in debugger mode.ions (aaft)\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Propagate noreturn information\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\nBefore malloc in main thread\r\nAfter malloc and before free in main thread\r\nAfter free in main thread\r\n(2315) Created thread 2316\r\nBefore malloc in thread 1\r\n[+] SIGNAL 11 errno=0 addr=0x235f6060 code=1 si_pid=593453152 ret=0\r\nmain_arena @ 0xf7f847a0\r\nthread arena @ 0xf7400018\r\n\r\n  Malloc chunk @ 0x575e8148 [corrupted]\r\n   size: 0x0\r\n   fd: 0x0, bk: 0x0\r\n\r\n  Top chunk @ 0x575e8a38 - [brk_start: 0x575e8000, brk_end: 0x5760a000]\r\n\r\n\r\n  Malloc chunk @ 0xf74005c8 [size: 0x3f0][allocated]\r\n  Top chunk @ 0xf74009b8 - [brk_start: 0xf7400000, brk_end: 0xf7421000]\r\n\r\n -- This shell has been seized by the Internet's Police.\r\n[0xf7fd2069]> \r\n```\r\nAs you can see, the main arena is shown as corrupted, whereas the thread arena is parsed correctly in this occasion.\r\n\r\nThank you for maintaining an amazing software such as radare2. :)\r\n\r\nThe file:\r\n[heapthreads32.zip](https://github.com/radareorg/radare2/files/5456769/heapthreads32.zip)\r\n","createdAt":"2020-10-29T07:44:48Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17849#issuecomment-718437974","viewerDidAuthor":false}],"number":17849,"title":"Error parsing non main arena heap with dmh"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n|1. OS/arch/bits (mandatory)                                         |  Windows 10\r\n|2. File format of the file you reverse (mandatory)      | PE\r\n|3. Architecture/bits of the file (mandatory)                | x86/32\r\n|4. r2 -v full output, **not truncated** (mandatory)                                                                       | radare2 4.5.1 1 @ windows-x86-32 git.4.5.1 commit: 293cf5ae65ba4e28828095dcae212955593ba255 build: Thu 09/03/2020__ 6:26:28.01\r\n\r\n### Expected behavior\r\n\r\nAfter setting up:\r\n```\r\ne anal.jmp.ref=true\r\ne anal.jmp.cref=true\r\n````\r\nAnd doing `aaaa` analysis, I want to see labels on the addresses and after jump mnemonics, instead of addresses like:\r\n```\r\nloc.00401000:\r\n  mov eax.....\r\n  jmp loc.00401000\r\n```\r\n\r\ninstead of:\r\n```\r\n00401000: mov eax....\r\n00401020: jmp 0x401000`\r\n```\r\n\r\n### Actual behavior\r\n\r\nLabels not shown\r\n\r\n### Steps to reproduce the behavior\r\n\r\n```\r\nradare2.exe t1.exe\r\n> e anal.jmp.ref=true\r\n> e anal.jmp.cref=true\r\n> aaaa\r\n> pd\r\n```\r\n\r\n<img width=\"495\" alt=\"Ð¡Ð½Ð¸Ð¼Ð¾Ðº ÑÐºÑ€Ð°Ð½Ð° 2020-10-09 Ð² 14 02 23\" src=\"https://user-images.githubusercontent.com/7781994/95575919-3cd57300-0a38-11eb-9d54-7269e5bb328a.png\">\r\n<img width=\"899\" alt=\"Ð¡Ð½Ð¸Ð¼Ð¾Ðº ÑÐºÑ€Ð°Ð½Ð° 2020-10-09 Ð² 14 02 44\" src=\"https://user-images.githubusercontent.com/7781994/95575929-4232bd80-0a38-11eb-9870-b900532cc56e.png\">\r\n\r\n[t1.exe.zip](https://github.com/radareorg/radare2/files/5354478/t1.exe.zip)\r\n\r\n\r\n\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDcwNjI0NTU3Mw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I wrote a script to achieve that, can be a good idea to support it directly in r2. but the script will solve your problem if you are in a hurry:\r\n\r\n```python\r\n$ cat labelling.py\r\nimport r2pipe\r\n\r\nr2 = r2pipe.open()\r\nr2.cmd(\"e asm.flags.inbytes=true\")\r\nr2.cmd(\"e asm.bytes=true\")\r\nr2.cmd(\"e asm.offset=false\")\r\nr2.cmd(\"e asm.sub.jmp=false\")\r\nr2.cmd(\"e asm.sub.jmp=true\")\r\nr2.cmd(\"e asm.lines=false\")\r\nr2.cmd(\"aa\")\r\nr2.cmd(\"aac\")\r\n# only for x86-32,64\r\njdst = r2.cmd(\"/at cjmp~[3]\").strip().split(\"\\n\")\r\nfor j in jdst:\r\n\tif j.strip() == \"\":\r\n\t\tbreak\r\n\tr2.cmd(\"f lab.%x = %s\"%(int(j, 16), j))\r\njdst = r2.cmd(\"/at jmp~[3]\").strip().split(\"\\n\")\r\nfor j in jdst:\r\n\tif j.strip() == \"\":\r\n\t\tbreak\r\n\tr2.cmd(\"f lab.%x = %s\"%(int(j, 16), j))\r\nprint (r2.cmd(\"f~label\"))\r\nr2.cmd(\"f-hit*\")\r\nprint(r2.cmd(\"pdf\"))\r\nr2.cmd(\"e asm.sub.jmp=true\")\r\n$\r\n```","createdAt":"2020-10-09T15:23:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17772#issuecomment-706245573","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDcwNjI0NjAyMw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"![Screenshot 2020-10-09 at 17 24 32](https://user-images.githubusercontent.com/6431515/95601811-4cfb4b80-0a54-11eb-881e-e9d9c8322644.png)\r\n","createdAt":"2020-10-09T15:24:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17772#issuecomment-706246023","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDcwNjI0OTgzMQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"For extra pleasure you can also enable `[0x0040200f]> e asm.flags.real =1`","createdAt":"2020-10-09T15:31:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17772#issuecomment-706249831","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDcwNjI2MDcwOA==","author":{"login":"lgeffect"},"authorAssociation":"NONE","body":"This script not works on other binaries, like this.\r\n<img width=\"502\" alt=\"Ð¡Ð½Ð¸Ð¼Ð¾Ðº ÑÐºÑ€Ð°Ð½Ð° 2020-10-09 Ð² 18 50 54\" src=\"https://user-images.githubusercontent.com/7781994/95604590-75894280-0a60-11eb-9c74-d8aaf5803469.png\">\r\n[t2.zip](https://github.com/radareorg/radare2/files/5356038/t2.zip)\r\n\r\n\r\n","createdAt":"2020-10-09T15:52:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17772#issuecomment-706260708","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcwNjI2ODE1Nw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"That's because of the BND prefix, lemme rephrase that:\r\n\r\n```python\r\nimport r2pipe\r\n\r\nr2 = r2pipe.open()\r\nr2.cmd(\"e asm.flags.inbytes=true\")\r\nr2.cmd(\"e asm.bytes=true\")\r\nr2.cmd(\"e asm.offset=false\")\r\nr2.cmd(\"e asm.sub.jmp=false\")\r\nr2.cmd(\"e asm.sub.jmp=true\")\r\nr2.cmd(\"e asm.flags.real=true\")\r\nr2.cmd(\"e asm.lines=false\")\r\nr2.cmd(\"aa\")\r\nr2.cmd(\"aac\")\r\n# only for x86-32,64\r\njdst = r2.cmd(\"/atq cjmp;/atq jmp\").strip().split(\"\\n\")\r\nfor j in jdst:\r\n\tr2.cmd(\"s %s; f lab.`?v $j` = $j\"%(j))\r\nprint (r2.cmd(\"f~label\"))\r\nr2.cmd(\"f-hit*\")\r\nprint(r2.cmd(\"pdf\"))\r\nr2.cmd(\"e asm.sub.jmp=true\")\r\n```","createdAt":"2020-10-09T16:06:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17772#issuecomment-706268157","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDcwNjI2ODY5Nw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"![Screenshot 2020-10-09 at 18 07 29](https://user-images.githubusercontent.com/6431515/95606209-4d96e080-0a5a-11eb-90fc-94665954e6cd.png)\r\n","createdAt":"2020-10-09T16:07:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17772#issuecomment-706268697","viewerDidAuthor":true}],"number":17772,"title":"R2 don't show labels on conditional and unconditional jumps"},{"body":"The initialization of autocompletion stuff is done many times, when it shuold be done only once. Maybe by passing core ..?\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Debian arm 64, Ubuntu x86 32\r\n| File format of the file you reverse (mandatory)      | PE, ELF etc.\r\n| Architecture/bits of the file (mandatory)            | PPC, x86/32, x86/64 etc.\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.6.0-git 27211 @ darwin-x86-64 git.4.4.0-792-g0c90f971f commit: 0c90f971f58c633d2f988f2edc844d4210c7ab1a build: 2020-10-08__17:32:55\r\n\r\n### Expected behavior\r\n\r\ninit once\r\n\r\n### Actual behavior\r\n\r\ninit on every command. see this backtrace, which is most of the time spent when running r2 -0 thru r2pipe\r\n\r\n![Screenshot 2020-10-09 at 00 45 06](https://user-images.githubusercontent.com/6431515/95521006-cfd6c480-09c8-11eb-8685-e0d4a6dcd6ab.png)\r\n\r\n^[\r\n### Steps to reproduce the behavior \r\n- Please share the binary if it is shareable by drag and dropping it here in a zip archive (mandatory)\r\n- Use asciinema to describe the issue and share the link here (mandatory if u can't share the binary) \r\n- Use code markdown `CODE` to make your code visible\r\n- Or even better, create a Pull-Request containing the test case in the test/ folder. See for example test/new/db/cmd/cmd_search.\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\nDrag and drop zip archives containing the Additional info here, don't use external services or link.\r\n","comments":[],"number":17768,"title":"Slow autocompletion init"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | macOS 10.15.6\r\n| File format of the file you reverse (mandatory)      | Mach-O\r\n| Architecture/bits of the file (mandatory)            | arm64/arm64e\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.6.0-git 25116 @ darwin-x86-64 git.4.4.0-787-g16a91fbe5<br>commit: 16a91fbe5ac930575ee6b24d3a3b25d0085688c1 build: 2020-10-06__01:49:45\r\n\r\n### Expected behavior\r\n\r\nLess than 5 seconds with `-Fmach064`:\r\n\r\n```\r\n% time r2 -q -c '/x 0010c09a:00fce0ff' -Fmach064 iOS-14.0.1-18A393-j307ap,j308ap\r\nSearching 4 bytes in [0xfffffff009cec000-0xfffffff009d10608]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff009bc4000-0xfffffff009cec000]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff009ba4000-0xfffffff009bc4000]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff009a54000-0xfffffff009ba4000]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff009a50000-0xfffffff009a54000]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff009a4c000-0xfffffff009a50000]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff009a48000-0xfffffff009a4c000]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff009a44000-0xfffffff009a48000]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff009a24000-0xfffffff009a44000]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff007b50000-0xfffffff009a24000]\r\nhits: 5\r\nSearching 4 bytes in [0xfffffff0077c8000-0xfffffff007b50000]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff007004000-0xfffffff0077c8000]\r\nhits: 2\r\n0xfffffff007b84b46 hit0_0 1a12c89a\r\n0xfffffff007edb81e hit0_1 0b12c99a\r\n0xfffffff008370295 hit0_2 0113cb9a\r\n0xfffffff00910c4d3 hit0_3 4a11d59a\r\n0xfffffff00911514a hit0_4 0111cc9a\r\n0xfffffff0070ad17c hit0_5 ed10c19a\r\n0xfffffff0070d3d3f hit0_6 f311cb9a\r\nr2 -q -c '/x 0010c09a:00fce0ff' -Fmach064 iOS-14.0.1-18A393-j307ap,j308ap  4.74s user 0.09s system 98% cpu 4.887 total\r\n```\r\n\r\n### Actual behavior\r\n\r\nMore than 6 minutes with `-Fkernelcache`:\r\n\r\n```\r\n% time r2 -q -c '/x 0010c09a:00fce0ff' -Fkernelcache iOS-14.0.1-18A393-j307ap,j308ap\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nreconstructing chained fixups\r\nSearching 4 bytes in [0xfffffff009cec000-0xfffffff009d10608]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff009bc4000-0xfffffff009cec000]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff009ba4000-0xfffffff009bc4000]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff009a54000-0xfffffff009ba4000]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff009a50000-0xfffffff009a54000]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff009a4c000-0xfffffff009a50000]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff009a48000-0xfffffff009a4c000]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff009a44000-0xfffffff009a48000]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff009a24000-0xfffffff009a44000]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff007b50000-0xfffffff009a24000]\r\nhits: 5\r\nSearching 4 bytes in [0xfffffff0077c8000-0xfffffff007b50000]\r\nhits: 0\r\nSearching 4 bytes in [0xfffffff007004000-0xfffffff0077c8000]\r\nhits: 2\r\n0xfffffff007b84b46 hit0_0 1a12c89a\r\n0xfffffff007edb81e hit0_1 0b12c99a\r\n0xfffffff008370295 hit0_2 0113cb9a\r\n0xfffffff00910c4d3 hit0_3 4a11d59a\r\n0xfffffff00911514a hit0_4 0111cc9a\r\n0xfffffff0070ad17c hit0_5 ed10c19a\r\n0xfffffff0070d3d3f hit0_6 f311cb9a\r\nr2 -q -c '/x 0010c09a:00fce0ff' -Fkernelcache iOS-14.0.1-18A393-j307ap,j308ap  398.41s user 1.05s system 98% cpu 6:45.33 total\r\n```\r\n\r\n### Steps to reproduce the behavior\r\n\r\nHere's the kernel I'm using: [iOS-14.0.1-18A393-j307ap,j308ap.gz](https://github.com/radareorg/radare2/files/5331009/iOS-14.0.1-18A393-j307ap.j308ap.gz)  \r\nAnd the commands I'm running:\r\n\r\n```\r\ntime r2 -q -c '/x 0010c09a:00fce0ff' -Fmach064 iOS-14.0.1-18A393-j307ap,j308ap\r\ntime r2 -q -c '/x 0010c09a:00fce0ff' -Fkernelcache iOS-14.0.1-18A393-j307ap,j308ap\r\n```\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDcwNDM1ODgwOA==","author":{"login":"mrmacete"},"authorAssociation":"COLLABORATOR","body":"i'll look into that and see where the bottleneck is.\r\n\r\nin the short term, in this case i think if you're only interested in searching into executable sections you can just `e search.in=io.maps.x` before searching and it should be way faster, like:\r\n\r\n```\r\nr2 -q -e search.in=io.maps.x -c '/x 0010c09a:00fce0ff' -Fkernelcache iOS-14.0.1-18A393-j307ap.j308ap\r\n```","createdAt":"2020-10-06T15:39:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/17753#issuecomment-704358808","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcwNDY1ODQ3OQ==","author":{"login":"Siguza"},"authorAssociation":"CONTRIBUTOR","body":"You're right, that does work around the issue. Thanks. :D","createdAt":"2020-10-07T02:43:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17753#issuecomment-704658479","viewerDidAuthor":false}],"number":17753,"title":"XNU kernelcache plugin slows down /x by orders of magnitude"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 20.04.1, x86_64\r\n| File format of the file you reverse (mandatory)      | ELF can be reproduced by rasm2\r\n| Architecture/bits of the file (mandatory)            | x86_64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.6.0-git 25784 @ linux-x86-64 git.4.4.0-787-g16a91fbe5 commit: 16a91fbe5ac930575ee6b24d3a3b25d0085688c1 build: 2020-10-06__03:36:23\r\nExample file: | [gettid.zip](https://github.com/radareorg/radare2/files/5330891/gettid.zip)\r\n\r\n\r\n### Expected behavior (Output of objdump and cstool disassembly - Intel syntax)\r\n**objdump -d -M intel gettid.o**\r\n```\r\n 0000000000000000 <gettid>:\r\n    0:   64 48 8b 04 25 00 00    mov    rax,QWORD **PTR** fs:0x0\r\n    7:   00 00 \r\n    9:   48 8b 40 08             mov    rax,QWORD **PTR** [rax+0x8]\r\n    d:   8b 40 10                mov    eax,DWORD **PTR** [rax+0x10]\r\n   10:   c3                      ret\r\n```\r\n**cstool x64 \"64 48 8b 04 25 00 00 00 00 48 8b 40 08 8b 40 10 c3\"**\r\n```\r\n 0  64 48 8b 04 25 00 00 00 00                       mov        rax, qword **ptr** fs:[0]\r\n 9  48 8b 40 08                                      mov        rax, qword **ptr** [rax + 8]\r\n d  8b 40 10                                         mov        eax, dword **ptr** [rax + 0x10]\r\n10  c3                                               ret\r\n```\r\n**_Note the 'PTR' strings_**\r\n\r\n### Actual behavior (radare2 and rasm2 disassembly)\r\n**r2 -A -c pdf@0x08000040 gettid.o**\r\n```\r\nâ”Œ 17: sym.gettid ();\r\nâ”‚           0x08000040      64488b042500.  mov rax, qword fs:[0]       ; [05] -r-x section size 17 named .text.gettid\r\nâ”‚           0x08000049      488b4008       mov rax, qword [rax + 8]\r\nâ”‚           0x0800004d      8b4010         mov eax, dword [rax + 0x10]\r\nâ””           0x08000050      c3             ret\r\n```\r\n\r\n**rasm2 -a x86 -b 64 -d \"64 48 8b 04 25 00 00 00 00 48 8b 40 08 8b 40 10 c3\"**\r\n```\r\nmov rax, qword fs:[0]\r\nmov rax, qword [rax + 8]\r\nmov eax, dword [rax + 0x10]\r\nret\r\n```\r\n\r\n**_Note the 'PTR' strings is missing_**\r\n\r\n### Steps to reproduce the behavior \r\n```\r\nr2 -A -c pdf@0x08000040 gettid.o\r\nrasm2 -a x86 -b 64 -d \"64 48 8b 04 25 00 00 00 00 48 8b 40 08 8b 40 10 c3\"\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDcwNDI3MDE3Nw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"its not wrong, its just different. the `ptr` keyword adds no real value to the disassembly apart from making it longer.\r\n\r\nthis is done in asm_x86_cs.c line 112","createdAt":"2020-10-06T13:30:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17752#issuecomment-704270177","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDcwNDYzNzA4Mw==","author":{"login":"alex-curiou"},"authorAssociation":"NONE","body":"The actual problem started from this:\r\ncheck this use cases, please. Should not rasm2 to 'understand' its own assembled code? Or do I use rasm2 in wrong way?\r\n\r\nCompare first 2 results of assembling 488b4008 and 488b4010; and then its decoding by rasm2 itself.\r\nAnd for 3d and 4th results: rasm2 can't assemble it without PTR\r\n```\r\n$ rasm2 -a x86.as -b 64 \"mov rax, qword ptr [rax + 8]\"\r\n488b4008\r\n$ rasm2 -a x86 -b 64 -d 488b4008\r\nmov rax, qword [rax + 8]\r\n\r\n$ rasm2 -a x86.as -b 64 \"mov rax, qword [rax + 8]\"\r\n488b4010\r\n$ rasm2 -a x86 -b 64 -d 488b4010\r\nmov rax, qword [rax + 0x10]\r\n\r\n$ rasm2 -a x86.as -b 64 \"mov rax, qword fs:[0]\"\r\n/tmp/r2.r_as.74Zgwn: Assembler messages:\r\n/tmp/r2.r_as.74Zgwn:4: Error: junk `fs:[0]' after expression\r\nError running: as /tmp/r2.r_as.74Zgwn -o /tmp/r2.r_as.OClSdk/tmp/r2.r_as.K5Mx9n: Assembler messages:\r\n/tmp/r2.r_as.K5Mx9n:4: Error: junk `fs:[0]' after expression\r\nError running: as /tmp/r2.r_as.K5Mx9n -o /tmp/r2.r_as.G6B07m/tmp/r2.r_as.bhDpin: Assembler messages:\r\n/tmp/r2.r_as.bhDpin:4: Error: junk `fs:[0]' after expression\r\nError running: as /tmp/r2.r_as.bhDpin -o /tmp/r2.r_as.apWsGl/tmp/r2.r_as.iyEcCn: Assembler messages:\r\n/tmp/r2.r_as.iyEcCn:4: Error: junk `fs:[0]' after expression\r\nError running: as /tmp/r2.r_as.iyEcCn -o /tmp/r2.r_as.IglIuo/tmp/r2.r_as.DaCa9k: Assembler messages:\r\n/tmp/r2.r_as.DaCa9k:4: Error: junk `fs:[0]' after expression\r\nError running: as /tmp/r2.r_as.DaCa9k -o /tmp/r2.r_as.lkc7pnCannot assemble 'mov rax, qword fs:[0]' at line 5\r\ninvalid\r\n\r\n$ rasm2 -a x86.as -b 64 \"mov rax, qword ptr fs:[0]\"\r\n64488b042500000000\r\n$ rasm2 -a x86 -b 64 -d 64488b042500000000\r\nmov rax, qword fs:[0]\r\n```\r\n\r\n> its not wrong, its just different. the ptr keyword adds no real value to the disassembly apart from making it longer.\r\n\r\nWell, to have a shorter view AT&T syntax can be used\r\nFor Intel syntax the copy-past use case is broken this way: the copied code string  should first be purged from all PTRs and then pasted to be assembled by rasm2.\r\n\r\nBest way to accept by rasm2 both forms with same output or to accept canonical form only.\r\n","createdAt":"2020-10-07T01:21:46Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17752#issuecomment-704637083","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcwNDg1NDkyNw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i see. so its gnu assembler specific. which is not the default assembler for r2. i'm fine for removing this line from the disassebler to show the ptr in the disasm too. i also think this ptr filtering should be done in r_parser instead of directly in the disassebmler. can you send a PR with this change? thanks!","createdAt":"2020-10-07T10:49:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17752#issuecomment-704854927","viewerDidAuthor":true}],"number":17752,"title":"Wrong x86-64 disassembly"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Debian GNU/Linux 10 (buster)\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/32, x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.5.1 25582 @ linux-x86-64 git.4.5.1 commit: 293cf5ae65ba4e28828095dcae212955593ba255 build: 2020-09-17__07:57:20\r\n\r\n### Expected behavior\r\n\r\nIn the debug mode (`r2 -d`), `dd \"/path\"` command will open new file `/path` in the context of a application.\r\n\r\n### Actual behavior\r\n\r\nUse of `dd \"/path\"` will terminate (debuggee) process with SIGSEGV.\r\n\r\n\r\n### Steps to reproduce the behavior\r\n\r\n```\r\n# r2 -d -c 'dd \"/etc/hosts\"' -c '`dd \"/etc/hosts\"`' /bin/ls\r\nProcess with PID 28827 started...\r\n= attach 28827 28827\r\nbin.baddr 0x55bea0afe000\r\nUsing 0x55bea0afe000\r\nasm.bits 64\r\nWARNING: No room in the static stackframe! (0 must be 10)\r\ndx 48c7c0a40100005048c7c00200000050c745302f657463c745342f686f73c7453874730000c7453c00000000c7454000000000488d453048898528000000488b452850488b3c24488b742408488b54241048c7c0020000000f054883c418ccc3\r\nWARNING: No room in the static stackframe! (0 must be 10)\r\nchild stopped with signal 11\r\n[+] SIGNAL 11 errno=0 addr=0x00000030 code=1 si_pid=48 ret=0\r\nra0=0x00000000\r\n```\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\nThis is because of that code above (that `dd` is producing), is not safe for injection:\r\n\r\n```\r\n# rasm2 -a x86 -b 64 -D 48c7c0a40100005048c7c00200000050c745302f657463c745342f686f73c7453874730000c7453c00000000c7454000000000488d453048898528000000488b452850488b3c24488b742408488b54241048c7c0020000000f054883c418ccc3\r\n0x00000000   7           48c7c0a4010000  mov rax, 0x1a4\r\n0x00000007   1                       50  push rax\r\n0x00000008   7           48c7c002000000  mov rax, 2\r\n0x0000000f   1                       50  push rax\r\n0x00000010   7           c745302f657463  mov dword [rbp + 0x30], 0x6374652f  ; <---- [1]\r\n0x00000017   7           c745342f686f73  mov dword [rbp + 0x34], 0x736f682f\r\n0x0000001e   7           c7453874730000  mov dword [rbp + 0x38], 0x7374\r\n0x00000025   7           c7453c00000000  mov dword [rbp + 0x3c], 0\r\n0x0000002c   7           c7454000000000  mov dword [rbp + 0x40], 0\r\n0x00000033   4                 488d4530  lea rax, [rbp + 0x30]\r\n0x00000037   7           48898528000000  mov qword [rbp + 0x28], rax\r\n0x0000003e   4                 488b4528  mov rax, qword [rbp + 0x28]\r\n0x00000042   1                       50  push rax\r\n0x00000043   4                 488b3c24  mov rdi, qword [rsp]\r\n0x00000047   5               488b742408  mov rsi, qword [rsp + 8]\r\n0x0000004c   5               488b542410  mov rdx, qword [rsp + 0x10]\r\n0x00000051   7           48c7c002000000  mov rax, 2\r\n0x00000058   2                     0f05  syscall\r\n0x0000005a   4                 4883c418  add rsp, 0x18\r\n0x0000005e   1                       cc  int3\r\n0x0000005f   1                       c3  ret\r\n```\r\n\r\n[1] It uses 'RBP', which is definitely not safe to use! (In my case RBP was zero => that's why addr=0x00000030.)\r\n\r\n#### Tracing the problem\r\n\r\nCall tree for `dd` command:\r\n\r\n```\r\ncmd_debug                 libr/core/cmd_debug.c\r\n  r_core_syscallf         libr/core/core.c\r\n    r_core_syscall        libr/core/core.c\r\n      r_egg_*\r\n```\r\n\r\nFunction that creates code for `r_egg_*`, is:\r\n\r\n```\r\nr_core_syscall   libr/core/core.c\r\n```\r\n\r\nand `r_egg_*` code is:\r\n\r\n```\r\nsnprintf (code, sizeof (code),\r\n    \"sc@syscall(%d);\\n\"\r\n    \"main@global(0) { sc(%s);\\n\"    // <---- [2]\r\n    \":int3\\n\" /// XXX USE trap\r\n    \"}\\n\", num, args);\r\n```\r\n[2] Stack in the `main()` function is not initialized (probably by purpose -- see below).\r\n\r\n\r\nI thought it could be sloved by allocating stack in the \"egg main()\" function. So I did this simple PoC:\r\n\r\n```\r\nint stack_size = 254;\r\n// ...\r\nsnprintf (code, sizeof (code),\r\n    \"sc@syscall(%d);\\n\"\r\n    \"main@global(256) {\\n\"     // <---- allocation\r\n    \"sc(%s);\\n\"\r\n                               // <---- [3]\r\n    \"}\\n\", num, args);\r\n\r\n```\r\n\r\n[3] Because stack deallocation was after `int3`, I had to remove it. (That means I'm removing return instruction `c3` by hand.)\r\n\r\nBut newly generated code doesn't look any better:\r\n\r\n```\r\n0x00000000   1                       55  push rbp\r\n0x00000001   3                   4889e5  mov rbp, rsp     # <---- [4]\r\n0x00000004   7           4881ecfe000000  sub rsp, 0xfe    # <---- [5]\r\n0x0000000b   7           48c7c0a4010000  mov rax, 0x1a4\r\n0x00000012   1                       50  push rax\r\n0x00000013   7           48c7c002000000  mov rax, 2\r\n0x0000001a   1                       50  push rax\r\n0x0000001b   7           c745302f657463  mov dword [rbp + 0x30], 0x6374652f  # <---- [6]\r\n0x00000022   7           c745342f686f73  mov dword [rbp + 0x34], 0x736f682f\r\n0x00000029   7           c7453874730000  mov dword [rbp + 0x38], 0x7374\r\n0x00000030   7           c7453c00000000  mov dword [rbp + 0x3c], 0\r\n0x00000037   7           c7454000000000  mov dword [rbp + 0x40], 0\r\n0x0000003e   4                 488d4530  lea rax, [rbp + 0x30]\r\n0x00000042   7           48898528000000  mov qword [rbp + 0x28], rax\r\n0x00000049   4                 488b4528  mov rax, qword [rbp + 0x28]\r\n0x0000004d   1                       50  push rax\r\n0x0000004e   4                 488b3c24  mov rdi, qword [rsp]\r\n0x00000052   5               488b742408  mov rsi, qword [rsp + 8]\r\n0x00000057   5               488b542410  mov rdx, qword [rsp + 0x10]\r\n0x0000005c   7           48c7c002000000  mov rax, 2\r\n0x00000063   2                     0f05  syscall\r\n0x00000065   4                 4883c418  add rsp, 0x18\r\n0x00000069   7           4881c4fe000000  add rsp, 0xfe\r\n0x00000070   1                       5d  pop rbp\r\n0x00000071   1                       c3  ret\r\n```\r\n\r\n[4] It still operates on application's data on the stack => [5] stack allocation is useless, [6] `dd` instructions will still overwrite data of the application, because of RBP:\r\n\r\n```\r\n# r2 -d /bin/ls\r\n\r\n:> px 64 @ rsp\r\n- offset -       0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x7ffde042b940  0100 0000 0000 0000 dad3 42e0 fd7f 0000  ..........B.....\r\n0x7ffde042b950  0000 0000 0000 0000 e2d3 42e0 fd7f 0000  ..........B.....\r\n0x7ffde042b960  ecd3 42e0 fd7f 0000 1bd4 42e0 fd7f 0000  ..B.......B.....\r\n0x7ffde042b970  2bd4 42e0 fd7f 0000 45d4 42e0 fd7f 0000  +.B.....E.B.....\r\n\r\n:> dx 554889e54881ecfe00000048c7c0a40100005048c7c00200000050c745302f657463c745342f686f73c7453874730000c7453c00000000c7454000000000488d453048898528000000488b452850488b3c24488b742408488b54241048c7c0020000000f054883c4184881c4fe0000005d\r\nhit breakpoint at: 0x7fdb7e968101\r\nra0=0x7ffde042b968\r\n\r\n:> px 64 @ rsp\r\n- offset -       0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x7ffde042b940  0100 0000 0000 0000 dad3 42e0 fd7f 0000  ..........B.....\r\n0x7ffde042b950  0000 0000 0000 0000 e2d3 42e0 fd7f 0000  ..........B.....\r\n0x7ffde042b960  68b9 42e0 fd7f 0000 2f65 7463 2f68 6f73  h.B...../etc/hos   # <--- [7]\r\n0x7ffde042b970  7473 0000 0000 0000 0000 0000 fd7f 0000  ts..............\r\n\r\n```\r\n\r\n[7] Stack of the application was destroyed. (And registers too -- it could teoretically be solved by `dxr`, but there is bug too -- it's for different issue.)\r\n\r\n### Working PoC solution\r\n\r\nI don't know how to tell `r_egg` it should not use `BP`, so I did it by hand like this:\r\n\r\n```\r\nR_API RBuffer *r_core_syscall (RCore *core, const char *name, const char *args) {\r\n    char stack_allocation[64];\r\n    char stack_deallocation[64];\r\n\r\n    //bits check\r\n    switch (core->rasm->bits) {\r\n    case 64:\r\n        snprintf (stack_allocation, sizeof (stack_allocation),\r\n                \": push rbp;\\n\"\r\n                \": sub rsp, %d;\\n\"\r\n                \": mov rbp, rsp;\\n\"\r\n                , stack_size);\r\n        snprintf (stack_deallocation, sizeof (stack_deallocation),\r\n                \": add rsp, %d;\\n\"\r\n                \": pop rbp;\\n\"\r\n                , stack_size);\r\n        break;\r\n    }\r\n\r\n    snprintf (code, sizeof (code),\r\n        \"sc@syscall(%d);\\n\"\r\n        \"main@global(0) {\\n\"\r\n        \"%s\"\r\n        \"sc(%s);\\n\"\r\n        \"%s\"\r\n        \": int3\\n\" /// XXX USE trap\r\n        \"}\\n\", num, stack_allocation, args, stack_deallocation);\r\n```\r\n\r\nThis kind of `r_egg` code is working fine on x86-64 and it could probably be done for each supported arch (currently there is support only for x86-32 and x86-64), but it's ugly.\r\n\r\nI see why `r_egg` could be universal, but without stack allocation and \"omit-frame-pointer\" (and saving registers), it's not working correctly.\r\n\r\nDoes anyone have any better idea?\r\n","comments":[],"number":17739,"title":"Open a new file (descriptor) with 'dd' is broken."},{"body":"I want to extract the CFG(control flow graph) from a binary.  This can be done by using command `agf` at entry0. But the basic block defined by radare2 includes call instruction(like the screenshot below, there is a `call fcn.00467670` inside the basic block), which changes the execution order and should become the end of the basic block.\r\n![image](https://user-images.githubusercontent.com/33278320/93566257-534f5800-f9bf-11ea-8ee4-102185f49c10.png)\r\n\r\n  So, how to extract CFG where the basic block dosen't have call instruction inside ?\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY5NDcxMjkzMQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"AFAIK it is common to consider the CFG of a function with calls as part of a basic block. I know there are cases where you want to have an even more granular CFG (I think Angr does that), but I think we don't have a way right now to directly get the CFG as you would like. Maybe we could add a `anal.XXXX` variable to control this behaviour in the future.\r\n\r\nIf you do need it now though, you can probably script a bit with r2pipe to split the provided basic blocks however you want. It is of course a bit more painful :+1:\r\n\r\n@trufae am I missing any command?","createdAt":"2020-09-18T07:44:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/17674#issuecomment-694712931","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NDgyMTE4Ng==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"in r1 there are some options to specify which instructions break blocks. so just tweaking that was enough to have a single CFG of the whole program at once.\r\n\r\nin r2 we went formal and just split like everyone else do. i would suggest to improve the ab command to be able to list all the basic blocks, notjust the one in the current offset. using the table api and showing addr, true/fail branches, type of block, etc. you may be able to get the json out of it and process it like u want.\r\n\r\nHow does it sound to you? may this be a good solution to your question?","createdAt":"2020-09-18T11:45:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17674#issuecomment-694821186","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY5NDgyODM3Nw==","author":{"login":"Bowen-n"},"authorAssociation":"NONE","body":"So there is no command in radare2 to extract the CFG I explained, and the best way is to write a script myself. Is that right?","createdAt":"2020-09-18T12:03:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17674#issuecomment-694828377","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NDgyOTQ1Mg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"> So there is no command in radare2 to extract the CFG I explained, and the best way is to write a script myself. Is that right?\r\n\r\nThat is right. By the way, as far as I know you can't get the CFG as you want it even from IDA. On r2, however, you can implement it yourself if you want, differently from a closed source solution :)","createdAt":"2020-09-18T12:06:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17674#issuecomment-694829452","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NDg1ODEyMw==","author":{"login":"karliss"},"authorAssociation":"CONTRIBUTOR","body":"One thing to note that in situations where you want calls to be considered a control graph edge there are hundred other cases that also need to be considered and depends on each specific use case, the assumptions you make, scripts and tools that will be consuming the results. Call instruction isn't only instruction that adds nontrivial control flow changes.\r\nSome examples\r\n\r\n* Do you need the actual edges to functions called or only splits at specified points to simplify  the script processing it depending on needs.\r\n* What about syscalls? They can affect control flow both within program and across userspace/kernelspace. If you are analyzing kernel vulnerabilities you might be interested in combined control flow across program and kernelspace.\r\n* How to deal with calls to imported functions? \r\n* How to deal with indirect calls and jumps? Do you model sets of potential jump targets, do you assume that anything can be reached in such situation? Maybe you analyze class inheritance and want edges either to all or one of the virtual functions that could be called in specific place. Maybe you are trying to describe system with control flow integrity mechanism. Maybe you don't care about such situations.\r\n* What about `div` instruction instead of `call instruction`. It can cause controll flow changes through the interrupt handling mechanism. Do you want an edge to the interrupt handler within kernel or the registered handler within program? It's not unusual for obfuscated malware or commercial software to intentionally use such control flow for emulation or debugging detection or interfere with analysis. It might not even be obfuscated program but a programming language using such control flow for exception handling mechanism. In some programs exceptions are widely used, it may also be interesting target due to error handling code often being poorly tested and potentially vulnerable.\r\nWhy stop there do you also want a new basic block after each mov/ldr/str instruction those can also change control flow.\r\n* Previous use-case too obscure? How about embeded software on microcontrollers? In embedded software interrupts can be part of normal control flow. No jumps across kernel/user space there. Those don't even have to be interrupts from external io, they can be intentionally software generated interrupts.\r\n* Maybe you are using SMT solver and can prove that those indirect calls are actually fixed edges. What if it's a multi threaded software, is that proof still valid, can there be new edges? If you are trying prove correctness of an implementation for multi threading primitives  in a library or OS this might be important.\r\n* What if you are trying to perform glitch analysis either for validating safety critical system or to extract a cryptographic secret. How does a control flow graph looks then? Can you skip a jump or maybe any instruction? Can you flip a bit in jump target?\r\nMaybe you can make a jump load target from wrong register.\r\n* What if you only want only calls where the the called function is used only once? In that case both the calling edge and return edge could be analyzed precisely. \r\n\r\nYou can come up with many real world uses cases each with slightly different needs. In most of them there will be need to have at least some amount of code which prepares the CFG returned by r2 into exact format required by further analysis scripts. Those scripts might as well query data from r2 in multiple parts. Where do you draw the line.\r\n\r\nSome things to considers:\r\n* Just because r2 command doesn't have word graph in the name doesn't mean you can't look at the data as graph. Just because name of field in the structure returned by r2 doesn't say edge doesn't mean that isn't a graph. Just because different kind of edges are described using differently named fields doesn't mean that it isn't a graph. For example \"list  refs in json\" doesn't say graph but you can look it as graph. List of edges is one of the basic forms for describing graphs when teaching about them. Any table can be considered a graph, especially if some of columns describe relationship to other objects.\r\n* Does r2 provides required information at all, in any form\r\n* Does r2 provide required information in machine readable format with reliable identifiers (when possible offsets instead of expressions or names with r2 specific evaluation rules, without r2 specific replacements of allowed characters)\r\n* How difficult is it to gather required information from r2 commands and how this effort compares to the effort compares to unavoidable glue code for using it in any kind of analysis script or existing tool. How does it compare to the difficulty of implementing the core logic of analysis script. I consider querying r2 commands either recursively or in a loop to gather required information to be the easy part compared to implementing any kind of interesting analysis on this data.\r\n* How unique are the needs. Is it something that saves work for 5 out of 10 different kind of uses cases that you could do with it or is exact format expected for one specific script.\r\n* NxM problem. Let's look at the same example with reference graph. It can be split into multiple dimensions:\r\n    * type of reference: data, call, jump, ...\r\n    * node type: instruction, basic block, function, class, source file, module, ...\r\n    * output format: json, drawable dot, gml, ascii graphics, ...\r\n\r\n Should r2 provide `N * M * O` separate commands, one for each combination or few commands that allow querying list of references, which basic block, function, ... contains given address? And leave combining them to user scripts. ","createdAt":"2020-09-18T13:10:00Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/17674#issuecomment-694858123","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NDg1OTY1NA==","author":{"login":"karliss"},"authorAssociation":"CONTRIBUTOR","body":"Back to the topic of this specific question it isn't the first time people have asked for something like this so maybe r2 could have something to help with it.","createdAt":"2020-09-18T13:12:41Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17674#issuecomment-694859654","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NjY2NTgwMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Moreover, I think some of the answers to these questions could land in the book.","createdAt":"2020-09-22T11:37:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17674#issuecomment-696665801","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NjY4MjQzMg==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"See my abl pr","createdAt":"2020-09-22T12:15:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17674#issuecomment-696682432","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs4_xERI","author":{"login":"sh0ve1"},"authorAssociation":"NONE","body":"@Bowen-n \r\nhi, guy\r\nDid you solve the problem? Now I have the same proble. So I want to know if you finished the script.","createdAt":"2022-03-17T01:56:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17674#issuecomment-1069827144","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs4_xHWe","author":{"login":"Bowen-n"},"authorAssociation":"NONE","body":"> @Bowen-n hi, guy Did you solve the problem? Now I have the same problem. So I want to know if you finished the script.\r\n\r\nSorry, I didn't. CFGs with function calls inside are acceptable in my situation.","createdAt":"2022-03-17T02:03:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17674#issuecomment-1069839774","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs4_xOL1","author":{"login":"sh0ve1"},"authorAssociation":"NONE","body":"@Bowen-n ok. Thank you for your reply.\r\nBest.","createdAt":"2022-03-17T02:15:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17674#issuecomment-1069867765","viewerDidAuthor":false}],"number":17674,"title":"Question about CFG extraction."},{"body":"I need support fÃ¼r ADSP-2181, disasamler.\r\nI can help with some time an code / ROM-Files, but I'm not a programming expert.\r\n\r\nThanks\r\nFrank\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY5NDQ1NDY0OQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Can you share some links about this DSP? Basically what's needed to proceed is the following:\r\n\r\n* distributable binary files for the testsuite (we dont want to suffer copyright problems) if you have the SDK try building ired or any small program\r\n* it is supported by binutils? ghidra? from what i see its only supported in IDA... and MAME.. :D so i think it will be neat to have the glue code to use the mame disassemblers within r2.\r\n* memory layout and other details from the architecture\r\n* which file formats can u find binaries for this arch? (PE, ELF, COFF, RAW?)\r\n* the pdf of the specs of this arch. with instruction definitions etc.\r\n\r\nHaving support for MAME would be a good thing for r2, we could use it as a debugger backend. There are some easy things to do when supporting new architectures in r2:\r\n\r\n* implement the pseudo disassembly filter (kind of regex to transform instruction to human readable text)\r\n* add instruction definitions\r\n* create the register profile and define calling Convention rules (can be extracted from gdb, or written by hand)\r\n* write tests to avoid regressions in code analysis\r\n* ...","createdAt":"2020-09-17T19:34:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17671#issuecomment-694454649","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY5NDQ1NDgwMQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"https://github.com/mamedev/mame/blob/master/src/devices/cpu/adsp2100/adsp2100.h","createdAt":"2020-09-17T19:34:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17671#issuecomment-694454801","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY5NDQ1NTAzMA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Note that mame is C++ so its not something we want in r2core. must be done in radare2-extras","createdAt":"2020-09-17T19:35:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17671#issuecomment-694455030","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY5NDgwNjUyMg==","author":{"login":"db5fp"},"authorAssociation":"NONE","body":"ASM is described here starting from A-1 (page 131) http://www.smd.hu/Data/Analog/DSP/21xx/Assembler%20Tools%20and%20Simulator%20Manual%2021xx/ASM.PDF\r\nExamples of files can be found along the internet example : https://wunderkis.de/sigi/index.html\r\n\r\nFiles would by BIN or HEX-files from old (EP)ROM-Images or even code from the olda assembler tools from Analogdevices","createdAt":"2020-09-18T11:10:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17671#issuecomment-694806522","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NDg2MDY4Mg==","author":{"login":"db5fp"},"authorAssociation":"NONE","body":"http://bitsavers.informatik.uni-stuttgart.de/components/analogDevices/dsp/ADSP-2100_Users_Manual_3ed_Sep95.pdf \r\npage 241 (10-24) shows example of ADSP-2181 System and Memory MAP\r\n","createdAt":"2020-09-18T13:14:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17671#issuecomment-694860682","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NDg2MjY4OA==","author":{"login":"db5fp"},"authorAssociation":"NONE","body":"https://www.analog.com/media/en/dsp-documentation/evaluation-kit-manuals/442236245ADSP_2181_EZ_KIT_Lite_Legacy.pdf\r\nThis is a very a very popular Dev-Kit , System is explained here and page 66 is showing schematic ","createdAt":"2020-09-18T13:18:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17671#issuecomment-694862688","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NDg4MDI2OQ==","author":{"login":"db5fp"},"authorAssociation":"NONE","body":"http://web.archive.org/web/20060219051448/http://www.dce.bg/~vladitx/adsp2181/\r\n\r\nI'll try, so omaybe it's all done, yet!","createdAt":"2020-09-18T13:50:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17671#issuecomment-694880269","viewerDidAuthor":false}],"number":17671,"title":"Support for ADSP-21XX / 2181 disassembler"},{"body":"Hi there, I am trying to use Radare2 to build a call graph based on Android native API. I think this is very helpful for malware analysis, something like below:\r\n\r\n![](https://i.imgur.com/Xbsit7B.png)\r\n\r\nBut using radare2 to get the cross_reference_from based on Android native API seems no results show.\r\n\r\n## Using Radare2\r\n\r\n```bash=\r\nr2 classes.dex\r\n\r\naaa\r\n```\r\n\r\nfinding the Android native API\r\n\r\n```bash=\r\nfs imports ;f~getCellLocation\r\n\r\n\r\naxt 0x0000942c\r\naxt sym.imp.Landroid_telephony_TelephonyManager.method.getCellLocation__Landroid_telephony_CellLocation \r\n```\r\n![](https://i.imgur.com/P1tedjN.png)\r\n\r\nNo result output\r\n\r\n\r\n## Using [androguard](https://androguard.readthedocs.io/en/latest/intro/xrefs.html) for cross-reference_from\r\n\r\n\r\n\r\n\r\nFinding the Android native API cross-reference using [androguard](https://github.com/androguard/androguard) would work.\r\n\r\nDemo code:\r\n\r\n```bash=\r\nandroguard analyze 14d9f1a92dd984d6040cc41ed06e273e.apk\r\n```\r\n\r\n```python=\r\nfor method in dx.find_methods('Landroid/telephony/TelephonyManager', 'getCellLocation'):\r\n    for _,call,_ in method.get_xref_from():\r\n        print(call)\r\n```\r\n\r\n```python=\r\nfor method in dx.find_methods('Lcom/google/progress/Locate', 'getLocation'):\r\n    for _,call,_ in method.get_xref_from():\r\n        print(call)\r\n```\r\n\r\nResult\r\n\r\n![](https://i.imgur.com/NXwX5Iy.png)\r\n\r\n\r\n[This is malware!]\r\nSample APK(https://github.com/quark-engine/apk-malware-samples/blob/master/14d9f1a92dd984d6040cc41ed06e273e.apk)\r\n\r\n\r\nAre there any mistakes I might make for that or something I miss?\r\n\r\n@trufae Does radare2 support this function? thank you","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDcyMDM3NjM0NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@krnick why closed? Seems not fixed yet.","createdAt":"2020-11-02T10:15:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17655#issuecomment-720376344","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcyMDM4Mzc5NQ==","author":{"login":"krnick"},"authorAssociation":"NONE","body":"Hi @XVilka , sorry, since I'm not sure if this problem is due to my insufficient understanding of radare2 instructions or it is really a radare2 bug. So I'm trying to do more research until I can figure out the problem.","createdAt":"2020-11-02T10:29:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17655#issuecomment-720383795","viewerDidAuthor":false}],"number":17655,"title":"Finding cross-reference_from based on Android native API"},{"body":"## Current situation\r\n\r\nCurrently when having atomic types in sdb, it looks like this:\r\n\r\n```\r\nfloat=type\r\ntype.float=f\r\ntype.float.size=32\r\n\r\ndouble=type\r\ntype.double=F\r\ntype.double.size=64\r\n```\r\n\r\nthe `type.float=f` part is the only thing that indicates how this type should be interpreted. However the `f` here is just the format for `pf` and it also embeds the size:\r\n\r\n```\r\n|  f       float value (4 bytes)\r\n|  F       double value (8 bytes)\r\n```\r\n\r\nwhich is both redundant for the database and has the effect that you have to be aware of all the pf formats to detect that both `float` and `double` here are just floats.\r\n\r\n## Solution\r\n\r\nThe database should just contain the basic info about how the type is supposed to be interpreted. The `type.%s` key can probably be used, but the values should be changed to something like this (just a proposal):\r\n\r\n```\r\nu=unsigned int\r\ns=signed int\r\nf=float\r\nuc=unsigned char\r\nsc=signed char\r\n?=unknown\r\n```\r\n\r\nNote that `int`, `char` and `float` say nothing about their size, `wchar_t` could for example have `sc` + size=16.\r\nThese values should also be reflected in the `RAnalBaseType` struct in the form of an enum instead of passing the raw string.\r\nWhenever the pf format is needed, it can be easily derived by this in combination with the size.\r\n\r\nImo pointer-types should not be saved in the database at all. They are merely pointers to some other base type (or void as a special case).\r\n\r\n## Other implementations\r\n\r\nFor comparison, what it looks like in ghidra (also contains stuff like struct and array which makes no sense for us here):\r\nhttps://github.com/thestr4ng3r/ghidra/blob/7bde3b54b43230601363f89b0214ab4bdba8bf6f/Ghidra/Features/Decompiler/src/decompile/cpp/type.hh#L33-L46\r\nhttps://github.com/thestr4ng3r/ghidra/blob/7bde3b54b43230601363f89b0214ab4bdba8bf6f/Ghidra/Features/Decompiler/src/decompile/cpp/type.hh#L164-L178\r\nNote that the base type here is really just a tuple `int4 s, type_metatype m, const string &n`\r\n\r\nAnd the respective part of dwarf (see http://dwarfstd.org/doc/DWARF5.pdf):\r\n![20200914_11h45m21s_grim](https://user-images.githubusercontent.com/1460997/93071009-db5ff580-f67f-11ea-9f30-fa865ae0716e.png)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY5NTg5OTIwNQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Regarding these:\r\n```\r\nu=unsigned int\r\ns=signed int\r\nf=float\r\nuc=unsigned char\r\nsc=signed char\r\n?=unknown\r\n```\r\nI think they are not \"atomic\" types since they heavily dependent on the target architecture, operating system, bitness, phase of the moon, and a compiler authors' whim. Lets stick to the standard `uint8_t`, `uint16_t`, etc.","createdAt":"2020-09-21T04:55:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17649#issuecomment-695899205","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NjEwOTAxNg==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"I addressed this explicitly in the description but maybe it was not clear enough:\r\n> Note that int, char and float say nothing about their size, wchar_t could for example have sc + size=16.\r\n\r\nHere `u` in the sense of `u=unsigned int` means only \"some integer value interpreted as unsigned\" with no info about the size and not directly related to `unsigned int` in C. The size is purely defined by the extra `size` field, hence why there is no `unsigned short`, `unsigned long`, etc. in this list.\r\n\r\nIn the end, you will have a database (loaded dynamically depending on compiler/os/whatever) with info that would look like this:\r\n```\r\nunsigned int = u, size 4\r\nunsigned long = u, size 4\r\nunsigned long long = u, size 8\r\nuint32_t = u, size 4\r\nint = s, size 4\r\n...\r\n```","createdAt":"2020-09-21T13:18:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17649#issuecomment-696109016","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NjExNjk4Mg==","author":{"login":"HoundThe"},"authorAssociation":"CONTRIBUTOR","body":"I am not completely sure I understand the issue. Instead of having a formatting character that represents an encoding *and* size, have just an encoding, as size is a separate attribute of the type?","createdAt":"2020-09-21T13:32:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17649#issuecomment-696116982","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NjEyMDY3MA==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"Yes exactly.\r\nBefore it was: \"encoding+size\" formatting char + size\r\nAfter it will be: encoding enum + size","createdAt":"2020-09-21T13:38:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/17649#issuecomment-696120670","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NjEyMjI2Nw==","author":{"login":"HoundThe"},"authorAssociation":"CONTRIBUTOR","body":"Yeah, I agree that sounds better and more flexible for the future, there are few encodings but a lot of different sizes.","createdAt":"2020-09-21T13:41:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17649#issuecomment-696122267","viewerDidAuthor":false}],"number":17649,"title":"Re-do semantic information of atomic types in the database"},{"body":"I have been using this tool for analyzing the machine code of binaries built with arm-gcc for some time. Now I need to perform the same kind of analysis on binaries produced with Keil armcompiler6. For some reason I cannot find the xrefs on these binaries. After some experimentation I am able to find xrefs when linking \"flat\" (without a linker script). When running the same linker script through the binary built with arm-gcc I am able to find the xrefs.\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | arm thumb\r\n| File format of the file you reverse (mandatory)      | axf, elf\r\n| Architecture/bits of the file (mandatory)            | arm thumb\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.6.0-git 25246 @ linux-x86-64 git.4.4.0-687-g67cc89877\r\ncommit: 67cc898770d23abfafd47b633f623eab429f02f7 build: 2020-09-14__08:19:00\r\n\r\n### Expected behavior\r\nLoad binary, issue aaa, s obj.find_me, axt and list the xrefs.\r\n\r\n### Actual behavior\r\nNo xrefs found (except for the binary built without a .sct linker script).\r\n\r\n### Steps to reproduce the behavior\r\n[armclang.zip](https://github.com/radareorg/radare2/files/5217143/armclang.zip)\r\nI have attached three binaries;\r\n\r\n- armgcc_with_ld.elf which works and is linked using the same memory map as the one that doesn't (cc6_with_sct.axf)\r\n- cc6_with_sct.axf Binary not working as expected\r\n- cc6_without_sct.axf Binary which works but does not have the correct memory map.\r\n\r\nLoad the binary cc6_with_sct.axf, aaa, s obj.find_me , axt.\r\n\r\nI suspect that this has to do with the fact that the armclang compiled code loads the address to the variable using movw and movt whereas the arm-gcc version fetches the address from a literal pool? https://github.com/radareorg/radare2/issues/2757 sounds similar. I have e asm.emu=true\r\n\r\nI would be glad to help out with the code change myself if I can get some initial hints on where to look. Thanks in advance\r\n","comments":[],"number":17647,"title":"Xrefs not found for armcompiler6 (armclang)"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 20.04.1\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | arm64-v8a\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.6.0-git 25649 @ linux-x86-64 git.4.4.0-678-g5ccf9fd48\r\ncommit: 5ccf9fd4824ee54e999e92993442ba200c65ab80 build: 2020-09-13__02:36:27\r\n\r\n### Expected behavior\r\nNo variable substitution should happen at all in the third line. This behaviour, btw, is also in line with IDA.\r\n```\r\n; var int64_t var_0h_2 @ sp+0x20\r\nsub sp, sp, 0x30\r\nstp x29, x30, [sp, 0x20]\r\nadd x29, sp, 0x20\r\n```\r\n\r\n### Actual behavior\r\n```\r\n; var int64_t var_0h_2 @ sp+0x20\r\nsub sp, sp, 0x30\r\nstp x29, x30, [sp, 0x20]\r\nadd x29, var_0h_2x20\r\n```\r\n\r\n### Steps to reproduce the behavior \r\n```\r\n$ r2 -AA libnative-lib.so\r\n> s 0x00015780\r\n> pi 3\r\n```\r\n\r\n### Binary to test\r\nProvided in https://github.com/radareorg/radare2/issues/17637#issuecomment-692018942\r\n\r\n\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n![Now](https://user-images.githubusercontent.com/60251601/93007786-83d56300-f575-11ea-9e4f-99cc04b5e9e3.jpg)\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY5MTg3Njg0Mg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@alex-curiou Could you provide the exact binary where this happen? It would help reproducing the issue, thanks.","createdAt":"2020-09-14T07:34:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17637#issuecomment-691876842","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5MjAxODk0Mg==","author":{"login":"alex-curiou"},"authorAssociation":"NONE","body":"Here is the binary, so for example:\r\nr2 -AA libnative-lib.so\r\ns 0x00015780\r\n\r\nNOTE: I've reported not correct ABI, so changed from arm to arm64-v8a\r\n\r\n[libnative-lib.zip](https://github.com/radareorg/radare2/files/5218360/libnative-lib.zip)\r\n\r\n","createdAt":"2020-09-14T12:26:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17637#issuecomment-692018942","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5MjAzNzQ1OQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@trufae there is probably something wrong in `parse_arm_pseudo.c`.\r\n\r\nThe original instruction is:\r\n```\r\nadd x29, sp, 0x20 # x29 = sp + 0x20\r\n```\r\n\r\nSo, if I get it right, x29 will be the address of `var_0h_2`. Given that, I'm not even sure you want to see `var_0h_2` there at all, it seems confusing. What do you think?","createdAt":"2020-09-14T13:03:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17637#issuecomment-692037459","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5MjA0MjU1NQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"yes this is wrong. and this is what IDA does. and this is what i was complaining some days ago because of a change in the disasm. The substituion is wrong because it should even replace the add for a mov to make it meaningful that way.\r\n\r\nObviously having the var that is accessed is nice, but i think it shouldnt be shown that way. It was shown as a comment when using esil before iirc. but its always better to have this replaced inside the instruction. but i dont think this is a good way to render that. And ive been always trying to avoid mimic IDA's disasm which is full of lies like this that make me feel confused when comparing disassemblers","createdAt":"2020-09-14T13:12:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17637#issuecomment-692042555","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY5MjA0NTI0Ng==","author":{"login":"alex-curiou"},"authorAssociation":"NONE","body":"That is not a canonical way of showing disassembly, so it is a bit hard to understand and will lead to creation of a our own dialect.\r\nSo we will have a bit more closed community ...\r\nFrom another side, may be some one like it this way and we can have it like an option? But not default one. So people don't be scary when they have it 'out-of-the-box' =))","createdAt":"2020-09-14T13:16:36Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17637#issuecomment-692045246","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5MjA3ODA1Mg==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"An option for what? this disassembly is wrong. it should be fixed. i was stating that IDA is doing things like this, and im against inventing instructions. I dont think r2 community is closed at all. I dont want such thing, not even as an option. because its misleading.","createdAt":"2020-09-14T14:10:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/radareorg/radare2/issues/17637#issuecomment-692078052","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY5MjA5NTI4Mw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Could someone provide a snapshot of what is IDA showing exactly?","createdAt":"2020-09-14T14:28:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17637#issuecomment-692095283","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5MjIzMDY3Mw==","author":{"login":"alex-curiou"},"authorAssociation":"NONE","body":"Here is how IDA 7.0 shows that funciton\r\n![IDA](https://user-images.githubusercontent.com/60251601/93123212-6cf75380-f6d0-11ea-866d-485026fb2fc2.jpg)\r\n\r\nBut I think this way + variables usage in comments is better and more clear and easier to read\r\n![R2](https://user-images.githubusercontent.com/60251601/93123314-8dbfa900-f6d0-11ea-866f-1faf46b5f6a9.jpg)\r\n\r\nAfter all, this is not pseudocode ...","createdAt":"2020-09-14T18:24:00Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17637#issuecomment-692230673","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5MjUyMDE0Nw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Ok, so `add x29, sp, 0x20` is not converted to anything special in IDA either. It is just r2 that incorrectly substitutes things. Then there is definitely a bug in `parse_arm_pseudo.c`. @alex-curiou would you be willing to give this issue a try with a PR?","createdAt":"2020-09-15T07:21:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17637#issuecomment-692520147","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5MjY0MTc0Mg==","author":{"login":"alex-curiou"},"authorAssociation":"NONE","body":"In the coming several weeks I have really busy days ((\r\nif only I suddenly find a solution earlier for the current issue I'm busy with...","createdAt":"2020-09-15T11:00:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17637#issuecomment-692641742","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5MjcyMjA0MA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@alex-curiou no problem ;)\r\n\r\nI took the liberty to update the description of the issue.","createdAt":"2020-09-15T13:40:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17637#issuecomment-692722040","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5MzIwNTc2MA==","author":{"login":"alex-curiou"},"authorAssociation":"NONE","body":"Of course,\r\nYou are welcome ))","createdAt":"2020-09-16T06:38:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17637#issuecomment-693205760","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5J4Pb7","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i have started to work on fixing this issue but its breaking abi, so wont merge the PRs until we start the abi-breaking stage, there are several more issues related to variable analysis right now, so im trying to collect them to have tests for all of them","createdAt":"2022-09-07T14:38:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17637#issuecomment-1239480059","viewerDidAuthor":true}],"number":17637,"title":"Wrong variables name substitution?"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Linux Thinkpad-T480 5.7.17-2-MANJARO #1 SMP PREEMPT Sat Aug 22 14:58:17 UTC 2020 x86_64 GNU/Linux\r\n| File format of the file you reverse (mandatory)      | PE \r\n| Architecture/bits of the file (mandatory)            | x86/32, x86/64.\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.6.0-git 25286 @ linux-x86-64 git.4.4.0-672-gf16a5b1ab commit: f16a5b1ab789e358eda5074d1485dcb31fc5a7fb build: 2020-09-10__12:41:20\r\n\r\n### Command\r\n```\r\nwinedbg --gdb --no-start a.exe\r\nr2 -d -a x86 -e dbg.exe.path=./a.exe dbg://localhost:44327\r\n```\r\n\r\n### Expected behavior\r\n\r\nI can see disassembly code in main function.\r\n\r\n### Actual behavior\r\n```\r\n[0x00001640]> s sym.main\r\n[0x00001640]> x\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x00001640  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x00001650  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x00001660  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x00001670  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x00001680  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x00001690  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x000016a0  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x000016b0  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x000016c0  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x000016d0  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x000016e0  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x000016f0  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x00001700  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x00001710  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x00001720  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x00001730  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n```\r\n\r\nThere are nothing in main function, other function as well.\r\nBut I can still run code by using `dc`.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDcwNjUyMDgwNg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"What is Wine version @COOLMSF ?","createdAt":"2020-10-10T09:40:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17626#issuecomment-706520806","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcwNjYzODkxNA==","author":{"login":"COOLMSF"},"authorAssociation":"NONE","body":"> What is Wine version @COOLMSF ?\r\n\r\nwine-5.18","createdAt":"2020-10-11T02:16:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"LAUGH","users":{"totalCount":2}}],"url":"https://github.com/radareorg/radare2/issues/17626#issuecomment-706638914","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc4OTU4NDE5Mg==","author":{"login":"imcrom"},"authorAssociation":"NONE","body":"is this fixed? having the actual behavior in my version radare2 5.1.0 25703 @ linux-x86-64 git.5.1.0","createdAt":"2021-03-03T09:48:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17626#issuecomment-789584192","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc5MDU1Mjk3MA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"didnt tried, but nobody touched the winedbg code in r2. im aware winedbg had several bugs at the time, so i dont know if those were fixed.","createdAt":"2021-03-04T11:41:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17626#issuecomment-790552970","viewerDidAuthor":true}],"number":17626,"title":"radare2 with winedbg"},{"body":"The comment here states that the `type` member of `RAnalBaseType` is used for enum types:\r\nhttps://github.com/radareorg/radare2/blob/9e38afe782cd19f3b11f23c912f6309975d36598/libr/include/r_anal.h#L255\r\n\r\nBut actually it is not. I think it can be very useful to save the base type of an enum so the (de)serialization for this should be added.","comments":[],"number":17606,"title":"Enum base type is ignored"},{"body":"**Situation**\r\nThe disassembler does not inform on the relocations performed when type is R_X86_64_32S with a **non-null addend**. \r\n\r\nIn the [test.ko](https://github.com/ret2libc/radare2-testbins/blob/test.ko/elf/test.ko) there is a relocation for kmalloc_caches + 0x460. The .text gets patched correctly but there is no visual indication in the disassembly. `asm.comments` does not provide such information either. See the patched relocation for kmalloc_caches at the address 0x08000094:\r\n```\r\nâ”Œ 44: sym.test_init ();\r\nâ”‚           0x0800007c      e88e0a0000     call __fentry__             ;[1]; RELOC 64 init_module @ 0x0800007c ; [04] -r-x section size 44 named .init.text ; rsp=0xfffffffffffffff\r\nâ”‚           0x08000081      55             push rbp                    ; rsp=0xfffffffffffffff0\r\nâ”‚           0x08000082      48c7c7ba0000.  mov rdi, reloc..rodata.str1.1    ; 0x80000ba ; \"Hello World\\n\" ; rdi=0x80000ba -> 0x6c6c6548 sym..rodata.str1.1\r\nâ”‚           0x08000089      4889e5         mov rbp, rsp                ; rbp=0xfffffffffffffff0\r\nâ”‚           0x0800008c      e8860a0000     call printk                 ;[2] ; rsp=0xffffffffffffffe8 ; rip=0x8000b17 reloc.printk ; reloc.printk(0x80000ba, 0x0, 0x0, 0x0)\r\nâ”‚           0x08000091      48c7c67f0f00.  mov rsi, 0x8000f7f          ; rsi=0x8000f7f\r\nâ”‚           0x08000098      48c7c7c70000.  mov rdi, str.val:__p        ; 0x80000c7 ; \"val: %p\\n\" ; rdi=0x80000c7 -> 0x3a6c6176\r\nâ”‚           0x0800009f      e8730a0000     call printk                 ;[2] ; rsp=0xffffffffffffffe0 ; rip=0x8000b17 reloc.printk ; reloc.printk(0x80000c7, 0x8000f7f, 0x0, 0x0)\r\nâ”‚           0x080000a4      31c0           xor eax, eax                ; rax=0x0 ; zf=0x1 ; pf=0x1 ; sf=0x0 ; cf=0x0 ; of=0x0\r\nâ”‚           0x080000a6      5d             pop rbp                     ; rbp=0xffffffffffffffff ; rsp=0xffffffffffffffe8\r\nâ””           0x080000a7      c3             ret                         ; rip=0xffffffffffffffff ; rsp=0xfffffffffffffff0\r\n```\r\n**Proposal**\r\nA way to directly find out the operand corresponds to the result of a relocation. Any of the already existing mechanisms would be fine.\r\n\r\nThe information is present when `-e io.cache=false`:\r\n```\r\nâ”Œ 44: sym.test_init ();\r\nâ”‚           0x0800007c      e800000000     call __fentry__             ;[1]; RELOC 32 __fentry__ ; [04] -r-x section si\r\nâ”‚           ; CALL XREF from sym.test_init @ 0x800007c\r\nâ”‚           0x08000081      55             push rbp\r\nâ”‚           0x08000082      48c7c7000000.  mov rdi, 0                  ; RELOC 32 .rodata.str1.1 @ 0x080000ba\r\nâ”‚           0x08000089      4889e5         mov rbp, rsp\r\nâ”‚           0x0800008c      e800000000     call printk                 ;[2]; RELOC 32 printk\r\nâ”‚           ; CALL XREF from sym.test_init @ 0x800008c\r\nâ”‚           0x08000091      48c7c6000000.  mov rsi, 0                  ; RELOC 32 kmalloc_caches\r\nâ”‚           0x08000098      48c7c7000000.  mov rdi, 0                  ; RELOC 32 .rodata.str1.1 @ 0x080000ba + 0xd\r\nâ”‚           0x0800009f      e800000000     call printk                 ;[3]; RELOC 32 printk\r\nâ”‚           ; CALL XREF from sym.test_init @ 0x800009f\r\nâ”‚           0x080000a4      31c0           xor eax, eax\r\nâ”‚           0x080000a6      5d             pop rbp\r\nâ””           0x080000a7      c3             ret\r\n```\r\n\r\nThis is working as expected as well when the addend is 0 ([test_no_addend.ko.zip](https://github.com/radareorg/radare2/files/5175993/test_no_addend.ko.zip)):\r\n\r\n```\r\nâ”Œ 44: sym.test_init ();\r\nâ”‚           0x0800007c      e8860a0000     call __fentry__             ;[1]; RELOC 64 init_module @ 0x0800007c ; [04] -r-x section size 44 named .init.text ; rsp=0xfffffffffffffff8 ; rip=0x8000b07 reloc.__fentry ; reloc.__fentry(0x0, 0x0,\r\nâ”‚           0x08000081      55             push rbp                    ; rsp=0xfffffffffffffff0\r\nâ”‚           0x08000082      48c7c7ba0000.  mov rdi, reloc..rodata.str1.1    ; 0x80000ba ; \"Hello World\\n\" ; rdi=0x80000ba -> 0x6c6c6548 sym..rodata.str1.1\r\nâ”‚           0x08000089      4889e5         mov rbp, rsp                ; rbp=0xfffffffffffffff0\r\nâ”‚           0x0800008c      e87e0a0000     call printk                 ;[2] ; rsp=0xffffffffffffffe8 ; rip=0x8000b0f reloc.printk ; reloc.printk(0x80000ba, 0x0, 0x0, 0x0)\r\nâ”‚           0x08000091      48c7c6170b00.  mov rsi, reloc.kmalloc_caches    ; 0x8000b17 ; rsi=0x8000b17\r\nâ”‚           0x08000098      48c7c7c70000.  mov rdi, str.val:__p        ; 0x80000c7 ; \"val: %p\\n\" ; rdi=0x80000c7 -> 0x3a6c6176\r\nâ”‚           0x0800009f      e86b0a0000     call printk                 ;[2] ; rsp=0xffffffffffffffe0 ; rip=0x8000b0f reloc.printk ; reloc.printk(0x80000c7, 0x8000b17, 0x0, 0x0)\r\nâ”‚           0x080000a4      31c0           xor eax, eax                ; rax=0x0 ; zf=0x1 ; pf=0x1 ; sf=0x0 ; cf=0x0 ; of=0x0\r\nâ”‚           0x080000a6      5d             pop rbp                     ; rbp=0xffffffffffffffff ; rsp=0xffffffffffffffe8\r\nâ””           0x080000a7      c3             ret                         ; rip=0xffffffffffffffff ; rsp=0xfffffffffffffff0\r\n```\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY4ODI1MTY0Ng==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I do not think this is only about `R_X86_64_32S`. Even `printk` does not tell me that it was relocated.\r\n![image](https://user-images.githubusercontent.com/562321/92381100-8285df80-f10a-11ea-935a-1c06dcbb645a.png)\r\n\r\nI think that's just because once the relocation is applied, that is not shown anymore.","createdAt":"2020-09-07T11:03:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17589#issuecomment-688251646","viewerDidAuthor":false}],"number":17589,"title":"Inform within disassembler on the performed direct relocations with addend"},{"body":"Static .text section relocations are not handled properly. Demo relocatable object [attached](https://github.com/radareorg/radare2/files/5163379/test.zip).\r\n\r\n\r\n```                                   \r\n$ readelf -r test.o\r\n                           \r\nRelocation section '.rela.text' at offset 0x1c0 contains 1 entry:                                \r\n  Offset          Info           Type           Sym. Value    Sym. Name + Addend               \r\n000000000006  000900000002 R_X86_64_PC32     0000000000000000 foo - 4   \r\n                                                                                                                                  \r\nRelocation section '.rela.eh_frame' at offset 0x1d8 contains 1 entry:                       \r\n  Offset          Info           Type           Sym. Value    Sym. Name + Addend               \r\n000000000020  000200000002 R_X86_64_PC32     0000000000000000 .text + 0                                                                                                                                                                       \r\n```\r\n                                                                      \r\nIn Radare2:\r\n\r\n```                                                                                                                                                                                                                                              \r\n[0x08000040]> ir\r\n[Relocations]\r\n\r\nvaddr      paddr      type   name\r\nâ€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•\r\n0x08000046 0x00000006 ADD_32 foo - 0x0800004a\r\n0x080000a0 0x00000020 ADD_32 .text - 0x080000a0\r\n\r\n\r\n2 relocations\r\n\r\n[0x08000040]> pdf\r\n            ;-- section..text:\r\n            ;-- .text:\r\n            ;-- rip:\r\nâ”Œ 12: sym.function ();\r\nâ”‚           0x08000040      55             push rbp                    ; [01] -r-x section size 12 named .text\r\nâ”‚           0x08000041      4889e5         mov rbp, rsp\r\n(reloc.foo)\r\nâ”‚           0x08000044      8b0500000000   mov eax, dword [0x0800004a] ; [0x800004a:4]=0xffffc35d; RELOC 32 foo\r\nâ”‚           ; DATA XREF from sym.function @ 0x8000044\r\nâ”‚           0x0800004a      5d             pop rbp\r\nâ””           0x0800004b      c3             ret\r\n```                                                                                                                                                                                                                                              \r\n                                                                                                                                                                                                                                    \r\nAs an example IDA resolves by linking onto a phony extern segment:                                                                                                                                                                            \r\n``` \r\n.text:0000000000000000                                   public function                                  \r\n.text:0000000000000000                   function        proc near                                     \r\n.text:0000000000000000 55                                push    rbp                                      \r\n.text:0000000000000001 48 89 E5                          mov     rbp, rsp                           \r\n.text:0000000000000004 8B 05 3E 00 00 00                 mov     eax, cs:foo               \r\n.text:000000000000000A 5D                                pop     rbp                                      \r\n.text:000000000000000B C3                                retn                                                \r\n.text:000000000000000B                   function        endp                                                                     \r\n\r\nextern:0000000000000048                   ; Segment type: Externs                                                                     \r\nextern:0000000000000048                   ; extern                                                                                               \r\nextern:0000000000000048 00 00 00 00 00 00+                extrn foo:dword         ; DATA XREF: function+4â†‘r \r\nextern:0000000000000048 00 00                                                                                                                    \r\nextern:0000000000000048                                                                                                                              \r\nextern:0000000000000048                                   end\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY4NTkyOTE5MQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"When you start `radare2` on a relocatable object it should tell you something like `Warning: run r2 with -e io.cache=true to fix relocations in disassembly`.\r\n\r\nIf you do `radare2 -e io.cache=true -A ./test.o` you see:\r\n```\r\n[0x08000040]> pdf\r\n               ;-- section..text:\r\n               ;-- reloc..text:\r\n               ;-- .text:\r\n               ;-- rip:\r\nâ”Œ 12: sym.function ();\r\nâ”‚              0x08000040      55             push rbp                 ; RELOC 32 .text @ 0x08000040 - 0x80000a0 ; [01] -r-x section size 12 named .text\r\nâ”‚              0x08000041      4889e5         mov rbp, rsp\r\nâ”‚              0x08000044      8b05ff010000   mov eax, dword [reloc.foo] ; [0x8000249:4]=0\r\nâ”‚              0x0800004a      5d             pop rbp\r\nâ””              0x0800004b      c3             ret\r\n```","createdAt":"2020-09-02T18:48:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17577#issuecomment-685929191","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY4NjIzMTQxMw==","author":{"login":"cpey"},"authorAssociation":"CONTRIBUTOR","body":"Wouldn't we prefer to have the option set by default?","createdAt":"2020-09-03T03:38:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17577#issuecomment-686231413","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY4NjI3NDQ1MA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Yes I can agree it is not ideal, but enabling the option by default could be a bit unexpected for users, as io.cache=false prevents users from changing the view of the binary. \n\nMaybe they should be shown no matter what the value of io.cache. On the other hand, relocations really go and overwrite existing things in memory, so the current way really mimic that process. Also, we already provide a warning and a clear message about what to do to enable that feature.","createdAt":"2020-09-03T06:04:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/radareorg/radare2/issues/17577#issuecomment-686274450","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5MjM5MjQ3NA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I think the same. Io.cache shouldnt be enabled by default and maybe having a rw map without io.cache would work the same. But i think we will need to do that even with no io.cache.\r\n\r\nAlso it will be better to use io.pcache. And maybe having write cache enabled . This way we have a log of all the write operations done by the reloc linker","createdAt":"2020-09-15T00:42:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17577#issuecomment-692392474","viewerDidAuthor":true}],"number":17577,"title":"Properly handle .text section relocations"},{"body":"Ghidra's emulation system has supported float operation for a long time. And it's kind stupid to work around existing ESIL infrastructure for supporting float operation.(Yes I did!) Native support is rather better and I think ESIL needs enhancement imho.\r\n\r\nIf anyone want to do this, you can check my pr. Honestly, my implementation is bad, very bad.\r\n\r\nI' ll set `is_float` flag if I move a float value into a register. So I can know when to read a register as a float number.\r\n\r\npr: https://github.com/radareorg/r2ghidra-dec/pull/120\r\n","comments":[],"number":17541,"title":"Float arithmetic support in ESIL"},{"body":"`e??|nvim` or `e??|less` produces strange behavior after r2 receives `SIGWINCH`: r2 does not wait for the foreground process to finish and starts reading and writing to the terminal, that potentially results in a big mess.","comments":[],"number":17493,"title":"Piped process does not get waited after terminal resizing"},{"body":"radare2 seems to have the same bug I reported here:\r\nhttps://github.com/Vector35/binaryninja-api/issues/1875#issuecomment-671099707","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY3NDU3Mjk1NA==","author":{"login":"GustavoLCR"},"authorAssociation":"CONTRIBUTOR","body":"Wasn't this fixed with https://github.com/radareorg/radare2/pull/17219?\r\n\r\n![image](https://user-images.githubusercontent.com/23562137/90343201-8f6c5300-dfe4-11ea-9de6-0deedc05a2bb.png)\r\n\r\n\r\nWhat version are you using?\r\n","createdAt":"2020-08-16T20:19:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17475#issuecomment-674572954","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3NDYxOTQ0OA==","author":{"login":"MaorNr"},"authorAssociation":"NONE","body":"> Wasn't this fixed with https://github.com/radareorg/radare2/pull/17219?\n> \n> \n> \n> ![image](https://user-images.githubusercontent.com/23562137/90343201-8f6c5300-dfe4-11ea-9de6-0deedc05a2bb.png)\n> \n> \n> \n> \n> \n> What version are you using?\n> \n> \n\n4.3.1 windows, newest built version downloadable.","createdAt":"2020-08-17T02:09:17Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17475#issuecomment-674619448","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3NDY1MDQ4Mw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Please recheck with the latest version 4.3.1 is too old.","createdAt":"2020-08-17T04:36:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17475#issuecomment-674650483","viewerDidAuthor":false}],"number":17475,"title":"PE Loader Does Not Enforce FileAlignment on Section Starts"},{"body":"**Is your feature request related to a problem? Please describe.**\r\n #17300\r\nWe can't solve some problem link with the plt, if we don't do some analysis process.\r\n\r\n**Describe the solution you'd like**\r\nWe need to separate the binary loading with the essential (load dynamic section, info, list relocs, ect...) and the analysis part (identify the plt entries, ect...).\r\n\r\n**Describe alternatives you've considered**\r\nSome hard coding\r\n\r\n**Additional context**\r\nFrom what i understand it is what Ghidra is doing.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY3Mjg0MDA5MA==","author":{"login":""},"authorAssociation":"NONE","body":"Right now for me the most important part is identifying what need to be switch to the analysis part and implement all the analysis commands needed. After that we can try to solve #17300.\r\n\r\n\r\nWhat is the opinion of the radare2 community?","createdAt":"2020-08-12T12:27:06Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17448#issuecomment-672840090","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY4MDcyNzE1MQ==","author":{"login":""},"authorAssociation":"NONE","body":"@ret2libc What do you thinks of this idea?\r\n\r\nPS: You can look at this link https://github.com/NationalSecurityAgency/ghidra/issues/2201","createdAt":"2020-08-26T08:05:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17448#issuecomment-680727151","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY4MzkwOTE4NQ==","author":{"login":""},"authorAssociation":"NONE","body":"An example of the analysis implementation https://github.com/08A/radare2_misc/blob/master/plt_got.py\r\nlink plt and got","createdAt":"2020-08-31T17:08:10Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17448#issuecomment-683909185","viewerDidAuthor":false}],"number":17448,"title":"Separation of the binary loading and some analysis"},{"body":"This testsuite provides binaries compiled with various compilation and optimization options, we can compare analysis results and improve them.\r\n\r\nhttps://github.com/junxzm1990/x86-sok/tree/master/testsuite\r\n\r\nSee the paper at https://arxiv.org/ftp/arxiv/papers/2007/2007.14266.pdf","comments":[],"number":17447,"title":"Import testsuite from SoK"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | OpenBSD x86_64\r\n| File format of the file you reverse (mandatory)      | -\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | https://github.com/radareorg/radare2/commit/d246392687ef09fa27e25a07e71228e938c80380\r\n\r\nSee full log at https://builds.sr.ht/~xvilka/job/276157#task-test-0\r\n\r\n```\r\n[XX] db/esil/arm_16 arm s110 syscalls /ad svc\r\nR2_NOPLUGINS=1 radare2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -aarm -b16 -easm.os=s110 -m 0x16000 -Qc '/ad svc' bins/elf/BLE_Beacon2.NRF51822_OTA.bin\r\n-- stdout\r\n@@ -1,25 +0,0 @@\r\n-0x000168d0   # 2: svc 0x51\r\n-0x000168f2   # 2: svc 0x61\r\n-0x00016b42   # 2: svc 0x7f\r\n-0x00016c1c   # 2: svc 0x7c\r\n-0x00016c28   # 2: svc 0x78\r\n-0x00016c32   # 2: svc 0x7a\r\n-0x00016c3a   # 2: svc 0x77\r\n-0x00016ce4   # 2: svc 0xa0\r\n-0x00016ed6   # 2: svc 0xa9\r\n-0x000171b2   # 2: svc 0x73\r\n-0x00017212   # 2: svc 0x72\r\n-0x0001721e   # 2: svc 0x78\r\n-0x00017408   # 2: svc 0x40\r\n-0x000177f6   # 2: svc 0x3c\r\n-0x000177f8   # 2: svc 0x11\r\n-0x00017820   # 2: svc 0x13\r\n-0x0001785c   # 2: svc 0x60\r\n-0x00017864   # 2: svc 0x71\r\n-0x0001786c   # 2: svc 0x70\r\n-0x0001794c   # 2: svc 0xa2\r\n-0x0001799e   # 2: svc 0xa3\r\n-0x00017a1a   # 2: svc 0x63\r\n-0x00017d5e   # 2: svc 0x10\r\n-0x00017d6a   # 2: svc 0x26\r\n-0x00018660   # 2: svc 0xa4\r\n\r\n\r\n-- stderr\r\nWARNING: using oba to load the syminfo from different mapaddress.\r\nTODO: Must use the API instead of running commands to speedup loading times.\r\n\r\n-- exit status: -1\r\n```","comments":[],"number":17437,"title":"OpenBSD - \"db/esil/arm_16 arm s110 syscalls /ad svcâ€œ test failing"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nI'm always frustrated when I want to analyze a gameboy rom decompiled and then recompiled with more documentation in the code. I see a lot of missing information  such as function and label names. Radare2 does not handle debug infos such as function names. The gameboy emulator BGB handle these.\r\n\r\n**Describe the solution you'd like**\r\nA plugin in radare2 to handle debug infos.\r\n\r\n**Describe alternatives you've considered**\r\n\r\n**Additional context**\r\nI believed I should have a RAnal plugin. I was wrong. I have opened a wrong issue https://github.com/radareorg/radare2/issues/17393.\r\n\r\nA .dbginfo is missing in the currrent plugin. See [this code](https://github.com/radareorg/radare2/blob/master/libr/bin/p/bin_ningb.c#L286). If we add one, we can solve this issue.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY3MTEwNjE4Mg==","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"I may write this plugin. I will do it when I will have closed this issue: [See](https://github.com/radareorg/radare2/issues/414). @condret may also be interested to write this plugin.","createdAt":"2020-08-09T22:02:05Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17435#issuecomment-671106182","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs43_Ssc","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"afaik gb files have no debug symbols","createdAt":"2021-10-09T18:09:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17435#issuecomment-939338524","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs44Meay","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"@condret I am sure this is possible. The debug symbols are stored into another file. bgb does this. You can compile https://github.com/pret/pokered and run BGB if you want to test. This work on my computer.","createdAt":"2021-10-13T23:26:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17435#issuecomment-942794418","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs44MfaT","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"yeah, I know this exists, it's like a pdb file. tbh I'd prefere, if we just had a script as a r2pm package for loading these informations .... buuut we can do it in the plugin if you want","createdAt":"2021-10-13T23:35:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17435#issuecomment-942798483","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs44Mgl5","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"I planned to write this plugin. Can I? I just need more time.","createdAt":"2021-10-13T23:48:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17435#issuecomment-942803321","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs44Mgxh","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"no need to write a new plugin, you can extend the gb plugin that we already have","createdAt":"2021-10-13T23:50:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17435#issuecomment-942804065","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs44MhyX","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"Yes this is what I mean.","createdAt":"2021-10-14T00:01:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17435#issuecomment-942808215","viewerDidAuthor":false}],"number":17435,"title":"add debug infos to RBinPlugin for gameboy"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 20.04\r\n| File format of the file you reverse (mandatory)      | ELF \r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.6.0-git 25399 @ linux-x86-64 git.4.4.0-504-g78ea6ec78 commit: 78ea6ec78c908ad71a57866664798225b0e8f62d build: 2020-08-08__14:21:59\r\n\r\n### Expected behavior\r\n```\r\n[0x00001080]> afs Mammal *entry0 (int64_t arg3);\r\n[0x00001080]> afs\r\nMammal *entry0 (int64_t arg3);\r\n```\r\n### Actual behavior\r\n```\r\n[0x00001080]> afs void entry0 (int64_t arg3);\r\n[0x00001080]> afs Mammal *entry0 (int64_t arg3);\r\n<string>:1: error: ';' expected (got \"entry0\")\r\n<string>:1: error: declaration expected\r\n```\r\n`afs` c-parser won't allow any custom Data types, so any custom structures etc. in the signature return type or arguments\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY3MTE4OTkzOQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"It allows only the types that are predefined at this stage, i.e. known to the compiler. It will be eliminated once we switch to [tree-sitter](https://github.com/tree-sitter/tree-sitter-cpp/). Not sure what we can do right now though.","createdAt":"2020-08-10T06:43:17Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17432#issuecomment-671189939","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3MTI2NzU3NQ==","author":{"login":"HoundThe"},"authorAssociation":"CONTRIBUTOR","body":"Hmm is there some issue or PR regarding the tree-sitter switch?","createdAt":"2020-08-10T10:01:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17432#issuecomment-671267575","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3MTI4MTQ0Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"No separate issue, just a comment: https://github.com/radareorg/radare2/issues/4369#issuecomment-652987136","createdAt":"2020-08-10T10:37:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17432#issuecomment-671281446","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3MTI5NDkwNQ==","author":{"login":"HoundThe"},"authorAssociation":"CONTRIBUTOR","body":"So I guess I should leave it as it is without signature change until tree sitter switch?\r\n","createdAt":"2020-08-10T11:13:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/17432#issuecomment-671294905","viewerDidAuthor":false}],"number":17432,"title":"`afs` won't allow any custom type in the signature"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu x86 64\r\n| File format of the file you reverse (mandatory)      | ELF.\r\n| Architecture/bits of the file (mandatory)            | x64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.6.0-git 25024 @ linux-x86-64 git.4.4.0-498-g154416c8f commit: 154416c8fd4ce0a399c42e27ba88a0c535e320a0 build: 2020-08-02__18:20:05\r\n\r\n\r\n### Expected behavior\r\nShow function names and other infos. \r\n\r\n### Actual behavior\r\nI see a lot of warning and errors such as\r\n\r\n```\r\nInvalid address from 0x0000647d\r\nWARNING: r_anal_cc_arg: assertion 'anal && convention' failed (line 103)\r\n[esil at 0x001b6de1] TODO: stop\r\nWarning: No SN reg alias for current architecture\r\n```\r\n\r\n\r\n### Steps to reproduce the behavior \r\nradare2 -AA rom.gbc or radare2 rom.gbc; aaa;\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\nDrag and drop zip archives containing the Additional info here, don't use external services or link.\r\n\r\n[pokered.zip](https://github.com/radareorg/radare2/files/5012469/pokered.zip)\r\n\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY3MTA2MjM5Ng==","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"you probably can ignore the CC thing, from the information that I've read, gameboy rom developement never had any standartized calling conventions. Devs often built their own macro assembler tools or just did handwritten asm.","createdAt":"2020-08-09T15:00:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17393#issuecomment-671062396","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3MTA2Nzk1Mg==","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"@condret I believed there was a problem with esil because I saw the warning and a comment in the code. See [](https://github.com/radareorg/radare2/blob/master/libr/anal/p/anal_gb.c#L41) I may have been wrong.\r\n\r\nI was wrong. The debug symbol is a part of bin/ plugins. Should I open a new issue?","createdAt":"2020-08-09T15:49:02Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17393#issuecomment-671067952","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3MTU5MjY4NA==","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"@trufae you might need to close my issue if you do not think it pertinent.","createdAt":"2020-08-10T21:13:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17393#issuecomment-671592684","viewerDidAuthor":false}],"number":17393,"title":"error and missing infos on gameboy analysis. A full plugin Ranal for gameboy is needed."},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 20.04.1 x86-64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.6.0-git 26193 @ linux-x86-64 git.4.4.0-498-g154416c8f\r\ncommit: 154416c8fd4ce0a399c42e27ba88a0c535e320a0 build: 2020-08-02__02:36:41\r\n### Expected behavior\r\nbase64 encoded characters should appear correctly on the screen.\r\n### Actual behavior\r\nSome Unicode characters encoded with base64 appear funny on the screen.\r\nFor example, the Unicode character `'\\u03a6'` should appear as the Greek letter Phi, but appears as two gibberish characters on the screen. On the other hand, `'\\u2660'` appropriately appears as a Spade symbol.\r\n### Steps to reproduce the behavior \r\nOn bash: `$ echo -n $'\\u03a6' | base64` yields: `zqY=`\r\nHowever, on r2: `ag- ; agn \"Phi\" base64:zqY= ; agg` yields gibberish characters (see screenshot below)\r\n\r\nNotes:\r\n1. The character appears fine if printed directly, without being encoded to base64 first.\r\n2. `e scr.utf8 = true`\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n![phi](https://user-images.githubusercontent.com/10291650/89112556-0cd48700-d46d-11ea-98fd-ef671214f50c.png)\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY2ODc5MzI1Ng==","author":{"login":"elicn"},"authorAssociation":"CONTRIBUTOR","body":"Apparently it has nothing to do with `base64`, its the graph output:\r\n![uni](https://user-images.githubusercontent.com/10291650/89338350-1ea06f00-d6a5-11ea-8b2c-dc2e068e1506.png)\r\nI'll edit the bug title.","createdAt":"2020-08-04T19:52:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17391#issuecomment-668793256","viewerDidAuthor":false}],"number":17391,"title":"Some Unicode characters appear funny on graph output"},{"body":"Currently the radare2 SH-4 disassembler seems to misunderstand 0xFD, 0xF1 as `ftrv xmtrx,fv0`, which it is not.\r\n\r\nIt is in fact, `fsca fpul,fr0`.\r\n\r\nMany SH-4s have 2 undocumented `FSCA` and `FSRRA` instructions, that are normally listed as SH-4A exclusive. However, the SH-4 in the Sega Dreamcast and Naomi specifically had these added. Other SH-4s may also have these 2 instructions in an untested/unsupported form.\r\n\r\n`fsca FPUL,DRn`: 1111nnn011111101\r\n`fsrra FRn`: 1111nnnn01111101\r\nHere they are listed as SH-4A exclusive:\r\nhttp://shared-ptr.com/sh_insns.html\r\n\r\nHowever, see the following posts for more information:\r\nhttps://gcc.gnu.org/legacy-ml/gcc-patches/2005-03/msg01176.html\r\nhttps://github.com/NationalSecurityAgency/ghidra/issues/1730\r\n\r\nPossibly relevant for reference, MAME supports the instructions:\r\nhttps://github.com/mamedev/mame/blob/4263a71e64377db11392c458b580c5ae83556bc7/src/devices/cpu/sh/sh_dasm.cpp#L1102","comments":[],"number":17381,"title":"SH-4 instruction set: undocumented FSCA / FSRRA instruction being incorrectly read as FTRV"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nI am trying to parse the graph built by `axg` outside of r2. It looks like `axg*` produces output in the exact format that many graph libraries expect (named nodes, and edges between named nodes), which is fantastic! However, while `axg` and `axgj` output the exact point in a function where a reference exists, which is necessary to actually do anything practical with the data, `axg*` erases that information and replaces it with the start address of the function instead, making the output useless for anything beyond trivial function-level tracing.\r\n\r\n**Describe the solution you'd like**\r\nInstead of only creating nodes and edges with function addresses in `axg*`, it would be convenient and consistent to output the same instruction-level addresses as `axg` and `axgj`. If backwards compatibility is a concern, maybe behind a flag like `f`?\r\n\r\n**Describe alternatives you've considered**\r\nI've tried to solve the original problem through `axgj`, and even though it wasn't difficult to write the code, `axgj` seems like it has a bug causing malformed JSON missing large chunks of information to be produced from large graphs. I also started working on a parser for the output of `axg`, but it required a non-trivial whitespace-sensitive parser to extract information from it, which seemed like it would be a major pain to use. Writing an extension to r2 is the last alternative I considered, but it seemed that it would be more helpful to everybody using r2 who might run into these issues to have something like this available publicly.\r\n\r\n**Additional context**\r\nDevelopment is being done with the latest r2 version from git, as of the time of writing.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY2NDg0ODQwMw==","author":{"login":"karliss"},"authorAssociation":"CONTRIBUTOR","body":"R2 has multiple graph output formats you can see them using `ag?`. \r\naxg* outputs it using r2 commands, that's a format with very specific purpose and not for consumption by other tools.\r\nFor analysis using scripts you should use JSON ouptut. If there are bugs causing it to be malformed then those need to be fixed.\r\n\r\nMost instructions reference no more than one address drawing such graph would result in a bunch of spikey balls and would not be much better than displaying the same information in a table \"address  being referenced\" -> \"number of times address was referenced\". That's likely a reason why axg contains information about function -> address being referenced instead.\r\n\r\nWhat you actually want might be `axj` command which list all the references. It seems to use the address of instruction referencing things not function since it isn't designed for drawing things.","createdAt":"2020-07-28T08:11:07Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17363#issuecomment-664848403","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY2NTQzMzkxNg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Please provide a small reproducer for the bug you mentioned.","createdAt":"2020-07-29T05:08:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17363#issuecomment-665433916","viewerDidAuthor":false}],"number":17363,"title":"Prevent axg* from erasing important function offset information that is retained in axg and axgj"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Fedora 31\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86_64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.5.0-git 27583 @ linux-x86-64 git.4.4.0-411-g7ee93fb45 commit: 7ee93fb4573a7c165100483ff8848e3e3c84880e build: 2020-07-12__23:19:43\r\n\r\n### Expected behavior\r\n`kernel_stack` should be read and displayed.\r\n\r\n### Actual behavior\r\nWithout https://github.com/radareorg/radare2/pull/17259, this actually hangs forever.\r\nWith https://github.com/radareorg/radare2/pull/17259, it doesn't hang but it doesn't show `kernel_stack` either.\r\n\r\n### Steps to reproduce the behavior \r\n- `radare2 -d /bin/ls`\r\n- `di\r\n\r\n### Additional info\r\nIt could be that more recent kernel versions have prevented processes from reading the /stack file in /proc, but this should be double checked and better understood. If it is not possible anymore to read that file, probably an error message shall be printed for the user.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY1OTI4OTkyMA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@trufae I think this does not need to be in 4.5.0. That field is just used as a display info when you do `di` and right now everything works well, apart from the fact that field is not shown (unless you use `sudo`). It is not a breaking feature.","createdAt":"2020-07-16T09:22:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17261#issuecomment-659289920","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1OTU2NzIyMg==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"sgtm, i don't think there was any focus on the debugger for 4.5","createdAt":"2020-07-16T17:43:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17261#issuecomment-659567222","viewerDidAuthor":true}],"number":17261,"title":"linux_debug: /proc/<pid>/stack cannot be read"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Debian Alpha\r\n| File format of the file you reverse (mandatory)      | *\r\n| Architecture/bits of the file (mandatory)            | *\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.4.0-git 17284 @ darwin-x86-64 git.2.2.0-476-gf8cf84e06 commit: f8cf84e0653642d9ad34e760e0e56dd81860e799 build: 2018-02-17__11:08:27\r\n\r\n### Expected behavior\r\n\r\nCompiling fine\r\n\r\n### Actual behavior\r\n\r\n```\r\ngcc -c  -MD   -fPIC -g -Wall -D__UNIX__=1 -DR2_PLUGIN_INCORE -Ip/libbfwbf/include -I/home/radare/radare/radare2/libr/../shlr/bochs/include/ -I/home/radare/radare/radare2/libr/../shlr/gdb/include/ -I/home/radare/radare/radare2/libr/../shlr/qnx/include/ -Ip/librapwrap/include -I/home/radare/radare/radare2/libr/../shlr/windbg/ -DXNU_USE_PTRACE=0 -I../bin/format/elf -I/home/radare/radare/radare2/libr -I/home/radare/radare/radare2/libr/include -fvisibility=hidden -o p/native/linux/linux_debug.o p/native/linux/linux_debug.c\r\np/native/linux/linux_debug.c: In function â€˜linux_reg_profileâ€™:\r\np/native/linux/linux_debug.c:59:3: error: #error \"Unsupported Linux CPU\"\r\n   59 | # error \"Unsupported Linux CPU\"\r\n      |   ^~~~~\r\np/native/linux/linux_debug.c: In function â€˜print_fpuâ€™:\r\np/native/linux/linux_debug.c:971:2: warning: #warning print_fpu not implemented for this platform [-Wcpp]\r\n  971 | #warning print_fpu not implemented for this platform\r\n      |  ^~~~~~~\r\np/native/linux/linux_debug.c: In function â€˜linux_reg_readâ€™:\r\np/native/linux/linux_debug.c:1065:3: warning: #warning getfpregs not implemented for this platform [-Wcpp]\r\n 1065 |  #warning getfpregs not implemented for this platform\r\n      |   ^~~~~~~\r\np/native/linux/linux_debug.c:1072:4: error: unknown type name â€˜R_DEBUG_REG_Tâ€™\r\n 1072 |    R_DEBUG_REG_T regs;\r\n      |    ^~~~~~~~~~~~~\r\np/native/linux/linux_debug.c:976:7: warning: variable â€˜showfpuâ€™ set but not used [-Wunused-but-set-variable]\r\n  976 |  bool showfpu = false;\r\n      |       ^~~~~~~\r\nAt top level:\r\np/native/linux/linux_debug.c:883:13: warning: â€˜print_fpuâ€™ defined but not used [-Wunused-function]\r\n  883 | static void print_fpu(void *f){\r\n      |             ^~~~~~~~~\r\n/home/radare/radare/radare2/libr/../global.mk:38: recipe for target 'p/native/linux/linux_debug.o' failed\r\nmake[4]: *** [p/native/linux/linux_debug.o] Error 1\r\nmake[4]: Leaving directory '/home/radare/radare/radare2/libr/debug'\r\nMakefile:13: recipe for target 'foo' failed\r\nmake[3]: *** [foo] Error 2\r\nmake[3]: Leaving directory '/home/radare/radare/radare2/libr/debug'\r\nMakefile:159: recipe for target 'debug' failed\r\nmake[2]: *** [debug] Error 2\r\nmake[2]: Leaving directory '/home/radare/radare/radare2/libr'\r\nMakefile:22: recipe for target 'all' failed\r\nmake[1]: *** [all] Error 2\r\nmake[1]: Leaving directory '/home/radare/radare/radare2/libr'\r\nMakefile:56: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\nradare@radare:~/radare/radare2$ uname -a\r\nLinux radare 5.7.0-1-alpha-generic #1 Debian 5.7.6-1 (2020-06-24) alpha GNU/Linux\r\nradare@radare:~/radare/radare2$ \r\n```\r\n\r\n### Steps to reproduce the behavior \r\n```\r\n./configure\r\nmake\r\n```\r\n\r\nI think we should just not build debugger then for the unsupported platforms. It should not prevent radare2 from building.\r\n\r\n*P.S.: See also https://github.com/radareorg/ideas/issues/227*","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY1NjAyODc1OA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"use --without-debugger. but adding basic debugger support should be easy with a shell","createdAt":"2020-07-09T09:48:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17247#issuecomment-656028758","viewerDidAuthor":true}],"number":17247,"title":"Debian on Alpha architecture - fails to build"},{"body":"See https://github.com/radareorg/radare2/runs/849309858?check_suite_focus=true#step:11:709\r\n```\r\n[XX] db/archos/linux-x64/dbg_dmi dmi ld\r\nR2_NOPLUGINS=1 radare2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -d -Qc 'dmiqq ld\r\ndmiqq ld _dl_rtld_di_serinfo\r\ndk 9\r\n' /bin/ls\r\n-- stdout\r\n@@ -1,26 +1,20 @@\r\n-__get_cpu_features\r\n-_dl_signal_exception\r\n+.text\r\n _dl_get_tls_static_info\r\n GLIBC_PRIVATE\r\n GLIBC_2.3\r\n-_dl_catch_exception\r\n GLIBC_2.4\r\n-_dl_catch_error\r\n free\r\n realloc\r\n _dl_allocate_tls\r\n _r_debug\r\n __libc_stack_end\r\n+__libc_memalign\r\n _dl_deallocate_tls\r\n _dl_find_dso_for_object\r\n-_dl_exception_create\r\n calloc\r\n _dl_argv\r\n _dl_mcount\r\n-_dl_exception_create_format\r\n-__tunable_get_val\r\n-_dl_exception_free\r\n-_dl_signal_error\r\n+_dl_tls_setup\r\n _dl_debug_state\r\n _rtld_global\r\n GLIBC_2.2.5\r\n\r\n\r\n-- stderr\r\nProcess with PID 51567 started...\r\n= attach 51567 51567\r\nbin.baddr 0x00400000\r\nUsing 0x400000\r\nasm.bits 64\r\n```\r\nWe probably should not test *all* these symbols...","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY1NTQ0OTI0Mg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Also\r\n```\r\n\r\n\r\n[XX] db/archos/linux-x64/dbg_px0 dbg.px0\r\nR2_NOPLUGINS=1 radare2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -d -Qc px0 bins/elf/analysis/elf-nx\r\n-- stdout\r\n@@ -1 +1 @@\r\n-89e083ec0c50e8850b\r\n+89e0e84906\r\n\r\n\r\n-- stderr\r\nProcess with PID 51650 started...\r\n= attach 51650 51650\r\nbin.baddr 0x08048000\r\nUsing 0x8048000\r\nasm.bits 32\r\nglibc.fc_offset = 0x00148\r\n\r\n[**]                        db/archos/linux-x64/dbg_px0    11939 OK       919 BR        2 XX       22 FX\r\n\r\n\r\n[XX] db/archos/linux-x64/dbg_dmh dmh allocated\r\nR2_NOPLUGINS=1 radare2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -d -Qc 'dcu main\r\ndmh~?allocated\r\n7dso\r\ndmh~?allocated\r\n' bins/elf/simple_malloc_x86_64\r\n-- stdout\r\n@@ -1,3 +1,3 @@\r\n+0\r\n 1\r\n-2\r\n p=3\r\n\r\n\r\n-- stderr\r\nProcess with PID 51590 started...\r\n= attach 51590 51590\r\nbin.baddr 0x55c594c01000\r\nUsing 0x55c594c01000\r\nasm.bits 64\r\nContinue until 0x55c594c0170a using 1 bpsize\r\nhit breakpoint at: 55c594c0170a\r\nNo Heap section\r\nhit breakpoint at: 55c594c01723\r\n[XX] TIMEOUT db/archos/linux-x64/dbg_dmh dmh/dmha with memory dump\r\nR2_NOPLUGINS=1 radare2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -n -Qc '#re-map arena and [heap]\r\nom 3 0x7ffff7f8a000 0x898 0x0 rw- arena\r\nom 3 0x555555559000 0x3200 0x898 rw- [heap]\r\n\r\ndmha~?0x7ffff7f8a000\r\ne dbg.glibc.tcache=0\r\ndmh~?allocated\r\ne dbg.glibc.tcache=1\r\ndmh~?allocated\r\n' bins/heap/linux_glibc-2.30_x64.bin\r\n-- stdout\r\n@@ -1,3 +0,0 @@\r\n-1\r\n-3\r\n-2\r\n\r\n\r\n-- stderr\r\ndbg.glibc.tcache = 0\r\n\r\n-- exit status: -1\r\n[**]                        db/archos/linux-x64/dbg_dmh    12887 OK       941 BR        4 XX       22 FX\r\n\r\nFinished in 22 minutes and 43 seconds.\r\n```\r\ncc @meowmeowxw ","createdAt":"2020-07-08T11:05:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17242#issuecomment-655449242","viewerDidAuthor":false}],"number":17242,"title":"Debian Jessie - \"db/archos/linux-x64/dbg_dmi dmi ld\" failed test"},{"body":"See commented test in [`test/unit/test_diff.c`](https://github.com/radareorg/radare2/blob/master/test/unit/test_diff.c):\r\n```\r\n// Broken r_diff_buffers_distance_levenshtein, uncomment and see why it is incorrect\r\n\t// diff->type = 'l';\r\n\t// for (i = 0; i < R_ARRAY_SIZE (tests); i++) {\r\n\t// \tsize_t la = strlen (tests[i].a), lb = strlen ((const char *)tests[i].b);\r\n\t// \tr_diff_buffers_distance (diff, tests[i].a, la, tests[i].b, lb, &distance, NULL);\r\n\t// \tsnprintf (msg, sizeof msg, \"levenshtein %s/%s distance\", tests[i].a, tests[i].b);\r\n\t// \tmu_assert_eq (distance, tests[i].dis_distance, msg);\r\n\t// }\r\n```\r\nMore information for the context: https://github.com/radareorg/radare2/pull/16986","comments":[],"number":17237,"title":"Fix MODE_LEVENSTEIN diffing algorithm"},{"body":"Currently radare2 uses symbol name in its whole length as is. Moreover, the demangled comment shown as the right-aligned comment near the first instruction, not the near the function name.\r\nWe should:\r\n- [ ] Think about better way to represent such a long names\r\n- [ ] Move demangled version closer to the function name\r\n\r\n![image](https://user-images.githubusercontent.com/203261/86755346-281dc380-c074-11ea-9d01-8d98082728de.png)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY1NDcxODYyNA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"This reminds me to two issues i cant find now:\r\n\r\n* basic blocks in bbgraph can be too wide when long comments\r\n* class navigation using package/module names\r\n\r\nand may be also related to:\r\n\r\n* modificable rbin info to rename classes, methods ..)","createdAt":"2020-07-07T09:19:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/17230#issuecomment-654718624","viewerDidAuthor":true}],"number":17230,"title":"Better representation of the long function names (e.g. from C++)"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nhttps://github.com/d35ha/CallObfuscator\r\n\"Obfuscate windows apis from static analysis tools and debuggers\"\r\napi name written at IAT can be manipulated.\r\nI did not check with radare2.\r\nFrom the page: IDA seems to be tricked by this one.\r\n\r\n**Describe the solution you'd like**\r\nx64dbg the shown api names will only depend on what is actually called (not what written at the IAT)\r\n\r\n**Describe alternatives you've considered**\r\nx64dbg the shown api names will only depend on what is actually called (not what written at the IAT)\r\n\r\n**Additional context**\r\nDetails are there: https://github.com/d35ha/CallObfuscator","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NTQxNTM5MQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Hi @MariasStory ! Thanks for the feature request. Could you come up with a test case for this with some kind of reproducer for radare2 to show how it does (not) work?","createdAt":"2020-06-17T14:38:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17096#issuecomment-645415391","viewerDidAuthor":false}],"number":17096,"title":"Manipulated IAT detection/correction."},{"body":"Env : ios aarch64, iphone8\r\nUsed binary : released binary (radare2_4.3.1_iphoneos-arm.deb)\r\n\r\nInvalid register reference occurred on iphoneos-arm binary.\r\nx0 register that printed in radare2 is not the real x0 register, this is actually x1 register's value.\r\n\r\nLook at the picture below.\r\nArm assembly backed up the x29(fp), x30(lr) register value on stack.\r\nbut those are not same with x29, x30 that printed on radare2.\r\n\r\nRegister reference has a mistake.\r\nAll the register references are shifted by one maybe.\r\nCheck please.\r\n\r\nThis situation have happened since version 3.1.0 to 4.3.1(latest release)\r\nThanks.\r\n\r\n![invalid register reference](https://user-images.githubusercontent.com/48432932/84735945-b3f58000-afdf-11ea-92c8-a9d86eb5bc19.png)\r\n\r\nSecond clue.\r\nCommand \"movz w1, 0x02\" performed but the w0 register changed on radare2.\r\nand after \"movz w0, 0x01\" command, nothing happened. I can't see the real x0 register on anywhere. So sad.. U_U\r\n![movz w1](https://user-images.githubusercontent.com/48432932/84738067-2f593080-afe4-11ea-8a3c-d46a1e90c944.png)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY2MjI0MzI2NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@trufae could you please check this one?","createdAt":"2020-07-22T05:05:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17084#issuecomment-662243264","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY2MjM5NDAwNQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Can't reproduce. r2 4.3 is very old. can you try with master? my test looks like the following:\r\n\r\n```\r\nr2 -a arm -b 64 -\r\nwx 41008052\r\nao\r\nar~!0x00000000\r\nds\r\nar~!0x00000000\r\n```\r\n\r\nalso, i assume you are testing esil emulation in here, the commands involved here are:\r\n\r\n* arp  # check the regprofile\r\n* ao # see the esil expression\r\n* aes # step in\r\n\r\n\r\n![Screenshot 2020-07-22 at 13 11 57](https://user-images.githubusercontent.com/6431515/88169856-f46a9e00-cc1c-11ea-93c7-a525945b88d0.png)\r\n","createdAt":"2020-07-22T11:12:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17084#issuecomment-662394005","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY5MDEzNzI3NQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Any update or can we close this?","createdAt":"2020-09-10T10:21:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17084#issuecomment-690137275","viewerDidAuthor":true}],"number":17084,"title":"Invalid register reference on ios_aarch64"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nI'm always frustrated when ... I cannot see the dst/src offset of a ld instruction in disassembly.\r\nI also miss comments that indicate bankswitches.\r\n\r\n**Describe the solution you'd like**\r\nDedicated plugin-comment column in the output of the pd(...)-command and new field in RAnalOp for these comments","comments":[],"number":17079,"title":"Bring back gameboy autocomments"},{"body":"If you have the following directory structure:\r\n```\r\n / some_directory\r\n   /some_directory/radare2\r\n   /some_directory/radare2-testbins\r\n```\r\nCurrently you have to make some manual adjustments, e.g. do a symlink for `r2r` to take binaries properly.\r\nIt would be awesome to make an environment variable or an option, e.g. `R2_TESTBINS_DIR` so r2r will take them accordingly. It is helpful in development.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDI1MzQ2Mg==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"This must take into account that r2r tests can require binaries from multiple directories, for example when plugins use it for their own test suite, so only hard-pinning the FILE variable to a specific directory will not be sufficient.","createdAt":"2020-06-15T16:58:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17074#issuecomment-644253462","viewerDidAuthor":false}],"number":17074,"title":"Allow to run `r2r` with the specified binaries directory"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 18.04.4 LTS (GNU/Linux 5.3.0-1022-azure x86_64)\r\n| File format of the file you reverse (mandatory)      | PE\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.5.0-git 24737 @ linux-x86-64 git.4.4.0-253-gae883f0cd commit: ae883f0cd3b12da0272f1471cab82c2e75cd1575 build: 2020-06-10__08:37:32\r\n\r\n### Expected behavior\r\n(From IDA):\r\n```\r\n.text:0000000000402980 loc_402980:                             \r\n.text:0000000000402980                 mov     rcx, rbp\r\n.text:0000000000402983                 call    sub_40AF80\r\n.text:0000000000402988                 mov     rax, [rsp+418h+var_68]\r\n.text:0000000000402990                 mov     rdx, r14\r\n.text:0000000000402993                 lea     rcx, aS_8       ; \"%s\"\r\n.text:000000000040299A                 sub     rax, 1\r\n.text:000000000040299E                 cmp     rax, rsi\r\n.text:00000000004029A1                 cmovbe  rdx, r15\r\n.text:00000000004029A5                 add     rsi, 1\r\n.text:00000000004029A9                 call    printf\r\n.text:00000000004029AE                 cmp     [rsp+418h+var_68], rsi\r\n.text:00000000004029B6                 ja      short loc_402940\r\n.text:00000000004029B8                 jmp     loc_4027C0\r\n.text:00000000004029B8 ; ---------------------------------------------------------------------------\r\n.text:00000000004029BD                 align 20h\r\n.text:00000000004029C0                 mov     r12d, [rbx+rsi*4]\r\n```\r\n### Actual behavior\r\n\r\n```\r\n 0x00402980      4889e9         mov rcx, rbp                          ; int64_t arg1\r\nâ”‚ 0x00402983      e8f8850000     call fcn.0040af80                     ; fcn.0040ad40+0x240\r\nâ”‚ 0x00402988  ~   488b8424b003.  mov rax, qword [var_3b0h]\r\nâ”‚ ; CODE XREF from fcn.00402200 @ 0x4023c9\r\nâ”‚ ;-- case 22:                                                         ; from 0x4023c9\r\nâ”‚ 0x0040298c      b003           mov al, 3\r\nâ”‚ 0x0040298e      0000           add byte [rax], al\r\n| ----------- true: 0x00402990\r\nâ”‚ ; CODE XREF from fcn.00402200 @ 0x4023c9\r\nâ”‚ ;-- case 22:                                                         ; from 0x4023c9\r\nâ”‚ 0x0040298c      b003           mov al, 3\r\nâ”‚ 0x0040298e      0000           add byte [rax], al\r\n| ----------- true: 0x00402990\r\nâ”‚ 0x00402990      4c89f2         mov rdx, r14\r\nâ”‚ 0x00402993      488d0d1cf000.  lea rcx, [0x004119b6]                 ; \"%s\"\r\nâ”‚ 0x0040299a  ~   4883e801       sub rax, 1\r\nâ”‚ ; CODE XREF from fcn.00402200 @ 0x4023c9\r\nâ”‚ ;-- case 21:                                                         ; from 0x4023c9\r\nâ”‚ 0x0040299c      e8014839f0     call 0xfffffffff07971a2\r\n| ----------- true: 0x004029a1\r\nâ”‚ ; CODE XREF from fcn.00402200 @ 0x4023c9\r\nâ”‚ ;-- case 21:                                                         ; from 0x4023c9\r\nâ”‚ 0x0040299c      e8014839f0     call 0xfffffffff07971a2\r\n| ----------- true: 0x004029a1\r\nâ”‚ 0x004029a1      490f46d7       cmovbe rdx, r15\r\nâ”‚ 0x004029a5      4883c601       add rsi, 1\r\nâ”‚ 0x004029a9  ~   e82abc0000     call sub.msvcrt.dll_printf            ; int printf(const char *format)\r\nâ”‚ ; CODE XREF from fcn.00402200 @ 0x4023c9\r\nâ”‚ ;-- case 20:                                                         ; from 0x4023c9\r\nâ”‚ 0x004029ac      0000           add byte [rax], al\r\n| ----------- true: 0x004029ae\r\nâ”‚ ; CODE XREF from fcn.00402200 @ 0x4023c9\r\nâ”‚ ;-- case 20:                                                         ; from 0x4023c9\r\nâ”‚ 0x004029ac      0000           add byte [rax], al\r\n| ----------- true: 0x004029ae\r\nâ”‚ 0x004029ae      4839b424b003.  cmp qword [var_3b0h], rsi\r\nâ”‚ 0x004029b6      7788           ja 0x402940\r\n| ----------- true: 0x00402940  false: 0x004029b8\r\nâ”‚ 0x004029b8  ~   e903feffff     jmp 0x4027c0\r\nâ”‚ ; CODE XREF from fcn.00402200 @ 0x4023c9\r\nâ”‚ ;-- case 17:                                                         ; from 0x4023c9\r\nâ”‚ 0x004029bc      ff             invalid\r\n| ----------- true: 0x004027c0\r\nâ”‚ ; CODE XREF from fcn.00402200 @ 0x4023c9\r\nâ”‚ ;-- case 17:                                                         ; from 0x4023c9\r\nâ”‚ 0x004029bc      ff0f           dec dword [rdi]\r\n\r\nâ”‚ ; CODE XREF from fcn.00402200 @ 0x402957\r\nâ”‚ ;-- case 9:                                                          ; from 0x402957\r\nâ”‚ 0x004029c0      448b24b3       mov r12d, dword [rbx + rsi*4]\r\n```\r\n\r\n### Steps to reproduce the behavior \r\nOpen ncdump.exe on radare2 and execute the following commands:\r\n\r\n```\r\naa\r\naac\r\naaf\r\npdr 0x00402200\r\n```\r\n[ncdump.zip](https://github.com/radareorg/radare2/files/4757302/ncdump.zip)\r\n\r\n### Additional info\r\nThe referencing code at fcn.4023c9 is (from IDA):\r\n```\r\n.text:00000000004023B9                 lea     rax, unk_411A30\r\n.text:00000000004023C0                 mov     edx, ebx\r\n.text:00000000004023C2                 movsxd  rdx, dword ptr [rax+rdx*4]\r\n.text:00000000004023C6                 add     rax, rdx\r\n.text:00000000004023C9                 jmp     rax\r\n```\r\n\r\nThe data in unk_411A30 is (from IDA):\r\n```\r\n0000000000411A30  10 0D FF FF 80 0C FF FF  10 0D FF FF A0 0C FF FF  ..Â Â Ã‡.Â Â ..Â Â Ã¡.Â Â \r\n0000000000411A40  60 0C FF FF 05 0C FF FF  70 0B FF FF 50 0B FF FF  `.Â Â ..Â Â p.Â Â P.Â Â \r\n0000000000411A50  30 0B FF FF 10 0B FF FF  F0 0A FF FF D3 0A FF FF  0.Â Â ..Â Â =.Â Â +.Â Â \r\n0000000000411A60  35 0A FF FF BC 0F FF FF  AC 0F FF FF BC 0F FF FF  5.Â Â +.Â Â Â¼.Â Â +.Â Â \r\n0000000000411A70  9C 0F FF FF 8C 0F FF FF  BC 0F FF FF BC 0F FF FF  Â£.Â Â Ã®.Â Â +.Â Â +.Â Â \r\n0000000000411A80  7C 0F FF FF 6C 0F FF FF  5C 0F FF FF FC 0E FF FF  |.Â Â l.Â Â \\.Â Â n.Â Â \r\n0000000000411A90  FC 0E FF FF 00 00 00 00  3C 3F 78 6D 6C 20 76 65  n.Â Â ....<?xml ve\r\n```\r\n\r\nHowever, it seems that there is a similar use of such \"jump table\" for offsets that start at 0x411A64, so I assume the 1st \"jump table\" at 0x411A30 contains only 13 entries, and afterwards its effectively used by the code as a different \"jump table\". So I guess that the radare2 analysis stops referring to that jump table too late by considering both tables as part of the first one - so it creates bad references that point to the middle of opcodes, creating those disassembly mistakes. Note that the radare2 output disassembly says \"case 22\", \"case 21\" and so on, and if I calculate the addresses for those cases - it is correct. The point is it should have stopped after 13 cases.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDY1MTQ3Ng==","author":{"login":"amitzu"},"authorAssociation":"NONE","body":"Updated the issue's title according to important findings added to original issue under \"Additional info\"","createdAt":"2020-06-16T09:32:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17036#issuecomment-644651476","viewerDidAuthor":false}],"number":17036,"title":"Incorrect detection of jump table's ending causing incorrect disassemblies in middle of opcodes (x86/64)"},{"body":"For the sake of simplicity, I'd like to remove ``++``, ``--``, ``++=``, ``--=``, ``++=[]`` and ``--=[]`` from esil.\r\nOpinions please","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0MTUwODc1NA==","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"I'm especially asking for the opinion of @trufae @thestr4ng3r and @XVilka ","createdAt":"2020-06-09T18:59:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17029#issuecomment-641508754","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0MTcyMjIyMw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Makes sense, but will require changes across all r2 plugins.","createdAt":"2020-06-10T05:00:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17029#issuecomment-641722223","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0MTg5MDE2Nw==","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"I'd do that change. But the tests scare me","createdAt":"2020-06-10T09:50:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17029#issuecomment-641890167","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0MTkxMTExMg==","author":{"login":"unixfreaxjp"},"authorAssociation":"NONE","body":"> I'd do that change. But the tests scare me\r\n\r\n@condret I am OK with it.\r\n\r\njust a FYI, my testbeds are not CI and performing ESIL check but it is using much simpler operations so it is unaffected to your plan, \r\nand also on my point of operational analysis, I don't see any problem, except for they who do CTF maybe? ","createdAt":"2020-06-10T10:28:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17029#issuecomment-641911112","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0MjEwMzM2Ng==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"it depends where you put the simplicity focus on. the one typing the esil expression or the vm itself. also can you git grep to find out how many use cases of those commands are currently in use.","createdAt":"2020-06-10T15:59:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17029#issuecomment-642103366","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY0MjEwNjkxOQ==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"Since ESIL isn't meant to be a read or written by humans, I have no objection against removing this unnecessary sugar.","createdAt":"2020-06-10T16:05:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17029#issuecomment-642106919","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0MjExNzA5OA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i think we can have an esil preprocessor that provides such high level constructions to compile down to something more verbose. but at the end the more instructions we execute the slower esil will be. so imho removing this will make the esil vm simpler, but also slower and will make programmers life harder\r\n\r\nAnd yes, ESIL is meant to be read and written by humans. It's just picky about which humans can read it.","createdAt":"2020-06-10T16:21:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17029#issuecomment-642117098","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY0MjE5MTI2NA==","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"it's a tradeoff, I'd prefere having less esil operations and instead longer esil-expressions. Every esil-operation needs to be implemented at least twice. one time for emulation and the other implementation is for dfg, the less operations we have, the less effort is needed for creating graphs (and hopefully analysis) from esil","createdAt":"2020-06-10T18:45:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17029#issuecomment-642191264","viewerDidAuthor":false}],"number":17029,"title":"Consider removing esil_inc and esil_dec"},{"body":"- [ ] https://github.com/radareorg/radare2/issues/5136\r\n- [ ] https://github.com/radareorg/radare2/issues/4635\r\n- [ ] https://medium.com/@0x4ndr3/assembly-wrapping-a-new-technique-for-anti-disassembly-c144eb90e036 (see https://reverseengineering.stackexchange.com/questions/1531/what-is-overlapping-instructions-obfuscation also)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0MTk0OTg5NQ==","author":{"login":"unixfreaxjp"},"authorAssociation":"NONE","body":"@XVilka ; test result are below from my point, hope helps, ref: https://github.com/radareorg/radare2/issues/5136 (deadcode)\r\n\r\nI tested in these tree instances without build error today, just now, using commit: ae883f0cd3b12da0272f1471cab82c2e75cd1575\r\n\r\n```asm\r\n$ r2 -v\r\nradare2 4.5.0-git 24737 @ linux-x86-32 git.4.4.0-253-gae883f0\r\ncommit: ae883f0cd3b12da0272f1471cab82c2e75cd1575 build: 2020-06-10__19:52:19\r\n\r\n$ r2 -v\r\nradare2 4.5.0-git 24737 @ freebsd-x86-64 git.4.4.0-253-gae883f0cd\r\ncommit: ae883f0cd3b12da0272f1471cab82c2e75cd1575 build: 2020-06-10__19:54:43\r\n\r\n$ r2 -v\r\nradare2 4.5.0-git 24737 @ linux-x86-64 git.4.4.0-253-gae883f0\r\ncommit: ae883f0cd3b12da0272f1471cab82c2e75cd1575 build: 2020-06-10__19:19:40\r\n```\r\n\r\nUsing assembly code below from @trufae :\r\n\r\nIn assembly:\r\n```asm\r\n.arch x86\r\n.bits 64\r\n    push rbp\r\n    jz target\r\n    jnz target\r\n.byte 33\r\ntarget:\r\n    mov eax, 33\r\n    int 0x80\r\n    ret\r\n```\r\n\r\nHow the binary looks like in all tests.\r\n```asm\r\n$ rasm2 -f antidism.asm\r\n557403750121b821000000cd80c3\r\n```\r\n\r\nThe results are in below (It is self explanatory)\r\n\r\nin 32bit:\r\n\r\n```asm\r\n\r\n                                                          .---------------------------------------.\r\n                                                          | [0x0]                                 |\r\n                                                          | 16: fnc000 ();                        |\r\n                                                          | 0x00000000 55             push ebp    |\r\n                                                          | 0x00000001 7403           je 6        |\r\n                                                          `---------------------------------------'\r\n                                                                  f t\r\n                                                                  | |\r\n                                                                  | '--------------------------.\r\n                                               .------------------'                            |\r\n                                               |                                               |\r\n                                           .------------------------------------.              |\r\n                                           |  0x3 [ob]                          |              |\r\n                                           | 0x00000003 7501           jne 6    |              |\r\n                                           `------------------------------------'              |\r\n                                                   f t                                         |\r\n                                                   | |                                         |\r\n                                                   | '--------------------.                    |\r\n        .------------------------------------------'                      |                    |\r\n        |                                                                 | .------------------'\r\n        |                                                                 | |\r\n    .----------------------------------------------------------.    .--------------------------------------------.\r\n    |  0x5 [oc]                                                |    |  0x6 [od]                                  |\r\n    | 0x00000005 21b821000000   and dword [eax + 0x21], edi    |    | ; '!'                                      |\r\n    `----------------------------------------------------------'    | ; 33                                       |\r\n                                                                    | 0x00000006 b821000000     mov eax, 0x21    |\r\n                                                                    `--------------------------------------------'\r\n```\r\n\r\nin 64 bit:\r\n\r\n```asm\r\n\r\n                                                          .---------------------------------------.\r\n                                                          | [0x0]                                 |\r\n                                                          | 16: fcn001 (int64_t arg1);            |\r\n                                                          | ; arg int64_t arg1 @ rdi              |\r\n                                                          | 0x00000000 55             push rbp    |\r\n                                                          | 0x00000001 7403           je 6        |\r\n                                                          `---------------------------------------'\r\n                                                                  f t\r\n                                                                  | |\r\n                                                                  | '--------------------------.\r\n                                               .------------------'                            |\r\n                                               |                                               |\r\n                                           .------------------------------------.              |\r\n                                           |  0x3 [ob]                          |              |\r\n                                           | 0x00000003 7501           jne 6    |              |\r\n                                           `------------------------------------'              |\r\n                                                   f t                                         |\r\n                                                   | |                                         |\r\n                                                   | '--------------------.                    |\r\n        .------------------------------------------'                      |                    |\r\n        |                                                                 | .------------------'\r\n        |                                                                 | |\r\n    .----------------------------------------------------------.    .--------------------------------------------.\r\n    |  0x5 [oc]                                                |    |  0x6 [od]                                  |\r\n    | ; arg1                                                   |    | ; '!'                                      |\r\n    | 0x00000005 21b821000000   and dword [rax + 0x21], edi    |    | ; 33                                       |\r\n    `----------------------------------------------------------'    | 0x00000006 b821000000     mov eax, 0x21    |\r\n                                                                    `--------------------------------------------'  \r\n\r\n```\r\nHope this helps.","createdAt":"2020-06-10T11:48:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17019#issuecomment-641949895","viewerDidAuthor":false}],"number":17019,"title":"META - Handle antidisassembly tricks"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu18.04 x86 64\r\n| File format of the file you reverse (mandatory)      | PE\r\n| Architecture/bits of the file (mandatory)            | x86/32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.4.0 26999 @ linux-x86-64 git.4.4.0\r\n| |commit: 9ea0b7ce566cfdcfb3513f407c4056915204294a build: 2020-06-07__16:58:18\r\n### Expected behavior\r\nSucceed to open project without errors.\r\n### Actual behavior\r\nA bunch of errors, `i` shows \"No file selected\".\r\n### Steps to reproduce the behavior \r\n- Please share the binary if it is shareable by drag and dropping it here in a zip archive (mandatory)\r\n[Wrangler.zip](https://github.com/radareorg/radare2/files/4743590/Wrangler.zip)\r\n```\r\nr2 Wrangler.exe\r\naaa\r\nPs wrangler\r\nq\r\n\r\nr2 -p wrangler\r\n```\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\nafB: Cannot find function to set bits at 0x005a41d4\r\nafc: Cannot find function here\r\nafB: Cannot find function to set bits at 0x004346ac\r\nafc: Cannot find function here\r\nafB: Cannot find function to set bits at 0x004346c4\r\nafc: Cannot find function here\r\nafB: Cannot find function to set bits at 0x00434725\r\nafc: Cannot find function here\r\nafB: Cannot find function to set bits at 0x00434750\r\n......(snipped)\r\nafc: Cannot find function here\r\nafb+: Cannot add basic block at 0x00404730\r\nafb+: Cannot add basic block at 0x00404745\r\nafb+: Cannot add basic block at 0x0040474a\r\nafb+: Cannot add basic block at 0x0040474f\r\nafb+: Cannot add basic block at 0x00404754\r\nafb+: Cannot add basic block at 0x00404759\r\nafb+: Cannot add basic block at 0x0040475e\r\nafb+: Cannot add basic block at 0x00404768\r\nafb+: Cannot add basic block at 0x00404775\r\nafb+: Cannot add basic block at 0x00404777\r\nafb+: Cannot add basic block at 0x00404784\r\nafb+: Cannot add basic block at 0x00404786\r\nafb+: Cannot add basic block at 0x00404793\r\nafb+: Cannot add basic block at 0x00404795\r\nafb+: Cannot add basic block at 0x00404798\r\nafb+: Cannot add basic block at 0x004047b0\r\nafb+: Cannot add basic block at 0x004047b3\r\nafb+: Cannot add basic block at 0x004047b6\r\nafb+: Cannot add basic block at 0x004047c6\r\nafb+: Cannot add basic block at 0x004047c9\r\nafb+: Cannot add basic block at 0x004047d6\r\nafB: Cannot find function to set bits at 0x00404730\r\nafc: Cannot find function here\r\nafb+: Cannot add basic block at 0x0040928a\r\nafb+: Cannot add basic block at 0x00409292\r\nafb+: Cannot add basic block at 0x0040929e\r\nafb+: Cannot add basic block at 0x004092a1\r\nafb+: Cannot add basic block at 0x004092a8\r\nafb+: Cannot add basic block at 0x004092b5\r\nafb+: Cannot add basic block at 0x004092b6\r\nafb+: Cannot add basic block at 0x004092ba\r\nafb+: Cannot add basic block at 0x004092be\r\nafb+: Cannot add basic block at 0x004092c4\r\nafB: Cannot find function to set bits at 0x0040928a\r\nafc: Cannot find function here\r\nMissing function at 0x0040928a\r\nMissing function at 0x0040928a\r\nafb+: Cannot add basic block at 0x0040cfa1\r\nafb+: Cannot add basic block at 0x0040cfa8\r\nafb+: Cannot add basic block at 0x0040cfb1\r\nafb+: Cannot add basic block at 0x0040cfb3\r\nafb+: Cannot add basic block at 0x0040cfb9\r\nafb+: Cannot add basic block at 0x0040cfc4\r\nafb+: Cannot add basic block at 0x0040cfcb\r\nafb+: Cannot add basic block at 0x0040cfd3\r\nafb+: Cannot add basic block at 0x0040cfdc\r\nafb+: Cannot add basic block at 0x0040cfe2\r\nafB: Cannot find function to set bits at 0x0040cfa1\r\nafc: Cannot find function here\r\nMissing function at 0x0040cfa1\r\nMissing function at 0x0040cfa1\r\nMissing function at 0x0040cfa1\r\nNo file to load bin from?\r\nNo file to load bin from?\r\nNo file to load bin from?\r\nNo file to load bin from?\r\nNo file to load bin from?\r\nNo file to load bin from?\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0Mjk1Nzg4Nw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Unfortunately current projects are known to be broken. I am not sure how much we can do at the moment, as a complete rewrite of project implementation is probably needed to fix a lot of existing issues.\r\n\r\ncc @thestr4ng3r ","createdAt":"2020-06-11T22:14:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17013#issuecomment-642957887","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg0Njg4NzAyMg==","author":{"login":"Gskartwii"},"authorAssociation":"NONE","body":"Hey! I'm hitting a pretty similar issue: loading projects produces \"cannot add basic block at 0x...\" errors, both on r2 v5.2.1 (from Arch Linux community repo) and r2 v5.3.0.r26008.6f0dd19157 (from the AUR). What is the state of this issue?","createdAt":"2021-05-24T08:45:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17013#issuecomment-846887022","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg0NjkzNzM4NQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"The issue is in the way the basic blocks are stored which is inconsistent and causes the sotrage to report wrong cfg on some functions because some bbs are registered properly and others dont. It happens on some binaries, not all of them. I have a reproducer on a windows dll, but that issue only appears in projects because is the place where loading the analysis data is checked. But you may repro the same project if you do: afl*>$a;.$a\r\n","createdAt":"2021-05-24T10:09:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17013#issuecomment-846937385","viewerDidAuthor":true}],"number":17013,"title":"bunch of errors when open project"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | MacOS\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86_64\r\n| r2 -v full output, **not truncated** (mandatory)     | rradare2 4.5.0-git 24702 @ darwin-x86-64 git.4.4.0-225-g1cb18df8b commit: 1cb18df8b4dfd2ec98ca6697b5efb9381e1d2f40 build: 2020-06-01__10:56:33\r\n\r\n### Expected behavior\r\nI try to find the longest cfg path that covers most functions of the elf binary, so I use command agC, it should list all functions imported of each function.\r\n\r\n### Actual behavior\r\nthe main function (not entry0) compiled by gcc not listed on the result Orz.\r\n\r\n### Steps to reproduce the behavior \r\n\r\n<img width=\"464\" alt=\"image\" src=\"https://user-images.githubusercontent.com/8559056/83641110-a8698880-a5df-11ea-9e3b-b7d503ee8020.png\">\r\n\r\nthere're 3 function label should be pass to the CRTStartup of libc. after CRTStartup finish its work, main@sub_400A68 should be indirect invoked. however 0x0400A68 didn't displayed on the result of command agCj.\r\n\r\n\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\n[mirai_stripped.zip](https://github.com/radareorg/radare2/files/4723692/mirai_stripped.zip)\r\n","comments":[],"number":17003,"title":"command agC didn't get work on all function "},{"body":"The [Elbrus 2000](https://en.wikipedia.org/wiki/Elbrus_2000), E2K (Russian: Ð­Ð»ÑŒÐ±Ñ€ÑƒÑ 2000) is a Russian 512-bit wide VLIW microprocessor developed by Moscow Center of SPARC Technologies (MCST) and fabricated by TSMC.\r\n\r\n![image](https://user-images.githubusercontent.com/203261/83604829-66bdeb00-a5a9-11ea-99aa-e87d4af0dec8.png)\r\n\r\n\r\nIt supports two instruction set architectures (ISA):\r\n-    Elbrus VLIW\r\n-    Intel x86 (a complete, system-level implementation with a software dynamic binary translation virtual machine, similar to Transmeta Crusoe)\r\n\r\n[elbrus_prog_2020-05-30.pdf](https://github.com/radareorg/radare2/files/4721421/elbrus_prog_2020-05-30.pdf)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDcyNzI2MTU5Ng==","author":{"login":"uis246"},"authorAssociation":"NONE","body":"https://github.com/nrdmn/elbrus-docs","createdAt":"2020-11-14T20:32:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17002#issuecomment-727261596","viewerDidAuthor":false}],"number":17002,"title":"Elbrus (E2k) architecture support"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | OpenBSD x86 64, Debian x86 64\r\n| File format of the file you reverse (mandatory)      | N/A\r\n| Architecture/bits of the file (mandatory)            | x86/32\r\n| r2 -v full output, **not truncated** (mandatory)     |  radare2 4.4.0 0 @ openbsd-x86-64 git.4.4.0, commit: HEAD build: 2020-06-02__10:09:34\r\n\r\nNB: Building radare2 from Git HEAD failed so I pulled `libr/asm/p/asm_x86_nz.c` from git rev b185296 into my build tree.\r\n\r\n### Actual behavior\r\n\r\nIt seems that the x86.nz assembler doesn't make a distinction between the 16-bit and 32-bit register sizes.\r\nFor example:\r\n\r\n```\r\n% rasm2 -b 32 -a x86.nz  'push cx'\r\n51\r\n% rasm2 -b 32 -a x86.nz  'pop cx'\r\n59\r\n```\r\n### Expected behavior\r\n\r\nWhereas others produce what I believe to be the correct sequence of opcodes:\r\n\r\n```\r\n% rasm2 -b 32 -a x86.as  'push cx'\r\n6651\r\n% rasm2 -b 32 -a x86.as  'pop cx'\r\n6659\r\n% rasm2 -b 32 -a x86.nasm  'push cx'\r\n6651\r\n% rasm2 -b 32 -a x86.nasm  'pop cx'\r\n6659\r\n````\r\n\r\nWhile these examples refer to cx, the incorrect opcodes are also generated for [abd]x.\r\n\r\n### Steps to reproduce the behavior \r\n\r\nSee above commands.","comments":[],"number":17000,"title":"Incorrect assembly generated for push/pop 16-bit GPR (x86.nz)"},{"body":"# This template is meant for bug reports, if you have a feature request, please be as descriptive as possible and delete the template\r\n\r\nMake sure you are testing using the latest git version of radare2 before submitting any issue.\r\n\r\n*If you would like to report a bug, please fill the template below*\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | ubuntu 19.10 x64 \r\n| File format of the file you reverse (mandatory)      | gameboy save file with gameboy instructions\r\n| Architecture/bits of the file (mandatory)            | gameboy\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.5.0-git 24710 @ linux-x86-64 git.4.4.0-229-g5817770e2 commit: 5817770e290b3c66a3fe57850db6dda1c44c6a19 build: 2020-06-01__20:40:26\r\n\r\n### Expected behavior\r\n\r\nwa ld a, 0x63 should write the opcodes 3e63\r\n\r\n### Actual behavior\r\n\r\nwa ld a, 0x63 actually writes 3663\r\n\r\n### Steps to reproduce the behavior \r\nI did r2 -w myfile;\r\ne cfg.bigendian=false; e asm.arch=gb\r\nthen wa ld a, 0x63;\r\nthen r2 still write 3663 that is read as ld [hl], 0x63 by radare2 disassembler;\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\nDrag and drop zip archives containing the Additional info here, don't use external services or link.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0MjAwODEwOA==","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"@condret does this commit https://github.com/radareorg/radare2/commit/c5a2a6562e0cfcb662f8bb1b36726d911c4905bb close the current issue?","createdAt":"2020-06-10T13:26:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16994#issuecomment-642008108","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NTY3NjU2NQ==","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"@condret I made another test with:\r\n\r\n`:> wa ld [0xcfc7], a\r\nCannot assemble 'ld [0xcfc7], a' at line 3`\r\n\r\nIt also failed. I think I can put it here.","createdAt":"2020-06-17T23:22:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16994#issuecomment-645676565","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcwMzAzNjgzMQ==","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"@condret when I do `wa ld hl, [0xc82e]`, the new value of hl is `0000`. This may be related. Do I open a new issue?","createdAt":"2020-10-03T03:01:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16994#issuecomment-703036831","viewerDidAuthor":false}],"number":16994,"title":"radare2 does not assemble right opcodes for instructuction \"ld a, 0x63\" for gameboy"},{"body":"Find the reasons why it fails to detect some of the functions on this firmware and fix the underlying problems:\r\n![image](https://user-images.githubusercontent.com/203261/83379375-f2027980-a40d-11ea-996f-57be9766f861.png)\r\n\r\nSee https://github.com/seemoo-lab/polypyus/issues/3#issuecomment-636381596 for more context.\r\n","comments":[],"number":16987,"title":"Fix functions detection for CYW20735 firmware."},{"body":"As you can here zign function is treated as part of caller function.\r\n```asm\r\nradare2 main.exe\r\n -- Carpe noctum.\r\n[0x140001394]> zo fseek.sdb\r\n[0x140001394]> z/\r\n[+] searching 0x14001c800 - 0x14001d000\r\n[+] searching 0x14001c000 - 0x14001c800\r\n[+] searching 0x14001b000 - 0x14001c000\r\n[+] searching 0x140019c00 - 0x14001b000\r\n[+] searching 0x140019000 - 0x140019c00\r\n[+] searching 0x140018e00 - 0x140019000\r\n[+] searching 0x140010000 - 0x140018e00\r\n[+] searching 0x140001000 - 0x140010000\r\n[+] searching function metrics\r\nhits: 4\r\n[0x140001394]> af @ 0x140003938\r\n[0x140001394]> afl\r\n0x140003938    6 528  -> 116  fcn.140003938\r\n[0x140001394]> pd 2 @ 0x140003938\r\n/ 116: fcn.140003938 (int64_t arg1, int64_t arg2, int64_t arg3);\r\n| bp: 0 (vars 0, args 0)\r\n| sp: 3 (vars 3, args 0)\r\n| rg: 3 (vars 0, args 3)\r\n|       :   0x140003938      4863d2         movsxd rdx, edx            ; arg2\r\n|       `=< 0x14000393b      e9f0fdffff     jmp sign.bytes.sym._common_fseek__YAHV__crt_stdio_stream___JH_Z_0\r\n```\r\n\r\nDrag and drop zip archives containing the Additional info here, don't use external services or link.\r\n[fseek.sdb.zip](https://github.com/radareorg/radare2/files/4707456/fseek.sdb.zip)\r\n[main.exe.zip](https://github.com/radareorg/radare2/files/4707459/main.exe.zip)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDczODU0NzE1OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Is this still an issue @pelijah?","createdAt":"2020-12-04T03:46:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16979#issuecomment-738547159","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc0MzQ0NTg0Mw==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"Well yes, this is still an issue. But now it seems more complicated for me. In the given example the zignature represents a function but, as I understod, in general it can be anything. We can't just create function at offset with zignature even if there is a jump xref to that offset. This issue is one of many issues related to applying of zignatures which partially caused by the lack of zignature info.","createdAt":"2020-12-11T21:52:03Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16979#issuecomment-743445843","viewerDidAuthor":false}],"number":16979,"title":"af should create function at offset with zignature"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| Host OS/arch/bits (mandatory)                             | Archlinux x86_64,\r\nFile format of the file you reverse (mandatory)      | ARM32 (armv7a / EABI5)\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.5.0-git 24904 @ linux-x86-64 git.4.4.0-203-gcb586c8ce commit: cb586c8cedc4ee9918afe4f29067cefdb4a0d3af build: 2020-05-21__21:39:12\r\n\r\n### Expected behavior\r\nAfter running `aaa` or more analysis the visual disassembly shouldn't be showing 'unaligned' instructions.\r\n\r\n### Actual behavior\r\nAfter running a `aaa` or higher analysis the visual disassembly will contain 'unaligned' instructions. This happens if you launch r2 with -A or if you use `aaa` while in the console. I've narrowed it down to the `r_core_cmd0 (core, \"aav\")` in the `cmd_anal_all` function. Oddly enough this only happens if you manually run `aav` in visual mode while seeked to 0x00. If you never enter visual mode `aav` will not cause the unaligned issue.\r\n\r\n### Steps to reproduce the behavior \r\nTest binary: Seems to happen on any of the arm binaries I have but strace is what I have that's redistributable.\r\n[strace-armv7a.zip](https://github.com/radareorg/radare2/files/4669093/strace-armv7a.zip)\r\n\r\nGo into visual mode `V`\r\nSwitch to disassembly `p`\r\nSeek to `s 0x00`\r\nRun `aav`\r\nmain now contains unaligned instructions.\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n![2020-05-22_10-34](https://user-images.githubusercontent.com/434626/82686146-f6af7c80-9c1a-11ea-85a2-e7801c8faa7d.png)\r\n","comments":[],"number":16938,"title":"ARMv7a 'unaligned' instructions in visual mode after aav analysis"},{"body":"cc @swoops\r\n\r\nA follow up of https://github.com/radareorg/radare2/issues/9336 and https://github.com/radareorg/radare2/pull/16836","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY5NTkwMDgwNA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@swoops did the status of this issue changed?","createdAt":"2020-09-21T05:03:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16930#issuecomment-695900804","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NjUwODI0OQ==","author":{"login":"swoops"},"authorAssociation":"COLLABORATOR","body":"So far rasig2 exposes the `zfd` command to dump FLIRT signatures. Nothing else though.","createdAt":"2020-09-22T04:57:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16930#issuecomment-696508249","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg2NDg5NDk0NQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"@swoops it is really worth keep supporting FLIRT in r2? the file format has changed and its not working again, and at the end we can keep exporting r2 signatures from IDA in case interop is needed","createdAt":"2021-06-21T09:46:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16930#issuecomment-864894945","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDg2NTMxMDE2OA==","author":{"login":"swoops"},"authorAssociation":"COLLABORATOR","body":"I would have no objection to doping the code. I don't know anything about the FLIRT code really. I have never used IDA. I would rather spend my time improving r2 signatures then reversing FLIRT file type changes.\r\n\r\nThere is an abundance of FLIRT signatures databases out there. A lot more then r2 signatures. So I think that would be the primary reason for keeping it. Maybe it would be better supported as a plugin?","createdAt":"2021-06-21T20:07:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16930#issuecomment-865310168","viewerDidAuthor":false}],"number":16930,"title":"Expose FLIRT in rasign2"},{"body":"Since we decided to improve our own DWARF parsing code and do not import libdwarf we need to improve its code drastically. Currently it is largely untested and we need more samples for every type of the standard:\r\n- [ ] DWARF1 samples\r\n- [ ] DWARF2 samples\r\n- [ ] DWARF3 samples\r\n- [ ] DWARF4 samples\r\n- [ ] DWARF5 samples","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYzMjI4MTg5Ng==","author":{"login":"HoundThe"},"authorAssociation":"CONTRIBUTOR","body":"Do we wanna test DWARF1? gcc or clang doesn't even have ability to use DWARF 1 ","createdAt":"2020-05-21T18:54:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16846#issuecomment-632281896","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYzMjM3OTY1NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Lower priority, but nice to have. GCC or Clang are not a reverse engineering tools. ","createdAt":"2020-05-21T22:32:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16846#issuecomment-632379654","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYzODA5MDg1Mw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Also supporting DWARF in the PE binaries (mainly produced by MinGW):\r\n\r\nSee sample: https://github.com/NationalSecurityAgency/ghidra/files/3869483/helloworld.zip","createdAt":"2020-06-03T09:53:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16846#issuecomment-638090853","viewerDidAuthor":false}],"number":16846,"title":"Better test coverage of DWARF"},{"body":"*If you would like to report a bug, please fill the template below*\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | any\r\n| File format of the file you reverse (mandatory)      | any\r\n| Architecture/bits of the file (mandatory)            | any\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.5.0-git 24654 @ linux-x86-64 git.4.4.0-187-g95ba22b5c commit: 95ba22b5c288bc16db3df50669653910e09c99b8 build: 2020-05-17__11:52:34\r\n\r\n\r\n### Expected behavior\r\n`af` creates a new function\r\n### Actual behavior\r\nno new function\r\n### Steps to reproduce the behavior \r\n1) `radare2 ls.odd` (`elf/ls.odd` from `radare2-testbins` repo)\r\n2) `af @ sym._obstack_begin`\r\n3)  `af @ sym._obstack_begin_1`\r\n4)  `afl~14e60` is empty\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n```asm\r\n[0x00005310]> afl\r\n0x00014ef0    7 161  -> 158  sym._obstack_begin\r\n0x00014f10    1 21           sym._obstack_begin_1\r\n```\r\n```asm\r\n[0x00005310]> pd 4 @ sym._obstack_begin\r\nâ”Œ 158: sym._obstack_begin (int64_t arg1, int64_t arg2, int64_t arg3, int64_t arg4, int64_t arg5);\r\nâ”‚ bp: 0 (vars 0, args 0)\r\nâ”‚ sp: 0 (vars 0, args 0)\r\nâ”‚ rg: 5 (vars 0, args 5)\r\nâ”‚       â•Ž   0x00014ef0      806750fe       and byte [rdi + 0x50], 0xfe ; [0xfe:1]=0 ; arg1\r\nâ”‚       â•Ž   0x00014ef4      48894f38       mov qword [rdi + 0x38], rcx ; arg4\r\nâ”‚       â•Ž   0x00014ef8      4c894740       mov qword [rdi + 0x40], r8  ; arg5\r\nâ”‚       â””â”€< 0x00014efc      e95fffffff     jmp 0x14e60\r\n```\r\n```asm\r\n[0x00005310]> pd 5 @ sym._obstack_begin_1\r\nâ”Œ 21: sym._obstack_begin_1 (int64_t arg1, int64_t arg4, int64_t arg5, int64_t arg6);\r\nâ”‚ bp: 0 (vars 0, args 0)\r\nâ”‚ sp: 0 (vars 0, args 0)\r\nâ”‚ rg: 4 (vars 0, args 4)\r\nâ”‚       â•Ž   0x00014f10      804f5001       or byte [rdi + 0x50], 1     ; arg1\r\nâ”‚       â•Ž   0x00014f14      48894f38       mov qword [rdi + 0x38], rcx ; arg4\r\nâ”‚       â•Ž   0x00014f18      4c894740       mov qword [rdi + 0x40], r8  ; arg5\r\nâ”‚       â•Ž   0x00014f1c      4c894f48       mov qword [rdi + 0x48], r9  ; arg6\r\nâ””       â””â”€< 0x00014f20      e93bffffff     jmp 0x14e60                 ; sym._obstack_begin-0x90\r\n```\r\n```asm\r\n[0x00005310]> e anal.verbose=1\r\n[0x00005310]> af @ sym._obstack_begin\r\nOverlapped at 0x00014ef0\r\nr_anal_fcn_bb() fails at 0x14e60.\r\nRET 0x00014ecc. overlap=false 54 161\r\nOverlapped at 0x00014e73\r\nr_anal_fcn_bb() fails at 0x14edd.\r\nr_anal_fcn_bb() fails at 0x14e97.\r\nFailed to analyze basic block at 0x14ef0\r\n[0x00005310]> af @ sym._obstack_begin_1\r\nr_anal_fcn_bb() fails at 0x14e60.\r\nFailed to analyze basic block at 0x14f10\r\n```\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYyOTc3NTQ1Ng==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"If you change the order, `af` doesn't even create `sym._obstack_begin` function. Related to #16833.\r\n```asm\r\n[0x00005310]> e anal.verbose=1\r\n[0x00005310]> af @ sym._obstack_begin_1\r\nr_anal_fcn_bb() fails at 0x14e60.\r\nRET 0x00014ecc. overlap=false 54 197\r\nOverlapped at 0x00014e73\r\nr_anal_fcn_bb() fails at 0x14edd.\r\nr_anal_fcn_bb() fails at 0x14e97.\r\nFailed to analyze basic block at 0x14f10\r\n[0x00005310]> af @ sym._obstack_begin\r\nMessage: Invalid address for function 0x00014ef0\r\n[0x00005310]> afl\r\n0x00014f10    7 197  -> 179  sym._obstack_begin_1\r\n```","createdAt":"2020-05-17T10:28:21Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16842#issuecomment-629775456","viewerDidAuthor":false}],"number":16842,"title":"`af` doesn't create a new function at the address which is reached by jump from two or more functions"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Microsoft Windows 10 Home Version 10.0.18363 Build 18363\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86_64 etc.\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.5.0-git 24612 @ windows-x86-64 git.4.4.0-155-g0b231619a commit: 0b231619abedfec08f3bfb86fea259536877ab9a build: Sun 05/10/2020__15:15:45.34\r\n\r\n### Expected behavior\r\nI am expecting `r2` on Windows to resolve the same symbols  as it does on Linux. The following result is obtained on a Ubuntu 18.04 LTS x86_64 machine\r\n```\r\n$ r2 -d gdb://localhost:4444\r\n= attach 4228 1\r\n= attach 4228 0\r\n -- Your mouse has moved. Radare2 NT must be restarted for the change to take effect. Reboot now? [ OK ]\r\n[0x7ffff7dd6090]> dcu main\r\nContinue until 0x555555557e90 using 1 bpsize\r\nhit breakpoint at: 555555557e90\r\n[0x555555557e90]> is\r\n[Symbols]\r\nnth paddr       vaddr          bind   type   size lib name\r\nâ€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•\r\n119  ---------- 0x00220280     GLOBAL OBJ    8        __progname\r\n120  0x000201e0 0x5555557741e0 GLOBAL OBJ    4        ls_mode\r\n121  0x0001636c 0x55555556a36c GLOBAL FUNC   0        _fini\r\n122  ---------- 0x00220290     GLOBAL OBJ    4        optind\r\n123  0x00003758 0x555555557758 GLOBAL FUNC   0        _init\r\n124  ---------- 0x002202a8     WEAK   OBJ    8        program_invocation_name\r\n125  ---------- 0x00220268     GLOBAL NOTYPE 0        __bss_start\r\n----------------------------------snipped-------------------------------------\r\n[0x555555557e90]>  fs\r\n    0 * classes\r\n  118 * imports\r\n   20 * regs\r\n  124 * relocs\r\n   28 * sections\r\n   10 * segments\r\n  420 * strings\r\n   34 * symbols\r\n[0x555555557e90]>  \r\n```\r\n\r\n### Actual behavior\r\nWhen performing the same commands, `r2` on Windows fails because most of the symbols are missing.\r\n```\r\nC:\\Users\\abcSup>radare2 -d gdb://192.168.112.137:4444\r\n= attach 4259 0\r\n -- Hello Mr. Anderson\r\n[0x7ffff7dd6090]> is\r\n\r\n[0x7ffff7dd6090]> dcu main\r\nCannot continue until unknown address 'main'\r\n[0x7ffff7dd6090]> db main\r\n[0x7ffff7dd6090]> fs\r\n   20 * regs\r\n[0x7ffff7dd6090]>  \r\n```\r\n\r\n### Steps to reproduce the behavior \r\n\r\n1. Start a gdbserver on a remote Linux (Ubuntu 18.04 LTS)\r\n`$ gdbserver host:4444 /bin/ls`\r\n2. Connect to the gdbserver on a Windows machine (Microsoft Windows 10 Home)\r\n`C:\\Users\\abcSup>radare2 -d gdb://192.168.112.137:4444`\r\n3. Perform most commands that require analyzed symbols such as:\r\n`dcu main`, `is`, `db main`, `f`\r\n4. They fail to work\r\n","comments":[],"number":16810,"title":"Missing symbols when debugging a remote gdb on Windows"},{"body":"Sometimes, figuring where coredump was put, and if is enabled is tricky. Radare2 can help to handle this automatically, see e.g. https://stackoverflow.com/questions/2065912/core-dumped-but-core-file-is-not-in-the-current-directory\r\n\r\n- [ ] Linux\r\n- [ ] MacOS\r\n- [ ] *BSD\r\n- [ ] Windows\r\n\r\nSee also https://www.freedesktop.org/software/systemd/man/coredumpctl.html\r\n\r\n```sh\r\ncoredumpctl list\r\ncoredumpctl debug 234234\r\n```\r\n> `--debugger=DEBUGGER`\r\n>\r\n>  Use the given debugger for the debug command. If not given and `$SYSTEMD_DEBUGGER` is unset, then `gdb` will be used. ","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYyNzIzODEzNA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See also https://github.com/radareorg/radare2/commit/0d78c577a3c66ff493073d321a35b3c8b6782f86","createdAt":"2020-05-12T09:54:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16806#issuecomment-627238134","viewerDidAuthor":false}],"number":16806,"title":"Support loading coredumps from the standard locations"},{"body":"# This template is meant for bug reports, if you have a feature request, please be as descriptive as possible and delete the template\r\n\r\nMake sure you are testing using the latest git version of radare2 before submitting any issue.\r\n\r\n*If you would like to report a bug, please fill the template below*\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Archlinux x86_64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86_64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.5.0-git 24474 @ linux-x86-64 git.4.3.1-474-g242f1efdf\r\ncommit: 242f1efdfaf2bec7f643e6ef424959ad4621c572 build: 2020-05-09__14:19:21\r\n\r\n\r\n### Expected behavior\r\nWe can select with the mouse (`~...`)\r\n### Actual behavior\r\nthe `~...` selector insert weird char when we want to select a line.\r\n\r\n### Steps to reproduce the behavior \r\n```\r\nbash$ r2 /usr/bin/ls\r\n> aa\r\n> afl~...\r\n```\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\n![2020-05-09-142349_440x118_scrot](https://user-images.githubusercontent.com/32521367/81473719-b60a3900-9200-11ea-8986-299104323653.png)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYzNjkxNjg5Ng==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I'm not sure I understand what is the problem, sorry. What does it mean exactly that \"you can't select with a mouse\"?","createdAt":"2020-06-01T15:15:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16790#issuecomment-636916896","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYzNjkxODA5OQ==","author":{"login":""},"authorAssociation":"NONE","body":"If you use the left click of your mouse, there is some garbage values.","createdAt":"2020-06-01T15:18:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16790#issuecomment-636918099","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYzNjkxOTE4Nw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Oh, ok, got it now! Thanks","createdAt":"2020-06-01T15:20:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16790#issuecomment-636919187","viewerDidAuthor":false}],"number":16790,"title":"With `~...` selection you can't select with a mouse"},{"body":"**EDIT**: Please see https://github.com/radareorg/radare2/issues/16785#issuecomment-625773483\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 19.10 x64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.5.0-git 24779 @ linux-x86-64 git.4.4.0-141-gbeb2f2dd9 commit: beb2f2dd948543c0ed82d5d08d5e3fcc5cbec6da build: 2020-05-07__18:04:26\r\n\r\n### Expected behavior\r\nCreating a dataflow graph with aeg and exporting into gml results in a valid graph that can be consumed later and containing all necessary information.\r\n\r\n### Actual behavior\r\nExporting to gml is broken. Probably also to other formats. I assume the internal representation is just not well defined for those graphs.\r\nLabels do not contain the contents of blocks in the graph (as can be explored with aggv).\r\nid's and label's included are also confusing.\r\nedges do not link correct nodes. They even link non-existing ones.\r\n\r\nTrying to consume it with a third party (I am trying with python's networkx) fails to parse because of unmatched nodes in the edge's description. Even if it were consumed by change, all the body information is missing and the edges are linking probably incorrect nodes anyway.\r\n\r\n### Steps to reproduce the behavior\r\nI am using the same code used by @condret on past r2con2019 talk to generate the dataflow graph. You can generate it with:\r\n```\r\n.aeg 1024,4,esp,-,=[4],4,esp,-=,0xc,esp,+,[4],4,esp,-,=[4],4,esp,-=,0xc,esp,+,[4],4,esp,-,=[4],4,esp,-=,al,eax,+=[1],7,$o,of,:=,7,$s,sf,:=,$z,zf,:=,7,$c,cf,:=,$p,pf,:=\r\n``` \r\n\r\nI thought it could be the general creation of gml output, but I tried generating random graphs (call graphs, for example) for sample binaries like /bin/ls, which are in fact way bigger, and it exports with no problem and is parsed well.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYyNTQ2NzY3Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Use yfiles to load those graphMl files. There are several standards. Just to confirm\n\n> On 7 May 2020, at 18:22, Arnau <notifications@github.com> wrote:\n> \n> ï»¿\n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tUbuntu 19.10 x64\n> r2 -v full output, not truncated (mandatory)\tradare2 4.5.0-git 24779 @ linux-x86-64 git.4.4.0-141-gbeb2f2dd9 commit: beb2f2d build: 2020-05-07__18:04:26\n> Expected behavior\n> \n> Creating a dataflow graph with aeg and exporting into gml results in a valid graph that can be consumed later and containing all necessary information.\n> \n> Actual behavior\n> \n> Exporting to gml is broken. Probably also to other formats. I assume the internal representation is just not well defined for those graphs.\n> Labels do not contain the contents of blocks in the graph (as can be explored with aggv).\n> id's and label's included are also confusing.\n> edges do not link correct nodes. They even link non-existing ones.\n> \n> Trying to consume it with a third party (I am trying with python's networkx) fails to parse because of unmatched nodes in the edge's description. Even if it were consumed by change, all the body information is missing and the edges are linking probably incorrect nodes anyway.\n> \n> Steps to reproduce the behavior\n> \n> I am using the same code used by @condret on past r2con2019 talk to generate the dataflow graph. You can generate it with:\n> \n> .aeg rbp,8,rsp,-,=[8],8,rsp,-=,rsp,rbp,=,edi,0x4,rbp,-,=[4],esi,0x8,rbp,-,=[4],edx,0xc,rbp,-,=[4],0x4,rbp,-,[4],rdx,=,0x8,rbp,-,[4],rax,=,edx,eax,+=,31,$o,of,:=,31,$s,sf,:=,$z,zf,:=,31,$c,cf,:=,$p,pf,:=,0xc,rbp,-,[4],eax,*=,rsp,[8],rbp,=,8,rsp,+=,rsp,[8],rip,=,8,rsp,+=\n> I thought it could be the general creation of gml output, but I tried generating random graphs (call graphs, for example) for sample binaries like /bin/ls, which are in fact way bigger, and it exports with no problem and is parsed well.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-05-07T20:02:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16785#issuecomment-625467672","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyNTc3MzQ4Mw==","author":{"login":"arnaugamez"},"authorAssociation":"CONTRIBUTOR","body":"Yes it's broken. It even does not include the information of graphs. I paste here an ultrasimple example to illustrate it.\r\n\r\nGenerate the graph with this ESIL expression:\r\n`.aeg ebx,eax,+=,ecx,eax,*=`\r\n\r\nIf you visualize it with `aggv` for example you get this:\r\n![image](https://user-images.githubusercontent.com/5301529/81401631-06659600-9130-11ea-8e74-a446be347160.png)\r\n\r\nNow just use `aggg` to see the GML output\r\n```\r\n:> aggg\r\ngraph\r\n[\r\nhierarchic 1\r\nlabel \"\"\r\ndirected 1\r\n  node [\r\n    id  3\r\n    label  \"4\"\r\n  ]\r\n  node [\r\n    id  5\r\n    label  \"7\"\r\n  ]\r\n  node [\r\n    id  4\r\n    label  \"6\"\r\n  ]\r\n  node [\r\n    id  1\r\n    label  \"1\"\r\n  ]\r\n  node [\r\n    id  7\r\n    label  \"10\"\r\n  ]\r\n  node [\r\n    id  11\r\n    label  \"\"\r\n  ]\r\n  node [\r\n    id  0\r\n    label  \"0\"\r\n  ]\r\n  node [\r\n    id  2\r\n    label  \"3\"\r\n  ]\r\n  node [\r\n    id  8\r\n    label  \"12\"\r\n  ]\r\n  node [\r\n    id  9\r\n    label  \"13\"\r\n  ]\r\n  node [\r\n    id  6\r\n    label  \"9\"\r\n  ]\r\n  edge [\r\n    source  3\r\n    target  4\r\n  ]\r\n  edge [\r\n    source  5\r\n    target  8\r\n  ]\r\n  edge [\r\n    source  4\r\n    target  5\r\n  ]\r\n  edge [\r\n    source  1\r\n    target  4\r\n  ]\r\n  edge [\r\n    source  7\r\n    target  10\r\n  ]\r\n  edge [\r\n    source  11\r\n    target  8\r\n  ]\r\n  edge [\r\n    source  0\r\n    target  1\r\n  ]\r\n  edge [\r\n    source  2\r\n    target  3\r\n  ]\r\n  edge [\r\n    source  8\r\n    target  9\r\n  ]\r\n  edge [\r\n    source  6\r\n    target  7\r\n  ]\r\n]\r\n```\r\n\r\nCheck for example the following edge:\r\n```\r\nedge [\r\n    source  7\r\n    target  10\r\n  ]\r\n```\r\nIt targets node 10, but there is no node with id 10, so it will break whatever tool you use to import that GML file (including networkx, but not only).\r\n\r\nI think it might be confusing nodes and labels.\r\n\r\nAlso please note that the interesting information inside the nodes is not included at all in that GML, so even if the nodes/edges relations were not broke, the interesting information is missing.","createdAt":"2020-05-08T11:34:24Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16785#issuecomment-625773483","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyNzQ3MTEwOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@ret2libc can you fix this issue ?\n\n> On 8 May 2020, at 13:34, Arnau <notifications@github.com> wrote:\n> \n> ï»¿\n> Yes it's broken. It even does not include the informatino of graphs. I paste here a ultrasimple example.\n> \n> Generate the graph with this ESIL expression:\n> .aeg edi, esi, +, eax, =, edx, eax, *=\n> \n> If you visualize it with aggv for example you get this:\n> \n> \n> Now just use aggg to see the GML output\n> \n> :> aggg\n> graph\n> [\n> hierarchic 1\n> label \"\"\n> directed 1\n>   node [\n>     id  3\n>     label  \"4\"\n>   ]\n>   node [\n>     id  5\n>     label  \"7\"\n>   ]\n>   node [\n>     id  4\n>     label  \"6\"\n>   ]\n>   node [\n>     id  1\n>     label  \"1\"\n>   ]\n>   node [\n>     id  7\n>     label  \"10\"\n>   ]\n>   node [\n>     id  11\n>     label  \"\"\n>   ]\n>   node [\n>     id  0\n>     label  \"0\"\n>   ]\n>   node [\n>     id  2\n>     label  \"3\"\n>   ]\n>   node [\n>     id  8\n>     label  \"12\"\n>   ]\n>   node [\n>     id  9\n>     label  \"13\"\n>   ]\n>   node [\n>     id  6\n>     label  \"9\"\n>   ]\n>   edge [\n>     source  3\n>     target  4\n>   ]\n>   edge [\n>     source  5\n>     target  8\n>   ]\n>   edge [\n>     source  4\n>     target  5\n>   ]\n>   edge [\n>     source  1\n>     target  4\n>   ]\n>   edge [\n>     source  7\n>     target  10\n>   ]\n>   edge [\n>     source  11\n>     target  8\n>   ]\n>   edge [\n>     source  0\n>     target  1\n>   ]\n>   edge [\n>     source  2\n>     target  3\n>   ]\n>   edge [\n>     source  8\n>     target  9\n>   ]\n>   edge [\n>     source  6\n>     target  7\n>   ]\n> ]\n> Check for example the following edge:\n> \n> edge [\n>     source  7\n>     target  10\n>   ]\n> It targets node 10, but there is no node with id 10, so it will break whatever tool you use to import that GML file (including networkx, but not only).\n> \n> I think it might be confusing nodes and labels.\n> \n> Also please note that the interesting information inside the nodes is not included at all in that GML, so even if the nodes/edges relations were not broke, the interesting information is missing.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-05-12T17:03:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16785#issuecomment-627471108","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0MTQ4MTcyNQ==","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"had the same issue with dot-files, which is why I didn't use them in my talk","createdAt":"2020-06-09T18:05:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16785#issuecomment-641481725","viewerDidAuthor":false}],"number":16785,"title":"GML graph export from ESIL dataflow graphs (aeg) is broken"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 18.04 64bit (WSL)\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | rradare2 4.5.0-git 24831 @ linux-x86-64 git.4.4.0-115-g153de5617 commit: 153de561732f52e3910fcdac07aa9ef0a40db213 build: 2020-05-03__12:04:10\r\n\r\n\r\n### Expected behavior\r\nr2 doesn't leak memory\r\n\r\n### Actual behavior\r\nr2 leaks \r\n\r\n### Steps to reproduce the behavior \r\n- start radare2: `r2 /bin/ls`\r\n- go to Visual panels mode: `V!`\r\n- add new tab: `t` and then again `t`\r\n- quit from r2: `q`x3,\r\n\r\n> SUMMARY: AddressSanitizer: 344905 byte(s) leaked in 5692 allocation(s).\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n    https://gist.github.com/pawlos/5924100db827d3499a46a4967b0ca36d","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYyMzA2OTk0NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Can you paste the output of asan?\n\n> On 3 May 2020, at 09:30, PaweÅ‚ Åukasik <notifications@github.com> wrote:\n> \n> ï»¿\n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tUbuntu 18.04 64bit (WSL)\n> File format of the file you reverse (mandatory)\tELF\n> Architecture/bits of the file (mandatory)\tx86/64\n> r2 -v full output, not truncated (mandatory)\tradare2 4.0.0 24826 @ linux-x86-64 git.4.0.0 commit: e970472 build: 2020-05-03__08:32:53\n> Expected behavior\n> \n> r2 exits V! mode without issue\n> \n> Actual behavior\n> \n> r2 crashes\n> \n> Steps to reproduce the behavior\n> \n> start radare2: r2 /bin/ls\n> go to Visual panels mode: V!\n> add new tab: t and then again t\n> quit visual panels mode: q\n> free(): invalid size\n> Aborted (core dumped)\n> \n> Additional Logs, screenshots, source-code, configuration dump, ...\n> \n> #0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51 \n> #1  0x00007f7bb866a801 in __GI_abort () at abort.c:79\n> #2  0x00007f7bb86b3897 in __libc_message (action=action@entry=do_abort, fmt=fmt@entry=0x7f7bb87e0b9a \"%s\\n\") at ../sysdeps/posix/libc_fatal.c:181\n> #3  0x00007f7bb86ba90a in malloc_printerr (str=str@entry=0x7f7bb87deda0 \"free(): invalid size\") at malloc.c:5350\n> #4  0x00007f7bb86c1e2c in _int_free (have_lock=0, p=0x55972f02e090, av=0x7f7bb8a15c40 <main_arena>) at malloc.c:4161\n> #5  __GI___libc_free (mem=0x55972f02e0a0) at malloc.c:3124\n> #6  0x00007f7bb67711a0 in __free_menu_item (item=0x55972f02fe00) at panels.c:4973\n> #7  0x00007f7bb6772e4d in __mht_free_kv (kv=0x55972f030488) at panels.c:5409\n> #8  0x00007f7bb8d4e70b in ht_pp_free (ht=0x55972efafbb0) at ht_inc.c:140\n> #9  0x00007f7bb6774cb0 in __panels_free (panels_root=0x55972efae030, i=0, panels=0x55972efae350) at panels.c:5974\n> #10 0x00007f7bb67766ba in __del_panels (core=0x7f7bb8c470c0 <r>) at panels.c:6491\n> #11 0x00007f7bb67764d0 in r_core_visual_panels_root (core=0x7f7bb8c470c0 <r>, panels_root=0x55972efae030) at panels.c:6444\n> #12 0x00007f7bb66e44d5 in r_core_visual_cmd (core=0x7f7bb8c470c0 <r>, arg=0x55972efadfa1 \"!\") at visual.c:2569\n> #13 0x00007f7bb66ea2e7 in r_core_visual (core=0x7f7bb8c470c0 <r>, input=0x55972efadfa1 \"!\") at visual.c:4201\n> #14 0x00007f7bb66be459 in cmd_visual (data=0x7f7bb8c470c0 <r>, input=0x55972efadfa1 \"!\") at cmd.c:1747\n> #15 0x00007f7bb6719bc7 in r_cmd_call (cmd=0x55972ed646b0, input=0x55972efadfa0 \"V!\") at cmd_api.c:244\n> #16 0x00007f7bb66c3c58 in r_core_cmd_subst_i (core=0x7f7bb8c470c0 <r>, cmd=0x55972efadfa0 \"V!\", colon=0x0, tmpseek=0x7ffcfeae94fa) at cmd.c:3589\n> #17 0x00007f7bb66bffdc in r_core_cmd_subst (core=0x7f7bb8c470c0 <r>, cmd=0x55972efadfa0 \"V!\") at cmd.c:2467\n> #18 0x00007f7bb66c6a6b in r_core_cmd (core=0x7f7bb8c470c0 <r>, cstr=0x55972efadf60 \"V!\", log=1) at cmd.c:4424\n> #19 0x00007f7bb6611a38 in r_core_prompt_exec (r=0x7f7bb8c470c0 <r>) at core.c:3102\n> #20 0x00007f7bb8a39437 in r_main_radare2 (argc=2, argv=0x7ffcfeae99e8) at radare2.c:1463\n> #21 0x000055972d8d3c60 in main (argc=2, argv=0x7ffcfeae99e8) at radare2.c:95\n> #22 0x00007f7bb864bb97 in __libc_start_main (main=0x55972d8d3c0c <main>, argc=2, argv=0x7ffcfeae99e8, init=<optimized out>, fini=<optimized out>, rtld_fini=<optimized out>, stack_end=0x7ffcfeae99d8) at ../csu/libc-start.c:310\n> #23 0x000055972d8d393a in _start ()\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-05-03T07:45:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16757#issuecomment-623069944","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyMzA3MzM5OQ==","author":{"login":"pawlos"},"authorAssociation":"CONTRIBUTOR","body":"=================================================================\r\n==3434==ERROR: AddressSanitizer: heap-use-after-free on address 0x60400038e598 at pc 0x7f5115dd5501 bp 0x7ffd9e74e030 sp 0x7ffd9e74e020\r\nREAD of size 8 at 0x60400038e598 thread T0\r\n    #0 0x7f5115dd5500 in __free_menu_item /home/ubuntu/radare2/libr/core/panels.c:4972\r\n    #1 0x7f5115ddb305 in __mht_free_kv /home/ubuntu/radare2/libr/core/panels.c:5409\r\n    #2 0x7f511d4ffc79 in ht_pp_free /home/ubuntu/radare2/shlr/sdb/src/ht_inc.c:140\r\n    #3 0x7f5115de2ed9 in __panels_free /home/ubuntu/radare2/libr/core/panels.c:5974\r\n    #4 0x7f5115de9c18 in __del_panels /home/ubuntu/radare2/libr/core/panels.c:6491\r\n    #5 0x7f5115de947c in r_core_visual_panels_root /home/ubuntu/radare2/libr/core/panels.c:6444\r\n    #6 0x7f5115bd7353 in r_core_visual_cmd /home/ubuntu/radare2/libr/core/visual.c:2569\r\n    #7 0x7f5115bed2bd in r_core_visual /home/ubuntu/radare2/libr/core/visual.c:4201\r\n    #8 0x7f5115b5ca16 in cmd_visual /home/ubuntu/radare2/libr/core/cmd.c:1747\r\n    #9 0x7f5115c8e5da in r_cmd_call /home/ubuntu/radare2/libr/core/cmd_api.c:244\r\n    #10 0x7f5115b6db47 in r_core_cmd_subst_i /home/ubuntu/radare2/libr/core/cmd.c:3589\r\n    #11 0x7f5115b61f5b in r_core_cmd_subst /home/ubuntu/radare2/libr/core/cmd.c:2467\r\n    #12 0x7f5115b7700c in r_core_cmd /home/ubuntu/radare2/libr/core/cmd.c:4424\r\n    #13 0x7f511594966a in r_core_prompt_exec /home/ubuntu/radare2/libr/core/core.c:3102\r\n    #14 0x7f511ce1afa9 in r_main_radare2 /home/ubuntu/radare2/libr/main/radare2.c:1463\r\n    #15 0x55f6ad02d782 in main /home/ubuntu/radare2/binr/radare2/radare2.c:95\r\n    #16 0x7f511bcafb96 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x21b96)\r\n    #17 0x55f6ad02d2c9 in _start (/home/ubuntu/radare2/binr/radare2/radare2+0x12c9)\r\n\r\n0x60400038e598 is located 8 bytes inside of 40-byte region [0x60400038e590,0x60400038e5b8)\r\nfreed by thread T0 here:\r\n    #0 0x7f511dc557a8 in __interceptor_free (/usr/lib/x86_64-linux-gnu/libasan.so.4+0xde7a8)\r\n    #1 0x7f5115dd5852 in __free_menu_item /home/ubuntu/radare2/libr/core/panels.c:4980\r\n    #2 0x7f5115dd5763 in __free_menu_item /home/ubuntu/radare2/libr/core/panels.c:4977\r\n    #3 0x7f5115ddb305 in __mht_free_kv /home/ubuntu/radare2/libr/core/panels.c:5409\r\n    #4 0x7f511d4ffc79 in ht_pp_free /home/ubuntu/radare2/shlr/sdb/src/ht_inc.c:140\r\n    #5 0x7f5115de2ed9 in __panels_free /home/ubuntu/radare2/libr/core/panels.c:5974\r\n    #6 0x7f5115de9c18 in __del_panels /home/ubuntu/radare2/libr/core/panels.c:6491\r\n    #7 0x7f5115de947c in r_core_visual_panels_root /home/ubuntu/radare2/libr/core/panels.c:6444\r\n    #8 0x7f5115bd7353 in r_core_visual_cmd /home/ubuntu/radare2/libr/core/visual.c:2569\r\n    #9 0x7f5115bed2bd in r_core_visual /home/ubuntu/radare2/libr/core/visual.c:4201\r\n    #10 0x7f5115b5ca16 in cmd_visual /home/ubuntu/radare2/libr/core/cmd.c:1747\r\n    #11 0x7f5115c8e5da in r_cmd_call /home/ubuntu/radare2/libr/core/cmd_api.c:244\r\n    #12 0x7f5115b6db47 in r_core_cmd_subst_i /home/ubuntu/radare2/libr/core/cmd.c:3589\r\n    #13 0x7f5115b61f5b in r_core_cmd_subst /home/ubuntu/radare2/libr/core/cmd.c:2467\r\n    #14 0x7f5115b7700c in r_core_cmd /home/ubuntu/radare2/libr/core/cmd.c:4424\r\n    #15 0x7f511594966a in r_core_prompt_exec /home/ubuntu/radare2/libr/core/core.c:3102\r\n    #16 0x7f511ce1afa9 in r_main_radare2 /home/ubuntu/radare2/libr/main/radare2.c:1463\r\n    #17 0x55f6ad02d782 in main /home/ubuntu/radare2/binr/radare2/radare2.c:95\r\n    #18 0x7f511bcafb96 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x21b96)\r\n\r\npreviously allocated by thread T0 here:\r\n    #0 0x7f511dc55d28 in __interceptor_calloc (/usr/lib/x86_64-linux-gnu/libasan.so.4+0xded28)\r\n    #1 0x7f5115dca8aa in __add_menu /home/ubuntu/radare2/libr/core/panels.c:4402\r\n    #2 0x7f5115dcd62a in __init_menu_screen_settings_layout /home/ubuntu/radare2/libr/core/panels.c:4604\r\n    #3 0x7f5115dd3bf0 in __init_panels_menu /home/ubuntu/radare2/libr/core/panels.c:4849\r\n    #4 0x7f5115de97f2 in __init_new_panels_root /home/ubuntu/radare2/libr/core/panels.c:6466\r\n    #5 0x7f5115de8cbf in r_core_visual_panels_root /home/ubuntu/radare2/libr/core/panels.c:6411\r\n    #6 0x7f5115bd7353 in r_core_visual_cmd /home/ubuntu/radare2/libr/core/visual.c:2569\r\n    #7 0x7f5115bed2bd in r_core_visual /home/ubuntu/radare2/libr/core/visual.c:4201\r\n    #8 0x7f5115b5ca16 in cmd_visual /home/ubuntu/radare2/libr/core/cmd.c:1747\r\n    #9 0x7f5115c8e5da in r_cmd_call /home/ubuntu/radare2/libr/core/cmd_api.c:244\r\n    #10 0x7f5115b6db47 in r_core_cmd_subst_i /home/ubuntu/radare2/libr/core/cmd.c:3589\r\n    #11 0x7f5115b61f5b in r_core_cmd_subst /home/ubuntu/radare2/libr/core/cmd.c:2467\r\n    #12 0x7f5115b7700c in r_core_cmd /home/ubuntu/radare2/libr/core/cmd.c:4424\r\n    #13 0x7f511594966a in r_core_prompt_exec /home/ubuntu/radare2/libr/core/core.c:3102\r\n    #14 0x7f511ce1afa9 in r_main_radare2 /home/ubuntu/radare2/libr/main/radare2.c:1463\r\n    #15 0x55f6ad02d782 in main /home/ubuntu/radare2/binr/radare2/radare2.c:95\r\n    #16 0x7f511bcafb96 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x21b96)\r\n\r\nSUMMARY: AddressSanitizer: heap-use-after-free /home/ubuntu/radare2/libr/core/panels.c:4972 in __free_menu_item\r\nShadow bytes around the buggy address:\r\n  0x0c0880069c60: fa fa 00 00 00 00 00 fa fa fa 00 00 00 00 05 fa\r\n  0x0c0880069c70: fa fa 00 00 00 00 00 fa fa fa 00 00 00 00 00 00\r\n  0x0c0880069c80: fa fa 00 00 00 00 00 fa fa fa 00 00 00 00 00 fa\r\n  0x0c0880069c90: fa fa 00 00 00 00 05 fa fa fa 00 00 00 00 00 fa\r\n  0x0c0880069ca0: fa fa fd fd fd fd fd fa fa fa 00 00 00 00 02 fa\r\n=>0x0c0880069cb0: fa fa fd[fd]fd fd fd fa fa fa fd fd fd fd fd fd\r\n  0x0c0880069cc0: fa fa fd fd fd fd fd fa fa fa 00 00 00 00 00 00\r\n  0x0c0880069cd0: fa fa fd fd fd fd fd fa fa fa 00 00 00 00 00 00\r\n  0x0c0880069ce0: fa fa 00 00 00 00 06 fa fa fa fd fd fd fd fd fa\r\n  0x0c0880069cf0: fa fa fd fd fd fd fd fa fa fa 00 00 00 00 00 fa\r\n  0x0c0880069d00: fa fa 00 00 00 00 00 fa fa fa fd fd fd fd fd fa\r\nShadow byte legend (one shadow byte represents 8 application bytes):\r\n  Addressable:           00\r\n  Partially addressable: 01 02 03 04 05 06 07 \r\n  Heap left redzone:       fa\r\n  Freed heap region:       fd\r\n  Stack left redzone:      f1\r\n  Stack mid redzone:       f2\r\n  Stack right redzone:     f3\r\n  Stack after return:      f5\r\n  Stack use after scope:   f8\r\n  Global redzone:          f9\r\n  Global init order:       f6\r\n  Poisoned by user:        f7\r\n  Container overflow:      fc\r\n  Array cookie:            ac\r\n  Intra object redzone:    bb\r\n  ASan internal:           fe\r\n  Left alloca redzone:     ca\r\n  Right alloca redzone:    cb\r\n==3434==ABORTING\r\n","createdAt":"2020-05-03T08:19:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16757#issuecomment-623073399","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyMzA4MjkxNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"uhm are you using r2 4.0? because the lines of the errors dont match what i have in master\n\n> On 3 May 2020, at 09:45, Pancake Nopcode <pancake@nopcode.org> wrote:\n> \n> Can you paste the output of asan?\n> \n>> On 3 May 2020, at 09:30, PaweÅ‚ Åukasik <notifications@github.com> wrote:\n>> \n>> ï»¿\n>> \n>> Work environment\n>> \n>> Questions\tAnswers\n>> OS/arch/bits (mandatory)\tUbuntu 18.04 64bit (WSL)\n>> File format of the file you reverse (mandatory)\tELF\n>> Architecture/bits of the file (mandatory)\tx86/64\n>> r2 -v full output, not truncated (mandatory)\tradare2 4.0.0 24826 @ linux-x86-64 git.4.0.0 commit: e970472 <https://github.com/radareorg/radare2/commit/e97047299af43e9b4e658c246816a2b48bdc087e> build: 2020-05-03__08:32:53\n>> Expected behavior\n>> \n>> r2 exits V! mode without issue\n>> \n>> Actual behavior\n>> \n>> r2 crashes\n>> \n>> Steps to reproduce the behavior\n>> \n>> start radare2: r2 /bin/ls\n>> go to Visual panels mode: V!\n>> add new tab: t and then again t\n>> quit visual panels mode: q\n>> free(): invalid size\n>> Aborted (core dumped)\n>> \n>> Additional Logs, screenshots, source-code, configuration dump, ...\n>> \n>> #0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51 \n>> #1  0x00007f7bb866a801 in __GI_abort () at abort.c:79\n>> #2  0x00007f7bb86b3897 in __libc_message (action=action@entry=do_abort, fmt=fmt@entry=0x7f7bb87e0b9a \"%s\\n\") at ../sysdeps/posix/libc_fatal.c:181\n>> #3  0x00007f7bb86ba90a in malloc_printerr (str=str@entry=0x7f7bb87deda0 \"free(): invalid size\") at malloc.c:5350\n>> #4  0x00007f7bb86c1e2c in _int_free (have_lock=0, p=0x55972f02e090, av=0x7f7bb8a15c40 <main_arena>) at malloc.c:4161\n>> #5  __GI___libc_free (mem=0x55972f02e0a0) at malloc.c:3124\n>> #6  0x00007f7bb67711a0 in __free_menu_item (item=0x55972f02fe00) at panels.c:4973\n>> #7  0x00007f7bb6772e4d in __mht_free_kv (kv=0x55972f030488) at panels.c:5409\n>> #8  0x00007f7bb8d4e70b in ht_pp_free (ht=0x55972efafbb0) at ht_inc.c:140\n>> #9  0x00007f7bb6774cb0 in __panels_free (panels_root=0x55972efae030, i=0, panels=0x55972efae350) at panels.c:5974\n>> #10 0x00007f7bb67766ba in __del_panels (core=0x7f7bb8c470c0 <r>) at panels.c:6491\n>> #11 0x00007f7bb67764d0 in r_core_visual_panels_root (core=0x7f7bb8c470c0 <r>, panels_root=0x55972efae030) at panels.c:6444\n>> #12 0x00007f7bb66e44d5 in r_core_visual_cmd (core=0x7f7bb8c470c0 <r>, arg=0x55972efadfa1 \"!\") at visual.c:2569\n>> #13 0x00007f7bb66ea2e7 in r_core_visual (core=0x7f7bb8c470c0 <r>, input=0x55972efadfa1 \"!\") at visual.c:4201\n>> #14 0x00007f7bb66be459 in cmd_visual (data=0x7f7bb8c470c0 <r>, input=0x55972efadfa1 \"!\") at cmd.c:1747\n>> #15 0x00007f7bb6719bc7 in r_cmd_call (cmd=0x55972ed646b0, input=0x55972efadfa0 \"V!\") at cmd_api.c:244\n>> #16 0x00007f7bb66c3c58 in r_core_cmd_subst_i (core=0x7f7bb8c470c0 <r>, cmd=0x55972efadfa0 \"V!\", colon=0x0, tmpseek=0x7ffcfeae94fa) at cmd.c:3589\n>> #17 0x00007f7bb66bffdc in r_core_cmd_subst (core=0x7f7bb8c470c0 <r>, cmd=0x55972efadfa0 \"V!\") at cmd.c:2467\n>> #18 0x00007f7bb66c6a6b in r_core_cmd (core=0x7f7bb8c470c0 <r>, cstr=0x55972efadf60 \"V!\", log=1) at cmd.c:4424\n>> #19 0x00007f7bb6611a38 in r_core_prompt_exec (r=0x7f7bb8c470c0 <r>) at core.c:3102\n>> #20 0x00007f7bb8a39437 in r_main_radare2 (argc=2, argv=0x7ffcfeae99e8) at radare2.c:1463\n>> #21 0x000055972d8d3c60 in main (argc=2, argv=0x7ffcfeae99e8) at radare2.c:95\n>> #22 0x00007f7bb864bb97 in __libc_start_main (main=0x55972d8d3c0c <main>, argc=2, argv=0x7ffcfeae99e8, init=<optimized out>, fini=<optimized out>, rtld_fini=<optimized out>, stack_end=0x7ffcfeae99d8) at ../csu/libc-start.c:310\n>> #23 0x000055972d8d393a in _start ()\n>> â€”\n>> You are receiving this because you are subscribed to this thread.\n>> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/16757>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FXV6FBH5DHBRM25UETRPUMSVANCNFSM4MYAMBTQ>.\n>> \n\n","createdAt":"2020-05-03T09:44:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16757#issuecomment-623082914","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyMzA4MzQ1NQ==","author":{"login":"pawlos"},"authorAssociation":"CONTRIBUTOR","body":"@radare yes, building with `./sys/install.sh` but let me rebuild again.\r\n\r\nI've noticed that something is in fact not right. Rebuilding my setup and will post an update.","createdAt":"2020-05-03T09:48:27Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16757#issuecomment-623083455","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyMzA4NTkxMQ==","author":{"login":"pawlos"},"authorAssociation":"CONTRIBUTOR","body":"@radare sorry, it was a mistake on my side not using the latests. The latest doesn't crash in that exact spot but building with the `./sys/sanitizer.sh` and doing the same steps I'm getting a lot of output from it (~ 2MB file).\r\n\r\n>...\r\n> SUMMARY: AddressSanitizer: 554163 byte(s) leaked in 9663 allocation(s).\r\n\r\nShould I post that output instead?","createdAt":"2020-05-03T10:09:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16757#issuecomment-623085911","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyMzE1ODIyNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"in line:\r\n```\r\n#0 0x7f5115dd5500 in __free_menu_item /home/ubuntu/radare2/libr/core/panels.c:4972\r\n```\r\n\r\ni have this:\r\n```\r\ndemo_end:                         r_cons_clear00 ();\r\n```\r\n\r\n\r\nyour backtrace doesnt looks in sync with git, and i cant reproduce the crash you posted","createdAt":"2020-05-03T18:30:19Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16757#issuecomment-623158227","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyMzE3NjU1Mg==","author":{"login":"pawlos"},"authorAssociation":"CONTRIBUTOR","body":"@radare check my previous [comment](https://github.com/radareorg/radare2/issues/16757#issuecomment-623085911). I've re-did and the crash does not occur but asan produce a lot of other messages about leaked bytes.","createdAt":"2020-05-03T20:29:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16757#issuecomment-623176552","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyMzIwMTYzNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Can you update the issue title and description ? Itâ€™s a memleak instead of a crash, right?","createdAt":"2020-05-03T23:31:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16757#issuecomment-623201635","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyMzU0MTQ3Mw==","author":{"login":"pawlos"},"authorAssociation":"CONTRIBUTOR","body":"@radare updated","createdAt":"2020-05-04T15:43:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16757#issuecomment-623541473","viewerDidAuthor":false}],"number":16757,"title":"radare2 leaks when using tabs in visual panels mode"},{"body":"I have a bit of a strange request. I use from time to time the \"?*\" command within r2 to gain some rough overview on changes by diffing - I can imagine that you might raise your eye brows, but I'm generally quite lazy ;-)\r\n\r\nMy luxury \"problem\" is that \"?*\" doesn't output documentation on plugins, e.g. with r2-ghidra installed I need to state an additional \"pdg?\" in order to get the according information. As \"r2pm -d / --doc\" doesn't seem to work, it's a bit of a hassle to get these docs.\r\n\r\nTherefore I'd like to request, if it might be possible to add plugins documentation to \"?*\" if possible.\r\n\r\nDue to corona-chaos (home office, home schooling, home chaos) I don't have currently the time to deal with this issue, but I might help at some point later if you find this enhancement useful or at least applicable.\r\n\r\nBye the way: radare2 is fantastic! Congrats.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYyMTI2ODc0Mg==","author":{"login":"karliss"},"authorAssociation":"CONTRIBUTOR","body":"As part of shell rewrite done by @ret2libc the way commands are stored and managed is also being rewritten. Once all of that is finished recursive help should also work with plugins as long as they are using the new API.","createdAt":"2020-04-29T15:01:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16744#issuecomment-621268742","viewerDidAuthor":false}],"number":16744,"title":"extend \"?*\" for plugin documenation"},{"body":"I think there might be some bottlenecks in that, it takes around 10 min on Linux and 30 min on Windows.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYyMDI1OTc4OA==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"Tests from `db/asm` take ~30s. As you can see here more than a half of that time is spent on `CreateProcess()`.\r\n![Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ](https://user-images.githubusercontent.com/16493991/80424849-37052e80-88eb-11ea-9458-f4be01dfd6d7.png)\r\n","createdAt":"2020-04-27T22:03:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16729#issuecomment-620259788","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyMTM3MjU2MA==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"Ok it is my fault. Partially slowdown is caused by antimalware service. With disabled AM service `db/asm`  tests take ~19s.","createdAt":"2020-04-29T18:04:36Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16729#issuecomment-621372560","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyMTgwODg5Mw==","author":{"login":"kazarmy"},"authorAssociation":"CONTRIBUTOR","body":"It was worth investigating, though it doesn't seem to be where the big slowdowns are.","createdAt":"2020-04-30T12:41:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16729#issuecomment-621808893","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NTE0ODM1NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@condret see this one.","createdAt":"2020-06-17T04:51:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16729#issuecomment-645148355","viewerDidAuthor":false}],"number":16729,"title":"Improve r2r speed on Windows"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             |  Ubuntu x64 18.04 LTS\r\n| File format of the file you reverse (mandatory)      | PE\r\n| Architecture/bits of the file (mandatory)            | 32,\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.4.0 50 @ linux-x86-64 git.4.4.0-2-g08210f3\r\ncommit: 08210f3d0eefaebde8134ddf3d33599c47694b99 build: 2020-04-14__09:50:39\r\n\r\n### Expected behavior\r\nOpen a PE file using winedbg\r\n\r\n\r\n### Actual behavior\r\n\r\n### Steps to reproduce the behavior \r\n#### Wine version\r\nwine-5.0\r\n#### Binary\r\n[7zFM.zip](https://github.com/radareorg/radare2/files/4528743/7zFM.zip)\r\n#### Steps\r\n1.\r\n`r2 -a x86 -b 32 -d winedbg://7zFM.exe`\r\n2. You receive a `connected` message\r\n3. You can not do anything else nor interact\r\n4. If you click on Ctrl+C you get the following message:\r\n`^Cconnect: Interrupted system call\r\nCould not resolve address '127.0.0.1' or failed to connect\r\n[r] Cannot open 'winedbg://7zFM.exe'\r\nr_socket_spawn: rarun2 failed`\r\n5. It runs 7zFM.exe\r\n\r\n#### Related issues\r\nhttps://github.com/radareorg/radare2/issues/15410","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYxODk3NjM2NQ==","author":{"login":"Stoo0rmq"},"authorAssociation":"NONE","body":"Tried the @XVilka solution:\r\n` winedbg --gdb --no-start ./Exception.exe` + `r2 -a x86 -b 32 -d gdb://localhost:34631 `\r\nObtained the following output on R2:\r\n```\r\ngdb.io.open: Cannot connect to host.\r\n[r] Cannot open 'gdb://127.0.0.1:59079'\r\n```\r\nAnd the following output on winedbg:\r\n```\r\n..snip..\r\ntarget remote localhost:59079\r\n002c:002d: loads DLL  @0x7bc30000 (0<0>)\r\n002c:002d: loads DLL  @0x7b000000 (2470912<7347>)\r\n002c:002d: loads DLL  @0x7b420000 (0<0>)\r\n002c:002d: loads DLL  @0x7eaf0000 (0<0>)\r\n002c:002d: loads DLL  @0x7e9a0000 (0<0>)\r\n002c:002d: loads DLL  @0x7e8d0000 (0<0>)\r\n002c:002d: loads DLL  @0x65980000 (54272<769>)\r\n002c:002d: loads DLL  @0x7e6a0000 (0<0>)\r\n002c:002d: loads DLL  @0x6c0c0000 (202240<1262>)\r\n002c:002d: loads DLL  @0x62800000 (709120<1632>)\r\n002c:002d: loads DLL  @0x6e8c0000 (3883520<9044>)\r\n002c:002d: loads DLL  @0x68c40000 (823808<7539>)\r\n002c:002d: loads DLL  @0x6fdc0000 (1763840<5788>)\r\n002c:002d: loads DLL  @0x65200000 (4376576<10532>)\r\n002c:002d: loads DLL  @0x64b40000 (192000<1647>)\r\n002c:002d: loads DLL  @0x7d810000 (0<0>)\r\n002c:002d: loads DLL  @0x7e630000 (0<0>)\r\n002c:002d: loads DLL  @0x6b8c0000 (1887744<5795>)\r\n002c:002d: loads DLL  @0x6a300000 (3128832<7987>)\r\n002c:002d: loads DLL  @0x6a900000 (1408000<5434>)\r\n002c:002d: loads DLL  @0x7e370000 (0<0>)\r\n002c:002d: loads DLL  @0x62340000 (469504<2077>)`\r\n```","createdAt":"2020-04-24T12:20:44Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16708#issuecomment-618976365","viewerDidAuthor":false}],"number":16708,"title":"Unable to use winedbg://"},{"body":"that code is where DEX loading spends most of the time loading because of running this command: \"Cd 4[7182378123]\"\r\n\r\n<img width=\"849\" alt=\"Screenshot 2020-04-24 at 13 44 47\" src=\"https://user-images.githubusercontent.com/917142/80209180-ddbea600-8631-11ea-99c3-d11afb07fdd6.png\">\r\n","comments":[],"number":16707,"title":"Optimize RAnalMeta and fix its naming"},{"body":"DRCOV is popular file format and simple enough to be supported by radare2 out of the box. You can read more about the format here: https://www.ayrx.me/drcov-file-format\r\n\r\nSee the Lighthouse parser: https://github.com/gaasedelen/lighthouse/blob/master/plugin/lighthouse/parsers/drcov.py\r\n\r\nWill also solve the https://github.com/radareorg/radare2/issues/14153","comments":[{"id":"IC_kwDOAEpMrs41svQl","author":{"login":""},"authorAssociation":"NONE","body":"It seems interesting. I am new to open source. How can I start solving with this issue ? Moreover , second link is showing 'page not found.'","createdAt":"2021-08-18T08:23:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16697#issuecomment-900920357","viewerDidAuthor":false}],"number":16697,"title":"DRCOV file format support (popular coverage format)"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu x86_64\r\n| File format of the file you reverse (mandatory)      | PE32+ (EFI)\r\n| Architecture/bits of the file (mandatory)            | x86/64 (EFI)\r\n| r2 -v full output, **not truncated** (mandatory)     | Cutter-v1.10.3-pre-x64.Linux.AppImage\r\n\r\n### Expected behavior\r\n\r\nWhen trying to load the `efi.h` file, I am getting the following error:\r\n\r\n~~~\r\n[0x000102a0]> e dir.types=/usr/include/efi/x86_64\r\n\r\n[0x000102a0]> to /usr/include/efi/efi.h\r\n\r\n#include \"/usr/include/efi/x86_64/efibind.h\"\r\nIn file included from /usr/include/efi/efi.h:41:\r\n/usr/include/efi/x86_64/efibind.h:78: error: too many basic types\r\nIn file included from /usr/include/efi/efi.h:41:\r\n/usr/include/efi/x86_64/efibind.h:78: error: declaration expected\r\n~~~\r\n\r\n### Actual behavior\r\n\r\nI was expecting the types declared in the file to be properly loaded\r\n\r\n### Steps to reproduce the behavior \r\n\r\n1. Extract the `promptservice.zip` file attached and load it into radare.\r\n2. Install the gnu EFI headers (sudo apt install gnu-efi). If you are not using ubuntu, use the headers that I included as an attachment. Extract them to `/usr/include/efi`\r\n3. Enter the following commands in radare:\r\n\r\n```\r\ne dir.types=/usr/include/efi/x86_64\r\nto /usr/include/efi/efi.h\r\n```\r\n\r\n4. Notice the error about too many basic types and declaration expected.\r\n\r\n\r\n\r\n[efi.zip](https://github.com/radareorg/radare2/files/4517335/efi.zip)\r\n[promptservice.zip](https://github.com/radareorg/radare2/files/4517336/promptservice.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYxNzk5OTAwNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"thats totally expected, you must create your custom .h files to load into r2, we dont use gcc/clang so there will be many missing defines and such.","createdAt":"2020-04-22T19:51:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16686#issuecomment-617999006","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxODAwMTY1Mw==","author":{"login":"typoon"},"authorAssociation":"NONE","body":"In this case, I am reversing a UEFI binary. I need to have those type\r\ndefinitions from the headers, and it would be really hard to build a file\r\nwith them. Also, if some definitions change between versions, the I would\r\nhave to recreate a new header because of that instead of using the existing\r\nones.\r\n\r\nIsn't there a way to load the headers like that, and when r2 runs into a\r\ntype it already knows, it either ignores or replaces the type based on a\r\nconfiguration var? I believe that would be super helpful in many cases.\r\n","createdAt":"2020-04-22T19:55:59Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16686#issuecomment-618001653","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxODEwMzEwMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Yes. The parser improves over time. But a more concrete reproducer would be better. So having the reason why a specific construction fails is the best way to solve this. Because there may be more than one issue probably.\n\nI didnt checked the files but i assume you can probably comment regions with #if 0 until you get it to load\n\n> On 22 Apr 2020, at 21:56, Henrique M. D. <notifications@github.com> wrote:\n> \n> ï»¿\n> In this case, I am reversing a UEFI binary. I need to have those type\n> definitions from the headers, and it would be really hard to build a file\n> with them. Also, if some definitions change between versions, the I would\n> have to recreate a new header because of that instead of using the existing\n> ones.\n> \n> Isn't there a way to load the headers like that, and when r2 runs into a\n> type it already knows, it either ignores or replaces the type based on a\n> configuration var? I believe that would be super helpful in many cases.\n> \n> On Wed, Apr 22, 2020, 3:51 PM pancake <notifications@github.com> wrote:\n> \n> > thats totally expected, you must create your custom .h files to load into\n> > r2, we dont use gcc/clang so there will be many missing defines and such.\n> >\n> > â€”\n> > You are receiving this because you authored the thread.\n> > Reply to this email directly, view it on GitHub\n> > <https://github.com/radareorg/radare2/issues/16686#issuecomment-617999006>,\n> > or unsubscribe\n> > <https://github.com/notifications/unsubscribe-auth/AAF5IA4CCIDPZLVQKIBXR5DRN5DEDANCNFSM4MOJL4WQ>\n> > .\n> >\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-04-23T00:11:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16686#issuecomment-618103102","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxODQwNjEwOA==","author":{"login":"typoon"},"authorAssociation":"NONE","body":"The issue here seems to be for trying to re-implement a type that radare already knows (or is hard coded, not sure). For example, if you create a `test.h` file with the following contents:\r\n\r\n```\r\ntypedef unsigned int xpto_t;\r\ntypedef unsigned int xpto_t2;\r\n```\r\n\r\nAnd then try to load it with `to`, it works fine. Now, change the file to look like this:\r\n\r\n```\r\ntypedef unsigned int xpto_t;\r\ntypedef unsigned int xpto_t2;\r\ntypedef unsigned int uint32_t;\r\n```\r\n\r\nAnd you get an error on the last typedef there:\r\n\r\n~~~\r\n/home/gilgamesh/tmp/efi/test.h:3: error: identifier expected\r\n/home/gilgamesh/tmp/efi/test.h:3: error: declaration expected\r\n~~~\r\n\r\nSo the issue seems to be that radare doesn't like it when it sees a type that it already knows internally. An I say `internally` because this here works fine:\r\n\r\n```\r\ntypedef unsigned int xpto_t;\r\ntypedef unsigned int xpto_t2;\r\ntypedef unsigned int xpto_t;\r\n```\r\n\r\nAs you can see, the `xpto_t` is defined twice, but radare is ok with that. Issue seems to be only with the types it considers `primitive`. My understanding is that the `*_t` types aren't really primitive (at least, according to the C spec <http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf> section 6.2.5 and 6.7.2). So maybe the parser should allow those types to be overwritten.\r\n\r\nHopefully this helped clarify the issue.","createdAt":"2020-04-23T13:52:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16686#issuecomment-618406108","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxODQyMTIzNw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"> My understanding is that the *_t types aren't really primitive (at least, according to the C spec http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf section 6.2.5 and 6.7.2). So maybe the parser should allow those types to be overwritten.\r\n\r\nNot exactly. While they are primitive for C some of the really \"primitive\" types like `int` or `long` are platform-dependent. And radare2 on 32bit ARM FreeBSD should be able to define structs for x64 WIndows PE files, which has a different understanding of `int` length. Thus, the `intX_t` files are considered primitive and the interpretation of the `int` by `to` depends on the current value of `e asm.bits` and `e asm.arch`, etc. So I think redefining `uint32_t` should be considered an error, precisely what radare2 does. Radare2 is a reverse engineering framework after all, not a C compiler. If you have ideas how to preserve that quality but handle these cases - please give us an idea.","createdAt":"2020-04-23T14:18:17Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16686#issuecomment-618421237","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxODQzODUzMg==","author":{"login":"typoon"},"authorAssociation":"NONE","body":"I get where you are coming from, and that exact argument should allow overwriting the `*_t` types, since they are defined in terms of the real C primitive types (int, long, char, etc.). Since there is a set of configurations that specify the size of the base primitives, the `_t` ones should then be defined based on them, but if the user has a reason to overwrite those, they should be allowed to do so. If that behavior is not desired, there should at least be a warning msg pointing the user to those configurations and radare should still parse the rest of the header instead of stoping.","createdAt":"2020-04-23T14:47:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16686#issuecomment-618438532","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxODQ2NDE4MA==","author":{"login":"typoon"},"authorAssociation":"NONE","body":"Just to make clear what I am trying to say (was on my phone hen wrote the previous reply so it was a bit short).\r\n\r\nThe `*_t` types should probably be allowed to be rewritten exactly for the reason that the user might be loading a binary of another platform or they might have a reason to be overwriting those values.\r\ncreating any of the types that were processed up to that point.\r\n\r\nWhenever a redefinition of radare's primitive types is encountered, perhaps display a warning showing what type is being redefined and in what file and line number that redefinition has been found.\r\n\r\nIdeally there should be a configuration then, for example `e types.overwrite` or something, that the user can set to values such:\r\n\r\n* all - Whenever a type that already exists is found while processing a header, the existing type in radare's database will be overwritten by the current one being processed.\r\n* empty - Whenever a type definition that already exists and is empty (for example, an empty struct or forward declaration) is found while processing a header, the existing type in radare's database will be overwritten by the current one being processed.\r\n* never - Whenever a type definition that already exists is found while processing a header, the new definition being processed will be ignored and a warning is presented to the user.\r\n\r\nHow does that sound?","createdAt":"2020-04-23T15:27:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16686#issuecomment-618464180","viewerDidAuthor":false}],"number":16686,"title":"Getting `error: too many basic types` when trying to import efi.h"},{"body":"\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 18.04.4 LTS, 64 bit \r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | MIPS\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.5.0-git 24411 @ linux-x86-64 git.4.4.0-23-gf549eb2a2 commit: f549eb2a28e387650bb7c2d277f891ecaba53c0a build: 2020-04-17__07:55:34\r\n\r\nI've opened up a MIPS binary on QEMU :\r\n`sudo chroot . ./qemu-mipsel-static -g 1337 ./pwnable/Intro/stack_bof_01 testinput123`\r\n\r\nI'm trying to debug it:\r\n\r\n`r2 -a mips -d -B 0x400630 gdb://127.0.0.1:1337 pwnable/Intro/stack_bof_01 `\r\n\r\n### Expected behavior\r\n- To be able to debug the binary remotely.\r\n\r\n### Actual behavior\r\n- It results in:  \r\n`free(): invalid next size (fast)`\r\n`Aborted (core dumped)`\r\n\r\n### Steps to reproduce the behavior \r\n- By enabling debug mode\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\nBacktrace:\r\n\r\n```#0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\r\n#1  0x00007ffff72c0801 in __GI_abort () at abort.c:79\r\n#2  0x00007ffff7309897 in __libc_message (action=action@entry=do_abort, fmt=fmt@entry=0x7ffff7436b9a \"%s\\n\") at ../sysdeps/posix/libc_fatal.c:181\r\n#3  0x00007ffff731090a in malloc_printerr (str=str@entry=0x7ffff7438800 \"free(): invalid next size (fast)\") at malloc.c:5350\r\n#4  0x00007ffff7317f60 in _int_free (have_lock=0, p=0x55555585e900, av=0x7ffff766bc40 <main_arena>) at malloc.c:4213\r\n#5  __GI___libc_free (mem=0x55555585e910) at malloc.c:3124\r\n#6  0x00007ffff78f8528 in r_list_delete (list=0x55555585df00, iter=0x555555861c30) at list.c:106\r\n#7  0x00007ffff78f8392 in r_list_purge (list=0x55555585df00) at list.c:72\r\n#8  0x00007ffff78f83e8 in r_list_free (list=0x55555585df00) at list.c:82\r\n#9  0x00007ffff66705c2 in arch_parse_reg_profile (\r\n    reg_profile=0x555555845b40 \"=PC\\trip\\n=SP\\trsp\\n=BP\\trbp\\n=A0\\trax\\n=A1\\trbx\\n=A2\\trcx\\n=A3\\trdx\\n=SN\\torax\\ngpr\\tfake\\t.64\\t795\\t0\\ngpr\\trax\\t.64\\t0\\t0\\ngpr\\trbx\\t.64\\t8\\t0\\ngpr\\trcx\\t.64\\t16\\t0\\ngpr\\trdx\\t.64\\t24\\t0\\ngpr\\trsi\\t.64\\t32\\t0\\ngpr\\trdi\\t.64\\t40\\t0\\ngpr\\trbp\\t.64\\t48\\t0\"...)\r\n    at src/arch.c:132\r\n#10 0x00007ffff666f194 in gdbr_set_reg_profile (g=0x555555861920, \r\n    str=0x555555845b40 \"=PC\\trip\\n=SP\\trsp\\n=BP\\trbp\\n=A0\\trax\\n=A1\\trbx\\n=A2\\trcx\\n=A3\\trdx\\n=SN\\torax\\ngpr\\tfake\\t.64\\t795\\t0\\ngpr\\trax\\t.64\\t0\\t0\\ngpr\\trbx\\t.64\\t8\\t0\\ngpr\\trcx\\t.64\\t16\\t0\\ngpr\\trdx\\t.64\\t24\\t0\\ngpr\\trsi\\t.64\\t32\\t0\\ngpr\\trdi\\t.64\\t40\\t0\\ngpr\\trbp\\t.64\\t48\\t0\"...)\r\n    at src/libgdbr.c:119\r\n#11 0x00007ffff666efc2 in gdbr_set_architecture (g=0x555555861920, arch=1, bits=64) at src/libgdbr.c:64\r\n#12 0x00007ffff4fc8909 in r_debug_gdb_attach (dbg=0x5555557eeda0, pid=-1) at p/debug_gdb.c:383\r\n#13 0x00007ffff4fc7801 in check_connection (dbg=0x5555557eeda0) at p/debug_gdb.c:27\r\n#14 0x00007ffff4fc89c3 in r_debug_gdb_reg_profile (dbg=0x5555557eeda0) at p/debug_gdb.c:406\r\n#15 0x00007ffff4fbf6ee in r_debug_use (dbg=0x5555557eeda0, str=0x555555815320 \"gdb\") at plugin.c:34\r\n#16 0x00007ffff5316a28 in r_core_file_open (r=0x7ffff7f5a010, file=0x5555558e46e0 \"gdb://127.0.0.1:1337\", flags=5, loadaddr=0) at cfile.c:945\r\n#17 0x00007ffff768d876 in r_main_radare2 (argc=6, argv=0x7fffffffded8) at radare2.c:898\r\n#18 0x0000555555554c77 in main (argc=6, argv=0x7fffffffded8) at radare2.c:96```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYxNzY5MjMwNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"this is not master. it's like 1 week old\n\ncan you please confirm the bug is still in master? because the errror line doesnt matches the source\n\n> On 22 Apr 2020, at 08:18, Aswin C <notifications@github.com> wrote:\n> \n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tUbuntu 18.04.4 LTS, 64 bit\n> File format of the file you reverse (mandatory)\tELF\n> Architecture/bits of the file (mandatory)\tMIPS\n> r2 -v full output, not truncated (mandatory)\tradare2 4.5.0-git 24411 @ linux-x86-64 git.4.4.0-23-gf549eb2a2 commit: f549eb2 <https://github.com/radareorg/radare2/commit/f549eb2a28e387650bb7c2d277f891ecaba53c0a> build: 2020-04-17__07:55:34\n> I've opened up a MIPS binary on QEMU :\n> sudo chroot . ./qemu-mipsel-static -g 1337 ./pwnable/Intro/stack_bof_01 testinput123\n> \n> I'm trying to debug it:\n> \n> r2 -a mips -d -B 0x400630 gdb://127.0.0.1:1337 pwnable/Intro/stack_bof_01\n> \n> Expected behavior\n> \n> To be able to debug the binary remotely.\n> Actual behavior\n> \n> It results in:\n> free(): invalid next size (fast)\n> Aborted (core dumped)\n> Steps to reproduce the behavior\n> \n> By enabling debug mode\n> Additional Logs, screenshots, source-code, configuration dump, ...\n> \n> Backtrace:\n> \n> #1  0x00007ffff72c0801 in __GI_abort () at abort.c:79\n> #2  0x00007ffff7309897 in __libc_message (action=action@entry=do_abort, fmt=fmt@entry=0x7ffff7436b9a \"%s\\n\") at ../sysdeps/posix/libc_fatal.c:181\n> #3  0x00007ffff731090a in malloc_printerr (str=str@entry=0x7ffff7438800 \"free(): invalid next size (fast)\") at malloc.c:5350\n> #4  0x00007ffff7317f60 in _int_free (have_lock=0, p=0x55555585e900, av=0x7ffff766bc40 <main_arena>) at malloc.c:4213\n> #5  __GI___libc_free (mem=0x55555585e910) at malloc.c:3124\n> #6  0x00007ffff78f8528 in r_list_delete (list=0x55555585df00, iter=0x555555861c30) at list.c:106\n> #7  0x00007ffff78f8392 in r_list_purge (list=0x55555585df00) at list.c:72\n> #8  0x00007ffff78f83e8 in r_list_free (list=0x55555585df00) at list.c:82\n> #9  0x00007ffff66705c2 in arch_parse_reg_profile (\n>     reg_profile=0x555555845b40 \"=PC\\trip\\n=SP\\trsp\\n=BP\\trbp\\n=A0\\trax\\n=A1\\trbx\\n=A2\\trcx\\n=A3\\trdx\\n=SN\\torax\\ngpr\\tfake\\t.64\\t795\\t0\\ngpr\\trax\\t.64\\t0\\t0\\ngpr\\trbx\\t.64\\t8\\t0\\ngpr\\trcx\\t.64\\t16\\t0\\ngpr\\trdx\\t.64\\t24\\t0\\ngpr\\trsi\\t.64\\t32\\t0\\ngpr\\trdi\\t.64\\t40\\t0\\ngpr\\trbp\\t.64\\t48\\t0\"...)\n>     at src/arch.c:132\n> #10 0x00007ffff666f194 in gdbr_set_reg_profile (g=0x555555861920, \n>     str=0x555555845b40 \"=PC\\trip\\n=SP\\trsp\\n=BP\\trbp\\n=A0\\trax\\n=A1\\trbx\\n=A2\\trcx\\n=A3\\trdx\\n=SN\\torax\\ngpr\\tfake\\t.64\\t795\\t0\\ngpr\\trax\\t.64\\t0\\t0\\ngpr\\trbx\\t.64\\t8\\t0\\ngpr\\trcx\\t.64\\t16\\t0\\ngpr\\trdx\\t.64\\t24\\t0\\ngpr\\trsi\\t.64\\t32\\t0\\ngpr\\trdi\\t.64\\t40\\t0\\ngpr\\trbp\\t.64\\t48\\t0\"...)\n>     at src/libgdbr.c:119\n> #11 0x00007ffff666efc2 in gdbr_set_architecture (g=0x555555861920, arch=1, bits=64) at src/libgdbr.c:64\n> #12 0x00007ffff4fc8909 in r_debug_gdb_attach (dbg=0x5555557eeda0, pid=-1) at p/debug_gdb.c:383\n> #13 0x00007ffff4fc7801 in check_connection (dbg=0x5555557eeda0) at p/debug_gdb.c:27\n> #14 0x00007ffff4fc89c3 in r_debug_gdb_reg_profile (dbg=0x5555557eeda0) at p/debug_gdb.c:406\n> #15 0x00007ffff4fbf6ee in r_debug_use (dbg=0x5555557eeda0, str=0x555555815320 \"gdb\") at plugin.c:34\n> #16 0x00007ffff5316a28 in r_core_file_open (r=0x7ffff7f5a010, file=0x5555558e46e0 \"gdb://127.0.0.1:1337\", flags=5, loadaddr=0) at cfile.c:945\n> #17 0x00007ffff768d876 in r_main_radare2 (argc=6, argv=0x7fffffffded8) at radare2.c:898\n> #18 0x0000555555554c77 in main (argc=6, argv=0x7fffffffded8) at radare2.c:96```\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/16680>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FWPYW2D4BK4EP4KO2TRN2DZ7ANCNFSM4MN35W6A>.\n> \n\n","createdAt":"2020-04-22T10:27:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16680#issuecomment-617692305","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxNzg3MTA5MQ==","author":{"login":"officialcjunior"},"authorAssociation":"CONTRIBUTOR","body":"Sorry, I've updated now, to:\r\n```\r\nradare2 4.5.0-git 24501 @ linux-x86-64 git.4.4.0-64-gd3ecd271c\r\ncommit: d3ecd271cf81cc21a8a43ff9b59474023def5ead build: 2020-04-22__20:06:08\r\n```\r\n\r\nStill, I'm facing:\r\n\r\n```\r\n#0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\r\n#1  0x00007ffff72bf801 in __GI_abort () at abort.c:79\r\n#2  0x00007ffff7308897 in __libc_message (action=action@entry=do_abort, fmt=fmt@entry=0x7ffff7435b9a \"%s\\n\")\r\n    at ../sysdeps/posix/libc_fatal.c:181\r\n#3  0x00007ffff730f90a in malloc_printerr (str=str@entry=0x7ffff7433d88 \"free(): invalid pointer\") at malloc.c:5350\r\n#4  0x00007ffff7316e1c in _int_free (have_lock=0, p=0x55555585f4f0, av=0x7ffff766ac40 <main_arena>) at malloc.c:4157\r\n#5  __GI___libc_free (mem=0x55555585f500) at malloc.c:3124\r\n#6  0x00007ffff78f75ef in r_list_delete (list=0x555555836a40, iter=0x55555585f500) at list.c:109\r\n#7  0x00007ffff78f7442 in r_list_purge (list=0x555555836a40) at list.c:72\r\n#8  0x00007ffff78f7498 in r_list_free (list=0x555555836a40) at list.c:82\r\n#9  0x00007ffff666f617 in arch_parse_reg_profile (\r\n    reg_profile=0x555555846020 \"=PC\\trip\\n=SP\\trsp\\n=BP\\trbp\\n=A0\\trax\\n=A1\\trbx\\n=A2\\trcx\\n=A3\\trdx\\n=SN\\torax\\ngpr\\tfake\\t.64\\t795\\t0\\ngpr\\trax\\t.64\\t0\\t0\\ngpr\\trbx\\t.64\\t8\\t0\\ngpr\\trcx\\t.64\\t16\\t0\\ngpr\\trdx\\t.64\\t24\\t0\\ngpr\\trsi\\t.64\\t32\\t0\\ngpr\\trdi\\t.64\\t40\\t0\\ngpr\\trbp\\t.64\\t48\\t0\"...) at src/arch.c:135\r\n#10 0x00007ffff666e1ac in gdbr_set_reg_profile (g=0x5555558487e0, \r\n    str=0x555555846020 \"=PC\\trip\\n=SP\\trsp\\n=BP\\trbp\\n=A0\\trax\\n=A1\\trbx\\n=A2\\trcx\\n=A3\\trdx\\n=SN\\torax\\ngpr\\tfake\\t.64\\t795\\t0\\ngpr\\trax\\t.64\\t0\\t0\\ngpr\\trbx\\t.64\\t8\\t0\\ngpr\\trcx\\t.64\\t16\\t0\\ngpr\\trdx\\t.64\\t24\\t0\\ngpr\\trsi\\t.64\\t32\\t0\\ngpr\\trdi\\t.64\\t40\\t0\\ngpr\\trbp\\t.64\\t48\\t0\"...)\r\n    at src/libgdbr.c:119\r\n---Type <return> to continue, or q <return> to quit---\r\n#11 0x00007ffff666dfda in gdbr_set_architecture (g=0x5555558487e0, arch=1, bits=64) at src/libgdbr.c:64\r\n#12 0x00007ffff4f60909 in r_debug_gdb_attach (dbg=0x5555557eedb0, pid=-1) at p/debug_gdb.c:383\r\n#13 0x00007ffff4f5f801 in check_connection (dbg=0x5555557eedb0) at p/debug_gdb.c:27\r\n#14 0x00007ffff4f609c3 in r_debug_gdb_reg_profile (dbg=0x5555557eedb0) at p/debug_gdb.c:406\r\n#15 0x00007ffff4f576ee in r_debug_use (dbg=0x5555557eedb0, str=0x555555815bc0 \"gdb\") at plugin.c:34\r\n#16 0x00007ffff52c1173 in r_core_file_open (r=0x7ffff7f5a010, file=0x5555558e54f0 \"gdb://127.0.0.1:1337\", flags=5, loadaddr=0) at cfile.c:945\r\n#17 0x00007ffff768c81c in r_main_radare2 (argc=8, argv=0x7fffffffdeb8) at radare2.c:898\r\n#18 0x0000555555554c77 in main (argc=8, argv=0x7fffffffdeb8) at radare2.c:96\r\n\r\n```","createdAt":"2020-04-22T16:02:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16680#issuecomment-617871091","viewerDidAuthor":false}],"number":16680,"title":"Error while debugging a MIPS binary remotely"},{"body":"# This template is meant for bug reports, if you have a feature request, please be as descriptive as possible and delete the template\r\n\r\nMake sure you are testing using the latest git version of radare2 before submitting any issue.\r\n\r\n*If you would like to report a bug, please fill the template below*\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Debian arm 64, Ubuntu x86 32\r\n| File format of the file you reverse (mandatory)      | PE, ELF etc.\r\n| Architecture/bits of the file (mandatory)            | PPC, x86/32, x86/64 etc.\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.4.0-git 17284 @ darwin-x86-64 git.2.2.0-476-gf8cf84e06 commit: f8cf84e0653642d9ad34e760e0e56dd81860e799 build: 2018-02-17__11:08:27\r\n\r\n### Expected behavior\r\n\r\n### Actual behavior\r\n\r\n### Steps to reproduce the behavior \r\n- Please share the binary if it is shareable by drag and dropping it here in a zip archive (mandatory)\r\n- Use asciinema to describe the issue and share the link here (mandatory if u can't share the binary) \r\n- Use code markdown `CODE` to make your code visible\r\n- Or even better, create a Pull-Request containing the test case in the test/ folder. See for example test/new/db/cmd/cmd_search.\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\nDrag and drop zip archives containing the Additional info here, don't use external services or link.\r\n","comments":[],"number":16671,"title":"Split r2r.c into libr/main and make it available from inside r2"},{"body":"To enforce the basic commit message writing rules and mark invalid as red in the pull requests:\r\n- https://github.com/marketplace/actions/gs-commit-message-checker\r\n- https://github.com/conventional-changelog/commitlint\r\n- https://github.com/seferov/pr-lint-action","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYxNzc2NjA1OQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Nice-to-have feature, though not essential for now. I don't have a deadline for this and I'm removing me from the assignee.","createdAt":"2020-04-22T13:03:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16667#issuecomment-617766059","viewerDidAuthor":false}],"number":16667,"title":"Add a linter/GitHub Action to validate commit messages and headers"},{"body":"The only reference counting structure in r2land right now is this:\r\n\r\n`R_API void r_anal_block_unref(RAnalBlock *bb) {`\r\n\r\nSo we should change it to use the generic refcounting helper. And discuss which others shoul dbe converted","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYxNjM3Mjc1NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Apart from that, it should be documented in the [DEVELOPERS.md](https://github.com/radareorg/radare2/blob/master/DEVELOPERS.md), so people will know that they should use it.","createdAt":"2020-04-20T07:47:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16620#issuecomment-616372755","viewerDidAuthor":false}],"number":16620,"title":"Use RRef"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | OSX\r\n| File format of the file you reverse (mandatory)      | PE32\r\n| Architecture/bits of the file (mandatory)            | x86/32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.4.0-git 24370 @ darwin-x86-64 git.4.1.1-771-g38d82feec commit: 38d82feecf5f56b1ddf62856c059941c3a5470c5 build: 2020-04-14__11:39:30\r\n\r\n### Expected behavior\r\n\r\nWhen a `.cab` file header signature is found (via `izzq~MSCF`, for instance), `px` should show sth like this:\r\n\r\n```\r\n[0x00426870]> px 10\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x00426870  4d53 4346 0000 0000 bb5b                 MSCF.....[\r\n```\r\n\r\n### Actual behavior\r\n```\r\n[0x0006f100]> i\r\nfd       4\r\nfile     CEREC_Update_5.1.1.203366.118.exe\r\nsize     0x3b8547f0\r\nhumansz  952.3M\r\nmode     r-x\r\nformat   pe\r\niorw     false\r\nblksz    0x0\r\nblock    0x100\r\ntype     EXEC (Executable file)\r\narch     x86\r\nbaddr    0x400000\r\nbinsz    998590448\r\nbintype  pe\r\nbits     32\r\ncanary   false\r\nretguard false\r\nclass    PE32\r\ncmp.csum 0x3b860dc8\r\ncompiled Sat Nov 18 23:00:38 2017\r\ncrypto   false\r\ndbg_file C:\\agent\\_work\\8\\s\\build\\ship\\x86\\burn.pdb\r\nendian   little\r\nhavecode true\r\nhdr.csum 0x3b860dc8\r\nguid     09DBCC0110FB4CDEB54982D54D7542351\r\nladdr    0x0\r\nlang     c\r\nlinenum  false\r\nlsyms    false\r\nmachine  i386\r\nmaxopsz  16\r\nminopsz  1\r\nnx       true\r\nos       windows\r\noverlay  true\r\npcalign  0\r\npic      true\r\nrelocs   false\r\nsigned   true\r\nsanitiz  false\r\nstatic   false\r\nstripped false\r\nsubsys   Windows GUI\r\nva       true\r\n\r\n[0x0006f100]> izzq~MSCF\r\n0x4bce00 5 4 MSCF\r\n0xd7ec90 5 4 MSCF\r\n0x7e68080 5 4 MSCF\r\n0x33706150 5 4 MSCF\r\n[0x0006f100]> pxe@0x4bce00\r\n0x004bce00 ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€  ................\r\n0x004bce10 ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€  ................\r\n0x004bce20 ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€  ................\r\n0x004bce30 ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€  ................\r\n0x004bce40 ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€  ................\r\n0x004bce50 ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€  ................\r\n0x004bce60 ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€  ................\r\n0x004bce70 ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€  ................\r\n0x004bce80 ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€  ................\r\n0x004bce90 ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€  ................\r\n0x004bcea0 ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€  ................\r\n0x004bceb0 ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€  ................\r\n0x004bcec0 ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€  ................\r\n0x004bced0 ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€  ................\r\n0x004bcee0 ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€  ................\r\n0x004bcef0 ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€ ðŸŒ€  ................\r\n[0x0006f100]> pxh@0xd7ec90 10\r\n0x00d7ec90  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x00d7eca0  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x00d7ecb0  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x00d7ecc0  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x00d7ecd0  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x00d7ece0  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x00d7ecf0  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x00d7ed00  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x00d7ed10  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x00d7ed20  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x00d7ed30  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x00d7ed40  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x00d7ed50  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x00d7ed60  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x00d7ed70  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x00d7ed80  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n[0x0006f100]> pxh@0x7e68080 5\r\n0x07e68080  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x07e68090  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x07e680a0  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x07e680b0  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x07e680c0  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x07e680d0  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x07e680e0  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x07e680f0  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x07e68100  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x07e68110  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x07e68120  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x07e68130  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x07e68140  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x07e68150  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x07e68160  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n0x07e68170  0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff 0xffff\r\n[0x0006f100]> px@0x33706150 5\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x33706150  .... .... .... .... .... .... .... ....\r\n0x33706160  .... .... .... .... .... .... .... ....\r\n0x33706170  .... .... .... .... .... .... .... ....\r\n0x33706180  .... .... .... .... .... .... .... ....\r\n0x33706190  .... .... .... .... .... .... .... ....\r\n0x337061a0  .... .... .... .... .... .... .... ....\r\n0x337061b0  .... .... .... .... .... .... .... ....\r\n0x337061c0  .... .... .... .... .... .... .... ....\r\n0x337061d0  .... .... .... .... .... .... .... ....\r\n0x337061e0  .... .... .... .... .... .... .... ....\r\n0x337061f0  .... .... .... .... .... .... .... ....\r\n0x33706200  .... .... .... .... .... .... .... ....\r\n0x33706210  .... .... .... .... .... .... .... ....\r\n0x33706220  .... .... .... .... .... .... .... ....\r\n0x33706230  .... .... .... .... .... .... .... ....\r\n0x33706240  .... .... .... .... .... .... .... ....\r\n```\r\n### Steps to reproduce the behavior \r\n\r\n```\r\n$ wget https://assets.dentsplysirona.com/flagship/en/explore/cerec/software/CEREC-SW-511.zip && unzip *.zip && r2 CEREC_Update_5.1.1.203366.118.exe\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYxMzUxNDAxMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"omfg 1GB of executable code /o\\","createdAt":"2020-04-14T15:34:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16584#issuecomment-613514012","viewerDidAuthor":false}],"number":16584,"title":"izzq~MSCF yields fake hits?"},{"body":"https://github.com/radareorg/radare2/blob/344e66730367e24c2c97da64f6d248c65a5dd14c/libr/main/radare2.c#L249-L256\r\n\r\nr_core_run_script returns a bool. Don't know how to deal with it.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYxMzA3Mzk4MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Maybe checking the $? Value when it returns false? Boolification tends to simplify things sometimes but it can spot some design issues like this one\n\n> On 13 Apr 2020, at 21:50, Liumeo <notifications@github.com> wrote:\n> \n> ï»¿\n> https://github.com/radareorg/radare2/blob/344e66730367e24c2c97da64f6d248c65a5dd14c/libr/main/radare2.c#L249-L256\n> \n> r_core_run_script returns a bool. Don't know how to deal with it.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-04-13T20:09:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16578#issuecomment-613073980","viewerDidAuthor":false}],"number":16578,"title":"Bugs in function run_commands in radare2.c"},{"body":"```sh\r\ncfg=./plugins.cfg\r\n...\r\nsave () {\r\n  cp $cfg plugins.cfg\r\n # echo \"STATIC=\\\"$STATIC\\\"\" > $cfg\r\n # echo \"SHARED=\\\"$SHARED\\\"\" >>$cfg\r\n}\r\n```\r\ncfg is never modified so `cp` has no effect.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYxMjY4MTU2Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"did u pass the right args to pick the plugins ? \n\n> On 12 Apr 2020, at 23:45, Liumeo <notifications@github.com> wrote:\n> \n> ï»¿\n> cfg=./plugins.cfg\n> ...\n> save () {\n>   cp $cfg plugins.cfg\n>  # echo \"STATIC=\\\"$STATIC\\\"\" > $cfg\n>  # echo \"SHARED=\\\"$SHARED\\\"\" >>$cfg\n> }\n> cfg is never modified so cp has no effect.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-04-12T21:52:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16555#issuecomment-612681563","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMjY4NDc2Ng==","author":{"login":"eagleoflqj"},"authorAssociation":"CONTRIBUTOR","body":"Is it relevant to args? I just run `sys/user.sh` and notice there's\r\n```\r\ncp: './plugins.cfg' and 'plugins.cfg' are the same file\r\n```\r\non stderr. I don't see any chance $cfg becomes something other than `./plugins.cfg`, so I guess `cp $cfg plugins.cfg` is useless?","createdAt":"2020-04-12T22:20:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16555#issuecomment-612684766","viewerDidAuthor":false}],"number":16555,"title":"Function save in configure-plugins does nothing"},{"body":"calling r_regex_comp after r_regex_new is leaking because its initializing it twice, the leak should be fixed, so maybe worth to open an issue\r\n\r\nsee https://github.com/radareorg/radare2/commit/fdb75d3bf9a3d09f3c95ca0bed0bfb5eaab02684\r\n\r\nand  https://github.com/radareorg/radare2/issues/15888","comments":[],"number":16549,"title":"RRegex.comp() leaks if called after .new()"},{"body":"similar to https://github.com/radareorg/radare2/issues/15912\r\n\r\nfrom ghidra:\r\n\r\n```\r\n                             //\r\n                             // bootloader2-code1 \r\n                             // ram: 80018800-800328e7\r\n                             //\r\n                             LAB_80018800                                    XREF[5]:     bootloader2-header:8001851c(*), \r\n                                                                                          bootloader2-code2:80037bea(j), \r\n                                                                                          bootloader2-code2:80037c0a(j), \r\n                                                                                          bootloader2-code2:80037c2a(j), \r\n                                                                                          bootloader2-code2:80037dae(j)  \r\n     e1:80018800 91 00 00 f7     movh.a     a15, #0x7000\r\n     e1:80018804 02 4a           mov        d10, d4\r\n     e1:80018806 39 ff 0c 35     ld.bu      d15, [a15]0x50cc\r\n```\r\n\r\nfrom rasm2:\r\n\r\n`rasm2 -a tricore -o 0x80018800 -D '910000f7024a39ff0c35'`\r\n\r\n```\r\n0x80018800   4                 910000f7  movh.a a15, 28672\r\n0x80018804   2                     024a  mov d10, d4\r\n0x80018806   2                     39ff  .hword 0xff39\r\n0x80018808   2                     0c35  ld.bu d15, [a3]5\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYxMjU4MzcxNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Try with latest binutils we can update the disassembler from gnu if tht works\n\n> On 12 Apr 2020, at 01:34, Brandon Ros <notifications@github.com> wrote:\n> \n> ï»¿\n> similar to #15912\n> \n> from ghidra:\n> \n>                              //\n>                              // bootloader2-code1 \n>                              // ram: 80018800-800328e7\n>                              //\n>                              LAB_80018800                                    XREF[5]:     bootloader2-header:8001851c(*), \n>                                                                                           bootloader2-code2:80037bea(j), \n>                                                                                           bootloader2-code2:80037c0a(j), \n>                                                                                           bootloader2-code2:80037c2a(j), \n>                                                                                           bootloader2-code2:80037dae(j)  \n>      e1:80018800 91 00 00 f7     movh.a     a15, #0x7000\n>      e1:80018804 02 4a           mov        d10, d4\n>      e1:80018806 39 ff 0c 35     ld.bu      d15, [a15]0x50cc\n> from rasm2:\n> \n> rasm2 -a tricore -o 0x80018800 -D '910000f7024a39ff0c35'\n> \n> 0x80018800   4                 910000f7  movh.a a15, 28672\n> 0x80018804   2                     024a  mov d10, d4\n> 0x80018806   2                     39ff  .hword 0xff39\n> 0x80018808   2                     0c35  ld.bu d15, [a3]5\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-04-12T08:48:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16533#issuecomment-612583717","viewerDidAuthor":false}],"number":16533,"title":"rasm2 tricore ld.bu disassembly error"},{"body":"![Screenshot from 2020-04-10 12-31-24](https://user-images.githubusercontent.com/1460997/79039682-442fd700-7be3-11ea-9b5f-1ce0360a64f9.png)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYxMjUyNzUwMQ==","author":{"login":"vext01"},"authorAssociation":"NONE","body":"This is a failing call to `sysctl(2)`:\r\nhttps://github.com/radareorg/radare2/blob/1ff6331a331d279833136baabe87492a377b33f4/libr/debug/p/native/bsd/bsd_debug.c#L391-L394\r\n\r\nThe reason is that, since about 5 years ago, only root can issue use that MIB:\r\nhttps://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/kern/kern_sysctl.c.diff?r1=1.273&r2=1.274&f=h\r\n\r\nConfirmed by running as root. Makes the error go away:\r\n```\r\n$ ./inst/bin/r2 -d ls     \r\nProcess with PID 50096 started...\r\n= attach 50096 50096\r\nCould not get memory map: Operation not permitted\r\nCould not get memory map: Operation not permitted\r\nasm.bits 64\r\nCould not get memory map: Operation not permitted\r\nWarning: r_bin_file_hash: file exceeds bin.hashlimit\r\n -- AHHHHH!!!! ASSEMBLY CODE!!!!!! HOLD ME I'M SCARED!!!!!!!!!!\r\n[0xd5c9a30c000]> \r\n```\r\n\r\n```\r\n$ doas ./inst/bin/r2 -d ls\r\npassword: \r\nProcess with PID 87899 started...\r\n= attach 87899 87899\r\nbin.baddr 0x100f660c000\r\nUsing 0x100f660c000\r\nasm.bits 64\r\nWarning: r_bin_file_hash: file exceeds bin.hashlimit\r\n -- Rename a function using the 'afr <newname> @ <offset>' command.\r\n[0x100f660c000]> \r\n```\r\n\r\nSo the error messages are actually correct, but not user friendly.\r\n\r\nWhat are the implications of not being able to read the map? Hopefully nothing too serious.","createdAt":"2020-04-11T22:37:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16525#issuecomment-612527501","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMjUyODM0OA==","author":{"login":"vext01"},"authorAssociation":"NONE","body":"> What are the implications of not being able to read the map?\r\n\r\nIf you are just trying to find where things are loaded in the virtual address space, you could use `dl_iterate_phdr(3)`?\r\n\r\nhttps://man.openbsd.org/dl_iterate_phdr\r\n\r\nEDIT: ah, but that only works for the calling process...","createdAt":"2020-04-11T22:43:35Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16525#issuecomment-612528348","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMjU4MzY0NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"The output of â€œdmâ€ will be empty and u will struggle to see the libs loaded with dmm or set breakpoints for example\n\n> On 12 Apr 2020, at 00:43, Edd Barrett <notifications@github.com> wrote:\n> \n> ï»¿\n> What are the implications of not being able to read the map?\n> \n> If you are just trying to find where things are loaded in the virtual address space, you could use dl_iterate_phdr(3)?\n> \n> https://man.openbsd.org/dl_iterate_phdr\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-04-12T08:48:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16525#issuecomment-612583645","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1NTk3MTAwNA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@thestr4ng3r is this still a problem?","createdAt":"2020-07-09T07:58:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16525#issuecomment-655971004","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcyNjUwMjAwNA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@thestr4ng3r is this still an issue? cc @yossizap @devnexen ","createdAt":"2020-11-13T04:35:03Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16525#issuecomment-726502004","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcyNjUwNTE3NQ==","author":{"login":"devnexen"},"authorAssociation":"CONTRIBUTOR","body":"You still need to be privileged on OpenBSD sorry.","createdAt":"2020-11-13T04:46:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16525#issuecomment-726505175","viewerDidAuthor":false}],"number":16525,"title":"Debug on OpenBSD: Could not get memory map: Operation not permitted"},{"body":"\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Arch64\r\n| File format of the file you reverse (mandatory)      | ELF64.\r\n| Architecture/bits of the file (mandatory)            | x64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.4.0-git 24579 @ linux-x86-64 git.4.3.1-256-g871b68bb8 commit: 871b68bb8c9031c9df42f2fdb1b2cd528628476f build: 2020-04-09__17:46:14\r\n\r\n\r\n### Expected behavior\r\nWhen searching for cross-references from a certain address, radare2 should only find one reference.\r\n\r\n### Actual behavior\r\nIn the following example, r2 finds two references:\r\n1. `main`, at address 0x1380 :heavy_check_mark: \r\n2. `section..note.ABI_tag` at address 0x02e8 :x:\r\n\r\nThese are the bytes of the instruction: \"48 8d 3d **e8 02** 00\" at `0x01091`\r\nIt seems like r2 is parsing the bytes twice, one is right, the other isn't.\r\nr2 is right to find the reference to main which is `$$ + 1 + 0x02e8`\r\nr2 is wrong because it assumes that `0x2e8`  (`section..note.ABI_tag`) is referenced\r\n\r\n```\r\n$Â r2 -A  ~/security/megabeets/crackmes/megabeets_0x1_64 \r\n<...truncated...>\r\n\r\n[0x00001070]> pd 1 @ 0x00001091\r\n0x00001091      488d3de80200.  lea rdi, [main]   ; 0x1380\r\n\r\n[0x00001070]> axf @ 0x00001091\r\nd 0x2e8 section..note.ABI_tag\r\nd 0x1380 main\r\n\r\n```\r\n\r\n### Steps to reproduce the behavior \r\nFollow the snippet above, or simply do as follows:\r\n\r\n- Open the attached binary in r2\r\n- Analyze using `aaa`\r\n- run `axf @ 0x00001091`\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\n[megabeets_0x1_64.zip](https://github.com/radareorg/radare2/files/4461127/megabeets_0x1_64.zip)\r\n\r\n","comments":[],"number":16517,"title":"Wrongly detected additional x-ref in ELF 64bit"},{"body":"By `mov edi, edit` I learned that it is a function added when compiling with /hotpatch. In cuttter however they are not considered functions and the graph cannot be generated:\r\n\r\n![Cutter](https://i.imgur.com/zVnq78b.png)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYxMTkxNjc3OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Use E anal.hasnext=true and about reanalizing modified code there are some issues opened already\n\n> On 10 Apr 2020, at 09:07, Misiur <notifications@github.com> wrote:\n> \n> ï»¿\n> By mov edi, edit I learned that it is a function added when compiling with /hotpatch. In cuttter however they are not considered functions and the graph cannot be generated:\n> \n> \n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-04-10T07:30:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16514#issuecomment-611916779","viewerDidAuthor":false}],"number":16514,"title":"Auto analysis does not recognize hot patched functions"},{"body":"<!--- Filling this template is mandatory -->\r\n<!--- Provide a general summary of the issue in the Title above -->\r\n\r\nNow, pyc's anal plugin can give out jump info in function. But call info between functions needs more analysis.\r\n\r\nCALL_* opcodes call function based on stack context, not anything like a pointer to called function.\r\n\r\n<!-- A clear and concise description of what the problem is. Ex. I'm always frustrated when [...] -->\r\n\r\n**Possible Implementation**\r\n\r\nI suggest emulating the stack across basic blocks. \r\n\r\nPlease be  aware of **ternary operator** and this example: https://godbolt.org/z/WaXdRG. Solution like **Traverse reversely from call site until enough opcodes to push desired number of elements to stack. And the amount of pushed elements equals to CALL_*'s oparg** will fail.\r\n","comments":[],"number":16827,"title":"Support CALL_* python bytecodes analysis"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Windows x86-64\r\n| File format of the file you reverse (mandatory)      | any\r\n| Architecture/bits of the file (mandatory)            | any\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.4.0-git 24258 @ windows-x86-64 git.4.0.0-951-g60ee0daa9 commit: 60ee0daa9113eac731388d2316faaea9c64bb921 build: 08.04.2020__23:58:09,38\r\n\r\n### Expected behavior\r\n`r_bin_demangle(..., \"__TIFFSwab16BitData\", ...)` returns `NULL`\r\n\r\n### Actual behavior\r\n`r_bin_demangle(..., \"__TIFFSwab16BitData\", ...)` returns `\"BitData\"`\r\n\r\n### Steps to reproduce the behavior \r\nOpen https://github.com/radareorg/radare2-testbins/blob/master/coff/tif_dir.obj in r2 and execute command `ii` :\r\n```\r\n...\r\n18  0x00000000 NONE FUNC     sym.imp.BitData\r\n19  0x00000000 NONE FUNC     sym.imp.BitData\r\n20  0x00000000 NONE FUNC     sym.imp.BitData\r\n21  0x00000000 NONE FUNC     sym.imp.BitData\r\n...\r\n```\r\n(output from https://github.com/radareorg/radare2/blob/master/test/new/db/formats/coff#L29-L32) \r\n\r\nActually that `\"BitData\"` is returned by `r_bin_demangle_swift()`:\r\n```\r\n[0x00000000]> iD swift __TIFFSwab16BitData\r\nBitData\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYxMTQ2MTI3MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Please add the test in the testcases","createdAt":"2020-04-09T10:44:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16488#issuecomment-611461271","viewerDidAuthor":false}],"number":16488,"title":"r_bin_demangle() incorrectly detects name mangling scheme"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | NixOS x86 64-bit\r\n| File format of the file you reverse (mandatory)      | Doesn't matter, I think\r\n| Architecture/bits of the file (mandatory)            | x86 in 16-bit mode, but 32-bit and 64-bit modes are also broken\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.3.1 0 @ linux-x86-64 git.4.3.1 commit: HEAD build: 1970-01-01__00:00:01\r\n\r\n### Expected behavior\r\n```asm\r\n$ r2 -q -a x86 -b 16 -c 'wa xor ax, ax; pd 1' -\r\n            0000:0000      31c0           xor ax, ax\r\n```\r\n\r\n### Actual behavior\r\n```asm\r\n$ r2 -q -a x86 -b 16 -c 'wa xor ax, ax; pd 1' -\r\n            0000:0000      c00000         rol byte [bx + si], 0\r\n```\r\n### Steps to reproduce the behavior \r\n\r\nSee above.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYxMDExNDczMQ==","author":{"login":"wizeman"},"authorAssociation":"NONE","body":"Simpler test case:\r\n\r\n### Expected behavior\r\n```\r\n$ rasm2 -b 16 'xor ax, ax'\r\n31c0\r\n```\r\n### Actual behavior\r\n```\r\n$ rasm2 -b 16 'xor ax, ax'\r\nc0\r\n```\r\n\r\nNote that 32-bit and 64-bit modes are broken too.","createdAt":"2020-04-07T01:02:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16449#issuecomment-610114731","viewerDidAuthor":false}],"number":16449,"title":"The 'wa' command doesn't assemble 'xor ax, ax' correctly"},{"body":"- [ ] Separate `R_API r_anal_esil_*` into `libr/include/r_esil.h`\r\n- [ ] Consider to isolate the ESIL handling into the separate library, like siol was\r\n- [ ] Provide the better API to distinct between various ESIL operation kinds\r\n- [ ] Provide the API for \"un-RPN\"-ing of the ESIL expressions, for printing purpose, maybe more readable representation, useful for debugging/etc\r\n- [ ] Provide the way for easier distinction between memory accesses and register accesses in API\r\n- [ ] Add the location/flag ESIL operation - to add symbolic markers of some places in ESIL stream\r\n\r\ncc @condret ","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYzNjU2MzUzMg==","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"I thought about this ... the problem is that esil depends on anal-plugins, which is why esil is kinda related to that. you get my point?","createdAt":"2020-06-01T01:11:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16400#issuecomment-636563532","viewerDidAuthor":false}],"number":16400,"title":"ESIL suggestions for improvement"},{"body":"Right now we can do  `mi` to get the offset for given file. but we have no way to determine the filename from the offset.\r\n\r\nAlso, there's no way to enumerate deleted files. not even in FAT.\r\n\r\nThe mi feature only works for FAT btw, and we have no tests","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYwOTk1MTMzNA==","author":{"login":"imyxh"},"authorAssociation":"CONTRIBUTOR","body":"Perhaps you're aware but the debugfs tool has an `lsdel` command that lists deleted inodes. Could look at implementing that sort of thing instead of a filename-based output.","createdAt":"2020-04-06T18:07:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16396#issuecomment-609951334","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMDI1MzU5Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Sounds like a plan\n\n> On 6 Apr 2020, at 20:07, Ian Huang <notifications@github.com> wrote:\n> \n> ï»¿\n> Perhaps you're aware but the debugfs tool has an lsdel command that lists deleted inodes. Could look at implementing that sort of thing instead of a filename-based output.\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-04-07T08:32:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16396#issuecomment-610253597","viewerDidAuthor":false}],"number":16396,"title":"Forensics: Deleted files"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Arch64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.4.0-git 25107 @ linux-x86-64 git.4.3.1-135-g46adf34e8 commit: 46adf34e83e52d12c13181f69ebbac38c3f7a834 build: 2020-03-28__14:11:29\r\n\r\n### Description\r\nOn some binaries I tried, radare2 fails to find a match for the following regex\r\n```\r\n/e /[A-F0-9]{126,}/\r\n```\r\n\r\n### Expected behavior\r\nRadare2 should find the given regex in the binary using `/e <regex>` for different types of standard regex. Some work, some are not.\r\n\r\n### Actual behavior\r\n\r\nradare2 does not find results for the following search:\r\n\r\n```\r\n[0x00000000]> /e /[A-F0-9]{126,}/\r\nSearching 14 bytes in [0x0-0x115198]\r\nhits: 0\r\n```\r\n\r\nThis is while it does find it using `izz` and the external grep program:\r\n\r\n```\r\n[0x00000000]> izzq | egrep -e \"[A-F0-9]{126,}\"\r\n0xaa424 257 256 14BC88F8F4F502D88907B9085EBA3EA9E906C5D316067CEA69242F1D910E0CA19D1999C0ECD6BEC630764AD5DB96879D483F6C1B44E3F7A033DF51051660E4E5BB679D3C02F47B1E9940C904357AA976DD2C6ADA5998BD0817746FFB6C4D74948714DBC1A6A223900845135F7F03CD6A03631FA220A39F06B136700641193AD9\r\n0xaa628 129 128 3AF43028DD9C86509C88A0F0629E7DC838AA707E756EBD78416AA17E5B10C022EE943F62A6FCDF507CB24178D044739EB676CE869D5C719A40BC38DADE461B1B\r\n0xaa82c 256 255 3227966C285B8EADF1CF10E050F5F0B6AE6AF5E502401B20B8B3DD8AF8ACC3BF0051E13453045D6206CD2B5CBED9F4217F31C3EDB227242CF110585996D261F444D265301A31C743DC3AFAD5707912C2079F74429DDEFAA44A1072CAE2B2AC3263C49B414660B11CBC702BCBA80C56183C64F4B8C05EF8F2708140416AB450B\r\n0xaaa78 257 256 98380E602E3C9EE44D40BCB929338BA5512DAED928828F06C4C89F39271FC5BCD47A8374BBDB6CADF6B5C2FE03F6B1DF9434D5398C9746875F3874BD18B5ACC283CA2B36CA2815FCAACD3BEC86C69F68B0CF45096DA6C96074E4D86A84221E03846E73CD84A897208BB159211E967E71DE029363F46F26F672B1A6DD0594FD01\r\n0xaac7c 129 128 3EFC4E86A5C436F2EE2A190435CE359C8D2AE1C0068CDC9462A874A64CDE661833F80B8AB264C82ECBDE9A04A474A7B05FC27DC22D90ABF6CB64AB6091648ADF\r\n0xaae80 256 255 59BC2741FB1CD363EA9D380764C4C9910EDBD048DF4BC330DE711B79756331C1352235F1D3DFB1F4A37189BDE35E4D9F8007721C44AD80D64F0025FF180E149CB44C790D08E92D3B127E3ACE09071E04C9BD4826A159BD598C965B09E13C8957CBC79CBF8909AB9BCBBDD3550D8FCA45FF706CBF42A4DF784ADD20D6B100981\r\n```\r\n\r\n\r\n### Steps to reproduce the behavior \r\n\r\n**Beware: the file is a malware for linux**\r\n\r\n- open the attached binary in radare2\r\n```\r\n$ r2 -n e1fc936e870c0cd52e1098594901bf77ece68c7354b90ff2f20bd2e6e8602d55\r\n```\r\n\r\n- search for the regex\r\n```\r\n[0x00000000]> /e /[A-F0-9]{126,}/\r\n```\r\n\r\n- see the nothing found.\r\n\r\n- run izzq and use external grep to prove that the strings are there:\r\n```\r\n[0x00000000]> izzq | egrep -e \"[A-F0-9]{126,}\"\r\n```\r\n\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\n\r\n**Beware: the file is a malware for linux**\r\n[e1fc936e870c0cd52e1098594901bf77ece68c7354b90ff2f20bd2e6e8602d55.zip](https://github.com/radareorg/radare2/files/4408680/e1fc936e870c0cd52e1098594901bf77ece68c7354b90ff2f20bd2e6e8602d55.zip)\r\n","comments":[],"number":16377,"title":"Fails to search a binary for some regex"},{"body":"Please @thestr4ng3r add more details on this, preferibly you can describe it in C, as a PR","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYwNjAzMzcwNw==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"related: #12070","createdAt":"2020-03-30T14:28:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16366#issuecomment-606033707","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwOTQ2NDk4MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"related to one wip PR im doing and not going to happen in 4.4 (i want to make every RAnalBlock store an RRegArena, so we can swap it when doing recursive emulation and add a command to manually get/set the register values in a specific basic block (and add another command to propagate the values to the rest of bbs","createdAt":"2020-04-05T18:58:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16366#issuecomment-609464980","viewerDidAuthor":false}],"number":16366,"title":"Add stackframesize information in aoj"},{"body":"This is bad because we can't do introspection here and it's necessary to properly pretty-print data structures in memory\r\n\r\n```\r\npmb:core pancake$ r2 -\r\n -- Disassemble in intel syntax with 'e asm.syntax = intel'.\r\n[0x00000000]> \"td struct A { int a; };\"\r\n[0x00000000]> \"td struct B { struct A _a; };\"\r\n[0x00000000]> ts\r\nA\r\nB\r\n[0x00000000]> ts*\r\npf.A d a\r\npf.B ? (A)_a\r\n[0x00000000]> \"td struct C { struct A *_a; };\"\r\n[0x00000000]> ts*\r\npf.A d a\r\npf.B ? (A)_a\r\npf.C p _a\r\n[0x00000000]>\r\n```","comments":[],"number":16362,"title":"Struct pointers pf-ied as just pointers"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nThe `radiff2 -U` flag for unified diffing output doesn't output the name of the files. The current output looks like the following when files differ\r\n![Screenshot from 2020-03-29 13-24-01](https://user-images.githubusercontent.com/18501167/77844345-be179780-71c3-11ea-8ba3-4001ed37210f.png)\r\n\r\n**Describe the solution you'd like**\r\nThe output will look better if it looks like the following output from the unified output of `diff`\r\n![Screenshot from 2020-03-29 13-26-37](https://user-images.githubusercontent.com/18501167/77844373-f0c19000-71c3-11ea-966a-e066189a8b09.png)\r\n\r\nThe main logic is in the following part\r\nhttps://github.com/radareorg/radare2/blob/b8ae00a6de9288b8016f1a5d6298de31f77596e3/libr/util/diff.c#L136-L154\r\n\r\n**Additional information and notes**\r\nThe function `r_diff_buffers_unified` is directly called from three different locations\r\nhttps://github.com/radareorg/radare2/blob/b8ae00a6de9288b8016f1a5d6298de31f77596e3/libr/core/cmd_cmp.c#L376\r\nhttps://github.com/radareorg/radare2/blob/b8ae00a6de9288b8016f1a5d6298de31f77596e3/libr/main/radiff2.c#L1223-L1225\r\nhttps://github.com/radareorg/radare2/blob/b8ae00a6de9288b8016f1a5d6298de31f77596e3/libr/util/diff.c#L46-L47\r\n\r\nThe function `r_diff_buffers_to_string` is called from multiple other locations as well. So solving this issue neatly without any 'dirty hacks' which is not line with the standard followed will require refactoring in these locations. I guess this was the reason why it was not implemented in a way which gives the proposed output format.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDgzODI0MTQzNw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"@swoops would you like to have a look at this issue?","createdAt":"2021-05-11T10:35:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16344#issuecomment-838241437","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDgzOTQxOTAxMA==","author":{"login":"swoops"},"authorAssociation":"COLLABORATOR","body":"I suspect I can clean it up. I have a couple signature things I am working on, and have a cert I am going for soon, but I will put it on my todo list. Unless someone else beats me to it.","createdAt":"2021-05-12T04:11:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/16344#issuecomment-839419010","viewerDidAuthor":false}],"number":16344,"title":"Improve the output of radiff2 -U flag by having file names instead of hardcoded string"},{"body":"Hi, \r\nI am using radare2 connecting to a gdb stub provided by qemu to do some kernel debugging. \r\n\r\nI've just updated my radare2 version to the latest git version and it seems searching in raw memory has broken at some point during the last few months. Previously you just had to set search in raw memory and the kernel memory range and it would be happy.\r\n\r\nPerhaps there is a new configuration variable I need to set? Otherwise there has been a breaking change.\r\n\r\nThanks.\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Debian 10.3 X86_64\r\n| File format of the file you reverse (mandatory)      | Kernel Debugging via GDB Stub\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | `radare2 4.4.0-git 24191 @ linux-x86-64 git.4.3.1-132-g9f35d6201 commit: 9f35d620181a71c2cbd7cc68c775df0c3f835550 build: 2020-03-27__05:04:06`\r\n\r\n\r\n### Expected behavior\r\nSearching in raw kernel memory appears to be broken.\r\n### Actual behavior\r\n```\r\n[0xffffffff81029bf8]> e search.in=raw\r\n[0xffffffff81029bf8]> e search.from=0xffffffff80000000\r\n[0xffffffff81029bf8]> e search.to=0xffffffffffffffff\r\n[0xffffffff81029bf8]> e search.maxhits=1\r\n[0xffffffff81029bf8]> / Linux version\r\nWARNING from == to?\r\n```\r\nAnother case:\r\n```\r\n[0xffffffff81029bf8]> px 128@rip\r\n- offset -           0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0xffffffff81029bf8  c3f4 c30f 06c3 0f20 c0c3 0f22 c7c3 0f20  ....... ...\"...\r\n0xffffffff81029c08  d0c3 0f22 d7c3 0f20 d8c3 0f22 dfc3 0f20  ...\"... ...\"...\r\n0xffffffff81029c18  e0c3 0f20 e0c3 0f22 e7c3 440f 20c0 c344  ... ...\"..D. ..D\r\n0xffffffff81029c28  0f22 c7c3 0f09 c30f 01f9 4889 c648 89d0  .\"........H..H..\r\n0xffffffff81029c38  890f 48c1 e020 4809 f0c3 89f9 0f32 4531  ..H.. H......2E1\r\n0xffffffff81029c48  c089 c748 89d0 4489 0648 c1e0 2089 f948  ...H..D..H.. ..H\r\n0xffffffff81029c58  09c8 c389 f089 f90f 3031 c0c3 89f9 0f33  ........01.....3\r\n0xffffffff81029c68  89c7 4889 d048 c1e0 2089 f948 09c8 c38b  ..H..H.. ..H....\r\n[0xffffffff81029bf8]> e search.from=0xffffffff81029bf8\r\n[0xffffffff81029bf8]> e search.to=0xffffffff81029c68\r\n[0xffffffff81029bf8]> /x 890f48c1\r\nWARNING from == to?\r\n[0xffffffff81029bf8]>\r\n```\r\n\r\n### Steps to reproduce the behavior \r\n- Use qemu and debug any VM with \"-s\"\r\n- Wait until booted\r\n- Debug with radare2: `r2 -D gdb gdb://127.0.0.1:1234`\r\n- Execute:\r\n```\r\ne search.in=raw\r\ne search.from=0xffffffff80000000\r\ne search.to=0xffffffffffffffff\r\ne search.maxhits=1\r\n/ Linux\r\n```\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYwNTA5MzE1NA==","author":{"login":"lordneon"},"authorAssociation":"NONE","body":"It seems a change to `libr/io/p/io_gdb.c` is to blame this commit: https://github.com/radareorg/radare2/commit/e0b197766811db0952d243b2df36969d34cee36e#diff-dcd6451a43f58f805114d8bee0d4ebe1\r\n\r\nChanging `io->off = ST64_MAX;` back to `io->off = UT64_MAX;` fixes it:\r\n\r\n```\r\n[0xffffffff81029bf8]> e search.in=raw\r\n[0xffffffff81029bf8]> e search.from=0xffffffff80000000\r\n[0xffffffff81029bf8]> e search.to=0xffffffffffffffff\r\n[0xffffffff81029bf8]> e search.maxhits=1\r\n[0xffffffff81029bf8]> / Linux\r\nSearching 5 bytes in [0xffffffff80000000-0xffffffffffffffff]\r\n[# ]0xffffffff813e4050 hit0_0 .initcall_debugLinux version 2.6.32..\r\n```","createdAt":"2020-03-27T16:24:37Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16327#issuecomment-605093154","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxNDQ5OTQzNQ==","author":{"login":"lordneon"},"authorAssociation":"NONE","body":"I've just pulled the latest version to see if the fix has worked... Unfortunately it has not.\r\n\r\nNow you just get a blank response:\r\n```\r\n[0xffffffff81026142]> / Linux\r\n[0xffffffff81026142]>\r\n```\r\n\r\nVersion:\r\n`radare2 4.5.0-git 24541 @ linux-x86-64 git.4.4.0-13-gb4b301319\r\ncommit: b4b3013197e641dc7be8f8f52da9143832a7fdf6 build: 2020-04-06__22:01:08\r\n`\r\n","createdAt":"2020-04-16T08:33:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16327#issuecomment-614499435","viewerDidAuthor":false}],"number":16327,"title":"Searching in kernel raw memory"},{"body":"Reference tweet: https://twitter.com/defconisov3r/status/1242240569667174400?s=21","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYwNDg0ODEwMQ==","author":{"login":"0v3rflow1"},"authorAssociation":"NONE","body":"The main objective is to get all the resources of a file quickly using a simple command. In the first instance I have tried to recover them using rabin2 -x, but it did not work, investigating a little I managed to get to the rabin2 -O d/S/.rsrc file > resources.dump command. Which gives me a general dump of the entire resources section (Useful but not comfortable for the individual analysis of each of the resources).\r\n\r\nSeeing myself in this trouble I have chosen to use r2pipe as recommended by @trufae ...\r\n\r\nThis is what I have achieved so far (It is the first time I use r2pipe) :P\r\n```\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\nimport r2pipe\r\nimport sys\r\nimport re\r\n\r\npath=sys.argv[1];\r\nr2 = r2pipe.open(path);\r\nvaddrs=r2.cmd('iR~vaddr');\r\nvaddrs=re.sub(r'(vaddr|:| )','', vaddrs);\r\nvaddrs=re.split('\\s',vaddrs);\r\nl=len(vaddrs)-2;\r\nprint(\"El fichero contiene \"+str(l)+\" recursos\");\r\ni=0;\r\nj=1;\r\nwhile(l>i):\r\n        print(\"Distancia \"+str(j));\r\n        a=int(vaddrs[l],16);\r\n        b=int(vaddrs[l-1],16);\r\n        c=a-b;\r\n        print(hex(a)+\"-\"+hex(b)+\"=\"+str(c));\r\n        print(r2.cmd(\"px\"+str(c)+\"@\"+str(b)));\r\n        l-=1;\r\n        j+=1;\r\n```","createdAt":"2020-03-27T07:06:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16326#issuecomment-604848101","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwNTAxNTM2Mw==","author":{"login":"0v3rflow1"},"authorAssociation":"NONE","body":"An improved version of this little script would be this one... \r\nIt already saves the content of each resource in a \".bin\" file for further analysis individually :).\r\n\r\n```\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\nimport r2pipe\r\nimport sys\r\nimport re\r\n\r\npath=sys.argv[1];\r\nr2 = r2pipe.open(path);\r\n\r\nvaddrs=r2.cmd('iR~vaddr');\r\nvaddrs=re.sub(r'(vaddr|:| )','', vaddrs);\r\n\r\nsizes=r2.cmd('iR~size');\r\nsizes=re.sub(r'(size|:| )','', sizes);\r\n\r\nvaddrs=re.split('\\s',vaddrs);\r\nsizes=re.split('\\s',sizes);\r\n\r\nl=len(vaddrs)-1;\r\nprint(\"El fichero contiene \"+str(l)+\" recursos\");\r\ni=0;\r\nwhile(i<l):\r\n        size=r2.cmd(\"? \"+sizes[i]+\"~uint32\");\r\n        size=re.sub(r'(uint32|\\s)','', size);\r\n        a=vaddrs[i];\r\n        a=hex(int(vaddrs[i],16));\r\n        b=hex(int(vaddrs[i],16)+int(size));\r\n        print(\"\\nRecurso #\"+str(i+1)+\"\\n\"+\"=\"*15+\"\\n\");\r\n        print(\"Size: \"+size);\r\n        print(\"Inicia en: \"+a);\r\n        print(\"Termina en: \"+b);\r\n        strBin=r2.cmd(\"pcs \"+str(size)+\"@\"+str(a));\r\n        buf=eval(strBin);\r\n        f= open(\"res\"+str(i)+\".bin\",\"w+\");\r\n        f.write(buf);\r\n        f.close();\r\n        print(\"Fichero de salida: res\"+str(i)+\".bin\");\r\n        i+=1;\r\n```\r\n![imagen](https://user-images.githubusercontent.com/7275589/77763162-41888b80-7000-11ea-9679-f5b8eb3c25ba.png)\r\n","createdAt":"2020-03-27T13:58:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16326#issuecomment-605015363","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs4-mkG7","author":{"login":"0v3rflow1"},"authorAssociation":"NONE","body":"radare2 do not list the ordered resources based on your `VADDR` (or at least it does not for `1BC44EF75779E3CA1EFBC942B1E4A267D292591`) and I had not noticed.\r\n\r\nThis is a correction that considers this inconvenient and obtains the list of resources with a better precision. \r\n```\r\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\nimport r2pipe\r\nimport sys\r\nimport re\r\nimport codecs\r\n\r\npath=sys.argv[1];\r\nr2 = r2pipe.open(path);\r\n\r\nvaddrs=r2.cmd('iR~vaddr|sort');\r\nvaddrs=re.sub(r'(vaddr|:| )','', vaddrs);\r\nvaddrs=re.split('\\s',vaddrs);\r\n\r\nl=len(vaddrs)-1;\r\n\r\nprint(\"El fichero contiene \"+str(l)+\" recursos\");\r\n\r\ni=0;\r\nwhile(i<l):\r\n        name=r2.cmd('iR|grep -A 3 -B 3 '+vaddrs[i]+'|grep -Eio \"name.*\"');\r\n        name=re.sub(r'(name|:| )','',name).rstrip('\\n');\r\n        size=r2.cmd('iR|grep -A 3 -B 3 '+vaddrs[i]+'|grep -Eio \"size.*\"');\r\n        size=re.sub(r'(size|:| )','',size).rstrip('\\n');\r\n        a=vaddrs[i];\r\n        a=hex(int(a,16));\r\n        if(i!=(l-1)):\r\n          b=hex(int(vaddrs[i+1],16));\r\n          size=hex(int(b,16)-int(a,16));\r\n        else:\r\n            size=r2.cmd(\"? \"+size+\"~uint32\");\r\n            size=re.sub(r'(uint32|\\s)','', size);\r\n            b=hex(int(a,16)+int(size));\r\n\r\n        print(\"\\nRecurso #\"+str(i)+\"\\n\"+\"=\"*15+\"\\n\");\r\n        print(\"Name: \"+name);\r\n        print(\"Size: \"+size);\r\n        print(\"Inicia en: \"+a);\r\n        print(\"Termina en: \"+b);\r\n\r\n        strBin=r2.cmd(\"pcs \"+str(size)+\"@\"+str(a));\r\n        buf=eval(strBin.encode('utf8'));\r\n        f= codecs.open(\"res_\"+str(name)+\".bin\",\"w+\",\"utf-8\");\r\n        f.write(buf);\r\n        f.close();\r\n        print(\"Fichero de salida: res_\"+str(name)+\".bin\");\r\n        i+=1;\r\n```","createdAt":"2022-02-24T21:46:18Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16326#issuecomment-1050296763","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs4-qzH0","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"This seems like a good candidate for\n\nhttps://github.com/radareorg/r2pipe-codeshare","createdAt":"2022-02-26T00:57:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16326#issuecomment-1051406836","viewerDidAuthor":true}],"number":16326,"title":"Simplify the way pe resources are extracted"},{"body":"#15953 # Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Windows 10 x64\r\n| File format of the file you reverse (mandatory)      | PE\r\n| Architecture/bits of the file (mandatory)            | x86-32 bits\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.3.1 6 @ windows-x86-64 git.4.3.1\r\ncommit: 54ac837b5503f10f91e2069ac357791f7a3e635a build: Fri 03/06/2020__15:52:24.93\r\n\r\n### Expected behavior\r\nTo break at VirtualAlloc. If I try this in x64Dbg, it will break on VirtualAlloc.\r\n\r\n### Actual behavior\r\n(5948) Fatal exception (access violation) in thread 5936\r\n\r\n### Steps to reproduce the behavior \r\nHash of file to download from VirusTotal -> `47363b94cee907e2b8926c1be61150c7`\r\n```\r\nr.cmd('aaaa')\r\nr.cmd('doo')\r\nr.cmd('db main')\r\nr.cmd('doo')\r\nr.cmd('dc')\r\nr.cmd('dc')\r\nr.cmd('dc') \r\n\r\nr.cmd('db 0x00402dda') \r\nr.cmd('dc')\r\nr.cmd('ds 2')\r\n\r\nr.cmd('dsu 0x0302CA57') # another bug here, i can't continue execution here, i get some access violation, so i have to single step which takes FOREVER\r\n\r\n## Example:\r\n[0x0302c940]> db 0x0302CA57\r\n[0x0302c940]> dc\r\n(6864) Fatal exception (access violation) in thread 6092\r\n##\r\n\r\nr.cmd('ds 1') \r\n\r\nr.cmd('dsu 0x00191446') # same with here, but I can continue execution in other debuggers, but with radare2 im forced to single step to hit this breakpoint\r\n\r\nr.cmd('dr al=0xC0') # patch a debugger check\r\nr.cmd('ds 2')\r\n\r\nr.cmd('? [sym.imp.KERNEL32.dll_VirtualAlloc]')\r\n> hex: 0x752c66b0\r\n\r\nr.cmd('db [sym.imp.KERNEL32.dll_VirtualAlloc]')\r\nr.cmd('db')\r\n> 0x00401100 - 0x00401101 1 --x sw break enabled valid cmd=\"\" cond=\"\" name=\"main\" module=\"\"\r\n0x00402dda - 0x00402ddb 1 --x sw break enabled valid cmd=\"\" cond=\"\" name=\"0x00402dda\" module=\"\"\r\n0x752c66b0 - 0x752c66b1 1 --x sw break enabled valid cmd=\"\" cond=\"\" name=\"[sym.imp.KERNEL32.dll_VirtualAlloc]\" module=\"\"[0x00191446]>\r\n\r\nr.cmd('dc') # this is where it breaks\r\n> (5948) Fatal exception (access violation) in thread 5936\r\n```\r\n\r\nSometimes it will hit the breakpoint at VirtualAlloc, but if I try again to hit the breakpoint because in the malware you have to hit it twice I get:\r\n```\r\n[0x001923f2]> dc\r\n(5948) Fatal exception (access violation) in thread 5936\r\n```\r\n\r\nAgain, if you try all this steps on x64Dbg, you will successfully break at VirtualAlloc twice. Even if you get the access violation in x64Dbg, you can keep on continuing execution until it will reach VirtualAlloc a 2nd time. The ultimate goal is to break on VirtualAlloc twice, then be able to set a breakpoint at WriteProcessMemory, and hit that twice. But I have trouble hitting VirtualAlloc at all. If I do hit it once, then it will definitely give me an access violation after trying for the second time.\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY2NDQyMDQwOQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@GustavoLCR I see this is assigned to you. Do you think you'll be able to complete this for next release? I'm asking not to put pressure, just to try cleaning up a bit the issues that are assigned for the next milestone.","createdAt":"2020-07-27T14:11:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16302#issuecomment-664420409","viewerDidAuthor":false}],"number":16302,"title":"Issue Breaking on Win32 DLL Functions"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu x86 64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.4.0-git 24043 @ linux-x86-64 git.4.3.1-95-g537a811 commit: 537a811f0fa6d39303cf91d729ef7868ced56a43 build: 2020-03-22__12:19:36\r\n\r\n### Expected behavior\r\nWhen leaving Visual Mode, the cursor is expected to become visible (blinking like usual)\r\n\r\n### Actual behavior\r\nWhen entering Visual Mode when pressing space to view the function's flow (only happens when the function is detected properly and can be shown in the graph view).\r\nThen you want to quick visual mode (press q twice or space then q or whatever) the cursor is no longer visible. \r\nYou can still type normally (and move it around), just without seeing it.\r\nEven if you exit r2 and even if it happened in r2 on a remote machine using ssh and you exit ssh, the cursor remain invisible until you open the terminal again.\r\nI'm using i3wm if that matter but still using gnome-terminal\r\n\r\n### Steps to reproduce the behavior \r\n0. Open any executable\r\n1. `aaa` analyze it\r\n2. Find any function and seek to its beginning\r\n3. enter Visual Mode with `v`\r\n4. Press `space` to enter the graph view\r\n5. Leave Visual Mode (or even r2 altogether)\r\n6. You'll see the line in which you can type, but the cursor will remain invisible \r\n\r\n\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYwMzM2OTc3Ng==","author":{"login":"gur111"},"authorAssociation":"CONTRIBUTOR","body":"Created a PR fixing this issue. I believe I've added the function call in the right spot but can anyone verify please?\r\nhttps://github.com/radareorg/radare2/pull/16298","createdAt":"2020-03-24T16:59:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16296#issuecomment-603369776","viewerDidAuthor":false}],"number":16296,"title":"Cursor doesn't become visible after existing graph view of a function"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nI'm always frustrated when I open a binary with his own chart encoding because the chart-encoding is not processed instead of the ascii. I can not see the text in visual mode. The visual mode is only one example of the possible trouble we can meet. consdere commands such as `w`, `ps`, etc...\r\n\r\n**Describe the solution you'd like**\r\nI want to load configuration such as `e cfg.encoding = gameboy`.\r\nThe developpers of radare2 should be able to write their own plugin for custom chart encoding https://github.com/radareorg/radare2/issues/16272.\r\n\r\n**Describe alternatives you've considered**\r\nThere is already some works on add commands with custom encoding: https://github.com/radareorg/radare2/issues/6350, https://github.com/radareorg/radare2/issues/414 I am not really enthousiast on.\r\n\r\nI made an issue to make a pluging https://github.com/radareorg/radare2/issues/16272. I maintain that it is a good idea. I just mean it could be even better if we can configure radare2 to use these plugins.\r\n\r\n**Additional context**\r\n","comments":[],"number":16291,"title":"set configuration option to change ascii to custom chart encoding"},{"body":"Currently it looks like this:\r\n![image](https://user-images.githubusercontent.com/203261/77060963-700cd200-6a14-11ea-9ec4-f16d6acd49f9.png)\r\nIt would be awesome to provide the similar looking visual mode, but with the hotkeys for each columns.\r\n\r\nFor example on the screenshot you see the **7th column** with high entropy, which might be of our interest. But there is no indication how to get there. So in the visual alternative to `p==` command there are will be hotkeys to go for the each section, like we have the hotkeys in the visual disasm or graph modes.\r\n\r\nSee also:\r\n- [Add visual `p=` scrolling mode](https://github.com/radareorg/radare2/issues/14748) (similar problem, just more detailed - vertical mode, while this issue is for horizontal mode)\r\n- [Add a ruler to horizontal histogram output (e.g. `p==`)](https://github.com/radareorg/radare2/issues/14697)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYwMTE5NzAzOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Just press = in visual and set p== as command for the top part of the visual mode\n\nSent from my iPad\n\n> On 19 Mar 2020, at 12:07, Anton Kochkov <notifications@github.com> wrote:\n> \n> ï»¿\n> Currently it looks like this:\n> \n> It would be awesome to provide the similar looking visual mode, but with the hotkeys for each columns.\n> \n> For example on the screenshot you see the 7th column with high entropy, which might be of our interest. But there is no indication how to get there. So in the visual alternative to p== command there are will be hotkeys to go for the each section, like we have the hotkeys in the visual disasm or graph modes.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-03-19T14:04:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/16256#issuecomment-601197039","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMTU0ODY3Mw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@radare good suggestion, but it's different. What I meant is to have the whole-file overview of the `p==` mode, withe the ability to jump quickly to the corresponding place, and showing where we are on it, with some kind of cursor. Like a map of the file in Cutter, but with entropy. For visual mode it might be:\r\n- At the top of the view is the `p==` output for the whole file with cursor and navigation\r\n- At the left/right part of the view is the `p=` output for the current block (or on-screen content?)\r\n- And the hexdump or whatever you want in the main part of the screen.","createdAt":"2020-03-20T05:58:08Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16256#issuecomment-601548673","viewerDidAuthor":false}],"number":16256,"title":"Visual `p==` mode"},{"body":"- [ ] Rename in more general `dbg.alloc` or something more similar, we do a heap parsing not only for glibc - https://github.com/radareorg/radare2/issues/5390\r\n- [ ] Store the profiles like syscalls in SDB and load from there, not define on the compilation time\r\n\r\nSee also https://github.com/radareorg/radare2/issues/8185\r\n","comments":[],"number":16250,"title":"Set `dbg.glibc` profiles in runtime"},{"body":"\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu x86\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     |  radare2 4.2.0-git 23640 @ linux-x86-64 git.4.1.1-153-gd0a915458 commit: d0a915458abaa429926840c9fa41e2cd1fedfb1b build: 2020-01-22__11:37:15\r\n\r\n\r\n### Expected behavior\r\n`dmh` produce result in reasonable amout of time\r\n\r\n### Actual behavior\r\n`dmh` is slow even though there's only one chunk in the heap\r\n\r\n### Steps to reproduce the behavior \r\n```\r\n$ r2 -d test/bins/elf/simple_malloc_x86_64 \r\nProcess with PID 15946 started...\r\n= attach 15946 15946\r\nbin.baddr 0x55b6ab962000\r\nUsing 0x55b6ab962000\r\nasm.bits 64\r\nWarning: r_bin_file_hash: file exceeds bin.hashlimit\r\n -- This shell has been seized by the Internet's Police.\r\n[0x7f6041d2d100]> dcu main\r\nContinue until 0x55b6ab96270a using 1 bpsize\r\nhit breakpoint at: 55b6ab96270a\r\n[0x55b6ab96270a]> ?t dmh\r\n10.411503\r\n\r\n  Malloc chunk @ 0x55b6ad0e8290 [size: 0x11c10][allocated]\r\n  Top chunk @ 0x55b6ad0f9ea0 - [brk_start: 0x55b6ad0e8000, brk_end: 0x55b6ad109000]\r\n\r\n[0x55b6ab96270a]> \r\n```\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYwMDg2OTIzMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"didnt tried but i guess those 10s are spent parsing the libc library and loading all the symbol information and metadata into r2","createdAt":"2020-03-18T21:31:43Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16248#issuecomment-600869231","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjUzNjA5Mg==","author":{"login":"x0urc3"},"authorAssociation":"CONTRIBUTOR","body":"> didnt tried but i guess those 10s are spent parsing the libc library and loading all the symbol information and metadata into r2\r\n\r\nYour right. Brute force search to find main_arena. Any other method to find main_arena address in memory?\r\n\r\nhttps://github.com/radareorg/radare2/blob/14977a6828b47ee5a70e6c41c6d5dce873b78d48/libr/core/linux_heap_glibc.c#L343-L353","createdAt":"2020-03-23T11:29:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16248#issuecomment-602536092","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMzY0OTUwNw==","author":{"login":"meowmeowxw"},"authorAssociation":"CONTRIBUTOR","body":"pwndbg checks main_arena in the symbols of the libc: https://github.com/pwndbg/pwndbg/blob/dev/pwndbg/heap/ptmalloc.py#L73\r\n\r\nwhile gef compute the offset from __malloc_hook since main_arena and __malloc_hook are adjacient in memory: https://github.com/hugsy/gef/blob/dev/gef.py#L58\r\n\r\nIt shouldn't be too hard to implement one of the two methods, I can try in the following days","createdAt":"2020-04-14T19:55:26Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/radareorg/radare2/issues/16248#issuecomment-613649507","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMzY2MDY0Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Cool!\n\n> On 14 Apr 2020, at 21:55, meowmeowxw <notifications@github.com> wrote:\n> \n> ï»¿\n> pwndbg checks main_arena in the symbols of the libc: https://github.com/pwndbg/pwndbg/blob/dev/pwndbg/heap/ptmalloc.py#L73\n> \n> while gef compute the offset from __malloc_hook since main_arena and __malloc_hook are adjacient in memory: https://github.com/hugsy/gef/blob/dev/gef.py#L58\n> \n> It shouldn't be too hard to implement one of the two methods, I can try in the following days\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-04-14T20:20:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16248#issuecomment-613660643","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxNDYwODMyMg==","author":{"login":"meowmeowxw"},"authorAssociation":"CONTRIBUTOR","body":"Check new implementation in the updated comment.\r\n~~I've added the way to compute the main_arena using symbols:~~\r\n~~https://github.com/meowmeowxw/radare2/blob/cab8f2a92f5ee7de7a7fd00165f2f01c3ebff8dd/libr/core/linux_heap_glibc.c#L325~~\r\n\r\nHowever if I call `r_core_free()` to free the core of the libc, radare2 crashes a (segfault after executing `dmh`) because of the call to `r_core_task_scheduler_fini()` inside `r_core_fini()`, I don't know exactly how to bypass that call (without copying the code of `r_core_fini`) or why `r_core_task_scheduler_fini()` crashes the program. I would like  a little help on this part since this is my first issue :). \r\n\r\n```\r\n// this is with r_core_free (libc_core);\r\n[0x7ffff7fd3100]> db 0x55555555525a\r\n[0x7ffff7fd3100]> dc\r\nhit breakpoint at: 55555555525a\r\n[0x55555555525a]> dmht\r\n1833440\r\ntime with sym: 0.097662\r\nTcache main arena @ 0x7ffff7f5e9e0\r\nbin : 0, items : 7, fd :0x555555559350->0x555555559330->0x555555559310->0x5555555592f0->0x5555555592d0->0x5555555592b0->0x555555559290\r\n[0x55555555525a]> \r\n[1]    16741 segmentation fault (core dumped)  ./radare2 -d ~/Security/test/heap/tcache\r\n```\r\n\r\nI measured the time to executes the function `r_resolve_main_arena` and now it takes roughly 0.1 second on my machine, while the bruteforce takes around 1/1.5 seconds.\r\n\r\nThe weird thing is that if I call `dmh` before `dmht` then it takes lots of time (from 15 to 30 seconds), however the call to `r_resolve_main_arena` is still executed with 0.1 seconds (with my patch). However if call `dmht` or `dmhf` before `dmh`, then `dmh` is executed immediately, so the problem is not in `r_resolve_main_arena`.","createdAt":"2020-04-16T12:00:05Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16248#issuecomment-614608322","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0MDExMDA0MQ==","author":{"login":"meowmeowxw"},"authorAssociation":"CONTRIBUTOR","body":"UPDATE:\r\n\r\nI used a function to resolve main_arena from libc:\r\n\r\nhttps://github.com/meowmeowxw/radare2/blob/0c41fd4ebd2c33c637efad582db4185f3ae984a4/libr/core/linux_heap_glibc.c#L24\r\n\r\nwhich is called by: https://github.com/meowmeowxw/radare2/blob/0c41fd4ebd2c33c637efad582db4185f3ae984a4/libr/core/linux_heap_glibc.c#L363\r\n\r\nI created a [source test](https://github.com/meowmeowxw/radare2/blob/fast-dmh/test/tcache.c) and the binary of the [test](https://github.com/meowmeowxw/radare2/blob/fast-dmh/test/tcache).\r\n\r\nThen I created a [script](https://github.com/meowmeowxw/radare2/blob/fast-dmh/binr/radare2/script.rr2) to launch with radare2.\r\n\r\nFinally I compiled the program with [sys/sanitize.sh](https://github.com/meowmeowxw/radare2/blob/fast-dmh/sys/sanitize.sh)\r\n\r\nNow running:\r\n\r\n```\r\n$ export ASAN_OPTIONS=detect_odr_violation=0\r\n$ ./radare2 -i script.rr2 -d ../../test/tcache #./radare2 --> ./binr/radare2/radare2\r\n```\r\n\r\nyields to:\r\n\r\n```\r\n./radare2 -i script.rr2 -d ../../test/tcache\r\nProcess with PID 92463 started...\r\n= attach 92463 92463\r\nbin.baddr 0x00400000\r\nUsing 0x400000\r\nasm.bits 64\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Check for objc references\r\n[x] Check for vtables\r\n[TOFIX: aaft can't run in debugger mode.ions (aaft)\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Propagate noreturn information\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\nchunk: 0        address: 0x101c2a0      value: 0\r\nchunk: 1        address: 0x101c2c0      value: 1\r\nchunk: 2        address: 0x101c2e0      value: 2\r\nchunk: 3        address: 0x101c300      value: 3\r\nchunk: 4        address: 0x101c320      value: 4\r\nchunk: 5        address: 0x101c340      value: 5\r\nchunk: 6        address: 0x101c360      value: 6\r\nchunk: 7        address: 0x101c380      value: 7\r\nchunk: 8        address: 0x101c3a0      value: 8\r\nchunk: 9        address: 0x101c3c0      value: 9\r\nhit breakpoint at: 401221\r\nTRYING\r\nFOUND: 0x7f7ea69219e0\r\ntime with sym: 0.378699\r\nTcache main arena @ 0x7f7ea69219e0\r\nbin : 0, items : 7, fd :0x101c350->0x101c330->0x101c310->0x101c2f0->0x101c2d0->0x101c2b0->0x101c290                                                                                                                                                                                        \r\n -- I accidentally the kernel with radare2.\r\n[0x00401221]> =================================================================\r\n==92461==ERROR: AddressSanitizer: heap-use-after-free on address 0x7f0d83aa07c8 at pc 0x7f0d9647f995 bp 0x7ffc85f25390 sp 0x7ffc85f25380\r\nREAD of size 8 at 0x7f0d83aa07c8 thread T0\r\n    #0 0x7f0d9647f994 in r_core_task_self /home/meowmeow/Tools/radare2-dmh/libr/core/task.c:552\r\n    #1 0x7f0d95ee9c2e in r_core_sleep_begin /home/meowmeow/Tools/radare2-dmh/libr/core/core.c:2314\r\n    #2 0x7f0d9c67dbae in r_cons_sleep_begin /home/meowmeow/Tools/radare2-dmh/libr/cons/cons.c:419\r\n    #3 0x7f0d9c6b92c5 in r_cons_readchar /home/meowmeow/Tools/radare2-dmh/libr/cons/input.c:614\r\n    #4 0x7f0d9c69ce42 in r_line_readchar_utf8 /home/meowmeow/Tools/radare2-dmh/libr/cons/dietline.c:221\r\n    #5 0x7f0d9c6a9bd3 in r_line_readline_cb /home/meowmeow/Tools/radare2-dmh/libr/cons/dietline.c:1303\r\n    #6 0x7f0d9c6a5b44 in r_line_readline /home/meowmeow/Tools/radare2-dmh/libr/cons/dietline.c:836\r\n    #7 0x7f0d95ee4969 in r_core_fgets /home/meowmeow/Tools/radare2-dmh/libr/core/core.c:1953\r\n    #8 0x7f0d9c6b86ac in r_cons_fgets /home/meowmeow/Tools/radare2-dmh/libr/cons/input.c:365\r\n    #9 0x7f0d95ef815d in r_core_prompt /home/meowmeow/Tools/radare2-dmh/libr/core/core.c:2972\r\n    #10 0x7f0d95ef5fde in r_core_prompt_loop /home/meowmeow/Tools/radare2-dmh/libr/core/core.c:2839\r\n    #11 0x7f0d9d780759 in r_main_radare2 /home/meowmeow/Tools/radare2-dmh/libr/main/radare2.c:1365\r\n    #12 0x5566c7a0f713 in main /home/meowmeow/Tools/radare2-dmh/binr/radare2/radare2.c:96\r\n    #13 0x7f0d9cbd3001 in __libc_start_main (/usr/lib/libc.so.6+0x27001)\r\n    #14 0x5566c7a0f19d in _start (/home/meowmeow/Tools/radare2-dmh/binr/radare2/radare2+0x219d)\r\n\r\n0x7f0d83aa07c8 is located 397256 bytes inside of 397504-byte region [0x7f0d83a3f800,0x7f0d83aa08c0)\r\nfreed by thread T0 here:\r\n    #0 0x7f0d9e42e0e9 in __interceptor_free /build/gcc/src/gcc/libsanitizer/asan/asan_malloc_linux.cpp:123\r\n    #1 0x7f0d95ef5fbd in r_core_free /home/meowmeow/Tools/radare2-dmh/libr/core/core.c:2832\r\n    #2 0x7f0d95f4b211 in get_va_symbol_64 /home/meowmeow/Tools/radare2-dmh/libr/core/linux_heap_glibc.c:49\r\n    #3 0x7f0d95f53bb5 in r_resolve_main_arena_64 /home/meowmeow/Tools/radare2-dmh/libr/core/linux_heap_glibc.c:363\r\n    #4 0x7f0d95f6604f in cmd_dbg_map_heap_glibc_64 /home/meowmeow/Tools/radare2-dmh/libr/core/linux_heap_glibc.c:1583\r\n    #5 0x7f0d95f29bdb in r_debug_heap /home/meowmeow/Tools/radare2-dmh/libr/core/cmd_debug.c:1548\r\n    #6 0x7f0d95f2ec75 in cmd_debug_map /home/meowmeow/Tools/radare2-dmh/libr/core/cmd_debug.c:1919\r\n    #7 0x7f0d95f9b0d8 in cmd_debug /home/meowmeow/Tools/radare2-dmh/libr/core/cmd_debug.c:5130\r\n    #8 0x7f0d96345c6d in r_cmd_call /home/meowmeow/Tools/radare2-dmh/libr/core/cmd_api.c:291\r\n    #9 0x7f0d961ae2d8 in r_core_cmd_subst_i /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:3772\r\n    #10 0x7f0d9619eb5b in r_core_cmd_subst /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:2690\r\n    #11 0x7f0d9619f1df in r_core_cmd_subst /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:2722\r\n    #12 0x7f0d9619f1df in r_core_cmd_subst /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:2722\r\n    #13 0x7f0d9619f1df in r_core_cmd_subst /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:2722\r\n    #14 0x7f0d961e10c8 in run_cmd_depth /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:6669\r\n    #15 0x7f0d961e1fd4 in r_core_cmd /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:6745\r\n    #16 0x7f0d961e2186 in r_core_cmd_lines /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:6777\r\n    #17 0x7f0d961e2568 in r_core_cmd_file /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:6817\r\n    #18 0x7f0d96190317 in r_core_run_script /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:1166\r\n    #19 0x7f0d9d773d94 in run_commands /home/meowmeow/Tools/radare2-dmh/libr/main/radare2.c:249\r\n    #20 0x7f0d9d77fa82 in r_main_radare2 /home/meowmeow/Tools/radare2-dmh/libr/main/radare2.c:1312\r\n    #21 0x5566c7a0f713 in main /home/meowmeow/Tools/radare2-dmh/binr/radare2/radare2.c:96\r\n    #22 0x7f0d9cbd3001 in __libc_start_main (/usr/lib/libc.so.6+0x27001)\r\n\r\npreviously allocated by thread T0 here:\r\n    #0 0x7f0d9e42e639 in __interceptor_calloc /build/gcc/src/gcc/libsanitizer/asan/asan_malloc_linux.cpp:154\r\n    #1 0x7f0d95ed3ae7 in r_core_new /home/meowmeow/Tools/radare2-dmh/libr/core/core.c:827\r\n    #2 0x7f0d95f4ae24 in get_va_symbol_64 /home/meowmeow/Tools/radare2-dmh/libr/core/linux_heap_glibc.c:27\r\n    #3 0x7f0d95f53bb5 in r_resolve_main_arena_64 /home/meowmeow/Tools/radare2-dmh/libr/core/linux_heap_glibc.c:363\r\n    #4 0x7f0d95f6604f in cmd_dbg_map_heap_glibc_64 /home/meowmeow/Tools/radare2-dmh/libr/core/linux_heap_glibc.c:1583\r\n    #5 0x7f0d95f29bdb in r_debug_heap /home/meowmeow/Tools/radare2-dmh/libr/core/cmd_debug.c:1548\r\n    #6 0x7f0d95f2ec75 in cmd_debug_map /home/meowmeow/Tools/radare2-dmh/libr/core/cmd_debug.c:1919\r\n    #7 0x7f0d95f9b0d8 in cmd_debug /home/meowmeow/Tools/radare2-dmh/libr/core/cmd_debug.c:5130\r\n    #8 0x7f0d96345c6d in r_cmd_call /home/meowmeow/Tools/radare2-dmh/libr/core/cmd_api.c:291\r\n    #9 0x7f0d961ae2d8 in r_core_cmd_subst_i /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:3772\r\n    #10 0x7f0d9619eb5b in r_core_cmd_subst /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:2690\r\n    #11 0x7f0d9619f1df in r_core_cmd_subst /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:2722\r\n    #12 0x7f0d9619f1df in r_core_cmd_subst /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:2722\r\n    #13 0x7f0d9619f1df in r_core_cmd_subst /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:2722\r\n    #14 0x7f0d961e10c8 in run_cmd_depth /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:6669\r\n    #15 0x7f0d961e1fd4 in r_core_cmd /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:6745\r\n    #16 0x7f0d961e2186 in r_core_cmd_lines /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:6777\r\n    #17 0x7f0d961e2568 in r_core_cmd_file /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:6817\r\n    #18 0x7f0d96190317 in r_core_run_script /home/meowmeow/Tools/radare2-dmh/libr/core/cmd.c:1166\r\n    #19 0x7f0d9d773d94 in run_commands /home/meowmeow/Tools/radare2-dmh/libr/main/radare2.c:249\r\n    #20 0x7f0d9d77fa82 in r_main_radare2 /home/meowmeow/Tools/radare2-dmh/libr/main/radare2.c:1312\r\n    #21 0x5566c7a0f713 in main /home/meowmeow/Tools/radare2-dmh/binr/radare2/radare2.c:96\r\n    #22 0x7f0d9cbd3001 in __libc_start_main (/usr/lib/libc.so.6+0x27001)\r\n\r\nSUMMARY: AddressSanitizer: heap-use-after-free /home/meowmeow/Tools/radare2-dmh/libr/core/task.c:552 in r_core_task_self\r\nShadow bytes around the buggy address:\r\n  0x0fe23074c0a0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n  0x0fe23074c0b0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n  0x0fe23074c0c0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n  0x0fe23074c0d0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n  0x0fe23074c0e0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n=>0x0fe23074c0f0: fd fd fd fd fd fd fd fd fd[fd]fd fd fd fd fd fd\r\n  0x0fe23074c100: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n  0x0fe23074c110: fd fd fd fd fd fd fd fd fa fa fa fa fa fa fa fa\r\n  0x0fe23074c120: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x0fe23074c130: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x0fe23074c140: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\nShadow byte legend (one shadow byte represents 8 application bytes):\r\n  Addressable:           00\r\n  Partially addressable: 01 02 03 04 05 06 07 \r\n  Heap left redzone:       fa\r\n  Freed heap region:       fd\r\n  Stack left redzone:      f1\r\n  Stack mid redzone:       f2\r\n  Stack right redzone:     f3\r\n  Stack after return:      f5\r\n  Stack use after scope:   f8\r\n  Global redzone:          f9\r\n  Global init order:       f6\r\n  Poisoned by user:        f7\r\n  Container overflow:      fc\r\n  Array cookie:            ac\r\n  Intra object redzone:    bb\r\n  ASan internal:           fe\r\n  Left alloca redzone:     ca\r\n  Right alloca redzone:    cb\r\n  Shadow gap:              cc\r\n==92461==ABORTING\r\n\r\n\r\nchunk: 0        address: 0x101c7f0      value: 0\r\nchunk: 1        address: 0x101c3a0      value: 1\r\nchunk: 2        address: 0x101c380      value: 2\r\nchunk: 3        address: 0x101c3c0      value: 3\r\nchunk: 4        address: 0x101c2a0      value: 4\r\nchunk: 5        address: 0x101c2c0      value: 5\r\nchunk: 6        address: 0x101c2e0      value: 6\r\nchunk: 7        address: 0x101c300      value: 7\r\nchunk: 8        address: 0x101c320      value: 8\r\nchunk: 9        address: 0x101c340      value: 9\r\n```\r\n\r\nSo yeah that's something going on with the `task_scheduler`. I found two ugly solution to solve the issue:\r\n\r\n1. Never free the core of the libc, which is a bad practice\r\n2. Re-implement `r_core_fini()` without  the call to `r_core_task_scheduler_fini()`.\r\n\r\nAny idea on how to solve the problem in a proper way?","createdAt":"2020-06-06T19:53:04Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16248#issuecomment-640110041","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0MDQ4NjEyOQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"cc @thestr4ng3r ","createdAt":"2020-06-08T09:27:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16248#issuecomment-640486129","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0MDU0ODAzOA==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"Well yeah unfortunately that is the expected behavior as long as there is the global RCons singleton. Using multiple RCores in a single process will lead to these issues. Could you maybe use only RBin? Maybe it needs some refactoring to be independent enough to work there but it would be the more elegant solution.","createdAt":"2020-06-08T11:34:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/16248#issuecomment-640548038","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5dtyzx","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Can you retry? there are many statements in this issue that are no longer true and im just catching up with all the issues from the dramatic 2020 ","createdAt":"2023-06-01T15:36:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16248#issuecomment-1572285681","viewerDidAuthor":true}],"number":16248,"title":"Optimize `dmh` speed - it's very slow right now."},{"body":"[LoadLibrary](https://github.com/taviso/loadlibrary) is a library that allows native Linux programs to load and call functions from a Windows DLL. It might be useful to provide the ability to run/debug Windows programs in radare2 without installing Wine.\r\n \r\n```\r\n$ ./mpclient eicar.com\r\nmain(): Scanning eicar.com...\r\nEngineScanCallback(): Scanning input\r\nEngineScanCallback(): Threat Virus:DOS/EICAR_Test_File identified.\r\n```\r\nHow does it work?\r\n\r\nThe `peloader` directory contains a custom PE/COFF loader derived from `ndiswrapper`. The library will process the relocations and imports, then provide a `dlopen`-like API. The code supports debugging with gdb (including symbols), basic block coverage collection, and runtime hooking and patching.","comments":[],"number":16226,"title":"LoadLibrary engine support for debugging"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nCurrently radare2 prints both `pf` and built-in `pf` output in `r2 -nn` mode without any colors, even if they are enabled. It would be amazing to improve the readability to colorize them according to the current color options and colorscheme.\r\n\r\n![image](https://user-images.githubusercontent.com/203261/76514618-2449ae00-6493-11ea-8b1d-e3d365809199.png)\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU5OTE5ODg0OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"also i as thinking in having ad integrated into pf.. so we can tell pf to magically guess the type stored in one place by telescoping it and making some assumptions to see if the dword matches an allocated address, or printable chars to represent a string.\r\n\r\nalso what i find out is that ad is not detecting the strings when the first byte is nul.. basically \"\" strings in disassembly never appear.","createdAt":"2020-03-15T11:38:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16193#issuecomment-599198848","viewerDidAuthor":false}],"number":16193,"title":"Colorize the `pf` output (especially in `r2 -nn binary` case)"},{"body":"It's important for file format visualisation, something like in [Kaitai](https://kaitai.io) or Okteta.\r\nIt should allow these highlight blocks to overlap.\r\n\r\n![image](https://user-images.githubusercontent.com/203261/76513232-f19eb600-6490-11ea-99be-3cb4eeb7cd06.png)\r\n\r\n![image](https://user-images.githubusercontent.com/203261/76513270-03805900-6491-11ea-8785-d25347cc8799.png)\r\n\r\n\r\n\r\n","comments":[],"number":16191,"title":"Nested blocks hexdump color highlighting"},{"body":"Basically a simple wrapper for the `om=` like commands.\r\nSo the idea to have something like `ihex://` but in binary form, with a feature to skip or fill memory regions with zeroes or another patterns.\r\n\r\nThere is a similar format for Android images exist - Android Sparse image, see:\r\n- https://github.com/anestisb/android-simg2img/blob/master/simg_dump.py\r\n- https://github.com/anestisb/android-simg2img/blob/master/sparse_format.h\r\n\r\nI suggest to simplify it, add feature to export from radare2 with `om` commands, and help to reduce some big files from the regression testsuite.","comments":[],"number":16184,"title":"Sparse binaries format for tests - *.SBIN format"},{"body":"See full log here: https://travis-ci.com/github/radareorg/radare2/jobs/351993035\r\n```\r\n[XX] db/tools/r2 seek undo/redo  34\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298ZWgnqRVKol1d -\r\n\r\nwx 01; s 1; s-; s+; pb 8\r\n\r\n-00000000\r\n\r\n+00000000\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"00000000\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/r2 r2 -  51\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298BkqSsdRdyS8p -\r\n\r\ne file.lastpath\r\n\r\n+\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/r2 seek undo/redo  27\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298AwNMVdgwptYW -\r\n\r\nwx 01\r\n\r\ns 1\r\n\r\ns-\r\n\r\ns+\r\n\r\npb 8\r\n\r\n-00000000\r\n\r\n+00000000\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"00000000\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/r2 r2 -  31\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298fwuU1UediLxS -\r\n\r\ne file.path\r\n\r\n+\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/r2 no-nl-at-eof script  70\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192988aYKLvHncXrm -\r\n\r\n!radare2 -i scripts/no-nl-at-eof.r2 -NQ -\r\n\r\n--> stdout\r\n\r\n-1\r\n\r\n+1\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\n--> stderr\r\n\r\n+r_config_get: variable 'asm.arch' not found\r\n\r\n+anal.arch: cannot find 'unknown'\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+r_config_get: variable 'asm.arch' not found\r\n\r\n+anal.arch: cannot find 'unknown'\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\nEXPECT=\"1\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\nEXPECT_ERR=\"r_config_get: variable 'asm.arch' not found\r\n\r\nanal.arch: cannot find 'unknown'\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nr_config_get: variable 'asm.arch' not found\r\n\r\nanal.arch: cannot find 'unknown'\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\"\r\n\r\n[XX] db/tools/r2 radare2 -i -Q with missing script  73\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298D4EB3bSyVcW3 -\r\n\r\n# Should not hang\r\n\r\n!radare2 -i script/missing.r2 -NQ -\r\n\r\n--> stdout\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\n--> stderr\r\n\r\n+r_config_get: variable 'asm.arch' not found\r\n\r\n+anal.arch: cannot find 'unknown'\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+r_config_get: variable 'asm.arch' not found\r\n\r\n+anal.arch: cannot find 'unknown'\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n Script 'script/missing.r2' not found.\r\n\r\nEXPECT=\"WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\nEXPECT_ERR=\"r_config_get: variable 'asm.arch' not found\r\n\r\nanal.arch: cannot find 'unknown'\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nr_config_get: variable 'asm.arch' not found\r\n\r\nanal.arch: cannot find 'unknown'\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nScript 'script/missing.r2' not found.\"\r\n\r\n[**]                    db/tools/r2   OK    1 BR    5 XX    6 FX    0\r\n\r\n[XX] db/tools/r2agent r2agent -v  33\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298Ycg6JX3ey2ey -\r\n\r\n!r2agent -v | grep -c build\r\n\r\n-1\r\n\r\n+1\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"1\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[**]               db/tools/r2agent   OK    1 BR    5 XX    7 FX    0\r\n\r\n[XX] db/tools/r2r Only EXPECT_ERR<<EOF  24\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298slRlTivjeu0G -\r\n\r\npf?cat_sat_on_keyboard\r\n\r\npf?CAT_SAT_ON_KEYBOARD\r\n\r\n--> stderr\r\n\r\n+r_config_get: variable 'asm.arch' not found\r\n\r\n+anal.arch: cannot find 'unknown'\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n Struct cat_sat_on_keyboard is not defined\r\n\r\n Struct CAT_SAT_ON_KEYBOARD is not defined\r\n\r\nEXPECT_ERR=\"r_config_get: variable 'asm.arch' not found\r\n\r\nanal.arch: cannot find 'unknown'\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nStruct cat_sat_on_keyboard is not defined\r\n\r\nStruct CAT_SAT_ON_KEYBOARD is not defined\"\r\n\r\n[XX] db/tools/r2r EXPECT<<EOF empty and EXPECT_ERR<<EOF non-empty  23\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298bfH7U08cVG8u -\r\n\r\npf?cat_sat_on_keyboard\r\n\r\npf?CAT_SAT_ON_KEYBOARD\r\n\r\n--> stdout\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\n--> stderr\r\n\r\n+r_config_get: variable 'asm.arch' not found\r\n\r\n+anal.arch: cannot find 'unknown'\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n Struct cat_sat_on_keyboard is not defined\r\n\r\n Struct CAT_SAT_ON_KEYBOARD is not defined\r\n\r\nEXPECT=\"WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\nEXPECT_ERR=\"r_config_get: variable 'asm.arch' not found\r\n\r\nanal.arch: cannot find 'unknown'\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nStruct cat_sat_on_keyboard is not defined\r\n\r\nStruct CAT_SAT_ON_KEYBOARD is not defined\"\r\n\r\n[**]                   db/tools/r2r   OK    1 BR    6 XX    9 FX    0\r\n\r\n[XX] db/tools/rabin2 rabin2 -K md5 -S file  79\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192982TMGqD0JVoW4 ../bins/pe/a.exe\r\n\r\n!rabin2 -K md5 -S ${R2_FILE}\r\n\r\n-[Sections]\r\n\r\n-\r\n\r\n-nth paddr        size vaddr        vsize perm md5                              name\r\n\r\n------------------------------------------------------------------------------------\r\n\r\n-0   0x00000400  0xa00 0x00401000  0x1000 -r-x 3d6a5b8dc5e41b09659638ad5735e5b5 .text\r\n\r\n-1   0x00000e00  0x200 0x00402000  0x1000 -rw- b3c542ba67f2d1a949fa1a25ce22f7e3 .data\r\n\r\n-2   0x00001000  0x200 0x00403000  0x1000 -r-- c9a877a4e945b087b8323830442c88d6 .rdata\r\n\r\n-3   0x00000000    0x0 0x00404000  0x1000 -rw- d41d8cd98f00b204e9800998ecf8427e .bss\r\n\r\n-4   0x00001200  0x400 0x00405000  0x1000 -rw- 963212dc58a74f32e0f6ffce84dcf7ea .idata\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -s file pe  83\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298i5SMXIdERikf ../bins/pe/a.exe\r\n\r\n!rabin2 -s ${R2_FILE}|wc -l|awk \"{print \\$1}\"\r\n\r\n-24\r\n\r\n+1\r\n\r\nEXPECT='1'\r\n\r\n[XX] db/tools/rabin2 rabin -k file  122\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298QEPrph41Llq6 ../bins/elf/analysis/hello-linux-x86_64\r\n\r\n!rabin2 -k ${R2_FILE}\r\n\r\n--> stderr\r\n\r\n+r_config_get: variable 'asm.arch' not found\r\n\r\n+anal.arch: cannot find 'unknown'\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+r_config_get: variable 'asm.arch' not found\r\n\r\n+anal.arch: cannot find 'unknown'\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n Missing file.\r\n\r\nEXPECT_ERR=\"r_config_get: variable 'asm.arch' not found\r\n\r\nanal.arch: cannot find 'unknown'\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\nr_config_get: variable 'asm.arch' not found\r\n\r\nanal.arch: cannot find 'unknown'\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\nMissing file.\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -zzz pe  72\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298F56OqYhiZ29g ../bins/pe/ioli/w32/crackme0x00.exe\r\n\r\n!rabin2 -zzz ${R2_FILE} | grep \"Password:\"\r\n\r\n-086 0x00002619 0x00404019  10  11 (.rdata) ascii Password: \r\n\r\nEXPECT=''\r\n\r\n[XX] db/tools/rabin2 rabin2 -z pe  110\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298vvEqHHmZ3Er7 ../bins/pe/a.exe\r\n\r\n!rabin2 -z ${R2_FILE}|wc -l|awk \"{print \\$1}\"\r\n\r\n-7\r\n\r\n+1\r\n\r\nEXPECT='1'\r\n\r\n[XX] db/tools/rabin2 rabin2 -zzq pe  77\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298XmtBQSLntiJo ../bins/pe/ioli/w32/crackme0x00.exe\r\n\r\n!rabin2 -zzq ${R2_FILE} | grep \"Password:\"\r\n\r\n-0x404019 11 10 Password: \r\n\r\nEXPECT=''\r\n\r\n[XX] db/tools/rabin2 rabin2 -zz pe  120\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-1929842zzo3NdgBMx ../bins/pe/ioli/w32/crackme0x00.exe\r\n\r\n!rabin2 -zz ${R2_FILE} | grep \"Password:\"\r\n\r\n-86  0x00002619 0x00404019 10  11   .rdata  ascii   Password: \r\n\r\nEXPECT=''\r\n\r\n[XX] db/tools/rabin2 rabin2 -zzzq pe  97\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298e75RXP4IIIDo ../bins/pe/ioli/w32/crackme0x00.exe\r\n\r\n!rabin2 -zzzq ${R2_FILE} | grep \"Password:\"\r\n\r\n-0x00404019 Password: \r\n\r\nEXPECT=''\r\n\r\n[XX] db/tools/rabin2 rabin2 -zzqq pe  79\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298rHELhV3P2jk5 ../bins/pe/ioli/w32/crackme0x00.exe\r\n\r\n!rabin2 -zzqq ${R2_FILE} | grep \"Password:\"\r\n\r\n-Password: \r\n\r\nEXPECT=''\r\n\r\n[XX] db/tools/rabin2 rabin2 -zzzqq pe  114\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192980PduzGnV87jU ../bins/pe/ioli/w32/crackme0x00.exe\r\n\r\n!rabin2 -zzzqq ${R2_FILE} | grep \"Password:\"\r\n\r\n-Password: \r\n\r\nEXPECT=''\r\n\r\n[XX] db/tools/rabin2 rabin2 -G 0x1000 -e fatmach0  94\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298p4Mzz60oDe5s ../bins/mach0/fatmach0-3true\r\n\r\n!rabin2 -G 0x1000 -e ${R2_FILE}\r\n\r\n [Entrypoints]\r\n\r\n vaddr=0x100000ef8 paddr=0x00001ef8 haddr=0x00000570 type=program\r\n\r\n-1 entrypoints\r\n\r\n+1 entrypoints\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"[Entrypoints]\r\n\r\nvaddr=0x100000ef8 paddr=0x00001ef8 haddr=0x00000570 type=program\r\n\r\n1 entrypoints\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -G 0x1300 -rs fatmach0  117\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298EpIdqlhPgPnw ../bins/mach0/fatmach0-3true\r\n\r\n!rabin2 -G 0x1300 -rs ${R2_FILE}|wc -l|awk \"{print \\$1}\"\r\n\r\n-1\r\n\r\n+2\r\n\r\nEXPECT='2'\r\n\r\n[XX] db/tools/rabin2 rabin2 -G 0x5000 -e fatmach0  95\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192989qtohS3nYSSn ../bins/mach0/fatmach0-3true\r\n\r\n!rabin2 -G 0x5000 -e ${R2_FILE}\r\n\r\n [Entrypoints]\r\n\r\n vaddr=0x00001f44 paddr=0x00005f44 haddr=0x00000420 type=program\r\n\r\n-1 entrypoints\r\n\r\n+1 entrypoints\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"[Entrypoints]\r\n\r\nvaddr=0x00001f44 paddr=0x00005f44 haddr=0x00000420 type=program\r\n\r\n1 entrypoints\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -B 0x2000000 -G 0x1000 -e fatmach0  94\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298gLvOC43cOyKw ../bins/mach0/fatmach0-3true\r\n\r\n!rabin2 -B 0x2000000 -G 0x1000 -e ${R2_FILE}\r\n\r\n [Entrypoints]\r\n\r\n vaddr=0x02000ef8 paddr=0x00001ef8 haddr=0x00000570 type=program\r\n\r\n-1 entrypoints\r\n\r\n+1 entrypoints\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"[Entrypoints]\r\n\r\nvaddr=0x02000ef8 paddr=0x00001ef8 haddr=0x00000570 type=program\r\n\r\n1 entrypoints\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -a x86 -b 32 -i fatmach0  102\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298hnZM3P8Qq3g1 ../bins/mach0/fatmach0-3true\r\n\r\n!rabin2 -a x86 -b 32 -i ${R2_FILE}\r\n\r\n [Imports]\r\n\r\n nth vaddr      bind type lib name\r\n\r\n ---------------------------------\r\n\r\n 0   0x00001f94 NONE FUNC     exit\r\n\r\n 1   0x00000000 NONE FUNC     dyld_stub_binder\r\n\r\n+\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"[Imports]\r\n\r\nnth vaddr      bind type lib name\r\n\r\n---------------------------------\r\n\r\n0   0x00001f94 NONE FUNC     exit\r\n\r\n1   0x00000000 NONE FUNC     dyld_stub_binder\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -G 0x5000 -i fatmach0  134\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298X5fE46NrB3b5 ../bins/mach0/fatmach0-3true\r\n\r\n!rabin2 -G 0x5000 -i ${R2_FILE}\r\n\r\n [Imports]\r\n\r\n nth vaddr      bind type lib name\r\n\r\n ---------------------------------\r\n\r\n 0   0x00001f94 NONE FUNC     exit\r\n\r\n 1   0x00000000 NONE FUNC     dyld_stub_binder\r\n\r\n+\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"[Imports]\r\n\r\nnth vaddr      bind type lib name\r\n\r\n---------------------------------\r\n\r\n0   0x00001f94 NONE FUNC     exit\r\n\r\n1   0x00000000 NONE FUNC     dyld_stub_binder\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -qOp//8 on PE32+  130\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298nlJCdioGoLVy ../bins/pe/normal64.exe\r\n\r\nmkdir .tmp\r\n\r\nrm .tmp/rabin2testpe2.exe\r\n\r\n!rabin2 -qOp//8 -o.tmp/rabin2testpe2.exe ${R2_FILE}\r\n\r\n!rabin2 -S .tmp/rabin2testpe2.exe\r\n\r\nrm .tmp/rabin2testpe2.exe\r\n\r\n-wx 10000000 @ 0x16c\r\n\r\n-[Sections]\r\n\r\n-\r\n\r\n-nth paddr        size vaddr        vsize perm name\r\n\r\n---------------------------------------------------\r\n\r\n-0   0x00000200  0x200 0x00401000  0x1000 s--- sect_0\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -qOp/.data/rwx on PE32  179\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298msC6AFriEirt ../bins/pe/test.exe\r\n\r\nmkdir .tmp\r\n\r\nrm .tmp/rabin2testpe1.exe\r\n\r\n!rabin2 -qOp/.data/rwx -o.tmp/rabin2testpe1.exe ${R2_FILE}\r\n\r\n!rabin2 -S .tmp/rabin2testpe1.exe\r\n\r\nrm .tmp/rabin2testpe1.exe\r\n\r\n-wx e0000040 @ 0x244\r\n\r\n-[Sections]\r\n\r\n-\r\n\r\n-nth paddr         size vaddr        vsize perm name\r\n\r\n----------------------------------------------------\r\n\r\n-0   0x00000400  0x8a00 0x00401000  0x9000 -r-x .text\r\n\r\n-1   0x00008e00  0x2400 0x0040a000  0x3000 -r-- .rdata\r\n\r\n-2   0x0000b200  0x1000 0x0040d000  0x3000 -rwx .data\r\n\r\n-3   0x0000c200   0x200 0x00410000  0x1000 -r-- .rsrc\r\n\r\n-4   0x0000c400   0xe00 0x00411000  0x1000 -r-- .reloc\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -V  93\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298qRb6nLyZXZIe ../bins/pe/version_cust.exe\r\n\r\n!rabin2 -V ${R2_FILE}\r\n\r\n-=== VS_VERSIONINFO ===\r\n\r\n-\r\n\r\n-# VS_FIXEDFILEINFO\r\n\r\n-\r\n\r\n-  Signature: 0xfeef04bd\r\n\r\n-  StrucVersion: 0x0\r\n\r\n-  FileVersion: 0.0.0.0\r\n\r\n-  ProductVersion: 0.0.0.0\r\n\r\n-  FileFlagsMask: 0x0\r\n\r\n-  FileFlags: 0x0\r\n\r\n-  FileOS: 0x0\r\n\r\n-  FileType: 0x0\r\n\r\n-  FileSubType: 0x0\r\n\r\n-\r\n\r\n-# StringTable\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -D Unsupported  217\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298I6ElCQFpMPTz ../bins/elf/libc.so.0\r\n\r\n!rabin2 -D XXX LOLILOL\r\n\r\n--> stderr\r\n\r\n+r_config_get: variable 'asm.arch' not found\r\n\r\n+anal.arch: cannot find 'unknown'\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+r_config_get: variable 'asm.arch' not found\r\n\r\n+anal.arch: cannot find 'unknown'\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n Unsupported demangler\r\n\r\nEXPECT_ERR=\"r_config_get: variable 'asm.arch' not found\r\n\r\nanal.arch: cannot find 'unknown'\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\nr_config_get: variable 'asm.arch' not found\r\n\r\nanal.arch: cannot find 'unknown'\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\nUnsupported demangler\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -O bad op  92\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298Z0aE4imJmEQT -\r\n\r\n!rabin2 -O bad_op -\r\n\r\n--> stderr\r\n\r\n+r_config_get: variable 'asm.arch' not found\r\n\r\n+anal.arch: cannot find 'unknown'\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+r_config_get: variable 'asm.arch' not found\r\n\r\n+anal.arch: cannot find 'unknown'\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n Unknown operation. use -O help\r\n\r\nEXPECT_ERR=\"r_config_get: variable 'asm.arch' not found\r\n\r\nanal.arch: cannot find 'unknown'\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nr_config_get: variable 'asm.arch' not found\r\n\r\nanal.arch: cannot find 'unknown'\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nUnknown operation. use -O help\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -v  86\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298fORGWq6ExfgO -\r\n\r\n!rabin2 -v | grep -c build\r\n\r\n-1\r\n\r\n+1\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"1\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -L  65\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298LVF9sNFOTgOa -\r\n\r\n!rabin2 -L | grep -c any\r\n\r\n-1\r\n\r\n+1\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"1\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -Lq  85\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192989Tfka4LxTQ8x -\r\n\r\n!rabin2 -Lq | grep -c any\r\n\r\n-1\r\n\r\n+1\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"1\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -E  66\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298O5obIOmQsB4b ../bins/pe/dll.dll\r\n\r\n!rabin2 -E ${R2_FILE}\r\n\r\n-[Exports]\r\n\r\n-\r\n\r\n-nth paddr       vaddr      bind   type size lib     name\r\n\r\n---------------------------------------------------------\r\n\r\n-0    0x00000224 0x01001024 GLOBAL FUNC 0    dll.dll export\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -Lj  84\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192985knXpxpkQqz1 -\r\n\r\n!rabin2 -Lj | grep -c any\r\n\r\n-1\r\n\r\n+1\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"1\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -Lj any  92\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298P9QEhyNGTz1O -\r\n\r\n!rabin2 -Lj Dummy | grep -c Dummy\r\n\r\n-1\r\n\r\n+1\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"1\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -U  87\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298j6Cx0jfgYlpt ../bins/pe/resource.exe\r\n\r\n!rabin2 -U ${R2_FILE} | grep -c Resource\r\n\r\n-1\r\n\r\n+0\r\n\r\nEXPECT='0'\r\n\r\n[XX] db/tools/rabin2 rabin2 -R  79\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298ZQ9CnGG5Pioo ../bins/pe/base.exe\r\n\r\n!rabin2 -R ${R2_FILE} | grep -c msvcrt.dll___set_app_type\r\n\r\n-1\r\n\r\n+0\r\n\r\nEXPECT='0'\r\n\r\n[XX] db/tools/rabin2 rabin2 -l  93\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298gTf8tUV089HM ../bins/pe/ioli/w32/crackme0x00.exe\r\n\r\n!rabin2 -l ${R2_FILE} | grep -c kernel32.dll\r\n\r\n-1\r\n\r\n+0\r\n\r\nEXPECT='0'\r\n\r\n[XX] db/tools/rabin2 rabin2 -Z  84\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298h2Q1SaKvX8u3 ../bins/pe/base.exe\r\n\r\n!rabin2 -Z ${R2_FILE}\r\n\r\n-216569\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rabin2 rabin2 -H  66\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298HT5swBUL3y1e ../bins/pe/base.exe\r\n\r\n!rabin2 -H ${R2_FILE} | grep -c \"Machine : 0x14c\"\r\n\r\n-1\r\n\r\n+0\r\n\r\nEXPECT='0'\r\n\r\n[XX] db/tools/rabin2 rabin2 -P  662\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298YMU0CWI3baN3 ../bins/pdb/Project1.pdb\r\n\r\n!rabin2 -P ${R2_FILE} | grep -c R2_TEST_UNION\r\n\r\n-1\r\n\r\n+0\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"0\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[**]                db/tools/rabin2   OK   31 BR   10 XX   42 FX    0\r\n\r\n[XX] db/tools/radiff2 radiff2 -v~commit?\"  51\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298yf7qN3pl7DC6 -\r\n\r\n!!radiff2 -v~commit?\r\n\r\n-1\r\n\r\n+1\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"1\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/radiff2 radiff2 -c  48\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298n8C9ZoQbB004 -\r\n\r\n!radiff2 -c ../bins/other/radiff2/radiff2_c_1 ../bins/other/radiff2/radiff2_c_2\r\n\r\n-1\r\n\r\n+1\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"1\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/radiff2 radiff2 -h~Usage?\"  82\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298UIV7TqQZCYeZ -\r\n\r\n!!radiff2 -h~Usage?\r\n\r\n-1\r\n\r\n+1\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"1\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/radiff2 radiff2 unified string comparison  97\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298DSvXqBQbaPui -\r\n\r\n!!radiff2 -quz ../bins/elf/elf_one_symbol_shdr ../bins/elf/elf_one_symbol_shdr1\r\n\r\n+WARNING: r_config_node_desc: assertion 'node' failed (line 479)\r\n\r\n+WARNING: r_config_node_desc: assertion 'node' failed (line 479)\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\n -0x00000000:48656c6c \"Hello world!\\n\"\r\n\r\n-+0x00000000:41414141\r\n\r\n++0x00000000:41414141\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=%WARNING: r_config_node_desc: assertion 'node' failed (line 479)\r\n\r\nWARNING: r_config_node_desc: assertion 'node' failed (line 479)\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\n-0x00000000:48656c6c \"Hello world!\\n\"\r\n\r\n+0x00000000:41414141\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)%\r\n\r\n[XX] db/tools/radiff2 radiff2 -a -O x86  102\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192989wuSV5i3Js6V -\r\n\r\n!radiff2 -a x86 -O ../bins/other/radiff2/radiff2_c_1 ../bins/other/radiff2/radiff2_c_2\r\n\r\n-0x00000000 91 => 90 0x00000000\r\n\r\n+0x00000000 91 => 90 0x00000000\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"0x00000000 91 => 90 0x00000000\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/radiff2 radiff2 string comparison  123\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-1929894fQVqnsXd7M -\r\n\r\n!!radiff2 -z ../bins/elf/elf_one_symbol_shdr ../bins/elf/elf_one_symbol_shdr1\r\n\r\n-0x00000000 48656c6c => 41414141 0x00000000\r\n\r\n+WARNING: r_config_node_desc: assertion 'node' failed (line 479)\r\n\r\n+WARNING: r_config_node_desc: assertion 'node' failed (line 479)\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\n+0x00000000 48656c6c => 41414141 0x00000000\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"WARNING: r_config_node_desc: assertion 'node' failed (line 479)\r\n\r\nWARNING: r_config_node_desc: assertion 'node' failed (line 479)\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\n0x00000000 48656c6c => 41414141 0x00000000\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/radiff2 radiff2 -g  184\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298D9BVsNAMQWwi -\r\n\r\n!!radiff2 -g main -m d ../bins/other/radiff2/false ../bins/other/radiff2/true~digrap\r\n\r\n-digraph code {\r\n\r\n+digraph code {\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"digraph code {\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/radiff2 radiff2 -B (GDIFF support) #1  75\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298ZrLmHwMkx3pX -\r\n\r\n!!radiff2 -B ../bins/other/radiff2/radiff2_c_1 ../bins/other/radiff2/radiff2_c_2 | rax2 -S\r\n\r\n-d1ffd1ff04019000\r\n\r\n+d1ffd1ff04019000\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"d1ffd1ff04019000\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/radiff2 radiff2 -AC (mach0 fat files)  168\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298uID001R9L27p -\r\n\r\n!!radiff2 -AC ../bins/other/radiff2/hellocxx-osx-fat-intel_1 ../bins/other/radiff2/hellocxx-osx-fat-intel_2~?(1.000000)\r\n\r\n-17\r\n\r\n+0\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"0\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/radiff2 radiff2 -AC (elf files)  849\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192981f4vBl98J30f -\r\n\r\n!!radiff2 -AC ../bins/other/radiff2/true ../bins/other/radiff2/false~?(1.000000)\r\n\r\n-54\r\n\r\n+54\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"54\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[**]               db/tools/radiff2   OK   31 BR   11 XX   52 FX    0\r\n\r\n[XX] db/tools/rafind2 rafind2 -r -X -s  63\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298CO9hcLVV5IOy -\r\n\r\n!rafind2 -r -X -s 250382 ../bins/elf/ioli/crackme0x00\r\n\r\n-f hit0_0 0x0000058f ; ../bins/elf/ioli/crackme0x00\r\n\r\n+f hit0_0 0x0000058f ; ../bins/elf/ioli/crackme0x00\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"f hit0_0 0x0000058f ; ../bins/elf/ioli/crackme0x00\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rafind2 rafind2 -X -s  66\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298tPbP0W7ZixuB -\r\n\r\n!rafind2 -X -s 250382 ../bins/elf/ioli/crackme0x00\r\n\r\n 0x58f\r\n\r\n - offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n\r\n 0x0000058f  3235 3033 3832 0049 6e76 616c 6964 2050  250382.Invalid P\r\n\r\n 0x0000059f  6173 7377 6f72 6421 0a00 5061 7373 776f  assword!..Passwo\r\n\r\n 0x000005af  7264 204f 4b20 3a29 0a00 0000 0000 0000  rd OK :)........\r\n\r\n 0x000005bf  0000 0000 0000 0000 0000 0000 0000 0000  ................\r\n\r\n-0x000005cf  0000 0000 0000 0000 0000 0000 0000       ..............\r\n\r\n+0x000005cf  0000 0000 0000 0000 0000 0000 0000       ..............\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"0x58f\r\n\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n\r\n0x0000058f  3235 3033 3832 0049 6e76 616c 6964 2050  250382.Invalid P\r\n\r\n0x0000059f  6173 7377 6f72 6421 0a00 5061 7373 776f  assword!..Passwo\r\n\r\n0x000005af  7264 204f 4b20 3a29 0a00 0000 0000 0000  rd OK :)........\r\n\r\n0x000005bf  0000 0000 0000 0000 0000 0000 0000 0000  ................\r\n\r\n0x000005cf  0000 0000 0000 0000 0000 0000 0000       ..............\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rafind2 rafind2 -r -X -x with bin mask  74\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298CCjUpTcLGXQY -\r\n\r\n!rafind2 -r -X -x caf3bab3 -M fff0fff0 ../bins/java/Hello.class\r\n\r\n-f hit0_0 0x00000000 ; ../bins/java/Hello.class\r\n\r\n+f hit0_0 0x00000000 ; ../bins/java/Hello.class\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"f hit0_0 0x00000000 ; ../bins/java/Hello.class\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rafind2 rafind2 -r -X -x  79\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192982p9mUSndIGZg -\r\n\r\n!rafind2 -r -X -x 323530333832 ../bins/elf/ioli/crackme0x00\r\n\r\n-f hit0_0 0x0000058f ; ../bins/elf/ioli/crackme0x00\r\n\r\n+f hit0_0 0x0000058f ; ../bins/elf/ioli/crackme0x00\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"f hit0_0 0x0000058f ; ../bins/elf/ioli/crackme0x00\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rafind2 rafind2 -f 0x00010000 -t 0x00020000 -X -s  61\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298g4QMEk2H6Ud0 -\r\n\r\n!rafind2 -f 0x00010000 -t 0x00020000 -r -X -s 250382 ../bins/elf/ioli/crackme0x00\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rafind2 rafind2 -h  99\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298qwNOpkptOw4e -\r\n\r\n!rafind2 -h | grep -c Usage\r\n\r\n-1\r\n\r\n+1\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"1\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rafind2 rafind2 -f 0x00000000 -t 0x00000590 -r -X -s  83\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298LXYLzum6bMM6 -\r\n\r\n!rafind2 -f 0x00000000 -t 0x00001000 -r -X -s 250382 ../bins/elf/ioli/crackme0x00\r\n\r\n-f hit0_0 0x0000058f ; ../bins/elf/ioli/crackme0x00\r\n\r\n+f hit0_0 0x0000058f ; ../bins/elf/ioli/crackme0x00\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"f hit0_0 0x0000058f ; ../bins/elf/ioli/crackme0x00\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rafind2 rafind2 -r -X -x with nibbles masked  95\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192980UUa716g2gUE -\r\n\r\n!rafind2 -r -X -x caf.bab. ../bins/java/Hello.class\r\n\r\n-f hit0_0 0x00000000 ; ../bins/java/Hello.class\r\n\r\n+f hit0_0 0x00000000 ; ../bins/java/Hello.class\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"f hit0_0 0x00000000 ; ../bins/java/Hello.class\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rafind2 rafind2 can't open  58\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192983foLo0Pgg9Ho -\r\n\r\n!rafind2 -n  -f 0x00010000 -t 0x00020000 -r -X -s 250382 incorrect_file | grep incorrect_file\r\n\r\n--> stderr\r\n\r\n+r_config_get: variable 'asm.arch' not found\r\n\r\n+anal.arch: cannot find 'unknown'\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n Cannot open file 'incorrect_file'\r\n\r\nEXPECT_ERR=\"r_config_get: variable 'asm.arch' not found\r\n\r\nanal.arch: cannot find 'unknown'\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nCannot open file 'incorrect_file'\"\r\n\r\n[XX] db/tools/rafind2 rafind2 -v  75\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298f2pjofmU5QBg -\r\n\r\n!rafind2 -v | grep -c build\r\n\r\n-1\r\n\r\n+1\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"1\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rafind2 rafind2 -a  90\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192987645dUzjnN1u -\r\n\r\n!rafind2 -a -X -s 250382 ../bins/elf/ioli/crackme0x00\r\n\r\n-0x58f\r\n\r\n+0x58f\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"0x58f\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rafind2 rafind2 -b 0xa  60\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298uy2Sn8b7YRNR -\r\n\r\n!rafind2  -a -X -s  250382 -b 0xa ../bins/elf/ioli/crackme0x00\r\n\r\n-0x58f\r\n\r\n+0x58f\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"0x58f\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rafind2 rafind2 -a -b 0x3  83\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298zCVRZWrDi3pg -\r\n\r\n!rafind2 -X -s 250382 -b 0x3 ../bins/elf/ioli/crackme0x00\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rafind2 rafind2 -q  63\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298UC2OAKxlv3YF -\r\n\r\n!rafind2 -q -s 250382 ../bins/elf/ioli/crackme0x00\r\n\r\n-0x58f\r\n\r\n+0x58f\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"0x58f\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rafind2 rafind2 -S utf8 >= U+10000  45\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298pv51UT08jbkD -\r\n\r\n!rafind2 -S ðˆ ../bins/elf/strenc\r\n\r\n-0x22ac\r\n\r\n+0x22ac\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"0x22ac\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rafind2 rafind2 -S ascii  77\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298iomIOSvYZPGL -\r\n\r\n!rafind2 -S wide ../bins/pe/testapp-msvc64.exe\r\n\r\n 0x1481a\r\n\r\n-0x14842\r\n\r\n+0x14842\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"0x1481a\r\n\r\n0x14842\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rafind2 rafind2 -z 250382  90\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298cxNudF9iDOHz -\r\n\r\n!rafind2 -z -s 250382 ../bins/elf/ioli/crackme0x00\r\n\r\n-0x58f\r\n\r\n+0x58f\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"0x58f\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rafind2 rafind2 -S U+00ff < utf8 < U+10000  47\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298qNF0tYjKaqjj -\r\n\r\n!rafind2 -S ÙˆØ§Ø³Ø¹ ../bins/pe/testapp-msvc64.exe\r\n\r\n-0x14864\r\n\r\n+0x14864\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"0x14864\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rafind2 rafind2 -Z  42\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192985p0I1MYuiyWm -\r\n\r\n!rafind2 -Z -s 250382 ../bins/elf/ioli/crackme0x00\r\n\r\n-0x58f 250382\r\n\r\n+0x58f 250382\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"0x58f 250382\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[**]               db/tools/rafind2   OK   31 BR   15 XX   71 FX    0\r\n\r\n[XX] db/tools/ragg2 ragg2 -a x86 -b 64 -p A200 -d 50:0xccccccb  47\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298J7wZtYP0W41t -\r\n\r\n!ragg2 -a x86 -b 64 -p A200 -d 50:0xccccccb\r\n\r\n-4141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141cbcccc0c4141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141\r\n\r\n+41414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141410ccccccb4141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"41414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141410ccccccb4141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/ragg2 ragg2 -a x86 -b 64 -p A10 -d 50:0xcb  67\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298ukSyxLWFljvL -\r\n\r\n!ragg2 -a x86 -b 64 -p A10 -d 50:0xcb\r\n\r\n--> stdout\r\n\r\n-41414141414141414141\r\n\r\n+41414141414141414141\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\n--> stderr\r\n\r\n+r_config_get: variable 'asm.arch' not found\r\n\r\n+anal.arch: cannot find 'unknown'\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+asm.arch: cannot find (unknown)\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n+e asm.bits: Cannot set value, no plugins defined yet\r\n\r\n Cannot patch outside\r\n\r\nEXPECT=\"41414141414141414141\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\nEXPECT_ERR=\"r_config_get: variable 'asm.arch' not found\r\n\r\nanal.arch: cannot find 'unknown'\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nasm.arch: cannot find (unknown)\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\ne asm.bits: Cannot set value, no plugins defined yet\r\n\r\nCannot patch outside\"\r\n\r\n[XX] db/tools/ragg2 ragg2 -a x86 -b 64 -p A200 -d 50:0xcb  78\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298W0kME9MGBwc4 -\r\n\r\n!ragg2 -a x86 -b 64 -p A200 -d 50:0xcb\r\n\r\n-4141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141cb0000004141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141\r\n\r\n+4141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141000000cb4141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"4141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141000000cb4141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/ragg2 ragg2 -a x86 -b 64 -p A20 -w 10:cb  86\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298cXKFuJ1aV4Vq -\r\n\r\n!ragg2 -a x86 -b 64 -p A20 -w 10:cb\r\n\r\n-41414141414141414141cb414141414141414141\r\n\r\n+41414141414141414141cb414141414141414141\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"41414141414141414141cb414141414141414141\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/ragg2 ragg2 -a x86 -b 64 -p n2t2a2s2  63\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298q9zKfrrw1sn4 -\r\n\r\n!ragg2 -a x86 -b 64 -p n2t2a2s2\r\n\r\n-00004141cccc9090\r\n\r\n+00004141cccc9090\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"00004141cccc9090\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/ragg2 ragg2 -a x86 -b 64 -p A20 -D 10:33  71\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298cikWdi9bIfiy -\r\n\r\n!ragg2 -a x86 -b 64 -p A20 -D 10:33\r\n\r\n-4141414141414141414121000000000000004141\r\n\r\n+4141414141414141414100000000000000214141\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"4141414141414141414100000000000000214141\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/ragg2 ragg2 -k linux -i exec  -a x86 -b32 -p n3N3  62\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298VShsbfxx1NeD -\r\n\r\n!ragg2 -k linux -i exec  -a x86 -b32 -p n3N3\r\n\r\n-90909031c050682f2f7368682f62696e89e3505389e199b00bcd80909090\r\n\r\n+90909031c050682f2f7368682f62696e89e3505389e199b00bcd80909090\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"90909031c050682f2f7368682f62696e89e3505389e199b00bcd80909090\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/ragg2 ragg2 -i exec -z -a x86 -b32  87\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298aa8MzX3WUtwj -\r\n\r\n!ragg2 -i exec -z -k linux -a x86 -b32\r\n\r\n-\"\\x31\\xc0\\x50\\x68\\x2f\\x2f\\x73\\x68\\x68\\x2f\\x62\\x69\\x6e\\x89\\xe3\\x50\\x53\\x89\\xe1\\x99\\xb0\\x0b\\xcd\\x80\"\r\n\r\n+\"\\x31\\xc0\\x50\\x68\\x2f\\x2f\\x73\\x68\\x68\\x2f\\x62\\x69\\x6e\\x89\\xe3\\x50\\x53\\x89\\xe1\\x99\\xb0\\x0b\\xcd\\x80\"\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=%\"\\x31\\xc0\\x50\\x68\\x2f\\x2f\\x73\\x68\\x68\\x2f\\x62\\x69\\x6e\\x89\\xe3\\x50\\x53\\x89\\xe1\\x99\\xb0\\x0b\\xcd\\x80\"\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)%\r\n\r\n[XX] db/tools/ragg2 ragg2 -p n80 -w 79:c3 -x  80\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298FwQLFnJn6UsE -\r\n\r\n!ragg2 -p n80 -w 79:c3 -x\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/ragg2 ragg2 -q 45414146  88\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298bgg3VaNEh638 -\r\n\r\n!ragg2 -q 45414146\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/ragg2 ragg2 -h  56\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298WemGIKihhli2 -\r\n\r\n!ragg2 -h | grep -c Usage\r\n\r\n-1\r\n\r\n+1\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"1\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/ragg2 ragg2 -v  69\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298FTwLgpuXqPnW -\r\n\r\n!ragg2 -v | grep -c build\r\n\r\n-1\r\n\r\n+1\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"1\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/ragg2 ragg2 -L  75\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192981Yw1XpHLvO65 -\r\n\r\n!ragg2 -L | grep -c encoders\r\n\r\n-1\r\n\r\n+1\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"1\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/ragg2 ragg2 bugg8.r  109\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298pvtkII46Aune -\r\n\r\n!ragg2 ../bins/other/ragg2/bugg8.r > /dev/null\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/ragg2 ragg2 -q 0x45414146  212\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298PevWyp4X627m -\r\n\r\n!ragg2 -q 0x45414146\r\n\r\n Little endian: -1\r\n\r\n-Big endian: 12\r\n\r\n+Big endian: 12\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"Little endian: -1\r\n\r\nBig endian: 12\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[**]                 db/tools/ragg2   OK   31 BR   17 XX   86 FX    0\r\n\r\n[XX] db/tools/rahash2 rahash2 -a sha1  44\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192985I1p3FIdTGKG -\r\n\r\n!rahash2 -a sha1 ../bins/elf/analysis/hello-linux-x86_64\r\n\r\n-../bins/elf/analysis/hello-linux-x86_64: 0x00000000-0x00001a35 sha1: 687c82d13cb27f0600d8e57edc784282c1732f56\r\n\r\n+../bins/elf/analysis/hello-linux-x86_64: 0x00000000-0x00001a35 sha1: 687c82d13cb27f0600d8e57edc784282c1732f56\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"../bins/elf/analysis/hello-linux-x86_64: 0x00000000-0x00001a35 sha1: 687c82d13cb27f0600d8e57edc784282c1732f56\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rahash2 rahash2 -a sha384  38\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298fnhvvN5KhC0L -\r\n\r\n!rahash2 -a sha384 ../bins/elf/analysis/hello-linux-x86_64\r\n\r\n-../bins/elf/analysis/hello-linux-x86_64: 0x00000000-0x00001a35 sha384: a6fed224b0b5892ab44839b5ae6a12e54fb3393b5f1e1ca174fb5a0032c994f1c492c5b3a090518d8a60875223977ba4\r\n\r\n+../bins/elf/analysis/hello-linux-x86_64: 0x00000000-0x00001a35 sha384: a6fed224b0b5892ab44839b5ae6a12e54fb3393b5f1e1ca174fb5a0032c994f1c492c5b3a090518d8a60875223977ba4\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"../bins/elf/analysis/hello-linux-x86_64: 0x00000000-0x00001a35 sha384: a6fed224b0b5892ab44839b5ae6a12e54fb3393b5f1e1ca174fb5a0032c994f1c492c5b3a090518d8a60875223977ba4\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rahash2 rahash2 -a entropy  67\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298v1A6HLM54LRz -\r\n\r\n!rahash2 -a entropy ../bins/elf/analysis/hello-linux-x86_64\r\n\r\n-../bins/elf/analysis/hello-linux-x86_64: 0x00000000-0x00001a35 entropy: 3.27819072\r\n\r\n+../bins/elf/analysis/hello-linux-x86_64: 0x00000000-0x00001a35 entropy: 3.27819072\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"../bins/elf/analysis/hello-linux-x86_64: 0x00000000-0x00001a35 entropy: 3.27819072\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rahash2 rahash2 -a md5  69\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298df0IKU3fMQs7 -\r\n\r\n!rahash2 -a md5 ../bins/elf/analysis/hello-linux-x86_64\r\n\r\n-../bins/elf/analysis/hello-linux-x86_64: 0x00000000-0x00001a35 md5: c957bd5bd6204470256bc15248ccafd4\r\n\r\n+../bins/elf/analysis/hello-linux-x86_64: 0x00000000-0x00001a35 md5: c957bd5bd6204470256bc15248ccafd4\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"../bins/elf/analysis/hello-linux-x86_64: 0x00000000-0x00001a35 md5: c957bd5bd6204470256bc15248ccafd4\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rahash2 rahash2 -a sha256  55\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298AAwgcPNntxzP -\r\n\r\n!rahash2 -a sha256 ../bins/elf/analysis/hello-linux-x86_64\r\n\r\n-../bins/elf/analysis/hello-linux-x86_64: 0x00000000-0x00001a35 sha256: 7bdbf25324af1946ec0b16dbf928875a588a786f7c279cd115729c5a3a297a55\r\n\r\n+../bins/elf/analysis/hello-linux-x86_64: 0x00000000-0x00001a35 sha256: 7bdbf25324af1946ec0b16dbf928875a588a786f7c279cd115729c5a3a297a55\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"../bins/elf/analysis/hello-linux-x86_64: 0x00000000-0x00001a35 sha256: 7bdbf25324af1946ec0b16dbf928875a588a786f7c279cd115729c5a3a297a55\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rahash2 rahash2 -a md5,sha1,sha256 -r  48\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298rgKufSH0Lr1X -\r\n\r\n!rahash2 -a md5,sha1,sha256 -r ../bins/elf/analysis/hello-linux-x86_64\r\n\r\n ../bins/elf/analysis/hello-linux-x86_64: e file.md5=c957bd5bd6204470256bc15248ccafd4\r\n\r\n ../bins/elf/analysis/hello-linux-x86_64: e file.sha1=687c82d13cb27f0600d8e57edc784282c1732f56\r\n\r\n-../bins/elf/analysis/hello-linux-x86_64: e file.sha256=7bdbf25324af1946ec0b16dbf928875a588a786f7c279cd115729c5a3a297a55\r\n\r\n+../bins/elf/analysis/hello-linux-x86_64: e file.sha256=7bdbf25324af1946ec0b16dbf928875a588a786f7c279cd115729c5a3a297a55\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"../bins/elf/analysis/hello-linux-x86_64: e file.md5=c957bd5bd6204470256bc15248ccafd4\r\n\r\n../bins/elf/analysis/hello-linux-x86_64: e file.sha1=687c82d13cb27f0600d8e57edc784282c1732f56\r\n\r\n../bins/elf/analysis/hello-linux-x86_64: e file.sha256=7bdbf25324af1946ec0b16dbf928875a588a786f7c279cd115729c5a3a297a55\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rahash2 rahash2 -a sha512  58\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192981g5aUznfXmYI -\r\n\r\n!rahash2 -a sha512 ../bins/elf/analysis/hello-linux-x86_64\r\n\r\n-../bins/elf/analysis/hello-linux-x86_64: 0x00000000-0x00001a35 sha512: 2640b1ff96870fb78a3d8ae6b51595ca86c37e25443b2e8c5441e77d11cdb3830ece8d791561c22788d37d7f22c99cdabf8f798826c0ff441901e6157890fee6\r\n\r\n+../bins/elf/analysis/hello-linux-x86_64: 0x00000000-0x00001a35 sha512: 2640b1ff96870fb78a3d8ae6b51595ca86c37e25443b2e8c5441e77d11cdb3830ece8d791561c22788d37d7f22c99cdabf8f798826c0ff441901e6157890fee6\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"../bins/elf/analysis/hello-linux-x86_64: 0x00000000-0x00001a35 sha512: 2640b1ff96870fb78a3d8ae6b51595ca86c37e25443b2e8c5441e77d11cdb3830ece8d791561c22788d37d7f22c99cdabf8f798826c0ff441901e6157890fee6\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rahash2 rahash2 -b10 -a md5,sha1,sha256 -r  55\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192987ppcC3KeV4EM -\r\n\r\n!rahash2 -b10 -a md5,sha1,sha256 -r ../bins/elf/analysis/hello-linux-x86_64\r\n\r\n ../bins/elf/analysis/hello-linux-x86_64: e file.md5=c957bd5bd6204470256bc15248ccafd4\r\n\r\n ../bins/elf/analysis/hello-linux-x86_64: e file.sha1=687c82d13cb27f0600d8e57edc784282c1732f56\r\n\r\n-../bins/elf/analysis/hello-linux-x86_64: e file.sha256=7bdbf25324af1946ec0b16dbf928875a588a786f7c279cd115729c5a3a297a55\r\n\r\n+../bins/elf/analysis/hello-linux-x86_64: e file.sha256=7bdbf25324af1946ec0b16dbf928875a588a786f7c279cd115729c5a3a297a55\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"../bins/elf/analysis/hello-linux-x86_64: e file.md5=c957bd5bd6204470256bc15248ccafd4\r\n\r\n../bins/elf/analysis/hello-linux-x86_64: e file.sha1=687c82d13cb27f0600d8e57edc784282c1732f56\r\n\r\n../bins/elf/analysis/hello-linux-x86_64: e file.sha256=7bdbf25324af1946ec0b16dbf928875a588a786f7c279cd115729c5a3a297a55\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rahash2 rahash2 -h  64\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298P4qvHWnqbIRJ -\r\n\r\n!rahash2~Usage\r\n\r\n-Usage: rahash2 [-rBhLkv] [-b S] [-a A] [-c H] [-E A] [-s S] [-f O] [-t O] [file] ...\r\n\r\n+Usage: rahash2 [-rBhLkv] [-b S] [-a A] [-c H] [-E A] [-s S] [-f O] [-t O] [file] ...\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"Usage: rahash2 [-rBhLkv] [-b S] [-a A] [-c H] [-E A] [-s S] [-f O] [-t O] [file] ...\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rahash2 rahash2 -a md5 -s \"admin\"  50\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298djhKZbYAwgIu -\r\n\r\n!rahash2 -a md5 -s \"admin\"\r\n\r\n-0x00000000-0x00000004 md5: 21232f297a57a5a743894a0e4a801fc3\r\n\r\n+0x00000000-0x00000004 md5: 21232f297a57a5a743894a0e4a801fc3\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"0x00000000-0x00000004 md5: 21232f297a57a5a743894a0e4a801fc3\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rahash2 rahash2 -a md5 -e -s \"admin\"  58\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192982hghATCq3kiO -\r\n\r\n!rahash2 -a md5 -e -s \"admin\"\r\n\r\n-0x00000000-0x00000004 md5: c31f804a0e4a8943a7a5577a292f2321\r\n\r\n+0x00000000-0x00000004 md5: c31f804a0e4a8943a7a5577a292f2321\r\n\r\n+WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"0x00000000-0x00000004 md5: c31f804a0e4a8943a7a5577a292f2321\r\n\r\nWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rahash2 rahash2 -D base64 -s \"YWRtaW4=\"  46\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-192989VTok315hlN6 -\r\n\r\n!rahash2 -D base64 -s \"YWRtaW4=\"\r\n\r\n-admin\r\n\r\n+adminWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"adminWARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rahash2 rahash2 -E base64 -x \"61646d696e\"  59\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-19298JaaWVerqKAS1 -\r\n\r\n!rahash2 -E base64 -x \"61646d696e\"\r\n\r\n-YWRtaW4=\r\n\r\n+YWRtaW4=WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"YWRtaW4=WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n\r\n[XX] db/tools/rahash2 rahash2 -E base64 -s \"admin\"  60\r\n\r\n$ r2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Q -i /tmp/tmp-1929888De73PsSiwL -\r\n\r\n!rahash2 -E base64 -s \"admin\"\r\n\r\n-YWRtaW4=\r\n\r\n+YWRtaW4=WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\r\n\r\nEXPECT=\"YWRtaW4=WARNING: r_asm_set_big_endian: assertion 'a && a->cur' failed (line 372)\"\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYwOTQ2MjU4OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can you update?","createdAt":"2020-04-05T18:41:21Z","includesCreatedEdit":false,"isMinimized":true,"minimizedReason":"outdated","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16168#issuecomment-609462588","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwOTQ2MjYxMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"or just share a link to the last log","createdAt":"2020-04-05T18:41:28Z","includesCreatedEdit":false,"isMinimized":true,"minimizedReason":"outdated","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16168#issuecomment-609462610","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NzI4MDMwMg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Last build log: https://travis-ci.com/github/radareorg/radare2/jobs/351993035\r\nSeems the amount of bugs increased","createdAt":"2020-06-22T05:08:24Z","includesCreatedEdit":false,"isMinimized":true,"minimizedReason":"outdated","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16168#issuecomment-647280302","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1NTI4OTE0Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"https://travis-ci.com/github/radareorg/radare2/jobs/358672729\r\n```\r\np/../arch/8051/8051_disas.c:64:14: warning: â€˜r_8051_disasâ€™ defined but not used [-Wunused-function]\r\n\r\n static char *r_8051_disas(ut64 pc, const ut8 *buf, int len, int *olen) {\r\n\r\n              ^~~~~~~~~~~~\r\n\r\n/home/travis/build/radareorg/radare2/libr/..//libr/anal/p/../..//asm/arch/tms320/c55x_plus/hashvector.c:97:25: warning: â€˜ins_hashâ€™ defined but not used [-Wunused-variable]\r\n\r\n static HASHCODE_ENTRY_T ins_hash[] = {\r\n\r\n                         ^~~~~~~~\r\n\r\np/debug_native.c: In function â€˜r_debug_native_bpâ€™:\r\n\r\np/debug_native.c:1450:10: warning: unused variable â€˜dbgâ€™ [-Wunused-variable]\r\n\r\n  RDebug *dbg = bp->user;\r\n\r\n          ^~~\r\n\r\np/debug_native.c: At top level:\r\n\r\np/debug_native.c:1649:2: warning: #warning Unsupported architecture [-Wcpp]\r\n\r\n #warning Unsupported architecture\r\n\r\n  ^~~~~~~\r\n\r\np/debug_native.c:1260:13: warning: â€˜set_drx_regsâ€™ defined but not used [-Wunused-function]\r\n\r\n static void set_drx_regs (RDebug *dbg, drxt *regs, size_t num_regs) {\r\n\r\n             ^~~~~~~~~~~~\r\n\r\np/debug_native.c:1234:13: warning: â€˜sync_drx_regsâ€™ defined but not used [-Wunused-function]\r\n\r\n static void sync_drx_regs (RDebug *dbg, drxt *regs, size_t num_regs) {\r\n\r\n             ^~~~~~~~~~~~~\r\n\r\np/native/linux/linux_debug.c: In function â€˜print_fpuâ€™:\r\n\r\np/native/linux/linux_debug.c:971:2: warning: #warning print_fpu not implemented for this platform [-Wcpp]\r\n\r\n #warning print_fpu not implemented for this platform\r\n\r\n  ^~~~~~~\r\n\r\np/native/linux/linux_debug.c: In function â€˜linux_reg_readâ€™:\r\n\r\np/native/linux/linux_debug.c:1065:3: warning: #warning getfpregs not implemented for this platform [-Wcpp]\r\n\r\n  #warning getfpregs not implemented for this platform\r\n\r\n   ^~~~~~~\r\n\r\np/native/linux/linux_debug.c:1080:54: warning: passing argument 4 of â€˜r_debug_ptraceâ€™ makes pointer from integer without a cast [-Wint-conversion]\r\n\r\n    ret = r_debug_ptrace (dbg, PTRACE_GETREGSET, pid, 1, &io);\r\n\r\n                                                      ^\r\n\r\nIn file included from p/native/linux/linux_debug.c:6:0:\r\n\r\n/home/travis/build/radareorg/radare2/libr/include/r_debug.h:618:20: note: expected â€˜void *â€™ but argument is of type â€˜intâ€™\r\n\r\n static inline long r_debug_ptrace(RDebug *dbg, r_ptrace_request_t request, pid_t pid, void *addr, r_ptrace_data_t data) {\r\n\r\n                    ^~~~~~~~~~~~~~\r\n\r\np/native/linux/linux_debug.c:976:7: warning: variable â€˜showfpuâ€™ set but not used [-Wunused-but-set-variable]\r\n\r\n  bool showfpu = false;\r\n\r\n       ^~~~~~~\r\n\r\nAt top level:\r\n\r\np/native/linux/linux_debug.c:883:13: warning: â€˜print_fpuâ€™ defined but not used [-Wunused-function]\r\n\r\n static void print_fpu(void *f){\r\n\r\n             ^~~~~~~~~\r\n\r\ncmd.c: In function â€˜r_core_cmd_substâ€™:\r\n\r\ncmd.c:2583:8: warning: variable â€˜cmtâ€™ set but not used [-Wunused-but-set-variable]\r\n\r\n  char *cmt, *colon = NULL, *icmd = NULL;\r\n\r\n        ^~~\r\n\r\ncanal.c: In function â€˜is_skippable_addrâ€™:\r\n\r\ncanal.c:1943:45: warning: passing argument 3 of â€˜r_list_findâ€™ from incompatible pointer type [-Wincompatible-pointer-types]\r\n\r\n  return !(flags && r_list_find (flags, fcn, find_sym_flag));\r\n\r\n                                             ^~~~~~~~~~~~~\r\n\r\nIn file included from canal.c:4:0:\r\n\r\n/home/travis/build/radareorg/radare2/libr/include/r_list.h:115:18: note: expected â€˜RListComparator {aka int (*)(const void *, const void *)}â€™ but argument is of type â€˜int (*)(void *, void *)â€™\r\n\r\n R_API RListIter *r_list_find(const RList *list, const void *p, RListComparator cmp);\r\n\r\n                  ^~~~~~~~~~~\r\n```","createdAt":"2020-07-08T05:11:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16168#issuecomment-655289146","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3MTI1MDU3OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"It seems hugely broken now:\r\n```\r\n[**]                                        db/anal/arm    11076 OK       927 BR     1808 XX       20 FX\r\n```\r\nLooks like problem might be somewhere in IO layer:\r\n```\r\ntest_dwarf4_cpp_multiple_modules ERR\r\n[XX] Fail at line 176: Wrong attribute data: expected 1, got 72057594037927936.\r\ntest_graph_to_agraph ERR\r\n[XX] Fail at line 34: Wrong node out-nodes: expected 2, got 4.\r\ntest_r_buf_sparse2 ERR\r\n[XX] Fail at line 251: right 10 bytes: expected ff ff ff 61 61 61 61 ff ff ff, got ff ff ff 61 61 61 61 ff ff 00\r\nWarning: File is not PE\r\ntest_parse_dwarf_types_version2 ERR\r\n[XX] Fail at line 24: pe/vista-glass.exe binary could not be opened\r\n```\r\nand so on for various DWARF and PDB failures, @HoundThe please take a look - here are the logs: https://travis-ci.com/github/radareorg/radare2/jobs/370233920","createdAt":"2020-08-10T09:22:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16168#issuecomment-671250579","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3MTI1NzUyNw==","author":{"login":"HoundThe"},"authorAssociation":"CONTRIBUTOR","body":"Seems that some tests fail at `r_bin_open()` and from a first look it seems that some readings have endianess issues. I'll have a deeper look","createdAt":"2020-08-10T09:38:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16168#issuecomment-671257527","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3MzE0MDMzNQ==","author":{"login":"HoundThe"},"authorAssociation":"CONTRIBUTOR","body":"I've just now noticed that DWARF has custom macros  to read that looks like they care about endianness, but they assume little endian everywhere\r\n```\r\n#define READ32(x)                                                    \\\r\n\t(((x) + sizeof (ut32) < buf_end) ? r_read_ble32 (x, 0) : 0); \\\r\n\t(x) += sizeof (ut32)\r\n```","createdAt":"2020-08-12T22:25:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16168#issuecomment-673140335","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3NDgxMzM0Ng==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"thats bad","createdAt":"2020-08-17T10:58:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16168#issuecomment-674813346","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDcyNTEyNTIyOA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"These are gone now, but the amount of broken tests is still roughly the same\r\n\r\nThe most common reason of failure it seems this one:\r\n```\r\n+WARNING: No calling convention defined for this file, analysis may be inaccurate.\r\n+WARNING: No calling convention defined for this file, analysis may be inaccurate.\r\n Cannot find file\r\n Cannot find file\r\n Cannot find file\r\n````\r\n\r\nhttps://travis-ci.com/github/radareorg/radare2/jobs/432758538#L43967\r\n\r\ncc @eagleoflqj \r\n\r\n","createdAt":"2020-11-11T03:32:27Z","includesCreatedEdit":false,"isMinimized":true,"minimizedReason":"resolved","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16168#issuecomment-725125228","viewerDidAuthor":false}],"number":16168,"title":"SystemZ (S390) assert warnings and endianess bugs"},{"body":"Basically ERROR/SUCCESS/TIMEOUT","comments":[],"number":16147,"title":"To think about error codes for the r2 commands"},{"body":"Applies only to the new shell.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU5NTM0MTQ4OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"it's there already ?? and ?!","createdAt":"2020-03-05T17:08:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16146#issuecomment-595341488","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5NTM0MjQyMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"It's a hack, should be \"original\" `a ? b : c`, IMHO.","createdAt":"2020-03-05T17:10:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16146#issuecomment-595342421","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxNzc2MDc2Ng==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I removed the milestone 4.5.0 as tree-sitter support just landed and I don't plan to add new \"sugar\" on top of it for some time. First the duty, then the pleasure ;)","createdAt":"2020-04-22T12:53:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16146#issuecomment-617760766","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxNzc2MTExNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"sgtm\n\n> On 22 Apr 2020, at 14:53, Riccardo Schirone <notifications@github.com> wrote:\n> \n> \n> I removed the milestone 4.5.0 as tree-sitter support just landed and I don't plan to add new \"sugar\" on top of it for some time. First the duty, then the pleasure ;)\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/16146#issuecomment-617760766>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FWU25Z5XMT2WKXUL43RN3SEFANCNFSM4LCF5YXQ>.\n> \n\n","createdAt":"2020-04-22T12:53:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16146#issuecomment-617761116","viewerDidAuthor":false}],"number":16146,"title":"Add simple if/else or ternary operator for r2 shell (oneline)"},{"body":"Currently all releases are done manually. But it's possible to run the release action on multiple repositories, so all related projects will be released simultaneously:\r\n- radare2 itself\r\n- radare2-lang\r\n- radare2-bindings\r\n- r2pipe repositories?\r\n- radare2-extras\r\n- something else?\r\n\r\nSee also https://github.com/radareorg/radare2/pull/17192","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU5NDQ1MDIwNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"-webui\n\n> On 4 Mar 2020, at 04:04, Anton Kochkov <notifications@github.com> wrote:\n> \n> Currently all releases are done manually. But it's possible to run the release action on multiple repositories, so all related projects will be released simultaneously:\n> \n> radare2 itself\n> radare2-lang\n> radare2-bindings\n> r2pipe repositories?\n> radare2-extras\n> something else?\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/16126?email_source=notifications&email_token=AAG75FTRQ42HOK7GRPOFDT3RFXALTA5CNFSM4LAZUQ72YY3PNVWWK3TUL52HS4DFUVEXG43VMWVGG33NNVSW45C7NFSM4ISHMZ3Q>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FV5WKWXKSI54RQQTVTRFXALTANCNFSM4LAZUQ7Q>.\n> \n\n","createdAt":"2020-03-04T10:48:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16126#issuecomment-594450206","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1NTY3Mjk4Ng==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Is webui still a thing?","createdAt":"2020-07-08T18:06:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16126#issuecomment-655672986","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1NTY5MDM3Nw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"If thing means something that works even if unmaintained for years. Yes. But i dont think it shohld follow the same version as r2. And even less after my pr supporting tags in r2pm. Also all the webuis in that repo are shipped in r2 in shlr/www","createdAt":"2020-07-08T18:43:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16126#issuecomment-655690377","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY1NTcwNTAwNw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"> If thing means something that works even if unmaintained for years. Yes. But i dont think it shohld follow the same version as r2. And even less after my pr supporting tags in r2pm. Also all the webuis in that repo are shipped in r2 in shlr/www\r\n\r\nIs it used? Do you use it? I'm trying to understand whether it makes sense to take additional effort to release that.","createdAt":"2020-07-08T19:15:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16126#issuecomment-655705007","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1NTkwNzI5MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"With the existence of Cutter as the de facto default UI, I think it's time to move `shlr/www` outside of the default distribution and be installable with `r2pm` instead.","createdAt":"2020-07-09T05:20:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/16126#issuecomment-655907291","viewerDidAuthor":false}],"number":16126,"title":"Setup a GitHub Action for release multiple repositories"},{"body":"Currently the feature is poorly tested.\r\nWe need more tests, see for example:\r\n- https://github.com/d4em0n/exrop/tree/master/tests\r\n- https://github.com/d4em0n/exrop/tree/master/examples\r\n- https://github.com/sashs/Ropper/tree/master/testcases\r\n- https://github.com/sashs/Ropper/tree/master/test-binaries\r\n- https://github.com/pakt/ropc/tree/master/example\r\n- https://github.com/pakt/ropc/tree/master/examples-ropl\r\n- https://github.com/salls/angrop/tree/master/tests\r\n- https://github.com/JonathanSalwan/ROPgadget/tree/master/test-suite-binaries\r\n- https://github.com/0vercl0k/rp/tree/master/bin/bin_tests\r\n- https://github.com/Boyan-MILANOV/ropium/tree/master/tests","comments":[{"id":"IC_kwDOAEpMrs42QbvV","author":{"login":"adwait1-g"},"authorAssociation":"CONTRIBUTOR","body":"Hi @trufae ,\r\n\r\nI want to take this up. I would like to work on issues related to the [Exploitation](https://github.com/radareorg/radare2/projects/24) project. Would that be okay?\r\n\r\nRegards,\r\nAdwaith","createdAt":"2021-09-01T13:18:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16110#issuecomment-910277589","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs42VMD8","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Of course! What would you be starting with? Any question or topic? I would ask you to join the discord or telegram channels for further chats rather than using gh issues for conversations.","createdAt":"2021-09-02T10:44:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16110#issuecomment-911524092","viewerDidAuthor":true}],"number":16110,"title":"Add more tests for ROP search"},{"body":"As soon as there is a bigger database of multiple zignature sdbs, we will need some kind of decision procedure to determine which sdbs to load for a given file. Aspects to decide on include:\r\n\r\n* File Format\r\n* Arch\r\n* Bits\r\n* Endian (maybe)\r\n* OS\r\n* Language\r\n* Presence of specific symbols (maybe)\r\n\r\nOne way would be to use the filename, but I think with all the aspects above, this will be too chaotic.\r\nInstead, another way would be to provide a file along with all the sdbs that describes rules to match for each file. In json, this could look for example like this:\r\n\r\n```json\r\n{\r\n    \"glibc.sdb\": {\r\n        \"format\": \"elf\",\r\n        \"arch\": \"x86.*\",\r\n        \"os\": [\"linux\", \"freebsd\"]\r\n    },\r\n    \"win32shit.sdb\": [{\r\n            \"format\": \"pe\",\r\n            \"os\": \"windows\"\r\n        },{\r\n            \"format\": \"something\",\r\n            \"os\": \"else\"\r\n        }]\r\n}\r\n```\r\nHere, array would mean OR and object would mean AND, strings can be regex.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU5MzEyMDk5Mw==","author":{"login":"oxcabe"},"authorAssociation":"CONTRIBUTOR","body":"```\r\n\"glibc.sdb\": {\r\n```\r\nIt might look cleaner to just use `\"glibc\"` as the key and assume the extension when trying to find the file.\r\n\r\nI agree with: `format arch os language`\r\n\r\nAlso including rules like yara would be interesting but maybe overkill for a first version of this.","createdAt":"2020-03-01T17:19:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16084#issuecomment-593120993","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5MzIzNDE0Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Just use symlinls and filenames following format-os-arch-bits/signaturename.sdb like we do for regs and types. No need to overengineer with json.\n\nAlso, thereâ€™s a standard for boolean logic in json. This obj/array is nice but limited to 1 level of conditionals and no way to group.\n\n>> On 1 Mar 2020, at 18:19, Ã“scar Carrasco <notifications@github.com> wrote:\n> ï»¿\n> \"glibc.sdb\": {\n> It might look cleaner to just use \"glibc\" as the key and assume the extension when trying to find the file.\n> \n> I agree with: format arch os language\n> \n> Also including rules like yara would be interesting but maybe overkill for a first version of this.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-03-02T05:57:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16084#issuecomment-593234146","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5MzI2MzYwMg==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"Symlinks don't exist everywhere.\r\nWhat standard is this?","createdAt":"2020-03-02T07:41:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16084#issuecomment-593263602","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5MzI5MjI3NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Well. I well prefer folders with format-os-arch-bits/...sdb than reinventing this complex logic json parser which is something that goes why far from what it should be. KISS\n\nAbout standard, see json-schema syntax or any of other js libraries that do that like:\n\n* http://jsonlogic.com/\n* https://www.ibm.com/support/knowledgecenter/SSEPGG_11.5.0/com.ibm.swg.im.dbclient.json.doc/doc/r0061295.html\n* https://github.com/IvanRave/logic-tree\n* ...\n\nThis has been reinvented over 9000 times and it doesnt help us to reinvent it again for this specific case. Lets just keep being unix and not overengineered json logics\n\n> On 2 Mar 2020, at 08:41, Florian MÃ¤rkl <notifications@github.com> wrote:\n> \n> ï»¿\n> Symlinks don't exist everywhere.\n> What standard is this?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-03-02T08:57:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16084#issuecomment-593292275","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5MzM3NDE3OA==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"The question is whether the filenames are enough. `format-os-arch-bits/...sdb` does not include all aspects from above, especially language and needs sdbs to be duplicated if multiple rules should be possible. Whether these things are needed or not is left to be evaluated, but if they will be needed in the future and are not covered yet, it will be a complete mess.\r\n\r\nThe json from the issue is just a random example, not a concrete proposal. The IBM syntax looks reasonably simple to implement.","createdAt":"2020-03-02T12:16:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16084#issuecomment-593374178","viewerDidAuthor":false}],"number":16084,"title":"Automatic loading decision of Zignature Databases"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nCurrently, radare has support for user-level minidumps, but nothing for loading the kernel dumps\r\n\r\n**Describe the solution you'd like**\r\n\r\nSomething like MDMP loader, but for loading these\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nSee:\r\n- https://github.com/radareorg/radare2/issues/2598\r\n- https://github.com/0vercl0k/kdmp-parser\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU5MzI2Njg5Mg==","author":{"login":"abcSup"},"authorAssociation":"CONTRIBUTOR","body":"# File Structure\r\nHeader structure (Notes: there are paddings in between properties)\r\nhttps://github.com/volatilityfoundation/volatility/wiki/Crash-Address-Space\r\nhttps://github.com/google/rekall/blob/master/rekall-core/rekall/plugins/overlays/windows/crashdump.py\r\n\r\nHow Physical Memory Runs work\r\nhttps://computer.forensikblog.de/en/2006/03/dmp-file-structure.html\r\n\r\nList of DumpType\r\nhttps://crashdmp.wordpress.com/crash-mechanism/configuration/\r\n\r\n# Address Space\r\nhttps://github.com/google/rekall/blob/master/rekall-core/rekall/plugins/addrspaces/crash.py\r\n\r\n# Header\r\n`PsLoadedModuleList` - LDR_LOAD_TABLE_ENTRY\r\n`KdDebuggerDataBlock` - _KDDEBUGGER_DATA64\r\n`Kernel Base` address = `ntoskrnl` base address which is also the first entry in `PsLoadedModuleList`\r\n","createdAt":"2020-03-02T07:51:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/16048#issuecomment-593266892","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5NjkwOTQxOA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@abcSup since you added some basic support, could you please describe what is missing?","createdAt":"2020-03-10T05:24:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16048#issuecomment-596909418","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5Njk1MzExNA==","author":{"login":"abcSup"},"authorAssociation":"CONTRIBUTOR","body":"> @abcSup since you added some basic support, could you please describe what is missing?\r\n\r\nThere are a few more rich information we can extract:\r\n- [ ] Loaded modules/drivers. `PsLoadedModuleList` which is a vaddr to `LDR_LOAD_TABLE_ENTRY` struct.\r\n- [ ] Permission data of each memory page from `PfnDataBase` https://rayanfam.com/topics/inside-windows-page-frame-number-part1/, which is a vaddr\r\n- [ ] Debugger data from `KdDebuggerDataBlock`, which is a vaddr to `_KDDEBUGGER_DATA64` struct\r\n- [ ] Active processes from `PsActiveProcessHead`, which is a vaddr to `_EPROCESS.ActiveProcessLinks`\r\n\r\nTo extract those information, we need a way to translate those vaddr to physical memory address based on memory paging. Currently, the phyiscal memory pages from the dump are mapped. We should map the virtual memory space of the kernel instead of the physical memory pages. Here are a few examples that emulate the address space:\r\n* [WindowsCrashBMP](https://github.com/google/rekall/blob/master/rekall-core/rekall/plugins/addrspaces/crash.py#L129) for non-BMP DumpType\r\n* [RunBasedAddressSpace](https://github.com/google/rekall/blob/master/rekall-core/rekall/addrspace.py#L604) for BMP DumpType\r\n\r\nIt should support different memory paging format (amd64, x86). Most implementations can be found in the [rekall](https://github.com/google/rekall).","createdAt":"2020-03-10T08:00:25Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/16048#issuecomment-596953114","viewerDidAuthor":false}],"number":16048,"title":"Windows kernel dumps loading support"},{"body":"Currently, radare2 supports loading DEX files, but to open these you need to convert them to the DEX first. It would be nice to be able to open them as-is, without prior conversion.\r\n- [ ] VDEX\r\n- [ ] CDEX\r\n\r\nSee these tools for the reference:\r\n- https://github.com/anestisb/vdexExtractor/\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU4ODA3MjgyMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Thats not the same. Its good to be able to open the cdex and vdex files directly. But being able to extract the dex embedded inside is useful and this tool worjs pretty well and its maintained. I agree that it will bw food ti have it in rabin2 -x but thise fornsts change over time\n\n> On 19 Feb 2020, at 05:04, Anton Kochkov <notifications@github.com> wrote:\n> \n> ï»¿\n> Currently, radare2 supports loading DEX files, but to open these you need to convert them to the DEX first. It would be nice to be able to open them as-is, without prior conversion.\n> \n>  VDEX\n>  CDEX\n> See these tools for the reference:\n> \n> https://github.com/anestisb/vdexExtractor/\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-02-19T07:22:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16000#issuecomment-588072822","viewerDidAuthor":false}],"number":16000,"title":"Out of the box support for VDEX and CDEX formats"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nWhen attempting to use highlight colors to identify, for instance, code paths taken, the control flow and disassembly can be huge. Having the instruction highlight include the instruction address would help with this.\r\n\r\n**Describe the solution you'd like**\r\nLooking at complex control flows via the various minimized `VV` modes (for instance, only showing calls, or even the tiny VV mode) can be helpful. I'd like for instruction highlights that have been added for a given address to show up on those views.\r\n\r\nFor example: on the very tiny VV mode, you see things like `__4028__` as the address in the control flow. If I put a highlight on that address, it would be very helpful to have that number colored in the tiny mode so that I can more easily get a high level understanding of where things have been.\r\n\r\n**Describe alternatives you've considered**\r\nNot sure of a similar option for high level graphical understanding of a program flow.\r\n\r\n**Additional context**\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU5NDI1NDIyMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"e scr.highlight=4028","createdAt":"2020-03-04T01:13:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15967#issuecomment-594254220","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5NDI3NTgwMw==","author":{"login":"bannsec"},"authorAssociation":"CONTRIBUTOR","body":"How is that supposed to work with multiple/ many highlights? This would at\nbest mean duplicating all ecHi commands as well.\n\nOn Tue, Mar 3, 2020, 8:13 PM radare <notifications@github.com> wrote:\n\n> e scr.highlight=4028\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/radareorg/radare2/issues/15967?email_source=notifications&email_token=AB2HPYDCOUYU3XRKY7HTTHDRFWTMNA5CNFSM4KUXFRIKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOENVZTDA#issuecomment-594254220>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AB2HPYFSK5R6QB7IWAVKMWLRFWTMNANCNFSM4KUXFRIA>\n> .\n>\n","createdAt":"2020-03-04T01:55:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15967#issuecomment-594275803","viewerDidAuthor":false}],"number":15967,"title":"Highlight instruction address"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu x86_64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.2.0-git 23640 @ linux-x86-64 git.4.1.1-155-gdd95ed40a commit: dd95ed40a15f471be1f5928bdbed0e76a6048859 build: 2020-01-21__18:48:37\r\n\r\n\r\n### Expected behavior\r\n\r\ndro shows previous (old) registers values\r\ndrd shows difference\r\n \r\n### Actual behavior\r\n\r\nExisting registers values are shown\r\n\r\n### Steps to reproduce the behavior \r\n```\r\n$> r2 -d -A /bin/ls\r\n[0x7f19e6f16100]> db main\r\n[0x7fcdf13cc100]> dc\r\nhit breakpoint at: 56112b619df0\r\n[0x55f108138df0]> pd 5\r\n            ; DATA XREF from entry0 @ 0x55f10813a7f1\r\nâ”Œ 4670: int main (int argc, char **argv, char **envp);\r\nâ”‚ bp: 0 (vars 0, args 0)\r\nâ”‚ sp: 9 (vars 9, args 0)\r\nâ”‚ rg: 2 (vars 0, args 2)\r\nâ”‚           0x55f108138df0      f30f1efa       endbr64\r\nâ”‚           0x55f108138df4      4157           push r15\r\nâ”‚           0x55f108138df6      4156           push r14\r\nâ”‚           0x55f108138df8      4155           push r13\r\nâ”‚           0x55f108138dfa      4154           push r12\r\n[0x55f108138df0]> ds\r\n[0x56112b619df4]> dro\r\nrax = 0x56112b619df0\r\nrbx = 0x00000000\r\nrcx = 0x56112b62c4e0\r\nrdx = 0x7ffc9005cd68\r\nr8 = 0x00000000\r\nr9 = 0x7fcdf13dc1f0\r\nr10 = 0x7fcdf13583eb\r\nr11 = 0x00000202\r\nr12 = 0x56112b61b7d0\r\nr13 = 0x7ffc9005cd50\r\nr14 = 0x00000000\r\nr15 = 0x00000000\r\nrsi = 0x7ffc9005cd58\r\nrdi = 0x00000001\r\nrsp = 0x7ffc9005cc78\r\nrbp = 0x56112b62c4e0\r\nrip = 0x56112b619df4\r\nrflags = 0x00000246\r\norax = 0xffffffffffffffff\r\n[0x56112b619df4]> dr\r\nrax = 0x56112b619df0\r\nrbx = 0x00000000\r\nrcx = 0x56112b62c4e0\r\nrdx = 0x7ffc9005cd68\r\nr8 = 0x00000000\r\nr9 = 0x7fcdf13dc1f0\r\nr10 = 0x7fcdf13583eb\r\nr11 = 0x00000202\r\nr12 = 0x56112b61b7d0\r\nr13 = 0x7ffc9005cd50\r\nr14 = 0x00000000\r\nr15 = 0x00000000\r\nrsi = 0x7ffc9005cd58\r\nrdi = 0x00000001\r\nrsp = 0x7ffc9005cc78\r\nrbp = 0x56112b62c4e0\r\nrip = 0x56112b619df4\r\nrflags = 0x00000246\r\norax = 0xffffffffffffffff\r\n[0x56112b619df4]> drd\r\n[0x56112b619df4]> \r\n```\r\n\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\nDrag and drop zip archives containing the Additional info here, don't use external services or link.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU4NTYxODYwMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Uhm just got an idea.. what about adding drro and drrd to diff old/new regstate with telescoping\n\n> On 13 Feb 2020, at 09:44, Khairulmizam Samsudin <notifications@github.com> wrote:\n> \n> ï»¿\n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tUbuntu x86_64\n> File format of the file you reverse (mandatory)\tELF\n> Architecture/bits of the file (mandatory)\tx86/64\n> r2 -v full output, not truncated (mandatory)\tradare2 4.2.0-git 23640 @ linux-x86-64 git.4.1.1-155-gdd95ed40a commit: dd95ed4 build: 2020-01-21__18:48:37\n> Expected behavior\n> \n> dro shows previous (old) registers values\n> drd shows difference\n> \n> Actual behavior\n> \n> Existing registers values are shown\n> \n> Steps to reproduce the behavior\n> \n> $> r2 -d -A /bin/ls\n> [0x7f19e6f16100]> s main\n> [0x55f108138df0]> pd 5\n>             ; DATA XREF from entry0 @ 0x55f10813a7f1\n> â”Œ 4670: int main (int argc, char **argv, char **envp);\n> â”‚ bp: 0 (vars 0, args 0)\n> â”‚ sp: 9 (vars 9, args 0)\n> â”‚ rg: 2 (vars 0, args 2)\n> â”‚           0x55f108138df0      f30f1efa       endbr64\n> â”‚           0x55f108138df4      4157           push r15\n> â”‚           0x55f108138df6      4156           push r14\n> â”‚           0x55f108138df8      4155           push r13\n> â”‚           0x55f108138dfa      4154           push r12\n> [0x55f108138df0]> ds\n> [0x7f19e6f16103]> dro\n> rax = 0x00000000\n> rbx = 0x00000000\n> rcx = 0x00000000\n> rdx = 0x00000000\n> r8 = 0x00000000\n> r9 = 0x00000000\n> r10 = 0x00000000\n> r11 = 0x00000000\n> r12 = 0x00000000\n> r13 = 0x00000000\n> r14 = 0x00000000\n> r15 = 0x00000000\n> rsi = 0x00000000\n> rdi = 0x7ffdafaae9a0\n> rsp = 0x7ffdafaae9a0\n> rbp = 0x00000000\n> rip = 0x7f19e6f16103\n> rflags = 0x00000202\n> orax = 0xffffffffffffffff\n> [0x7f19e6f16103]> dr\n> rax = 0x00000000\n> rbx = 0x00000000\n> rcx = 0x00000000\n> rdx = 0x00000000\n> r8 = 0x00000000\n> r9 = 0x00000000\n> r10 = 0x00000000\n> r11 = 0x00000000\n> r12 = 0x00000000\n> r13 = 0x00000000\n> r14 = 0x00000000\n> r15 = 0x00000000\n> rsi = 0x00000000\n> rdi = 0x7ffdafaae9a0\n> rsp = 0x7ffdafaae9a0\n> rbp = 0x00000000\n> rip = 0x7f19e6f16103\n> rflags = 0x00000202\n> orax = 0xffffffffffffffff\n> [0x7f19e6f16103]> drd\n> [0x7f19e6f16103]> \n> Additional Logs, screenshots, source-code, configuration dump, ...\n> \n> Drag and drop zip archives containing the Additional info here, don't use external services or link.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-02-13T08:53:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15962#issuecomment-585618603","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU4ODA1Mzg1NQ==","author":{"login":"x0urc3"},"authorAssociation":"CONTRIBUTOR","body":"aro/ard also affected","createdAt":"2020-02-19T06:12:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15962#issuecomment-588053855","viewerDidAuthor":false}],"number":15962,"title":"dro/drd does not show old/difference register values"},{"body":"```\r\n> wx 297d0a9b\r\n> pd 1\r\nmul x9, x9, x10\r\n> e asm.pseudo = 1\r\n> pd 1\r\nx9 = x9 + x10\r\n```\r\n\r\nexpected:\r\n\r\n```\r\nx9 += x10\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU4NDE2MTE4NQ==","author":{"login":"x0urc3"},"authorAssociation":"CONTRIBUTOR","body":"You mean ```x9 *= x10```?","createdAt":"2020-02-10T14:54:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15947#issuecomment-584161185","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU4NDUxNTU0MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Yes","createdAt":"2020-02-11T07:59:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15947#issuecomment-584515540","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU4NjgwMjUzMw==","author":{"login":"x0urc3"},"authorAssociation":"CONTRIBUTOR","body":"I've inspected libr/parse and the pseudo syntax has been hard coded. May need to modify the pseudo parser to detect that destination register is the same as one of the sources register","createdAt":"2020-02-17T03:29:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15947#issuecomment-586802533","viewerDidAuthor":false}],"number":15947,"title":"pseudo for arm64 can be improved (+= vs +)"},{"body":"```\r\nrasm2  -a tricore -D 'be22'\r\n```\r\n\r\n```\r\n0x800898ee   2                     be22  .hword 0x22be\r\n```\r\n\r\nshould be `jeq d15, d2, 0x80089912` (from ghidra)\r\n\r\n![image](https://user-images.githubusercontent.com/8949910/73408040-ec165380-42c8-11ea-86b8-38dce4fa2896.png)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU5NDc0MjI2MA==","author":{"login":"c-urly"},"authorAssociation":"CONTRIBUTOR","body":"I need some clarification for tricode ISA\r\nAccording to its documentation it has only two versions then what is this below structure?\r\n```\r\ntypedef enum _tricore_opcode_arch_val\r\n{\r\n  TRICORE_GENERIC = 0x00000000,\r\n  TRICORE_RIDER_A = 0x00000001,\r\n  TRICORE_RIDER_B = 0x00000002,\r\n  TRICORE_RIDER_D = TRICORE_RIDER_B,\r\n  TRICORE_V2      = 0x00000004,\r\n  TRICORE_PCP     = 0x00000010,\r\n  TRICORE_PCP2    = 0x00000020\r\n} tricore_isa;\r\n```\r\n<img width=\"1073\" alt=\"Screenshot 2020-03-05 at 12 11 18 AM\" src=\"https://user-images.githubusercontent.com/14140421/75911734-05855f00-5e76-11ea-960c-b1300f301e09.png\">\r\n\r\nWhat is the use of TRICORE V2,PCP and PCP2? \r\n@radare @XVilka ","createdAt":"2020-03-04T18:44:08Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15912#issuecomment-594742260","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5NjAxMTQzNg==","author":{"login":"c-urly"},"authorAssociation":"CONTRIBUTOR","body":"which ISA does this instruction belongs to? and how to know it?","createdAt":"2020-03-06T23:47:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15912#issuecomment-596011436","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwOTQ0NjI4OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"is this issue fixed now? @c-urly ","createdAt":"2020-04-05T16:47:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15912#issuecomment-609446288","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMjAwMDUwNw==","author":{"login":"c-urly"},"authorAssociation":"CONTRIBUTOR","body":"I need to add tests the below testcase are fine?  @radare \r\n```\r\ndiff --git a/test/new/db/tools/rasm2 b/test/new/db/tools/rasm2\r\nindex 54b1ca26c..c23248d53 100644\r\n--- a/test/new/db/tools/rasm2\r\n+++ b/test/new/db/tools/rasm2\r\n@@ -537,3 +537,19 @@ EXPECT=<<EOF\r\n 0x0000000c   2                     e031  cmp/eq r14, r1\r\n EOF\r\n RUN\r\n+\r\n+NAME=rasm -a tricore -D\r\n+FILE=-\r\n+CMDS=!rasm2 -a tricore -c v2 -D \"be22\"\r\n+EXPECT=<<EOF\r\n+0x00000000   2                     be22  jeq d15, d2, 0x00000024\r\n+EOF\r\n+RUN\r\n+\r\n+NAME=rasm -a tricore -D\r\n+FILE=-\r\n+CMDS=!rasm2 -a tricore -D \"be22\"\r\n+EXPECT=<<EOF\r\n+0x00000000   2                     be22  .hword 0x22be\r\n+EOF\r\n+RUN\r\n\\ No newline at end of file\r\n\r\n```\r\n\r\n","createdAt":"2020-04-10T12:02:50Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15912#issuecomment-612000507","viewerDidAuthor":false}],"number":15912,"title":"rasm2 jeq tricore diassembly error"},{"body":"Firstly, many thanks for this great framework (particularly for features like r2pipe and Cutter)! \r\n\r\n**Issue Description**\r\nI'm trying to perform static analysis of a stripped binary file, and the goal is to do this using Python via r2pipe. \r\n\r\nWhen I open the binary file in Cutter and specify certain options, Cutter is able to disassemble and display the contents within seconds. But when I use r2pipe with the same options, it takes a very long time (not sure how long, because I terminate it after about 15 minutes). \r\n\r\n_Cutter options:_\r\n<img width=\"297\" alt=\"cutter_options\" src=\"https://user-images.githubusercontent.com/29951305/73123436-d3840180-3f87-11ea-8c08-092e6bbbd2f3.png\">\r\n\r\n \r\n_r2pipe code:_\r\n```\r\nimport time\r\nimport r2pipe\r\n\r\nfilepath = <valid_filepath>\r\n\r\nr2 = r2pipe.open(filepath, flags=['-m', '0'])\r\nr2.cmd('e asm.arch=arm')\r\nr2.cmd('e asm.cpu=cortex')\r\nr2.cmd('e asm.bits=16')\r\nr2.cmd('e cfg.bigendian=false')\r\n\r\nstart_time = time.time()\r\nr2.cmd('aaa')     # Cutter specifies level as \"Auto-analysis\"\r\nelapsed_time = time.time() - start_time\r\n\r\nprint('Completed analysis')\r\ntime.strftime(\"%H:%M:%S\", time.gmtime(elapsed_time))\r\n\r\nr2.quit()\r\n```\r\n\r\n(I know this code doesn't do anything other than the auto-analysis, but for now I just want the `Completed analysis` message to be printed.)\r\n\r\n\r\n**Environment:**\r\n* OS:\r\n    Windows 10 64-bit\r\n\r\n* radare2:\r\n    radare2 4.3.0-git 23679 @ windows-x86-32 git.4.2.0-16-g04f065c68\r\n    commit: 04f065c68c35e49996dc138560e99489e0a45dcb build: 25/01/2020__ 8:31:33.55\r\n\r\n* Cutter:\r\n    Version 1.10.0\r\n    Using r2-4.1.1\r\n    Based on Qt 5.12.5 (MSVC 2017, 64 bit)\r\n\r\n* r2pipe:\r\n    Version: 1.4.2\r\n\r\n* Python:\r\n    Python 3.8.0 (tags/v3.8.0:fa919fd, Oct 14 2019, 19:21:23) [MSC v.1916 32 bit (Intel)] on win32\r\n\r\n\r\n**Questions:**\r\n* Should I install radare2-4.1.1 to match Cutter? (i.e., would it be faster?)\r\n* Are the default configs for Cutter and normal radare2 different?\r\n\r\nThank you very much.\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYwNTQzMDk2Mg==","author":{"login":"ITAYC0HEN"},"authorAssociation":"CONTRIBUTOR","body":"Thank you for your kind words :)\r\nWould you mind sharing the binary itself so we can investigate?\r\n\r\nIndeed, try to use the latest radare2. In addition, please try to execute these stuff straight from radare2 and not from r2pipe. Let's understand what causes the issue :)\r\n\r\n\r\n\r\n\r\n\r\n","createdAt":"2020-03-28T10:57:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16947#issuecomment-605430962","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYzMzQzNjU5Ng==","author":{"login":"ITAYC0HEN"},"authorAssociation":"CONTRIBUTOR","body":"Hey @projectbtle , is the binary available for sharing? It will help us to test and solve this problem :)","createdAt":"2020-05-25T07:59:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16947#issuecomment-633436596","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYzNzA1MjM5Ng==","author":{"login":"projectbtle"},"authorAssociation":"NONE","body":"Apologies for the significant delay in responding. Unfortunately, the binary may contain proprietary information, so I don't think it can be shared.","createdAt":"2020-06-01T19:17:12Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/16947#issuecomment-637052396","viewerDidAuthor":false}],"number":16947,"title":"Significant time difference in executing `aaa` with r2pipe vs. Cutter"},{"body":"> With GNU Binutils 2.34 comes debuginfod support, which is the HTTP server catching our eye while the debuginfod server is distributed as part of the latest elfutils package. This isn't for a general purpose web server thankfully but is an HTTP server for distributing ELF/DWARF debugging information and source code. With debuginfod enabled, Binutils' `readelf` and `objdump` utilities can query the HTTP server(s) for debug files that cannot otherwise be found. Enabling this option requires building Binutils using `--with-debuginfod`. \r\n\r\nSee https://developers.redhat.com/blog/2019/10/14/introducing-debuginfod-the-elfutils-debuginfo-server/ for more information.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU5Mzc1NjU4NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Probably should act similar to the current PDB symbol server request support, maybe even share some code: \r\n- `libr/bin/pdb`\r\n- `libr/bin/pdb/pdb_downloader.c`\r\n- `libr/bin/dwarf.c`","createdAt":"2020-03-03T04:03:48Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15853#issuecomment-593756584","viewerDidAuthor":false}],"number":15853,"title":"Support interfacing with debuginfod from binutils"},{"body":"I think clang-format is stable enough nowadays.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU3NTUyNTcyMg==","author":{"login":"karliss"},"authorAssociation":"CONTRIBUTOR","body":"Does it mean removal of nospace before parentheses in function definition rule? Clang format can't differentiate between the declaration and definition an probably never will due to design choices. ","createdAt":"2020-01-17T08:24:14Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15831#issuecomment-575525722","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTUzMDgwNw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"You can use one of these solutions for the search instead:\r\n- LSP with [ccls](https://github.com/MaskRay/ccls/) \r\n- [coccigrep](http://home.regit.org/software/coccigrep/) - see its GitHub (http://home.regit.org/software/coccigrep/)\r\n- we can try to setup [Mozilla DXR](https://wiki.mozilla.org/DXR).\r\n- at some point GitHub will add the semantic search for C/C++ with its Semantic library https://github.com/github/semantic/issues/154","createdAt":"2020-01-17T08:41:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15831#issuecomment-575530807","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTU1OTk0MQ==","author":{"login":"karliss"},"authorAssociation":"CONTRIBUTOR","body":"I don't have problems with searching for definition using my IDE. Just wanted to make sure there are conflicts between coding style guide and the tools.","createdAt":"2020-01-17T10:05:51Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15831#issuecomment-575559941","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTYwMDkzNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I think indenting by hand is not that painful nowadays for us. And i will not apend time trying clang format now. Low prio for me. But i understand the need\n\n> On 17 Jan 2020, at 11:05, karliss <notifications@github.com> wrote:\n> \n> ï»¿\n> I don't have problems with searching for definition. Just wanted to make sure there are conflicts between coding style guide and the tools.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-01-17T12:07:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15831#issuecomment-575600935","viewerDidAuthor":false}],"number":15831,"title":"Reindent whole code (except imported one)"},{"body":"\r\nhttps://sourceware.org/gdb/current/onlinedocs/stabs/\r\n\r\nhttps://twitter.com/j00ru/status/1216706807651016704?s=19","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU5NjA4NDQ4OA==","author":{"login":"c-urly"},"authorAssociation":"CONTRIBUTOR","body":"This should be the same as in objdump right?\r\n\r\n```\r\n$ objdump --stabs hello.o\r\n\r\nhello.o:     file format elf64-x86-64\r\n\r\nContents of .stab section:\r\n\r\nSymnum n_type n_othr n_desc n_value  n_strx String\r\n\r\n-1     HdrSym 0      134    000000000000119e 1     \r\n0      SO     0      2      0000000000001135 1      hello.c\r\n1      OPT    0      0      0000000000000000 9      gcc2_compiled.\r\n2      LSYM   0      0      0000000000000000 24     int:t(0,1)=r(0,1);-2147483648;2147483647;\r\n3      LSYM   0      0      0000000000000000 66     char:t(0,2)=r(0,2);0;127;\r\n4      LSYM   0      0      0000000000000000 92     long int:t(0,3)=r(0,3);-9223372036854775808;9223372036854775807;\r\n5 LSYM 0 0 0000000000000000 157 unsigned int:t(0,4)=r(0,4);0;4294967295;\r\n```\r\n","createdAt":"2020-03-07T12:44:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15810#issuecomment-596084488","viewerDidAuthor":false}],"number":15810,"title":"Stabs format parser"},{"body":"**Is your feature request related to a problem? Please describe.**\r\n`iD` command can used to demangle symbol name, but looks like it's only support known patterns.\r\n\r\nfor symbol name like `_AddColor__10ZafDisplayUcUcUcUcUc`, demangle using Ghidra API can force  demangle that symbol name.\r\n```python\r\n>>> from ghidra.app.util.demangler.gnu import GnuDemangler\r\n>>> demangler = GnuDemangler()\r\n>>> symbol_name_string = \"_AddColor__10ZafDisplayUcUcUcUcUc\"\r\n>>> demangler.demangle(symbol_name_string, False)  # Set demangleOnlyKnownPatterns to False\r\nundefined ZafDisplay::_AddColor(unsigned char,unsigned char,unsigned char,unsigned char,unsigned char) \r\n```\r\n\r\nBut r2 can't do that or maybe r2 can do the same thing in different way?\r\n```\r\n[0x00000000]> iD c++ _ZNSo3putEc\r\nstd::ostream::put(char)\r\n[0x00000000]> iD c++ _AddColor__10ZafDisplayUcUcUcUcUc\r\n# Get nothing\r\n[0x00000000]>\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU3MTIxNjE1Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"If pttern is unknown it wont be demangled even if forced. If its missing some prefix we should add it to extend the demangler\n\n> On 6 Jan 2020, at 08:29, dark-lbp <notifications@github.com> wrote:\n> \n> ï»¿\n> Is your feature request related to a problem? Please describe.\n> iD command can used to demangle symbol name, but looks like it's only support known patterns.\n> \n> for symbol name like _AddColor__10ZafDisplayUcUcUcUcUc, demangle using Ghidra API can force demangle that symbol name.\n> \n> >>> from ghidra.app.util.demangler.gnu import GnuDemangler\n> >>> demangler = GnuDemangler()\n> >>> symbol_name_string = \"_AddColor__10ZafDisplayUcUcUcUcUc\"\n> >>> demangler.demangle(symbol_name_string, False)  # Set demangleOnlyKnownPatterns to False\n> undefined ZafDisplay::_AddColor(unsigned char,unsigned char,unsigned char,unsigned char,unsigned char) \n> But r2 can't do that or maybe r2 can do the same thing in different way?\n> \n> [0x00000000]> iD c++ _ZNSo3putEc\n> std::ostream::put(char)\n> [0x00000000]> iD c++ _AddColor__10ZafDisplayUcUcUcUcUc\n> # Get nothing\n> [0x00000000]>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-01-06T16:50:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15766#issuecomment-571216156","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3MTIxNjc3OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Actually this _A is not an actual prefix. And may be quite anoying to blindly demangle anything.. what other tools do?\n\n> On 6 Jan 2020, at 08:29, dark-lbp <notifications@github.com> wrote:\n> \n> ï»¿\n> Is your feature request related to a problem? Please describe.\n> iD command can used to demangle symbol name, but looks like it's only support known patterns.\n> \n> for symbol name like _AddColor__10ZafDisplayUcUcUcUcUc, demangle using Ghidra API can force demangle that symbol name.\n> \n> >>> from ghidra.app.util.demangler.gnu import GnuDemangler\n> >>> demangler = GnuDemangler()\n> >>> symbol_name_string = \"_AddColor__10ZafDisplayUcUcUcUcUc\"\n> >>> demangler.demangle(symbol_name_string, False)  # Set demangleOnlyKnownPatterns to False\n> undefined ZafDisplay::_AddColor(unsigned char,unsigned char,unsigned char,unsigned char,unsigned char) \n> But r2 can't do that or maybe r2 can do the same thing in different way?\n> \n> [0x00000000]> iD c++ _ZNSo3putEc\n> std::ostream::put(char)\n> [0x00000000]> iD c++ _AddColor__10ZafDisplayUcUcUcUcUc\n> # Get nothing\n> [0x00000000]>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-01-06T16:52:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15766#issuecomment-571216779","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3MTMxNzcxNg==","author":{"login":"karliss"},"authorAssociation":"CONTRIBUTOR","body":"From [this](https://www.agner.org/optimize/calling_conventions.pdf) document looks like GNU v2 mangling scheme. It doesn't really have much of a prefix except \"_\" on some platforms.\r\nR2 only supports GNU v3 and MSVC name mangling. The code on which the current GNU demangler is based on might have supported the V2 scheme as it contains  `gnu_demangling` and `  gnu_v3_demangling` in the list mangling styles.","createdAt":"2020-01-06T21:15:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15766#issuecomment-571317716","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3MTM4MjY5Mw==","author":{"login":"dark-lbp"},"authorAssociation":"NONE","body":"Ghidra using demangler_gnu to demangle symbol name.\r\nSource code is [here](https://github.com/NationalSecurityAgency/ghidra/tree/master/GPL/DemanglerGnu/src/demangler_gnu)\r\n\r\ndemangle API source Code is below:\r\nhttps://github.com/NationalSecurityAgency/ghidra/blob/master/Ghidra/Features/GnuDemangler/src/main/java/ghidra/app/util/demangler/gnu/GnuDemangler.java#L58\r\nhttps://github.com/NationalSecurityAgency/ghidra/blob/master/Ghidra/Features/GnuDemangler/src/main/java/ghidra/app/util/demangler/gnu/GnuDemanglerNativeProcess.java#L87\r\n\r\n> Actually this _A is not an actual prefix. And may be quite anoying to blindly demangle anything.. what other tools do?\r\n> [â€¦](#)\r\n> On 6 Jan 2020, at 08:29, dark-lbp ***@***.***> wrote: ï»¿ Is your feature request related to a problem? Please describe. iD command can used to demangle symbol name, but looks like it's only support known patterns. for symbol name like _AddColor__10ZafDisplayUcUcUcUcUc, demangle using Ghidra API can force demangle that symbol name. >>> from ghidra.app.util.demangler.gnu import GnuDemangler >>> demangler = GnuDemangler() >>> symbol_name_string = \"_AddColor__10ZafDisplayUcUcUcUcUc\" >>> demangler.demangle(symbol_name_string, False) # Set demangleOnlyKnownPatterns to False undefined ZafDisplay::_AddColor(unsigned char,unsigned char,unsigned char,unsigned char,unsigned char) But r2 can't do that or maybe r2 can do the same thing in different way? [0x00000000]> iD c++ _ZNSo3putEc std::ostream::put(char) [0x00000000]> iD c++ _AddColor__10ZafDisplayUcUcUcUcUc # Get nothing [0x00000000]> â€” You are receiving this because you are subscribed to this thread. Reply to this email directly, view it on GitHub, or unsubscribe.\r\n\r\n","createdAt":"2020-01-07T00:53:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15766#issuecomment-571382693","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTY4Mjc2Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"it doesnt matter if we force to have no filter. the gnu disassembler doesnt demangles anything from this string","createdAt":"2020-01-17T15:54:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15766#issuecomment-575682762","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTY4MzQ2NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"c++filt from llvm seems to support it, so i guess that we are using an old c++ demangler (gnu-v3). we can try updating it and see if it works","createdAt":"2020-01-17T15:56:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15766#issuecomment-575683464","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTY5OTYxMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"https://github.com/radareorg/radare2/pull/15837\r\n\r\nnot much luck so far, we can add another c++ demangler name. feel free to play with the new code in this pr and see if you can make it work. ill try the same, but probably that wont happen for this release (3 days left)","createdAt":"2020-01-17T16:34:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15766#issuecomment-575699612","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NjA1NDQwMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cannot fix yet, moving to 4.3","createdAt":"2020-01-19T22:27:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15766#issuecomment-576054400","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwOTQ0NjE3OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"we need libdemangle first","createdAt":"2020-04-05T16:47:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15766#issuecomment-609446178","viewerDidAuthor":false}],"number":15766,"title":"Support force demangle symbol name with unknown patterns"},{"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nAs a result of #15702, the disassembly will change how flags are displayed:\r\n\r\nFor example, this:\r\n```\r\ncall  dword   [sym.imp.user32.dll_CreateWindowExA]\r\n```\r\n\r\nTo this:\r\n```\r\ncall CreateWindowExA\r\n```\r\n\r\nThus, users will try to use `CreateWindowExA` as the name of the flags in their commands.\r\nThings like `s CreateWindowExA` or `pdf @ CreateWindowExA`. This will not work for them because this is not the name of the flag.\r\n \r\n\r\n**Describe the solution**\r\n\r\nSay the user will want to do `s LoadLibraryA` or `pdf @ LoadLibraryA`, radare2 will behave like this:\r\n\r\nIf only one flag contains this substring in its `name` or in its `realname` (e.g. only `imp.kernel32_dll.LoadLibraryA` will contain `LoadLibraryA`), then the seek will be to this address. There is no doubt that this is what the user expects so it's an easy decision and we can simply apply it for them.\r\n\r\nIf there are more then one option, then r2 will show something like this:\r\n\r\n```\r\nMultiple flags matched 'LoadLibraryA'. Did you mean to one of the following flags that contain this string:\r\n0x4001234    imp.kernel32_dll.LoadLibraryA\r\n0x7e01133    imp.someOther_dll.LoadLibraryA\r\n```\r\n\r\n\r\nThis change will help in other cases as well and make the usage more friendly","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU3NTU5NzQ0Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"this is fixed now in master, or at least pretty improved after asm.flags.real but we need to have realname field in functions to not conflict with the function renamings","createdAt":"2020-01-17T11:55:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15747#issuecomment-575597446","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTU5NzU0Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@ITAYC0HEN can we close this issue?","createdAt":"2020-01-17T11:55:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15747#issuecomment-575597546","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTYxODg0Mw==","author":{"login":"ITAYC0HEN"},"authorAssociation":"CONTRIBUTOR","body":"i don't think we touched this issue yet?\r\nThis issue will require another hashtable for flag realnames in order to quickly search for the right flag.\r\n\r\nThe idea is that when a user will use realname and see something like \"call VirtualAlloc\" they will be able to perform \"s VirtualAlloc\" without having to specify the whole \"sym.imp.kernel32_dll\" thing. \r\n\r\nA usage of a string (flag) in command will go this way:\r\n\r\n1. string == flag name\r\n2. string == flag real name\r\n3. string contained in flag name\r\n\r\nso if the user will do \r\n```\r\npd 3 @ sym.imp.user32.dll_CreateWindowExA + 5\r\n```\r\n then it's easy, r2 will behave is it behaves now.\r\nBut if it will do\r\n```\r\npd 3 @ CreateWindowExA + 5\r\n```\r\nthen we want r2 to understand it as well.\r\n\r\nthis thoroughly describe in the issue. read carefully. ","createdAt":"2020-01-17T13:08:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15747#issuecomment-575618843","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTY0Mzk2OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Ok then moving fwd\n\n> On 17 Jan 2020, at 14:08, Itay Cohen <notifications@github.com> wrote:\n> \n> ï»¿\n> i don't think we touched this issue yet?\n> This issue will require another hashtable for flag realnames in order to quickly search for the right flag.\n> \n> The idea is that when a user will use realname and see something like \"call VirtualAlloc\" they will be able to perform \"s VirtualAlloc\" without having to specify the whole \"sym.imp.kernel32_dll\" thing.\n> \n> A usage of a string (flag) in command will go this way:\n> \n> string == flag name\n> string == flag real name\n> string contained in flag name\n> so if the user will do\n> \n> pd 3 @ sym.imp.user32.dll_CreateWindowExA + 5\n> then it's easy, r2 will behave is it behaves now.\n> But if it will do\n> \n> pd 3 @ CreateWindowExA + 5\n> then we want r2 to understand it as well.\n> \n> this thoroughly describe in the issue. read carefully.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-01-17T14:18:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15747#issuecomment-575643969","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwNjk0MTA5NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Kind of related to https://github.com/radareorg/radare2/pull/12064","createdAt":"2020-03-31T23:34:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15747#issuecomment-606941095","viewerDidAuthor":false}],"number":15747,"title":"Smart correction of flags usage"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nSometimes strings with special chars from json output of `izzj`  break another parser or these special characters uses in another software yet that receive this output.\r\n\r\n**Describe the solution you'd like**\r\nRadare2 has this ability for create links yet. For example, sanitize `str.ls:__s:__s` and raw `\\nls: %s: %s\\n` from `/bin/ls` binary.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU2OTQzNjQ0OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"json output should be always correct, even on unprintable chars. at least if its using the pj api\n\n> On 27 Dec 2019, at 15:05, Boris Ryutin <notifications@github.com> wrote:\n> \n> Is your feature request related to a problem? Please describe.\n> Sometimes strings with special chars from json output of izzj break another parser or these special characters uses in another software yet that receive this output.\n> \n> Describe the solution you'd like\n> Radare2 has this ability for create links yet. For example, sanitize str.ls:__s:__s and raw \\nls: %s: %s\\n from /bin/ls binary.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/15713?email_source=notifications&email_token=AAG75FQQZH3XDZB6WZI7X4TQ2YDR5A5CNFSM4J74W7VKYY3PNVWWK3TUL52HS4DFUVEXG43VMWVGG33NNVSW45C7NFSM4IC3ZDKQ>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FVW45DTMXOKWAPSAJLQ2YDR5ANCNFSM4J74W7VA>.\n> \n\n","createdAt":"2019-12-28T17:32:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15713#issuecomment-569436449","viewerDidAuthor":false}],"number":15713,"title":"Add column for sanitize strings in `izj/izzj` outputs"},{"body":"Motorola [SREC](https://en.wikipedia.org/wiki/SREC_(file_format)) format is another popular text binary representation format along with Intel's IHEX. Similar to `ihex://` it should be the IO plugin.\r\n\r\nIt looks something like:\r\n```\r\nS00F000068656C6C6F202020202000003C\r\nS11F00007C0802A6900100049421FFF07C6C1B787C8C23783C6000003863000026\r\nS11F001C4BFFFFE5398000007D83637880010014382100107C0803A64E800020E9\r\nS111003848656C6C6F20776F726C642E0A0042\r\nS5030003F9\r\nS9030000FC\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU4NDYxOTYzNw==","author":{"login":"ManasviPatidar"},"authorAssociation":"NONE","body":"Hi, @XVilka can you point me towards the entry points, resources or any similar work to get me started with this issue. I have already gone through the CONTRIBUTING.md and DEVELOPER.md, and I am trying to understand the relevant code right now.","createdAt":"2020-02-11T12:51:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15699#issuecomment-584619637","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU4NDY3NTkzOA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@ManasviPatidar Hi, I started to work on this but then had not time to continue, you can pick up here: https://github.com/XVilka/radare2/commit/3ba923ed85d8a0fb32c520c6645db9ea8f9a08cd\r\n\r\nSee also `libr/io/p/io_hex.c` as an example.","createdAt":"2020-02-11T14:58:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/15699#issuecomment-584675938","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5OTQ4MTY4Mw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@ManasviPatidar have you had any luck with this issue?","createdAt":"2020-03-16T11:19:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15699#issuecomment-599481683","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5OTQ4OTEwOA==","author":{"login":"ManasviPatidar"},"authorAssociation":"NONE","body":"Sorry, I couldn't find time to work on it.","createdAt":"2020-03-16T11:38:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15699#issuecomment-599489108","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyOTg3MDgwNg==","author":{"login":"pabx06"},"authorAssociation":"NONE","body":"me too looking for SREC. IDA & ghidra seems to handle it . but it would be nice to have it in radare2","createdAt":"2020-05-17T22:32:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15699#issuecomment-629870806","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYzMDAxNDczMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"If someone have samples and time to take care of this it should be as simple as taking the ihex io plugin and rename it to srec and parse it there\n\n> On 18 May 2020, at 00:32, LAADHARI <notifications@github.com> wrote:\n> \n> ï»¿\n> me too looking for SREC. IDA & ghidra seems to handle it . but it would be nice to have it in radare2\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-05-18T08:02:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15699#issuecomment-630014730","viewerDidAuthor":false}],"number":15699,"title":"SREC format support"},{"body":"\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 18.04.3 x64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | ARM32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.1.0-git 23788 @ linux-x86-64 git.4.0.0-207-g49e523937 commit: 49e523937ed4627ee36fd84d351af3a088aed4b8 build: 2019-12-13__03:38:33\r\n\r\n### Expected behavior\r\nSome ARM32/Thumb functions recognized. IDA 7.4 recognizes 34 functions\r\n\r\n### Actual behavior\r\nNo thumb detection when performing normal analysis `aaa`\r\n\r\n### Steps to reproduce the behavior \r\n- Open binary\r\n- analyze it with `aaa`\r\n- List functions with `afl`\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\nSample: [libm0vie.so.zip](https://github.com/radareorg/radare2/files/3958768/libm0vie.so.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU2NTc2OTA1NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"The anal hints taken from the ELF parser seems to mess a bit the analysis, use those commands as a workaround\r\n\r\n```\r\n$ r2 -c 'ah-*;ahb 16;omfg;aac;aflc' libm0vie.so\r\nCannot analyze at 0x001946be\r\nCannot analyze at 0x0018fde8\r\n299\r\n[0x00038880]>\r\n```","createdAt":"2019-12-15T01:39:46Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15622#issuecomment-565769055","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2NjExMDE1Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"```\r\n$ r2 libm0vie.so\r\n[0x00038880]> ah~?\r\n417\r\n[0x00038880]> pd 2\r\n            ;-- entry0, section..text, pc, r15:\r\n            0x00038880      strlt r4,   [r0,  -0xb0f]                        ; [12] -r-x section size 4096 named .text\r\n            0x00038884      ldmdavs fp,   {r0,  r1,   r3,   r4,   r5,   r6,   sl,   lr}\r\n[0x00038880]> e asm.bits\r\n32\r\n[0x00038880]> e asm.bits=16\r\n[0x00038880]> e asm.bits\r\n16\r\n[0x00038880]> pd 2\r\n            ;-- entry0, section..text, pc, r15:\r\n            0x00038880      strlt r4,   [r0,  -0xb0f]                        ; [12] -r-x section size 4096 named .text\r\n            0x00038884      ldmdavs fp,   {r0,  r1,   r3,   r4,   r5,   r6,   sl,   lr}\r\n[0x00038880]> e asm.bits\r\n32\r\n[0x00038880]> ah-*\r\n[0x00038880]> e asm.bits=16\r\n[0x00038880]> pd 2\r\n            ;-- entry0, section..text, pc, r15:\r\n            0x00038880      strlt r4,   [r0,  -0xb0f]                        ; [12] -r-x section size 4096 named .text\r\n            0x00038884      ldmdavs fp,   {r0,  r1,   r3,   r4,   r5,   r6,   sl,   lr}\r\n[0x00038880]> e asm.bits\r\n32\r\n[0x00038880]> e asm.bits=16\r\n[0x00038880]> pd 2\r\n            ;-- entry0, section..text, pc, r15:\r\n            0x00038880      strlt r4,   [r0,  -0xb0f]                        ; [12] -r-x section size 4096 named .text\r\n            0x00038884      ldmdavs fp,   {r0,  r1,   r3,   r4,   r5,   r6,   sl,   lr}\r\n[0x00038880]> ah~?\r\n0\r\n[0x00038880]>\r\n```","createdAt":"2019-12-16T15:29:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15622#issuecomment-566110153","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2NzEwMDI0Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i did another fix for this thumb block issue in a PR, will be merged soon","createdAt":"2019-12-18T16:11:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/15622#issuecomment-567100242","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NjA1NDQxMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping @thestr4ng3r ","createdAt":"2020-01-19T22:27:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15622#issuecomment-576054413","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY2NDQyMDE1NA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@thestr4ng3r I see you are assigned on this issue. Just to know, do you think you'll be able to perform it for next release (let's say, in 2 months)? Not putting any pressure, I just want to organize issues for next release.","createdAt":"2020-07-27T14:10:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15622#issuecomment-664420154","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY2NjMxMjE2Mw==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"No, don't count on it.","createdAt":"2020-07-30T11:34:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15622#issuecomment-666312163","viewerDidAuthor":false}],"number":15622,"title":"No functions are detected on ARM code due to weak Thumb code recognition"},{"body":"![Bildschirmfoto vom 2019-11-30 10-33-24](https://user-images.githubusercontent.com/1460997/69898693-fe255580-135c-11ea-969a-d52c9b8c0b3a.png)\r\n","comments":[],"number":15533,"title":"Arrows are broken in pd--"},{"body":"We currently have per-block entropy printing with `p=e`. Would be nice to have the more condensed mode of printing only the rising/falling edges, like in the `binwalk -E` mode:\r\n```\r\n[i] â„¤ binwalk -E hugo_elf                                                                                                                                                                                                          17:14:18 \r\n\r\nDECIMAL       HEXADECIMAL     ENTROPY\r\n--------------------------------------------------------------------------------\r\n0             0x0             Falling entropy edge (0.669811)\r\n33920000      0x2059400       Falling entropy edge (0.500119)\r\n34128896      0x208C400       Falling entropy edge (0.814289)\r\n34181120      0x2099000       Falling entropy edge (0.739773)\r\n\r\n[i] â„¤ binwalk -E hugo_gz                                                                                                                                                                                                           17:14:32 \r\n\r\nDECIMAL       HEXADECIMAL     ENTROPY\r\n--------------------------------------------------------------------------------\r\n0             0x0             Rising entropy edge (0.995563)\r\n3024896       0x2E2800        Rising entropy edge (0.965233)\r\n5500928       0x53F000        Rising entropy edge (0.990217)\r\n5543936       0x549800        Rising entropy edge (0.970625)\r\n5672960       0x569000        Rising entropy edge (0.957641)\r\n6060032       0x5C7800        Rising entropy edge (0.978857)\r\n7462912       0x71E000        Rising entropy edge (0.961115)\r\n7530496       0x72E800        Rising entropy edge (0.958497)\r\n7591936       0x73D800        Rising entropy edge (0.952436)\r\n7622656       0x745000        Rising entropy edge (0.953014)\r\n```","comments":[],"number":15510,"title":"Add entropy edges printing mode"},{"body":"It is often possible to autodetect the architecture of the raw code, assuming it is the code.\r\nOne of the examples (open source) on how it is possible to do through a statistical inference is https://github.com/airbus-seclab/cpu_rec\r\n\r\nSee their documentation about the algorithm itself: https://github.com/airbus-seclab/cpu_rec/blob/master/doc/cpu_rec_sstic_english.md\r\n\r\nThere are two more or less mature pure C libraries for machine learning:\r\n- https://github.com/codeplea/genann\r\n- https://github.com/attractivechaos/kann\r\n\r\nSo it is even possible to make this a part of the core.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU1OTAyNzIxNQ==","author":{"login":"hmht"},"authorAssociation":"CONTRIBUTOR","body":"Anton Kochkov writes:\n> See their documentation about the algorithm itself: [...]\n\nTL;DR: \"machine learning\"\n\nas you might expect from that fact, the article makes note that uC compilers\nhave sufficiently different output to not actually be recognisable. I'm sure\nit's even worse for hand-written assembly programs.\n\n\nI bet there's a better way. My first stupid idea would just be to\ndisassemble a few chunks with many architectures and counting the number\nof \"invalid\"s.\n","createdAt":"2019-11-27T10:26:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15506#issuecomment-559027215","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU1OTA2OTE2NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Well, you can build some kind of heuristics too, indeed, without the relying on the ML's blackbox. It's the implementation details.","createdAt":"2019-11-27T12:33:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15506#issuecomment-559069164","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5OTQ5NTQwNg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See also https://github.com/radareorg/radare2/issues/12040","createdAt":"2020-03-16T11:55:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15506#issuecomment-599495406","viewerDidAuthor":false}],"number":15506,"title":"Automated architecture detection for raw binaries"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | OSX Catalina 10.15.1\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | Mach-O 64-bit executable x86_64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.1.0-git 23205 @ darwin-x86-64 git.3.2.1-2655-gff71c411c commit: ff71c411c7cd806f22c4705d67a0086cbefd9662 build: 2019-11-18__15:40:17\r\n\r\n### Expected behavior\r\n\r\n```\r\n$ wget \"https://api.bintray.com/content/basespace/BaseSpaceCLI-EarlyAccess-BIN/latest/\\$latest/amd64-linux/bs?bt_package=latest\" -O bs2 && r2 ./bs2\r\n -- Add custom Have you setup your ~/.radare2rc today?\r\n[0x0045bad0]> \r\n```\r\n\r\n### Actual behavior\r\n\r\n```\r\n$ wget \"https://api.bintray.com/content/basespace/BaseSpaceCLI-EarlyAccess-BIN/latest/\\$latest/amd64-linux/bs?bt_package=latest\" -O bs2 && r2 ./bs2\r\nr_uleb128: undefined behaviour in 70 shift on ut32\r\nr_uleb128: undefined behaviour in 77 shift on ut32\r\nr_uleb128: undefined behaviour in 70 shift on ut32\r\nr_uleb128: undefined behaviour in 77 shift on ut32\r\nr_uleb128: undefined behaviour in 70 shift on ut32\r\nr_uleb128: undefined behaviour in 77 shift on ut32\r\nr_uleb128: undefined behaviour in 84 shift on ut32\r\n[0x0045bad0]>\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU1NTQ2ODEyOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"related to how the dwarf info is parsed, proabbly requires an update/review\n\n$ r2 -e bin.dbginfo=0 bs\n[0x0045bad0]>\n\n\n> On 18 Nov 2019, at 15:54, Roman Valls Guimera <notifications@github.com> wrote:\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tOSX Catalina 10.15.1\n> File format of the file you reverse (mandatory)\tELF\n> Architecture/bits of the file (mandatory)\tMach-O 64-bit executable x86_64\n> r2 -v full output, not truncated (mandatory)\tradare2 4.1.0-git 23205 @ darwin-x86-64 git.3.2.1-2655-gff71c411c commit: ff71c41 <https://github.com/radareorg/radare2/commit/ff71c411c7cd806f22c4705d67a0086cbefd9662> build: 2019-11-18__15:40:17\n> Expected behavior\n> \n> $ wget \"https://api.bintray.com/content/basespace/BaseSpaceCLI-EarlyAccess-BIN/latest/\\$latest/amd64-linux/bs?bt_package=latest\" -O bs2 && r2 ./bs2\n>  -- Add custom Have you setup your ~/.radare2rc today?\n> [0x0045bad0]> \n> Actual behavior\n> \n> $ wget \"https://api.bintray.com/content/basespace/BaseSpaceCLI-EarlyAccess-BIN/latest/\\$latest/amd64-linux/bs?bt_package=latest\" -O bs2 && r2 ./bs2\n> r_uleb128: undefined behaviour in 70 shift on ut32\n> r_uleb128: undefined behaviour in 77 shift on ut32\n> r_uleb128: undefined behaviour in 70 shift on ut32\n> r_uleb128: undefined behaviour in 77 shift on ut32\n> r_uleb128: undefined behaviour in 70 shift on ut32\n> r_uleb128: undefined behaviour in 77 shift on ut32\n> r_uleb128: undefined behaviour in 84 shift on ut32\n> [0x0045bad0]>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/15479?email_source=notifications&email_token=AAG75FQRE44GYSG6QAV6LNTQUKUC5A5CNFSM4JOUWVQKYY3PNVWWK3TUL52HS4DFUVEXG43VMWVGG33NNVSW45C7NFSM4H2B7W3A>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FSVTXU34RV3FHRVEBTQUKUC5ANCNFSM4JOUWVQA>.\n> \n\n","createdAt":"2019-11-19T11:35:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15479#issuecomment-555468129","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2OTI0MDc0Mg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Please run with the UBSAN, it will print exact source code lines.","createdAt":"2019-12-27T10:25:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15479#issuecomment-569240742","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2OTUwNDA2NQ==","author":{"login":"brainstorm"},"authorAssociation":"CONTRIBUTOR","body":"UBSAN? :-S","createdAt":"2019-12-29T13:09:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15479#issuecomment-569504065","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3MDEyMzMzMQ==","author":{"login":"brainstorm"},"authorAssociation":"CONTRIBUTOR","body":"I guess you mean this: https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html ... is there any r2 build option I can/should enable for that?","createdAt":"2020-01-02T05:48:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15479#issuecomment-570123331","viewerDidAuthor":false}],"number":15479,"title":"r_uleb128: undefined behaviour in 70 shift on ut32"},{"body":"e.g. rabin2 -o outputfile.exe -O \"r/.text/10000\" inputfile.exe doesnt update the text section size to 10000 ","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU1NTMzOTQwNQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Please attach the version information, platform, and the binary.","createdAt":"2019-11-19T05:26:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15477#issuecomment-555339405","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU1NTg1NzY2MA==","author":{"login":"PrakaramJoshi"},"authorAssociation":"NONE","body":"I compiled the latest master branch and tested from that. Windows 10. I am using 64 bit binaries to edit via radare2","createdAt":"2019-11-20T06:20:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15477#issuecomment-555857660","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU1NTg3MjUxNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Its not implemented, just chk the code\n\n> On 20 Nov 2019, at 07:20, PrakaramJoshi <notifications@github.com> wrote:\n> \n> ï»¿\n> I compiled the latest master branch and tested from that. Windows 10. I am using 64 bit binaries to edit via radare2\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2019-11-20T07:17:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15477#issuecomment-555872517","viewerDidAuthor":false}],"number":15477,"title":"on Windows rabin2 wont extend the sections "},{"body":"2 failing tests for PPC https://travis-ci.com/github/radareorg/radare2/jobs/440528096#L847\r\n```\r\n[XX] db/tools/ragg2 ragg2 debruijn sequence 2\r\nR2_NOPLUGINS=1 radare2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Qc '!ragg2 -P 2 -r; ?e' -\r\n-- stdout\r\n@@ -1 +1 @@\r\n-AA\r\n+\r\n-- stderr\r\nr_egg_assemble: invalid assembly\r\n\r\n[XX] db/tools/ragg2 ragg2 debruijn sequence 1\r\nR2_NOPLUGINS=1 radare2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Qc '!ragg2 -r -P 2; ?e' -\r\n-- stdout\r\n@@ -1 +1 @@\r\n-AA\r\n+\r\n-- stderr\r\nr_egg_assemble: invalid assembly\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU2Nzc4NjkyMw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"107 now https://travis-ci.com/radareorg/radare2/jobs/269167852\r\nMany of them just assume x86 arch is set, should be fixed","createdAt":"2019-12-20T04:53:01Z","includesCreatedEdit":false,"isMinimized":true,"minimizedReason":"resolved","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15468#issuecomment-567786923","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTYzOTQ5Mg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Around 80 left","createdAt":"2020-01-17T14:07:28Z","includesCreatedEdit":false,"isMinimized":true,"minimizedReason":"outdated","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15468#issuecomment-575639492","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU4OTg4ODU0Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"yay \\o/","createdAt":"2020-02-22T00:08:40Z","includesCreatedEdit":false,"isMinimized":true,"minimizedReason":"outdated","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15468#issuecomment-589888543","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwOTUyMTk1NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ive fixed some, now the numbers are:\r\n\r\nARM64 18\r\nPPC64 22\r\nS390X > 1000\r\nnewShell 96\r\n\r\nsee https://github.com/radareorg/radare2/pull/16435","createdAt":"2020-04-06T01:26:25Z","includesCreatedEdit":true,"isMinimized":true,"minimizedReason":"outdated","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15468#issuecomment-609521954","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcyMDI2OTE3NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"12 failing tests for PPC now: https://travis-ci.com/github/radareorg/radare2/jobs/423694412#L794","createdAt":"2020-11-02T06:36:32Z","includesCreatedEdit":false,"isMinimized":true,"minimizedReason":"outdated","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15468#issuecomment-720269174","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcyNDQ2MDgyMA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"2 failing tests for PPC now: https://travis-ci.com/github/radareorg/radare2/jobs/440528096#L847\r\n\r\ncc  @eagleoflqj ","createdAt":"2020-11-10T05:24:46Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15468#issuecomment-724460820","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcyNjUwOTI2Mg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See also build warnings:\r\n```\r\np/debug_native.c: In function â€˜r_debug_native_bpâ€™:\r\np/debug_native.c:1421:10: warning: unused variable â€˜dbgâ€™ [-Wunused-variable]\r\n  RDebug *dbg = bp->user;\r\n          ^~~\r\np/native/linux/linux_debug.c: In function â€˜print_fpuâ€™:\r\np/native/linux/linux_debug.c:1058:2: warning: #warning print_fpu not implemented for this platform [-Wcpp]\r\n #warning print_fpu not implemented for this platform\r\n  ^~~~~~~\r\np/native/linux/linux_debug.c: In function â€˜linux_reg_readâ€™:\r\np/native/linux/linux_debug.c:1063:7: warning: variable â€˜showfpuâ€™ set but not used [-Wunused-but-set-variable]\r\n  bool showfpu = false;\r\n       ^~~~~~~\r\np/native/linux/linux_debug.c: In function â€˜linux_reg_writeâ€™:\r\np/native/linux/linux_debug.c:1268:55: warning: passing argument 4 of â€˜r_debug_ptraceâ€™ discards â€˜constâ€™ qualifier from pointer target type [-Wdiscarded-qualifiers]\r\n   int ret = r_debug_ptrace (dbg, PTRACE_SETREGS, pid, buf, NULL);\r\n                                                       ^~~\r\nIn file included from p/native/linux/linux_debug.c:6:0:\r\n/home/travis/build/radareorg/radare2/libr/include/r_debug.h:608:20: note: expected â€˜void *â€™ but argument is of type â€˜const unsigned char *â€™\r\n static inline long r_debug_ptrace(RDebug *dbg, r_ptrace_request_t request, pid_t pid, void *addr, r_ptrace_data_t data) {\r\n                    ^~~~~~~~~~~~~~\r\nAt top level:\r\np/native/linux/linux_debug.c:970:13: warning: â€˜print_fpuâ€™ defined but not used [-Wunused-function]\r\n static void print_fpu(void *f){\r\n             ^~~~~~~~~\r\n+make install\r\n```","createdAt":"2020-11-13T04:51:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15468#issuecomment-726509262","viewerDidAuthor":false}],"number":15468,"title":"PowerPC64 ragg2 unimplemented"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 18.04 on x86-64\r\n| File format of the file you reverse (mandatory)      | ELF (**-no-pie**)\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.1.0-git 23256 @ linux-x86-64 git.4.0.0-85-g7b2375228 commit: 7b2375228f3d80c094edda120e774a4774dbabb2 build: 2019-11-13__16:17:52\r\n\r\n### Expected behavior\r\nIt should show the contents of `xmm1` and/or `xmm0`.\r\n\r\n### Actual behavior\r\nIt does not show the contents of `xmm1` and/or `xmm0` or shows them partially.\r\n\r\n### Steps to reproduce the behavior \r\nBinary is attached: [bug.zip](https://github.com/radareorg/radare2/files/3846245/bug.zip)\r\n\r\nCan also be compiled from source (make sure to use `-no-pie`!)\r\n```\r\n// Compile with gcc -no-pie -O3 -o ./bug bug.c\r\n#include <stdio.h>\r\n#include <xmmintrin.h>\r\n\r\nint main(void) {\r\n  double result[2];\r\n\r\n  __m128d xmma = _mm_set_pd(0.1337, 0.2342);\r\n  __m128d xmmb = _mm_set_pd((double)rand()/RAND_MAX, (double)rand()/RAND_MAX);\r\n  __m128d xmmc = _mm_sub_pd(xmma, xmmb);\r\n\r\n  _mm_store_pd(result, xmmc);\r\n\r\n  printf(\"%f, %f\\n\", result[0], result[1]);\r\n}\r\n```\r\n\r\nOpen the file for the first time, debug and save as a project like this:\r\n```\r\niblue@raven:/tmp$ r2 -d ./bug\r\nProcess with PID 712 started...\r\n= attach 712 712\r\nbin.baddr 0x00400000\r\nUsing 0x400000\r\nasm.bits 64\r\n -- You C it, you fix it!\r\n[0x00400a90]> dcu main\r\nContinue until 0x004005a0 using 1 bpsize\r\nhit breakpoint at: 4005a0\r\n[0x004005a0]> /ad/ subpd xmm1, xmm0\r\nr_reg_get_value: Bit size 128 not supported\r\n0x004005ea   # 4: subpd xmm1, xmm0\r\n[0x004005a0]> dcu hit0_0\r\nContinue until 0x004005ea using 1 bpsize\r\nhit breakpoint at: 4005ea\r\n[0x004005ea]> drml xmm1\r\n0.234200 0.133700\r\n[0x004005ea]> CC the magic happens here.\r\n[0x004005ea]> pd 3\r\n            ;-- hit0_0:\r\n            ;-- rip:\r\n            0x004005ea      660f5cc8       subpd xmm1, xmm0            ; the magic happens here.\r\n            0x004005ee      660f28c1       movapd xmm0, xmm1\r\n            0x004005f2      660f15c9       unpckhpd xmm1, xmm1\r\n[0x004005ea]> Ps bug_example\r\nbug_example\r\n[0x004005ea]> q\r\nDo you want to quit? (Y/n) Y\r\nDo you want to kill the process? (Y/n) Y\r\nDo you want to save the 'bug_example' project? (Y/n) Y\r\n```\r\n\r\nOpen the file for the second time, load the project, this time the xmm registers **will not be printed correctly, it will only print the first bytes**.\r\n```\r\niblue@raven:/tmp$ r2 -d ./bug\r\nProcess with PID 732 started...\r\n= attach 732 732\r\nbin.baddr 0x00400000\r\nUsing 0x400000\r\nasm.bits 64\r\n -- Hang in there, Baby!\r\n[0x00400a90]> Po bug_example\r\nClose current session? (Y/n) n\r\n[0x004005ea]> dcu hit0_0\r\nContinue until 0x004005ea using 1 bpsize\r\nhit breakpoint at: 4005ea\r\n[0x004005ea]> pd 3\r\n            ;-- hit0_0:\r\n            ;-- rip:\r\n            0x004005ea      660f5cc8       subpd xmm1, xmm0            ; the magic happens here.\r\n            0x004005ee      660f28c1       movapd xmm0, xmm1\r\n            0x004005f2      660f15c9       unpckhpd xmm1, xmm1\r\n[0x004005ea]> drml xmm0\r\n\r\n[0x004005ea]> drm\r\n[0x004005ea]> drm xmm0\r\n0xa3 0xc5 0xf5 0x59\r\n0xc5a3 0x59f5\r\n0x59f5c5a3\r\n\r\n8647334145556480.000000\r\n```\r\n\r\nBut if you reopen the file and restart, the things will be printed correctly:\r\n```\r\n[0x004005ea]> ood\r\nWait event received by different pid 732\r\nProcess with PID 752 started...\r\n= attach 752 752\r\nFile dbg:///tmp/bug  reopened in read-write mode\r\n752\r\n[0x00400a90]> dcu hit0_0\r\nContinue until 0x004005ea using 1 bpsize\r\nhit breakpoint at: 4005ea\r\n[0x004005ea]> drm xmm0\r\n0xa3 0xc5 0xf5 0x59 0xd1 0xe2 0xea 0x3f 0x24 0x7b 0x32 0xe3 0x91 0x3d 0xd9 0x3f\r\n0xc5a3 0x59f5 0xe2d1 0x3fea 0x7b24 0xe332 0x3d91 0x3fd9\r\n0x59f5c5a3 0x3feae2d1 0xe3327b24 0x3fd93d91\r\n0x3feae2d159f5c5a3 0x3fd93d91e3327b24\r\n8647334145556480.000000 1.835047 -3292393662286126907392.000000 1.697191\r\n0.840188 0.394383\r\n```\r\n\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDg3NDE0Njc0Nw==","author":{"login":"koyaan"},"authorAssociation":"CONTRIBUTOR","body":"Just tried to reproduce this issue but r2 does not support saving from debugged bins anymore:\r\n```\r\n[0x00401089]> Ps bug_example\r\nradare2 does not support projects on debugged bins.\r\nCannot save project.\r\n```","createdAt":"2021-07-05T14:14:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15458#issuecomment-874146747","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg3NDE1NTU1Mg==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Why are projects needed to repro this?","createdAt":"2021-07-05T14:27:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15458#issuecomment-874155552","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDg3NDE2MDc2OA==","author":{"login":"iblue"},"authorAssociation":"NONE","body":"I am not sure if it was expected for me to answer, but I am probably of no help, I don't even remember what I did there and why I did that, because it's two years behind me and I don't do infosec any longer. So all information I can provide is already in this bug report.","createdAt":"2021-07-05T14:35:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15458#issuecomment-874160768","viewerDidAuthor":false}],"number":15458,"title":"xmm register output is broken after project load."},{"body":"Hello\r\n\r\nI want to extend the `.text` section of an ELF file in order to add some functionality to it. When I run `rabin2 -O r/.text/2048 a.out`, it does not print any error, but the `.text` section size remains the same.\r\n\r\nIn addition, running `rabin2 -O p/.data/rwx a.out` or `rabin2 -O e/0x8038000 a.out` results in segmentation fault. It seems rabin patching functionalities does not work at all.\r\n\r\nI have tested on both MacOS 10.15.1 and Ubuntu 18.04 environments. My targets were `/bin/ls` and a small gcc compiled program.\r\n\r\nThis is the output of `rabin2 -O r/.text/2048 a.out`:\r\n```\r\ndelta: 2024\r\n-> elf section ()\r\n-> elf section (.interp)\r\n-> elf section (.note.ABI-tag)\r\n-> elf section (.note.gnu.build-id)\r\n-> elf section (.gnu.hash)\r\n-> elf section (.dynsym)\r\n-> elf section (.dynstr)\r\n-> elf section (.gnu.version)\r\n-> elf section (.gnu.version_r)\r\n-> elf section (.rela.dyn)\r\n-> elf section (.rela.plt)\r\n-> elf section (.init)\r\n-> elf section (.plt)\r\n-> elf section (.plt.got)\r\n-> elf section (.text)\r\n-> elf section (.fini)\r\n-> elf section (.rodata)\r\n-> elf section (.eh_frame_hdr)\r\n-> elf section (.eh_frame)\r\n-> elf section (.init_array)\r\n-> elf section (.fini_array)\r\n-> elf section (.jcr)\r\n-> elf section (.dynamic)\r\n-> elf section (.got)\r\n-> elf section (.got.plt)\r\n-> elf section (.data)\r\n-> elf section (.bss)\r\n-> elf section (.comment)\r\n-> elf section (.shstrtab)\r\n-> elf section (.symtab)\r\n-> elf section (.strtab)\r\n-> program header (0x00000040)\r\n-> program header (0x00000238)\r\n-> program header (0x00000000)\r\n-> program header (0x00000e10)\r\n-> program header (0x00000e28)\r\n-> program header (0x00000254)\r\n-> program header (0x000006e8)\r\n-> program header (0x00000000)\r\n-> program header (0x00000e10)\r\nCOPY FROM 0x00001050\r\nCOPY TO 0x00001838\r\nShifted 2024 byte(s)\r\n```\r\n\r\n\r\nSorry for asking my question here, I googled a lot but didn't found any solution. ","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU3NjM3MzQ1Mg==","author":{"login":"phra"},"authorAssociation":"CONTRIBUTOR","body":"any update on this? i have the same problem with `4.2.0`.","createdAt":"2020-01-20T17:39:06Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15449#issuecomment-576373452","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NjM4MjM0Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Nope. Nobody touched that code at all\n\n> On 20 Jan 2020, at 12:39, Francesco Soncina <notifications@github.com> wrote:\n> \n> ï»¿\n> any update on this? i have the same problem.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-01-20T18:09:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"CONFUSED","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/15449#issuecomment-576382346","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3ODM5MDg0MA==","author":{"login":"hitzhangjie"},"authorAssociation":"NONE","body":"I came across the same problem.\r\n","createdAt":"2020-08-21T16:57:17Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15449#issuecomment-678390840","viewerDidAuthor":false}],"number":15449,"title":"Rabin2 resize section / change section permissions not working"},{"body":"Support more advanced ways of piping, a la PowerShell or https://blogs.gnome.org/alexl/2012/08/10/rethinking-the-shell-pipeline/. See also https://docs.microsoft.com/en-us/powershell/scripting/learn/understanding-the-powershell-pipeline?view=powershell-6\r\n\r\nIdea is to pass JSON \"objects\" in some pipe cases without the hassle of handling them manually. We should make it a first-class citizen.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU1MTQyOTA4OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"We can implement the { command for this\n\n> On 8 Nov 2019, at 06:29, Anton Kochkov <notifications@github.com> wrote:\n> \n> ï»¿\n> Support more advanced ways of piping, a la PowerShell or https://blogs.gnome.org/alexl/2012/08/10/rethinking-the-shell-pipeline/. See also https://docs.microsoft.com/en-us/powershell/scripting/learn/understanding-the-powershell-pipeline?view=powershell-6\n> \n> Idea is to pass JSON \"objects\" in some pipe cases without the hassle of handling them manually. We should make it a first-class citizen.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2019-11-08T08:12:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15435#issuecomment-551429088","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU1MTQzMzE4NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"I propose a better one: `|>`, not a problem with the upcoming proper parser anyway.","createdAt":"2019-11-08T08:26:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15435#issuecomment-551433184","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU1MTQ1Mzg3NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Wat\n\n> On 8 Nov 2019, at 09:26, Anton Kochkov <notifications@github.com> wrote:\n> \n> ï»¿\n> I propose a better one: |>, not a problem with the upcoming proper parser anyway.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2019-11-08T09:28:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15435#issuecomment-551453874","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxNzc2NjgxNg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Nice-to-have feature, not a priority for me at the moment.","createdAt":"2020-04-22T13:05:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15435#issuecomment-617766816","viewerDidAuthor":false}],"number":15435,"title":"Rethink r2 pipes"},{"body":"We know which functions use a specific struct definition..\r\n\r\nSo we must be able to list all the access to any of the fields, for example:\r\n\r\n* Who is reading or writing the enabled of the State struct and get the offset of all the insturctions that do this\r\n\r\nRandom inspiration about this:\r\n\r\nhttps://twitter.com/RolfRolles/status/1188584794990333953?s=19","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY2NDM5ODQ2Mg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"As it is right now it seems just a nice idea and nobody assigned to this issue, so I'm moving it out of 4.6.0 milestone.","createdAt":"2020-07-27T13:31:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15373#issuecomment-664398462","viewerDidAuthor":false}],"number":15373,"title":"Add support for Xrefs to struct fields (low level type xrefs)"},{"body":"* https://gist.github.com/radare/04612d3804fa72c0cc832d06208cadaf\r\n\r\nmay be worth making it interactive in visual or shell, this makes me think that we need some dialog-like commands that work on prompt and visual like this ida plugin do:\r\n\r\nhttps://github.com/joxeankoret/idamagicstrings\r\n\r\nalso those cli/vis commands may work with cutter too cc @xarkes ideas there?","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU0NTQ5NTExNA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Related https://github.com/radareorg/radare2/issues/14594","createdAt":"2019-10-23T15:18:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15341#issuecomment-545495114","viewerDidAuthor":false}],"number":15341,"title":"Autoname functions from strings/assert/debug messages.."},{"body":"Latest build, just a request to have someone look at funky function names...hash:\r\n~~~\r\n72fc0abe1376033aeb8664f41624d4a2463771d6a04621e2d183663fb5ed34b8\r\n~~~\r\n![2019-10-22 14_25_24-zone-y](https://user-images.githubusercontent.com/947191/67329284-ddedb580-f4d7-11e9-8e67-d0b1fc50bf0f.png)\r\n\r\nthank you.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU0NTUzMzk2OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"so... what solution do you propose here?\n\n> On 22 Oct 2019, at 22:26, DigiAngel <notifications@github.com> wrote:\n> \n> Latest build, just a request to have someone look at funky function names...hash:\n> \n> 72fc0abe1376033aeb8664f41624d4a2463771d6a04621e2d183663fb5ed34b8\n>  <https://user-images.githubusercontent.com/947191/67329284-ddedb580-f4d7-11e9-8e67-d0b1fc50bf0f.png>\n> thank you.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/15328?email_source=notifications&email_token=AAG75FQRHLNOK2W6YYFJDODQP5OYBA5CNFSM4JDVOIV2YY3PNVWWK3TUL52HS4DFUVEXG43VMWVGG33NNVSW45C7NFSM4HTTRMIQ>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FVOAGFXWTE5H7TEF3TQP5OYBANCNFSM4JDVOIVQ>.\n> \n\n","createdAt":"2019-10-23T16:45:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15328#issuecomment-545533968","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0NTUzODAxMw==","author":{"login":"DigiAngel"},"authorAssociation":"NONE","body":"That's a fantastic question :D  Maybe an output flag for forcing only ascii?  Here's what it looks like via that:\r\n~~~\r\nhttps://pastebin.com/SnHyhPRL\r\n~~~\r\nI dunno though...might be too much hassle to work in just for the odd edgecase.","createdAt":"2019-10-23T16:55:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15328#issuecomment-545538013","viewerDidAuthor":false}],"number":15328,"title":"Funky function names"},{"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nIt will be great if we can dump output from `iC` command in JSON format.\r\n\r\n**Describe the solution you'd like**\r\nAdd new command `iCj` and functionality for this.\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU0Mjg4NDc0MA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Already there:\r\n\r\n<img width=\"1440\" alt=\"image\" src=\"https://user-images.githubusercontent.com/1408600/66957673-f2a8f400-f066-11e9-8378-e0b37eda42e1.png\">\r\n\r\n","createdAt":"2019-10-16T20:47:23Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15286#issuecomment-542884740","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0Mjg4NDk3Ng==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"(And it's used in Cutter)","createdAt":"2019-10-16T20:47:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15286#issuecomment-542884976","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0NjQwMDY5Mg==","author":{"login":"dukebarman"},"authorAssociation":"CONTRIBUTOR","body":"But not in macos entitlements\r\n\r\n```\r\n[0x100000af4]> iCj\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">\r\n<plist version=\"1.0\">\r\n<dict>\r\n        <key>com.apple.private.KextAudit.user-access</key>\r\n        <true/>\r\n        <key>com.apple.private.allow-bless</key>\r\n        <true/>\r\n        <key>com.apple.private.kernel.get-kext-info</key>\r\n        <true/>\r\n        <key>com.apple.rootless.kext-secure-management</key>\r\n        <true/>\r\n        <key>com.apple.rootless.storage.KernelExtensionManagement</key>\r\n        <true/>\r\n        <key>com.apple.security.cs.allow-unsigned-executable-memory</key>\r\n        <true/>\r\n</dict>\r\n</plist>\r\n\r\n\r\n[0x100000af4]> iC\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">\r\n<plist version=\"1.0\">\r\n<dict>\r\n        <key>com.apple.private.KextAudit.user-access</key>\r\n        <true/>\r\n        <key>com.apple.private.allow-bless</key>\r\n        <true/>\r\n        <key>com.apple.private.kernel.get-kext-info</key>\r\n        <true/>\r\n        <key>com.apple.rootless.kext-secure-management</key>\r\n        <true/>\r\n        <key>com.apple.rootless.storage.KernelExtensionManagement</key>\r\n        <true/>\r\n        <key>com.apple.security.cs.allow-unsigned-executable-memory</key>\r\n        <true/>\r\n</dict>\r\n</plist>\r\n\r\n\r\n[0x100000af4]>\r\n```\r\n\r\nAnd would be good add it to help:\r\n```\r\n[0x100000af4]> iC?\r\n| iC                 Show signature info (entitlements, ...)\r\n[0x100000af4]>\r\n```\r\n\r\nr2 from git:\r\n```\r\nradare2 4.0.0-git 23119 @ darwin-x86-64 git.3.9.0-268-g232256d42\r\ncommit: 232256d429bd59ba58cc99e651612c239cbdaa36 build: 2019-10-25__15:50:01\r\n```","createdAt":"2019-10-25T15:29:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15286#issuecomment-546400692","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0NjQxODQ5MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"macOS entitlements are saved in XML form inside the binaries, r2 doesnt have any XML parser and it dosnt supports binary plist format. so this thing is not that straight forward because it requires to merge libplist and implement the json format like plutil do. r2 is just showing whats in there","createdAt":"2019-10-25T16:18:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15286#issuecomment-546418491","viewerDidAuthor":false}],"number":15286,"title":"Add support JSON output to iC command on Mac OS"},{"body":"taken from https://github.com/facebook/openbmc-uboot\r\n```\r\nOn RISC-V, the following registers are used:\r\n\r\n\tx0: hard-wired zero (zero)\r\n\tx1: return address (ra)\r\n\tx2:\tstack pointer (sp)\r\n\tx3:\tglobal pointer (gp)\r\n\tx4:\tthread pointer (tp)\r\n\tx5:\tlink register (t0)\r\n\tx8:\tframe pointer (fp)\r\n\tx10-x11:\targuments/return values (a0-1)\r\n\tx12-x17:\targuments (a2-7)\r\n\tx28-31:\t temporaries (t3-6)\r\n\tpc:\tprogram counter (pc)\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU0MjYxMTY2Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"actually\r\n```\r\nstruct user_regs_struct {\r\n        unsigned long pc;\r\n        unsigned long ra;\r\n        unsigned long sp;\r\n        unsigned long gp;\r\n        unsigned long tp;\r\n        unsigned long t0;\r\n        unsigned long t1;\r\n        unsigned long t2;\r\n        unsigned long s0;\r\n        unsigned long s1;\r\n        unsigned long a0;\r\n        unsigned long a1;\r\n        unsigned long a2;\r\n        unsigned long a3;\r\n        unsigned long a4;\r\n        unsigned long a5;\r\n        unsigned long a6;\r\n        unsigned long a7;\r\n        unsigned long s2;\r\n        unsigned long s3;\r\n        unsigned long s4;\r\n        unsigned long s5;\r\n        unsigned long s6;\r\n        unsigned long s7;\r\n        unsigned long s8;\r\n        unsigned long s9;\r\n        unsigned long s10;\r\n        unsigned long s11;\r\n        unsigned long t3;\r\n        unsigned long t4;\r\n        unsigned long t5;\r\n        unsigned long t6;\r\n};\r\n```","createdAt":"2019-10-16T09:23:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15285#issuecomment-542611666","viewerDidAuthor":false}],"number":15285,"title":"RISCV registers + ideas to improve regprofiles"},{"body":"<img width=\"965\" alt=\"Screenshot 2019-10-15 at 01 32 14\" src=\"https://user-images.githubusercontent.com/917142/66789420-b0a77300-eeeb-11e9-9e64-f80aae0aabe9.png\">\r\n","comments":[],"number":15278,"title":"Sync zoom.byte p= and pz commands"},{"body":"As long as we have other unix commands in r2, `ps` seems to be one that may conflict with the current `ps`. Place your comments below\r\n\r\n![Screenshot 2019-10-11 at 17 22 51](https://user-images.githubusercontent.com/917142/66663881-cd258000-ec4b-11e9-8162-c1757d43f566.png)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU0Mjg4NTUxMw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"`ps` is well known command + it's used in most r2pipe scripts. replacing it with this will bring lot of confusion so -1 ","createdAt":"2019-10-16T20:49:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15261#issuecomment-542885513","viewerDidAuthor":false}],"number":15261,"title":"ps vs dp :D"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu x86 64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.8.0 17 @ linux-x86-64 git.3.8.0 commit: bacd7c10afbe9385111078fcf3637a44812fdeb6 build: 2019-09-16__20:04:23\r\n\r\n### Expected behavior\r\nIt appears that i should be able to do `ood stdin=<file_here>` to run a program with input from a file.\r\n\r\n### Actual behavior\r\nr2 seems to ignore this request. It will run the program, but not pipe input from the file.\r\n\r\n### Steps to reproduce the behavior \r\n- `r2 -A /bin/cat`\r\n- `oodr stdin=some_file`\r\n- `dc`\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\nstdin from file is always painful on r2 for me. Would be nice to actually implement something intuitive like `<`, which i know was rejected before, but it's the same syntax that everything else uses.","comments":[],"number":15258,"title":"oodr stdin=file doesn't seem to work"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Kali2019  X86 64\r\n| File format of the file you reverse (mandatory)      | ELF \r\n| Architecture/bits of the file (mandatory)            | 32-bit LSB executable\r\n| r2 -v full output, **not truncated** (mandatory)     | rradare2 4.0.0-git 23025 @ linux-x86-64 git.3.9.0-187-g9ed199d64 commit: 9ed199d64e26f4df2d875fa63928089eb9d7c023 build: 2019-10-11__17:24:08\r\n\r\n### Expected behavior\r\nR2 should set hardware breakpoint on the memory address (binary opened in debug mode). \r\n\r\n### Actual behavior\r\nThe following error is raised when setting the breakpoint: \r\n```\r\nptrace error for dr 3\r\nptrace POKEUSER: Invalid argument\r\n```\r\n\r\n### Steps to reproduce the behavior \r\n- [some_ctf_binary.zip](https://github.com/radareorg/radare2/files/3719703/some_ctf_binary.zip)\r\n- open the binary with: \r\n```\r\n$ r2 -Ad some_ctf_binary AAAA\r\n```\r\n- Then run the following r2 code in r2 shell to reproduce the error after opening the binary with the following : \r\n\r\n```\r\nimport r2pipe \r\nr2 = r2pipe.open()\r\ninput_location = r2.cmd('pxw 4 @ esp + 8').split(' ')[2]\r\nprint(f\"input memory: {input_location}\")\r\nr2.cmd(f'drx 0 {input_location} 1 r')\r\n```\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\nThis has been previously reported in #3935 but the issue still exists.","comments":[],"number":15255,"title":"Cannot set hardware breakpoint on 64-bit Kali Linux 2019 when debugging a 32-bit program"},{"body":"## Superset Disassembly.\r\nA state-of-the-art technique (particularly for rewriting/instrumentation) is called superset dis-assembly. The idea is to consider that every address starts an instruction, called superset instruction. As such,consecutive superset instructions may share common bytes.Rewriting is performed on all superset instructions. It can be easily inferred that the superset disassembler has no false negatives but must have a bloated code body due to the large number of superset instructions that are not true positives(Table I). Figure 1(c) presents the results for superset disassembly. Observe that a superset instruction is generated by disassembling the bytes starting at each address. Hence,we have instructions at 0xbbf72, 0xbbf73, ..., 0xbbf91, 0xbbf92, and so on. Observe that consecutive instructions share common byte values (e.g., the body of 0xbbf91 â€œ8b05 71 b9 19 00â€ is the suffix of 0xbbf90). Also observe that all the true positive instructions, i.e., those in Figure 1(a), are part of the superset\r\n![image](https://user-images.githubusercontent.com/203261/66548828-94ff3e00-eb74-11e9-921c-979acc3bae4f.png)\r\n\r\nSee the paper https://www.cs.purdue.edu/homes/zhan3299/res/ICSE19.pdf\r\n","comments":[],"number":15242,"title":"Probabilistic disassembly mode support"},{"body":"But do not remove/change the jemalloc 4.x support still. Should detect both on the fly.","comments":[],"number":15219,"title":"Add jemalloc 5.x heap parsing"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Arch Linux x86_64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.0.0-git 22952 @ linux-x86-64 git.3.9.0-119-gcb1f67ee8 commit: cb1f67ee84e75f1056a9bc3a86df1b2d736fda20 build: 2019-10-05__17:25:55\r\n\r\n### Expected behavior\r\nr2 to identify xrefs to a string in an unstripped 32-bit binary.\r\n\r\n### Actual behavior\r\nr2 does not identify xrefs to strings in an unstripped 32-bit binary, but does\r\nwhen the same binary is compiled for 64-bit.\r\n\r\n### Steps to reproduce the behavior \r\n```\r\nr2 dungeones_and_hackers-lvl-1-32bit\r\naaa\r\ns 0x00002a92; (identify you win string via: iz | grep -i 'you win')\r\nV; (visual mode) \r\np; (switch to linear disassembly view)\r\nx; no xrefs will be shown for the 32-bit binary, but will be for the 64-bit binary.\r\n```\r\n\r\n### Additional Logs, screenshot\r\n#### 32-bit Showing No Xrefs\r\n![no_xrefs_32-bit](https://user-images.githubusercontent.com/1250113/66261305-d40a4980-e798-11e9-9488-51bf7ccc67b6.png)\r\ns, source-code,  configuration dump, ...\r\n\r\n\r\n#### 64-bit Showing Xrefs\r\n![xrefs_64-bit](https://user-images.githubusercontent.com/1250113/66261314-e97f7380-e798-11e9-90b5-7badefdbc666.png)\r\n\r\n### Drag and drop zip archives containing the Additional info here, don't use external services or link.\r\nBoth binaries  are attached and source code is [available here](https://github.com/jaredestroud/HF-Troll-Hunter).\r\n* [dungeons_and_hackers_binaries.tar.gz](https://github.com/radareorg/radare2/files/3693734/dungons_and_hackers_binaries.tar.gz)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUzODc1ODYyMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Same as https://github.com/radareorg/radare2/issues/13356\n\n> On 6 Oct 2019, at 00:06, Jared <notifications@github.com> wrote:\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tArch Linux x86_64\n> File format of the file you reverse (mandatory)\tELF\n> Architecture/bits of the file (mandatory)\tx86/32\n> r2 -v full output, not truncated (mandatory)\tradare2 4.0.0-git 22952 @ linux-x86-64 git.3.9.0-119-gcb1f67ee8 commit: cb1f67e build: 2019-10-05__17:25:55\n> Expected behavior\n> \n> r2 to identify xrefs to a string in an unstripped 32-bit binary.\n> \n> Actual behavior\n> \n> r2 does not identify xrefs to strings in an unstripped 32-bit binary, but does\n> when the same binary is compiled for 64-bit.\n> \n> Steps to reproduce the behavior\n> \n> r2 dungeones_and_hackers-lvl-1-32bit\n> aaa\n> s 0x00002a92; (identify you win string via: iz | grep -i 'you win')\n> V; (visual mode) \n> p; (switch to linear disassembly view)\n> x; no xrefs will be shown for the 32-bit binary, but will be for the 64-bit binary.\n> Additional Logs, screenshot\n> \n> 32-bit Showing No Xrefs\n> \n> \n> s, source-code, configuration dump, ...\n> \n> 64-bit Showing Xrefs\n> \n> \n> \n> Drag and drop zip archives containing the Additional info here, don't use external services or link.\n> Both binaries are attached and source code is available here\n> dungons_and_hackers_binaries.tar.gz\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-10-06T15:36:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15204#issuecomment-538758623","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzODc1ODY1Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Same as https://github.com/radareorg/radare2/issues/8900\n\n> On 6 Oct 2019, at 00:06, Jared <notifications@github.com> wrote:\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tArch Linux x86_64\n> File format of the file you reverse (mandatory)\tELF\n> Architecture/bits of the file (mandatory)\tx86/32\n> r2 -v full output, not truncated (mandatory)\tradare2 4.0.0-git 22952 @ linux-x86-64 git.3.9.0-119-gcb1f67ee8 commit: cb1f67e build: 2019-10-05__17:25:55\n> Expected behavior\n> \n> r2 to identify xrefs to a string in an unstripped 32-bit binary.\n> \n> Actual behavior\n> \n> r2 does not identify xrefs to strings in an unstripped 32-bit binary, but does\n> when the same binary is compiled for 64-bit.\n> \n> Steps to reproduce the behavior\n> \n> r2 dungeones_and_hackers-lvl-1-32bit\n> aaa\n> s 0x00002a92; (identify you win string via: iz | grep -i 'you win')\n> V; (visual mode) \n> p; (switch to linear disassembly view)\n> x; no xrefs will be shown for the 32-bit binary, but will be for the 64-bit binary.\n> Additional Logs, screenshot\n> \n> 32-bit Showing No Xrefs\n> \n> \n> s, source-code, configuration dump, ...\n> \n> 64-bit Showing Xrefs\n> \n> \n> \n> Drag and drop zip archives containing the Additional info here, don't use external services or link.\n> Both binaries are attached and source code is available here\n> dungons_and_hackers_binaries.tar.gz\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-10-06T15:36:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15204#issuecomment-538758657","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzODc1ODY4Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Same as https://github.com/radareorg/radare2/issues/6283\n\n> On 6 Oct 2019, at 00:06, Jared <notifications@github.com> wrote:\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tArch Linux x86_64\n> File format of the file you reverse (mandatory)\tELF\n> Architecture/bits of the file (mandatory)\tx86/32\n> r2 -v full output, not truncated (mandatory)\tradare2 4.0.0-git 22952 @ linux-x86-64 git.3.9.0-119-gcb1f67ee8 commit: cb1f67e build: 2019-10-05__17:25:55\n> Expected behavior\n> \n> r2 to identify xrefs to a string in an unstripped 32-bit binary.\n> \n> Actual behavior\n> \n> r2 does not identify xrefs to strings in an unstripped 32-bit binary, but does\n> when the same binary is compiled for 64-bit.\n> \n> Steps to reproduce the behavior\n> \n> r2 dungeones_and_hackers-lvl-1-32bit\n> aaa\n> s 0x00002a92; (identify you win string via: iz | grep -i 'you win')\n> V; (visual mode) \n> p; (switch to linear disassembly view)\n> x; no xrefs will be shown for the 32-bit binary, but will be for the 64-bit binary.\n> Additional Logs, screenshot\n> \n> 32-bit Showing No Xrefs\n> \n> \n> s, source-code, configuration dump, ...\n> \n> 64-bit Showing Xrefs\n> \n> \n> \n> Drag and drop zip archives containing the Additional info here, don't use external services or link.\n> Both binaries are attached and source code is available here\n> dungons_and_hackers_binaries.tar.gz\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-10-06T15:36:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15204#issuecomment-538758682","viewerDidAuthor":false}],"number":15204,"title":"Unable to identify Xrefs in non-stripped x86 Binary"},{"body":"I am currently trying to use radare2 for analysis of a large CTF binary on linux. I am renaming variables in order to make this easier, but I am finding that I am unable to recover these renamings from a saved project. While I enjoy using radare, this is making it almost impossible to use for the analysis of larger files.\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Pop _OS 64 bit\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/32\r\n| r2 -v full output, **not truncated** (mandatory)     | \r\nradare2 4.0.0-git 22950 @ linux-x86-64 git.3.9.0-107-g68fe4839f\r\ncommit: 68fe4839fdbfcda0a7c74c7e605132b36c1a47b8 build: 2019-10-05__16:51:00\r\n\r\n### Expected behavior\r\nThe variable names should be recovered, and the variables at the top of and within the function re-labeled.\r\n\r\n### Actual behavior\r\nRadare2 spits out a load of messages such as:\r\nafb+: Cannot add basic block at 0x0806d9e8 # 0x0806d9a0 0x0806d9e8 17 0x0806d6f0 0xffffffffffffffff n\r\n\r\nThe final two lines of output are both: No file to load bin from?\r\n\r\nThe variables at the top of the function are not changed to what I saved them to. The variables within the function even stop following the naming that radare gave them, and instead are listed relative to the stack or frame pointer, eg: ebp - 0xc instead of var_ch.\r\n\r\n### Steps to reproduce the behavior \r\nLoad a binary (x86), use aa to analyse. Find a function and rename a variable. Save the project and then open  the same project (the issue also seems to happen if you close radare and reload the binary).\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUzODc1OTEyOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"The bb error shouldn't be related to the varnames not being restored, i am working on a or that may fix the bb error issue. But for the varnames u must chk if the project script contains the varnames. ","createdAt":"2019-10-06T15:41:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15200#issuecomment-538759128","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzODc3MTY1OA==","author":{"login":"adzy2k6"},"authorAssociation":"NONE","body":"I appear to have been wrong. The variables at the top of the function are getting changed, but r2 is losing the ability to replace the references within the assembly instructions (ie, it keeps showing ebp + 8 rather than the variable name, and can no longer reference even the auto generated names). Also, if I select n to the \"Close current session?\" question, it seems that the names work as expected.","createdAt":"2019-10-06T18:00:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15200#issuecomment-538771658","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzOTE1OTcxMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"should work fine as long as the `afvr` lines are in the priject files (just checked now)\n\nafvr rdi first_arg int32_t @ 0x1000011e8\n\nthere are tons of errors with af+ and such but the varnames are saved and loaded properly:\n\n$ r2 /bin/ls\n[0x1000011e8]> af\n[0x1000011e8]> afv~arg\narg int argc @ rdi\narg char ** argv @ rsi\n[0x1000011e8]> afvn arg_counter argc\n[0x1000011e8]> afv~arg\narg int arg_counter @ rdi\narg char ** argv @ rsi\n[0x1000011e8]> Ps jeje\njeje\n[0x1000011e8]> q\nDo you want to save the 'jeje' project? (Y/n)\n$ r2 -p jeje\n[0x1000011e8]> afv~arg\narg char ** argv @ pf\narg int arg_counter @ bpl\n[0x1000011e8]> afv\n\n\nso imho the problem is with the af+/afb+ thing which basically fails because of the latest \"improvements\" and i hope to provide a new analysis storage with proper api that may solve those issues and improve performance\n\n> On 6 Oct 2019, at 20:00, adzy2k6 <notifications@github.com> wrote:\n> \n> I appear to have been wrong. The variables at the top of the function are getting changed, but r2 is losing the ability to replace the references within the assembly instructions (ie, it keeps showing ebp + 8 rather than the variable name, and can no longer reference even the auto generated names). Also, if I select n to the \"Close current session?\" question, it seems that the names work as expected.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/15200?email_source=notifications&email_token=AAG75FSVRVHTXMYFMMHQMYTQNIRTVA5CNFSM4I5YRP72YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEAOQBSQ#issuecomment-538771658>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AAG75FVLQHRQEUFRWVZKN5TQNIRTVANCNFSM4I5YRP7Q>.\n> \n\n","createdAt":"2019-10-07T19:07:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15200#issuecomment-539159713","viewerDidAuthor":false}],"number":15200,"title":"Failing to load custom variable names via project"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | *nix\r\n| File format of the file you reverse (mandatory)      | N/A\r\n| Architecture/bits of the file (mandatory)            | N/A\r\n| r2 -v full output, **not truncated** (mandatory)     | N/A\r\n\r\n### Expected behavior\r\n`make CC=clang` happily builds radare2.\r\n\r\n### Actual behavior\r\n`make CC=clang` fails when running the following command: `gcc -c  -fPIC  -o cdb.o cdb.c`\r\n\r\n### Steps to reproduce the behavior \r\n- Build the following Docker image:\r\n```dockerfile\r\nFROM debian:buster\r\nRUN apt update\r\nRUN apt install -y clang git make\r\n```\r\nwith `docker build -t my-clang .`\r\n- `docker run -it my-clang`\r\n- `git clone --depth=1 https://github.com/radareorg/radare2`\r\n- `cd radare2`\r\n- `export CC=clang`\r\n- `./configure`\r\n- `make`\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\nLooks like the problem is coming from https://github.com/radareorg/radare2/blob/1f6ea112860aca2930d72d882dfb91f6be8f3912/shlr/Makefile#L145","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUzODcwODA4Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@qbarrand it's this https://github.com/radareorg/radare2/issues/10440","createdAt":"2019-10-06T03:18:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15197#issuecomment-538708086","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzODc0NDM1Mw==","author":{"login":"qbarrand"},"authorAssociation":"NONE","body":"Thanks @XVilka though the issue is not only about FreeBSD. Shouldn't the Makefile be modified instead?","createdAt":"2019-10-06T12:53:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15197#issuecomment-538744353","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2OTA0NzY2MQ==","author":{"login":"dhess"},"authorAssociation":"NONE","body":"This same issue also breaks radare2 in `nixpkgs` on macOS.","createdAt":"2019-12-26T12:06:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15197#issuecomment-569047661","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2OTE1OTc0Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"What is the exact error you have? Host-cc must be set from acr, the configure script must set that local compiler to run sdb natively at compile time. Isnt cc != clang in thise systems? Why is sdb not building with local compiler?","createdAt":"2019-12-27T01:11:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15197#issuecomment-569159743","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs4-EpiO","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Did you tried with meson? can you provide a docker file that reproduces the problem? otherwise i will close this 3yo ticket and consider it fixed","createdAt":"2022-02-16T11:47:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15197#issuecomment-1041406094","viewerDidAuthor":true}],"number":15197,"title":"$HOST_CC required to build with clang"},{"body":"ohai creatures, I looked at the RIOMap API again and concluded that it deserves refactory.\r\nReasons for that are:\r\n- whenever you add or delete a map, the skyline must be rebuild\r\n- skyline is a model for a static mapping, not a dynamic mapping that can change over time\r\n- poor named variables\r\n- lack of comments, where they'd be needed for understanding what is going on\r\n- r_io_remap does not move a map somewhere else, but instead create a new one\r\n- whenever I ask, no one in core really understands this code in every detail (that should scare the hell out of you)\r\n- UT64_MAX is used as a magic number (don't do this)\r\n\r\nThe other io apis seem reasonable, but could be enriched as well.\r\n\r\nMeanwhile I'm busy with a private side project, y'all can add your wishes for io in the comments, and later I'm going to see, which of those I can realize","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUzODYxMzgyMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@condret see also [all bugs with `RIO` label](https://github.com/radareorg/radare2/labels/RIO) and [IO window](https://github.com/radareorg/radare2/issues/13092) feature request.","createdAt":"2019-10-05T04:00:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/15193#issuecomment-538613821","viewerDidAuthor":false}],"number":15193,"title":"[META] - Collect IO subsystem feature-requests here"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Linux 5.3.1-arch1-1-ARCH x86_64 GNU/Linux\r\n| File format of the file you reverse (mandatory)      | N/A\r\n| Architecture/bits of the file (mandatory)            | Aarch64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.0.0-git 23142 @ linux-x86-64 git.3.9.0-102-gc06cdc465, commit: c06cdc4657c6730561a617f25925a6c635d21c63 build: 2019-10-03__21:40:52\r\n\r\n### Expected behavior\r\n```bash\r\n$ kstool arm64 'STP x29, x30, [sp], 0x80' #\r\nSTP x29, x30, [sp], 0x80 = [ fd 7b 88 a8 ]\r\n$ rasm2 -a arm -b 64 'stp w29, w30, [sp], 0x80'\r\nfd7b88a8\r\n$ rasm2 -a arm -b 64 -d fd7b88a8\r\nstp x29, x30, [sp], 0x80\r\n```\r\n\r\n### Actual behavior\r\n\r\n```bash\r\n$ kstool arm64 'STP x29, x30, [sp], 0x80' #\r\nSTP x29, x30, [sp], 0x80 = [ fd 7b 88 a8 ]\r\n$ rasm2 -a arm -b 64 'stp w29, w30, [SP], 0x80'\r\nfd7b08a9 <--- ERROR ! \r\n$ rasm2 -a arm -b 64 -d fd7b08a9\r\nstp x29, x30, [sp, 0x80] <--- this is the 64 bits pre-index variant\r\n$ kstool arm64 'stp x29, x30, [sp, 0x80]'\r\nstp x29, x30, [sp, 0x80] = [ fd 7b 08 a9 ]\r\n$ echo \"Confusion between pre-index and post-index ?\"\r\n```\r\n\r\n### Steps to reproduce the behavior \r\nExecute the commands above lol\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\nhttps://static.docs.arm.com/ddi0487/ea/DDI0487E_a_armv8_arm.pdf - page 1236\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUzODYzNDc3NA==","author":{"login":""},"authorAssociation":"NONE","body":"```\r\n$ cat test.s\r\nSTP x29, x30, [sp, #0x80]\r\nSTP x29, x30, [sp], #0x80\r\n$ clang --target=aarch64-arm-none-eabi -c test.s\r\n$ r2 -q -c 'pd 2' test.o 2>&/dev/null\r\n            ;-- entry0:\r\n            ;-- section..text:\r\n            ;-- $x.0:\r\n            0x08000040      fd7b08a9       stp x29, x30, [sp, 0x80]    ; [02] -r-x section size 8 named .text\r\n            0x08000044      fd7b88a8       stp x29, x30, [sp], 0x80\r\n$ rasm2 -a arm -b 64 'STP x29, x30, [sp, 0x80]; STP x29, x30, [sp], 0x80'\r\nfd7b08a9 fd7b08a9\r\n```\r\n ","createdAt":"2019-10-05T09:45:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15183#issuecomment-538634774","viewerDidAuthor":false}],"number":15183,"title":"Aarch64: r2/rasm2 incorrectly assembles 64 bits post-index variant of STP (confusion with pre-index variant)"},{"body":"## Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu x86 64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 4.0.0-git 23295 @ linux-x86-64 git.3.9.0-97-gc4d416c7b commit: c4d416c7b96d2735c24a2f9e2787df3fdb764c71 build: 2019-10-02__23:43:37\r\n\r\n### Expected behavior\r\n\r\nradare2 should have at least a thread selected by default\r\n\r\n### Actual behavior\r\n\r\nNo thread is selected when you start a debugging session\r\n\r\n### Steps to reproduce the behavior \r\n- [asciinema](https://asciinema.org/a/pYQzCfEA4YTxY7LOpzHbkjjTe)\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\n![Capture dâ€™Ã©cran de 2019-10-02 23-47-21](https://user-images.githubusercontent.com/964610/66084636-70e99e80-e56f-11e9-9bba-a6c136ff37d6.png)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU0MjM3MzAwNw==","author":{"login":"roboman2444"},"authorAssociation":"CONTRIBUTOR","body":"I think this might also be an issue with trying to debug OpenOCD systems through the GDB protocal as well. I will check.","createdAt":"2019-10-15T19:41:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15173#issuecomment-542373007","viewerDidAuthor":false}],"number":15173,"title":"No default thread selected when starting a debugging session on GDB protocol"},{"body":"Poke is a binary parsing and editing language. There are some overlapping concepts with radare2. Maybe some kind of integration can be done.\r\n\r\nhttps://www.slideshare.net/ennael/kernel-recipes-2019-gnu-poke-an-extensible-editor-for-structured-binary-data\r\n\r\nhttps://www.youtube.com/watch?v=nbvswQjsIUQ\r\n\r\nhttp://jemarch.net/poke.html\r\n\r\nP.S. See also [Kaitai](https://kaitai.io) declarative parsing language and native code generator.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU0NjUyNDY4OA==","author":{"login":"xermicus"},"authorAssociation":"CONTRIBUTOR","body":"Do you have some concrete ideas in mind? Or just transpile poke -> ESIL?","createdAt":"2019-10-25T21:49:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15164#issuecomment-546524688","viewerDidAuthor":false}],"number":15164,"title":"Integration with `GNU poke`"},{"body":"I want to be able to easily collect the strings referenced within a function. Right now, this is a hack-y process.\r\n\r\nAn `afz` (analyze function strings (and afzj for json) object would be great. I know `pdfs/pdsf` exist but those also only get the encoded r2-version of the string, not the true ascii/wide string itself.\r\n\r\nAn alternative implementation without adding a new command would be to add another object called `'string_refs'` to the `afi/afij` object.\r\n\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUzNjU2ODczNg==","author":{"login":"kazarmy"},"authorAssociation":"CONTRIBUTOR","body":"If you want the offset, use `? <str.flag>` or `?j <str.flag>` for the json version, e.g. `? str.POSIX`.","createdAt":"2019-09-30T13:47:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15145#issuecomment-536568736","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzNjU3MjkwMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"pdsj should be the way to go for those cases, but its not implemented :D\n\n> On 30 Sep 2019, at 15:47, Khairul Azhar Kasmiran <notifications@github.com> wrote:\n> \n> If you want the offset, use ? <str.flag> or ?j <str.flag> for the json version, e.g. ? str.POSIX.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/15145?email_source=notifications&email_token=AAG75FSPGOUOSNUI5LOEVXLQMH7QLA5CNFSM4I3QKXK2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD75WHIA#issuecomment-536568736>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AAG75FVS4ONVTW256XHVZK3QMH7QLANCNFSM4I3QKXKQ>.\n> \n\n","createdAt":"2019-09-30T13:56:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15145#issuecomment-536572902","viewerDidAuthor":false}],"number":15145,"title":"Feature Request: Expose a function's true referenced ascii/wide strings"},{"body":"Go into visual mode and then press `t` key multiple times to create multiple tabs.\r\n```\r\n$ r2 /bin/ls\r\n[0x6000000]> Vp\r\nttttttt\r\n```\r\n\r\nCurrently the tabline looks like this (by default):\r\n```\r\n_____(1)___(2)__/ t= \\___(4)____\r\n```\r\nWe can think about prettier representation, with a different colors maybe, and Unicode characters.\r\n\r\nsee `libr/core/visual_tabs.inc` for the implementation.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUzNTY5OTM2Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"what about using the 't' command also to create custom tables? we need something like agn/age/agg, but for tables. t stands for types. but we can probbly abuse a subcommand.. or think in a different solution. offtopic to this issue, but something to keep in mind","createdAt":"2019-09-26T21:49:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15121#issuecomment-535699366","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyODUxNzgwMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i think its fine like its now, i would close this issue, because its not a real problem, and there's no actual proposal to change, nobody complains on the current visual tabs style. and yes, it can be improved, but i would prefer to have some stylish proposals","createdAt":"2020-05-14T09:33:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15121#issuecomment-628517801","viewerDidAuthor":false}],"number":15121,"title":"Prettier interface for the tabline (`t` commands)"},{"body":"Like in vim: https://asciinema.org/a/232057","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUzNDQ1NzM2Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"To show what\n\n> On 24 Sep 2019, at 07:37, Anton Kochkov <notifications@github.com> wrote:\n> \n> Like in vim: https://asciinema.org/a/232057\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-09-24T08:42:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15110#issuecomment-534457363","viewerDidAuthor":false}],"number":15110,"title":"Embedded help floating window"},{"body":"We have `sort`, `join`, `uniq` commands for the files, but would be awesome to be able to apply them to the RTable data too.\r\n- [x] `uniq` https://github.com/radareorg/radare2/pull/16385\r\n- [x] `sort`\r\n- [ ] `join`","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYwNTI4NzM0OQ==","author":{"login":""},"authorAssociation":"NONE","body":"I understand the sort command, but for join and uniq how do you want the user to use it?","createdAt":"2020-03-27T19:52:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15109#issuecomment-605287349","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwNjE1NDk1Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"thats something to discuss and decide. the sort operation is already implemented, but join and uniq are not.\n\nuniq should be easy to be implemented so you can start in there, for join we will need to think further on how to import other commands' table into one table which is a bit more complex to discuss.\n\n> On 27 Mar 2020, at 20:52, Alexis Ehret <notifications@github.com> wrote:\n> \n> \n> I understand the sort command, but for join and uniq how do you want the user to use it?\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/15109#issuecomment-605287349>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FWGCZ2LAUQJORH3OA3RJT7ZBANCNFSM4IZ2SMNA>.\n> \n\n","createdAt":"2020-03-30T18:06:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15109#issuecomment-606154957","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyODUxODI0NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"sort is implemented already, and join is more or less implemented in my comma PR.","createdAt":"2020-05-14T09:34:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15109#issuecomment-628518244","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyODUxODU2MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"The comma (nd) allows to load multiple table outputs into a single table, so it can be postprocessed in a handy way\r\n","createdAt":"2020-05-14T09:35:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15109#issuecomment-628518560","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyODUxODc3Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"So imho this pr can be closed when https://github.com/radareorg/radare2/pull/16824 gets merged","createdAt":"2020-05-14T09:35:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15109#issuecomment-628518777","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5ODI2NTA3OA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See https://github.com/radareorg/radare2/pull/17701","createdAt":"2020-09-24T10:41:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15109#issuecomment-698265078","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5ODI2NTg1OA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"join is done in the other pr of me implementing the, command","createdAt":"2020-09-24T10:43:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15109#issuecomment-698265858","viewerDidAuthor":true}],"number":15109,"title":"Integrate `join`, `sort`, `uniq` commands with the RTable API"},{"body":"**Environment information**\r\n* Operating System: Ubuntu Linux\r\n* Cutter version: Cutter-v1.9.0-x64.Linux.AppImage\r\n* File format: ihex (intel hex)\r\n\r\n**Describe the bug**\r\n\r\nTricore files do not seem to be loaded correctly.\r\nI have a tricore .hex file that I open using the ihex:// input.\r\nThen, in cutter, it displays only \"FF\", it does not find any functions, and it even does not find strings.\r\nI tried converting the .hex file to a binary file using s_record before, which resulted in a multi-GB file. However, this file also exhibited the same behavior (but \"00\"s instead of \"FF\").\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\n1. Get some hexfile, I finally found a public one:\r\nhttp://git.edi.lv/vitalijs.fescenko/Erika_OS_Aurix_TC29x_port/raw/5517d045a617cde6fa17eb19d6ac2e7045474aba/Port_To_TC297_Guide/Tricore_TC297B_Multicore/Debug/tc27x_multicore.hex \r\n\r\n2. load it into cutter using ihex:// and select tricore architecture\r\n3. wait (or disable auto-analysis and wait less)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUzNDIzODA5NA==","author":{"login":"karliss"},"authorAssociation":"CONTRIBUTOR","body":"There were some recent ihex fixes in r2. I think those happened right after 1.9 release see the issue referenced in radareorg/cutter#1745 . Without those it will read almost correct data making you very confused.\r\n\r\nA build from latest master will still show you a bunch of 0xff at the start of file, but that's because the file you linked doesn't map anything at 0x00000000. The interesting part is at 0x80000000 and 0x80020000 .  I am guessing that long analysis and lack of functions is due to r2 being silly and searching for code in the big empty regions. It probably needs some hints about regions which  need to be analyzed.","createdAt":"2019-09-23T19:01:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15215#issuecomment-534238094","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzNDMzMjIxMw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"It probably should create corresponding maps when loading ihex files\n\nOn Tue, Sep 24, 2019, 3:01 AM karliss <notifications@github.com> wrote:\n\n> There were some recent ihex fixes in r2. I think those happened right\n> after 1.9 release see the issue referenced in radareorg/cutter#1745\n> <https://github.com/radareorg/cutter/issues/1745> . Without those it will\n> read almost correct data making you very confused.\n>\n> A build from latest master will still show you a bunch of 0xff at the\n> start of file, but that's because the file you linked doesn't map anything\n> at 0x00000000. The interesting part is at 0x80000000 and 0x80020000 . I am\n> guessing that long analysis and lack of functions is due to r2 being silly\n> and searching for code in the big empty regions. It probably needs some\n> hints about regions which need to be analyzed.\n>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/radareorg/cutter/issues/1785?email_source=notifications&email_token=AABRT7KVXYNJZT4LK57WAHTQLEHA7A5CNFSM4IZKPGL2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD7L5HDQ#issuecomment-534238094>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABRT7KJLP6VMNHMKSKJZ4TQLEHA7ANCNFSM4IZKPGLQ>\n> .\n>\n","createdAt":"2019-09-24T00:07:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15215#issuecomment-534332213","viewerDidAuthor":false}],"number":15215,"title":"Load tricore .hex files."},{"body":"Currently types processing is quite complex and partially reside in RAnal, partially in RBin. We could think if it's possible and worthwhile to split into the separate module - RTypes, like RParse for example.","comments":[],"number":15088,"title":"Isolate types handling into the separate module - RTypes"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nNo.\r\n\r\n**Describe the solution you'd like**\r\nWhen using panel mode along with (optionally) a debugger and the decompiler panel, I'd like to be able to have the current instruction highlighted in the decompiler side.\r\n\r\n**Describe alternatives you've considered**\r\nIDA may be the only solution I've seen this actually implemented on.\r\n\r\n**Additional context**\r\nEventually, it'd be nice to have source level stepping and source level variable queries.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUzMTU4ODgyOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Use decompilation with offsets and just click the offset. Thats the current way to do that until we define and implement the full decompilation metadata between r2dec, r2ghidra and retdec.\n\n> On 15 Sep 2019, at 18:33, bannsec <notifications@github.com> wrote:\n> \n> Is your feature request related to a problem? Please describe.\n> No.\n> \n> Describe the solution you'd like\n> When using panel mode along with (optionally) a debugger and the decompiler panel, I'd like to be able to have the current instruction highlighted in the decompiler side.\n> \n> Describe alternatives you've considered\n> IDA may be the only solution I've seen this actually implemented on.\n> \n> Additional context\n> Eventually, it'd be nice to have source level stepping and source level variable queries.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-09-15T18:35:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15042#issuecomment-531588829","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU4NzM3NTgyMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can you describe this issue better because i think this is already implemented in r2, unless you are talking about tokenized decompiler output with interactive seeking instead of just offset level with pddo","createdAt":"2020-02-18T09:56:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15042#issuecomment-587375820","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU4NzQ5NDg0MA==","author":{"login":"bannsec"},"authorAssociation":"CONTRIBUTOR","body":"So I do find `pdgo` to be super helpful. What would be awesome is if `pdgo` while in debugging mode would highlight your current address and allow stepping.\r\n\r\nThe current setup:\r\n - V!\r\n - Swap frame for decompiler w/ offsets\r\n - Set break on known decompiler offset (one of the ones listed on the side by the decomp)\r\n - `dcu <breakpoint`\r\n - Verify `rip` is on that instruction but no highlight on that instruction in `pdgo`.\r\n\r\nPic of pdi\r\n\r\n![pdi](https://user-images.githubusercontent.com/7632864/74746306-3c7f3200-5233-11ea-8cdc-e6bd806b751b.png)\r\n\r\nPic of pdgo (same debugging session and rip). Would be nice to have `0x400a53` highlighted.\r\n\r\n![pdgo](https://user-images.githubusercontent.com/7632864/74746330-43a64000-5233-11ea-98d3-5f73df8a89ed.png)\r\n\r\n","createdAt":"2020-02-18T14:45:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15042#issuecomment-587494840","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU4NzUwNjIwMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"that works for me\n\n> On 18 Feb 2020, at 15:45, bannsec <notifications@github.com> wrote:\n> \n> So I do find pdgo to be super helpful. What would be awesome is if pdgo while in debugging mode would highlight your current address and allow stepping.\n> \n> The current setup:\n> \n> V!\n> Swap frame for decompiler w/ offsets\n> Set break on known decompiler offset (one of the ones listed on the side by the decomp)\n> dcu <breakpoint\n> Verify rip is on that instruction but no highlight on that instruction in pdgo.\n> Pic of pdi\n> \n>  <https://user-images.githubusercontent.com/7632864/74746306-3c7f3200-5233-11ea-8cdc-e6bd806b751b.png>\n> Pic of pdgo (same debugging session and rip). Would be nice to have 0x400a53 highlighted.\n> \n>  <https://user-images.githubusercontent.com/7632864/74746330-43a64000-5233-11ea-98d3-5f73df8a89ed.png>\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/15042?email_source=notifications&email_token=AAG75FWQRDIA5ZYYZMWI46DRDPYBDA5CNFSM4IW3GEZ2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEMCHLOA#issuecomment-587494840>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FUVBFDW2UO2CA57LS3RDPYBDANCNFSM4IW3GEZQ>.\n> \n\n","createdAt":"2020-02-18T15:08:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15042#issuecomment-587506200","viewerDidAuthor":false}],"number":15042,"title":"Visual Panel Decomp Highlight"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Android LineageOS 16 (08/2019) ARM32\r\n| File format of the file you reverse (mandatory)      | ZygoteVM (ELF shared-object, native C, not Dalvik)\r\n| Architecture/bits of the file (mandatory)            | arm16/32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.8.0 22727 @ linux-arm-32 git.3.8.0-66-g0587b7f6d commit: 0587b7f6d7c7e70217b31cd2e2cfdf59fb13bc99 build: 2019-09-14__01:15:06\r\n\r\n### Expected behavior\r\n```\r\n# r2 -d <pid>\r\n-or-\r\n# LD_LIBRARY_PATH=/system/lib:$LD_LIBRARY_PATH r2 -d <pid>\r\n```\r\n_pid = ProcessID of ZygoteVM child process (e.g. com.android.email)_\r\n_asm.arch = arm\r\nasm.bits = 16_\r\n\r\nApp should freeze and continue with 'dc'.\r\n\r\n### Actual behavior\r\nApp freezes but doesn't continue.\r\n\r\n### Steps to reproduce the behavior \r\nI'm using r2 directly (on-device) with Termux (root) via remote SSH. \r\nYou can take any app. They all behave the same. R2 breaks properly after invocation, the screen freezes (app halted) and you can run some limited commands. Other commands might raise flickering error messages (SIGILL something...). Attempting code continuation ('dc') leads to r2 waiting forever and the app still halted.","comments":[],"number":15035,"title":"Android/ARM debugger broken"},{"body":"Make it so when M-. is pressed, last argument from previous command is written into the current cli input.\r\nExample:\r\n```\r\n> s main\r\n> af <M-.> \r\n```\r\nWould add \"main\" in the cursor position:\r\n```\r\n> af main\r\n```\r\nMore info on [yank-last-arg](https://www.gnu.org/software/bash/manual/html_node/Commands-For-History.html).","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUyOTkwNzAyOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"this sounds crazy useful, but i cant repro in mac bash, anyway i would appreciate having this. and maybe this fits with the proposal i got about having configurable keybindings for autocompleting keywords and such, not just tab\n\n> On 10 Sep 2019, at 13:55, Ã“scar Carrasco <notifications@github.com> wrote:\n> \n> Make it so when M-. is pressed, last argument from previous command is written into the current cli input.\n> Example:\n> \n> > s main\n> > af <M-.> \n> Would add \"main\" in the cursor position:\n> \n> > af main\n> More info on yank-last-arg <https://www.gnu.org/software/bash/manual/html_node/Commands-For-History.html>.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/15007?email_source=notifications&email_token=AAG75FSCICXEZK77FUNCYY3QI6DJXA5CNFSM4IVGV23KYY3PNVWWK3TUL52HS4DFUVEXG43VMWVGG33NNVSW45C7NFSM4HKNTSMA>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AAG75FTBWDFHCUAFRPISNPLQI6DJXANCNFSM4IVGV23A>.\n> \n\n","createdAt":"2019-09-10T12:15:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15007#issuecomment-529907029","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzMDI1MzI2Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Please add the mention in Dietline chapter of radare2book.\n\nOn Tue, Sep 10, 2019, 8:15 PM radare <notifications@github.com> wrote:\n\n> this sounds crazy useful, but i cant repro in mac bash, anyway i would\n> appreciate having this. and maybe this fits with the proposal i got about\n> having configurable keybindings for autocompleting keywords and such, not\n> just tab\n>\n> > On 10 Sep 2019, at 13:55, Ã“scar Carrasco <notifications@github.com>\n> wrote:\n> >\n> > Make it so when M-. is pressed, last argument from previous command is\n> written into the current cli input.\n> > Example:\n> >\n> > > s main\n> > > af <M-.>\n> > Would add \"main\" in the cursor position:\n> >\n> > > af main\n> > More info on yank-last-arg <\n> https://www.gnu.org/software/bash/manual/html_node/Commands-For-History.html\n> >.\n> >\n> > â€”\n> > You are receiving this because you are subscribed to this thread.\n> > Reply to this email directly, view it on GitHub <\n> https://github.com/radare/radare2/issues/15007?email_source=notifications&email_token=AAG75FSCICXEZK77FUNCYY3QI6DJXA5CNFSM4IVGV23KYY3PNVWWK3TUL52HS4DFUVEXG43VMWVGG33NNVSW45C7NFSM4HKNTSMA>,\n> or mute the thread <\n> https://github.com/notifications/unsubscribe-auth/AAG75FTBWDFHCUAFRPISNPLQI6DJXANCNFSM4IVGV23A\n> >.\n> >\n>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/radare/radare2/issues/15007?email_source=notifications&email_token=AABRT7NUSSCWCBLOD7WVJNDQI6FUXA5CNFSM4IVGV23KYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD6K32VI#issuecomment-529907029>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABRT7KNOP2CGE47VBDXOJ3QI6FUXANCNFSM4IVGV23A>\n> .\n>\n","createdAt":"2019-09-11T07:12:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15007#issuecomment-530253266","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzMDcwMTQ5OA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"can you also add the corresponding vi binding? See https://superuser.com/questions/18498/last-parameter-of-last-command-in-bash-in-vi-mode\r\nthe default value for `vi-last-arg` is `_`","createdAt":"2019-09-12T07:25:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15007#issuecomment-530701498","viewerDidAuthor":false}],"number":15007,"title":"Implement yank-last-arg in r2 cli"},{"body":"Hello,\r\nthis report is based on #7715\r\nhttps://github.com/radare/radare2/issues/7715#issuecomment-528784879\r\n\r\nIt seems that afu can make function shorter but not bigger than already analyzed.\r\nSee this (benign, but potentially malicious) example - 1be43b8a34a908b2916a82ca715ebb9b_Project1.zip (password infected):\r\nhttps://github.com/radare/radare2/files/3583046/1be43b8a34a908b2916a82ca715ebb9b_Project1.zip\r\n\r\nThe entry0 function gets analyzed longer than it actually is. The function entry0 is the standard VB stub which passes the address of the VB5 control structure (0x40126c) to the VB main function sub.MSVBVM60.DLL_ThunRTMain but doesn't expect to return back.\r\n\r\n```\r\nradare2 Project1.exe\r\n[0x00401130]> s entry0\r\n[0x00401130]> aF @entry0\r\n[0x00401130]> pdf @entry0\r\nâ”Œ (fcn) entry0 82\r\nâ”‚   entry0 ();\r\nâ”‚           0x00401130      686c124000     push 0x40126c\r\nâ”‚           0x00401135      e8eeffffff     call sub.MSVBVM60.DLL_ThunRTMain\r\nâ”‚           0x0040113a      0000           add byte [eax], al\r\nâ”‚           0x0040113c      0000           add byte [eax], al\r\n...\r\nâ””       â”‚   0x00401181      cc             int3\r\n```\r\n\r\nYou can make the function shorter with afu. Both size and realsz gets updated by afu to shorten the entry0 function and pdf then works as instructed (except I by mistake used end address 0x00401135 instead of 0x0040113a):\r\n\r\n```\r\n[0x00401130]> afu 0x00401135 @entry0\r\n[0x00401130]> pdf\r\nâ”Œ (fcn) entry0 5\r\nâ”‚   entry0 ();\r\nâ””           0x00401130      686c124000     push 0x40126c\r\n[0x00401130]> afi\r\n#\r\noffset: 0x00401130\r\nname: entry0\r\nsize: 5\r\nis-pure: false\r\nrealsz: 5\r\nstackframe: 12\r\ncall-convention: cdecl\r\ncyclomatic-cost : 1\r\ncyclomatic-complexity: 1\r\nbits: 32\r\ntype: fcn [NEW]\r\nnum-bbs: 1\r\nedges: 0\r\nend-bbs: 1\r\ncall-refs: 0x00401128 C\r\ndata-refs: 0x0040126c\r\ncode-xrefs:\r\nin-degree: 0\r\nout-degree: 1\r\ndata-xrefs:\r\nlocals: 0\r\nargs: 0\r\ndiff: type: new\r\n```\r\n\r\nThis was mistake and I want to make the function bigger - having the 2 opcodes = push + call. But using \"afu\" you can't make it back bigger. When making the function bigger it only changes \"size\", but not the \"realsz\". You can recognize it from the asciiart around function that the function is ending with the \"..\" and not with the \"â””\", but that's all it changed:\r\n\r\n```\r\n[0x00401130]> afu 0x0040113a @entry0\r\n[0x00401130]> pdf\r\nâ”Œ (fcn) entry0 5\r\nâ”‚   entry0 ();\r\nâ”‚           0x00401130      686c124000     push 0x40126c\r\n..\r\n[0x00401130]> afi\r\n#\r\noffset: 0x00401130\r\nname: entry0\r\nsize: 10\r\nis-pure: false\r\nrealsz: 5\r\nstackframe: 12\r\ncall-convention: cdecl\r\ncyclomatic-cost : 1\r\ncyclomatic-complexity: 1\r\nbits: 32\r\ntype: fcn [NEW]\r\nnum-bbs: 1\r\nedges: 0\r\nend-bbs: 1\r\ncall-refs: 0x00401128 C 0x004011de J\r\ndata-refs: 0x0040126c\r\ncode-xrefs:\r\nin-degree: 0\r\nout-degree: 1\r\ndata-xrefs:\r\nlocals: 0\r\nargs: 0\r\ndiff: type: new\r\n```\r\n\r\nThe only work-around seems to be delete the function analysis data for this function and start from beginning:\r\n\r\n```\r\n[0x00401130]> af- entry0\r\n[0x00401130]> afu 0x0040113a\r\n[0x00401130]> pdf\r\nâ”Œ (fcn) entry0 10\r\nâ”‚   entry0 ();\r\nâ”‚           0x00401130      686c124000     push 0x40126c\r\nâ””           0x00401135      e8eeffffff     call sub.MSVBVM60.DLL_ThunRTMain\r\n[0x00401130]> afi\r\n#\r\noffset: 0x00401130\r\nname: entry0\r\nsize: 10\r\nis-pure: false\r\nrealsz: 10\r\nstackframe: 0\r\ncall-convention: cdecl\r\ncyclomatic-cost : 4\r\ncyclomatic-complexity: 1\r\nbits: 32\r\ntype: fcn [NEW]\r\nnum-bbs: 1\r\nedges: 0\r\nend-bbs: 1\r\ncall-refs: 0x00401128 C\r\ndata-refs: 0x0040126c\r\ncode-xrefs:\r\nin-degree: 0\r\nout-degree: 1\r\ndata-xrefs:\r\nlocals: 0\r\nargs: 0\r\ndiff: type: new\r\n```\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU3NjUzNzk0NA==","author":{"login":"ITAYC0HEN"},"authorAssociation":"CONTRIBUTOR","body":"@thestr4ng3r , any chance that your analysis blocks PR solved this?\r\nCC https://github.com/radareorg/cutter/issues/1711","createdAt":"2020-01-21T06:30:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14992#issuecomment-576537944","viewerDidAuthor":false}],"number":14992,"title":"afu makes function shorter but not longer"},{"body":"This is related to https://github.com/radare/radare2/issues/8823#issue-273307071\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Manjaro x86 64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            |  x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.8.0 22671 @ linux-x86-64                                      git.3.8.0-23-g5bb241711  commit: ```5bb241711983c5d8b548c7980058f1dda67fb5d6``` build: 2019-09-08__00:58:25\r\n\r\n### Expected behavior\r\n`dbt` in r2 shows the same backtrace addresses as `bt` in gdb.\r\n\r\n### Actual behavior\r\n#### gdb's `bt` output:\r\n`#0  0x0000000000400810 in pwnme ()`\r\n`#1  0x41415041414f4141 in ?? ()`\r\n`#2  0x0000000000400051 in ?? ()`\r\n`#3  0x00007ffff7df6ee3 in __libc_start_main () from /usr/lib/libc.so.6`\r\n`#4  0x0000000000400679 in _start ()`\r\n#### r2's `dbt` output:\r\n`0  0x00400810 sp: 0x00000000 0    [??]  rip `\r\n`1  0x7f8c418d8ee3 sp: 0x7ffd602ff8a8 16   [??]  rsi+1071295618 `\r\n`2  0x7f8c41ac08a1 sp: 0x7ffd602ff938 144  [??]  map.usr_lib_ld_2.29.so.r_x+59553 `\r\n`3  0x00400679 sp: 0x7ffd602ff968 48   [??]  entry0+41 `\r\n\r\n\r\nAfter crashing program with cyclic pattern in gdb, bt shows address which can be used to calculate offset. In r2 that cant be done.\r\n`pxq @rsp` shows the string with pattern.\r\n\r\n### Steps to reproduce the behavior \r\n#### in r2:\r\n- open binary with `r2 -R stdin=./test.txt -d ret2win`\r\n- `dc`\r\n- `dbt`\r\n#### in gdb:\r\n- open binary `gdb ret2win`\r\n- `r < test.txt`\r\n- `bt`\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\n[ret2win.zip](https://github.com/radare/radare2/files/3587096/ret2win.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYyNjA3MDE1Ng==","author":{"login":"abcSup"},"authorAssociation":"CONTRIBUTOR","body":"> gdb's bt output:\r\n> ```\r\n> #0 0x0000000000400810 in pwnme ()\r\n> #1 0x41415041414f4141 in ?? ()\r\n> #2 0x0000000000400051 in ?? ()\r\n> #3 0x00007ffff7df6ee3 in __libc_start_main () from /usr/lib/libc.so.6\r\n> #4 0x0000000000400679 in _start ()\r\n> ```\r\nI actually looked into this weeks ago and was researching on how `gdb` is able to keep track of the stack frames. It turned out that `gdb` does not actively keep track of the stack frames during execution and the backtrace is generated on requests. I also asked in their irc and was told that `gdb` should not be able to resolve the stack frames past `#1 0x41415041414f4141 in ?? ()` because the base stack pointer is already corrupted. I am still not able to understand how `gdb` does in this case and I have tried another buffer overflow scenario in which `gdb` was not able to resolve past the corrupted return address. But, what you are expecting is right. `r2` should at least output the corrupted return address.\r\n\r\nWhat `r2` does in default (`fuzzy`) is going through the stack frames beginning from `esp/rsp` and searching for values for that look like addresses pointing to somewhere in executable memory maps, so it skips the corrupted return address in this case.\r\n\r\nCurrently, there are `fuzzy` and `anal` types of backtrace analysis in native Linux debugger, which can be set with `e dbg.btalgo`. I will try fixing the `anal` backtrace analysis because that seems to be the best way to resolve the stack frames for now. Backtrace analysis could definitely be improved with `DWARF` info in `.eh_frame` in future.","createdAt":"2020-05-09T00:06:34Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14986#issuecomment-626070156","viewerDidAuthor":false}],"number":14986,"title":"Wrong backtrace using dbt"},{"body":"`Vvv` hud for setting the types of variables is suboptimal. it just takes any type you put in, even if there is no type listed. \r\n\r\nwe should provide autocompletion/list of all known types (`pf` types, native types, etc.)","comments":[],"number":14965,"title":"autocompletion/improved Vvv type setting"},{"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nThe pseudo-code view `e asm.pseudo = true` works only with intel syntax `e asm.syntax = intel` and not with AT&T syntax `e asm.syntax = att`.\r\n\r\n**Describe the solution you'd like**\r\n\r\nAdd pseudo-code support also when AT&T syntax is selected.\r\n","comments":[],"number":14946,"title":"Pseudo code view / AT&T syntax"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | `openSuse Tumbleweed `\r\n| File format of the file you reverse (mandatory)      | `Java Class File`\r\n| Architecture/bits of the file (mandatory)            | `x32`\r\n| r2 -v full output, **not truncated** (mandatory)     | `radare2 3.7.1 22665 @ linux-x86-64 git.3.7.1-138-g3113d2aca commit: 3113d2acafca2bf4cca13f508d71dd187a595a9b build: 2019-08-30__09:32:28`\r\n\r\n### Expected behavior\r\nWhen viewing a class file with Ghidra, basic blocks are broken up the graph view is rendered like this: \r\n![image](https://user-images.githubusercontent.com/5833122/64026443-c6640300-cb0c-11e9-83ed-9e019c624a5c.png)\r\n\r\n\r\n### Actual behavior\r\nWhen opening with Radare2 it seems that each instruction of a function is rendered (and recognized) as a basic block, leading to a confusing graph view.\r\n\r\nHere is a screenshot of the same function as shown above:\r\n![image](https://user-images.githubusercontent.com/5833122/64026521-ebf10c80-cb0c-11e9-92bd-9a0c16e2e710.png)\r\n\r\n### Steps to reproduce the behavior \r\n- Open the following Malware [M.zip](https://github.com/radare/radare2/files/3560152/M.zip) (password: infected)\r\n- `aa;s 0x000010c9;VV`\r\n- Behavior can also be confirmed by running `afb`, there should only be 5 basic blocks of this function\r\n\r\n### Additional Information\r\nBasic Block output\r\n```\r\n[0x000010c9]> afb\r\n0x000010c9 0x000010ca 01:032E 1\r\n0x000010ca 0x000010cb 01:032F 1\r\n0x000010cb 0x000010cc 00:0000 1 j 0x00000459 f 0x000010cc\r\n0x000010cc 0x000010cd 01:0330 1\r\n0x000010cd 0x000010ce 01:0331 1\r\n0x000010ce 0x000010cf 00:0000 1 j 0xffffffffffff8206 f 0x000010cf\r\n0x000010cf 0x000010d0 01:0332 1\r\n0x000010d0 0x000010d1 01:0333 1\r\n0x000010d1 0x000010d2 01:0334 1\r\n0x000010d2 0x000010d3 01:0335 1\r\n0x000010d3 0x000010d4 01:0336 1\r\n0x000010d4 0x000010d5 00:0000 1 j 0x0000055b f 0x000010d5\r\n0x000010d5 0x000010d6 01:0337 1\r\n0x000010d6 0x000010d7 01:0338 1\r\n0x000010d7 0x000010d8 01:0339 1\r\n0x000010d8 0x000010d9 01:033A 1\r\n0x000010d9 0x000010da 01:033B 1\r\n0x000010da 0x000010db 01:033C 1\r\n0x000010db 0x000010de 00:0000 3 j 0x00000011 f 0x000010de\r\n0x000010de 0x000010df 01:033D 1\r\n0x000010df 0x000010e1 00:0000 2\r\n0x000010e1 0x000010e2 01:033E 1\r\n0x000010e2 0x000010e3 01:033F 1\r\n0x000010e3 0x000010e4 01:0340 1\r\n0x000010e4 0x000010e5 01:0341 1\r\n0x000010e5 0x000010e6 01:0342 1\r\n0x000010e6 0x000010e7 01:0343 1\r\n0x000010e7 0x000010e8 01:0344 1\r\n0x000010e8 0x000010e9 01:0345 1\r\n0x000010e9 0x000010ea 01:0346 1\r\n0x000010ea 0x000010eb 01:0347 1\r\n0x000010eb 0x000010ec 01:0348 1\r\n0x000010ec 0x000010ed 00:0000 1 j 0x00005b3e f 0x000010ed\r\n0x000010ed 0x000010ee 01:0349 1\r\n0x000010ee 0x000010ef 01:034A 1\r\n0x000010ef 0x000010f0 01:034B 1\r\n0x000010f0 0x000010f2 01:034C 2\r\n0x000010f2 0x000010f3 01:034D 1\r\n0x000010f3 0x000010f4 01:034E 1\r\n0x000010f4 0x000010f5 01:034F 1\r\n0x000010f5 0x000010f8 00:0000 3 j 0x0000111f f 0x000010f8\r\n0x000010f8 0x000010f9 01:0350 1\r\n0x000010f9 0x000010fa 01:0351 1\r\n0x000010fa 0x000010fb 01:0352 1\r\n0x000010fb 0x000010fc 01:0353 1\r\n0x000010fc 0x000010ff 00:0000 3 j 0x00000015 f 0x000010ff\r\n0x000010ff 0x00001102 01:0354 3\r\n0x00001102 0x00001103 01:0355 1\r\n0x00001103 0x00001104 01:0356 1\r\n0x00001104 0x00001105 01:0357 1\r\n0x00001105 0x00001106 01:0358 1\r\n0x00001106 0x00001107 01:0359 1\r\n0x00001107 0x0000110a 00:0000 3 j 0x0000111f f 0x0000110a\r\n0x0000110a 0x0000110b 01:035A 1\r\n0x0000110b 0x0000110c 01:035B 1\r\n0x0000110c 0x0000110d 01:035C 1\r\n0x0000110d 0x00001110 01:035D 3\r\n0x00001110 0x00001111 01:035E 1\r\n0x00001111 0x00001114 00:0000 3 j 0x00000015 f 0x00001114\r\n0x00001114 0x00001116 01:035F 2\r\n0x00001116 0x00001117 01:0360 1\r\n0x00001117 0x00001118 01:0361 1\r\n0x00001118 0x00001119 01:0362 1\r\n0x00001119 0x0000111a 01:0363 1\r\n0x0000111a 0x0000111d 00:0000 3 j 0x000010f5\r\n0x0000111d 0x0000111e 01:0364 1\r\n0x0000111e 0x0000111f 00:0000 1\r\n0x0000111f 0x00001122 00:0000 3\r\n0x00001122 0x00001123 01:0365 1\r\n0x00001123 0x00001124 01:02BA 1\r\n0x00001124 0x00001127 00:0000 3 j 0x00000019 f 0x00001127\r\n0x00001127 0x00001128 00:0000 1\r\n```\r\n\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUyNjY5OTM4Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Thats a regression. You can probably try to see what happens if you do a2f instead of af. But the java support have been unmaintained for so much time already so it may be good to get some more tests and love\n\n> On 30 Aug 2019, at 16:03, Nick Hoffman <notifications@github.com> wrote:\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\topenSuse Tumbleweed\n> File format of the file you reverse (mandatory)\tJava Class File\n> Architecture/bits of the file (mandatory)\tx32\n> r2 -v full output, not truncated (mandatory)\tradare2 3.7.1 22665 @ linux-x86-64 git.3.7.1-138-g3113d2aca commit: 3113d2acafca2bf4cca13f508d71dd187a595a9b build: 2019-08-30__09:32:28\n> Expected behavior\n> \n> When viewing a class file with Ghidra, basic blocks are broken up the graph view is rendered like this:\n> \n> \n> Actual behavior\n> \n> When opening with Radare2 it seems that each instruction of a function is rendered (and recognized) as a basic block, leading to a confusing graph view.\n> \n> Here is a screenshot of the same function as shown above:\n> \n> \n> Steps to reproduce the behavior\n> \n> Open the following Malware M.zip (password: infected)\n> aa;s 0x000010c9;VV\n> Behavior can also be confirmed by running afb, there should only be 5 basic blocks of this function\n> Additional Information\n> \n> Basic Block output\n> \n> [0x000010c9]> afb\n> 0x000010c9 0x000010ca 01:032E 1\n> 0x000010ca 0x000010cb 01:032F 1\n> 0x000010cb 0x000010cc 00:0000 1 j 0x00000459 f 0x000010cc\n> 0x000010cc 0x000010cd 01:0330 1\n> 0x000010cd 0x000010ce 01:0331 1\n> 0x000010ce 0x000010cf 00:0000 1 j 0xffffffffffff8206 f 0x000010cf\n> 0x000010cf 0x000010d0 01:0332 1\n> 0x000010d0 0x000010d1 01:0333 1\n> 0x000010d1 0x000010d2 01:0334 1\n> 0x000010d2 0x000010d3 01:0335 1\n> 0x000010d3 0x000010d4 01:0336 1\n> 0x000010d4 0x000010d5 00:0000 1 j 0x0000055b f 0x000010d5\n> 0x000010d5 0x000010d6 01:0337 1\n> 0x000010d6 0x000010d7 01:0338 1\n> 0x000010d7 0x000010d8 01:0339 1\n> 0x000010d8 0x000010d9 01:033A 1\n> 0x000010d9 0x000010da 01:033B 1\n> 0x000010da 0x000010db 01:033C 1\n> 0x000010db 0x000010de 00:0000 3 j 0x00000011 f 0x000010de\n> 0x000010de 0x000010df 01:033D 1\n> 0x000010df 0x000010e1 00:0000 2\n> 0x000010e1 0x000010e2 01:033E 1\n> 0x000010e2 0x000010e3 01:033F 1\n> 0x000010e3 0x000010e4 01:0340 1\n> 0x000010e4 0x000010e5 01:0341 1\n> 0x000010e5 0x000010e6 01:0342 1\n> 0x000010e6 0x000010e7 01:0343 1\n> 0x000010e7 0x000010e8 01:0344 1\n> 0x000010e8 0x000010e9 01:0345 1\n> 0x000010e9 0x000010ea 01:0346 1\n> 0x000010ea 0x000010eb 01:0347 1\n> 0x000010eb 0x000010ec 01:0348 1\n> 0x000010ec 0x000010ed 00:0000 1 j 0x00005b3e f 0x000010ed\n> 0x000010ed 0x000010ee 01:0349 1\n> 0x000010ee 0x000010ef 01:034A 1\n> 0x000010ef 0x000010f0 01:034B 1\n> 0x000010f0 0x000010f2 01:034C 2\n> 0x000010f2 0x000010f3 01:034D 1\n> 0x000010f3 0x000010f4 01:034E 1\n> 0x000010f4 0x000010f5 01:034F 1\n> 0x000010f5 0x000010f8 00:0000 3 j 0x0000111f f 0x000010f8\n> 0x000010f8 0x000010f9 01:0350 1\n> 0x000010f9 0x000010fa 01:0351 1\n> 0x000010fa 0x000010fb 01:0352 1\n> 0x000010fb 0x000010fc 01:0353 1\n> 0x000010fc 0x000010ff 00:0000 3 j 0x00000015 f 0x000010ff\n> 0x000010ff 0x00001102 01:0354 3\n> 0x00001102 0x00001103 01:0355 1\n> 0x00001103 0x00001104 01:0356 1\n> 0x00001104 0x00001105 01:0357 1\n> 0x00001105 0x00001106 01:0358 1\n> 0x00001106 0x00001107 01:0359 1\n> 0x00001107 0x0000110a 00:0000 3 j 0x0000111f f 0x0000110a\n> 0x0000110a 0x0000110b 01:035A 1\n> 0x0000110b 0x0000110c 01:035B 1\n> 0x0000110c 0x0000110d 01:035C 1\n> 0x0000110d 0x00001110 01:035D 3\n> 0x00001110 0x00001111 01:035E 1\n> 0x00001111 0x00001114 00:0000 3 j 0x00000015 f 0x00001114\n> 0x00001114 0x00001116 01:035F 2\n> 0x00001116 0x00001117 01:0360 1\n> 0x00001117 0x00001118 01:0361 1\n> 0x00001118 0x00001119 01:0362 1\n> 0x00001119 0x0000111a 01:0363 1\n> 0x0000111a 0x0000111d 00:0000 3 j 0x000010f5\n> 0x0000111d 0x0000111e 01:0364 1\n> 0x0000111e 0x0000111f 00:0000 1\n> 0x0000111f 0x00001122 00:0000 3\n> 0x00001122 0x00001123 01:0365 1\n> 0x00001123 0x00001124 01:02BA 1\n> 0x00001124 0x00001127 00:0000 3 j 0x00000019 f 0x00001127\n> 0x00001127 0x00001128 00:0000 1\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-08-30T18:17:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14933#issuecomment-526699382","viewerDidAuthor":false}],"number":14933,"title":"Basic Blocks issue disassembling Java class file"},{"body":"See the attached presentation from https://events.linuxfoundation.org/images/stories/slides/lfcs2013_shebs.pdf\r\n[lfcs2013_shebs.pdf](https://github.com/radare/radare2/files/3551971/lfcs2013_shebs.pdf)\r\n\r\nSee also https://www.embecosm.com/appnotes/ean4/embecosm-howto-rsp-server-ean4-issue-2.html","comments":[],"number":14922,"title":"Support multicore targets in GDB remote debugger"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nAdd support for MobiCore Loadable Format (MCLF) which used by trustlet and driver binaries\r\n\r\n**Describe alternatives you've considered**\r\nhttps://github.com/ghassani/mclf-ida-loader\r\nhttps://github.com/NeatMonster/mclf-ghidra-loader\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU0MjU2MzMwMw==","author":{"login":"Stolas"},"authorAssociation":"CONTRIBUTOR","body":"At rcon I started with this issue although due to time loss and a crashed HDD I did not manage to finish it yet. Current code is at: https://gist.github.com/Stolas/e3ecaebaa7369b2d8d6c539b9ac2908e I hope to find time to finish this soon with unittests etc. |\r\n\r\nIf anyone else is quicker than I am feel free to use some of the code already written.","createdAt":"2019-10-16T07:28:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14879#issuecomment-542563303","viewerDidAuthor":false}],"number":14879,"title":"Support for MobiCore Loadable Format (MCLF)"},{"body":"It is popular (at least more popular than some of the architectures already in the core), and it is rotting in radare2-extras. Moving to the main repo will bring it under tighter scrutiny and will not allow it to rot.\r\n\r\n# Lua files\r\n- https://github.com/radare/radare2-extras/tree/master/lua53\r\n\r\nAlso they require regression tests in as well.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUyMzQ2NDc0NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"if we add the lua disassembler it will cost us -1 to use lua as scripting language too beacuse we will have to ship that code too","createdAt":"2019-08-21T13:47:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14866#issuecomment-523464745","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMzQ2NTE3NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"also, there are several versions of lua, each one have differences in the disassembler, so we will have to ship > 3 implementations of the lua interpreter which also looks wrong to me to have it in master.\r\n\r\nif nobody wants to maintain that, like it will happen. i will have to be in charge of maintaining this and im not in the mood to do so","createdAt":"2019-08-21T13:48:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14866#issuecomment-523465175","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyOTM4MTIxOA==","author":{"login":"ehooo"},"authorAssociation":"NONE","body":"The pyc plugin is not working now cause the internals structs on the core was changed.\r\nI tried to solve but I couldn't here you are the initial patch\r\n[pyc.patch.txt](https://github.com/radare/radare2/files/3589681/pyc.patch.txt)\r\n","createdAt":"2019-09-09T09:26:41Z","includesCreatedEdit":false,"isMinimized":true,"minimizedReason":"outdated","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14866#issuecomment-529381218","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyOTUyMTgyOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can  you make a PR? if its not working, at least it wont be that dramatic and i can review the changes you did in the gh website\n\nthanks!!\n\n> On 9 Sep 2019, at 11:26, Victor Torre <notifications@github.com> wrote:\n> \n> The pyc plugin is not working now cause the internals structs on the core was changed.\n> I tried to solve but I couldn't here you are the initial patch\n> pyc.patch.txt <https://github.com/radare/radare2/files/3589681/pyc.patch.txt>\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/14866?email_source=notifications&email_token=AAG75FSW2CL7OERU7IZR6VDQIYJFPA5CNFSM4IOFBF6KYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD6G3OYQ#issuecomment-529381218>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AAG75FSXQ6A5EAFFYWRFL4LQIYJFPANCNFSM4IOFBF6A>.\n> \n\n","createdAt":"2019-09-09T15:07:13Z","includesCreatedEdit":false,"isMinimized":true,"minimizedReason":"outdated","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14866#issuecomment-529521829","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyOTU5NzYyNg==","author":{"login":"FXTi"},"authorAssociation":"CONTRIBUTOR","body":"Python bytecode plugin has been moved into the main repository. Someone change the issue's title please.","createdAt":"2020-05-16T06:39:03Z","includesCreatedEdit":false,"isMinimized":true,"minimizedReason":"resolved","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14866#issuecomment-629597626","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyOTYxMDAyMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Why lua?\n\n> On 16 May 2020, at 08:39, FXTi <notifications@github.com> wrote:\n> \n> ï»¿\n> Python bytecode plugin has been moved into the main repository. Someone change the issue's title please.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-05-16T08:36:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14866#issuecomment-629610022","viewerDidAuthor":false}],"number":14866,"title":"Import Lua disassembler into the main repository"},{"body":"Hello.\r\nLike a previuos #14672 I would like to suggest to make a similar for `pxa`.\r\nIf some flagspace is chosen `fs somespace` the `pxa` will show only flags from this flagspace.\r\nAlso it would be great if `n`/`N` keys in visual mode will seek only for selected flagspace.\r\n","comments":[],"number":14860,"title":"\"pxa\" improvement"},{"body":"Not sure how much useful would be this sugar.. but will mimic posix shell standards at least","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUyMjQxNDYxOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"As well as &&","createdAt":"2019-08-19T05:11:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14847#issuecomment-522414618","viewerDidAuthor":false}],"number":14847,"title":"Alias || to ;?? "},{"body":"Hello,\r\n\r\n  A very simple question: in the sequence below, how can I with ESIL, don't get into the code of **sym.imp.func**:\r\n\r\naddress1  call dword [sym.imp.function]\r\naddress2  mov ...\r\n\r\n Ideally, when I meet a  **call [sym.import...]** , I want just to replace the address of import by the address +1 of the actual sequence(i.e. mov instruction on that case). I don't want to make a step over, because I need to see the code of other calls. My concern is only about imports.\r\n\r\n  Could you please help with some commands that automate that for all sym.imports that I can find in the binary.\r\n\r\nThanks a lot for your help in advance","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUyMjQxMTE5Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"with ahe you can replace the esil expression at any address. Esil expressions can contain r2 commands or run r2pipe scripts that change any register or memory value. You can also use aep to set an esil pin.. this is basicslly the same as an esil hint but only to run r2 commands instead of replacing esil expressions.\n\nThe help msg of aep is not clear at all.. but heres a simple example:\n\n$ r2 -\n> aep ?e hello world @ 0\n> aes\nHello world\n\nThis esil pin thing was kind of idea before esil expressions allowed to run r2 commands ans that was stuck waiting for feedback 2 years ago. So i would be happy to hear about your comments on this.\n\nHow would u expect to solve this without knowing any of this? I would be happy to deprecate the esil pins and just use esil hints. But we should provide an easy way to reimplement most libc imports and do that with one command or using a script that comes with r2.. maybe having some custom implementations like we have for syscalls,\n\nAnither option i would think is to treat calls specially and be able to reimplement or ignore any call that falls in a memory range (plt). And just return 0. (We have wao to write portable assembly). So another solution is to use io.cache and reimplement those instructions by patching them in memory.\n\nAs i said. I understand this is a very common problem when using esil for real many cases and i want/need feedback to get this right/tight so it makes sense for everyone and not just me :) but as i said there r already a bunch of possible solutions right now, like the esil hint way\n\nahe rsp,[8],rip,=,8,rsp,-= @@ sym.imp*\n\nObv this is not portable, and i think we should have a bunch of crossplatform esil expressions or way to ignore calls.\n\nFeedback is welcome. If u search for â€œaepâ€ and â€œaheâ€ is issues u will find other attempts to simplify this issue\n\n> On 19 Aug 2019, at 00:31, lamin3 <notifications@github.com> wrote:\n> \n> Hello,\n> \n> A very simple question: in the sequence below, how can I with ESIL, don't get into the code of sym.imp.func:\n> \n> address1 call dword [sym.imp.function]\n> address2 mov ...\n> \n> Ideally, when I meet a call [sym.import...] , I want just to replace the address of import by the address +1 of the actual sequence(i.e. mov instruction on that case). I don't want to make a step over, because I need to see the code of other calls. My concern is only about imports.\n> \n> Could you please help with some commands that automate that for all sym.imports, and for for any binary.\n> \n> Thanks a lot for your help in advance\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-08-19T04:54:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14843#issuecomment-522411193","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyNTQxMjEyOA==","author":{"login":"laminenoureddine"},"authorAssociation":"NONE","body":"@radare : Thanks a loooot for your very detailed answer. It was definitely helpful. And sorry for the super late feedback.\r\n\r\n  Going back to the context of my issue: I try to extract the first 30-50 mnemonics of Windows binaries. And since I'm under Linux, I use ESIL for this process of tracing. I want traces that look like: [push, mov, pop, call, .......50th_menmonic] for each binary. And the problem was around the Windows Api calls whose the emulated code is not present, therefore when any Windows api call is met, the flow goes to fffffff sections. Reason why I opened the issue about that.\r\n\r\n I tested multiple solutions, focusing on what you suggested me i.e. the ones with \"ahe\" and \"aep\". \r\nAnd finally it was possible with **\"aep**\". Now when an Windows Api calls is met, the **hook** puts the eip (or aepc program counter since we are talking about ESIL) at the return address.\r\n\r\n I list below the commands used for tracing:\r\n\r\n\r\n- **aeim** (to initialize the registers ....)\r\n- **e dbg.trace= true** (enable logging traces)\r\n-  **aep aepc=[esp] @@ reloc***  (here is the **solution** that worked for me)\r\n- **50aes** (extract 50 mnemonics)\r\n- **dtd** (output the traces)\r\n\r\nI attached also two screenshots:the first is just to show you where was the problem and the second is to show the commands I used above, and I join also the binary tested.\r\n\r\n[Armadillo_aitagent.exe.zip](https://github.com/radare/radare2/files/3547417/Armadillo_aitagent.exe.zip)\r\n![Screenshot from 2019-08-27 19-46-15](https://user-images.githubusercontent.com/46441713/63795106-90076780-c903-11e9-8fa8-1e51507aae11.png)\r\n![Screenshot from 2019-08-27 19-38-30](https://user-images.githubusercontent.com/46441713/63794447-541fd280-c902-11e9-945d-4b4b257e8504.png)\r\n\r\nAgain, thanks a loot for your very helpful very guiding answer. And please, if you see that the solution may not work for other cases or simply doesn't correspond with the issue please give me a feedback on that.","createdAt":"2019-08-27T17:52:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14843#issuecomment-525412128","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyNTQ1MzI0MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Yeah that works but its a bit tedious to go for each function. Maybe good to define some boundsries by default or provide implementations for most common functions like for libc. Do u have any proposal to aimplify and make this with commands?\n\nGood to hear that it worked! And thanks for the screenshots and explanation! Issues are usually a good way to find for answers\n\n> On 27 Aug 2019, at 19:52, lamin3 <notifications@github.com> wrote:\n> \n> @radare : Thanks a loooot for your very detailed answer. It was definitely helpful. And sorry for the super late feedback.\n> \n> Going back to the context of my issue: I try to extract the first 30-50 mnemonics of Windows binaries. And since I'm under Linux, I use ESIL for this process of tracing. I want traces that look like: [push, mov, pop, call, .......50th_menmonic] for each binary. And the problem was around the Windows Api calls whose the emulated code is not present, therefore when any Windows api call is met, the flow goes to fffffff sections. Reason why I opened the issue about that.\n> \n> I tested multiple solutions, focusing on what you suggested me i.e. the ones with \"ahe\" and \"aep\".\n> And finally it was possible with \"aep\". Now when an Windows Api calls is met, the hook puts the eip (or aepc program counter since we are talking about ESIL) at the return address.\n> \n> I list below the commands used for tracing:\n> \n> aeim (to initialize the registers ....)\n> e dbg.trace= true (enable logging traces)\n> aep aepc=[esp] @@ reloc* (here is the solution that worked for me)\n> 50aes (extract 50 mnemonics)\n> dtd (output the traces)\n> I attached also two screenshots:the first is just to show you where was the problem and the second is to show the commands I used above, and I join also the binary tested.\n> \n> Armadillo_aitagent.exe.zip\n> \n> \n> \n> Again, thanks a loot for your very helpful very guiding answer. And please, if you see that the solution may not work for other cases or simply doesn't correspond with the issue please give me a feedback on that.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-08-27T19:42:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14843#issuecomment-525453241","viewerDidAuthor":false}],"number":14843,"title":"Question about imports"},{"body":"I am attempting to parse sk_buff structs that come into specific linux kernel functions. When I specify the `include` directory in which sk_buff  and its dependencies are defined, I am unable to see their definitions.\r\n\r\nThe linux kernrel is running in a QEMU VM.\r\n\r\n  \r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu x86_64\r\n| File format of the file you reverse (mandatory)      | ELF 64-bit LSB executable, x86-64, version 1 (SYSV), statically linked\r\n| Architecture/bits of the file (mandatory)            | x86/64 \r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.0.0-git 22756 @ linux-x86-64 git.2.9.0-352-gd7c1ab2 commit: d7c1ab23257118f2cf22d8ea6bb00777fb1c2beb build: 2019-08-03__19:59:55\r\n\r\n### Expected behavior\r\n\r\n```bash\r\n/home/user/path/to/linux/source/linux$ r2 -e dbg.exe.path=./vmlinux -e dbg.bpinmaps=0 -e dir.types=$(pwd)/include/ -d gdb://127.0.0.1:1234\r\n= attach 1 1\r\n= attach 1 0\r\nWarning: Cannot initialize dynamic strings\r\n -- TIRED OF WAITING\r\n[0xffffffff8199977e]> ts\r\n[struct foo {int a, float j}; ...]\r\n[0xffffffff8199977e]> \r\n```\r\n\r\n\r\n\r\n\r\n### Actual behavior\r\n```bash\r\nlinux$ r2 -e dbg.exe.path=./vmlinux -e dbg.bpinmaps=0 -e dir.types=$(pwd)/include/ -d gdb://127.0.0.1:1234\r\n= attach 1 1\r\n= attach 1 0\r\nWarning: Cannot initialize dynamic strings\r\n -- TIRED OF WAITING\r\n[0xffffffff8199977e]> ts\r\n[0xffffffff8199977e]> \r\n```\r\n\r\n### Steps to reproduce the behavior \r\n- Please share the binary if it is shareable by drag and dropping it here in a zip archive (mandatory)\r\n\r\nThe binary is very large, I will share upon request.\r\n\r\n[linux source](https://github.com/torvalds/linux)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUyNTEyOTYxMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"We need a binary still. Thank you!","createdAt":"2019-08-27T04:15:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14828#issuecomment-525129611","viewerDidAuthor":false}],"number":14828,"title":"Failing type imports when using -e dir.types=/path/to/headers/"},{"body":"[Incremental computing](https://en.wikipedia.org/wiki/Incremental_computing), also known as incremental computation, is a software feature which, whenever a piece of data changes, attempts to save time by only recomputing those outputs which depend on the changed data. When incremental computing is successful, it can be significantly faster than computing new outputs naively. For example, a spreadsheet software package might use incremental computation in its recalculation feature, to update only those cells containing formulas which depend (directly or indirectly) on the changed cells.\r\n\r\nWhen incremental computing is implemented by a tool that can implement it for a variety of different pieces of code automatically, that tool is an example of a program analysis tool for optimization. \r\n\r\n[Adapton](http://adapton.org/) is a good example of incremental computation framework implemented in Rust. [Fungi](https://arxiv.org/abs/1808.07826) is the typed incremental computation language based on Adapton.\r\n\r\nBAP 2.0 [recently switched](https://github.com/BinaryAnalysisPlatform/bap/pull/960) its disassembly and analysis engine to be of incremental nature:\r\n> New Speculative Disassembling Driver\r\n>\r\n>This PR also provides a completely new, written from scratch, driver for disassembling (as well as all existing disassemblers are rewritten to use this driver). The driver is using the new Knowledge Framework and builds the whole program CFG incrementally storing only the minimum information in the process memory. It could be used to implement disassemblers of different favors, e.g., linear, recursive descent, probabilistic, and superset disassemblers.\r\n>\r\n>It is implemented as a recursive descent parser with arbitrary backtracking and is capable to automatically refute instruction chains which are not terminated by jumps, thus seriously reducing the generated CFG in speculative and superset modes.\r\n>\r\n>More importantly, the disassembler is designed to work incrementally and build the CFG on the fly, so that we can analyze huge binaries, each subroutine independently. Which also relies on a new CFG reconstruction and function boundaries algorithm described below.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUyMTU1NzAyNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I think i filled an issue for this some years ago. Mainly to make analysis interruptable\n\n> On 15 Aug 2019, at 09:20, Anton Kochkov <notifications@github.com> wrote:\n> \n> Incremental computing, also known as incremental computation, is a software feature which, whenever a piece of data changes, attempts to save time by only recomputing those outputs which depend on the changed data. When incremental computing is successful, it can be significantly faster than computing new outputs naively. For example, a spreadsheet software package might use incremental computation in its recalculation feature, to update only those cells containing formulas which depend (directly or indirectly) on the changed cells.\n> \n> When incremental computing is implemented by a tool that can implement it for a variety of different pieces of code automatically, that tool is an example of a program analysis tool for optimization.\n> \n> Adapton is a good example of incremental computation framework implemented in Rust. Fungi is the typed incremental computation language based on Adapton.\n> \n> BAP 2.0 recently switched its disassembly and analysis engine to be of incremental nature:\n> \n> New Speculative Disassembling Driver\n> \n> This PR also provides a completely new, written from scratch, driver for disassembling (as well as all existing disassemblers are rewritten to use this driver). The driver is using the new Knowledge Framework and builds the whole program CFG incrementally storing only the minimum information in the process memory. It could be used to implement disassemblers of different favors, e.g., linear, recursive descent, probabilistic, and superset disassemblers.\n> \n> It is implemented as a recursive descent parser with arbitrary backtracking and is capable to automatically refute instruction chains which are not terminated by jumps, thus seriously reducing the generated CFG in speculative and superset modes.\n> \n> More importantly, the disassembler is designed to work incrementally and build the CFG on the fly, so that we can analyze huge binaries, each subroutine independently. Which also relies on a new CFG reconstruction and function boundaries algorithm described below.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-08-15T08:16:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14812#issuecomment-521557025","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMTU2OTM4Mw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"I wasn't able to find it. Maybe different wording? Anyway, it is a useful concept.","createdAt":"2019-08-15T09:00:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14812#issuecomment-521569383","viewerDidAuthor":false}],"number":14812,"title":"Make analysis and disassembly incremental"},{"body":"When do reverse engineer of C++ program, STL function has very long name in asm code which causes difficult analysis. As a result, could we make the name more shorter and clear?\r\n\r\nTake the following simple c++ program as an example:\r\n\r\n```\r\n// main.cpp\r\n#include <iostream>\r\n#include <vector>\r\n#include <string>\r\n\r\nusing namespace std;\r\n\r\nint main(int argc, char *argv[]) {\r\n    vector<string> v;\r\n    v.push_back(\"hello\");\r\n    string& x = v[0];\r\n    v.push_back(\"world\");\r\n    cout << x << endl;\r\n    return 0;\r\n}\r\n```\r\n\r\nCompile it with `g++ -Wall main.cpp -o main`.\r\n\r\nWhen you open the main executable, you will have the following asm codes:\r\n\r\n```\r\n\r\n[0x1000006ad]> s entry0\r\n[0x100000640]> pd 20\r\n            ;-- main:\r\n            ;-- section.0.__TEXT.__text:\r\n            ;-- _main:\r\n            ;-- func.100000640:\r\nâ”Œ (fcn) entry0 251\r\nâ”‚   entry0 (int32_t arg1, int32_t arg2);\r\nâ”‚ bp: 10 (vars 10, args 0)\r\nâ”‚ sp: 0 (vars 0, args 0)\r\nâ”‚ rg: 2 (vars 0, args 2)\r\nâ”‚           0x100000640      55             push rbp                   ; [00] -r-x section size 9476 named 0.__TEXT.__text\r\nâ”‚           0x100000641      4889e5         mov rbp, rsp\r\nâ”‚           0x100000644      4881ec900000.  sub rsp, 0x90\r\nâ”‚           0x10000064b      c745fc000000.  mov dword [var_4h], 0\r\nâ”‚           0x100000652      897df8         mov dword [var_8h], edi    ; arg1\r\nâ”‚           0x100000655      488975f0       mov qword [var_10h], rsi   ; arg2\r\nâ”‚           0x100000659      488d7dd8       lea rdi, [var_28h]\r\nâ”‚           0x10000065d      e84e010000     call method.std::__1::vector_std::__1::basic_string_char__std::__1::char_traits_char___std::__1::allocator_char_____std::__1::allocator_std::__1::basic_string_char__std::__1::char_traits_char___std::__1::allocator_char_______.vector\r\nâ”‚           0x100000662      488d352b2800.  lea rsi, str.hello         ; section.4.__TEXT.__cstring\r\nâ”‚                                                                      ; 0x100002e94 ; \"hello\"\r\nâ”‚           0x100000669      488d7dc0       lea rdi, [var_40h]\r\nâ”‚           0x10000066d      e80e020000     call method.std::__1::basic_string_char__std::__1::char_traits_char___std::__1::allocator_char___::basic_string_std::__1.nullptr_t__char_const\r\nâ”‚       â”Œâ”€< 0x100000672      e900000000     jmp 0x100000677\r\nâ”‚       â”‚   ; CODE XREF from entry0 @ 0x100000672\r\nâ”‚       â””â”€> 0x100000677      488d7dd8       lea rdi, [var_28h]\r\nâ”‚           0x10000067b      488d75c0       lea rsi, [var_40h]\r\nâ”‚           0x10000067f      e84c010000     call method std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) ; method.std::__1::vector_std::__1::basic_string_char__std::__1::char_traits_char___std::__1::allocator_char_____std::__1::allocator_std::__1::basic_string_char__std::__1::char_traits_char___std::__1::allocator_char_______.push_back_std::__1::basic_string\r\nâ”‚       â”Œâ”€< 0x100000684      e900000000     jmp 0x100000689\r\nâ”‚       â”‚   ; CODE XREF from entry0 @ 0x100000684\r\nâ”‚       â””â”€> 0x100000689      488d7dc0       lea rdi, [var_40h]\r\nâ”‚           0x10000068d      e8fa240000     call sym std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::~basic_string() ; sym.std::__1::basic_string_char__std::__1::char_traits_char___std::__1::allocator_char___::_basic_string\r\nâ”‚       â”Œâ”€< 0x100000692      e900000000     jmp 0x100000697\r\nâ”‚       â”‚   ; CODE XREF from entry0 @ 0x100000692\r\nâ”‚\r\n```\r\n\r\nIn the terminal, the line is long so that it wraps into the next line.\r\nIt is not convenient  to read the asm code.\r\n\r\nAnd `another big issue` I have found in visual mode, the line calling STL function is not show fully which makes big trouble to figure out what the function is. Showed in the below image:\r\n\r\n![image](https://user-images.githubusercontent.com/12681575/62909835-ca73ef00-bdb0-11e9-8417-cf071bef1b1e.png)\r\n\r\nMy environment information:\r\n\r\n```\r\nOS\r\n    Mac Mojave 10.14.4\r\n r2\r\n\r\n    radare2 3.7.0 22641 @ darwin-x86-64 git.3.7.0-55-g40f4db6ea\r\n    commit: 40f4db6eaaa709261db119ed3d791cd71930736c build: 2019-08-12__14:54:25\r\n```\r\n\r\n\r\nThe compiled binary is here:\r\n\r\n[democ++.zip](https://github.com/radare/radare2/files/3504293/democ%2B%2B.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUyMTUwNTI1Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Please attach the binaries. ","createdAt":"2019-08-15T04:01:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14794#issuecomment-521505256","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMTUwOTE1Mg==","author":{"login":"ikey4u"},"authorAssociation":"NONE","body":"> Please attach the binaries.\r\n\r\nThe attachment has been uploaded.\r\n\r\n","createdAt":"2019-08-15T04:27:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14794#issuecomment-521509152","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMTgwOTcwMQ==","author":{"login":"meme"},"authorAssociation":"CONTRIBUTOR","body":"This is just a result of template expansions in the STL, the job of the reverser is to discern the exact meaning, though I do agree that reading C++ symbols in radare2 is a complete pain in the ass since the range of characters used in demangled C++ symbols (`<`, `>`, etc.) are not used in radare2's symbol listing. For perspective, IDA simply leaves the name in its mangled form and leaves a comment with the demangled form adjacent in the linear disassembly view. In Binary Ninja the \"proper\" demangled name is displayed in all occurrences, and it will as well \"shorten\" names like \r\n\r\n```\r\ncall method.std::__1::vector_std::__1::basic_string_char__std::__1::char_traits_char___std::__1::allocator_char_____std::__1::allocator_std::__1::basic_string_char__std::__1::char_traits_char___std::__1::allocator_char_______.vector\r\n```\r\n\r\nto\r\n\r\n```\r\ncall    std::__1::vector<std::__...d::__1::allocator<char> > > >::vector\r\n```\r\n\r\nPerhaps an option for eliding \"unimportant\" template internals in the disassembly listing is a feature worth the work...","createdAt":"2019-08-15T21:48:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/14794#issuecomment-521809701","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMTk4Njg1NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"e bin.demangle=false or e asm.demangle=false should be good for you i guess but its indeed a pain\n\n> On 15 Aug 2019, at 23:48, meme <notifications@github.com> wrote:\n> \n> This is just a result of template expansions in the STL, the job of the reverser is to discern the exact meaning, though I do agree that reading C++ symbols in radare2 is a complete pain in the ass since the range of characters used in demangled C++ symbols (<, >, etc.) are not used in radare2's symbol listing. For perspective, IDA simply leaves the name in its mangled form and leaves a comment with the demangled form adjacent in the linear disassembly view. In Binary Ninja the \"proper\" demangled name is displayed in all occurrences, and it will as well \"shorten\" names like\n> \n> call method.std::__1::vector_std::__1::basic_string_char__std::__1::char_traits_char___std::__1::allocator_char_____std::__1::allocator_std::__1::basic_string_char__std::__1::char_traits_char___std::__1::allocator_char_______.vector\n> to\n> \n> call    std::__1::vector<std::__...d::__1::allocator<char> > > >::vector\n> Perhaps an option for eliding \"unimportant\" template internals in the disassembly listing is a feature worth the work...\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-08-16T12:06:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14794#issuecomment-521986854","viewerDidAuthor":false}],"number":14794,"title":"Make C++ STL library function more simplicity"},{"body":"The idea is to have a suffix replacement for @@= i. The same way we have |. And . Prefix\r\n\r\nFor example:\r\n\r\n?e 1 2 3 |@ x 32\r\n\r\nWill be the same as\r\n\r\nX 32 @@= 1 2 3","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUyMDIyMzQ5NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"It is so functional. ðŸ‘ ","createdAt":"2019-08-11T12:16:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14785#issuecomment-520223495","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMDIyNjg1NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I will think in more sugar for the commandline. Probably next year will be the right time to implement the commandparser so we should have defined all that stuff before. Any other idea?\n\nAbout |@ i was thinkjng in maybe |@@ and |@= but the meaning will differ probably.. diesnt seem tha intuitive like they are as reversed form\n\n> On 11 Aug 2019, at 14:16, Anton Kochkov <notifications@github.com> wrote:\n> \n> It is so functional. ðŸ‘\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-08-11T13:02:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14785#issuecomment-520226855","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMDI3NTIxMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Anyone?\n\n> On 11 Aug 2019, at 14:16, Anton Kochkov <notifications@github.com> wrote:\n> \n> It is so functional. ðŸ‘\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-08-12T00:43:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14785#issuecomment-520275210","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0Njg3NDc5NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@ret2libc feedback on this please? also add it tot he pad","createdAt":"2019-10-28T10:00:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14785#issuecomment-546874795","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0Njg4MjI4Nw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"It seems ok to me, though I always think all these kind of \"advanced\" stuff are more suited for a separate r2pipe script. I'd be more for keeping the r2 syntax as clean as possible. But yeah, this syntactic sugar thing should seems ok as we already have the functionality.","createdAt":"2019-10-28T10:20:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14785#issuecomment-546882287","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxNzc2MjQ3MA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I have removed this issue from 4.5.0 milestone, as tree-sitter parser just landed and I really think it's NOT the right time to introduce new sugar on top of existing parser (nor the right time to add features on top of new parser). We can keep the issue open, but definitely something to think about in at least a couple of releases from now.","createdAt":"2020-04-22T12:56:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14785#issuecomment-617762470","viewerDidAuthor":false}],"number":14785,"title":"Implement |@ suffix"},{"body":"See https://github.com/whatsbcn/shellforge4 for more architectures/platforms and various bugfixes","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUyMjM0ODA3NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@whatsbcn can  you do this?","createdAt":"2019-08-18T19:23:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14769#issuecomment-522348075","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5Hj9k-","author":{"login":"adwait1-g"},"authorAssociation":"CONTRIBUTOR","body":"I want to take this up, along with improving documentation of ragg2 (https://github.com/radareorg/radare2-book/issues/216).\r\n\r\nThanks,\r\nAdwaith","createdAt":"2022-08-01T02:19:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14769#issuecomment-1200609598","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5HlwUY","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Awesome! Looking forward your upcoming PRs","createdAt":"2022-08-01T11:32:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14769#issuecomment-1201079576","viewerDidAuthor":true}],"number":14769,"title":"Update shellforge"},{"body":"Currently they are a byte sequence. Should be an assembly sources, preferably compilable by rasm2.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUxODY3Mzc5OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Thats exactly how you get the hexpairs. Internally its passing the text representstion to the assembler apis\n\n> On 5 Aug 2019, at 22:50, Anton Kochkov <notifications@github.com> wrote:\n> \n> Currently they are a byte sequence. Should be an assembly sources, preferably compilable by rasm2.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-08-06T13:39:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14765#issuecomment-518673798","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxODkzMTUwNg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"hm? I don't see assembly sources in the repo then.","createdAt":"2019-08-07T04:08:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14765#issuecomment-518931506","viewerDidAuthor":false}],"number":14765,"title":"Convert hardcoded shellcodes in libr/egg into assembly sources"},{"body":"Current `p=` output takes a lot of the space, so it makes sense to add this mode into the visual interface too, allowing scrolling.","comments":[],"number":14748,"title":"Add visual `p=` scrolling mode"},{"body":"Some thoughts about REvent:\r\nREvent is already there and works, but here are some challenges and possible solutions:\r\n\r\n## Coarse/Fine Events\r\n\r\nWhen you have an action like \"analyze vars for function\" that does multiple finer-grained actions \"add a var to the function\", you might end up with the finer-grained actions each sending an event by itself while you will only want a single event to be sent.\r\n\r\nThis could be solved by adding something like `r_event_block_push()` and `r_event_block_pop()` that blocks all events in between and is organized as a task-local stack (can be just an int).\r\nSo the coarse action will block events while executing the finer actions and eventually send a single event. It's the coarse action's responsibility to make sure this event is accurate about what the finer actions did.\r\n\r\n## Detecting side-effects of Events\r\n\r\nFor example, many events affect the disassembly output. A common use-case would be to subscribe to events to detect when to refresh a certain portion of disassembly.\r\nFor cases like this I would propose to create functions like\r\n`bool r_event_affects_disasm(REventType type, void *data)`.\r\n","comments":[],"number":14742,"title":"REvent further steps"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Kali rolling x64\r\n| File format of the file you reverse (mandatory)      | PE (msvc VS2015 build)\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.7.0-git 22725 @ linux-x86-64 git.3.6.0-265-g9677804b8\r\ncommit: 9677804b8e4f187656279a109d937c583ca0fb0a build: 2019-07-29__12:31:46\r\n\r\n### Expected behavior\r\nI expected something like ELF/x64:\r\n![temp1](https://user-images.githubusercontent.com/22872513/62275301-193d9280-b45b-11e9-9e05-fc024485199d.png)\r\nthere is r2 defines call convention well: arg1 rdi, arg2 rsi, arg3 rdx, arg4 rcx\r\n\r\n### Actual behavior\r\nBut for PE/x64 it is looks a bit strange:\r\n![temp2](https://user-images.githubusercontent.com/22872513/62276063-aaf9cf80-b45c-11e9-8580-9730ab2a0fd4.png)\r\nIt seems to me that it could be like a:\r\n![temp3](https://user-images.githubusercontent.com/22872513/62276101-be0c9f80-b45c-11e9-91f3-78abb7e456fe.png)\r\nAlso I met wrong arguments determine with dhcpssvc.dll:\r\n![temp4](https://user-images.githubusercontent.com/22872513/62278815-42155600-b462-11e9-99b9-6d8a977d2c4d.png)\r\n\r\nI couldn't reproduce this in my sample so I provide this binary.\r\n[dhcpssvc.zip](https://github.com/radare/radare2/files/3455733/dhcpssvc.zip)\r\n\r\n\r\n### Steps to reproduce the behavior \r\n\r\n```\r\n#include <stdio.h>\r\n#include <stdlib.h>\r\n\r\nint test(int a, int b, int c, int d)\r\n{\r\n\treturn a+b+c+d;\r\n}\r\n\r\nint main(void)\r\n{\r\n\tprintf(\"%d\\n\", test(1,2,3,4));\r\n\treturn 0;\r\n}\r\n```\r\nopen VS2015 x64 console\r\n`cl test.c`\r\n\r\nFor dhcpssvc.dll:\r\n```\r\nidpd\r\nidp\r\naaa\r\ns pdb.UncodeOption\r\nV\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUyMDEyMTYwMw==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"Default cc for x86-64 binaries is `amd64` (https://github.com/radare/radare2/blob/master/libr/anal/d/cc-x86-64.sdb.txt#L1). You can call `afc=ms` to change it to MS fastcall.","createdAt":"2019-08-10T06:07:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14737#issuecomment-520121603","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMDMyOTUxNA==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"In general, If I open PE x86-64 binary, r2 determine call convention right.","createdAt":"2019-08-12T07:55:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14737#issuecomment-520329514","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMDMzMDU2MA==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"I need to `afc=ms` before analisys `aaa` - it works.\r\nBut how about changing call convention after analisys? I try `afc ms` but it doesn't change arguments.","createdAt":"2019-08-12T07:59:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14737#issuecomment-520330560","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMjM0NDU2MQ==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"You have to re-analyze the function in any case, for example `af` for a single function.","createdAt":"2019-08-18T18:32:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14737#issuecomment-522344561","viewerDidAuthor":false}],"number":14737,"title":"PE/x64 strange determine call convention"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Arch Linux, x86, 64 bits\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/32, x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.7.0-git 22437 @ linux-x86-64 git.3.6.0-300-g8fca9c95f commit: 8fca9c95f81d8c922723ac882fa46cc981a088f5 build: 2019-07-31__18:33:53\r\n\r\n### Expected behavior\r\n```\r\n[0xf7f35120]> dc qwerty\r\nerror: no such process\r\n[0xf7f35120]> \r\n```\r\n### Actual behavior\r\n```\r\n[0xf7f35120]> dc qwerty\r\n= attach 0 6969\r\nPTRACE_CONT: No such process\r\n\r\n```\r\nand hangs. Ctrl-C and Ctrl-D do not affect its state.\r\n\r\n### Steps to reproduce the behavior \r\n[hello.zip](https://github.com/radare/radare2/files/3452798/hello.zip)\r\n\r\nCompile with `gcc -o hello64 hello.c` or `gcc -m32 -o hello32 hello.c`\r\n\r\nRun with `r2 -d hello32` and execute a command `dc <some_text>`\r\n\r\nI know that `dc` expects a number (pid), so this is not critical, but still, it shouldn't hang the whole debugger...\r\n","comments":[],"number":14715,"title":"Invalid dc parameter hangs r2"},{"body":"The idea behind this is to be able to make assembly code to be executed as if it as C or Python, so the user can copypasta and reuse and extend any of the instruction behaviours\r\n\r\n![Screenshot 2019-07-31 at 16 24 42](https://user-images.githubusercontent.com/917142/62220154-dc689180-b3af-11e9-86ef-642bc9ce275a.png)\r\n","comments":[],"number":14714,"title":"pseudo api disasm proposal"},{"body":"# This template is meant for bug reports, if you have a feature request, please be as descriptive as possible and delete the template\r\n\r\nMake sure you are testing using the latest git version of radare2 before submitting any issue.\r\n\r\n*If you would like to report a bug, please fill the template below*\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Kali rolling x64\r\n| File format of the file you reverse (mandatory)      | PE (sys)\r\n| Architecture/bits of the file (mandatory)            | x86/32\r\n| r2 -v full output, **not truncated** (mandatory)     | radiff2 3.7.0-git 22725 @ linux-x86-64 git.3.6.0-265-g9677804b8\r\ncommit: 9677804b8e4f187656279a109d937c583ca0fb0a build: 2019-07-29__12:31:46\r\n\r\n### Expected behavior\r\nI expected to see difference in every basic block.\r\n\r\n### Actual behavior\r\nIn basic block with most strong difference show only respective content of \"before\" binary. By the way this basic block has orange color (but no red).\r\n\r\n### Steps to reproduce the behavior \r\n`radiff2 -G 'idp;aaa' -g pdb._IcaBindVirtualChannels_4 termdd_vuln.sys termdd_patched.sys | xdot -`\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\nDrag and drop zip archives containing the Additional info here, don't use external services or link.\r\n\r\n[binaries.zip](https://github.com/radare/radare2/files/3447597/binaries.zip)\r\n![temp](https://user-images.githubusercontent.com/22872513/62144422-3a8f6900-b30b-11e9-9e27-0fa358d27fe0.png)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU5NzI0MDIzMw==","author":{"login":"kuqadk3"},"authorAssociation":"CONTRIBUTOR","body":"Having problems with xdot when I tried to reproduce this in Ubuntu 16.04\r\n![image](https://user-images.githubusercontent.com/12135974/76345642-4b3e9d80-6336-11ea-8187-8267f5c0166e.png)\r\n","createdAt":"2020-03-10T18:22:42Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14702#issuecomment-597240233","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5NzI1MzU4OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can you describe how to repro this problem?","createdAt":"2020-03-10T18:50:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14702#issuecomment-597253588","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5NzI1OTkwMw==","author":{"login":"kuqadk3"},"authorAssociation":"CONTRIBUTOR","body":"> can you describe how to repro this problem?\r\n\r\nExactly the same as what the author did\r\n\r\n```\r\nradiff2 -G 'idp;aaa' -g pdb._IcaBindVirtualChannels_4 termdd_vuln.sys termdd_patched.sys | xdot -\r\n```\r\n\r\nWith 2 binary attached in the issue","createdAt":"2020-03-10T19:04:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14702#issuecomment-597259903","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5NzI2NzkxOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"-m a\n\n> On 10 Mar 2020, at 20:04, kuqadk3 <notifications@github.com> wrote:\n> \n> ï»¿\n> can you describe how to repro this problem?\n> \n> Exactly the same as what the author did\n> \n> radiff2 -G 'idp;aaa' -g pdb._IcaBindVirtualChannels_4 termdd_vuln.sys termdd_patched.sys | xdot -\n> With 2 binary attached in the issue\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-03-10T19:21:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14702#issuecomment-597267919","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5NzI3OTI5NQ==","author":{"login":"kuqadk3"},"authorAssociation":"CONTRIBUTOR","body":"Tried, still got error\r\n![image](https://user-images.githubusercontent.com/12135974/76352947-7f1fc000-6342-11ea-9b5d-420938a35308.png)\r\n","createdAt":"2020-03-10T19:46:28Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14702#issuecomment-597279295","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5NzQ2NzY4Mw==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"Originally I opened this issue because of another problem - radiff2 doesnt show full difference, especially in red(orange) basic blocks","createdAt":"2020-03-11T06:35:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14702#issuecomment-597467683","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5NzQ3MjU5NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@kuqadk3 it looks like the file has the ESC sequences, please check the contents of it.\r\nYou need to use `-m d` for the dot output.","createdAt":"2020-03-11T06:53:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14702#issuecomment-597472595","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5NzY3MzUwMg==","author":{"login":"kuqadk3"},"authorAssociation":"CONTRIBUTOR","body":"```-m d``` works. Thanks @XVilka \r\n\r\n@s0i37 buy one get two I guess ðŸ¤£ ","createdAt":"2020-03-11T14:40:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14702#issuecomment-597673502","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5NzY4NjIyMg==","author":{"login":"kuqadk3"},"authorAssociation":"CONTRIBUTOR","body":"I could not find any orange block or any block have a similar content like the orange block in the image\r\n\r\nI ran \r\n```\r\nradiff2 -G 'idp;aaa' -g pdb._IcaBindVirtualChannels_4 -m d termdd_vuln.sys termdd_patched.sys | xdot -\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/12135974/76431336-05401300-63e4-11ea-8d56-f29595ffd37d.png)\r\n\r\nCan you check @s0i37 ? Thanks and sorry cause I knew this issue was created long time ago.","createdAt":"2020-03-11T15:03:14Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14702#issuecomment-597686222","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5OTk5MTg0Nw==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"> `-m d` works. Thanks @XVilka\r\n> \r\n> @s0i37 buy one get two I guess\r\n\r\nIt seems `radiff2` has changed syntax a bit","createdAt":"2020-03-17T10:22:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14702#issuecomment-599991847","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5OTk5NTc0OA==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"> I could not find any orange block or any block have a similar content like the orange block in the image\r\n> \r\n> I ran\r\n> \r\n> ```\r\n> radiff2 -G 'idp;aaa' -g pdb._IcaBindVirtualChannels_4 -m d termdd_vuln.sys termdd_patched.sys | xdot -\r\n> ```\r\n> \r\n> ![image](https://user-images.githubusercontent.com/12135974/76431336-05401300-63e4-11ea-8d56-f29595ffd37d.png)\r\n> \r\n> Can you check @s0i37 ? Thanks and sorry cause I knew this issue was created long time ago.\r\n\r\nThere is a bit error from my side. This is diff of two `entry` because the `pdb._IcaBindVirtualChannels_4` was not found. Firstly you need run `idpd` from `r2 termdd_vuln.sys` one time.","createdAt":"2020-03-17T10:31:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14702#issuecomment-599995748","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5OTk5OTI4OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"we need more tests for radiff2 and the c command, so if you are testing this, it would be great to get some more tests to avoid future issues on this code.\n\nthanks!\n\n> On 17 Mar 2020, at 11:31, s0i37 <notifications@github.com> wrote:\n> \n> \n> I could not find any orange block or any block have a similar content like the orange block in the image\n> \n> I ran\n> \n> radiff2 -G 'idp;aaa' -g pdb._IcaBindVirtualChannels_4 -m d termdd_vuln.sys termdd_patched.sys | xdot -\n>  <https://user-images.githubusercontent.com/12135974/76431336-05401300-63e4-11ea-8d56-f29595ffd37d.png>\n> Can you check @s0i37 <https://github.com/s0i37> ? Thanks and sorry cause I knew this issue was created long time ago.\n> \n> There is a bit error from my side. This is diff of two entry because the pdb._IcaBindVirtualChannels_4 was not found. Firstly you need run idpd from r2 termdd_vuln.sys one time.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/14702#issuecomment-599995748>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FWQ75XLKLPIB42PRZLRH5GQTANCNFSM4IH52A2A>.\n> \n\n","createdAt":"2020-03-17T10:39:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/14702#issuecomment-599999288","viewerDidAuthor":false}],"number":14702,"title":"radiff2 doesn't show changes in strong difference basic block"},{"body":"Show also the value ranges on the right, like here:\r\n![image](https://user-images.githubusercontent.com/203261/62100844-ce3e4680-b2c5-11e9-9e6e-fa324786c6fc.png)\r\n\r\nNote, if `scr.utf8=true` is enabled, the ruler line should use vertical Unicode line character to be continuous. Also there is no need to name the axes. And no need for horizontal ruler, just vertical one.","comments":[],"number":14697,"title":"Add a ruler to horizontal histogram output (e.g. `p==`)"},{"body":"full class inhehritance graph is hard to navigate in ascii art","comments":[],"number":14686,"title":"add icg arg to graph only classes mathching strstr"},{"body":"Will be good to have a way to convert a list of things into a tree like `fg` does... but allow to navigate that results in visual mode like if it was a tree/directory structure.\r\n\r\nFor example  to navigate all the class packages, classes and methods/fields without having to add custom code for it.\r\n\r\nthis can be extended to be useful for any other textual output in r2","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUxNjAzMjkzOA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See https://github.com/radare/radare2/issues/12745","createdAt":"2019-07-29T15:10:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14685#issuecomment-516032938","viewerDidAuthor":false}],"number":14685,"title":"Tree hud thing"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Kali Rolling x64\r\n| File format of the file you reverse (mandatory)      | PE, ELF\r\n| Architecture/bits of the file (mandatory)            | 32, 64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.7.0-git 22725 @ linux-x86-64 git.3.6.0-265-g9677804b8\r\ncommit: 9677804b8e4f187656279a109d937c583ca0fb0a build: 2019-07-29__12:31:46\r\n\r\n### Expected behavior\r\nI expected what r2 determines structure fields in args/vars if I specified them by pointer.\r\n```\r\nmov rax, qword [var_8h]\r\nmovzx eax, byte [rax + Test.c]\r\n```\r\n\r\n### Actual behavior\r\nr2 doesn't propagate structure fields by pointer.\r\n```\r\nmov rax, qword [var_8h]\r\nmovzx eax, byte [rax + 0xc]\r\n```\r\n\r\n### Steps to reproduce the behavior\r\nI've created follow sample for demonstration\r\n```\r\n#include <stdio.h>\r\n#include <stdlib.h>\r\n\r\nstruct Test {\r\n\tchar *a;\r\n\tint b;\r\n\tchar c;\r\n};\r\n\r\nstruct Test* get_struct(struct Test* test)\r\n{\r\n\ttest->a = \"aa\";\r\n\ttest->b = 0x77;\r\n\ttest->c = 'c';\r\n\treturn test;\r\n}\r\nvoid main(void)\r\n{\r\n\tchar buf[sizeof(struct Test)];\r\n\tstruct Test *test = get_struct(&buf);\r\n\tprintf(\"%s %x %c\\n\", test->a, test->b, test->c);\r\n}\r\n```\r\n`aaa; s main`\r\n`to -`\r\n```\r\nstruct Test {\r\n\tchar *a;\r\n\tint b;\r\n\tchar c;\r\n};\r\n```\r\n`afvt var_8h Test*`\r\n`taa`\r\nHowever r2 still got `movzx eax, byte [rax + 0xc]`\r\ninstead of `movzx eax, byte [rax + Test.c]`\r\nBy the way `tas 0xc` or `tas 8` returns right fields.\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUxNzg5NzY2MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Can you please attach the binary of the test? So it will be easier to fix.","createdAt":"2019-08-03T05:59:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14684#issuecomment-517897661","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxODEzODgzMQ==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"[struct.zip](https://github.com/radare/radare2/files/3466600/struct.zip)\r\n","createdAt":"2019-08-05T08:30:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14684#issuecomment-518138831","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyNDg0MTg1OA==","author":{"login":"trib0r3"},"authorAssociation":"NONE","body":"@XVilka what is the status of this issue?","createdAt":"2019-08-26T12:32:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14684#issuecomment-524841858","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyNDg0MjkyNg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@sheadovas experimenting. If you want to help - PRs are welcome.","createdAt":"2019-08-26T12:36:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14684#issuecomment-524842926","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5OTk4ODQyMg==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"ping","createdAt":"2020-03-17T10:14:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14684#issuecomment-599988422","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5OTk5OTY5NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can we have a test commited for this at least?","createdAt":"2020-03-17T10:40:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14684#issuecomment-599999694","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY4NjM5MjA2MA==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"Hello.\r\nHas anything changes in this issue? I'm using `4.6.0-git` and I still have not create structures by pointers. It doesn't work either manually `aht A.b` or automatic `afvt var_8h A*`","createdAt":"2020-09-03T10:13:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14684#issuecomment-686392060","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY4NjQwMjE3Mg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@HoundThe do you have any comments on this? If not, @s0i37 I'd guess there are no news about this, I'm sorry.","createdAt":"2020-09-03T10:35:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14684#issuecomment-686402172","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY4NjYxMDAyMQ==","author":{"login":"HoundThe"},"authorAssociation":"CONTRIBUTOR","body":"No, sadly no updates yet.","createdAt":"2020-09-03T16:31:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14684#issuecomment-686610021","viewerDidAuthor":false}],"number":14684,"title":"\"afvt\" doesn't propagate pointer types"},{"body":"Basically a binary analysis dietline extension - converting the numbers in the command line between bases. For example if you have a command\r\n```\r\n[0x000000]> s 0x100\r\n```\r\nand you want quickly convert the value to the decimal or binary, you type some hotkeys while cursor on that number, and dietline converts the number and substitute it.\r\nInspired by [vim-radical](https://github.com/glts/vim-radical) Vim plugin.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU0NTQxNDY1MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"all issues with \"FEEDBACK WANTED\" should have any milestone associated ","createdAt":"2019-10-23T12:15:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14683#issuecomment-545414651","viewerDidAuthor":false}],"number":14683,"title":"Dietline - convert between numbers"},{"body":"Hello.\r\nI wanna suggest change separator for \"@@=\" to comma.\r\nFor example \"afvR\" command returns comma separated sequences. It is not convenient to replace every comma to space.\r\nMay be is it make sence to define delimiter character via r2 environment.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUxNTY4NzkxMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"We can handle comma and space and newline\n\n> On 27 Jul 2019, at 16:12, s0i37 <notifications@github.com> wrote:\n> \n> Hello.\n> I wanna suggest change separator for \"@@=\" to comma.\n> For example \"afvR\" command returns comma separated sequences. It is not convenient to replace every comma to space.\n> May be is it make sence to define delimiter character via r2 environment.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-07-27T14:23:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14673#issuecomment-515687913","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxNTY4OTk0OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@s0i37 I don't think adding the ability to choose the delimiter character everywhere is a good idea. What really should be done is the whole command line parsing code, see https://github.com/radare/radare2/issues/7967","createdAt":"2019-07-27T14:53:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14673#issuecomment-515689949","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxNTcyMDU5Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I think comma is fine as a separator. As addition to the space char. Obv making this confiturable is a terrible idea\n\n> On 27 Jul 2019, at 16:53, Anton Kochkov <notifications@github.com> wrote:\n> \n> @s0i37 I don't think adding the ability to choose the delimiter character everywhere is a good idea. What really should be done is the whole command line parsing code, see #7967\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-07-27T23:31:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14673#issuecomment-515720592","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxNTczNTg3Ng==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"> We can handle comma and space and newline\r\n> [â€¦](#)\r\n> On 27 Jul 2019, at 16:12, s0i37 ***@***.***> wrote: Hello. I wanna suggest change separator for \"@@=\" to comma. For example \"afvR\" command returns comma separated sequences. It is not convenient to replace every comma to space. May be is it make sence to define delimiter character via r2 environment. â€” You are receiving this because you are subscribed to this thread. Reply to this email directly, view it on GitHub, or mute the thread.\r\n\r\nComma doesn't work.\r\n`ecHi red @@=0x8048825,0x8048819,0x8048821,0x804884c,0x804883d,0x8048848`\r\nWill highlight only first.","createdAt":"2019-07-28T06:04:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14673#issuecomment-515735876","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxNTc0Njk2MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Obviously, because you have to separate them by space\n\nWe are discussing here to support ALSO the comma character\n\n> On 28 Jul 2019, at 08:04, s0i37 <notifications@github.com> wrote:\n> \n> We can handle comma and space and newline\n> â€¦\n> On 27 Jul 2019, at 16:12, s0i37 @.***> wrote: Hello. I wanna suggest change separator for \"@@=\" to comma. For example \"afvR\" command returns comma separated sequences. It is not convenient to replace every comma to space. May be is it make sence to define delimiter character via r2 environment. â€” You are receiving this because you are subscribed to this thread. Reply to this email directly, view it on GitHub, or mute the thread.\n> \n> Comma doesn't work.\n> ecHi red @@=0x8048825,0x8048819,0x8048821,0x804884c,0x804883d,0x8048848\n> Will highlight only first.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-07-28T09:21:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14673#issuecomment-515746961","viewerDidAuthor":false}],"number":14673,"title":"\"@@=\" improvement"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | macOS/x86_64/64\r\n| File format of the file you reverse (mandatory)      | mach064\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.7.0-git 22332 @ darwin-x86-64 git.3.6.0-187-ga4908fa0a commit: a4908fa0a1ca880c68de9b7a64a14569f93291af build: 2019-07-23__18:44:22\r\n\r\n### Expected behavior\r\n\r\nThe signatures of custom functions are shown at caller sites similarly to the signatures of well-known preconfigured functions (puts, printf, etc.)\r\n```asm\r\nmov rdi, qword [s]         ; const char *s\r\ncall sym.imp.puts          ; int puts(const char *s)\r\n```\r\n\r\n### Actual behavior\r\n\r\nThe signatures of custom functions and (named) arguments passed are not shown at caller sites, both signature and arguments are missing.\r\n```asm\r\nlea rdi, str.Hello_world   ; section.3.__TEXT.__cstring ; 0x100000fa2 ; \"Hello world!\"\r\ncall sym._myputs\r\n```\r\nJumping into the function itself shows a signature (though lacking return value) has been determined for the function so it is known but just not taken into account and shown at caller site.\r\n```asm\r\n    sym._myputs (char *arg1);\r\n        ; var char *s @ rbp-0x8\r\n        ; arg char *arg1 @ rdi\r\n```\r\n\r\n### Steps to reproduce the behavior \r\n\r\n[test.zip](https://github.com/radare/radare2/files/3423266/test.zip)\r\n`r2 -AA ./test`\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\n```c\r\n#include <stdio.h>\r\nint myputs(const char *s) {\r\n  return puts(s);\r\n}\r\nint main() {\r\n  return myputs(\"Hello world!\");\r\n}\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUxNDk0OTY2MA==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"Also related to https://github.com/radare/radare2/issues/14594","createdAt":"2019-07-25T08:27:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14632#issuecomment-514949660","viewerDidAuthor":false}],"number":14632,"title":"(custom) function type not propagating to callers"},{"body":"Otherwise we cant print c++ output for it. we need a smarter way to merge RBin.classes and RAnal.classes","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU0NTQyMDQ0Nw==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"It should be the other way around. ic comes from the bin. If it contains everything you need, you can work with it directly. Otherwise you copy it to ac and work on that.","createdAt":"2019-10-23T12:31:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14618#issuecomment-545420447","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwNzQxNDg3OA==","author":{"login":"HoundThe"},"authorAssociation":"CONTRIBUTOR","body":"Hmm, so what's the goal of this issue? Ability to merge binary classes into anal classes? Or the other way around?","createdAt":"2020-04-01T18:22:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14618#issuecomment-607414878","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwNzQxNjM5Mw==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"The goal is to have a way to import classes from bin to anal.","createdAt":"2020-04-01T18:26:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14618#issuecomment-607416393","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc0MzE3MzgyOQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"ic* can do that. or ic, when implemented. so i do agree, rbin info is tied to the binary so it cant be modified, the anal classes are something that is more tied to the user so it makes sense to let it to be imported and manipulate it there.","createdAt":"2020-12-11T12:47:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14618#issuecomment-743173829","viewerDidAuthor":true}],"number":14618,"title":"Make icc work with ac info"},{"body":"Profilling shows RAsm.disassemble () is called so many times.. \r\n\r\n![IMAGE 2019-07-22 15:10:35](https://user-images.githubusercontent.com/917142/61634982-db8a7e00-ac92-11e9-992a-efb89bf29a28.jpg)\r\n\r\n\r\nabout 60% of the tiem is spent there... so i added an eprintf (\"%p\\n\", a->pc); in`r_asm_disassemble` and dumped that into `a`:\r\n\r\n```\r\n> /R ret 2> a\r\n$ wc -l a\r\n 1725777 a\r\n$ cat a|sort -u| wc -l\r\n  361259\r\n$ cat a|uniq | wc -l\r\n 1337262\r\n$\r\n```\r\n\r\nAs you can see, this program contains 360k instructions, but it is disassembling 1725k.. This is about 5 times more times than what it should be needed.\r\n\r\nWe need a way to avoid disassemblling instructions twice or avoid that bottleneck in some way","comments":[],"number":14612,"title":"/R is slow"},{"body":"During every rename or type reassign, supply the type of information with confidence levels, in terms of Bayesian probabilities. So it will allow:\r\n- [ ] Set the minimum required threshold for the action (Rename, Retype, etc)\r\n- [ ] Apply different colors according to the confidence levels\r\n- [ ] Use the probabilities algebra during the type inference, to make the decision which type to propagate\r\n- [ ] Allow loading additional constraints from the file","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUxMjkwNDIzMg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Note, it can coexist with additional restrictions on the types - e.g. constrained types, see https://github.com/radare/radare2/pull/11144","createdAt":"2019-07-18T17:06:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14594#issuecomment-512904232","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxMzQ5MzY3Nw==","author":{"login":""},"authorAssociation":"NONE","body":"This is not really relevant I think.\r\nA confidence level is pointless, because it depends on too many unknown variables","createdAt":"2019-07-20T19:37:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14594#issuecomment-513493677","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxMzQ5NDMwNQ==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"No it's not. For instance, the default type for a variable is int32_t. Not if I manually change the type of a var and let automatic type propagation run, the manually set type should stay, but all the default int32_t can be overwritten.","createdAt":"2019-07-20T19:48:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14594#issuecomment-513494305","viewerDidAuthor":false}],"number":14594,"title":"Add a confidence levels for the analysis results"},{"body":"Theres no easy way to navigaate the graph in panels, follow edges, focus on node, etc\r\n\r\non big graphs this scr.interactive issue happens sometimes. i think that option should be temporarily unset\r\n\r\n![IMAGE 2019-07-13 02:15:46](https://user-images.githubusercontent.com/917142/61164281-20384b80-a514-11e9-941b-6cfd43b5e023.jpg)\r\n\r\nProposal:\r\n\r\n* [ ] '1..9' used to follow the nth edge\r\n* [ ] . -> scroll the buffer to make the selected node visible\r\n* [ ] / -> after highlight it hsould search the word in the current panel and scroll there","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUxNjIzMDcxNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@Vane11ope any fixes on this?","createdAt":"2019-07-30T02:11:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14557#issuecomment-516230716","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2MTQ4NDE3Mw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@Vane11ope any chance you would look to this?","createdAt":"2019-12-04T05:31:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14557#issuecomment-561484173","viewerDidAuthor":false}],"number":14557,"title":"Graph in panels"},{"body":"* [ ] Add a key to sort by offset (toggle inc/dec)\r\n* [ ] Add a key to sort by name (toggle inc/dec)\r\n* [ ] Display pkgnames as a tree :?\r\n* [ ] Pad the numeric index with 4 or 5 spaces (>9999 classes not common)\r\n\r\n\r\n<img width=\"548\" alt=\"Screenshot 2019-07-11 at 15 44 01\" src=\"https://user-images.githubusercontent.com/917142/61055893-b7a57d80-a3f2-11e9-9443-41b11a09cc08.png\">\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU0NTQxNjM1NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"seems like we should probably be integrating the hud with the table api","createdAt":"2019-10-23T12:19:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14549#issuecomment-545416354","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTU5NjQzNw==","author":{"login":"Vane11ope"},"authorAssociation":"CONTRIBUTOR","body":"ok","createdAt":"2020-01-17T11:52:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14549#issuecomment-575596437","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwNzAyOTY5NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cc @HoundThe ","createdAt":"2020-04-01T04:47:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14549#issuecomment-607029695","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwOTAyODgzMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@HoundThe want to take this issue?","createdAt":"2020-04-04T13:31:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14549#issuecomment-609028833","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwOTAzMTMyMw==","author":{"login":"HoundThe"},"authorAssociation":"CONTRIBUTOR","body":"@radare  Sure I'll have a look","createdAt":"2020-04-04T13:48:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14549#issuecomment-609031323","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMjY1MDc5OA==","author":{"login":"karliss"},"authorAssociation":"CONTRIBUTOR","body":"> Pad the numeric index with 4 or 5 spaces (>9999 classes not common)\r\n\r\nSingle dex file has 16bit limit for number of methods more than 65536 methods is impossible unless you use split code into multiple dex files. ","createdAt":"2020-04-12T17:38:37Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14549#issuecomment-612650798","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMjY1NDE2OQ==","author":{"login":"HoundThe"},"authorAssociation":"CONTRIBUTOR","body":"> Add a key to sort by name (toggle inc/dec)\r\n\r\nHow does this differ from the grep option?","createdAt":"2020-04-12T18:04:24Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14549#issuecomment-612654169","viewerDidAuthor":false}],"number":14549,"title":"Improve visual browse classes"},{"body":"Related to ?edd, r_str_scale and e scr.demo (https://github.com/radare/radare2/pull/12765)\r\n\r\n* [ ] Support for UTF8\r\n* [ ] Support for ANSI colors\r\n* [ ] Support transformation matrix\r\n* [ ] Support perspective\r\n* [ ] Support for rotation (not just scaling)\r\n* [ ] Avoid scaling more than original size to avoid artifacts/glitches\r\n* [ ] Use this to implement the minigraph gadget\r\n* [ ] integrated with the $aliasFiles","comments":[],"number":14546,"title":"Improve scr.demo (demoscene mode)"},{"body":"Before we had to click twice to select text in visual, but now we have to do scr.wheel=0 which is a bit confusing.\r\n\r\nmitmproxy handles the shift key to make that happen. but we can also usse a different approach and rename the var to scr.mouse instead of scr.wheel","comments":[],"number":14526,"title":"Toggle mouse somehow"},{"body":"Not sure about the best way to do this though. @radare any ideas?","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUwOTMxMjk1Mg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"cc @deepakchethan","createdAt":"2019-07-08T17:12:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15600#issuecomment-509312952","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2MzMwODU0Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"We can do this with chat or by improving the native regressions suite. Its the main user interfaxe so i expect people to complain if we break something and i think we have more importwnt things to test that UI yet\n\n> On 9 Dec 2019, at 14:32, Anton Kochkov <notifications@github.com> wrote:\n> \n> ï»¿\n> Not sure about the best way to do this though. @radare any ideas?\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2019-12-09T16:05:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15600#issuecomment-563308546","viewerDidAuthor":false}],"number":15600,"title":"Add tests for dietline"},{"body":"This is useful when using bin.libs, for multidex or when trying to emulate dyld. having a way to determine how many symbols with the same name and their offsets will be useful. this can be a merged view of RBin.. \r\n\r\nSo. Im thinking  that RBin.get_symbols() should return a list of all the  symbols of all the rbinfiles loaded. we can also add a RBin.get_symbol_by_name() which returns an  RList with all the RBinSymbols matching the given name, etc. this way handling multiple bins loaded will be  easier and we will be able to kill the bin->cur;","comments":[],"number":14517,"title":"Find symbol collisions when multiple bins are loaded"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | macOS Mojave 10.14\r\n| File format of the file you reverse (mandatory)      | Mach-O\r\n| Architecture/bits of the file (mandatory)            | armv7\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.7.0-git 22221 @ darwin-x86-64 git.3.6.0-102-g56cdeee66\r\ncommit: 56cdeee6668ce92f476eb2de85e17d7b9960cc88 build: 2019-07-07__17:58:04\r\n\r\n### Expected behavior\r\n\r\nI have the line `e scr.color=1` in my ~/.radare2rc. I expect this to set Radare2 to use colors when printing.\r\n\r\n### Actual behavior\r\n\r\nColors are used on startup but after running a server with `=h <port>`, no colors are used in the output and I have rerun `e scr.color=1`.\r\n\r\n### Steps to reproduce the behavior \r\n\r\nThis should be reproducible by opening any binary, running `e scr.color=1`, running `=h 9090` or whatever port, and then interrupting the server.\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\nN/A\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUxMDUwOTk3MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"The webserver as well as the rap server and the r2pipe interface disables colors by default. Thats a design decision\n\n> On 8 Jul 2019, at 01:32, SamL98 <notifications@github.com> wrote:\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tOS X\n> File format of the file you reverse (mandatory)\tMach-O\n> Architecture/bits of the file (mandatory)\tarmv7\n> r2 -v full output, not truncated (mandatory)\tradare2 3.7.0-git 22221 @ darwin-x86-64 git.3.6.0-102-g56cdeee66\n> commit: 56cdeee build: 2019-07-07__17:58:04\t\n> Expected behavior\n> \n> I have the line e scr.color=1 in my ~/.radare2rc. I expect this to set Radare2 to use colors when printing.\n> \n> Actual behavior\n> \n> Colors are used on startup but after running a server with =h <port>, no colors are used in the output and I have rerun e scr.color=1.\n> \n> Steps to reproduce the behavior\n> \n> This should be reproducible by opening any binary, running e scr.color=1, running =h 9090 or whatever port, and then interrupting the server.\n> \n> Additional Logs, screenshots, source-code, configuration dump, ...\n> \n> N/A\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-07-11T14:29:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14513#issuecomment-510509970","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxMTM5NjgxOA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@radare I think @SamL98 meant it should be enabled back once server finished working.","createdAt":"2019-07-15T13:14:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14513#issuecomment-511396818","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxMjg3NTU2Mw==","author":{"login":"SamL98"},"authorAssociation":"NONE","body":"@XVilka This would be my preferred behavior. I don't see a reason why not.","createdAt":"2019-07-18T15:51:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14513#issuecomment-512875563","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxNjIzMDA4Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"scripting basically, it's intended by design, so this requires a discussion and voting to change this default behaviour","createdAt":"2019-07-30T02:07:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14513#issuecomment-516230086","viewerDidAuthor":false}],"number":14513,"title":"scr.color reset"},{"body":"Problem is related to the recursive analysis of some jumptables. \r\n\r\nHere's the jmp rax:\r\n\r\n```\r\n$ r2 /bin/ls\r\n[0x1000011e8]> s..1bf4\r\n[0x100001bf4]> pd 1\r\n            0x100001bf4      ffe0           jmp   rax\r\n[0x100001bf4]>\r\n```\r\n\r\nafter analysis we get only 2 cases\r\n\r\n```\r\n[0x100001bf4]> aaaa\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Check for objc references\r\n[x] Check for vtables\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\n[x] Finding function preludes\r\n[x] Enable constraint types analysis for variables\r\n[0x100001bf4]> pd 2\r\nâ”‚           ;-- switch.0x100001bf4:\r\nâ”‚           0x100001bf4      ffe0           jmp   rax                        ; switch table (2 cases) at 0x100001dd4\r\n            0x100001bf6      418b7d38       mov   edi,  dword [r13 + 0x38]   ; [0x38:4]=-1 ; '8' ; 56\r\n[0x100001bf4]>\r\n```\r\n\r\nif we disassemble back and chk the jmptable we see the comparison is 6, not 2\r\n\r\n```\r\n[0x100001bf4]> pd-5\r\nâ”‚           0x100001be5      83fa06         cmp   edx,  6                    ; 6\r\nâ”‚       â”Œâ”€< 0x100001be8      7738           ja    0x100001c22\r\nâ”‚       â”‚   0x100001bea      0fb7c1         movzx eax,  cx\r\nâ”‚       â”‚   0x100001bed      49630487       movsxd rax,  dword [r15 + rax*4]\r\nâ”‚       â”‚   0x100001bf1      4c01f8         add   rax,  r15\r\n[0x100001bf4]>\r\n```\r\n\r\nby chking the jmptbl we can observer this:\r\n\r\n```\r\n[0x100001de9]> pd 10 @ 0x100001dd4\r\nâ”‚           ; DATA XREF from sym.func.100001b2c (0x100001bd4)\r\nâ””           0x100001dd4      .int32 -365\r\n            0x100001dd8      .int32 -308\r\n            0x100001ddc      9d             popfq\r\n            0x100001ddd      ff             invalid\r\n            0x100001dde      ff             invalid\r\n            0x100001ddf      ff22           jmp   qword [rdx]\r\n            0x100001de1      fe             invalid\r\n            0x100001de2      ff             invalid\r\n            0x100001de3      ff9dffffff9d   lcall [rbp - 0x62000001]\r\n            0x100001de9      ff             invalid\r\n[0x100001de9]> pxw 4*10 @ 0x100001dd4\r\n0x100001dd4  0xfffffe93 0xfffffecc 0xffffff9d 0xfffffe22  ............\"...\r\n0x100001de4  0xffffff9d 0xffffff9d 0xfffffe22 0xe5894855  ........\"...UH..\r\n0x100001df4  0x0f3f8b48 0x31584fb7                        H.?..OX1\r\n[0x100001de9]>\r\n```\r\n\r\nthere are actually 7 destinations for this jmp rax. in fact the code that fills de gap with cmpval+1, but seems like because of the order to bb analysis the cmpval is lost when reaching the jmp rax.\r\n\r\nbinary:\r\n[ls.zip](https://github.com/radare/radare2/files/3365523/ls.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUwOTAwMzQ3Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"We need a hint to tell r2 how big the jmptable for a specific JMP RAX is. and ignore the cmpval","createdAt":"2019-07-07T14:20:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14505#issuecomment-509003473","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwOTAwNzUzMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Implemented `ahv` to set anal hints on the value of the jmp rax to redefine the jmptbl size\r\n\r\nhttps://github.com/radare/radare2/pull/14508","createdAt":"2019-07-07T15:16:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14505#issuecomment-509007532","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTQzMTM4Nw==","author":{"login":"d4em0n"},"authorAssociation":"CONTRIBUTOR","body":"Any reason why radare find jmptbl size in before bb first not in current bb first?\r\n```\r\n\t\t\t\tif (is_delta_pointer_table (anal, fcn, op.addr, op.ptr, &jmptbl_addr, &jmp_aop)) {\r\n\t\t\t\t\tut64 table_size, default_case = 0;\r\n\t\t\t\t\t// we require both checks here since try_get_jmptbl_info uses\r\n\t\t\t\t\t// BB info of the final jmptbl jump, which is no present with\r\n\t\t\t\t\t// is_delta_pointer_table just scanning ahead\r\n\t\t\t\t\t// try_get_delta_jmptbl_info doesn't work at times where the\r\n\t\t\t\t\t// lea comes after the cmp/default case cjmp, which can be\r\n\t\t\t\t\t// handled with try_get_jmptbl_info\r\n\t\t\t\t\tif (try_get_jmptbl_info (anal, fcn, jmp_aop.addr, bb, &table_size, &default_case)\r\n\t\t\t\t\t\t|| try_get_delta_jmptbl_info (anal, fcn, jmp_aop.addr, op.addr, &table_size, &default_case)) {\r\n\t\t\t\t\t\tret = try_walkthrough_jmptbl (anal, fcn, depth, jmp_aop.addr, jmptbl_addr, op.ptr, 4, table_size, default_case, 4);\r\n\t\t\t\t\t\tif (ret) {\r\n\t\t\t\t\t\t\tlea_jmptbl_ip = jmp_aop.addr;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tr_anal_op_fini (&jmp_aop);\r\n\t\t\t}\r\n```","createdAt":"2020-01-17T02:04:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14505#issuecomment-575431387","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTQzMjIyMw==","author":{"login":"d4em0n"},"authorAssociation":"CONTRIBUTOR","body":"changing the order fix the issue\r\n```\r\n\t\t\t\tif (is_delta_pointer_table (anal, fcn, op.addr, op.ptr, &jmptbl_addr, &jmp_aop)) {\r\n\t\t\t\t\tut64 table_size, default_case = 0;\r\n\t\t\t\t\t// we require both checks here since try_get_jmptbl_info uses\r\n\t\t\t\t\t// BB info of the final jmptbl jump, which is no present with\r\n\t\t\t\t\t// is_delta_pointer_table just scanning ahead\r\n\t\t\t\t\t// try_get_delta_jmptbl_info doesn't work at times where the\r\n\t\t\t\t\t// lea comes after the cmp/default case cjmp, which can be\r\n\t\t\t\t\t// handled with try_get_jmptbl_info\r\n\t\t\t\t\tif (try_get_delta_jmptbl_info (anal, fcn, jmp_aop.addr, op.addr, &table_size, &default_case) \r\n\t\t\t\t\t  || try_get_jmptbl_info (anal, fcn, jmp_aop.addr, bb, &table_size, &default_case) ) {\r\n\t\t\t\t\t\tret = try_walkthrough_jmptbl (anal, fcn, depth, jmp_aop.addr, jmptbl_addr, op.ptr, 4, table_size, default_case, 4);\r\n\t\t\t\t\t\tif (ret) {\r\n\t\t\t\t\t\t\tlea_jmptbl_ip = jmp_aop.addr;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n```\r\n![Screenshot_20200117_090752](https://user-images.githubusercontent.com/29397847/72578509-da1bd480-3908-11ea-901a-9e9d9482144d.png)\r\n","createdAt":"2020-01-17T02:08:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14505#issuecomment-575432223","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTYwODc2Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Can you make a PR?\n\n> On 17 Jan 2020, at 03:08, d4em0n <notifications@github.com> wrote:\n> \n> ï»¿\n> changing the order fix the issue\n> \n> \t\t\t\tif (is_delta_pointer_table (anal, fcn, op.addr, op.ptr, &jmptbl_addr, &jmp_aop)) {\n> \t\t\t\t\tut64 table_size, default_case = 0;\n> \t\t\t\t\t// we require both checks here since try_get_jmptbl_info uses\n> \t\t\t\t\t// BB info of the final jmptbl jump, which is no present with\n> \t\t\t\t\t// is_delta_pointer_table just scanning ahead\n> \t\t\t\t\t// try_get_delta_jmptbl_info doesn't work at times where the\n> \t\t\t\t\t// lea comes after the cmp/default case cjmp, which can be\n> \t\t\t\t\t// handled with try_get_jmptbl_info\n> \t\t\t\t\tif (try_get_delta_jmptbl_info (anal, fcn, jmp_aop.addr, op.addr, &table_size, &default_case) \n> \t\t\t\t\t  || try_get_jmptbl_info (anal, fcn, jmp_aop.addr, bb, &table_size, &default_case) ) {\n> \t\t\t\t\t\tret = try_walkthrough_jmptbl (anal, fcn, depth, jmp_aop.addr, jmptbl_addr, op.ptr, 4, table_size, default_case, 4);\n> \t\t\t\t\t\tif (ret) {\n> \t\t\t\t\t\t\tlea_jmptbl_ip = jmp_aop.addr;\n> \t\t\t\t\t\t}\n> \t\t\t\t\t}\n> \t\t\t\t}\n> \n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-01-17T12:34:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14505#issuecomment-575608762","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc4ODQ1MjE4Ng==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Can you re-check if the issue is still in r2 from git?","createdAt":"2021-03-02T00:43:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14505#issuecomment-788452186","viewerDidAuthor":true}],"number":14505,"title":"Invalid jmptbl size on x86-64"},{"body":"My idea is that we should have two asm.tabs variables (names can be improved, im open to proposals).\r\n\r\n* asm.tabs = specify how many spaces between opcode and 1st operand\r\n* asm.tabs2 = specify space between operands\r\n\r\nthis will be useful for architectures with  long instruction names like dalvik","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUwNjk1ODYyMA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Can you add an example of such instruction, please?\n\nOn Sat, Jun 29, 2019, 6:13 PM radare <notifications@github.com> wrote:\n\n> My idea is that we should have two asm.tabs variables (names can be\n> improved, im open to proposals).\n>\n>    - asm.tabs = specify how many spaces between opcode and 1st operand\n>    - asm.tabs2 = specify space between operands\n>\n> this will be useful for architectures with long instruction names like\n> dalvik\n>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/radare/radare2/issues/14455?email_source=notifications&email_token=AABRT7O2RSD72AL4HAMPRZLP44YUZA5CNFSM4H4KDC52YY3PNVWWK3TUL52HS4DFUVEXG43VMWVGG33NNVSW45C7NFSM4G4N6XWQ>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABRT7IJSCBYZSFY4EXHOFLP44YUZANCNFSM4H4KDC5Q>\n> .\n>\n","createdAt":"2019-06-29T13:54:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14455#issuecomment-506958620","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwNjk2MDQxMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Intel have some. But i was thinking in dalvik. See the screenshot\n\n\n\n> On 29 Jun 2019, at 15:54, Anton Kochkov <notifications@github.com> wrote:\n> \n> Can you add an example of such instruction, please?\n> \n> On Sat, Jun 29, 2019, 6:13 PM radare <notifications@github.com> wrote:\n> \n> > My idea is that we should have two asm.tabs variables (names can be\n> > improved, im open to proposals).\n> >\n> > - asm.tabs = specify how many spaces between opcode and 1st operand\n> > - asm.tabs2 = specify space between operands\n> >\n> > this will be useful for architectures with long instruction names like\n> > dalvik\n> >\n> > â€”\n> > You are receiving this because you are subscribed to this thread.\n> > Reply to this email directly, view it on GitHub\n> > <https://github.com/radare/radare2/issues/14455?email_source=notifications&email_token=AABRT7O2RSD72AL4HAMPRZLP44YUZA5CNFSM4H4KDC52YY3PNVWWK3TUL52HS4DFUVEXG43VMWVGG33NNVSW45C7NFSM4G4N6XWQ>,\n> > or mute the thread\n> > <https://github.com/notifications/unsubscribe-auth/AABRT7IJSCBYZSFY4EXHOFLP44YUZANCNFSM4H4KDC5Q>\n> > .\n> >\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-06-29T14:20:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14455#issuecomment-506960412","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwNjk2MDU1OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"There's no screenshot","createdAt":"2019-06-29T14:22:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14455#issuecomment-506960559","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwNjk2MzA0Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Damn, gh allowed to post images via mail before :(\n\nhttps://twitter.com/trufae/status/1144898622691119104\n\n> On 29 Jun 2019, at 16:22, Anton Kochkov <notifications@github.com> wrote:\n> \n> There's no screenshot\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-06-29T14:59:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14455#issuecomment-506963047","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwNzA5MzkyMA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Ok, then I propose to do it like this:\r\n- `asm.tab.l1`\r\n- `asm.tab.l2`\r\n- ....\r\nSo it can be extended to any level.","createdAt":"2019-07-01T02:26:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14455#issuecomment-507093920","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwNzI0NjcwNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i dont think it makes much sense to have this level of granularity\n\nwhat about:\n\nasm.tab.operands\nasm.tab.instruction\n\n(in short)\n\nasm.tab.ops\nasm.tab.ins\n\n> On 1 Jul 2019, at 04:26, Anton Kochkov <notifications@github.com> wrote:\n> \n> Ok, then I propose to do it like this:\n> \n> asm.tab.l1\n> asm.tab.l2\n> ....\n> So it can be extended to any level.\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/14455?email_source=notifications&email_token=AAG75FXUZFUR3FAKUWQHEZ3P5FTNVA5CNFSM4H4KDC52YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGODY42HIA#issuecomment-507093920>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AAG75FQ3IRZEE5PSN5GT4ATP5FTNVANCNFSM4H4KDC5Q>.\n> \n\n","createdAt":"2019-07-01T12:37:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/14455#issuecomment-507246705","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwODcwOTY2Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"See asm.tabs.once .. because that can solve this problem more or less. so maybe we dont need  that","createdAt":"2019-07-05T10:15:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14455#issuecomment-508709663","viewerDidAuthor":false}],"number":14455,"title":"Implement asm.tabs2"},{"body":"this is.. make an API interface on top of RConsCanvas to draw lines, squares, text..","comments":[],"number":14444,"title":"Add commands to manipulate a canvas"},{"body":"we should use this bgcolor ffor tracing info and maybe for try/catch\r\n```\r\nec graph.box red blue\r\nec graph.box2 red blue\r\n```\r\n\r\n<img width=\"651\" alt=\"Screenshot 2019-06-28 at 04 03 42\" src=\"https://user-images.githubusercontent.com/917142/60311980-c8b5af80-9959-11e9-9fe3-45a6aee33724.png\">\r\n","comments":[{"id":"IC_kwDOAEpMrs5D_ncy","author":{"login":"Jagroop-Singh"},"authorAssociation":"NONE","body":"I'm currently taking a crack at this, I'm assuming that you want the default behavior to be setting the color of the inside of the box to bgcolor, or just simply behind some of the lines such as tracing and try catch?","createdAt":"2022-05-30T06:26:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14443#issuecomment-1140750130","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5EBTyN","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Yes, ideally setting the whole background of each basic block would be ideal. But that use to conflict with disasm colorization, so any other approach like highlighting in bg only the node title or the borders could work too and improve the situation","createdAt":"2022-05-30T14:00:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14443#issuecomment-1141193869","viewerDidAuthor":true}],"number":14443,"title":"Setting bg color in nodes glitches"},{"body":"I have started to add support for exceptions for DEX. but there are some more things to design, think and implement.\r\n\r\n* [ ] append try{from,to,catch} info on each RBinSymbol or maybe just as a separate array r_bin_get_trycatches(); to get a list of them\r\n* [ ] add a command to get them as flags like its done now by hand with copypasta\r\n* [ ] get the try/catch visualization in graph and disasm\r\n* [ ] integration with r2dec\r\n* [ ] draw circles or sqauress around grouped nodes to represent properly which BBs are handled by one exception.\r\n* [ ] add i subcommand to list all trycatches in human, quiet, json or r2 (rabin2 -T and iT)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUwNjU3MTk1OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cc @thestr4ng3r @wargio ","createdAt":"2019-06-28T02:01:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14442#issuecomment-506571959","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwNjU3MjAwMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"related https://github.com/radare/radare2/pull/14425","createdAt":"2019-06-28T02:01:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14442#issuecomment-506572000","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwNzY2Mzg2NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Related https://github.com/radare/radare2/issues/6851 and https://github.com/radare/radare2/issues/921 (see SEH part):\r\n- SEH Parser for PE 32 bits see http://blog.davidegrayson.com/2016/02/windows-32-bit-structured-exception.html\r\n- SEH Parser for PE 64bits see https://github.com/tandasat/scripts_for_RE/blob/master/parse_x64_SEH.py","createdAt":"2019-07-02T12:54:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14442#issuecomment-507663865","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwNzY2ODgzMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Problem here is the same with classes:\n\n- java/dalvik defines exceptions and class info in the bin format\n- c++ defines that with code, so it requires analyzing code\n\nWe probably need to expose apis for rbinfile to add/rm trycatch info. So the analysis can register this info in the associated binfile instance. But im totally out about c++ if anyone cares prs are welcome\n\n> On 2 Jul 2019, at 14:54, Anton Kochkov <notifications@github.com> wrote:\n> \n> Related #6851 and #921 (see SEH part):\n> \n> SEH Parser for PE 32 bits see http://blog.davidegrayson.com/2016/02/windows-32-bit-structured-exception.html\n> SEH Parser for PE 64bits see https://github.com/tandasat/scripts_for_RE/blob/master/parse_x64_SEH.py\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-07-02T13:07:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14442#issuecomment-507668833","viewerDidAuthor":false}],"number":14442,"title":"Exceptions support in Analysis"},{"body":"i think it makes more sense to keep @@ only for flags because adding a space after @@ is anoying otherwise users fail into unexpected behaviour like trying to run `af@@t*`\r\n\r\n```\r\n[0x0000023c]> @@?\r\n| @@                   # foreach iterator command:\r\n| x @@ sym.*          run 'x' over all flags matching 'sym.' in current flagspace\r\n| x @@dbt[abs]        run 'x' command on every backtrace address, bp or sp\r\n| x @@.file           run 'x' over the offsets specified in the file (one offset per line)\r\n| x @@=off1 off2 ..   manual list of offsets\r\n| x @@/x 9090         temporary set cmd.hit to run a command on each search result\r\n| x @@k sdbquery      run 'x' on all offsets returned by that sdbquery\r\n| x @@t               run 'x' on all threads (see dp)\r\n| x @@b               run 'x' on all basic blocks of current function (see afb)\r\n| x @@i               run 'x' on all instructions of the current function (see pdr)\r\n| x @@iS              run 'x' on all sections adjusting blocksize\r\n| x @@f               run 'x' on all functions (see aflq)\r\n| x @@f:write         run 'x' on all functions matching write in the name\r\n| x @@s:from to step  run 'x' on all offsets from, to incrementing by step\r\n| x @@c:cmd           the same as @@=`` without the backticks\r\n| x @@=`pdf~call[0]`  run 'x' at every call offset of the current function\r\n[0x0000023c]> @@@?\r\n| @@@           # foreach offset+size iterator command:\r\n| x @@@=       [addr] [size] ([addr] [size] ...)\r\n| x @@@b       basic blocks of current function\r\n| x @@@c:cmd   Same as @@@=`cmd`, without the backticks\r\n| x @@@C:cmd   comments matching\r\n| x @@@i       imports\r\n| x @@@r       registers\r\n| x @@@s       symbols\r\n| x @@@st      strings\r\n| x @@@S       sections\r\n| x @@@m       io.maps\r\n| x @@@M       dbg.maps (See ?$?~size)\r\n| x @@@f       flags\r\n| x @@@f:hit*  flags matching glob expression\r\n| x @@@F       functions (set fcn size which may be incorrect if not linear)\r\n| x @@@F:glob  functions matching glob expression\r\n| x @@@t       threads\r\n| x @@@r       regs\r\n[0x0000023c]>\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU0NjU2NzIzNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Maybe add @@: and @@@: as replacements for @@c: or @@@c:\r\n\r\nAlso @@@f: should be `@@@ flag-glob`","createdAt":"2019-10-26T04:21:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14440#issuecomment-546567235","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5OTA3OTQ3OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"comments here  @ret2libc ?","createdAt":"2020-03-14T15:27:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14440#issuecomment-599079478","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxNzc4MDQ2OQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I think they are redundant and there isn't really much difference between `@@` and `@@@` versions of the same \"command\".\r\n\r\nMay I propose a \"merged\" view?\r\n\r\n```\r\n| x @@.file           run 'x' over the offsets specified in the file (one offset per line)\r\n| x @@=off1 off2 ..   manual list of offsets\r\n| x @@@=off1 blksz1 off2 blksz2 ..   manual list of offsets + blksizes\r\n| x @@/x 9090         temporary set cmd.hit to run a command on each search result\r\n| x @@c:cmd           the same as @@=`cmd` without the backticks\r\n| x @@@c:cmd   Same as @@@=`cmd`, without the backticks\r\n| x @@C:glob   comments matching\r\n| x @@dbt[abs]        run 'x' command on every backtrace address, bp or sp\r\n| x @@k sdbquery      run 'x' on all offsets returned by that sdbquery\r\n| x @@t               run 'x' on all threads (see dp)\r\n| x @@b               run 'x' on all basic blocks of current function (see afb)\r\n| x @@i               run 'x' on all instructions of the current function (see pdr)\r\n| x @@ii       imports\r\n| x @@iS              run 'x' on all sections adjusting blocksize\r\n| x @@is       symbols\r\n| x @@iz      strings\r\n| x @@f       flags\r\n| x @@f:hit*  flags matching glob expression\r\n| x @@F               run 'x' on all functions (see aflq)\r\n| x @@F:write         run 'x' on all functions matching write in the name\r\n| x @@m       io.maps\r\n| x @@M       dbg.maps (See ?$?~size)\r\n| x @@r       registers\r\n| x @@s:from to step  run 'x' on all offsets from, to incrementing by step\r\n| x @@t       threads\r\n```\r\n\r\nWDYT?","createdAt":"2020-04-22T13:30:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14440#issuecomment-617780469","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY2MDA5MzgwMg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@trufae see https://github.com/radareorg/radare2/issues/14440#issuecomment-617780469 please.","createdAt":"2020-07-17T13:01:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14440#issuecomment-660093802","viewerDidAuthor":false}],"number":14440,"title":"Move all @@* into @@@"},{"body":"# This template is meant for bug reports, if you have a feature request, please be as descriptive as possible and delete the template\r\n\r\nMake sure you are testing using the latest git version of radare2 before submitting any issue.\r\n\r\n*If you would like to report a bug, please fill the template below*\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Mac OS 10.14.5 x86_64\r\n| File format of the file you reverse (mandatory)      | intel hexdump of firmware blob\r\n| Architecture/bits of the file (mandatory)            | ARM Cortex-M3\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.7.0-git 22245 @ darwin-x86-64 git.3.6.0-14-g4a1392932\r\ncommit: 4a1392932e08296283bbd8edb09cc35998a66d29 build: 2019-06-27__13:02:04\r\n\r\n### Expected behavior\r\n\r\nWhen I load ihex file (attached) via r2 ihex://example.hex, `p=e` should show the entropy of various blocks. `p=i` should show number of invalid commands per block. Dumping the contents of the hex file into binary (via `s 0x8000000;wtf! example.bin`) should produce a valid binary file that matches the contents of the .hex.\r\n\r\n### Actual behavior\r\nI converted example.hex into binary using the 010 hex editor and `p=i` and `p=e` commands' output does not match output when ran on the hex file opened w/ ihex.\r\n\r\nWhen attempting to dump contents of ihex as binary (via `s 0x8000000;wtf! example.bin` as above), it wrote the first 0x100 bytes over and over rather than reproducing the contents of the hex file.\r\n\r\n\r\n\r\n### Steps to reproduce the behavior \r\nHex file is here: [hex_file.zip](https://github.com/radare/radare2/files/3336115/hex_file.zip)\r\n\r\nLoad into r2 and run `p=e`, `p=i` (with various archs), `wtf! thing.bin @ 0x8000000` to see what I mean.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUwNjQ2MTUxNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"dupe of https://github.com/radare/radare2/issues/8512 i think\n\n> On 27 Jun 2019, at 20:23, haystack-ia <notifications@github.com> wrote:\n> \n> This template is meant for bug reports, if you have a feature request, please be as descriptive as possible and delete the template\n> \n> Make sure you are testing using the latest git version of radare2 before submitting any issue.\n> \n> If you would like to report a bug, please fill the template below\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tMac OS 10.14.5 x86_64\n> File format of the file you reverse (mandatory)\tintel hexdump of firmware blob\n> Architecture/bits of the file (mandatory)\tARM Cortex-M3\n> r2 -v full output, not truncated (mandatory)\tradare2 3.7.0-git 22245 @ darwin-x86-64 git.3.6.0-14-g4a1392932\n> commit: 4a13929 <https://github.com/radare/radare2/commit/4a1392932e08296283bbd8edb09cc35998a66d29> build: 2019-06-27__13:02:04\t\n> Expected behavior\n> \n> When I load ihex file (attached) via r2 ihex://example.hex, p=e should show the entropy of various blocks. p=i should show number of invalid commands per block. Dumping the contents of the hex file into binary (via s 0x8000000;wtf! example.bin) should produce a valid binary file that matches the contents of the .hex.\n> \n> Actual behavior\n> \n> I converted example.hex into binary using the 010 hex editor and p=i and p=e commands' output does not match output when ran on the hex file opened w/ ihex.\n> \n> When attempting to dump contents of ihex as binary (via s 0x8000000;wtf! example.bin as above), it wrote the first 0x100 bytes over and over rather than reproducing the contents of the hex file.\n> \n> Steps to reproduce the behavior\n> \n> Hex file is here: hex_file.zip <https://github.com/radare/radare2/files/3336115/hex_file.zip>\n> Load into r2 and run p=e, p=i (with various archs), wtf! from 0x8000000 (wtf! example.bin @ 0x8000000 doesn't seem to work either, which is strange) to see what I mean.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/14439?email_source=notifications&email_token=AAG75FX6WEOSCYMGT7IJATLP4UAR7A5CNFSM4H367D22YY3PNVWWK3TUL52HS4DFUVEXG43VMWVGG33NNVSW45C7NFSM4G4EWRMQ>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AAG75FWRY6QVRW3I4PGHTRDP4UAR7ANCNFSM4H367D2Q>.\n> \n\n","createdAt":"2019-06-27T18:34:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14439#issuecomment-506461514","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwNjQ2NjI5OQ==","author":{"login":"haystack-ia"},"authorAssociation":"CONTRIBUTOR","body":"I don't think so.  If I'm reading it right, the issues w/ #8512 stem from io.0xff settings, which only affects addresses that the .hex file doesn't define. The issue I'm running into concerns areas that the .hex file *does* define.\r\n\r\nDefinitely with the `wtf! thing.bin @ 0x8000000` command I mentioned, the issue isn't that undefined areas are filled in with 0xff instead of 0. The issue is that it writes the same block (0x8000000->0x8000100) over and over.\r\n","createdAt":"2019-06-27T18:47:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14439#issuecomment-506466299","viewerDidAuthor":false}],"number":14439,"title":"functions broken when analyzing file opened with ihex://"},{"body":"R2 prints wrong in Vp-mode during cmd.cprompt=something. It happens when content of two vertical panels clash each other.\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Kali rolling x64\r\n| File format of the file you reverse (mandatory)      | PE, ELF\r\n| Architecture/bits of the file (mandatory)            | x86/32, x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.6.0-git 22141 @ linux-x86-64 git.2.9.0-2532-gbb6f18b79\r\ncommit: bb6f18b79a4aa6a29950792b8fb8b06aaf40d09c build: 2019-06-07__10:55:43\r\n\r\n### Expected behavior\r\nNormal printing\r\n\r\n### Actual behavior\r\nWrong printing\r\n\r\n### Steps to reproduce the behavior \r\nVp\r\ncmd.cprompt=ar\r\nAnd scroll top/down next.\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n![temp](https://user-images.githubusercontent.com/22872513/60072737-dbe93500-9737-11e9-9f7d-5309a0fc98ad.png)\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUzMTU1NTM2NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"better use panels to have such kind of compositions, but at some point we may ix this, the problem is that in visual it requires a full refresh of the screen to avoid glitches","createdAt":"2019-09-15T10:55:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14418#issuecomment-531555365","viewerDidAuthor":false}],"number":14418,"title":"wrong printing in \"Vp\" with \"cmd.cprompt=\""},{"body":"**Is your feature request related to a problem? Please describe.**\r\nFor example I want to patch some program. For this I would like create new r-x section or resize existence section. But `iO r/.text/677` don't work for me.\r\n\r\n**Describe the solution you'd like**\r\nI would like to see create new section feature like a:\r\n`iO a/s/.newsection/0x1000`\r\n\r\n**Describe alternatives you've considered**\r\nIt seems to me that r2 should both resizing and creating sections at least for PE and ELF binaries\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU1MjgwMDc2OA==","author":{"login":"mehdithreem"},"authorAssociation":"NONE","body":"Hey, I have similar issues, did you solve this?","createdAt":"2019-11-12T09:06:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14410#issuecomment-552800768","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY4NjM5NDk4Nw==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"Not yet","createdAt":"2020-09-03T10:19:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14410#issuecomment-686394987","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY4NjQxMDcwMA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Hi,\r\n\r\nI think there are multiple ways you could help to move this forward:\r\n1. If you can/want to contribute, you can have a look at how `iO`/`rabin2 -O` works. In particular, the resizing feature for ELF is implemented in `libr/bin/format/elf/elf_write.c:Elf_(r_bin_elf_resize_section)`. I haven't carefully looked at this, but probably there's something slightly broken there. PRs are very much appreciated and if you need help understanding the radare2 code base, you can ask on Telegram chat or here and I'll be happy to help :)\r\n2. `rabin2 -O` feature is poorly tested, so you could start by adding some tests in `test/db/tools/rabin2` (use the `BROKEN=1` to mark those tests as broken). You can then reference them here in this issue, so that if someone will be interested in working on this issue he will already have a bunch of ways to tests if his changes are good or not.\r\n\r\nBy the way, this feature seems very \"experimental\" and indeed very few file formats implement the proper functions to support these operations. For example, only ELF \"supports\" resizing sections, while only mach0 supports adding a library, etc. ","createdAt":"2020-09-03T10:55:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14410#issuecomment-686410700","viewerDidAuthor":false}],"number":14410,"title":"\"iO\" creating/changing section"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Arch x64\r\n| File format of the file you reverse (mandatory)      |  ELF\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.6.0-git 22222 @ linux-x86-64 git.3.5.1-360-gc7296d6009 commit: c7296d60096097795690df88e7e0453eb00e7310 build: 2019-06-23__19:56:45\r\n\r\n### Expected behavior\r\nFunctions would not overlap when running `aaa`\r\n\r\n### Actual behavior\r\nMultiple functions overlap as seen in the `afll` output\r\n\r\naddress            size  nbbs edges    cc cost          min bound range max bound          calls locals args xref frame name\r\n================== ==== ===== ===== ===== ==== ================== ===== ================== ===== ====== ==== ==== ===== ====\r\n0x000000000044ec50  388    17    24    13  127 0x000000000044ec50   424 0x000000000044edf8     1    9      6    1   144 fcn.0044ec50\r\n0x000000000044ed20  192    10    14     8   73 0x000000000044ed20   216 0x000000000044edf8     0    0      6   24    40 fcn.0044ed20\r\n0x000000000044ebc0  529    24    32    18  172 0x000000000044ebc0   568 0x000000000044edf8     4   10      1    6   192 fcn.0044ebc0\r\n0x000000000044ec00  465    22    30    16  155 0x000000000044ec00   504 0x000000000044edf8     3    0      2    1   184 fcn.0044ec00\r\n\r\n### Steps to reproduce the behavior \r\n- Open attached binary in r2\r\n- Run `aaa`\r\n- `s fcn.0044ec50`\r\n- `VV`\r\n- You'll see code for function fcn.0044ebc0 and other functions instead\r\n- This also messes up Basic Blocks which are needed to form a Machoc hash\r\n\r\n[sombrero_rojo.zip](https://github.com/radare/radare2/files/3318647/sombrero_rojo.zip)\r\n\r\n","comments":[],"number":14406,"title":"Overlapping Functions"},{"body":"* [ ] CL works for one address, but not for a whole function (CLf, because we have CCf already)\r\n* [ ] Add commants to get the next and previous source line (CLn/CLp ?)\r\n* [ ] Make asm.dwarf=true by default?\r\n* [ ] ...","comments":[],"number":14338,"title":"Improve source level debugging features"},{"body":"Maybe using ?ep to print a pie chart? or improrve ?eb to accept different letters than ABCD..\r\n```\r\n[0x1000011e8]> aai\r\nfcns    111\r\nxrefs   855\r\ncalls   842\r\nstrings 84\r\nsymbols 114\r\nimports 76\r\ncovrage 13704\r\ncodesz  20480\r\npercent 66%\r\n```\r\n\r\nmaybe hahving aaiv (or accessible via visual mode)\r\n\r\n<img width=\"1061\" alt=\"Screenshot 2019-06-17 at 01 28 30\" src=\"https://user-images.githubusercontent.com/917142/59570921-472f6900-909f-11e9-9f12-1c5c71d374d8.png\">\r\n<img width=\"1049\" alt=\"Screenshot 2019-06-17 at 01 28 40\" src=\"https://user-images.githubusercontent.com/917142/59570922-47c7ff80-909f-11e9-9f87-90e83abdcec0.png\">\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUwMzQwODc2OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Also to support unicode symbols.","createdAt":"2019-06-19T05:12:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14330#issuecomment-503408769","viewerDidAuthor":false}],"number":14330,"title":"Implement visualization for aai (dashboard style)"},{"body":"We should support base64 namings in flag commands too, not just in CC/CL, the realname must be kept as is, but the flag name must be filtered. And probably do something generic.\r\n\r\n* [ ] f base64:xxx\r\n* [ ] afn base64:xxx\r\n* [ ] CC base64:xxx (we have CCu only for now)\r\n* [ ] <base64: for raw binary input?\r\n\r\n... cant think of a need for this on other commands. anyone?","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUwNzY3MDA3Nw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"I think it should be something like `pj` API, but in reverse, and for base64.","createdAt":"2019-07-02T13:11:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14324#issuecomment-507670077","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU1MDk1ODgzNA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I think it makes sense to do it only after the new command parser is in place (still far from it). At that point we could convert any argument that starts with base64: ","createdAt":"2019-11-07T07:29:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14324#issuecomment-550958834","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU1MTAzOTU2NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"yes i know, but i wanted to discuss about the topic, otherwise we wont even care about it when designingg the new command parser\n\n> On 7 Nov 2019, at 08:29, Riccardo Schirone <notifications@github.com> wrote:\n> \n> I think it makes sense to do it only after the new command parser is in place (still far from it). At that point we could convert any argument that starts with base64:\n> \n> â€”\n> You are receiving this because you were assigned.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/14324?email_source=notifications&email_token=AAG75FTKRFPBSEXT5OFE2CDQSO7XFA5CNFSM4HYRXFC2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEDLPN4Q#issuecomment-550958834>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FRZGIIEQLDPJ55X7ADQSO7XFANCNFSM4HYRXFCQ>.\n> \n\n","createdAt":"2019-11-07T11:26:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14324#issuecomment-551039564","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY2MzM2NzQ3Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@ret2libc probably also a good time to add this too.","createdAt":"2020-07-24T06:26:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14324#issuecomment-663367476","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY2MzM3MTIwNQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Not yet imo. It's better to wait until more commands are converted to argv style, otherwise it will be too much inconsistent.","createdAt":"2020-07-24T06:41:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14324#issuecomment-663371205","viewerDidAuthor":false}],"number":14324,"title":"Support base64: on more commands"},{"body":"this bin: https://github.com/radare/radare2/issues/14296","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU4MjI0MTg1NA==","author":{"login":"0x9060"},"authorAssociation":"CONTRIBUTOR","body":"I'd like to pick this up.\r\n\r\nSo, shall I add a special elf file in `test/bins/elf/` or look to use one of the existing files if appropriate? Alternatively, I could use the file from #14296? Obviously prefer to keep tests lean, yet thorough.\r\n\r\nAny other high level or specific guidance appreciated.","createdAt":"2020-02-05T05:04:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15599#issuecomment-582241854","viewerDidAuthor":false}],"number":15599,"title":"Add ragg2 crash test"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Kali rolling x64\r\n| File format of the file you reverse (mandatory)      | PE/ELF\r\n| Architecture/bits of the file (mandatory)            | x86 32/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.6.0-git 22141 @ linux-x86-64 git.2.9.0-2532-gbb6f18b79\r\ncommit: bb6f18b79a4aa6a29950792b8fb8b06aaf40d09c build: 2019-06-07__10:55:43\r\n\r\n### Expected behavior\r\nI expected full rebase to new base address (include functions list)\r\n\r\n### Actual behavior\r\nThe file content will rebase to new address. But analyze information is not.\r\n\r\n### Steps to reproduce the behavior \r\nr2 a.out or a.exe\r\naaa\r\noob 0x10000000\r\nafl","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUwMjA5NDc4Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Only the bininfo is rebased. The analysis, metadata, comments, xrefs , flags and so on is kept like it is. It is known issue and theres already an issue explaining whst to do to solve that but nobody did it yet. I am waiting to finish the rbin refactoring to continue in more base address refactorings that may lead fix this thing. The main complain of this is related to the debugger and aslr\n\n> On 14 Jun 2019, at 11:19, s0i37 <notifications@github.com> wrote:\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tKali rolling x64\n> File format of the file you reverse (mandatory)\tPE/ELF\n> Architecture/bits of the file (mandatory)\tx86 32/64\n> r2 -v full output, not truncated (mandatory)\tradare2 3.6.0-git 22141 @ linux-x86-64 git.2.9.0-2532-gbb6f18b79\n> commit: bb6f18b build: 2019-06-07__10:55:43\t\n> Expected behavior\n> \n> I expected full rebase to new base address (include functions list)\n> \n> Actual behavior\n> \n> The file content will rebase to new address. But analyze information is not.\n> \n> Steps to reproduce the behavior\n> \n> r2 a.out or a.exe\n> aaa\n> oob 0x10000000\n> afl\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-06-14T12:42:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14300#issuecomment-502094783","viewerDidAuthor":false}],"number":14300,"title":"oob 0xADDR"},{"body":"allegedly... \r\n\r\nsee: https://github.com/Luis-Hebendanz/0pack","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUwMTcxNTY2Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Any sample binary?\n\n> On 13 Jun 2019, at 15:26, Ðširils SÐ¾lovjÐ¾vs <notifications@github.com> wrote:\n> \n> alledegly...\n> \n> see: https://github.com/Luis-Hebendanz/0pack\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-06-13T14:01:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14293#issuecomment-501715662","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwMTc1MzA0Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"See https://github.com/Luis-Hebendanz/0pack/issues/1\n\n> On 13 Jun 2019, at 15:26, Ðširils SÐ¾lovjÐ¾vs <notifications@github.com> wrote:\n> \n> alledegly...\n> \n> see: https://github.com/Luis-Hebendanz/0pack\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-06-13T15:28:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14293#issuecomment-501753046","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwOTQzMDU2Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@ret2libc as u said this wont be fixed soon please move your pr and the issue to milestone 4.5 or further","createdAt":"2020-04-05T15:03:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14293#issuecomment-609430566","viewerDidAuthor":false}],"number":14293,"title":"db entry0 doesn't break"},{"body":"https://github.com/radare/radare2/pull/14274#issuecomment-500418181","comments":[],"number":14275,"title":"Search mask should use : instead of space and update help msg"},{"body":"https://code.woboq.org/kde/include/sys/acl.h.html\r\n\r\nRequired to decompile /bin/ls properly :P ","comments":[],"number":14246,"title":"Add acl.h type definitions and function signatures in r2"},{"body":"Useful for r2dec as well as for improving the overall types analysis and propagation coverage","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUxNTc2MDkzNw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"`e anal.types.verbose = true ; aaa`","createdAt":"2019-07-28T12:59:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14245#issuecomment-515760937","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxNTc4NTAxMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Maybe good to have a paragraph in the book for this\n\n> On 28 Jul 2019, at 14:59, Maijin <notifications@github.com> wrote:\n> \n> e anal.types.verbose = true ; aaa\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-07-28T18:39:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14245#issuecomment-515785012","viewerDidAuthor":false}],"number":14245,"title":"Get a list of all the imports of a program that have no signatures defined for them"},{"body":"### Work environment\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Kali rolling x64\r\n| File format of the file you reverse (mandatory)      | PE/ELF\r\n| Architecture/bits of the file (mandatory)            | x86/32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.6.0-git 22141 @ linux-x86-64 git.2.9.0-2532-gbb6f18b79\r\ncommit: bb6f18b79a4aa6a29950792b8fb8b06aaf40d09c build: 2019-06-07__10:55:43\r\n\r\nAfter making step back \"aesb\" in trace log \"dte\" will be add all already executed instructions\r\n### Expected behavior\r\nI expected, that aesb won't change \"dte\" trace log.\r\n\r\n### Actual behavior\r\n\"dte\" will contains many doubles of executed instructions\r\n\r\n### Steps to reproduce the behavior \r\ne dbg.trace=1;aei;aeip;aeim;aets+; 5 aes; aesb; dte\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\nFor example I made 7 steps forward and 1 step backward. After that I have:\r\n\"dte~addr\"\r\n0.addr=0x15b4\r\n1.addr=0x15b5\r\n10.addr=0x15bc\r\n11.addr=0x15bf\r\n12.addr=0x15c3\r\n13.addr=0x15ca\r\n14.addr=0x15b4\r\n15.addr=0x15b5\r\n16.addr=0x15b8\r\n17.addr=0x15bc\r\n18.addr=0x15bf\r\n19.addr=0x15c3\r\n2.addr=0x15b8\r\n3.addr=0x15bc\r\n4.addr=0x15bf\r\n5.addr=0x15c3\r\n6.addr=0x15ca\r\n7.addr=0x15b4\r\n8.addr=0x15b5\r\n9.addr=0x15b8\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ5OTgzODQ2Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Aeim do aei and aeip internally. No need to call them directly","createdAt":"2019-06-07T10:36:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14243#issuecomment-499838462","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5OTgzODk0Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Stepback was redesigned like this by the last gsoc student who touched this. It was obv not taking into account the tracelogs. Its based on snapshots. So this is expected for the current behaviour but probably not for the logic of stepback","createdAt":"2019-06-07T10:38:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14243#issuecomment-499838946","viewerDidAuthor":false}],"number":14243,"title":"\"aesb\" will change \"dte\" trace log"},{"body":"| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Kali rolling x64\r\n| File format of the file you reverse (mandatory)      | PE/ELF\r\n| Architecture/bits of the file (mandatory)            | x86/32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.6.0-git 22141 @ linux-x86-64 git.2.9.0-2532-gbb6f18b79\r\ncommit: bb6f18b79a4aa6a29950792b8fb8b06aaf40d09c build: 2019-06-07__10:55:43\r\n\r\nWhen I make step back on first instruction in trace (with index=0) happens error.\r\n### Expected behavior\r\nStep to first instruction\r\n\r\n### Actual behavior\r\nIt happes error. See logs below.\r\nAfter that \"dte\" will contains many instructions\r\n\r\n### Steps to reproduce the behavior \r\ne dbg.trace=1;aei;aeip;aeim;aets+; aes; aesb\r\n\r\n### Logs\r\nNOTE: step back in esil is setting an initial state and stepping into pc is the same.\r\nNOTE: this is extremely wrong and poorly efficient. so don't use this feature unless\r\nNOTE: you are going to fix it by making it consistent with dts, which is also broken as hell\r\nExecute until 0x000015b5\r\nBefore 0x000015b4\r\ntrace_pc: cannot read memory at 0xfff","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ5OTgzOTM4Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Stepback support should be rewritten completely imho. Im not very happy on the way it works now. But its fast for large traces thannit was before while tracing every single state. ","createdAt":"2019-06-07T10:39:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14242#issuecomment-499839387","viewerDidAuthor":false}],"number":14242,"title":"\"aesb\" on first instruction in trace"},{"body":"### Expected behavior\r\nWhen trying to save the panel view layout it should be possible to load it again.\r\n\r\n### Actual behavior\r\nThe default panel layout is loaded when trying to load the saved layout.\r\n\r\n### Steps to reproduce the behavior \r\n- Save panel view layout\r\n- Load panel view layout\r\n\r\n### Reason\r\nR2_HOME_DATADIR does not exist and isn't created. Thus .r2panels it not saved to the disk.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ5OTUwMjc0Ng==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Greetings @SuppenGeist \r\n\r\nTo ensure this is not a bug already fixed, please follow the template and provide your version of radare2 r2 -v complete output.","createdAt":"2019-06-06T13:52:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14235#issuecomment-499502746","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5OTUzMTI3OQ==","author":{"login":"SuppenGeist"},"authorAssociation":"NONE","body":"### Version\r\nr2 -v\r\nradare2 3.5.1 0 @ linux-x86-64 git.3.5.1\r\ncommit: unknown build: 2019-05-21__13:40:55\r\n","createdAt":"2019-06-06T14:58:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14235#issuecomment-499531279","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5OTU5NjkxNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Confirm the issue on git. Otherwise we wont fix it\n\n> On 6 Jun 2019, at 16:58, Johannes Werner <notifications@github.com> wrote:\n> \n> Version\n> \n> r2 -v\n> radare2 3.5.1 0 @ linux-x86-64 git.3.5.1\n> commit: unknown build: 2019-05-21__13:40:55\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-06-06T17:43:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14235#issuecomment-499596916","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwMDM0NTE1NQ==","author":{"login":"SuppenGeist"},"authorAssociation":"NONE","body":"Sorry, but what does it mean to confirm the issue on git?","createdAt":"2019-06-10T09:02:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14235#issuecomment-500345155","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwMDM5NDU0NQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"To install radare2 from git, first uninstall your version of radare2 and clean your distro. Then use `git clone https://github.com/radare/radare2 && cd radare2 && ./sys/install.sh`, verify your version and check if there is no error using `r2 -v`.","createdAt":"2019-06-10T12:13:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14235#issuecomment-500394545","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgyNjMzNjE2MQ==","author":{"login":"Shadorain"},"authorAssociation":"CONTRIBUTOR","body":"Confirmed same issue on git\r\n```sh\r\nâ± r2 -v\r\nradare2 5.3.0-git 26194 @ linux-x86-64 git.5.2.1\r\ncommit: d396b4052ea01ab97387898c6145b8bfe266ce91 build: 2021-04-25__09:29:12\r\nâ± uname -ms\r\nLinux x86_64\r\n```","createdAt":"2021-04-25T14:45:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14235#issuecomment-826336161","viewerDidAuthor":false}],"number":14235,"title":"R2_HOME_DATADIR not created when trying to save panel view layout"},{"body":"![IMAGE 2019-06-05 19:34:18](https://user-images.githubusercontent.com/917142/58997074-e8c5d900-87c8-11e9-969c-1307dacb8a86.jpg)\r\n\r\n![IMAGE 2019-06-05 19:34:21](https://user-images.githubusercontent.com/917142/58997076-eb283300-87c8-11e9-91b5-7c8c4b652933.jpg)\r\n","comments":[],"number":14230,"title":"Add repeated value pattern visualizations"},{"body":"\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             |  x86\r\n| File format of the file you reverse (mandatory)      |ELF \r\n| Architecture/bits of the file (mandatory)            | arm 32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.5.0-git 21656 @ linux-x86-64 git.3.4.1-312-g45a9f84 commit: 45a9f8443157e162283cda61776b93c84a5d9ae1 build: 2019-05-04__13:25:18\r\n\r\n\r\n### Expected behavior\r\nThe binary is compiled with thumb mode. However, radare2 should disassemble the binary with Thumb mode\r\n\r\n### Actual behavior\r\nMany bytes are disassembled as ARM mode but the actual mode should be thumb. For example, address `0x6d2a6`, `0x698b2`, `0xa45f4`\r\nMany inline data are not detected. For example, address \"0x20dd8\"\r\n\r\nThere are inconsistent  between the command `pd` and `pdj`\r\n\r\n### Steps to reproduce the behavior \r\n- Please share the binary if it is shareable by drag and dropping it here in a zip archive \r\n[test_bin.zip](https://github.com/radare/radare2/files/3255303/test_bin.zip)\r\n\r\n\r\n- Use code markdown `CODE` to make your code visible\r\n\r\nI use `radare2 bin` to load the binary.  Then I use `ahb 16` to set the mode at the entry point. Then I use `aaa` to conduct the analysis. After that I use `pd(j) N @ addr` to print out the disassembled bytes. \r\nFor example\r\nWrong Mode:\r\n```\r\n[0x0001290c]> pd 10 @ 0x698b2\r\n            0x000698b2                    unaligned\r\n            0x000698b3                    unaligned\r\n            0x000698b4      132befd8       stmle pc!, {r0, r1, r4, r8, sb, fp, sp} ^\r\n            0x000698b8      2000d840       sbcsmi r0, r8, r0, lsr 32\r\n            0x000698bc      03003800       eorseq r0, r8, r3\r\n            0x000698c0      9843e9d1       invalid\r\n            0x000698c4      342aefd0       rscle r2, pc, r4, lsr sl\r\n            0x000698c8      ab5c282b       blhs 0xa80b7c\r\n        ,=< 0x000698cc      ecd0272a       bhs 0xa5dc84\r\n       ,==< 0x000698d0      05d0322a       bhs 0xd1d8ec\r\n```\r\nData to Code:\r\n```\r\n[0x0001290c]> pd 2 @0x20dd8\r\n            ; DATA XREF from fcn.00020da4 (0x20db6)\r\n            0x00020dd8      fffff9f9       invalid\r\n/ (fcn) fcn.00020ddc 96\r\n|   fcn.00020ddc (int32_t arg1, int32_t arg2, int32_t arg4);\r\n| bp: 0 (vars 0, args 0)\r\n| sp: 0 (vars 0, args 0)\r\n| rg: 3 (vars 0, args 3)\r\n|           ; CALL XREF from fcn.00020e3c (0x20e48)\r\n|           ; CALL XREF from fcn.00021298 (0x213fa)\r\n|           0x00020ddc      f0b5           push {r4, r5, r6, r7, lr}\r\n[0x0001290c]> pd 2 @0x20db6\r\n|           0x00020db6      084b           ldr r3, [0x00020dd8]        ; [0x20dd8:4]=0xf9f9ffff\r\n|           0x00020db8      2268           ldr r2, [r4]\r\n\r\n```\r\n\r\nInconsistent:\r\n```\r\n[0x0001290c]> pdj 1 @0x22850\r\n[{\"offset\":141392,\"esil\":\"2,r6,>>>>,r4,=,$z,zf,:=\",\"refptr\":false,\"fcn_addr\":0,\"fcn_last\":0,\"size\":2,\"opcode\":\"asrs r4, r6, 2\",\"disasm\":\"asrs r4, r6, 2\",\"bytes\":\"b410\",\"family\":\"cpu\",\"type\":\"sar\",\"reloc\":false,\"type_num\":25,\"type2_num\":0,\"refs\":[{\"addr\":856244,\"type\":\"UNKNOWN\"}],\"xrefs\":[{\"addr\":141370,\"type\":\"DATA\"}]}]\r\n\r\n[0x0001290c]> pd 1 @0x22850\r\n            ; DATA XREF from aav.0x0002281d (+0x1d)\r\n            0x00022850      .dword 0x000d10b4 ; aav.0x000d10b4\r\n\r\n```\r\n\r\nIt is easy to see that the output is not right. The right mode should be thumb.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYzODAwNTk3MA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Mentioned in this paper:\r\n- https://yajin.org/papers/issta20.pdf\r\n- https://github.com/valour01/arm_disasssembler_study","createdAt":"2020-06-03T07:15:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14223#issuecomment-638005970","viewerDidAuthor":false}],"number":14223,"title":"Mode Detection is not right for ARM architectures"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Windows 10 x64\r\n| File format of the file you reverse (mandatory)      | PE\r\n| Architecture/bits of the file (mandatory)            | x86/32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.5.1 1 @ windows-x86-64 git.3.5.1\r\ncommit: 4ec482ba2d4f554beeafb3aa47758e970bcab937 build: Wed 05/15/2019__ 7:58:44.85\r\n\r\n### Expected behavior\r\nShow the entrypoints\r\n\r\n### Actual behavior\r\nShow 0 entrypoints\r\n\r\n### Steps to reproduce the behavior \r\n- Open a saved project\r\n- Type ie command\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\n![image](https://user-images.githubusercontent.com/526959/58850411-9c8b7380-86b8-11e9-91dd-8f7b75ac8741.png)\r\n\r\n","comments":[],"number":14219,"title":"ie shows 0 entrypoints when radare2 opens a saved project"},{"body":"For example 'noreturn' statements when calling no return functions, set .bits or .size like if it was compatible with rasm2 syntax","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUwNzY3MDk3MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"I think it should be optional, with some config.","createdAt":"2019-07-02T13:13:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14200#issuecomment-507670971","viewerDidAuthor":false}],"number":14200,"title":"Display anal hint in the disasm"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nHello.\r\nWhen I try to emulate images in corefile/minidump format a have already stack environment. But for using \"aets+\" and \"aesb\" r2 required \"aeim\". In same time \"aeim esp 0\" will rewrite bytes in stack.\r\n\r\n**Describe the solution you'd like**\r\nI want use ESIL tracing \"aets+\", \"aesb\" without mandatory using \"aeim\". Or dont initializing stack memory with null-bytes if I use \"aeim rsp 0\"\r\n\r\n**Describe alternatives you've considered**\r\nAlternative solution using aeim with some memory and returning esp/ebp values back. But it is not convenient.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUwNzY3MDUxNQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@condret what do you think about this one?","createdAt":"2019-07-02T13:12:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14195#issuecomment-507670515","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwNzEzNzk2Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"the proposal sgtm","createdAt":"2020-04-01T09:22:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14195#issuecomment-607137967","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY2Nzc5OTU2MA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"It is related to recording traces and R&R. @abcSup @yossizap ","createdAt":"2020-08-03T04:42:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14195#issuecomment-667799560","viewerDidAuthor":false}],"number":14195,"title":"aeim improvement"},{"body":"Currently only the flag is renamed. If the name matches, the function should be renamed as well:\r\n![Bildschirmfoto vom 2019-05-26 19-37-19](https://user-images.githubusercontent.com/1460997/58385257-b9a3b080-7fed-11e9-80a8-57d9c8c0e11c.png)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ5NjAxODczOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"relatd to afna probably\n\n> On 26 May 2019, at 19:38, Florian MÃ¤rkl <notifications@github.com> wrote:\n> \n> Currently only the flag is renamed. If the name matches, the function should be renamed as well:\n>  <https://user-images.githubusercontent.com/1460997/58385257-b9a3b080-7fed-11e9-80a8-57d9c8c0e11c.png>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/14161?email_source=notifications&email_token=AAG75FQCQ4ISBQUX6D4T74TPXLDHTA5CNFSM4HPXD4HKYY3PNVWWK3TUL52HS4DFUVEXG43VMWVGG33NNVSW45C7NFSM4GV45Y6A>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AAG75FQJ3YCINZOGPFKT433PXLDHTANCNFSM4HPXD4HA>.\n> \n\n","createdAt":"2019-05-26T17:48:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14161#issuecomment-496018738","viewerDidAuthor":false}],"number":14161,"title":"Automatically rename function when renaming an anal class method"},{"body":"I would like to see new feature in r2 for highlighting whole basic block.\r\nFor example, if I want to import coverage from DBI tools:\r\nafbc blue @@./tmp/drcov.log\r\n","comments":[],"number":14153,"title":"\"afbc\" improvement"},{"body":"I used `llc` to compile some LLVM bitcode, mistakingly outputting to textual assembly rather than a native object (requiring `-filetype=obj`). Both `r2` and `radiff` seemed to accept the asm files but simply didn't work or behaved in a confusing way.\r\n\r\nI'd expect `r2` to give an error if the input file is text, or if this is supposed to work, I'd expect it to actually work (I don't think it is).\r\n\r\nAttached is an example you can load with `r2 -AAA Evac_thr.thr_o.s`\r\n[Evac_thr.thr_o.s.zip](https://github.com/radare/radare2/files/3218251/Evac_thr.thr_o.s.zip)\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ5NTc1NDQyNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Files without headers can also contain code, like a shellcode or a network dump. Plaintext is quite difficult to determine, and i dont see why we should error here\n\n> On 24 May 2019, at 20:54, Brandon Simmons <notifications@github.com> wrote:\n> \n> I used llc to compile some LLVM bitcode, mistakingly outputting to textual assembly rather than a native object (requiring -filetype=obj). Both r2 and radiff seemed to accept the asm files but simply didn't work or behaved in a confusing way.\n> \n> I'd expect r2 to give an error if the input file is text, or if this is supposed to work, I'd expect it to actually work (I don't think it is).\n> \n> Attached is an example you can load with r2 -AAA Evac_thr.thr_o.s\n> Evac_thr.thr_o.s.zip\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-05-24T18:56:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14149#issuecomment-495754426","viewerDidAuthor":false}],"number":14149,"title":"Tools seem happy to consume textual assembly files, yet doesn't work on them"},{"body":"[package]\r\n  |\r\n[CLASSNAME]-> [METHODS] -> ....\r\n  `-> [FIELDS] -> ...\r\n\r\nsimilar to how fg works","comments":[],"number":14128,"title":"Render class/method/fields graph"},{"body":"That's not a 100% working assumption, but CLANG generates a tailing instruction like this:\r\n\r\n```\r\n 0x000009dc      d0bd           pop   {r4,  r6,   r7,   pc}\r\n```\r\n\r\nThis function takes 3 arguments, that info is salso found in the `push {r4, r6,r7, lr}` of the begining but obfuscated functions can hide those preludes","comments":[],"number":14125,"title":"Autodetect argument types in THUMB programs by taking the POP"},{"body":"We probably need to extend the TCC parser for this:\r\n\r\n* IN\r\n* OUT\r\n* INOUT\r\n\r\nThe idea here is to specify in the function signature if the arguments passed to a function will modify the contents of the caller or not. We need further analysis improvements to get this to work, but having this in mind and the tooling to define this by hand are the basic roots to implement the rest.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ5NDMxNjQ1Mg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"One of the possible ways is to extend those to `__attribute__((something))`, tcc is able to parse them. Just would need to add exporting to the SDB representation.","createdAt":"2019-05-21T09:34:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14124#issuecomment-494316452","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5NDMyMDQ4MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"the important part here is imho a way to specify this with commands, apis, and render that in the fcnsignature and varlistings properly\n\n> On 21 May 2019, at 11:34, Anton Kochkov <notifications@github.com> wrote:\n> \n> One of the possible ways is to extend those to __attribute__((something)), tcc is able to parse them. Just would need to add exporting to the SDB representation.\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/14124?email_source=notifications&email_token=AAG75FUWFSYA4PQSP73PI4TPWO6Z3A5CNFSM4HOJCZLKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGODV3KXJA#issuecomment-494316452>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AAG75FSKIV3TGVLT77IFJGTPWO6Z3ANCNFSM4HOJCZLA>.\n> \n\n","createdAt":"2019-05-21T09:45:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14124#issuecomment-494320481","viewerDidAuthor":false}],"number":14124,"title":"Support argument variable direction attributes"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Windows 10 1809 17763.437 x86 64bit\r\n| File format of the file you reverse (mandatory)      | BIN ROM\r\n| Architecture/bits of the file (mandatory)            | AVR8, ATmega644/640\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.5.0-git 21238 @ windows-x86-64 git.3.5.0-git commit: 1c279c6081bc1877fabd533a8314eb527e32c66c build: Wed 04/10/2019__10:52:39.32\r\n\r\n### Expected behavior\r\nArrow from first rjmp at 0xb8da must point to `sleep` before it at 0xb8d8 (PC-1). Like rjmp at 0xc in test-short.bin from this screenshot.\r\nArrow from second rjmp at 0xb928 must point to `nop` at 0xb92e (PC+2) following the next call\r\ntest-short.bin displays expected behavior. Like rjmp at 0x5a in test-short.bin from this screenshot.\r\n![correct](https://user-images.githubusercontent.com/5345528/57791138-d0701a80-7744-11e9-93f0-04db431a6306.png)\r\n\r\nGraph view from address of first rjmp must show short loop.\r\n![graph-correct](https://user-images.githubusercontent.com/5345528/57791189-eb428f00-7744-11e9-9654-13ab40486752.png)\r\n\r\n### Actual behavior\r\nArrows in print of `pd 50` at `[0xb8d0]` shows that `rjmp` on `0xb8da` and on `0xb928` are jumping far back, while their calculated jump addresses are correct.\r\n`e asm.cpu=ATmega640` nothing changes.\r\n![bug](https://user-images.githubusercontent.com/5345528/57791121-c9490c80-7744-11e9-8a8c-8b435934a667.png)\r\n\r\nGraph view is broken too.\r\n![graph-bug](https://user-images.githubusercontent.com/5345528/57791177-e67ddb00-7744-11e9-9b72-4ac2ccc41ed2.png)\r\n\r\n### Steps to reproduce the behavior \r\ntest.bin displays the problem. test-short.bin displays the expected\r\n\r\n1) bug in arrows\r\n`r2 -a avr test.bin` or test-short.bin\r\n`> e asm.cpu=ATmega640`\r\n`> 0xb8d0` // for test.bin (.org 0x5C6B * 2 - 6) or stay at 0x0 for test-short.bin\r\n`[0xb8d0]> pd 50`\r\nsee difference in arrows from rjmp's at first pair of screenshots between test.bin and test-sort.bin\r\n*Note that the `br* restart` instructions are binary the same in booth cases and their arrow are shown correct in booth cases.*\r\n\r\n2) bug in graph\r\ngo to address of first rjmp `0xb8da` for test.bin or `0xc` for test-short.bin\r\n`aaa`\r\n`VV`\r\nsee difference in graph at second pair of screenshots\r\n\r\n[test.zip](https://github.com/radare/radare2/files/3183516/test.zip)\r\n[test-short.zip](https://github.com/radare/radare2/files/3183517/test-short.zip)\r\n\r\ntest-short.bin compiled with `.org 0x04` of main_loop instead of `.org 0x5C6B`\r\n\r\nsource code of test.bin which displays the problem is taken from real firmware dump:\r\n```asm\r\n.org 0x00 ; __RESET\r\n                jmp main\r\n; ...\r\n.org 0x5C6B ; << important\r\nmain_loop:\r\n                nop\r\nloop:\r\n                sleep\r\n                rjmp loop ; << here\r\nmain:\r\n                ldi     r16, 0x8f ; reset the stack ptr, no return\r\n                out     SPL, r16        \r\n                ldi     r16, 0x10\r\n                out     SPH, r16        \r\n                ldi     r28, 0\r\n                ldi     r29, 0x11\r\n                cli\r\n                set\r\n                clh\r\n                ses\r\n                clv\r\n                sen\r\n                clz\r\n                sec\r\n                brie    restart\r\n                brtc    restart\r\n                brhs    restart\r\n                brge    restart\r\n                brvs    restart\r\n                brpl    restart\r\n                breq    restart\r\n                brcc    restart\r\n                sei\r\n                clt\r\n                seh\r\n                cls\r\n                sev\r\n                cln\r\n                sez\r\n                clc\r\n                brid    restart\r\n                brts    restart\r\n                brhc    restart\r\n                brlt    restart\r\n                brvc    restart\r\n                brmi    restart\r\n                brne    restart\r\n                brcs    restart\r\n                rjmp    continue ; << and here\r\nrestart:\r\n                call    main\r\ncontinue:\r\n                nop ; ... many code of main\r\n                call main_loop\r\n                jmp main_loop\r\n```\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\nCutter is also show wrong graph for `call main`.\r\n\r\nFrom the datasheet:\r\n > The ATmega644 Program Counter (PC) is 15/16 bits wide, thus addressing the 32/64K program memory locations.\r\n\r\nSorry, I'm not familiar with r2 yet.\r\nAnd sorry for my English.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ5Mjc1NzMxNg==","author":{"login":"TrueXakeP"},"authorAssociation":"NONE","body":"I'll test now.","createdAt":"2019-05-15T17:53:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14078#issuecomment-492757316","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5Mjc3NTI4NA==","author":{"login":"TrueXakeP"},"authorAssociation":"NONE","body":"Just tested with \"radare2 3.5.1 1 @ windows-x86-64 git.3.5.1 commit: 4ec482ba2d4f554beeafb3aa47758e970bcab937 build: Wed 05/15/2019__ 7:58:44.85\"\r\nThe arrows of `rjmp` in disassembly print are correct for `ATmega1280`, `ATmega1281`, `ATmega2560`, `ATmega2561` and `ATxmega128a4u` as the `asm.cpu`. But not others and not `ATmega640`.\r\nFunctions then must be redefined to fix the graph rendering.\r\n\r\nBut now I see that the `aaa` turns `nop` at `0xb92e` into the `.dword 0x940e0000`:\r\n![Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ](https://user-images.githubusercontent.com/5345528/57800216-834a7380-7759-11e9-9891-0d04ea2f7a93.png)\r\n![Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ](https://user-images.githubusercontent.com/5345528/57800230-8cd3db80-7759-11e9-929d-f8afdb23123d.png)\r\n\r\nIn real firmware `aaa` turns another `nop` follows `ret` in data:\r\n![Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ](https://user-images.githubusercontent.com/5345528/57801383-3f0ca280-775c-11e9-874b-6408ca602ddb.png)\r\n","createdAt":"2019-05-15T18:41:24Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14078#issuecomment-492775284","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzMDc2NTMwNQ==","author":{"login":"revyakin"},"authorAssociation":"CONTRIBUTOR","body":"`ATMega644` has a 16-bit wide program counter, but `ATmega640` has only 15 bit `PC`. So your jump addresses have been truncated down to 15 bit. (eg. `0xb8d8 -> 0x38d8`). \r\n\r\nYou could choose a different asm.cpu, perhaps ATMega1280. Or you can define a new MCU type in [libr/anal/p/anal_avr.c](https://github.com/radare/radare2/blob/ec6840d9720177e6ae6079c5d1ad6c618b386f45/libr/anal/p/anal_avr.c#L136)","createdAt":"2019-09-12T10:29:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14078#issuecomment-530765305","viewerDidAuthor":false}],"number":14078,"title":"Wrong rjmp interpretation in AVR on ATmega644/640"},{"body":"still works in 19c, but will be good to keep support for old ndks for a while i guess\r\n\r\n```\r\n$ sys/android-shell.sh arm\r\nBuilding android locally with NDK instead of dockcross...\r\nUsing data from /Users/pancake/.r2androidrc..\r\nROOT=sys\r\nNDK=/Users/pancake/Downloads/android-ndk-r19c\r\nNDK_ARCH=arm\r\nBuilding the standalone NDK toolchain...\r\nWARNING:__main__:make_standalone_toolchain.py is no longer necessary. The\r\n$NDK/toolchains/llvm/prebuilt/darwin-x86_64/bin directory contains target-specific scripts that perform\r\nthe same task. For example, instead of:\r\n\r\n    $ python $NDK/build/tools/make_standalone_toolchain.py \\\r\n        --arch arm --api 28 --install-dir toolchain\r\n    $ toolchain/bin/clang++ src.cpp\r\n\r\nInstead use:\r\n\r\n    $ $NDK/toolchains/llvm/prebuilt/darwin-x86_64/bin/armv7a-linux-androideabi28-clang++ src.cpp\r\n\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY1OTY3NDk1OQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"This was already explained for the meson build in the book btw.","createdAt":"2020-07-16T21:10:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14065#issuecomment-659674959","viewerDidAuthor":false}],"number":14065,"title":"Last NDK deprecated the need for the python wrapper script"},{"body":"* [ ] ae -> e\r\n* [ ] e -> c (or any other letter that have better reference to config)\r\n* [ ] Implement command substitution with $() syntax instead of just the backticks.\r\n* [x] Implement |. or < suffixes as an alias to the '.' prefix\r\n* [ ] The |. thing can be also used in this way `|. foo.py` to feed from stdin an r2pipe python script\r\n* [ ] Implement >><< as a way to prepend in destination file (moving current contents N bytes back and forth) forever","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ5Mzc5OTc5Mw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"* In term of impact the `|.`, `>><<` nobody cares so you can do it anytime.\r\n* `$()` I personally don't like it because it has nothing to do with macros and `` is well understood already.\r\n* `ae -> e` That shouldn't be necessary at all if `dh esil` + `dXXX`. Esil should just be a debugger plugin.","createdAt":"2019-05-19T23:06:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14054#issuecomment-493799793","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MzgwMDIyMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"dh is now dL, despite i agree.i think it makes clear when you are debugging or emulating, but this is a long topic to discuss, and `ae` is not that long, and also killing the current `e` will be very problematic","createdAt":"2019-05-19T23:12:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14054#issuecomment-493800223","viewerDidAuthor":false}],"number":14054,"title":"Proposal for crazy changes in the commands"},{"body":"When calling `r_anal_op` with R_ANAL_OP_MASK_VAL, fields `src` and `dst` are filled. The problem is, that when there are registers involved, they are not allocated dynamically. It is usually done by passing a reference to global `RRegItem` variable, so for instance:\r\n`static RRegItem reg;`\r\n`\\\\ some code`\r\n`op->dst->reg = &reg`\r\nAs @radare noticed, it is incorrect approach since the code may behave unexpectedly when there are two `op`s being handled at the same time. \r\nThe problem with dynamic allocation, on the other hand, is that it's hard to say when a particular `RRegItem` may be freed:\r\n\r\n- it cannot be in `r_anal_value_free` since `r_anal_value_copy` does not copy entire `RRegItem` - just pointer to it, so when freeing both original `RAnalValue` and copy, we would be freeing it twice\r\n- it could be freed by something like `r_anal_rreg_free`, but in this case it needs to be called every time `r_anal_op` with R_ANAL_OP_MASK_VAL was called, so it's very error prone and inconvenient\r\n- even then, some `RRegItem`s are filled with `r_reg_get`, which does not allocate memory as far as I know, so calling `free` on them will produce undefined behaviour\r\n\r\nWhat I would suggest is to change `r_anal_value_copy` to copy `RRegItems` as well; not only pointers and always allocate `RRegItems` dynamically. In this case `r_anal_value_free` should also free it every time it is called. Performance will deteriorate a little, but at least, the behaviour will be correct.\r\nI would be very grateful for any better ideas and suggestions how to solve this problem.","comments":[],"number":14030,"title":"RRegItems should be allocated dynamically"},{"body":"- https://github.com/j00ru/windows-syscalls\r\n- https://github.com/tinysec/windows-syscall-table\r\n\r\nSupersedes https://github.com/radare/radare2/issues/1194","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUyOTA5NDI5MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@pelijah @a1ext @GustavoLCR FYI","createdAt":"2019-09-07T10:19:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/14018#issuecomment-529094291","viewerDidAuthor":false}],"number":14018,"title":"Update/autogenerate windows syscalls for r2"},{"body":"The idea for this variable is to replace anal.ex and anal.a2f\r\n\r\nThis is.. a way to tell how to analyze code, right now we have a big unified loop that works for all archs.. but we also have the a2f command, which is a different implementtaion.. and thehre can be others implemted in core plugins or in anal plugins (like the java one does right now.. but its broken as hell).\r\n\r\nAlso, the java implementataioni have 2 different analysis loops, using java information internally to handle the refs and such, imho its duplicating most of the logic we already have in the main loop, so it should die or at least redesigned in a way that we can extend or pick a different implemnetation without that much pain","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDQyNTAwMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"this is similar to the decompiler thing. we need a way to pick which one","createdAt":"2019-05-08T09:54:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13996#issuecomment-490425002","viewerDidAuthor":false}],"number":13996,"title":"Add anal.with"},{"body":"To be able to use something like Falcon RE IL (based in turn on RREIL and Binary Ninja's IL): https://github.com/falconre/falcon\r\nOr even grab some ideas from MLIR: https://github.com/tensorflow/mlir/blob/master/g3doc/LangRef.md\r\n\r\nMy proposal is to define two forms of it:\r\n- bitstream (like for LLVM bytecode)\r\n- textual representation\r\n\r\nIt should support also:\r\n- [ ] Floating point operations\r\n- [ ] Vector operations (SIMD)\r\n- [ ] Parallel execution\r\n- [ ] Embedding annotations (e.g. types information, references, inheritance, etc).\r\n\r\nSee also Radeco's IL: https://github.com/radareorg/radeco-lib/blob/master/src/middle/ir.rs + https://github.com/radareorg/radeco-lib/tree/master/src/middle/ir_reader\r\n\r\nhttps://github.com/radare/radare2/issues/11421\r\nhttps://github.com/radare/radare2/issues/4799\r\nhttps://github.com/radare/radare2/issues/7437\r\nhttps://github.com/radare/radare2/issues/6093\r\nhttps://github.com/radare/radare2/issues/4327\r\n\r\nIt is even possible to make an intermediate ESIL->R2IL (this hypothetical new IL) as a temporary solution, and move uplifters (architectures) to the new infrastructure one by one.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ5MTczNjM2Nw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Good example on how good IR/IL boosts decompiler and extension development https://twitter.com/josh_watson/status/1127364618429452288?s=19","createdAt":"2019-05-13T08:55:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13984#issuecomment-491736367","viewerDidAuthor":false}],"number":13984,"title":"Consider to use more formal and modern intermediate representation"},{"body":"i bet we can do better in those lines\r\n\r\n<img width=\"544\" alt=\"Screenshot 2019-05-06 at 15 58 19\" src=\"https://user-images.githubusercontent.com/917142/57230056-c6993980-7017-11e9-85d2-455bbe6546b7.png\">\r\n","comments":[],"number":13973,"title":"Honor scr.utf8 in diagonal lines of the graph"},{"body":"For consistency and standarization: use the PJ api\r\n* [ ] aoq + ao*\r\n* [x] b*  bj\r\n* [x] y* yj\r\n* [ ] cj c*\r\n* [ ] rj r*\r\n* [ ] P* \r\n* [ ] pj p* - what do here\r\n* [ ] a* aj - whta info to show?\r\n* [ ] uj u*\r\n* [ ] wj w* - does it make sense?\r\n* [ ] lj l* - json version of ls\r\n* [ ] #!j #!*\r\n* [ ] Lj Llj, ....\r\n* [x] kj have some newlines https://github.com/radareorg/radare2/pull/17258\r\n* [ ] k* is not working\r\n\r\nMissing helps\r\n\r\n* [x] v?\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUzNzMxNzgyMg==","author":{"login":"jiteshm17"},"authorAssociation":"NONE","body":"Hi, \r\nI am Jitesh. I am a newbie in Open Source and want to work towards solving this issue. However, I am not really able to understand the problem and how to start working on it. Can you please explain in which file of the repository should I start making changes and what exactly I should do?","createdAt":"2019-10-02T03:17:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13969#issuecomment-537317822","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzODIxNTg4OA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@jiteshm17 see the `libr/core/cmd_write.c` for `w...` commands for example, `libr/core/cmd_anal.c` for `aoq` command, see `aoj` and `ao*` on how to implement the JSON and r2 commands output, `libr/cmd.c` for more generic commands.","createdAt":"2019-10-04T03:39:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13969#issuecomment-538215888","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY2MDAxMDIzMA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I'm moving this out of 4.6.0 milestone because fixing *all* commands is really an optimistic view :D","createdAt":"2020-07-17T10:00:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13969#issuecomment-660010230","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3MDg5ODYxMA==","author":{"login":"officialcjunior"},"authorAssociation":"CONTRIBUTOR","body":"What is the desired output for `rj`, if `r` returns, say `5240`?","createdAt":"2020-08-08T11:10:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13969#issuecomment-670898610","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcwNzEzMTQ2MQ==","author":{"login":"officialcjunior"},"authorAssociation":"CONTRIBUTOR","body":"While implementing `uj`, how can I make it compatible with Windows and other OS-s?\r\nFor `u`, currently we have something like:\r\n```\r\n#elif __WINDOWS__\r\n\tr_cons_printf (\"windows\\n\");\r\n#else\r\n\tr_cons_printf (\"unknown\\n\");\r\n```\r\nDoes `uj` needs to cover them too? \r\nIf yes, is there a better way to do the check?\r\n","createdAt":"2020-10-12T13:48:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13969#issuecomment-707131461","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcwNzcyNzAzMg==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Yes it should support all platforms. actually i think we shold have uname and uname -j instead of u and uj. the u command should be for undo things. also im not sure if we have tests for these commands. can u add them?","createdAt":"2020-10-13T13:09:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13969#issuecomment-707727032","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDcwODA5NzkyNQ==","author":{"login":"officialcjunior"},"authorAssociation":"CONTRIBUTOR","body":"> i think we shold have uname and uname -j instead of u and uj\r\n\r\nYes, it makes sense as, `u` is kind of an odd one now under `u?`, but `uname` is already a command in r2.\r\n\r\n>  if we have tests for these commands. can u add them?\r\n\r\nAren't these commands system dependent? Should I really add them?","createdAt":"2020-10-14T01:26:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13969#issuecomment-708097925","viewerDidAuthor":false}],"number":13969,"title":"Add * and j in all the missing commands"},{"body":"Useful for trainings, like asciinema, but in  plain text, without visual stuff, console input + output only. like an r2pipe log","comments":[],"number":13966,"title":"Make a terminal logging command to save command+output in a log"},{"body":"# This template is meant for bug reports, if you have a feature request, please be as descriptive as possible and delete the template\r\n\r\nMake sure you are testing using the latest git version of radare2 before submitting any issue.\r\n\r\n*If you would like to report a bug, please fill the template bellow*\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Arch Linux x64\r\n| File format of the file you reverse (mandatory)      | N/A\r\n| Architecture/bits of the file (mandatory)            | 64, 32, 16\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.4.1 0 @ linux-x86-64 git.3.4.1\r\n| | commit: unknown build: 2019-04-04__14:03:50\r\n\r\nThe commit hash is 7fcac5ba99f43eae709ff846009fa0593b415fe3, I don't know why r2 -v isn't showing it\r\n\r\n### Expected behavior\r\nWhen analyzing the struct `struct foo { void *v1; void *v2; };`, `v2`'s offset depends on the size of a pointer.\r\n\r\n### Actual behavior\r\n`v2` is always at offset 4\r\n```\r\n$ r2 -b 64 -\r\n[0x00000000]> e asm.bits\r\n64\r\n[0x00000000]> \"td struct foo { void *v1; void *v2; };\"\r\n[0x00000000]> tas 8\r\n[0x00000000]> tas 4\r\nfoo.v2\r\n[0x00000000]> tas 2\r\n[0x00000000]> tk~void *~size\r\ntype.void *.size=64\r\n[0x00000000]> tk~foo~size\r\nstruct.foo.!size=64\r\n[0x00000000]> q\r\n$ r2 -b 32 -\r\n[0x00000000]> e asm.bits\r\n32\r\n[0x00000000]> \"td struct foo { void *v1; void *v2; };\"\r\n[0x00000000]> tas 8\r\n[0x00000000]> tas 4\r\nfoo.v2\r\n[0x00000000]> tas 2\r\n[0x00000000]> tk~void *~size\r\ntype.void *.size=64\r\n[0x00000000]> tk~foo~size\r\nstruct.foo.!size=64\r\n[0x00000000]> q\r\n$ r2 -b 16 -\r\n[0000:0000]> e asm.bits\r\n16\r\n[0000:0000]> \"td struct foo { void *v1; void *v2; };\"\r\n[0000:0000]> tas 8\r\n[0000:0000]> tas 4\r\nfoo.v2\r\n[0000:0000]> tas 2\r\n[0000:0000]> tk~void *~size\r\ntype.void *.size=64\r\n[0000:0000]> tk~foo~size\r\nstruct.foo.!size=64\r\n[0000:0000]> q\r\n```\r\n\r\n### Steps to reproduce the behavior \r\nRun the commands listed in Actual Behavior\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\nThe size of a void pointer is always reported as 64 bits, but the size of foo is always reported as 64 bits","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ4OTM4ODIwMg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Related to https://github.com/radare/radare2/issues/10996","createdAt":"2019-05-05T04:12:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13943#issuecomment-489388202","viewerDidAuthor":false}],"number":13943,"title":"Pointers inside structs do not take asm.bits into account when calculating offsets"},{"body":"$ rahash2 -a sha1 -r -s lasfd\r\ne file.sha1=6017d3efafd5bfb7cbf2b584073fb4bb928375f2\r\n\r\nfile.md5 exists but WHY, and sha1 does not.. maybe add  a comment?","comments":[],"number":13937,"title":"rahash2 -r is not very useful/working as we would want"},{"body":"I have test the function argument (parameter) identification features in PPC executable. unfortunately, the result is poor. I want to improve it.\r\nCould you tell me the method used in function argument  (parameter) identification in R2? \r\nThank you.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ4NzY2NDE4NQ==","author":{"login":"sivaramaaa"},"authorAssociation":"CONTRIBUTOR","body":"Hey hi , \r\n\r\nSo there are 2 types of function with respect to argument detection :\r\n\r\n1) libc function like printf , scanf those have know arguments and the info is stored in sdb https://github.com/radare/radare2/blob/master/libr/anal/d/types.sdb.txt\r\n\r\n2) user defined functions and the arguments to them are identified by the ebp and esp accessed , u could find more about here : https://github.com/radare/radare2/blob/master/libr/anal/var.c","createdAt":"2019-04-29T17:11:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13930#issuecomment-487664185","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4OTM4ODEzMw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Please provide the examples, better even to add them in https://github.com/radare/radare2-regressions/ as a regression test.","createdAt":"2019-05-05T04:11:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13930#issuecomment-489388133","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4OTg4MjkxMw==","author":{"login":"yasong"},"authorAssociation":"NONE","body":"@XVilka \r\n![image](https://user-images.githubusercontent.com/9759407/57267484-e92c6080-70b2-11e9-9103-db64c129eef9.png)Unable to upload the test files.\r\n","createdAt":"2019-05-07T02:29:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13930#issuecomment-489882913","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDA3MjY3NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Where did u get this? I see no option to disable attachments in gh issues :?\n\nPeople use to submit them as a pullreq btw\n\n> On 7 May 2019, at 04:29, gh0st <notifications@github.com> wrote:\n> \n> @XVilka\n> Unable to upload the test files.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-05-07T13:10:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13930#issuecomment-490072674","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDM4MTc5Ng==","author":{"login":"yasong"},"authorAssociation":"NONE","body":"OK. I had made a pull request.","createdAt":"2019-05-08T07:35:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13930#issuecomment-490381796","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDM4NjE0Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"where","createdAt":"2019-05-08T07:50:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13930#issuecomment-490386143","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDc3NzAxOQ==","author":{"login":"yasong"},"authorAssociation":"NONE","body":"https://github.com/radare/radare2-regressions/pulls","createdAt":"2019-05-09T07:18:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13930#issuecomment-490777019","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU4NzM3OTgzMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can you try again?","createdAt":"2020-02-18T10:05:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13930#issuecomment-587379832","viewerDidAuthor":false}],"number":13930,"title":"The result of function argument identification is poor"},{"body":"I want to script with python using r2pipe. Is there a way that when debugging I can break on each call function, thus I can get the parameter?  What's more, I won't jump into system library.\r\nOr is there a way to do function trace, just in program's address space, not in system library?","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ4NzQwMDAxMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Yes you can do that\n\n> On 28 Apr 2019, at 16:49, SwordWorth <notifications@github.com> wrote:\n> \n> I want to script with python using r2pipe. Is there a way that when debugging I can break on each call function, thus I can get the parameter? What's more, I won't jump into system library.\n> Or is there a way to do function trace, just in program's address space, not in system library?\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-04-28T17:34:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13923#issuecomment-487400011","viewerDidAuthor":false}],"number":13923,"title":"break on each function call and return"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Arch Linux\r\n| File format of the file you reverse (mandatory)      | raw rom dump. Mapped at 0xFFFF0000\r\n| Architecture/bits of the file (mandatory)            | ARM, mix of arm32 and thumb\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.5.0-git 21735 @ linux-x86-64 git.3.4.1-250-g599bee4d1 commit: 599bee4d1e56af0d0d6b4119894b034eede2db7c build: 2019-04-25__10:40:30\r\n\r\n### Expected behavior\r\n\r\nAnalysis autodetects a switch to thumb mode. Sets bits of the function to 16 and removes LSB.\r\n\r\n### Actual behavior\r\n\r\nAnalysis does not, and will actually define functions with the LSB set to 1.\r\nExample: aav.0xffff02cd (arm) should really be aav.0xffff02cc (thumb)\r\n\r\nI have a hunch this is because a lot of the calls to thumb functions in this dump are done through \r\n`ldr REG, ADDR; blx REG;` instead of just relative addresses.\r\n\r\n```\r\n0xffff00a4      d0119fe5       ldr r1, aav.0xffff0ab7\r\n0xffff00a8      31ff2fe1       blx r1\r\n```\r\n\r\nSee https://asciinema.org/a/tbomC54d0EctDrkBfzFeVu8Nu\r\n\r\n[rom.zip](https://github.com/radare/radare2/files/3117483/rom.zip)\r\n","comments":[],"number":13894,"title":"ARM thumb autoswitch detection on rom dump."},{"body":"Hello,\r\n\r\n Following #13720, I'm trying to extract the first 50 emulated instructions starting from the entry point, using ESIL of radar2.\r\n\r\n However, I tested it on a binary packed with MEW SE 11. Unfortunately, after the first jump, I go directly on invalid instructions (ff invalid instructions).\r\n \r\n What is the cause of that ? Is MEW packer loading a section dynamically containing its code, and for which ESIL is not able to emulate ?\r\n \r\n The commands I use for emulating the 50 first instructions are:\r\ne dbg.trace=true\r\naeim\r\ndr PC=entry0\r\n50aes\r\ndtd\r\n\r\n I've attached the binary here.\r\n \r\n So, could you explain me what is the cause of that and how it could be resolved ? \r\n\r\nThanks in advance for your help\r\n\r\n[MEW_aitstatic.exe.zip](https://github.com/radare/radare2/files/3101441/MEW_aitstatic.exe.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ4NTI3NjQ3Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"thats because r2 is setting the maps incorrectly, seems like a bug in the PE parser\n\n> On 21 Apr 2019, at 19:35, lamin3 <notifications@github.com> wrote:\n> \n> Hello,\n> \n> Following #13720 <https://github.com/radare/radare2/issues/13720>, I'm trying to extract the first 50 emulated instructions starting from the entry point, using ESIL of radar2.\n> \n> However, I tested it on a binary packed with MEW SE 11. Unfortunately, after the first jump, I go directly on invalid instructions (ff invalid instructions).\n> \n> What is the cause of that ? Is MEW packer loading a section dynamically containing its code, and for which ESIL is not able to emulate ?\n> \n> I've attached the binary here.\n> \n> So, could you explain me what is the cause of that and it could be resolved ?\n> \n> Thanks in advance for your help\n> \n> MEW_aitstatic.exe.zip <https://github.com/radare/radare2/files/3101441/MEW_aitstatic.exe.zip>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/13853>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AAG75FVNYMOCX42OKIBMPP3PRSQV3ANCNFSM4HHMCMUA>.\n> \n\n","createdAt":"2019-04-21T19:29:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13853#issuecomment-485276477","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NTk0MTAyMg==","author":{"login":"laminenoureddine"},"authorAssociation":"NONE","body":"@radare Thanks a lot for your reply. \r\n\r\n Ok, so what is the solution, is it possible to load another PE parser into radar2 ?\r\n\r\n Also, by the way, how can I map system calls ? Because I have the same problem (it jumps towards invalid instructions ff) when a windows system-call is called\r\n\r\nThanks in advance.","createdAt":"2019-04-23T19:25:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13853#issuecomment-485941022","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NjIyNjI3NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"my solution is fixing the pe parser. and yes you can use the lief-pe plugin for r2. is not much maintained, but fiixing that shouldnt be hard.\n\nwhat do you mean by map syscalls? syscalls are not mapped, they live in another ring. the function library calls iis whta i guess you are refering to. and this is something the runtime linker do. r2 doesnt handle that by default, but have the tools to let you reimplement any API call or load any library in there, but i dont think you want to run real native code in your malware\n\n> On 23 Apr 2019, at 21:25, lamin3 <notifications@github.com> wrote:\n> \n> @radare <https://github.com/radare> Thanks a lot for your reply.\n> \n> Ok, so what is the solution, is it possible to load another PE parser into radar2 ?\n> \n> Also, by the way, how can I map system calls ? Because I have the same problem (it jumps towards invalid instructions ff) when a windows system-call is called\n> \n> Thanks in advance.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/13853#issuecomment-485941022>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AAG75FTOTQRYROKUQL3LEZLPR5PDNANCNFSM4HHMCMUA>.\n> \n\n","createdAt":"2019-04-24T13:20:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13853#issuecomment-486226275","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NjI2MDcxOQ==","author":{"login":"laminenoureddine"},"authorAssociation":"NONE","body":"@radare : Thanks a lot for your replies. And I hope I'm disturbing a lot :-)\r\n \r\nYes, indeed I don't want to emulate to native code of the api system call. As said before, I just want to emulate the first 50 mnemonics of the PE packed binary,starting from the entry point, then get back the traces using the \"dtd\" comamnd. I want something like [push, mov, mov, call, call, ...., till the 50th mnemonic].\r\n\r\nThe problem is, sometimes there is an API  system call in the first mnemoincs (LoadLIbrary, or GetVersion, or VirtualAlloc) and then when I try to emulate using the command \"50aes\", it emulates just till the first api system call it meets, and then just after it goes to invalid instructions (ff invalid instructions)\r\n\r\nSo, what is the solution to that ? Just skipping the api system call would be a solution ? But I don't want to skip all the calls, I would like to skip only Windows api calls and not a simple call like \"call, offset\"\r\n\r\nand please, for the parser plugin, how sould I add it ? is there a command similar to changing the debugger dL= ?\r\n\r\nJust for information: all what I'm doing is under Fedora.\r\n\r\nThanks a lot for your help","createdAt":"2019-04-24T14:16:32Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13853#issuecomment-486260719","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NjI2Mzc0NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"aht ret @@ imp*\n\nWill make all improts return withiut falling in ffff places\n\nBut there r are many other ways to do that\n\n> On 24 Apr 2019, at 16:16, lamin3 <notifications@github.com> wrote:\n> \n> @radare : Thanks a lot for your replies. And I hope I'm disturbing a lot :-)\n> \n> Yes, indeed I don't want to emulate to native code of the api system call. As said before, I just want to emulate the first 50 mnemonics of the PE packed binary,starting from the entry point, then get back the traces using the \"dtd\" comamnd. I want something like [push, mov, mov, call, call, ...., till the 50th mnemonic].\n> \n> The problem is, sometimes there is an API system call in the first mnemoincs (LoadLIbrary, or GetVersion, or VirtualAlloc) and then when I try to emulate using the command \"50aes\", it emulates just till the first api system call it meets, and then just after it goes to invalid instructions (ff invalid instructions)\n> \n> So, what is the solution to that ? Just skipping the api system call would be a solution ? But I don't want to skip all the calls, I would like to skip only Windows api calls and not a simple call like \"call, offset\"\n> \n> and please, for the parser plugin, how sould I add it ? is there a command similar to changing the debugger dL= ?\n> \n> Thanks a lot for your help\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-04-24T14:23:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13853#issuecomment-486263745","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NjI3MDg4OA==","author":{"login":"laminenoureddine"},"authorAssociation":"NONE","body":"@radare : Thanks for the reply.\r\n\r\n I've just tested it, unfortunately it didn't work. It still stops at the first system call and goes to ff instructions.\r\n I've attached you here the packed binary (a PE binary packed with Armadillo) i'm testing with.\r\n\r\n It stop at  **call dword [sym.imp.KERNEL32.dll_GetVersion]**  the 14 th instruction from the entrypoint.\r\n\r\nThe commands I'm using are:\r\ne.dbg.trace=true\r\naei\r\naeim\r\naht ret @@ imp*\r\n50aes\r\ndtd\r\n\r\nThanks\r\n[Armadillo_aitagent.exe.zip](https://github.com/radare/radare2/files/3112781/Armadillo_aitagent.exe.zip)\r\n","createdAt":"2019-04-24T14:40:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13853#issuecomment-486270888","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NjcwNDA5MQ==","author":{"login":"laminenoureddine"},"authorAssociation":"NONE","body":"@radare : Please,  the command \"aht ret @@ imp*\" didn't work, it still stops at call dword [sym.imp.KERNEL32.dll_GetVersion] as showed above.\r\n\r\nIs there another way to simulate the api calls without going to ff instructions ?\r\n\r\nI've attached you the packed binary in the previous message.\r\n\r\nThanks a lot for your help","createdAt":"2019-04-25T14:47:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13853#issuecomment-486704091","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzMzc1ODE1Mg==","author":{"login":"khellendros"},"authorAssociation":"NONE","body":"Having the same issue with system calls on ubuntu.","createdAt":"2019-09-21T01:51:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13853#issuecomment-533758152","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3MTE4MTkwOA==","author":{"login":"wesinator"},"authorAssociation":"NONE","body":"> \r\n> \r\n> @radare : Thanks for the reply.\r\n> \r\n> I've just tested it, unfortunately it didn't work. It still stops at the first system call and goes to ff instructions.\r\n> I've attached you here the packed binary (a PE binary packed with Armadillo) i'm testing with.\r\n> \r\n> It stop at **call dword [sym.imp.KERNEL32.dll_GetVersion]** the 14 th instruction from the entrypoint.\r\n> \r\n> The commands I'm using are:\r\n> e.dbg.trace=true\r\n> aei\r\n> aeim\r\n> aht ret @@ imp*\r\n> 50aes\r\n> dtd\r\n> \r\n> Thanks\r\n> [Armadillo_aitagent.exe.zip](https://github.com/radare/radare2/files/3112781/Armadillo_aitagent.exe.zip)\r\n\r\n@lamin3 note this file isn't actually packed with Armadillo. \r\nhttps://www.zscaler.com/blogs/research/your-windows-8-packed\r\n\r\nPEiD sig detections for Armadillo v1.71 and v1.xx - v2.xx are false positives.","createdAt":"2020-01-06T15:26:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13853#issuecomment-571181908","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3MTE4ODA4Mw==","author":{"login":"laminenoureddine"},"authorAssociation":"NONE","body":"@wesinator Thanks for the notification. But have you checked the **unzipped** file ? The file to check is not the zipped one, I had to zip it just for uploading it here. You should first unzip it and then check it with PEiD or ideally with DiE. And it is a file that I packed my self with Armadillo v2.52.","createdAt":"2020-01-06T15:41:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13853#issuecomment-571188083","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3MTIxMTMxMQ==","author":{"login":"wesinator"},"authorAssociation":"NONE","body":"> @wesinator Thanks for the notification. But have you checked the **unzipped** file ? The file to check is not the zipped one, I had to zip it just for uploading it here. You should first unzip it and then check it with PEiD or ideally with DiE. And it is a file that I packed my self with Armadillo v2.52.\r\n\r\nOh, yes of course I checked the exe, I assumed it wasn't modified. Ok, makes sense","createdAt":"2020-01-06T16:39:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13853#issuecomment-571211311","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY2Nzc5OTc5NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@GustavoLCR you might be interested in this.","createdAt":"2020-08-03T04:43:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13853#issuecomment-667799795","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY4NTUwODExNQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Related: https://github.com/radareorg/radare2/issues/16226","createdAt":"2020-09-02T09:39:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13853#issuecomment-685508115","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5vF0s1","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"very good idea !\r\n\r\nwin peb is not even emulated on windows.\r\n\r\nthe issue is there are many many version of windows see at least for win10: https://www.vergiliusproject.com/kernels/x86/Windows%2010\r\n\r\nI how 2 implementation design ideas:\r\n\r\n1- brute force all the versions from vergilius project (long but working on linux)\r\n2- calulating teb address  from register dynamically from any windows process. (fast to implement but could work only on windows).","createdAt":"2023-12-20T03:36:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13853#issuecomment-1863797557","viewerDidAuthor":false}],"number":13853,"title":"Simulating Windows API calls while emulating in Linux with ESIL"},{"body":"Ghidra and IDA fails in this simple hello world. r2 is not failing because is not really trying to find the size of the variable. here's the bin and some random screenshots.\r\n\r\n![IMAGE 2019-04-21 18:49:00](https://user-images.githubusercontent.com/917142/56473030-20213600-6466-11e9-93ca-9c3d5eab49d8.jpg)\r\n\r\n\r\n[o_prog.file.zip](https://github.com/radare/radare2/files/3101401/o_prog.file.zip)\r\n\r\n<img width=\"795\" alt=\"Screenshot 2019-04-21 at 18 46 49\" src=\"https://user-images.githubusercontent.com/917142/56473000-d33d5f80-6465-11e9-8264-c377f3a41246.png\">\r\n\r\nfailures on ida/ghidra\r\n\r\n![IMAGE 2019-04-21 18:47:52](https://user-images.githubusercontent.com/917142/56473009-f8ca6900-6465-11e9-8d69-8db5115bb803.jpg)\r\n![IMAGE 2019-04-21 18:47:58](https://user-images.githubusercontent.com/917142/56473010-fc5df000-6465-11e9-8515-261a6a2167e5.jpg)\r\n![IMAGE 2019-04-21 18:48:21](https://user-images.githubusercontent.com/917142/56473018-097adf00-6466-11e9-9af7-1a95e3bf92d2.jpg)\r\n![IMAGE 2019-04-21 18:48:26](https://user-images.githubusercontent.com/917142/56473020-0da6fc80-6466-11e9-9c70-4b7f0a46a4bd.jpg)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY2NDQxMDAxNA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@trufae What is this issue really about?\r\nIs it a bug in r2? Is it a feature request?\r\n\r\nTo me this seems about the decompiler, but r2 is not really a decompiler so this doesn't seem relevant.","createdAt":"2020-07-27T13:52:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13850#issuecomment-664410014","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY2NDUwMzAzMA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Itâ€™s about variable access analysis. This info is used by the decompilers indeed. But the analysis is done in r2","createdAt":"2020-07-27T16:32:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13850#issuecomment-664503030","viewerDidAuthor":true}],"number":13850,"title":"x86-64 analysis var size issue"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Arch Linux x86/64 5.0.8-arch1-1-ARCH\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.4.1 0 @ linux-x86-64 git.3.4.1 commit: unknown build: 2019-04-04__14:03:50\r\n\r\n### Expected behavior\r\nCL command show the source code attached to the binary file just like gdb.\r\n### Actual behavior\r\nCannot find meta information at 0x0000a69c\r\n### Steps to reproduce the behavior \r\n```\r\nr2 Hv2ray\r\nCL\r\ns main\r\nCL\r\nCL @ sym.main\r\n```\r\n- Please share the binary if it is shareable by drag and dropping it here in a zip archive\r\n[Hv2ray.zip](https://github.com/radare/radare2/files/3101228/Hv2ray.zip)\r\n\r\n","comments":[],"number":13848,"title":"Unable to CL show the source code for a specific binary."},{"body":"* [ ] move it into `p`\r\n* [x] use colors\r\n* [x] use utf8\r\n* [ ] relative values and sizes instead of full hex addresses\r\n* [ ] show pxr in stackframe (or just the values if found)\r\n\r\nmore comments are welcome\r\n\r\n![IMAGE 2019-04-19 17:16:12](https://user-images.githubusercontent.com/917142/56430509-d51cec80-62c6-11e9-8f2a-8171cf0505d5.jpg)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ4NDkzMTc3NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Related: https://github.com/radare/radare2/issues/7519","createdAt":"2019-04-19T15:29:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13822#issuecomment-484931774","viewerDidAuthor":false}],"number":13822,"title":"RFE: improve ascii-art stackframe printer"},{"body":"Same for any other visual print mode that can show pointers","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUwMzYzMzY2Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"enotime for 3.6","createdAt":"2019-06-19T16:28:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13821#issuecomment-503633667","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwOTQzNjQ0OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"this one is important and very useful","createdAt":"2020-04-05T15:40:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13821#issuecomment-609436448","viewerDidAuthor":false}],"number":13821,"title":"Add code hotkey hints in visual pxr"},{"body":"Currently radare2 disassembly shows both reflines and comments like \"CODE XREF from ...\" by default. @radare and me suggest that we can hide the \"CODE XREF ...\" lines if reflines are shown. At least by default. And show them once reflines are enabled. But user should be able to force enable the comments even with reflines shown as well.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ4NDc5OTY0NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I dont see the relation between code xrefs and reflines. Cjmps shouldnt create coderefs\n\n> On 19 Apr 2019, at 09:43, Anton Kochkov <notifications@github.com> wrote:\n> \n> Currently radare2 disassembly shows both reflines and comments like \"CODE XREF from ...\" by default. @radare and me suggest that we can hide the \"CODE XREF ...\" lines if reflines are shown. At least by default. And show them once reflines are enabled. But user should be able to force enable the comments even with reflines shown as well.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-04-19T08:02:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13818#issuecomment-484799645","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NTEyMzEyMg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I donâ€™t see either the relation.... arenâ€™t reflines just for calls and jumps? Xrefs are also for data etc.","createdAt":"2019-04-20T13:49:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13818#issuecomment-485123122","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NTEyNjg4NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"This issue is pretty badly described. \n\nIf you look at the code refs (â€˜câ€™). You will see that its for jmps and cjmps. But.. only for some of them. Seems like thencode that split bbs when theres a jmp backwards doesnt adds those.\n\nI think the best solution for this would be to do this:\n\n- fix the missing xrefs\n- add an option to show/hide the code refs in pd\n\n> On 20 Apr 2019, at 15:49, Riccardo Schirone <notifications@github.com> wrote:\n> \n> I donâ€™t see either the relation.... arenâ€™t reflines just for calls and jumps? Xrefs are also for data etc.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-04-20T14:09:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13818#issuecomment-485126885","viewerDidAuthor":false}],"number":13818,"title":"Do not show \"CODE XREF ...\" if reflines are shown (by default)"},{"body":"Like the ones we have for RDebug or RFS","comments":[],"number":13805,"title":"Implement rbin.io plugin"},{"body":"a fat header is the easiest example we can take for this:\r\n\r\n```\r\npf.fat_arch xxxxx cputype cpusubtype offset size align\r\npf.fat_header xd magic nfat_archs\r\npf.fat_header xd[?]? magic nfat_archs nfat_archs (fat_arch)fat_arch\r\n```\r\n\r\nthis is not working, but it should. the [?] may expect a fieldname (previously defined) to read the dword from there to determine the size of it.\r\n\r\nThis is used in many other data structures an we should support this properly. \r\n\r\npascal strings can be defined like this:\r\n\r\n`pf.pascal_string b[?]z length string`\r\n","comments":[],"number":13802,"title":"pf variable size arrays support"},{"body":"basically to toggle (rotate) between all the edge modes\r\n\r\n* square\r\n* fast-square\r\n* diagonals\r\n* no lines\r\n\r\nwe should improve some of those line layouts","comments":[],"number":13796,"title":"Visual graph is confusing with e and E keys, should merge"},{"body":"We want to show the contents of the stackframe, maybe via pxr or ad if we dont have local vars defined for the given function\r\n```\r\n$ r2 -d rax2\r\n[0x100004000]> dcu entry0\r\nContinue until 0x100000f60 using 1 bpsize\r\n[0x10004428e]> dbt\r\n0  0x100048642        sp: 0x0                 0    [??]  rip map.rax2.r+288322\r\n1  0x10000e452        sp: 0x7ffeefbfe3e8      16   [??]  map.rax2.r+50258\r\n2  0x100040dc0        sp: 0x7ffeefbfe468      128  [??]  map.rax2.r+257472\r\n3  0x10000e452        sp: 0x7ffeefbfe4f8      144  [??]  map.rax2.r+50258\r\n4  0x1000084b9        sp: 0x7ffeefbfe538      64   [??]  map.rax2.r+25785\r\n5  0x100007ff5        sp: 0x7ffeefbfe728      496  [??]  map.rax2.r+24565\r\n[0x10004428e]>\r\n```","comments":[],"number":13784,"title":"Improve dbt with stackframe contents"},{"body":"Related to \r\n\r\nhttps://github.com/radareorg/cutter/issues/682\r\n\r\nSeems like libr/flag/d files are not loaded by default, usage is confusing, missing ft*, more ideas are welcome","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzY2NDcyNw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"I suggest one should move this under the function signature database like we have noreturn=XX we could have unsafe=XX. That way it's all located at the same place and easy to contribute.","createdAt":"2019-04-16T13:43:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13782#issuecomment-483664727","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzY3MTA1OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"there's a list of \"attributes\" that i would like to be able to assign to each function\n\n* noreturn\n* unsafe\n* unused\n* pure\n* tailcall\n...\n\nso we need a better approach than the one used for noreturn to do this. \n\n> On 16 Apr 2019, at 15:43, Maijin <notifications@github.com> wrote:\n> \n> I suggest one should move this under the function signature database like we have noreturn=XX we could have unsafe=XX. That way it's all located at the same place and easy to contribute.\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/13782#issuecomment-483664727>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lrQs3wHN_5XxawiHDXMtk94YSwH7ks5vhdN4gaJpZM4cxz45>.\n> \n\n","createdAt":"2019-04-16T13:58:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13782#issuecomment-483671058","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4Mzc2MzEzMQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"All those tags all good to be in these existing databases so it's all centralized and easy to contribute for new comers","createdAt":"2019-04-16T17:11:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13782#issuecomment-483763131","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDgxMTU0Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i did some work on this, but clearly needs more","createdAt":"2019-05-09T08:36:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13782#issuecomment-490811547","viewerDidAuthor":false}],"number":13782,"title":"Review/update flagtags"},{"body":"Right now we have those commands to have a zoomed-out \"overview\"\r\n\r\n* prc=\r\n* p=\r\n* p-\r\n* pz\r\n\r\nThe zoom. config variables are used to change the behaviour, and those commands dont share all the code that they could share.. will be good to unify and improve the usability of those commands (maybe placing them all under pz or whatever), feedback is welcome","comments":[],"number":13781,"title":"Unify all zoom commands"},{"body":"For example\r\n\r\n```\r\np8 @@@=`@@@b*`\r\n```\r\n\r\nto be the same as:\r\n\r\n```\r\np8 @@@b\r\n```","comments":[],"number":13757,"title":"Add @@@* to print as offset+size all the results instead of running the commands"},{"body":"```\r\n[0x1000011e8]> afc?~afca\r\n| afca            Analyse function for finding the current calling convention\r\n[0x1000011e8]> afca\r\nTodo\r\n[0x1000011e8]>\r\n```","comments":[],"number":13754,"title":"Not implemented: afca            Analyse function for finding the current calling convention"},{"body":"We need a command that takes this as arguments:\r\n\r\n* initiial address of current data (for a specific module)\r\n* end address of current data (for a specific module)\r\n* new base address\r\n\r\nThe command will walk all the comments, hints, breakpoints, functions, basic blocks, types bindings, xrefs... and rebase all of them that are poiniting in the specified range.\r\n\r\nExample propsal:\r\n\r\n```\r\naR 0x8000 0xa000 @ 0x6000\r\naR 0x6000 0x8000 0xa000\r\n```\r\n\r\nWhen this command (and api) is ready, we can use it to solve the problem of ood in aslr by rebasing all the debugmaps comparing them to the new ones and calling aR.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzI0ODQwOQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Isn't this a duplicate of https://github.com/radare/radare2/issues/6495 ?","createdAt":"2019-04-15T13:20:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13753#issuecomment-483248409","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzI0ODc2OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Also related https://github.com/radare/radare2/issues/5905","createdAt":"2019-04-15T13:21:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13753#issuecomment-483248769","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzI0ODg4MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"yes it is. we can close the old one, because it's better described/explained in here","createdAt":"2019-04-15T13:22:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13753#issuecomment-483248880","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzU4MDQwMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"im thinking that this wont work unless i provide the full mapping translations of all the regions at once. otherwise we can recursively rebase things that fall on other used areas and result in a broken state","createdAt":"2019-04-16T09:18:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13753#issuecomment-483580401","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwMjQ4NTkxMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"maybe do this with two different RCore instances like radiff works?","createdAt":"2019-06-16T21:07:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13753#issuecomment-502485912","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwMjUxMzEyNw==","author":{"login":"Hamled"},"authorAssociation":"NONE","body":"This is also related to #13390.\r\n\r\nOne question to ask, I think, is what are the use cases for the analysis rebasing command? The most obvious one to me is when switching into and out of debugging mode (in particular ASLR scenarios as you've mentioned).\r\n\r\nIf that's the only meaningful use case, we might have some less-general solutions that still work vs. needing to generally support rebasing an `RAnal` instance.\r\n\r\nFor example, maybe have two `RAnal` instances referenced from `RCore`:\r\n* One for static analysis, written/read when using analysis commands while not debug mode.\r\n* One for current dynamic analysis, written/read when using analysis commands while debugging.\r\n\r\nThe rebasing operation could be contained entirely within the processing of `oo[d]`, for the case where there is existing analysis data when you reopen a file in debug mode.\r\n\r\nThis might simplify:\r\n* needing to have all loaded maps at once, so everything can be rebased atomically\r\n* code changes, if we switch the `RCore.anal` pointer as needed, and store the above two instances in separate members.\r\n* switching out of debug mode, no need to \"un-rebase\"\r\n\r\nThere's obviously other complications, in particular synchronizing the analysis data as it is modified in either mode. My guess is that would be simpler to implement than rewriting `RAnal` to include an address translation piece, given how complex that code is and how frequently address fields are directly referenced.","createdAt":"2019-06-17T02:26:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13753#issuecomment-502513127","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwMjgyMjAyMg==","author":{"login":"Hamled"},"authorAssociation":"NONE","body":"As happens so often, just as I was drifting off to sleep I had an idea that might result in both fewer changes to the existing analysis code base while also being more flexible than what I suggested yesterday.\r\n\r\nRather than keep multiple copies of `RCore` or `RAnal`, or update all accesses to analysis objects' addresses to go through a translation layer, we could maintain a separate \"address table\" with entries for all analysis objects which are reachable from `RCore.anal`.\r\n\r\nEach entry in the table would include, in addition to a reference to the address field on a specific object, whatever information was needed to support rebasing the address.\r\n\r\nRebasing for debugging would mean walking the entire table and rebasing the address through each reference, according to the current maps (or lack thereof). Rebasing with the `aR` command would just be the same process, but filtered to a entries where the current addresses were within the specified range. Or, perhaps more in the r2 style, entering/exiting debugging state could be implemented as a series of `aR` commands (at a slight performance hit).\r\n\r\nAny address-based indexes (`RAnal.fcn_tree` and `RAnal.fcn_addr_tree` at least) would need to be re-built after each rebase, but I guess that's true for any implementation.\r\n\r\nI'm also not clear enough yet on how analysis data is persisted with r2, so I'm not sure how or if that would need to be updated.\r\n\r\nThe clear benefits I see to this approach over the other choices mentioned above:\r\n* There's no indirection when reading addresses from analysis objects, which is almost certainly the dominating behavior with that data.\r\n* The code that does rebasing doesn't need to know how to walk through all parts of `RAnal` to find each address, making it hopefully much simpler.\r\n\r\nI'm very new to the radare2 codebase, so please let me know if I'm missing something major with this idea.","createdAt":"2019-06-17T19:39:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13753#issuecomment-502822022","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTU5MjM4OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"aren't we closer to this after eadbbaf3fd8f4ddc566aee3c4f90414214eb2d86 ?\r\n\r\ncc @yossizap can you add a command to use this api?","createdAt":"2020-01-17T11:38:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13753#issuecomment-575592389","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTU5NjIyNQ==","author":{"login":"yossizap"},"authorAssociation":"CONTRIBUTOR","body":"Will look into it, need to finish rebase based on debug maps instead of sections first.","createdAt":"2020-01-17T11:51:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13753#issuecomment-575596225","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTYwMDM1NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"On static should keep using sections\n\n> On 17 Jan 2020, at 12:51, yossizap <notifications@github.com> wrote:\n> \n> ï»¿\n> Will look into it, need to finish rebase based on debug maps instead of sections first.\n> \n> â€”\n> You are receiving this because you were assigned.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-01-17T12:05:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13753#issuecomment-575600355","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NjA1ODgxNQ==","author":{"login":"yossizap"},"authorAssociation":"CONTRIBUTOR","body":"Too much work left, maybe tomorrow morning.","createdAt":"2020-01-19T23:17:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13753#issuecomment-576058815","viewerDidAuthor":false}],"number":13753,"title":"Add command to rebase analysis information"},{"body":"Hello,\r\n \r\n I want to extract mnemonics from binaries (malware) using Radar2 using the disassembly option.\r\n\r\n However, I want to extract mnemonics like they should be executed (control flow execution) and not like with just a simple STATIC disassembly.\r\n\r\n  So, let's suppose I have an unconditional jump instruction followed by padded data (or junk code). Here, I want to extract mnemonics like they should be executed i.e. in my extracted sequence, I would have the jump instruction followed by the mnemonic which is the target of the unconditional jump and not the padded data wrongly disassembled.\r\n\r\nI know that is doable with a static recursive traversal disassembly, but sometimes when you have a **jump, eax** you can't guess the value of the register eax statically.\r\n\r\n Reason why my idea is to use ESIL (emulation) in order to emulate the control flow execution of the sample. But the problem is here, I don't know technically how it could be done ? Is it really possible ?\r\n\r\n Again, the goal being to extract mnemonics in sequence as they are supposed to be execute.\r\n\r\nThanks in advance for your help,","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ4MjY1NzA0NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"In general this is unsolved problem due to the non-deterministic way of execution - dependency on the input, environment, and concurrency. There are two ways to do this *imprecisely*: partial emulation (with ESIL for example) and symbolic execution. For the latter case you will have a path explosion problem, thus not really practical for real world programs. So using partial emulation and some useful tricks you should be able to achieve this.","createdAt":"2019-04-12T17:27:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13720#issuecomment-482657045","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MjY2NTc0Mg==","author":{"login":"laminenoureddine"},"authorAssociation":"NONE","body":"@XVilka : First of all, thank you very much for your very quick reply. You answer is very logical and concrete.\r\n\r\nLet me just explain more my problem:\r\n\r\nI'm dealing with **PACKED** samples. And generally, the unpacking-code stub is the first code called after the entry point. In this context, I just want to extract in sequence the 30 (or a bit more let's say 50) first mnemonics starting from the entry point of the sample. These 30 (or 50) mnemonics would basically represent a partial code of the whole unpacking-code stub. But it 's enough for me ! I would be happy with just a partial code of the unpacking-code stub.\r\n\r\n However, I want these extracted mnemonics to be meaningful not just padded/junk code data inserted. And the only way I see for this is to follow the calls/jump/ret and so on. So, I think like you well mentioned that partial emulation would be the solution.\r\n \r\n But, more concretely, and technically, could you show me please how to do it with ESIL ? How to extract the first 50 mnemonics in sequence, starting from the entry point of the binary ? Knowing that I would want the mnemonic in sequence like they are supposed to execute and not just a STATIC disassembler would output.\r\n\r\nThanks a lot for your help,","createdAt":"2019-04-12T17:54:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13720#issuecomment-482665742","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4Mjc4NTc3Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I think that what you want is to enable dbg.trace. Do dsu to step until a specific address and thwn run dtd to disassemble the debug traces\n\n> On 12 Apr 2019, at 19:54, lamin3 <notifications@github.com> wrote:\n> \n> @XVilka : First of all, thank you very much for your very quick reply. You answer is very logical and concrete.\n> \n> Let me just explain more my problem:\n> \n> I'm dealing with PACKED samples. And generally, the unpacking-code stub is the first code called after the entry point. In this context, I just want to extract in sequence the 30 (or a bit more let's say 50) first mnemonics starting from the entry point of the sample. These 30 (or 50) mnemonics would basically represent a partial code of the whole unpacking-code stub. But it 's enough for me ! I would be happy with just a partial code of the unpacking-code stub.\n> \n> However, I want these extracted mnemonics to be meaningful not just padded/junk code data inserted. And the only way I see for this is to follow the calls/jump/ret and so on. So, I think like you well mentioned that partial emulation would be the solution.\n> \n> But, more concretely, and technically, could you show me please how to do it with ESIL ? How to extract the first 50 mnemonics in sequence, starting from the entry point of the binary ? Knowing that I would want the mnemonic in sequence like they are supposed to execute and not just a STATIC disassembler would output.\n> \n> Thanks a lot for your help,\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-04-13T07:41:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13720#issuecomment-482785776","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4Mjc4NTg2OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"And yes this think works in esil, but esil wont unpack windows binaries without defining a bunch of windows apis and such.\n\n> On 12 Apr 2019, at 19:54, lamin3 <notifications@github.com> wrote:\n> \n> @XVilka : First of all, thank you very much for your very quick reply. You answer is very logical and concrete.\n> \n> Let me just explain more my problem:\n> \n> I'm dealing with PACKED samples. And generally, the unpacking-code stub is the first code called after the entry point. In this context, I just want to extract in sequence the 30 (or a bit more let's say 50) first mnemonics starting from the entry point of the sample. These 30 (or 50) mnemonics would basically represent a partial code of the whole unpacking-code stub. But it 's enough for me ! I would be happy with just a partial code of the unpacking-code stub.\n> \n> However, I want these extracted mnemonics to be meaningful not just padded/junk code data inserted. And the only way I see for this is to follow the calls/jump/ret and so on. So, I think like you well mentioned that partial emulation would be the solution.\n> \n> But, more concretely, and technically, could you show me please how to do it with ESIL ? How to extract the first 50 mnemonics in sequence, starting from the entry point of the binary ? Knowing that I would want the mnemonic in sequence like they are supposed to execute and not just a STATIC disassembler would output.\n> \n> Thanks a lot for your help,\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-04-13T07:42:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13720#issuecomment-482785868","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4Mjc5NjQ4Mg==","author":{"login":"laminenoureddine"},"authorAssociation":"NONE","body":"@radare: Thanks a lot for your reply.\r\nIndded, I need a kind of disassembled traces in order the have a meaningful mnemonics in sequence. \r\n\r\nYes, debugging is possible, however I don't want to use it for the following reasons:\r\n- I don't want to take the risk to execute directly the code.\r\n- In my context, I don't want to UNPACK, I just want to get the first mnemonics (let's say 50) of the unpacking routine.\r\n- I'm under Linux, and my binaries are PE files, so ...\r\n\r\nSo, is it possible to do the same as debugging but rather with a partial emulation using ESIL i.e. emulate till a certain address or other criteria (like emulate the first 50 instructions starting from the entry point), then just disassemble the emulated opcodes traces ? If yes, could you please show me the commands to do it ? \r\n\r\nThanks a lot for your help","createdAt":"2019-04-13T10:17:47Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13720#issuecomment-482796482","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NDA1MzQ2Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"then you should go with this","createdAt":"2019-04-17T12:00:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13720#issuecomment-484053462","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NDA1Mzg2Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"```\r\ne dbg.trace=true\r\naeim\r\ndr PC=entry0\r\n50aes\r\ndtd\r\n```","createdAt":"2019-04-17T12:01:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13720#issuecomment-484053866","viewerDidAuthor":false}],"number":13720,"title":"Extract menmonics in sequence as they should execute and not just linearly"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Debian x86 64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.4.0-git 21269 @ linux-x86-64 git.3.3.0-240-ge52a67ed7\r\ncommit: e52a67ed70fdc3825877be63b1b99ff04b4ca073 build: 2019-03-24__19:26:30\r\n\r\n\r\n### Expected vs actual behavior\r\n\r\nNew radare2 user and stumbled upon the following when looking at a haskell hello-world program, after running `aaa`:\r\n\r\n![getMonotonicNSec_no_lto](https://user-images.githubusercontent.com/210815/55982305-abc8e480-5c66-11e9-8b51-797a3777a062.png)\r\n\r\nThe corresponding source looks like:\r\n\r\n``` c\r\nStgWord64 getMonotonicNSec(void)\r\n{\r\n    struct timespec ts;\r\n    int res;\r\n\r\n    res = clock_gettime(CLOCK_ID, &ts);\r\n    if (res != 0) {\r\n        sysErrorBelch(\"clock_gettime\");\r\n        stg_exit(EXIT_FAILURE);\r\n    }\r\n    return (StgWord64)ts.tv_sec * 1000000000 +\r\n           (StgWord64)ts.tv_nsec;\r\n\r\n}\r\n\r\nTime getProcessElapsedTime(void)\r\n{\r\n    return NSToTime(getMonotonicNSec());\r\n}\r\n```\r\n\r\n...I would expect `r2` to properly split the functions, either because it noticed all those calls to`getProcessElapsedTimes` or could in some other way recognize the `jmp` optimization that's happening here.\r\n\r\n\r\n### Steps to reproduce the behavior \r\n\r\nRun `r2` on binary followed by `aaa`:\r\n\r\n\r\n[hello_no_lto.zip](https://github.com/radare/radare2/files/3070098/hello_no_lto.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzIxNTg5MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"this bug is related to the order of the analysis, if you analize via aa @@sym* the scope is detected properly. i think this is something we should do in a separate command at the end of aaa or improve the current analysis to avoid covering known registered entrypoints (via call ref or bin symbol) for example\n\n> On 11 Apr 2019, at 20:39, Brandon Simmons <notifications@github.com> wrote:\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tDebian x86 64\n> File format of the file you reverse (mandatory)\tELF\n> Architecture/bits of the file (mandatory)\tx86/64\n> r2 -v full output, not truncated (mandatory)\tradare2 3.4.0-git 21269 @ linux-x86-64 git.3.3.0-240-ge52a67ed7\n> commit: e52a67e <https://github.com/radare/radare2/commit/e52a67ed70fdc3825877be63b1b99ff04b4ca073> build: 2019-03-24__19:26:30\t\n> Expected vs actual behavior\n> \n> New radare2 user and stumbled upon the following when looking at a haskell hello-world program, after running aaa:\n> \n>  <https://user-images.githubusercontent.com/210815/55982305-abc8e480-5c66-11e9-8b51-797a3777a062.png>\n> The corresponding source looks like:\n> \n> StgWord64 getMonotonicNSec(void)\n> {\n>     struct timespec ts;\n>     int res;\n> \n>     res = clock_gettime(CLOCK_ID, &ts);\n>     if (res != 0) {\n>         sysErrorBelch(\"clock_gettime\");\n>         stg_exit(EXIT_FAILURE);\n>     }\n>     return (StgWord64)ts.tv_sec * 1000000000 +\n>            (StgWord64)ts.tv_nsec;\n> \n> }\n> \n> Time getProcessElapsedTime(void)\n> {\n>     return NSToTime(getMonotonicNSec());\n> }\n> ...I would expect r2 to properly split the functions, either because it noticed all those calls togetProcessElapsedTimes or could in some other way recognize the jmp optimization that's happening here.\n> \n> Steps to reproduce the behavior\n> \n> Run r2 on binary followed by aaa:\n> \n> hello_no_lto.zip <https://github.com/radare/radare2/files/3070098/hello_no_lto.zip>\n> Additional Logs, screenshots, source-code, configuration dump, ...\n> \n> Drag and drop zip archives containing the Additional info here, don't use external services or link.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/13710>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lh8p46YxnWAASxUp6LLbQ_hf2aIXks5vf4FjgaJpZM4cqm11>.\n> \n\n","createdAt":"2019-04-15T11:35:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13710#issuecomment-483215891","viewerDidAuthor":false}],"number":13710,"title":"Poor function detection case"},{"body":"In theory it follow data refs and analyzes the destinations as functions if they look like code, but it seems to introduce a bunch of regressions. thats why its not enabled by default, so it will be good to improve it and test it more","comments":[],"number":13702,"title":"Review anal.data "},{"body":"I would love to have an option to fetch a call instruction parameters as described by the current calling convention.  Given that I seek into a call instruction, I would like to ask what are the parameters that this specific calls sends (only those that can be resolved statically of course).\r\n\r\nFor example (the calling convention is Microsoft x64 calling convention):\r\n\r\n> 0x14000c448  lea rdx, [0x1401f86a0]     ; \"ReleaseSRWLockExclusive\"**\r\n> 0x14000c44f   mov qword [0x140348120], rax ; [0x140348120:8]=0\r\n> 0x14000c456     mov rcx, rbx\r\n> 0x14000c459     call qword sym.imp.KERNEL32.dll_GetProcAddress** ; [0x1401f7230:8]=0x27d870\r\n                          reloc.KERNEL32.dll_GetProcAddress ; \"p\\xd8'\" ; FARPROC GetProcAddress(HMODULE hModule, LPCSTR lpProcName)`\r\n\r\nFirst, I want to seek to the call instruction.\r\n> s 0x14000c459\r\n\r\nThen, I want to ask what are the parameters (those that can actually be resolved statically) that the function receives. In this example:\r\n\r\nParam0 (RCX): hModule=rbx(cannot be resolved)\r\nParam1 (RDX): lpProcName=\"ReleaseSRWLockExclusive\"\r\n\r\n\r\nThanks","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ4MjA0NTU0Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"This is a good (and should not be hard to implement) idea that fits [Types RSoC project](https://github.com/radare/radare2/projects/19)","createdAt":"2019-04-11T09:43:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13700#issuecomment-482045546","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MjA0NTkxMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Also related to https://github.com/radare/radare2/issues/13191","createdAt":"2019-04-11T09:44:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13700#issuecomment-482045911","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzA3OTc3Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Related commands:\r\n\r\n| afcR            Register telescoping using the calling conventions order\r\n| aefa [addr]                emulate function to find out args in given or current offset\r\n| afcf[j] [name]  Prints return type function(arg1, arg2...), see afij\r\n| afs ([fcnsign])                       get/set function signature at current address\r\n\r\ni think its already ssolved with this, maybe it needs better visibility or testing. Can you confirm? aefa is what you are looking for?","createdAt":"2019-04-15T01:38:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13700#issuecomment-483079776","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDgyNjIxOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping!","createdAt":"2019-05-09T09:17:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13700#issuecomment-490826219","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxNjc5ODgzMg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Will need tests too.","createdAt":"2019-07-31T10:49:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13700#issuecomment-516798832","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0Njg3OTI3OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"also see `| aefa [addr]                emulate function to find out args in given or current offset`","createdAt":"2019-10-28T10:12:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13700#issuecomment-546879279","viewerDidAuthor":false}],"number":13700,"title":"Call instruction parameters"},{"body":"Save the differences in register values between initial state and end of function.\r\n\r\nThis bring some challenges:\r\n\r\n* emulate all bbs?\r\n* ignore the jumps/loops?\r\n* ignore the calls? Make them return 0?\r\n* implement drdj, drdq...","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzA3ODk0Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Inspired by Sibyl, i did r2emuhash in r2-extras https://github.com/radare/radare2-extras/tree/master/r2emuhash/bin","createdAt":"2019-04-15T01:31:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13699#issuecomment-483078943","viewerDidAuthor":false}],"number":13699,"title":"RFE: regdiff of function emulation in zignatures"},{"body":"In objdump, by default it does not disassemble the filler data as it is not much interested. Only when we mention -z (or) --disassemble-zeros, it outputs disassembled code of filler data. \r\nIn Radare2, I am getting disassembled code of these repeated zeros by default. What flag should I give in order to avoid this? \r\nI want this because when I disassemble a pe file, the size of disassembled code is bloated up because of this not so needed lines. Please tell me how to avoid this.\r\n \r\nTIA. ","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ4MTY1NDU3Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Please provide sample binary and reproducible testcase\n\n> On 10 Apr 2019, at 13:33, Bhuvanamitra <notifications@github.com> wrote:\n> \n> In objdump, by default it does not disassemble the filler data as it is not much interested. Only when we mention -z (or) --disassemble-zeros, it outputs disassembled code of filler data.\n> In Radare2, I am getting disassembled code of these repeated zeros by default. What flag should I give in order to avoid this?\n> I want this because when I disassemble a pe file, the size of disassembled code is bloated up because of this not so needed lines. Please tell me how to avoid this.\n> \n> TIA.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-04-10T11:38:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13690#issuecomment-481654573","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MTY2NDc1Ng==","author":{"login":"Bhuvanamitra"},"authorAssociation":"NONE","body":"This is the malware exe file. \r\n[mal1.zip](https://github.com/radare/radare2/files/3063659/mal1.zip)\r\nI have opened using r2\r\nr2 ./path/to/filename\r\npd $s > disasm_output.txt\r\nthis file has 1,66,776 lines. \r\nBut the same file when disassembled with objdump, gives a file of 14,248 lines. \r\nThe difference is radare disassembles zero bytes as well. I want a way to avoid that and get the crisp output as given by objdump. ","createdAt":"2019-04-10T12:12:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13690#issuecomment-481664756","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MTY3NjM5NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"r2 is not objdump, you are using it wrongly, also, this line have several\nissues....\n\n* pd disassembles N instructions, not N bytes\n* you didnt specified the begining of the disasm, by default is the\nentrypoint, which almost never is in the begining of the binary\n* $s is the file size in disk. you are in VA mode, so the memory is not\nlinear and not mapped at the same size as in phyisical\n* disassembling the whole binary, even the headers or data sections is not\nthe way to go if you expect to have decent results and disassembling times.\n* r2 is much more powerful than objdump and gives you better toolings than\njust to use it for grepping a text file.\n\nWhat is the purpose of having a txt with the whole disasm? what are you\nplanning to do with it?\n\nAs a side note:\n\n* use pD to disasseble N bytes\n* use the pava mode to get the linear physical mapping but keeping the\nvirtual maps information\n* use $SS instead of $s to disasseble the current section only (the one\ncontaining code)\n\n\n\nOn Wed, 10 Apr 2019 at 14:12, Bhuvanamitra <notifications@github.com> wrote:\n\n> This is the malware exe file.\n> mal1.zip <https://github.com/radare/radare2/files/3063659/mal1.zip>\n> I have opened using r2\n> r2 ./path/to/filename\n> pd $s > disasm_output.txt\n> this file has 1,66,776 lines.\n> But the same file when disassembled with objdump, gives a file of 14,248\n> lines.\n> The difference is radare disassembles zero bytes as well. I want a way to\n> avoid that and get the crisp output as given by objdump.\n>\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/radare/radare2/issues/13690#issuecomment-481664756>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AA3-lgNVdms0bjCEy11bBvM8SS7RVZ43ks5vfdU1gaJpZM4cmxj6>\n> .\n>\n\n\n-- \n--pancake\n","createdAt":"2019-04-10T12:48:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13690#issuecomment-481676395","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MTk2NTE0OQ==","author":{"login":"Bhuvanamitra"},"authorAssociation":"NONE","body":"I want to extract mnemonics from the disassembled code and give them as features to my malware classifier. \r\nI have used objdump and extracted menmonics from disassembled code it produced.. The classifier results are satisfactory. \r\nBut as you may know objdump is linear disassembler. \r\nSo I want to extract recurssively and train the classifier to see if there is any improvement in the accuracy. (I believe there should be an improvement)\r\nPlease guide me how I can do this?\r\nAnd in general I do static malware analysis, I used objdump and pefile till now to extract my features. I am planning to use radare2 for all its high end capabilities. \r\nThrow some light. TIA. ","createdAt":"2019-04-11T04:56:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13690#issuecomment-481965149","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MjA1NTQ2Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"pd is linear disasm so it wont fix your concern unless you have analyzed the code before.\n\nOne solution would be to use pdr@@fcn* to only get the recursive disasm of the functions, but as long as u only one the mnemonics tweak the asm. Config vars, or use pir~[0]\n\n\n> On 11 Apr 2019, at 06:56, Bhuvanamitra <notifications@github.com> wrote:\n> \n> I want to extract mnemonics from the disassembled code and give them as features to my malware classifier.\n> I have used objdump and extracted menmonics from disassembled code it produced.. The classifier results are satisfactory.\n> But as you may know objdump is linear disassembler.\n> So I want to extract recurssively and train the classifier to see if there is any improvement in the accuracy. (I believe there should be an improvement)\n> Please guide me how I can do this?\n> And in general I do static malware analysis, I used objdump and pefile till now to extract my features. I am planning to use radare2 for all its high end capabilities.\n> Throw some light. TIA.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-04-11T10:13:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13690#issuecomment-482055467","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MjA2MjM0Nw==","author":{"login":"Bhuvanamitra"},"authorAssociation":"NONE","body":"Thanks for telling about the tweaking. Is there any way by which i can recrssively disasm entire binary?\r\nas you said, pdr is giving disasm of certain function only. ","createdAt":"2019-04-11T10:37:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13690#issuecomment-482062347","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzIxNjAwMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"pdr@@F\n\nwill do recursive disasm of of the functions\n\n> On 11 Apr 2019, at 12:37, Bhuvanamitra <notifications@github.com> wrote:\n> \n> Thanks for telling about the tweaking. Is there any way by which i can recrssively disasm entire binary?\n> as you said, pdr is giving disasm of certain function only.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/13690#issuecomment-482062347>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lgNq0UE-lJZUVhGjyAuNRaz6jNcjks5vfxBfgaJpZM4cmxj6>.\n> \n\n","createdAt":"2019-04-15T11:35:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13690#issuecomment-483216001","viewerDidAuthor":false}],"number":13690,"title":"How to avoid disassembling filler data (repeated zero bytes) using radare2"},{"body":"for instructions repeating stuff like those having the REP prefix on x86","comments":[],"number":13644,"title":"Add FAMILY_REP"},{"body":"The same way i did with dri for registers, we should be able to do the same for instructions in a function. like this:\r\n\r\n```\r\neax: push, mov, lea\r\nebx: add, sub\r\necx: inc, cmp\r\nesp: push, pop\r\n...\r\n\r\n```\r\n\r\nwe can also want to get the inverse output of `aeaf..` but this is probably something to go ini a separate isssue","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ4MDk5NDA3NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"```\r\n I: rsp rbp rdi rsi\r\n A: rsp rbp rdi r8 rsi rdx rcx rax zf cf pf sf of rip\r\n R: rsp rbp rdi rsi rdx rcx of sf zf r8\r\n W: rsp rbp r8 rdx rdi rcx rax zf cf pf sf of rip rsi\r\n@R: 0x00177ff8 0x00178000 0x00178008\r\n@W: 0x00177ff8\r\n\r\n0x00177ff8 RW (stack)\r\n0x00178000 W (stack)\r\n0x00178008 W (stack)\r\n\r\nrsp IARW\r\nrbp IARW\r\nrdi IARW\r\nrsi IARW\r\nr8  ARW\r\nrdx ARW\r\nrcx ARW\r\nrax AW\r\nzf  AW\r\ncf  AW\r\npf  AW\r\nsf  AW\r\nof  AW\r\nrip AW\r\n```","createdAt":"2019-04-08T20:26:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13642#issuecomment-480994074","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MDk5NDIwNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"also this will help us to find out bugs in aeaf.. and maybe we want an alias for aeaf under afia?","createdAt":"2019-04-08T20:26:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13642#issuecomment-480994205","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MDk5NDc3OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"and this compact view is also interestsing\r\n\r\n```\r\nIARW rsp rbp rdi rsii\r\nARW  r8 rdx rcx\r\nAW   rax zf cf pf sf of\r\nRW    0x00177ff8\r\nW     0x00178000 0x0078008\r\n```","createdAt":"2019-04-08T20:28:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13642#issuecomment-480994778","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyNTU2MzY3MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"See afis and afisa commands","createdAt":"2019-08-28T03:00:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13642#issuecomment-525563671","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgzODI0NzI0Ng==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Also for @swoops if you want to add another zignature metric this one seems quite interesting to have :)","createdAt":"2021-05-11T10:39:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13642#issuecomment-838247246","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDgzOTQyMTMwMw==","author":{"login":"swoops"},"authorAssociation":"COLLABORATOR","body":"Cool, I will take a look at it. ","createdAt":"2021-05-12T04:19:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13642#issuecomment-839421303","viewerDidAuthor":false}],"number":13642,"title":"Inverse register usage in function"},{"body":"Having an esil emulated stats for each function will be good for improving signatures. \r\n\r\n```\r\n[0x10000119a]> aeaf\r\n I: rsp rbp rdi rsi\r\n A: rsp rbp rdi r8 rsi rdx rcx rax zf cf pf sf of rip\r\n R: rsp rbp rdi rsi rdx rcx of sf zf r8\r\n W: rsp rbp r8 rdx rdi rcx rax zf cf pf sf of rip rsi\r\n@R: 0x00178000 0x00178008 0x00178010\r\n@W: 0x00178000\r\n[0x10000119a]>\r\n```","comments":[],"number":13641,"title":"Save aeaf in zignatures"},{"body":"Scrolling in visual is not consistent in all the print modes. for example the ascii hexdump mode.\r\n\r\nBlock scroll: '<' '>' -> should honor user defined blocksize (not the one defined by visual)\r\nPage scroll: 'J' 'K' -> is many times scrolling blocksize or much more beyond\r\nLine scroll: 'jk' -> working almost fine everywhere, but some print modes scroll wrongly","comments":[],"number":13638,"title":"Visual scrolling and blocksize"},{"body":"So it can be used as globoals for the output of r2dec to be compiled back","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ4MDI2ODk5Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cc @wargio ","createdAt":"2019-04-05T13:08:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13631#issuecomment-480268993","viewerDidAuthor":false}],"number":13631,"title":"Implement: drpc - print the register profile in C syntax"},{"body":"entering the graph can be really painful on some graphs on small devices. will be good to handle ^C at least","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDgxNjMzNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"funny RCons bottleneck\r\n\r\n<img width=\"404\" alt=\"Screenshot 2019-05-09 at 10 49 33\" src=\"https://user-images.githubusercontent.com/917142/57440349-2413cd00-7248-11e9-93ab-e5fd7f83e249.png\">\r\n","createdAt":"2019-05-09T08:49:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13625#issuecomment-490816336","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDgyNDQ2MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"requires more work . some of it in https://github.com/radare/radare2/pull/14009","createdAt":"2019-05-09T09:12:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13625#issuecomment-490824461","viewerDidAuthor":false}],"number":13625,"title":"Honor ^C in agf"},{"body":"e scr.scrollbar=true only works in visual and graph for now. will be good to have it in other places","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3OTk2MzM2Nw==","author":{"login":"Vane11ope"},"authorAssociation":"CONTRIBUTOR","body":"I tried couple of implementations but I'm not sure if this fits to panels which already has too much stuff on canvas lol","createdAt":"2019-04-04T16:12:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13619#issuecomment-479963367","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzIxNzc0MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"see that i have created the horizontal scrollbar, maybe good th ave p= or omething too","createdAt":"2019-04-15T11:42:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13619#issuecomment-483217740","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDAzMjAzOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"any feedback here?","createdAt":"2019-05-07T10:55:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13619#issuecomment-490032039","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc1NzUxNDYyMg==","author":{"login":"NishantPuri99"},"authorAssociation":"NONE","body":"@radare is this perhaps still open?\r\nIf yes, how can I try it out?","createdAt":"2021-01-10T17:43:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13619#issuecomment-757514622","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc1NzU0NDYyNA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Yes. This issue is still not solved. The way to test this is by enabling â€˜e scr.scrollbar=trueâ€™ and then pressing v to enter panels mode. No scrollbar is shown in the frame border. In visual ( V command) works as expected","createdAt":"2021-01-10T21:11:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/13619#issuecomment-757544624","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc1NzYyNjY1Mg==","author":{"login":"NishantPuri99"},"authorAssociation":"NONE","body":"Okay. Trying this out then","createdAt":"2021-01-11T05:09:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13619#issuecomment-757626652","viewerDidAuthor":false}],"number":13619,"title":"Add scrollbar in panels"},{"body":"something like this, but without having to do hacky greps:\r\n\r\n```\r\n0x1000011e8]> pdd~(\"\r\n        rax = getenv (\"COLUMNS\");\r\n        rax = getenv (\"COLUMNS\");\r\n    al = compat_mode (\"bin/ls\", \"Unix2003\");\r\n    al = compat_mode (\"bin/ls\", \"Unix2003\");\r\n    al = compat_mode (\"bin/ls\", \"Unix2003\");\r\n    al = compat_mode (\"bin/ls\", \"Unix2003\");\r\n    al = compat_mode (\"bin/ls\", \"Unix2003\");\r\n    setenv (\"CLICOLOR\", 0x100004ae8, 1);\r\n    al = compat_mode (\"bin/ls\", \"Unix2003\");\r\n    rax = getenv (\"CLICOLOR\");\r\n            rax = getenv (\"CLICOLOR_FORCE\");\r\n        rax = getenv (\"TERM\");\r\n    rax = getenv (\"LSCOLORS\");\r\n```","comments":[],"number":13618,"title":"improved pds with function call args"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nTo design and think about searching on top of recorded traces. We should consider existing solutions too.\r\n\r\n**Additional context**\r\nSee https://github.com/GrammaTech/trace-db for the inspiration\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ4NTkxNTc2OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"using the visual trace mode and improving it is the way to go imho","createdAt":"2019-04-23T18:13:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13613#issuecomment-485915768","viewerDidAuthor":false}],"number":13613,"title":"Better search on top of recorded traces"},{"body":"Seems like its pretty reasonable the current behaviour. so i would go for making it by default\r\n\r\nbefore:\r\n<img width=\"794\" alt=\"Screenshot 2019-04-03 at 00 53 44\" src=\"https://user-images.githubusercontent.com/917142/55441378-eff31f80-55aa-11e9-9697-541d451c8150.png\">\r\n\r\nafter\r\n\r\n<img width=\"1466\" alt=\"Screenshot 2019-04-03 at 00 54 06\" src=\"https://user-images.githubusercontent.com/917142/55441391-fd100e80-55aa-11e9-972e-a736abbbc983.png\">\r\n","comments":[],"number":13612,"title":"Enable graph.cmtright=true by default"},{"body":"https://github.com/radare/radare2/issues/13586\r\n\r\ncc @ITAYC0HEN ","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ4NTM5MTM0Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping @ITAYC0HEN ","createdAt":"2019-04-22T10:56:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15593#issuecomment-485391347","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NTM5MzQ0Mg==","author":{"login":"ITAYC0HEN"},"authorAssociation":"CONTRIBUTOR","body":"you said \"Never mind\" and \"Too late\" ðŸ˜¨ \r\nhttps://github.com/radare/radare2/issues/13586#issuecomment-478388951","createdAt":"2019-04-22T11:08:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15593#issuecomment-485393442","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NTM5MzYwMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"because i implemented the command, but didnt wrote any test\n\n> On 22 Apr 2019, at 13:08, Itay Cohen <notifications@github.com> wrote:\n> \n> you said \"Never mind\" and \"Too late\" ðŸ˜¨\n> radare/radare2#13586 (comment) <https://github.com/radare/radare2/issues/13586#issuecomment-478388951>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2-regressions/issues/1766#issuecomment-485393442>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AAG75FS7MXOVMSWLORML7J3PRWMEPANCNFSM4HCSFUDQ>.\n> \n\n","createdAt":"2019-04-22T11:09:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15593#issuecomment-485393602","viewerDidAuthor":false}],"number":15593,"title":"Add tests for wai"},{"body":"For `tl` and `Cf` ones using `asm.meta=0` and `asm.meta=1`","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUxNjI1NTE0NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Please provide an example how it should look then.","createdAt":"2019-07-30T04:24:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13582#issuecomment-516255144","viewerDidAuthor":false}],"number":13582,"title":"Add the ability to fold and scroll over structs"},{"body":"The idea here is to find more ortogonality betwee all the ways to configure the memory layout, improve the use of asm.meta and better visual interactions.\r\n\r\nThe proposal consists in having a command that walks N bytes and cnoverts the C* commands into pf* and gives that a name.\r\n\r\nthis is because when in visual doing `dw` to define a word it does Cd 4, Cd 8, Cs for strings, etc.. this basically defins the types, but at some point we want to group those fields into a struct that may need a name.\r\n\r\nfields for this new struct should be automatically named or reuse the flag names if any","comments":[],"number":13581,"title":"Visual define structs"},{"body":"The idea is to use diagonal lines sometimes and square lines sometimes.. so we can provide more info to the user with a quick sight and probably speedup the time required to render the graph, because finding overlapped edges in square is pretty expensive","comments":[],"number":13576,"title":"Use mixed edge layout to improve visibility"},{"body":"just seek to `1u64` and type x:\r\n\r\n```\r\n$ r2 -qc 'x@1u64' --\r\n$ r2 -qc 'pd 3@1u64' --\r\n            0xffffffffffffffff      invalid\r\n            0x00000000      invalid\r\n            0x00000001      invalid\r\n$\r\n``` \r\n\r\n<img width=\"941\" alt=\"Screenshot 2019-03-29 at 18 27 03\" src=\"https://user-images.githubusercontent.com/917142/55251242-58ab6680-5250-11e9-86b0-0d3a5880685d.png\">\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU0NjU2NzQzNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"<img width=\"667\" alt=\"Screenshot 2019-10-26 at 06 24 27\" src=\"https://user-images.githubusercontent.com/917142/67614216-45965000-f7b9-11e9-9a20-d97e231c9d67.png\">\r\n","createdAt":"2019-10-26T04:24:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13554#issuecomment-546567435","viewerDidAuthor":false}],"number":13554,"title":"Add an option to make io circular"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | macOS 10.12, x86_64h\r\n| File format of the file you reverse (mandatory)      | Mach-O\r\n| Architecture/bits of the file (mandatory)            | ARMv7 (ARM/Thumb)\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.4.0-git 21461 @ darwin-x86-64 git.3.3.0-281-ge2ab4ef2c commit: e2ab4ef2ceab8aad3f16e1915e28f1b66d5faa5f build: 2019-03-27__14:04:49\r\n\r\n### Expected behavior\r\n\r\nRunning `pd` or other disassembly commands honors the `asm.bits` variable and does not change it.\r\n\r\n### Actual behavior\r\n\r\nSometimes when trying to disassemble a Thumb function, something changes the `asm.bits` variable to `32`, which ends up breaking the disassembly (it's possible this also happens the other way round, but I haven't experienced that so far).  \r\nMaking the variable readonly with `er asm.bits` does fix the problem, but obviously then leaves me unable to properly reverse ARM code in the binary.  \r\n\r\n### Steps to reproduce the behavior \r\n\r\nOne place where it happens is at address `0xf0008c90` in this binary: [sep_kernel.zip](https://github.com/radare/radare2/files/3013332/sep_kernel.zip)  \r\n(This is an Apple Secure Enclave kernel for iOS 10.3.3, see [here](https://www.theiphonewiki.com/wiki/Greensburg_14G60_(iPhone6,1)) for full firmware download & decryption keys.)\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\nExample session for the address/binary above:\r\n\r\n```\r\n[0x00000000]> 0xf0008c90\r\n[0xf0008c90]> e asm.bits\r\n32\r\n[0xf0008c90]> e asm.bits=16\r\n[0xf0008c90]> e asm.bits\r\n16\r\n[0xf0008c90]> pd 10\r\n                                     0xf0008c90      2de9f04d       ldclmi p9, c14, [r0, 0xb4]!\r\n                                     0xf0008c94      06af8ab0       addlt sl, sl, r6, lsl 30\r\n                                     0xf0008c98      6c466ff3       invalid\r\n                                     0xf0008c9c      0204a546       strtmi r0, [r5], r2, lsl 8\r\n                                 â”Œâ”€< 0xf0008ca0      92466c4a       bmi 0xf1b1a6f0\r\n                                 â”‚   0xf0008ca4      40f08040       addmi pc, r0, r0, asr 32\r\n                                 â”‚   0xf0008ca8      e8461060       andsvs r4, r0, r8, ror 13\r\n                                 â”‚   0xf0008cac      41f08040       addmi pc, r0, r1, asr 32\r\n                                 â”‚   0xf0008cb0      93464146       invalid\r\n                                 â”‚   0xf0008cb4      3cc83cc1       teqgt ip, ip, lsr r8\r\n[0xf0008c90]> e asm.bits\r\n32\r\n[0xf0008c90]> e asm.bits=16\r\n[0xf0008c90]> er asm.bits\r\n[0xf0008c90]> pd 10\r\n                                     0xf0008c90      2de9f04d       push.w {r4, r5, r6, r7, r8, sl, fp, lr}\r\n                                     0xf0008c94      06af           add r7, sp, 0x18\r\n                                     0xf0008c96      8ab0           sub sp, 0x28\r\n                                     0xf0008c98      6c46           mov r4, sp\r\n                                     0xf0008c9a      6ff30204       bfc r4, 0, 3\r\n                                     0xf0008c9e      a546           mov sp, r4\r\n                                     0xf0008ca0      9246           mov sl, r2\r\n                                     0xf0008ca2      6c4a           ldr r2, [0xf0008e54]\r\n                                     0xf0008ca4      40f08040       orr r0, r0, 0x40000000\r\n                                     0xf0008ca8      e846           mov r8, sp\r\n[0xf0008c90]> \r\n```\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3NzE1NTgxMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ahb 16\n\n> On 27 Mar 2019, at 14:25, Siguza <notifications@github.com> wrote:\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tmacOS 10.12, x86_64h\n> File format of the file you reverse (mandatory)\tMach-O\n> Architecture/bits of the file (mandatory)\tARMv7 (ARM/Thumb)\n> r2 -v full output, not truncated (mandatory)\tradare2 3.4.0-git 21461 @ darwin-x86-64 git.3.3.0-281-ge2ab4ef2c commit: e2ab4ef build: 2019-03-27__14:04:49\n> Expected behavior\n> \n> Running pd or other disassembly commands honors the asm.bits variable and does not change it.\n> \n> Actual behavior\n> \n> Sometimes when trying to disassemble a Thumb function, something changes the asm.bits variable to 32, which ends up breaking the disassembly (it's possible this also happens the other way round, but I haven't experienced that so far).\n> Making the variable readonly with er asm.bits does fix the problem, but obviously then leaves me unable to properly reverse ARM code in the binary.\n> \n> Steps to reproduce the behavior\n> \n> One place where it happens is at address 0xf0008c90 in this binary: sep_kernel.zip\n> (This is an Apple Secure Enclave kernel for iOS 10.3.3, see here for full firmware download & decryption keys.)\n> \n> Additional Logs, screenshots, source-code, configuration dump, ...\n> \n> Example session for the address/binary above:\n> \n> [0x00000000]> 0xf0008c90\n> [0xf0008c90]> e asm.bits\n> 32\n> [0xf0008c90]> e asm.bits=16\n> [0xf0008c90]> e asm.bits\n> 16\n> [0xf0008c90]> pd 10\n>                                      0xf0008c90      2de9f04d       ldclmi p9, c14, [r0, 0xb4]!\n>                                      0xf0008c94      06af8ab0       addlt sl, sl, r6, lsl 30\n>                                      0xf0008c98      6c466ff3       invalid\n>                                      0xf0008c9c      0204a546       strtmi r0, [r5], r2, lsl 8\n>                                  â”Œâ”€< 0xf0008ca0      92466c4a       bmi 0xf1b1a6f0\n>                                  â”‚   0xf0008ca4      40f08040       addmi pc, r0, r0, asr 32\n>                                  â”‚   0xf0008ca8      e8461060       andsvs r4, r0, r8, ror 13\n>                                  â”‚   0xf0008cac      41f08040       addmi pc, r0, r1, asr 32\n>                                  â”‚   0xf0008cb0      93464146       invalid\n>                                  â”‚   0xf0008cb4      3cc83cc1       teqgt ip, ip, lsr r8\n> [0xf0008c90]> e asm.bits\n> 32\n> [0xf0008c90]> e asm.bits=16\n> [0xf0008c90]> er asm.bits\n> [0xf0008c90]> pd 10\n>                                      0xf0008c90      2de9f04d       push.w {r4, r5, r6, r7, r8, sl, fp, lr}\n>                                      0xf0008c94      06af           add r7, sp, 0x18\n>                                      0xf0008c96      8ab0           sub sp, 0x28\n>                                      0xf0008c98      6c46           mov r4, sp\n>                                      0xf0008c9a      6ff30204       bfc r4, 0, 3\n>                                      0xf0008c9e      a546           mov sp, r4\n>                                      0xf0008ca0      9246           mov sl, r2\n>                                      0xf0008ca2      6c4a           ldr r2, [0xf0008e54]\n>                                      0xf0008ca4      40f08040       orr r0, r0, 0x40000000\n>                                      0xf0008ca8      e846           mov r8, sp\n> [0xf0008c90]> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-03-27T13:33:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13523#issuecomment-477155812","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NzE1ODYxNw==","author":{"login":"Siguza"},"authorAssociation":"CONTRIBUTOR","body":"Okay thanks, that works.  \r\nBut is the silent override of `asm.bits` intentional then?","createdAt":"2019-03-27T13:39:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13523#issuecomment-477158617","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NzE2MjYyNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Yes because theres a hint that says otherwise. Its anoying and painful but its the only way we have now to track all the thumb/arm switched when doing recursive analysis. Which is not perfect either. And everybody complains and this feels counterintuitive. So maybe in asm.bits we can add a check for the hints and make it happen there if a hint blocks the change\n\n> On 27 Mar 2019, at 14:39, Siguza <notifications@github.com> wrote:\n> \n> Okay thanks, that works.\n> But is the silent override of asm.bits intentional then?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-03-27T13:48:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13523#issuecomment-477162624","viewerDidAuthor":false}],"number":13523,"title":"asm.bits sometimes wrongly overridden for ARMv7 binaries"},{"body":"The idea for this is to be able to generate search patterns out of a format string, knowing a struct definition we want to know how that will look in binary form to search that pattern.\r\n\r\nFor example in MBN:\r\n\r\n```c\r\nstruct mipi_dsi_cmd {\r\nÂ  int size;\r\nÂ  char *payload;\r\n  int pad;\r\n};\r\n...\r\n\r\nstatic struct mipi_dsi_cmd nt35521_wxga_video_on_command[] = {\r\n\t{0xc, nt35521_wxga_video_on_cmd0, 0x00},\r\n\t{0x8, nt35521_wxga_video_on_cmd1, 0x00},\r\n\t{0x8, nt35521_wxga_video_on_cmd2, 0x00},\r\n\t{0x8, nt35521_wxga_video_on_cmd3, 0x00},\r\n\r\n```\r\n\r\nThere for we want to do something like this to search for this:\r\n\r\n```\r\npfi 3xxx 0xc ? 0 8 ? 0 8 ? 0\r\n```\r\n\r\nideally it will be great to define some more conditions like 2nd dword to be in a range, etc.\r\n\r\nthis can be done if we generate an esil expression out of the format string\r\n\r\nand end up generating something like this:\r\n\r\n```\r\n/x 0c000000........0000000008000000........00000000\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3NjIzMzQ3OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"pun on search.align=4","createdAt":"2019-03-25T14:55:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13505#issuecomment-476233478","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NjQ3NzU1MA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Kind of similar/related to https://github.com/radare/radare2/issues/8482","createdAt":"2019-03-26T05:08:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13505#issuecomment-476477550","viewerDidAuthor":false}],"number":13505,"title":"Implement reverse print format"},{"body":"Mainly in loops, reducing the amount of hashtable resolutions will improve performance","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU0MTY2OTExNw==","author":{"login":"Gaurav-Punjabi"},"authorAssociation":"NONE","body":"Hey, I would like to solve this issue.\r\nBut can you give me a little more details on the issue?","createdAt":"2019-10-14T13:11:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13499#issuecomment-541669117","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0MTc1MTk2Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"add a printf in the r_config_get function and try to find places where it is called many times unnecesarily a lot of times, like inside loops and such, then move those outside the loops and get some small performance boost in exchange\n\n> On 14 Oct 2019, at 15:11, Gaurav Punjabi <notifications@github.com> wrote:\n> \n> Hey, I would like to solve this issue.\n> But can you give me a little more details on the issue?\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/13499?email_source=notifications&email_token=AAG75FRYZPZIHHZZVU52CSLQORVZBA5CNFSM4HA2H73KYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEBETN7I#issuecomment-541669117>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FTOOABJQTRF5QVFJPDQORVZBANCNFSM4HA2H73A>.\n> \n\n","createdAt":"2019-10-14T15:36:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/13499#issuecomment-541751966","viewerDidAuthor":false}],"number":13499,"title":"Remove unnecessary calls to RConfig.get"},{"body":"There are many places where we are using r_core_cmd() instead of using the apis. we can make r2 faster by changing that","comments":[],"number":13498,"title":"Remove unnecessary calls to RCore.cmd"},{"body":"imho having pdc, pdd, pde... is something that doesnt escales. better just use pdd for everything and have a config var to select which decompiler to use\r\n\r\ncc @wargio @XVilka ","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3NTU4OTQ5MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"It was done on purpose to:\n\n- be able to check them at the same time\n- ability to have a different subcommands\n\nOn Fri, Mar 22, 2019, 6:37 PM radare <notifications@github.com> wrote:\n\n> imho having pdc, pdd, pde... is something that doesnt escales. better just\n> use pdd for everything and have a config var to select which decompiler to\n> use\n>\n> cc @wargio <https://github.com/wargio> @XVilka <https://github.com/XVilka>\n>\n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/radare/radare2/issues/13462>, or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAMZ_c7s4x-a9OMJ5Sotd0AcOOd9cR-Xks5vZLJ0gaJpZM4cDSK7>\n> .\n>\n","createdAt":"2019-03-22T11:42:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13462#issuecomment-475589491","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NTYwNDEzOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Its a bad design\n\n> On 22 Mar 2019, at 12:42, Anton Kochkov <notifications@github.com> wrote:\n> \n> It was done on purpose to:\n> \n> - be able to check them at the same time\n> - ability to have a different subcommands\n> \n> On Fri, Mar 22, 2019, 6:37 PM radare <notifications@github.com> wrote:\n> \n> > imho having pdc, pdd, pde... is something that doesnt escales. better just\n> > use pdd for everything and have a config var to select which decompiler to\n> > use\n> >\n> > cc @wargio <https://github.com/wargio> @XVilka <https://github.com/XVilka>\n> >\n> > â€”\n> > You are receiving this because you were mentioned.\n> > Reply to this email directly, view it on GitHub\n> > <https://github.com/radare/radare2/issues/13462>, or mute the thread\n> > <https://github.com/notifications/unsubscribe-auth/AAMZ_c7s4x-a9OMJ5Sotd0AcOOd9cR-Xks5vZLJ0gaJpZM4cDSK7>\n> > .\n> >\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-03-22T12:33:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/13462#issuecomment-475604139","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0MjAyNzAwNQ==","author":{"login":"unixfreaxjp"},"authorAssociation":"NONE","body":"Please don't kill `pdc` !! Considering `pdd` and `pdg` is not working in the BSD platforms.","createdAt":"2020-06-10T13:54:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13462#issuecomment-642027005","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0MjA5MjA2Mw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"the current approach to support decompilers doesn't scale for the following reason:\r\n\r\n* pdc is not available if `cmd.pdc` is defined, because `pdc` aims to be the generic command to run the selected decompiler.\r\n* decompiler adds a subcommand in `pd` (pdg, pdd, ..) which doesnt scales because there can be conflicts or problems when loading same plugin twice and such\r\n* Will be good to rename all those decompiler comma\r\n* There's no way to list all the decompilers loaded.\r\n* Decompiler plugins should be probably anal plugins instead of core ones. we can do that after the RArch refactoring is done\r\n\r\nI know pdc is a very hacky and inexact solution to get kind of decompiler output. and im aware it works better than r2dec and r2ghidra in some situations, and its shipped with r2 by default. which is imho very useful and i would like to keep it, but i would also like to implement it properly and fix the generic decompiler plugin interface instead of having to blindly add conflicting commands.","createdAt":"2020-06-10T15:40:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13462#issuecomment-642092063","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY0MjEwMjc3OA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I agree it is bad design, there should be a choice through a var. I would go though for a `RDecompilerPlugin`, at least for now, unless we realize there are many things in common with `RAnalPlugin` (but I don't think, as they do very different things).","createdAt":"2020-06-10T15:58:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13462#issuecomment-642102778","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0MjE2NDA3Mw==","author":{"login":"unixfreaxjp"},"authorAssociation":"NONE","body":">  would also like to implement it properly [..]\r\n\r\nOkay this gets TLDR (or TL;DR) then. \r\n\r\nWhen I was in r2con2018, in my talk about packers, I was using `pdd` for details in presentation, it was taken on my BSD box which run so well on daily uses. Several people who learned it, is now using the same approach as practical way dealing with packers.\r\n\r\nNow I can not compile `pdd` at all in any of my BSD, since somehow `duktape` burps errors all the time during compilation.  It made me sad, but okay, I still have `pdc` to help in its own way, and I also know it will take a long run to hope for `pdg` to support xBSD servers for extra adjustment in cpp matters. \r\n\r\nNow we also do not support x86_32 servers anymore, I am okay with it, since that was a commitment I offer for 2020,  and testing are on through the recent supported distributions. Even some instance are still in Intel32, I am not complaining.\r\n\r\nSo what I got in BSD is now only r2 with its built in `pdc` and I don't complain about that either, I don't shout out, and I keep on being silent and keep on battling malware with this setup. \r\n\r\nIf you in r2dev have decided to get rid of `pdc` and make it available in `r2pm` please, \"PLEASE!\" promise to make sure it will always run and always be supported if not gonna work in xBSD, too, since `pdc` is all that I got now, and `pdc` are on native systems (servers or embedded devices) to stop badness in internet.\r\n\r\nIf up to now I only talk about servers, remember about embedded cpu platforms with radare2 that natively has always been working so well with `pdc` intact. Please do understand how big the decision for putting this `pdc` aside, and are r2dev is ready to support `pdc` as plugin better than pre-compiled command.\r\n\r\nradare was in FreeBSD before in any distribution at all since 2011 as \"radar\" in BSD ports. I started to use \"radare\" since 2007. radare2 is still holding the motto of \"UNIX philosophy\" descendant from back then. \"UNIX\" â†this word, those are the representing the challenges to overcome.\r\n\r\nComputers are not merely desktops, there are people happily work with VT100 too with radare2. These people may know `pdc` before , maybe, they even know about you.  \r\n\r\nSo please, avoid \"prejudism\" with BSD users just maybe because there are any other dev intentions or few of you are using it. Instead please be more transparent about the dev road maps or hopes for your thoughts and expectations instead stripping us systematically from our important working tools. As one BSD and embedded practitioner who use radare2 I alsp tried very hard to contribute back to the community by all things I can too despite of my busy schedule in emergency centers, lectures and other researches. We believe in Open Source, more platform you have the stronger you are. ","createdAt":"2020-06-10T17:50:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13462#issuecomment-642164073","viewerDidAuthor":false}],"number":13462,"title":"Decompilers should be under pdd"},{"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nFor now both radare2 and cutter show every line with an \"absolute\" address. Sometimes it is unnecessary, but at the same time it would be nice to see the address of the function.\r\n<!-- A clear and concise description of what the problem is. Ex. I'm always frustrated when [...] -->\r\n\r\n**Describe the solution you'd like**\r\nI am often using Vim/NeoVim with a switch between absolute line numbering and relative one.\r\nAnd recently saw similar concept in [Verso](https://gitlab.com/p8n/verso) (Electron GUI for Panopticon).\r\n\r\n**Describe alternatives you've considered**\r\n\r\nIt might be useful also to disable addresses at all, keeping only at the basic block beginning or function beginning.\r\n\r\n**Additional context**\r\n[![image](https://user-images.githubusercontent.com/203261/54802600-ff1ec700-4ca6-11e9-926c-07b3050cd561.png)](https://gitlab.com/p8n/verso/raw/master/screenshot.png)\r\n![image](https://user-images.githubusercontent.com/203261/54802705-63418b00-4ca7-11e9-9c5c-8f17b8cb61c3.png)\r\n\r\nRelated issue in Cutter: https://github.com/radareorg/cutter/issues/1353","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3NTUyMjEyOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Asm.reloff\n\n> On 22 Mar 2019, at 06:38, Anton Kochkov <notifications@github.com> wrote:\n> \n> Is your feature request related to a problem? Please describe.\n> \n> For now both radare2 and cutter show every line with an \"absolute\" address. Sometimes it is unnecessary, but at the same time it would be nice to see the address of the function.\n> \n> Describe the solution you'd like\n> I am often using Vim/NeoVim with a switch between absolute line numbering and relative one.\n> And recently saw similar concept in Verso (Electron GUI for Panopticon).\n> \n> Describe alternatives you've considered\n> \n> It might be useful also to disable addresses at all, keeping only at the basic block beginning or function beginning.\n> \n> Additional context\n> \n> \n> \n> Related issue in Cutter: radareorg/cutter#1353\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-03-22T07:38:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13458#issuecomment-475522129","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NTUyNzUyMg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Ah, ok, then remove `name` part from `name+0x14`. I think it is unnecessary. ","createdAt":"2019-03-22T08:03:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13458#issuecomment-475527522","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NTU0ODIzMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"All yours. \n\n> On 22 Mar 2019, at 09:03, Anton Kochkov <notifications@github.com> wrote:\n> \n> Ah, ok, then remove name part from name+0x14. I think it is unnecessary.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-03-22T09:21:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13458#issuecomment-475548232","viewerDidAuthor":false}],"number":13458,"title":" Relative addresses in disassembly views"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 18.04 64 bit\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/64 .\r\n| r2 -v full output, **not truncated** (mandatory)     |  radare2 3.4.0-git 21228 @ linux-x86-64 git.3.3.0-203-gdc7abc8 commit: dc7abc87314c2d9565ee1333ef576897b3f91a07 build: 2019-03-19__19:34:08\r\n\r\n\r\n### Expected behavior\r\n\r\nNo difference when using `aslr=no` to `aslr=yes` and then reloading the binary with `ood` to debut it.\r\n\r\n### Actual behavior\r\n\r\nWhen disabling ASLR, reloading the target binary with `ood` breaks things, and its not possible to debug anymore.\r\n\r\nDebugging a binary without `-R aslr=no`, it is possible to reload/restart the binary with `ood`. Here we have three successfull invocations: \r\n```\r\nroot@ubuntu-1804:~/yookiterm-challenges-files/challenge11# r2 -A -d challenge11 asdf asdf -a x86 -b32\r\nProcess with PID 6854 started...\r\n= attach 6854 6854\r\nbin.baddr 0x00010000\r\nUsing 0x10000\r\nasm.bits 32\r\nglibc.fc_offset = 0x00148\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[TOFIX: aaft can't run in debugger mode.ions (aaft)\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\n -- Hang in there, Baby!\r\n[0xf7f2c0b0]> dc\r\nHello cmd-asdf.\r\nYou are not admin.\r\nisAdmin: 0x0\r\n\r\n[0xf7f29fe9]> ood asdf asdf\r\nWait event received by different pid 6854\r\nProcess with PID 6855 started...\r\nFile dbg:///root/yookiterm-challenges-files/challenge11/challenge11  asdf asdf reopened in read-write mode\r\n= attach 6855 6855\r\nUnable to find filedescriptor 3\r\nUnable to find filedescriptor 3\r\nptrace (PT_ATTACH): Operation not permitted\r\n6855\r\n[0xf7f5f0b0]> dc\r\nHello cmd-asdf.\r\nYou are not admin.\r\nisAdmin: 0x0\r\n\r\n[0xf7f5cfe9]> ood asdf asdf\r\nWait event received by different pid 6855\r\nProcess with PID 6856 started...\r\nFile dbg:///root/yookiterm-challenges-files/challenge11/challenge11  asdf asdf reopened in read-write mode\r\n= attach 6856 6856\r\nUnable to find filedescriptor 3\r\nUnable to find filedescriptor 5\r\nUnable to find filedescriptor 3\r\nUnable to find filedescriptor 5\r\nptrace (PT_ATTACH): Operation not permitted\r\n6856\r\n[0xf7f520b0]> dc\r\nHello cmd-asdf.\r\nYou are not admin.\r\nisAdmin: 0x0\r\n```\r\n\r\nWith  `-R aslr=no` and reloading the target binary with `ood`, the reloading process breaks: \r\n```\r\noot@ubuntu-1804:~/yookiterm-challenges-files/challenge11# r2 -A -d challenge11 asdf asdf -R aslr=no -a x86 -b32\r\nProcess with PID 6859 started...\r\n= attach 6859 6859\r\nbin.baddr 0x00010000\r\nUsing 0x10000\r\nasm.bits 32\r\nglibc.fc_offset = 0x00148\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[TOFIX: aaft can't run in debugger mode.ions (aaft)\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\n -- SHALL WE PLAY A GAME?\r\n[0xf7fd50b0]> dc\r\nHello cmd-asdf.\r\nYou are not admin.\r\nisAdmin: 0x0\r\n\r\n[0xf7fd2fe9]> ood asdf asdf\r\nWait event received by different pid 6859\r\nCan't find profile '/tmp/.rarun2.5c9134a9d546d'\r\nFile dbg:///root/yookiterm-challenges-files/challenge11/challenge11  asdf asdf reopened in read-write mode\r\n= attach 6860 6860\r\nCan't find profile '/tmp/.rarun2.5c9134a9d546d'\r\nCannot open '/proc/6860/maps': No such file or directory\r\nUnable to find filedescriptor 3\r\nUnable to find filedescriptor 6\r\nUnable to find filedescriptor 3\r\nUnable to find filedescriptor 6\r\nCannot open '/proc/6860/maps': No such file or directory\r\n6860\r\n[0x00000000]> dc\r\nCannot continue, run ood?\r\n\r\n\r\n[0x00000000]> ood bla blubb\r\nCan't find profile '/tmp/.rarun2.5c9134a9d546d'\r\nFile dbg://dbg:///root/yookiterm-challenges-files/challenge11/challenge11\\ \\ asdf\\ asdf  bla blubb reopened in read-write mode\r\n= attach 6862 6862\r\nCan't find profile '/tmp/.rarun2.5c9134a9d546d'\r\nCannot open '/proc/6862/maps': No such file or directory\r\nUnable to find filedescriptor 3\r\nUnable to find filedescriptor 5\r\nUnable to find filedescriptor 6\r\nUnable to find filedescriptor 7\r\nUnable to find filedescriptor 3\r\nUnable to find filedescriptor 5\r\nUnable to find filedescriptor 6\r\nUnable to find filedescriptor 7\r\nCannot open '/proc/6862/maps': No such file or directory\r\n6862\r\n[0x00000000]> dc\r\nCannot continue, run ood?\r\n```\r\n\r\nI tested the target binary in both x32 and x64, in a LXC container and in a VM. \r\n\r\nEdit: Some small fixes in sentences.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3NDU2Nzc2Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Also dont pass r2 args after the program name\n\n> On 19 Mar 2019, at 19:39, Dobin Rutishauser <notifications@github.com> wrote:\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tUbuntu 18.04 64 bit\n> File format of the file you reverse (mandatory)\tELF\n> Architecture/bits of the file (mandatory)\tx86/64 .\n> r2 -v full output, not truncated (mandatory)\tradare2 3.4.0-git 21228 @ linux-x86-64 git.3.3.0-203-gdc7abc8 commit: dc7abc8 build: 2019-03-19__19:34:08\n> Expected behavior\n> \n> No difference when using aslr=no to aslr=yes when debugging.\n> \n> Actual behavior\n> \n> When disabling ASLR, reloading the target binary with ood breaks things, and its not possible to debug anymore.\n> \n> Debugging a binary without -R aslr=no, it is possible to reload/restart the binary with ood. Here we have three successfull invocations:\n> \n> root@ubuntu-1804:~/yookiterm-challenges-files/challenge11# r2 -A -d challenge11 asdf asdf -a x86 -b32\n> Process with PID 6854 started...\n> = attach 6854 6854\n> bin.baddr 0x00010000\n> Using 0x10000\n> asm.bits 32\n> glibc.fc_offset = 0x00148\n> [x] Analyze all flags starting with sym. and entry0 (aa)\n> [x] Analyze function calls (aac)\n> [x] Analyze len bytes of instructions for references (aar)\n> [TOFIX: aaft can't run in debugger mode.ions (aaft)\n> [x] Type matching analysis for all functions (aaft)\n> [x] Use -AA or aaaa to perform additional experimental analysis.\n>  -- Hang in there, Baby!\n> [0xf7f2c0b0]> dc\n> Hello cmd-asdf.\n> You are not admin.\n> isAdmin: 0x0\n> \n> [0xf7f29fe9]> ood asdf asdf\n> Wait event received by different pid 6854\n> Process with PID 6855 started...\n> File dbg:///root/yookiterm-challenges-files/challenge11/challenge11  asdf asdf reopened in read-write mode\n> = attach 6855 6855\n> Unable to find filedescriptor 3\n> Unable to find filedescriptor 3\n> ptrace (PT_ATTACH): Operation not permitted\n> 6855\n> [0xf7f5f0b0]> dc\n> Hello cmd-asdf.\n> You are not admin.\n> isAdmin: 0x0\n> \n> [0xf7f5cfe9]> ood asdf asdf\n> Wait event received by different pid 6855\n> Process with PID 6856 started...\n> File dbg:///root/yookiterm-challenges-files/challenge11/challenge11  asdf asdf reopened in read-write mode\n> = attach 6856 6856\n> Unable to find filedescriptor 3\n> Unable to find filedescriptor 5\n> Unable to find filedescriptor 3\n> Unable to find filedescriptor 5\n> ptrace (PT_ATTACH): Operation not permitted\n> 6856\n> [0xf7f520b0]> dc\n> Hello cmd-asdf.\n> You are not admin.\n> isAdmin: 0x0\n> With -R aslr=no and reloading the target binary with ood does not work when reloaded with ood:\n> \n> oot@ubuntu-1804:~/yookiterm-challenges-files/challenge11# r2 -A -d challenge11 asdf asdf -R aslr=no -a x86 -b32\n> Process with PID 6859 started...\n> = attach 6859 6859\n> bin.baddr 0x00010000\n> Using 0x10000\n> asm.bits 32\n> glibc.fc_offset = 0x00148\n> [x] Analyze all flags starting with sym. and entry0 (aa)\n> [x] Analyze function calls (aac)\n> [x] Analyze len bytes of instructions for references (aar)\n> [TOFIX: aaft can't run in debugger mode.ions (aaft)\n> [x] Type matching analysis for all functions (aaft)\n> [x] Use -AA or aaaa to perform additional experimental analysis.\n>  -- SHALL WE PLAY A GAME?\n> [0xf7fd50b0]> dc\n> Hello cmd-asdf.\n> You are not admin.\n> isAdmin: 0x0\n> \n> [0xf7fd2fe9]> ood asdf asdf\n> Wait event received by different pid 6859\n> Can't find profile '/tmp/.rarun2.5c9134a9d546d'\n> File dbg:///root/yookiterm-challenges-files/challenge11/challenge11  asdf asdf reopened in read-write mode\n> = attach 6860 6860\n> Can't find profile '/tmp/.rarun2.5c9134a9d546d'\n> Cannot open '/proc/6860/maps': No such file or directory\n> Unable to find filedescriptor 3\n> Unable to find filedescriptor 6\n> Unable to find filedescriptor 3\n> Unable to find filedescriptor 6\n> Cannot open '/proc/6860/maps': No such file or directory\n> 6860\n> [0x00000000]> dc\n> Cannot continue, run ood?\n> \n> \n> [0x00000000]> ood bla blubb\n> Can't find profile '/tmp/.rarun2.5c9134a9d546d'\n> File dbg://dbg:///root/yookiterm-challenges-files/challenge11/challenge11\\ \\ asdf\\ asdf  bla blubb reopened in read-write mode\n> = attach 6862 6862\n> Can't find profile '/tmp/.rarun2.5c9134a9d546d'\n> Cannot open '/proc/6862/maps': No such file or directory\n> Unable to find filedescriptor 3\n> Unable to find filedescriptor 5\n> Unable to find filedescriptor 6\n> Unable to find filedescriptor 7\n> Unable to find filedescriptor 3\n> Unable to find filedescriptor 5\n> Unable to find filedescriptor 6\n> Unable to find filedescriptor 7\n> Cannot open '/proc/6862/maps': No such file or directory\n> 6862\n> [0x00000000]> dc\n> Cannot continue, run ood?\n> I tested the target binary in both x32 and x64, in a LXC container and in a VM.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-03-19T20:25:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13439#issuecomment-474567767","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NDU4ODg2NA==","author":{"login":"dobin"},"authorAssociation":"NONE","body":"makes sense. doesnt fix the problem though: \r\n\r\n```\r\nroot@yookiterm-dev:~/Repos/yookiterm-challenges-files/challenge11# r2 -A -R aslr=no -a x86 -b32 -d challenge11 asdf asdf\r\nFailed to set RVA\r\nProcess with PID 26324 started...\r\n= attach 26324 26324\r\nbin.baddr 0x08048000\r\nUsing 0x8048000\r\nasm.bits 32\r\nglibc.fc_offset = 0x00148\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[TOFIX: aaft can't run in debugger mode.ions (aaft)\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\n -- r2 is a great OS, but a terrible hex editor\r\n[0xf7fd9a20]> dc\r\nHello cmd-asdf.\r\nYou are not admin.\r\nisAdmin: 0x0\r\n\r\n[0xf7fd7fe9]> ood\r\nWait event received by different pid 26324\r\nCan't find profile '/tmp/.rarun2.5c915c376e656'\r\nFile dbg:///home/dobin/Repos/yookiterm-challenges-files/challenge11/challenge11  reopened in read-write mode\r\n= attach 26325 26325\r\nCan't find profile '/tmp/.rarun2.5c915c376e656'\r\nCannot open '/proc/26325/maps': No such file or directory\r\nUnable to find filedescriptor 3\r\nUnable to find filedescriptor 6\r\nUnable to find filedescriptor 3\r\nUnable to find filedescriptor 6\r\nCannot open '/proc/26325/maps': No such file or directory\r\n26325\r\n[0x00000000]> dc\r\nCannot continue, run ood?\r\n\r\n[0x00000000]> ood asdf asdf\r\nCan't find profile '/tmp/.rarun2.5c915c376e656'\r\nFile dbg://dbg:///home/dobin/Repos/yookiterm-challenges-files/challenge11/challenge11\\   asdf asdf reopened in read-write mode\r\n= attach 26327 26327\r\nCan't find profile '/tmp/.rarun2.5c915c376e656'\r\nCannot open '/proc/26327/maps': No such file or directory\r\nUnable to find filedescriptor 3\r\nUnable to find filedescriptor 5\r\nUnable to find filedescriptor 6\r\nUnable to find filedescriptor 7\r\nUnable to find filedescriptor 3\r\nUnable to find filedescriptor 5\r\nUnable to find filedescriptor 6\r\nUnable to find filedescriptor 7\r\nCannot open '/proc/26327/maps': No such file or directory\r\n26327\r\n[0x00000000]> dc\r\nCannot continue, run ood?\r\n[0x00000000]>\r\n\r\n```","createdAt":"2019-03-19T21:19:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13439#issuecomment-474588864","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3ODA1MzI4NA==","author":{"login":"vergil-SI"},"authorAssociation":"NONE","body":"I'm seeing the same behavior.","createdAt":"2019-03-29T16:01:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13439#issuecomment-478053284","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3ODA1ODY4MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"works perfectly fine for me\n\n> On 29 Mar 2019, at 17:01, Vergil <notifications@github.com> wrote:\n> \n> I'm seeing the same behavior.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/13439#issuecomment-478053284>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lqkPHEcwBgurYMFjlEQ-NthzFx_Mks5vbjjSgaJpZM4b81_E>.\n> \n\n","createdAt":"2019-03-29T16:16:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13439#issuecomment-478058680","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs40kvjr","author":{"login":"StefanBruens"},"authorAssociation":"CONTRIBUTOR","body":"I hit the same problem - non-working:\r\n```\r\n> radare2 -R aslr=no -d /usr/bin/true\r\nProcess with PID 25150 started...\r\n= attach 25150 25150\r\nbin.baddr 0x555555554000\r\nUsing 0x555555554000\r\nasm.bits 64\r\n[0x7ffff7fce090]> ood\r\nchild received signal 9\r\nCan't find profile '/tmp/.rarun2.5c764aa8eb2f8'\r\nKilling child process 25181 due to an error\r\nCan't find profile '/tmp/.rarun2.5c764aa8eb2f8'\r\nKilling child process 25182 due to an error\r\n= attach 25150 25150\r\nptrace (PT_ATTACH): No such process\r\nptrace (PT_ATTACH): No such process\r\nptrace (PT_ATTACH): No such process\r\nptrace (PT_ATTACH): No such process\r\nptrace (PT_ATTACH): No such process\r\nr_core_file_reopen: Cannot reopen file: dbg:///usr/bin/true  with perms 0x7, attempting to open read-only.\r\nCannot open '/proc/25150/maps': No such file or directory\r\n25150\r\n```\r\n\r\nWorking:\r\n```\r\n> radare2 -d /usr/bin/true\r\nProcess with PID 24942 started...\r\n= attach 24942 24942\r\nbin.baddr 0x55f5e4f04000\r\nUsing 0x55f5e4f04000\r\nasm.bits 64\r\n[0x7f01497dd090]> ood\r\nchild received signal 9\r\nProcess with PID 24958 started...\r\n= attach 24958 24958\r\nFile dbg:///usr/bin/true  reopened in read-write mode\r\n24958\r\n[0x7fd45cb4a090]> ood\r\nchild received signal 9\r\nProcess with PID 24974 started...\r\n= attach 24974 24974\r\nFile dbg:///usr/bin/true  reopened in read-write mode\r\n24974\r\n[0x7f2e061bd090]> q\r\n```","createdAt":"2021-07-18T12:11:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13439#issuecomment-882047211","viewerDidAuthor":false}],"number":13439,"title":"aslr=no makes ood stop working"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 18.04 64 bit\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/64 .\r\n| r2 -v full output, **not truncated** (mandatory)     |  radare2 3.4.0-git 21157 @ linux-x86-64 git.3.3.0-162-g3f118abde commit: 3f118abdee19a6379d78cf6b0c8dedf2f7a1958f build: 2019-03-16__13:03:56\r\n\r\n\r\n### Expected behavior\r\n\r\nI can set two arguments, the first one containing the content of a file by executing `cat`, which is shellcode, without losing the 2nd argument. \r\n\r\n### Actual behavior\r\n\r\nWhen using my shellcode as first parameter, the second parameter seems to disappear. \r\n\r\nContent of files:\r\n```\r\nroot@ubuntu-1804:~/yookiterm-challenges-files/challenge11# hexdump -C f.txt\r\n00000000  62 6c 61 20 62 6c 61                              |bla bla|\r\n00000007\r\n\r\n\r\nroot@ubuntu-1804:~/yookiterm-challenges-files/challenge11# hexdump -C file.txt\r\n00000000  90 90 90 90 90 90 90 90  90 90 90 90 90 90 90 90  |................|\r\n*\r\n00000020  90 90 90 90 90 90 90 90  90 31 c0 50 68 2f 2f 73  |.........1.Ph//s|\r\n00000030  68 68 2f 62 69 6e 89 e3  50 53 89 e1 b0 0b cd 80  |hh/bin..PS......|\r\n00000040  41 41 41 41 41 41 41 41  41 41 41 41 7e d6 eb ff  |AAAAAAAAAAAA~...|\r\n00000050\r\n```\r\n[r2testcase.zip](https://github.com/radare/radare2/files/2983420/r2testcase.zip)\r\n\r\nUsing the content of the file `f.txt` which is `bla bla` correctly sets the parameters: \r\n```\r\n[0xf7f89fe9]> ood \"`!cat f.txt`\" test\r\nWait event received by different pid 101383\r\nProcess with PID 101411 started...\r\nFile dbg:///root/yookiterm-challenges-files/challenge11/challenge11  \"bla bla\" test reopened in read-write mode\r\n```\r\nThe first argument is `bla bla`, the second one is `test`, which is correct. \r\n\r\nUsing the content of the file `file.txt`, which contains shellcode, will kill the second parameter `test`:\r\n```\r\n[0xf7ee90b0]> ood \"`!cat file.txt`\" test\r\nWait event received by different pid 101411\r\nProcess with PID 101424 started...\r\nFile dbg:///root/yookiterm-challenges-files/challenge11/challenge11  \"1Ph//shh/binPS\r\n                                                                                   _AAAAAAAAAAAA reopened in read-write mode\r\n= attach 101424 101424\r\n```\r\n\r\nAfter the \"AAAAAA\" filler of the shellcode, the second parameter `test` is nowhere to be found. The binary cannot be started, as it requires two arguments. \r\n\r\nNote that this works with GDB.\r\nSource Code, if relevant: https://github.com/dobin/yookiterm-challenges-files/tree/master/challenge11\r\n\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3NDM4OTEyMg==","author":{"login":"dobin"},"authorAssociation":"NONE","body":"The culprint is the character `\\x7e` which is `~`. ","createdAt":"2019-03-19T14:14:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13435#issuecomment-474389122","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NDQ3NTkxNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"quote the command to escape special chars\n\n> On 19 Mar 2019, at 15:14, Dobin Rutishauser <notifications@github.com> wrote:\n> \n> The culprint is the character \\x7e which is ~.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/13435#issuecomment-474389122>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lls1GI6xM5d-M-EyvEr-Qv0PHcvOks5vYPDYgaJpZM4b8Gk6>.\n> \n\n","createdAt":"2019-03-19T17:14:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13435#issuecomment-474475914","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NDUwNTg5Mg==","author":{"login":"dobin"},"authorAssociation":"NONE","body":"May you be more specific on how to quote (which meta character) and which part of the command to quote?\r\n\r\ni tried:\r\n```\r\nood \"`!cat file.txt`\" test\r\nood \"`!\"cat file.txt\"`\" test\r\nood `!\"cat file.txt\"` test\r\nood `\"!cat file.txt\"` test\r\nood `'!cat file.txt'` test\r\nood `!'cat file.txt'` test\r\n```\r\n","createdAt":"2019-03-19T18:11:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13435#issuecomment-474505892","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NDU4Njg3NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"In r2 thw quotes cover the whole command. Also cat is a native command in r2:\n\nTry: > â€œood `cat file.txt` testâ€\n\nAnother option is to use the dbg.profile and set a rarun file where you can define evrrything properly in a k=v file\n\n> On 19 Mar 2019, at 19:11, Dobin Rutishauser <notifications@github.com> wrote:\n> \n> May you be more specific on how to quote (which meta character) and which part of the command to quote?\n> \n> i tried:\n> \n> ood \"`!cat file.txt`\" test\n> ood \"`!\"cat file.txt\"`\" test\n> ood `!\"cat file.txt\"` test\n> ood `\"!cat file.txt\"` test\n> ood `'!cat file.txt'` test\n> ood `!'cat file.txt'` test\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-03-19T21:13:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13435#issuecomment-474586874","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NDU5MDk4OA==","author":{"login":"dobin"},"authorAssociation":"NONE","body":"Oh! Doesnt help, it will then not execute the stuff in the backticks: \r\n```\r\n[0xf7f160b0]> \"ood `cat file.txt` test\"\r\nWait event received by different pid 9755\r\nProcess with PID 9756 started...\r\n\r\nFile dbg:///root/yookiterm-challenges-files/challenge11/challenge11  `cat file.txt` test reopened in read-write mode\r\n\r\n= attach 9756 9756\r\nptrace (PT_ATTACH): Operation not permitted\r\n9756\r\n[0xf7fae0b0]> dc\r\nCall: /root/yookiterm-challenges-files/challenge11/challenge11 <name> <password>\r\n````\r\n\r\nI will try again with rarun","createdAt":"2019-03-19T21:26:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13435#issuecomment-474590988","viewerDidAuthor":false}],"number":13435,"title":"OOD: Argument Disappears"},{"body":"This is basically the same as -x but starting the shellcode pivoting the stack and filling it with the given buffer and start with return","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3NjEzMzE3Nw==","author":{"login":"scrapbird"},"authorAssociation":"CONTRIBUTOR","body":"I'll start working on this one this week if no one is already working on it?","createdAt":"2019-03-25T10:19:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13420#issuecomment-476133177","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NjE0NjA1MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i started to do it but i accidentally everything. So all yours\n\nthe main issue is that the ropchain trampoline must be wrtten ini assembly because ii didnt found a clean way to do it in C. so we must probably support major platforms here (x86, arm, mips...)\n\n> On 25 Mar 2019, at 11:19, Brenton Morris <notifications@github.com> wrote:\n> \n> I'll start working on this one this week if no one is already working on it?\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/13420#issuecomment-476133177>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lvcq2CJS3DV4ABXbHVv1hLFM1wDcks5vaKKegaJpZM4b5wqO>.\n> \n\n","createdAt":"2019-03-25T10:55:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13420#issuecomment-476146050","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NjM1OTMxOQ==","author":{"login":"scrapbird"},"authorAssociation":"CONTRIBUTOR","body":"Cool, should we assemble the trampoline just before running it so we aren't storing binary blobs in the code or is it fine to do so?","createdAt":"2019-03-25T20:14:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13420#issuecomment-476359319","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NjM3OTk4OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Just leal $1,%rsp;ret for x86 for example and pass the buffer generated by the user as an argument. Obviously there will be no gadgets ready to make that work but this is iutside the scope of this issue. The idea is to have an api to trigger the ropchain execution of a buffer. We can later use this from the debugger or by injecting r2 on any application\n\n> On 25 Mar 2019, at 21:14, Brenton Morris <notifications@github.com> wrote:\n> \n> Cool, should we assemble the trampoline just before running it so we aren't storing binary blobs in the code or is it fine to do so?\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-03-25T21:14:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13420#issuecomment-476379988","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwNjE1NTEyMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping","createdAt":"2020-03-30T18:07:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13420#issuecomment-606155121","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwNjI0MjMxMg==","author":{"login":"scrapbird"},"authorAssociation":"CONTRIBUTOR","body":"I think this was \"done\" (https://github.com/radareorg/radare2/pull/13609) but I hadn't tested on bsd systems. Seems there was some discussion around a fix for it here: https://github.com/radareorg/radare2/issues/15079 but it was then closed.","createdAt":"2020-03-30T20:50:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13420#issuecomment-606242312","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwNjUwMjQ1Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"May be worth adding one test at least\n\n> On 30 Mar 2020, at 22:50, Brenton Morris <notifications@github.com> wrote:\n> \n> ï»¿\n> I think this was \"done\" (#13609) but I hadn't tested on bsd systems. Seems there was some discussion around a fix for it here: #15079 but it was then closed.\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-03-31T09:17:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13420#issuecomment-606502453","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwNzU4MDA0Nw==","author":{"login":"scrapbird"},"authorAssociation":"CONTRIBUTOR","body":"I'll look at getting that done this week ðŸ‘\n\nOn Tue, Mar 31, 2020 at 10:18 PM radare <notifications@github.com> wrote:\n\n> May be worth adding one test at least\n>\n> > On 30 Mar 2020, at 22:50, Brenton Morris <notifications@github.com>\n> wrote:\n> >\n> > ï»¿\n> > I think this was \"done\" (#13609) but I hadn't tested on bsd systems.\n> Seems there was some discussion around a fix for it here: #15079 but it was\n> then closed.\n> >\n> > â€”\n> > You are receiving this because you authored the thread.\n> > Reply to this email directly, view it on GitHub, or unsubscribe.\n>\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/radareorg/radare2/issues/13420#issuecomment-606502453>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AAP3DBNGKUF4MGJQYVPM7C3RKGYNJANCNFSM4G7HBKHA>\n> .\n>\n","createdAt":"2020-04-02T02:08:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13420#issuecomment-607580047","viewerDidAuthor":false}],"number":13420,"title":"Implement ragg2 -X to execute a ropchain"},{"body":"* [ ] Use and update the stackptr value in bb->stackptr instead of computing it in disasm_stackptr.inc\r\n* [ ] Add a command to tweak this value `afbs`\r\n* [ ] Cleanup disasm_stackptr.inc and provide a cleaner API to perform recursive emulation and updates for a variety of things","comments":[],"number":13415,"title":"Improve stackptr"},{"body":"to control the x,y scroll position (instead of the core->offset)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3Mzc0NDEwNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"requires changes and discussion about the current use of the m and ' keys in graph","createdAt":"2019-03-18T02:07:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13411#issuecomment-473744105","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MTIyNzYzNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"thats a new feature, no bug fix, moving forward","createdAt":"2019-05-10T09:39:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13411#issuecomment-491227634","viewerDidAuthor":false}],"number":13411,"title":"Implement mX/'X in graph (like it's done in visual already"},{"body":"There are some things that will be interesting to have in the interactive graph view:\r\n\r\n* Scroll/seek to the first block (entry)\r\n* Iterate over all the blocks that have no out edges (end/exit nodes)\r\n* Iterate over all the blocks that have a jump back out edge (loops)\r\n* Iterate over all nodes that have more than 2 out-edges (jump tables)\r\n\r\nWe can probably show that in a list in the left side of the screen with \"points of interest\" for the current graph\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3MzcyNjk1NA==","author":{"login":"penthaapatel"},"authorAssociation":"NONE","body":"Hello! New contributor here. I would like to work on this issue. Should the features be added to libr/core/visual.c file? Can I get more guidance on how to proceed with adding these features?","createdAt":"2019-03-17T23:33:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13403#issuecomment-473726954","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3MzcyNzI2Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"the graph is implemented in libr/core/graph.c\n\nfirst we need to pick a key to open this bb summary list,  i would choose 'b' (as in browse)\n\ncheck for the swiitch chase that handles the keys. and add the 'case 'b':' line, then from there i would set a var to make that menu appear, and then when this mode is set check for jk to select each node of interest, and pressing enter or 'q' to quit this mode.\n\nif you have more questions about how to use rcons or so feel free to ask in here or github. but the best way to learn is to do. so all yours :)\n\n> On 18 Mar 2019, at 00:33, penthaapatel <notifications@github.com> wrote:\n> \n> Hello! New contributor here. I would like to work on this issue. Should the features be added to libr/core/visual.c file? Can I get more guidance on how to proceed with adding these features?\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/13403#issuecomment-473726954>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lmW7u5X8TkWPQ-4uij9lHwJatYDxks5vXtDYgaJpZM4b4UPh>.\n> \n\n","createdAt":"2019-03-17T23:37:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/13403#issuecomment-473727267","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NjEzOTgxNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"We shouhld first stsart implementing a verbose list of basic blocks in `afbl` with columns displaying amount of input/output edges so we can use ~$ for sorting them and use that from the vb +hud in an r2 oneliner to select the node. that should be enough for solving this problem in few lines","createdAt":"2019-03-25T10:38:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13403#issuecomment-476139815","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3ODA1MjU2MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i did last week the 'b' handling in graph, so we can consider this issue is \"solved\" but we need to implement the afbl command, which is pretty easy to do","createdAt":"2019-03-29T15:59:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13403#issuecomment-478052560","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDgxMzg4NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i did some work on this with the `i` and `I` keys. as long as i got 0 feedback ill move to 3.6","createdAt":"2019-05-09T08:42:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13403#issuecomment-490813884","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwMjYwOTExMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@Vane11ope maybe related to panels to improve graph navigation support in there? any comments here?","createdAt":"2019-06-17T09:33:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13403#issuecomment-502609111","viewerDidAuthor":false}],"number":13403,"title":"RFE: Graph navigation keys"},{"body":"#### Current behavior\r\n```\r\n$ r2 /bin/ls\r\n -- The '?' command can be used to evaluate math expressions. Like this: '? (0x34+22)*4'\r\n[0x00005ae0]> aa\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[0x00005ae0]> ood\r\nProcess with PID 10174 started...\r\nFile dbg:///usr/bin/ls  reopened in read-write mode\r\n= attach 10174 10174\r\nptrace (PT_ATTACH): Operation not permitted\r\n10174\r\n[0x7f125ad0c000]> dcu main\r\nContinue until 0x00004070 using 1 bpsize\r\nAUTHORS.md  configure\t       config-user.mk.acr  DEVELOPERS.md      Doxyfile\t Makefile\t    mk\t\t     plugins.def.cfg\t     plugins.nogpl.cfg\t       prefix\t     snapcraft.yaml\t    travis-script\r\nautogen.sh  configure.acr      CONTRIBUTING.md\t   doc\t\t      env.sh\t man\t\t    package.json     plugins.emscripten.cfg  plugins.static.cfg        radare2.spec  sys\t\t    Vagrantfile\r\nbinr\t    configure.hook     COPYING\t\t   Dockerfile\t      global.mk  meson.build\t    pkgcfg\t     plugins.ios.cfg\t     plugins.static.nogpl.cfg  README.md     t\t\t\t    Vagrantfile.sh\r\nbuild\t    configure-plugins  COPYING.LESSER\t   Dockerfile.travis  libr\t meson_options.txt  plugins.bin.cfg  plugins.ios-store.cfg   plugins.tiny.cfg\t       shlr\t     travis-extract-var.sh\r\n[0x7f125abbe956]> \r\n```\r\n\r\n#### Expected behavior\r\n```\r\n r2 /bin/ls\r\n -- Welcome back, lazy human!\r\n[0x00005ae0]> aa\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[0x00005ae0]> ood\r\nProcess with PID 10276 started...\r\nFile dbg:///usr/bin/ls  reopened in read-write mode\r\n= attach 10276 10276\r\nptrace (PT_ATTACH): Operation not permitted\r\n10276\r\n[0x7f123f21c000]> dcu main\r\nContinue until 0x5571f152b070 using 1 bpsize\r\nhit breakpoint at: 5571f152b070\r\n[0x5571f152b070]> \r\n```\r\n\r\nBy the way there is also a ptrace issue as you can see, I don't know why the error is printed while it seems to work.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3MzUxNDU1Mw==","author":{"login":"xarkes"},"authorAssociation":"CONTRIBUTOR","body":"This is also valid for breakpoints.\r\nIf you do `db main` and right after this type in `ood` because you need to restart the debugger, it will never break because the breakpoint is not remapped.\r\nThere is a WIP about this, but it only solves the breakpoints issue (not the flags, comments, etc.): https://github.com/radare/radare2/pull/12801","createdAt":"2019-03-16T09:22:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13390#issuecomment-473514553","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3MzY3MTE5OQ==","author":{"login":"fcasal"},"authorAssociation":"CONTRIBUTOR","body":"The flags are actually remapped. What is not remapped is analysis stuff:\r\n```\r\nmandlebro@manford:~/Documents/playground$ r2 -2 easypie \r\n -- Pass '-j' to rabin2 to get the information of the binary in JSON format.\r\n[0x000005e0]> aa\r\n[0x000005e0]> afl~main\r\n0x000005c0    1 6            sym.imp.__libc_start_main\r\n0x00000710    1 32           main\r\n[0x000005e0]> f~main\r\n0x000005c0 6 sym.imp.__libc_start_main\r\n0x00000710 32 main\r\n0x00000710 32 sym.main\r\n0x00201018 8 reloc.__libc_start_main\r\n[0x000005e0]> ood\r\n14163\r\n[0x7f16d41efc30]> afl~main\r\n0x000005c0    1 6            sym.imp.__libc_start_main\r\n0x00000710    1 32           main\r\n[0x7f16d41efc30]> f~main\r\n0x562ac33b4710 32 sym.main\r\n0x562ac33b4710 1 main\r\n```\r\n[easypie.zip](https://github.com/radare/radare2/files/2975271/easypie.zip)\r\n\r\n","createdAt":"2019-03-17T14:32:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13390#issuecomment-473671199","viewerDidAuthor":false}],"number":13390,"title":"Flags are not remapped on PIE binaries when debugging"},{"body":"It would be great if one could just analyze a program statically and put some breakpoint before actually starting the debugger.\r\n\r\n### Current behavior \r\n```\r\n[0x00004070]> db main\r\nCannot place a breakpoint on 0x00004070 unmapped memory.See e? dbg.bpinmaps\r\n```\r\n\r\n### Expected behavior\r\n```\r\n[0x00004070]> db main\r\n[0x00004070]> # breakpoint added for later use\r\n```\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3MzY3MDY5MA==","author":{"login":"fcasal"},"authorAssociation":"CONTRIBUTOR","body":"You can do this with `dbs main` ","createdAt":"2019-03-17T14:26:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13389#issuecomment-473670690","viewerDidAuthor":false}],"number":13389,"title":"Cannot add breakpoint when debugger is not started"},{"body":"PowerShell is very popular nowadays on Windows targets, it might be beneficial to reuse r2 JSON capabilities to integrate within it better.","comments":[],"number":13376,"title":"Better PowerShell integration on Windows targets"},{"body":"Based on http://musl.cc/\r\n\r\nWill help to find different bugs automatically","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3MjAwNjk5Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"u mean crosscompile? or run the suite too?\n\n> On 12 Mar 2019, at 13:36, Anton Kochkov <notifications@github.com> wrote:\n> \n> Based on http://musl.cc/ <http://musl.cc/>\n> Will help to find different bugs automatically\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/13358>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lnfiaPvURx3jfFda-dLQSBjQ_tQOks5vV59DgaJpZM4bqyx_>.\n> \n\n","createdAt":"2019-03-12T13:46:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13358#issuecomment-472006993","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3MjAxMTcwNA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Crosscompile and testsuite. Might be even debug tests. I bet a lot of code\ncontains invalid assumptions about platform it is running on.\n\nOn Tue, Mar 12, 2019, 9:46 PM radare <notifications@github.com> wrote:\n\n> u mean crosscompile? or run the suite too?\n>\n> > On 12 Mar 2019, at 13:36, Anton Kochkov <notifications@github.com>\n> wrote:\n> >\n> > Based on http://musl.cc/ <http://musl.cc/>\n> > Will help to find different bugs automatically\n> >\n> > â€”\n> > You are receiving this because you are subscribed to this thread.\n> > Reply to this email directly, view it on GitHub <\n> https://github.com/radare/radare2/issues/13358>, or mute the thread <\n> https://github.com/notifications/unsubscribe-auth/AA3-lnfiaPvURx3jfFda-dLQSBjQ_tQOks5vV59DgaJpZM4bqyx_\n> >.\n> >\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/radare/radare2/issues/13358#issuecomment-472006993>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAMZ_eqWGm_i4krgP8TKt21-toIuFhJPks5vV6-rgaJpZM4bqyx_>\n> .\n>\n","createdAt":"2019-03-12T13:58:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13358#issuecomment-472011704","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3MjAxODg1OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"the problem is not musl, but qemu-user to run all that stuff\n\n> On 12 Mar 2019, at 14:58, Anton Kochkov <notifications@github.com> wrote:\n> \n> Crosscompile and testsuite. Might be even debug tests. I bet a lot of code\n> contains invalid assumptions about platform it is running on.\n> \n> On Tue, Mar 12, 2019, 9:46 PM radare <notifications@github.com> wrote:\n> \n> > u mean crosscompile? or run the suite too?\n> >\n> > > On 12 Mar 2019, at 13:36, Anton Kochkov <notifications@github.com>\n> > wrote:\n> > >\n> > > Based on http://musl.cc/ <http://musl.cc/>\n> > > Will help to find different bugs automatically\n> > >\n> > > â€”\n> > > You are receiving this because you are subscribed to this thread.\n> > > Reply to this email directly, view it on GitHub <\n> > https://github.com/radare/radare2/issues/13358>, or mute the thread <\n> > https://github.com/notifications/unsubscribe-auth/AA3-lnfiaPvURx3jfFda-dLQSBjQ_tQOks5vV59DgaJpZM4bqyx_\n> > >.\n> > >\n> >\n> > â€”\n> > You are receiving this because you authored the thread.\n> > Reply to this email directly, view it on GitHub\n> > <https://github.com/radare/radare2/issues/13358#issuecomment-472006993>,\n> > or mute the thread\n> > <https://github.com/notifications/unsubscribe-auth/AAMZ_eqWGm_i4krgP8TKt21-toIuFhJPks5vV6-rgaJpZM4bqyx_>\n> > .\n> >\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/13358#issuecomment-472011704>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-luT5BDis6-ebXy2aE5glF40cBCwZks5vV7J3gaJpZM4bqyx_>.\n> \n\n","createdAt":"2019-03-12T14:16:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13358#issuecomment-472018858","viewerDidAuthor":false}],"number":13358,"title":"Multi-arch CI: MIPS, SH, RISCV, etc"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nModern distributions of GCC produce position-independent binaries in 32bit mode by default. It's implemented by calling a utility function like `__x86.get_pc_thunk.ax` which just returns the return address from the stack; then all the addressing is performed relatively to the obtained address. Radare2, however, doesn't recognize this pattern, so it's not easy to analyze even a simple helloworld statically:\r\n```\r\nâ”Œ (fcn) main 60\r\nâ”‚   int main (int argc, char **argv, char **envp);\r\nâ”‚           ; var int var_8h @ ebp-0x8\r\nâ”‚           ; arg int arg_4h @ esp+0x4\r\nâ”‚           0x00001199      8d4c2404       lea ecx, [arg_4h]\r\nâ”‚           0x0000119d      83e4f0         and esp, 0xfffffff0\r\nâ”‚           0x000011a0      ff71fc         push dword [ecx - 4]\r\nâ”‚           0x000011a3      55             push ebp\r\nâ”‚           0x000011a4      89e5           mov ebp, esp\r\nâ”‚           0x000011a6      53             push ebx\r\nâ”‚           0x000011a7      51             push ecx\r\nâ”‚           0x000011a8      e828000000     call sym.__x86.get_pc_thunk.ax\r\nâ”‚           0x000011ad      052b2e0000     add eax, 0x2e2b             ; '+.'\r\nâ”‚           0x000011b2      83ec0c         sub esp, 0xc\r\nâ”‚           0x000011b5      8d9030e0ffff   lea edx, [eax - 0x1fd0]\r\nâ”‚           0x000011bb      52             push edx                    ; const char *s\r\nâ”‚           0x000011bc      89c3           mov ebx, eax\r\nâ”‚           0x000011be      e86dfeffff     call sym.imp.puts           ; int puts(const char *s)\r\nâ”‚           0x000011c3      83c410         add esp, 0x10\r\nâ”‚           0x000011c6      b800000000     mov eax, 0\r\nâ”‚           0x000011cb      8d65f8         lea esp, [var_8h]\r\nâ”‚           0x000011ce      59             pop ecx\r\nâ”‚           0x000011cf      5b             pop ebx\r\nâ”‚           0x000011d0      5d             pop ebp\r\nâ”‚           0x000011d1      8d61fc         lea esp, [ecx - 4]\r\nâ””           0x000011d4      c3             ret\r\n```\r\n\r\nThe value of `edx` prior to `puts` call is always `str.Hello_World`, which is hard to see without debugging the program.\r\n\r\n**Describe the solution you'd like**\r\nThe `*get_pc_thunk*` family of functions (or maybe the pattern of returning the return address) could be treated in a special way, letting the analyzer know that they're used for EIP-relative addressing. It would let the analyzer resolve EIP-relative data references.\r\n\r\n**Describe alternatives you've considered**\r\nNone, it just could be a useful feature currently missing.\r\n\r\n**Additional context**\r\nHere's a screenshot of IDA, which recognizes the string literal (the offset of `str.Hello_World` is 0x2008):\r\n![ida sample](https://user-images.githubusercontent.com/1202012/54184085-d3d1f600-44b6-11e9-9b15-6c5c9d10653c.png)\r\n[The helloworld binary from the example](https://github.com/radare/radare2/files/2955726/hello.zip)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3MTkxMDYyMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i think there's an issue for that already, can be solved with emu.write and such, but i think the right solution would be to have a way to define functions as thunk or getpc, maybe we should have getsp attribute too. this way the analysis can be done easily without any need to emulate, the linear disasm may be able to handle this, as well as the analysis loop.\r\n\r\nrelated issues:\r\n\r\n* https://github.com/radare/radare2/issues/13110\r\n* https://github.com/radare/radare2/issues/12489\r\n* ...\r\n\r\ncan't find my issue but i recall opening the same issue several years ago","createdAt":"2019-03-12T08:52:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13356#issuecomment-471910621","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3MTkzNzUyOQ==","author":{"login":"loskutov"},"authorAssociation":"NONE","body":"#13110 doesn't seem to be related as it is about non-PIE binaries in which some string literals aren't long enough to be recognized as string literals, even if they're used as `char *` arguments in function calls","createdAt":"2019-03-12T10:11:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13356#issuecomment-471937529","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3MTkzNzk2OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"oh right 13110 is non-pie","createdAt":"2019-03-12T10:12:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13356#issuecomment-471937968","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3MTkzODM4MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"See those:\r\n\r\n* https://github.com/radare/radare2/issues/6283\r\n* https://github.com/radare/radare2/issues/8900\r\n","createdAt":"2019-03-12T10:13:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/13356#issuecomment-471938381","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0Mzc0MDQzNg==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"with aae:\r\n![Screenshot 2019-10-18 at 15 16 38](https://user-images.githubusercontent.com/1460997/67097469-77f0ed80-f1ba-11e9-9302-dbbc686e7ae7.png)\r\n","createdAt":"2019-10-18T13:18:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/13356#issuecomment-543740436","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcxNTM0NjQ1MQ==","author":{"login":"dkasak"},"authorAssociation":"NONE","body":"Just a FYI: `aae` changes nothing for me with a PIE ELF x32 binary with radare2 4.5.1","createdAt":"2020-10-23T13:38:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13356#issuecomment-715346451","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcxNTQxMjE4OQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"e emu.str=true","createdAt":"2020-10-23T15:27:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13356#issuecomment-715412189","viewerDidAuthor":true}],"number":13356,"title":"Resolve data relocations in 32bit position-independent binaries"},{"body":"And honor R_COLOR env var.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3MTc5NjY2Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"we should use rcons from libr_main to achieve this.\r\n\r\nOtherwise this may be tricky on windows, and may be problematic on tests if we enable colors by default... thoughs here?","createdAt":"2019-03-12T00:33:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13355#issuecomment-471796667","viewerDidAuthor":false}],"number":13355,"title":"Add colors in r2 -h commandline help messages"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nWhile high value of `asm.cmt.col` (say 70) improves a lot the readability of the disassembly, it causes the graph nodes to expand way too much.\r\n\r\nScreenshot from Cutter:\r\n![image](https://user-images.githubusercontent.com/20182642/54104673-67cd9000-43d9-11e9-838f-4757cca2980a.png)\r\n\r\n\r\n**Describe the solution you'd like**\r\nThere's a need for a new eval which will be `graph.cmt.col` to define the alignment of columns in Graph.\r\n\r\nThis should affect `ag`, `agj`, `agJ`, and any other graph command where `asm.cmt.col` is respected\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3MTQ0ODExNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"+1\n\n> On 11 Mar 2019, at 07:42, Itay Cohen <notifications@github.com> wrote:\n> \n> Is your feature request related to a problem? Please describe.\n> While high value of asm.cmt.col (say 70) improves a lot the readability of the disassembly, it causes the graph nodes to expand way too much.\n> \n> Screenshot from Cutter:\n> \n> \n> Describe the solution you'd like\n> There's a need for a new eval which will be graph.cmt.col to define the alignment of columns in Graph.\n> \n> This should affect ag, agj, agJ, and any other graph command where asm.cmt.col is respected\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-03-11T08:34:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13344#issuecomment-471448114","viewerDidAuthor":false}],"number":13344,"title":"Implement \"graph.cmt.col\" to align comments on graph"},{"body":"Use those binaries and improve r2 analysis in order to detect vulnerabilities and bugs in software by analyzing the code.\r\n\r\nWe can use those bins in the testsuite if we implement proper specific tests for them\r\n\r\nhttps://gtfobins.github.io","comments":[],"number":13320,"title":"Automatic vulnerability detection"},{"body":"A C/C++ libraries packager for Windows developers\r\n\r\nhttps://devblogs.microsoft.com/cppblog/vcpkg-a-tool-to-acquire-and-build-c-open-source-libraries-on-windows/\r\n\r\nhttps://github.com/Microsoft/vcpkg\r\n\r\nRelated to https://github.com/radare/radare2/issues/10137\r\n\r\nFor example see capstone in Vcpkg https://github.com/Microsoft/vcpkg/pull/5546\r\n\r\nShould be easy with AppVeyor https://www.appveyor.com/docs/lang/cpp/#vc-packaging-tool\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUzNjg4NDExMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See also:\r\n- https://vcpkg.readthedocs.io/en/latest/examples/packaging-zipfiles/\r\n- https://vcpkg.readthedocs.io/en/latest/examples/packaging-github-repos/\r\n\r\nA good example of such a port, that uses meson build system is fribidi: https://github.com/microsoft/vcpkg/tree/master/ports/fribidi\r\n\r\nP.S. see also [Frida request](https://github.com/microsoft/vcpkg/issues/7993).","createdAt":"2019-10-01T06:15:21Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/13318#issuecomment-536884111","viewerDidAuthor":false}],"number":13318,"title":"Publish radare2 in Vcpkg"},{"body":"otherwise we cant understand if its a ret, conditional jmp or wat\r\n\r\ncomments on this?\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3MDIwNjA1OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"![screenshot 2019-03-06 at 18 46 05](https://user-images.githubusercontent.com/917142/53901852-3868fd00-4040-11e9-8017-acfa55a4eb94.png)\r\n","createdAt":"2019-03-06T17:47:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13296#issuecomment-470206058","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3MDgwNDk0Mg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Agree. Or we can think on how to differentiate them without adding line with branching instruction.","createdAt":"2019-03-08T04:56:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13296#issuecomment-470804942","viewerDidAuthor":false}],"number":13296,"title":"pds graph should contain the branch instruction (and maybe conditional) of each bb"},{"body":"Like Ghidra does, but adding a counter of the amount of functions, adding keystrokes to fold/unfold etc, also this tree view will be useful for other situations\r\n\r\n![image 2019-03-06 17 56 08](https://user-images.githubusercontent.com/917142/53898815-1f108280-4039-11e9-8964-369ab2d224df.jpg)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUwMjU0MjQyMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@Vane11ope you might want to check this for panels.","createdAt":"2019-06-17T05:44:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13295#issuecomment-502542421","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwMjY0Mzc4NA==","author":{"login":"Vane11ope"},"authorAssociation":"CONTRIBUTOR","body":"ah ok :)","createdAt":"2019-06-17T11:26:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13295#issuecomment-502643784","viewerDidAuthor":false}],"number":13295,"title":"Enumerate/Group function list by offset with counter/..."},{"body":"The sample aims at breaking RE tools. Thus, IDA and r2 misbehave both. The binary is packed.\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             |  Ubuntu x64\r\n| File format of the file you reverse (mandatory)      |  ELF\r\n| Architecture/bits of the file (mandatory)            | ARM32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.3.0 21348 @ linux-x86-64 git.3.0.0-1208-gdd7a7c0b2 commit: dd7a7c0b2d02fe0dccce850f089064622d9488e8 build: 2019-02-25__16:27:59\r\n\r\n\r\n### Expected behavior\r\nIdentify strings and exports\r\n\r\n### Actual behavior\r\nExports and strings are empty\r\n```\r\n[0x00000000]> afl\r\n0x00000000    1 4            entry0\r\n0x0001dab8    1 8            fcn.0001dab8\r\n0x0001dbcc    1 24           fcn.0001dbcc\r\n0x0001dbf0    1 4            fcn.0001dbf0\r\n0x0001ed58    1 4            fcn.0001ed58\r\n0x0002d380    1 4            fcn.0002d380\r\n0x0002e9b0    1 12           fcn.0002e9b0\r\n0x00045ebc    1 4            fcn.00045ebc\r\n0x0004a2dc    1 36           fcn.0004a2dc\r\n0x0004a824    1 8            fcn.0004a824\r\n0x0004ab14    1 24           fcn.0004ab14\r\n0x0004cf2c    1 8            fcn.0004cf2c\r\n0x0004e30c    1 4            fcn.0004e30c\r\n0x00051d78    1 12           fcn.00051d78\r\n0x00053b00    1 12           fcn.00053b00\r\n[0x00000000]> izq\r\n\r\n[0x00000000]> iz\r\n[Strings]\r\nNum Paddr      Vaddr      Len Size Section  Type  String\r\n\r\n[0x00000000]> iE\r\n[Exports]\r\nNum Paddr      Vaddr      Bind     Type Size Name\r\n\r\n```\r\n### Steps to reproduce the behavior \r\n\r\n- Download the binary\r\n[sample.zip](https://github.com/radare/radare2/files/2931475/sample.zip)\r\n- Load it into r2\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\nIDA also gives some weird messages.\r\n![53726876-369c0f80-3e6f-11e9-8a79-80db7130469b](https://user-images.githubusercontent.com/14809754/53814237-89ed8b00-3f5f-11e9-983b-50956ff0335e.png)\r\n\r\nFurther info @ https://github.com/rednaga/APKiD/issues/147","comments":[],"number":13275,"title":"ELF format issues on ARM packed binaries"},{"body":"Like pdd* to import disasm output as comments, we need the offset where the line refers to","comments":[],"number":13257,"title":"Implement pdc*"},{"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\n**Describe the solution you'd like**\r\nBasically, it would be very helpful to have extra information (perhaps a different heap command) to show the heap layout. While there exists `dmh`, `dmhg`, `dmhm`, they show the chunks but not what bins they belong to and their linked order.\r\n\r\nAn example of how I'd like to be able to see it was implemented in ruby by david942j: https://github.com/david942j/heapinfo\r\n\r\nCheck out what it looks like in his `h.layouts` commands. They clearly show the layout of each bin including some details about the chunks inside the bin.\r\n\r\n**Describe alternatives you've considered**\r\nAs mentioned above, there is a ruby script that does this as an alternative.\r\n\r\n**Additional context**\r\nWhile the ruby example does it linearly, it could also be interesting to see it utilizing graph `dmhg` of some sort too.","comments":[],"number":13241,"title":"More granular heap information"},{"body":"```\r\n[0x1000011ec]> av?\r\nUsage: av[?jr*]   C++ vtables and RTTI\r\n| av                search for vtables in data sections and show results\r\n| avj               like av, but as json\r\n| av*               like av, but as r2 commands\r\n| avr[j@addr]       try to parse RTTI at vtable addr (see anal.cpp.abi)\r\n| avra[j]           search for vtables and try to parse RTTI at each of them\r\n| avrr              recover class info from all findable RTTI (see aC)\r\n| avrD [classname]  demangle a class name from RTTI\r\n[0x1000011ec]> aC\r\nUsage: aC[e] [addr-of-call] # analyze call args (aCe does esil emulation with abte)\r\n[0x1000011ec]>\r\n```\r\n\r\nnote the following:\r\n\r\n* [ ] avra should be renamed to aavt (analyze all virtual tables)\r\n* [ ] avrr may be renamed to aavr maybe :?\r\n* [x] the aC command reference is wrong, it is ac\r\n* [x] Is avra run from aaa? may we want to use the bin info for this?","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ2ODkwNTU5OA==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"\"aavt (analyze all virtual tables)\" is wrong, the command is about rtti, not just vtables, also it doesn't really analyze, it just reads data and prints it. Does that fit under aa? avrr does in any case though.","createdAt":"2019-03-02T09:54:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13229#issuecomment-468905598","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2ODkwNTY5OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"then i misunderstood. maybe is avrr the one that must be moved into aa? if those vtables thing are just printing commands why are they under analysis? PD: never used that","createdAt":"2019-03-02T09:55:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13229#issuecomment-468905698","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2ODkwNTkyNA==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"Well where would it fit other than anal? It's partially heuristic search and partially parsing data structures defined by C++ ABI.","createdAt":"2019-03-02T09:58:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13229#issuecomment-468905924","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2OTAwOTY1MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Is av* executed from aaa? Which are the requirements for it to work? Can you fix the aC help message?\n\n> On 2 Mar 2019, at 10:59, Florian MÃ¤rkl <notifications@github.com> wrote:\n> \n> Well where would it fit other than anal? It's partially heuristic search and partially parsing data structures defined by C++ ABI.\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-03-03T10:32:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13229#issuecomment-469009651","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2OTAxNDkyMQ==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"Right now there is nothing in aaa, but avrr is something could certainly be added. The requirement for it are xrefs for the vtable search (aar has to be executed before) and rtti in the binary. Maybe there should also be a fallback when there is no rtti, so it just detects vtables and adds classes for them.\r\n\r\nYes, I'll fix the help","createdAt":"2019-03-03T11:44:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13229#issuecomment-469014921","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2OTAxODk1OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Cc @maijin\n\nPls add this in aaa when it matters\n\n> On 3 Mar 2019, at 12:44, Florian MÃ¤rkl <notifications@github.com> wrote:\n> \n> Right now there is nothing in aaa, but avrr is something could certainly be added. The requirement for it are xrefs for the vtable search (aar has to be executed before) and rtti in the binary. Maybe there should also be a fallback when there is no rtti, so it just detects vtables and adds classes for them.\n> \n> Yes, I'll fix the help\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-03-03T12:38:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13229#issuecomment-469018958","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NTg3NDU5Mg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@thestr4ng3r Do you have an example of binary in r2r I can use to test the aaa integration?","createdAt":"2019-03-23T14:32:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13229#issuecomment-475874592","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NTg4ODgwMQ==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"Not in r2r, but you can try with this: [cpp_sample.exe.gz](https://github.com/radare/radare2/files/2999628/cpp_sample.exe.gz)\r\n","createdAt":"2019-03-23T17:27:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13229#issuecomment-475888801","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NTg4ODg3NA==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"Here's also the pdb for it: \r\n[cpp_sample.pdb.gz](https://github.com/radare/radare2/files/2999629/cpp_sample.pdb.gz)\r\n","createdAt":"2019-03-23T17:28:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13229#issuecomment-475888874","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NTkwNzU5Mw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@thestr4ng3r \r\n\r\n```\r\n[0x14000100f]> avrr\r\nNo virtual tables found\r\n```\r\n\r\nHuh?","createdAt":"2019-03-23T21:49:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13229#issuecomment-475907593","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NTkxMDIyNw==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"Needs aar first","createdAt":"2019-03-23T22:29:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13229#issuecomment-475910227","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NTkxMTE5MA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"ok great! ","createdAt":"2019-03-23T22:45:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13229#issuecomment-475911190","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NTkxNTYxNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@oddcoder ^ we need to know when an specific analysis has been run already because some depend on others like aao or avrr\n\n> On 23 Mar 2019, at 23:29, Florian MÃ¤rkl <notifications@github.com> wrote:\n> \n> Needs aar first\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-03-24T00:06:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13229#issuecomment-475915617","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzIxODA4NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@thestr4ng3r any comments on the other points?","createdAt":"2019-04-15T11:43:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13229#issuecomment-483218084","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzIxODk4Nw==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"The aC ref is fixed, for the rest my comments above are still valid","createdAt":"2019-04-15T11:47:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13229#issuecomment-483218987","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzM5MTUzMg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"I don't have any opinion on the renaming, won't have impact on the users I think because very few users know about it if not only core so feel free to go ahead :)","createdAt":"2019-04-15T19:45:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13229#issuecomment-483391532","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDgyOTI1NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"removing the milesstone, and imho few users know it because most ppl expect things that analyze the whole thing to be under `aa`. we can also add some alias commands instead of renaming, so not breaking things, what do u think?","createdAt":"2019-05-09T09:26:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13229#issuecomment-490829255","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDgzNzI1Mw==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"I don't think we need an alias for this. A fitting name would be `aavr`, but that kind of clashes with `aav`, so not too sure about it.","createdAt":"2019-05-09T09:50:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13229#issuecomment-490837253","viewerDidAuthor":false}],"number":13229,"title":"av changes"},{"body":"* [ ] Support syscall name/parameters resolution like its done in `as`\r\n* [ ] Handle tailcall function parameters\r\n* [ ] Implement aC* and aCj","comments":[],"number":13218,"title":"Improvements in aesou"},{"body":"Another cool use of ESIL can be to define a list of constants or values to follow during the emulation, any instruction messing with this value/pointer will be highlighted, and there must be a way to emulate the whole program and get a list of all the instructions that handled this value","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc0Mzk0Mjc3NQ==","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"Maybe this could be build on top of the dfg","createdAt":"2020-12-13T03:33:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13212#issuecomment-743942775","viewerDidAuthor":false}],"number":13212,"title":"ESIL follow constants"},{"body":"Using `e dbg.funcarg` and `Vpp` we can see the arguments being passed to a function but there is no any other way to do that and it's really important in scripting with r2pipe as an example.\r\nHope to see it soon as part of the `afv` family ","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU0NjczNzYzOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"see ` | aefa [addr]                emulate function to find out args in given or current offset`","createdAt":"2019-10-27T21:43:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13191#issuecomment-546737639","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0NjczNzc2Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"and suggest better appraoches or which commands and which output would you expect to get\r\n\r\nalso having json support ofr this will be nice\r\n\r\nmaybe one cool thing we can do is to run this command over all xrefs to a function to emulate all the functions that call it recursively and show its possible argument values . we will probably need a way to store and enumerate all the arg values from all the codepaths, this can be used as hints to imiprove analysis, and we can import those values from frida-trace, r2 debugger, emulation or any custom value specified by the user","createdAt":"2019-10-27T21:44:49Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13191#issuecomment-546737762","viewerDidAuthor":false}],"number":13191,"title":"Add command to print function passed arguments"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu x86 64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.3.0 1 @ linux-x86-64 git.3.3.0 commit: f7e1d66bf835d72be695b786e7a52224fa56833e build: 2019-02-23__02:55:31\r\n\r\n### Expected behavior\r\n`proj = angr.Project('/bin/true')` should hopefully be able to complete.\r\n\r\n### Actual behavior\r\nSome thread exception seems to happen when run from the r2 shell line. However, if I #!python and do it from there it works fine.\r\n\r\n### Steps to reproduce the behavior \r\nExample base:\r\n```\r\nimport r2lang\r\nimport sys\r\nimport angr, claripy\r\nfrom time import sleep\r\n\r\nclass R2Symbion(object):\r\n    def _call(self, s):\r\n        s = s.lower()\r\n\r\n        # Not for us\r\n        if not s.startswith('symb'):\r\n            return\r\n\r\n        print('doing it')\r\n        p = angr.Project(r2.cmdj('ij')['core']['file'])\r\n\r\n    def plugin(self, a):\r\n        return {\r\n            \"name\": \"R2Symbion\",\r\n            \"licence\": \"GPLv3\",\r\n            \"desc\": \"Integration plugin for angr Symbion.\",\r\n            \"call\": self._call,\r\n        }\r\n\r\nr2symb = R2Symbion()\r\nsuccess = r2lang.plugin(\"core\", r2symb.plugin)\r\n```\r\n\r\nThis gives an exception:\r\n- r2 -i ./base.py /bin/ls\r\n- symb # doesn't actually do anything\r\n- exit # Shows the thread error\r\n\r\n```\r\nException ignored in: <module 'threading' from '/usr/lib/python3.6/threading.py'>\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.6/threading.py\", line 1289, in _shutdown\r\n    assert tlock.locked()\r\nSystemError: <built-in method locked of _thread.lock object at 0x7fa0a989bd78> returned a result with an error set\r\n```\r\n\r\nHowever, this works\r\n- r2 -i ./base.py /bin/ls\r\n- #!python3\r\n- r2symb._call('symb')\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU4NzM3NTk4Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can you please try again","createdAt":"2020-02-18T09:56:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13181#issuecomment-587375982","viewerDidAuthor":false}],"number":13181,"title":"Thread lock exception in my attempted core plugin"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | VM Ubuntu 18 x64, 4Gb RAM\r\n| r2 -v full output, **not truncated** (mandatory)     | rradare2 3.3.0-git 21034 @ linux-x86-64 git.3.2.1-384-g2dc2de305 commit: 2dc2de305b980915548fcbd38895603bd3decff2 build: 2019-02-18__01:53:27\r\n\r\n```\r\n$ r2 -A /usr/lib/firefox/libxul.so\r\nWARNING: bin_strings buffer is too big (0x012ad527). Use -zzz or set bin.maxstrbuf (RABIN2_MAXSTRBUF) in r2 (rabin2)\r\nCannot compute hash\r\nCannot compute hash\r\noops\r\n[[anal.jmptbl] Missing predecesessor cjmp bb at 0x011bec83\r\n[anal.jmptbl] Missing predecesessor cjmp bb at 0x03622647\r\n[anal.jmptbl] Missing predecesessor cjmp bb at 0x036725b7\r\n[anal.jmptbl] Missing predecesessor cjmp bb at 0x022d0557\r\n[anal.jmptbl] Missing predecesessor cjmp bb at 0x03622637\r\n[anal.jmptbl] Missing predecesessor cjmp bb at 0x04905255\r\n[anal.jmptbl] Missing predecesessor cjmp bb at 0x037af4b7\r\n[anal.jmptbl] Missing predecesessor cjmp bb at 0x022d0547\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n...\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[Invalid asr shift of 58 at 0x3bc3d5bnctions (aaft)\r\nInvalid asr shift of 58 at 0x3bc3e25\r\nInvalid asr shift of 58 at 0x3bc3ebf\r\nInvalid asr shift of 58 at 0x3bc3f61\r\nInvalid asr shift of 58 at 0x3bc3ffb\r\nInvalid asr shift of 58 at 0x3bc40aa\r\nInvalid asr shift of 58 at 0x3bc375c\r\nInvalid asr shift of 58 at 0x3bc3889\r\nInvalid asr shift of 58 at 0x3bc390f\r\nInvalid asr shift of 58 at 0x3bc397c\r\nInvalid asr shift of 58 at 0x3bc3a59\r\nInvalid asr shift of 58 at 0x3bc3ac6\r\nInvalid asr shift of 58 at 0x3bc3b80\r\nInvalid asr shift of 58 at 0x3bc3bed\r\nInvalid asr shift of 58 at 0x3bc44e1\r\nInvalid asr shift of 58 at 0x3bc4bd4\r\nInvalid asr shift of 32 at 0x371cfa4\r\nInvalid asr shift of 46 at 0x371e281\r\nInvalid asr shift of 46 at 0x371e2df\r\nInvalid asr shift of 33 at 0x370511d\r\nInvalid asr shift of 35 at 0x36dfd1b\r\nInvalid asr shift of 46 at 0x36e2068\r\nInvalid asr shift of 32 at 0x36dbcf3\r\nInvalid asr shift of 36 at 0x36dbdb6\r\nKilled\r\n```\r\n\r\nAdditional info in https://github.com/radare/radare2/issues/6322 \r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ2NDg3NjM5OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"That's debian fault, there are kernel configuration options to disable this oomthing, but anyway, you should report this properly (use ldpreload or asan or strace) but provide us a proper backtrace with the offending line highlighted. I dont use debian so i cant reproduce.\n\n> On 18 Feb 2019, at 17:29, Boris Ryutin <notifications@github.com> wrote:\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tVM Ubuntu 18 x64, 4Gb RAM\n> r2 -v full output, not truncated (mandatory)\trradare2 3.3.0-git 21034 @ linux-x86-64 git.3.2.1-384-g2dc2de305\n> commit: 2dc2de3 <https://github.com/radare/radare2/commit/2dc2de305b980915548fcbd38895603bd3decff2> build: 2019-02-18__01:53:27\t\n> $ r2 -A /usr/lib/firefox/libxul.so\n> WARNING: bin_strings buffer is too big (0x012ad527). Use -zzz or set bin.maxstrbuf (RABIN2_MAXSTRBUF) in r2 (rabin2)\n> Cannot compute hash\n> Cannot compute hash\n> oops\n> [[anal.jmptbl] Missing predecesessor cjmp bb at 0x011bec83\n> [anal.jmptbl] Missing predecesessor cjmp bb at 0x03622647\n> [anal.jmptbl] Missing predecesessor cjmp bb at 0x036725b7\n> [anal.jmptbl] Missing predecesessor cjmp bb at 0x022d0557\n> [anal.jmptbl] Missing predecesessor cjmp bb at 0x03622637\n> [anal.jmptbl] Missing predecesessor cjmp bb at 0x04905255\n> [anal.jmptbl] Missing predecesessor cjmp bb at 0x037af4b7\n> [anal.jmptbl] Missing predecesessor cjmp bb at 0x022d0547\n> [x] Analyze all flags starting with sym. and entry0 (aa)\n> ...\n> [x] Analyze function calls (aac)\n> [x] Analyze len bytes of instructions for references (aar)\n> [Invalid asr shift of 58 at 0x3bc3d5bnctions (aaft)\n> Invalid asr shift of 58 at 0x3bc3e25\n> Invalid asr shift of 58 at 0x3bc3ebf\n> Invalid asr shift of 58 at 0x3bc3f61\n> Invalid asr shift of 58 at 0x3bc3ffb\n> Invalid asr shift of 58 at 0x3bc40aa\n> Invalid asr shift of 58 at 0x3bc375c\n> Invalid asr shift of 58 at 0x3bc3889\n> Invalid asr shift of 58 at 0x3bc390f\n> Invalid asr shift of 58 at 0x3bc397c\n> Invalid asr shift of 58 at 0x3bc3a59\n> Invalid asr shift of 58 at 0x3bc3ac6\n> Invalid asr shift of 58 at 0x3bc3b80\n> Invalid asr shift of 58 at 0x3bc3bed\n> Invalid asr shift of 58 at 0x3bc44e1\n> Invalid asr shift of 58 at 0x3bc4bd4\n> Invalid asr shift of 32 at 0x371cfa4\n> Invalid asr shift of 46 at 0x371e281\n> Invalid asr shift of 46 at 0x371e2df\n> Invalid asr shift of 33 at 0x370511d\n> Invalid asr shift of 35 at 0x36dfd1b\n> Invalid asr shift of 46 at 0x36e2068\n> Invalid asr shift of 32 at 0x36dbcf3\n> Invalid asr shift of 36 at 0x36dbdb6\n> Killed\n> Additional info in #6322 <https://github.com/radare/radare2/issues/6322>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/13143>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-loh8mUYCQilWXxnS-QkId5RmSjlUks5vOtUEgaJpZM4bBOiM>.\n> \n\n","createdAt":"2019-02-18T20:59:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13143#issuecomment-464876398","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NTExMzMzMQ==","author":{"login":"dukebarman"},"authorAssociation":"CONTRIBUTOR","body":"[strace.zip](https://github.com/radare/radare2/files/2879970/strace.zip)\r\n","createdAt":"2019-02-19T12:39:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13143#issuecomment-465113331","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NTE1MjEwMg==","author":{"login":"dukebarman"},"authorAssociation":"CONTRIBUTOR","body":"bt is empty in gdb session. How can I make asan build? (what options)","createdAt":"2019-02-19T14:34:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13143#issuecomment-465152102","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NTE1Mjg2Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"sys/asan.sh\n\n> On 19 Feb 2019, at 15:34, Boris Ryutin <notifications@github.com> wrote:\n> \n> bt is empty in gdb session. How can I make asan build? (what options)\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/13143#issuecomment-465152102>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lkhuBARbr38gBhoF-yNOegS40wxdks5vPAtugaJpZM4bBOiM>.\n> \n\n","createdAt":"2019-02-19T14:36:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13143#issuecomment-465152867","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NTE1MzMwMQ==","author":{"login":"dukebarman"},"authorAssociation":"CONTRIBUTOR","body":"@radare with default arguments?","createdAt":"2019-02-19T14:37:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13143#issuecomment-465153301","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NTE1MzUyOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"yes, no need to pass any option\n\n> On 19 Feb 2019, at 15:37, Boris Ryutin <notifications@github.com> wrote:\n> \n> @radare <https://github.com/radare> with default arguments?\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/13143#issuecomment-465153301>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-loLIKHU_85hEIozhbGK_r0U9Pa6zks5vPAwdgaJpZM4bBOiM>.\n> \n\n","createdAt":"2019-02-19T14:37:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13143#issuecomment-465153529","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NTE4MDYxNQ==","author":{"login":"dukebarman"},"authorAssociation":"CONTRIBUTOR","body":"asan build doesn't show another errors","createdAt":"2019-02-19T15:36:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13143#issuecomment-465180615","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NTE4MzI2OQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Does it show the stack trace when the program gets killed?","createdAt":"2019-02-19T15:41:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13143#issuecomment-465183269","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NTE4MzcyNQ==","author":{"login":"dukebarman"},"authorAssociation":"CONTRIBUTOR","body":"Nope","createdAt":"2019-02-19T15:42:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13143#issuecomment-465183725","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NTE4NDQyMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"thats why debian sucks so hard, the process is killed by the kernel, the debugger have no control in here, pls @ret2libc share your ldpreloaded lib so he can have an int3 when a big allocation happens\n\n> On 19 Feb 2019, at 16:41, Riccardo Schirone <notifications@github.com> wrote:\n> \n> Does it show the stack trace when the program gets killed?\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/13143#issuecomment-465183269>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-ln5n6qncC_BN_q3R-2D6tNFjz0ZOks5vPBs6gaJpZM4bBOiM>.\n> \n\n","createdAt":"2019-02-19T15:44:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13143#issuecomment-465184421","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NTE4OTc3NQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"This is not about a big malloc, but a series of relatively small mallocs, because the program keeps calling brk. If there was a big malloc it would have probably used `mmap` or a `sbrk` with a big difference between current and next brk value.","createdAt":"2019-02-19T15:55:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13143#issuecomment-465189775","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NDAzOTkzOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"is this bug still there? i think we fixed all those memory problems","createdAt":"2019-04-17T11:10:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13143#issuecomment-484039938","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NDA0MDM5NA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Well... I think the problem is still there, because r2 uses in general a lot of memory and on some machines with not a lot of ram r2 could be killed. That said.... at the moment and for some time I think there isn't much we can do.","createdAt":"2019-04-17T11:12:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13143#issuecomment-484040394","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NDA4NzAyMw==","author":{"login":"dukebarman"},"authorAssociation":"CONTRIBUTOR","body":"Yep, it was aborted again.","createdAt":"2019-04-17T13:21:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13143#issuecomment-484087023","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NDA5NjUzNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Fix it with hardware\n\n> On 17 Apr 2019, at 15:21, Boris Ryutin <notifications@github.com> wrote:\n> \n> Yep, it was aborted again.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-04-17T13:46:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13143#issuecomment-484096534","viewerDidAuthor":false}],"number":13143,"title":"Process r2 was stopped if machine hasn't enough memory"},{"body":"![screenshot 54](https://user-images.githubusercontent.com/35193320/52909118-9eb3f880-32a8-11e9-903f-2db74f2e5996.png)\r\n\r\nI donot know why the debugger does stops in the db or why i am unable to  set the breakpoint in the second time.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ2NDQ0NTM3OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Because of ood and aslr? \n\n> On 17 Feb 2019, at 07:10, Gowtham610 <notifications@github.com> wrote:\n> \n> \n> I donot know why the debugger does stops in the db or why i am unable to set the breakpoint in the second time.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-02-17T11:32:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13130#issuecomment-464445379","viewerDidAuthor":false}],"number":13130,"title":"break point is not working"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu x86 64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.3.0-git 105 @ linux-x86-64 git.3.3.0-git commit: a795cd647c64028137f77f0ad78719d768f7292a build: 2019-02-16__01:09:49\r\n\r\n### Expected behavior\r\n`r2.cmd('dc')` should return when it hits the hw watch point.\r\n\r\n### Actual behavior\r\n`r2.cmd('dc')` hangs indefinitely.\r\n\r\n### Steps to reproduce the behavior \r\n```python\r\nimport r2pipe\r\nr2 = r2pipe.open('known_values_x64',['-d'])\r\nr2.cmd('db 0x00401138')\r\nr2.cmd('dc')\r\nr2.cmd('dbw rbp-0xa w')\r\nr2.cmd('dc') # This will hang\r\n```\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\nSeems to work OK when the process it started from r2 console instead of directly from python..\r\n[known_values.zip](https://github.com/radare/radare2/files/2871537/known_values.zip)\r\n","comments":[],"number":13123,"title":"r2pipe hangs indefinitely on hardware watchpoint hit"},{"body":"Note: I am aware that issue will be something huge to do however I think it will be rewarding on the long term.\r\n\r\nThe feature I am proposing is restructuring the r_anal to be in the form of Analysis Manager/dispatcher. This is inspired by how LLVM manages code analysis:\r\n\r\nThe way analysis could work is by having Multiple analysis managers:-\r\n1- section/segment analysis manager (provides the analysis pass with raw stream of data) .\r\n2- executable analysis manager (provides the analysis pass with basic File executable).\r\n3- function analysis manager.\r\n4-basic block analysis manager.\r\n5- callgraph analysis manager. (provides analysis pass with callgraph information).\r\n\r\nAll analysis managers would the job of ordering analysis tasks in pipeline and executing them on lazy \r\n cached basis. The lazy analysis would make the analysis seam faster. (for example a function gets analyzed when it requested by `pdf` command or by another analysis pass).\r\n \r\nThis model will help writing more advanced analysis plugins (for example path sensitive data flow analysis that can be used to do more accurate type analysis) which would be hard at the moment.\r\n\r\nAlso when I was developer, it was very easy to write a new analysis feature that would introduce regressions, but using the new model it would be a bit harder to introduce regressions using new analysis since the results of each analysis pass won't be evaluated until it is explicitly requested plus it will be easier to unit test each analysis pass on its own.\r\n\r\nThe downside of this r_anal design is that it would make projects saving/restoring more complicated to design if we were to save the cached analysis results.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ2NDkxOTk4NQ==","author":{"login":"oddcoder"},"authorAssociation":"CONTRIBUTOR","body":"I got some unstructured thoughts so I am just putting them for future reference.\r\n\r\nThe thing that will be using analysis manager output will be basically the commands so for example in binary that holds couple of thousands of functions. functions will not be identified unless there was explicit call to `afl` for example: then function itself won't be analyzed unless there is explicit call to `pdf`\r\n\r\nBut that is not everything: other set of commands which allows editing the the executable can lead to invalidation of analysis results it will be tricky to do this one but for example if someone patched an instruction that is referenced by a function the cached analysis for that function should be discarded and should the user attempt a `pdf` for second time the analysis must be redone for that particular function. We can call these commands transformation commands (just like llvm did). one example of this types of commands will be the ` w[x] [str] [<file] [<<EOF] [@addr]` commands","createdAt":"2019-02-18T23:23:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13116#issuecomment-464919985","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NTMwOTg5Ng==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"So we discussed a bit and here are some more thoughts:\r\n\r\nOne major difficulty that llvm probably doesn't have is how to handle user-edited content.\r\nFor example: The user renames a variable inside a function, then overwrites an instruction of the function, which leads to a changed control flow. Intuitively, this would just invalidate the function. However it would be desirable to also keep the renamed variable.\r\nAnother example would be functions that are completely manually defined by the user by explicitly creating all basic blocks. How should functions like this be handled?\r\nThere are definitely solutions to these problems, but it's far from trivial.\r\n\r\nAlso, to really entirely replace the current analysis, this would require pretty much an almost complete rewrite of the current RAnal. Thus, the most practical approach is probably to have a variable like `anal.lazy` that can be toggled and to implement lazy analysis only for small portions of the data one after another.","createdAt":"2019-02-19T21:06:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13116#issuecomment-465309896","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NTMxMzc5Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Imho we should use more revents here and there and hook and unhook analysis features depending on them. This way the whole thing will be analyzed once and this can be done in any analysis command with the event hooks and launches the initial analysis command. I think this way we dont need to add. But right now im a bit busy and cant think the whole picture.\n\nSo i suggest opening a pad to define the requirements and steps to improve analysis. And the current commands dont conflict with this imho. Because we can implement this in a separate command or just hooking the events spitted by all the current commands that just use the anal api\n\n> On 19 Feb 2019, at 22:06, Florian MÃ¤rkl <notifications@github.com> wrote:\n> \n> So we discussed a bit and here are some more thoughts:\n> \n> One major difficulty that llvm probably doesn't have is how to handle user-edited content.\n> For example: The user renames a variable inside a function, then overwrites an instruction of the function, which leads to a changed control flow. Intuitively, this would just invalidate the function. However it would be desirable to also keep the renamed variable.\n> Another example would be functions that are completely manually defined by the user by explicitly creating all basic blocks. How should functions like this be handled?\n> There are definitely solutions to these problems, but it's far from trivial.\n> \n> Also, to really entirely replace the current analysis, this would require pretty much an almost complete rewrite of the current RAnal. Thus, the most practical approach is probably to have a variable like anal.lazy that can be toggled and to implement lazy analysis only for small portions of the data one after another.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-02-19T21:17:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13116#issuecomment-465313796","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NTYxMDQ0MA==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"+1 for REvent","createdAt":"2019-02-20T14:54:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13116#issuecomment-465610440","viewerDidAuthor":false}],"number":13116,"title":"Proposing r_anal lazy Analysis pipeline"},{"body":"\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu x64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.3.0-git 20877 @ linux-x86-64 git.3.2.1-358-gfb1b7fbc5<br>commit: fb1b7fbc565522c75ad18fc2aac526e7c056b12a build: 2019-02-14__23:06:00\r\n\r\n### Expected behavior\r\nConstants representing string literals are always detected as such in case they're passed as `const char *` arguments\r\n### Actual behavior\r\nThere are cases when short string literals are not recognized\r\n### Steps to reproduce the behavior\r\n```sh\r\n$ cat a.c\r\n#include <stdio.h>\r\n\r\nint main(void) {\r\n    int password;\r\n    scanf(\"%d\", &password);\r\n    if (password == 1337) {\r\n        puts(\"Congrats!\");\r\n    } else {\r\n        puts(\"Wrong!\");\r\n    }\r\n}\r\n$ gcc -m32 -fno-pic -no-pie a.c\r\n$ r2 -A a.out\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Constructing a function name for fcn.* and sym.func.* functions (aan)\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\n -- radare2 contributes to the One Byte Per Child foundation.\r\n[0x08049070]> pd 15 @ main\r\nâ”Œ (fcn) main 122\r\nâ”‚   int main (int argc, char **argv, char **envp);\r\nâ”‚           ; var int var_10h @ ebp-0x10\r\nâ”‚           ; var int canary @ ebp-0xc\r\nâ”‚           ; var int var_4h @ ebp-0x4\r\nâ”‚           ; arg int arg_4h @ esp+0x4\r\nâ”‚           ; DATA XREF from entry0 (0x8049096)\r\nâ”‚           0x08049182      8d4c2404       lea ecx, [arg_4h]           ; 4\r\nâ”‚           0x08049186      83e4f0         and esp, 0xfffffff0\r\nâ”‚           0x08049189      ff71fc         push dword [ecx - 4]\r\nâ”‚           0x0804918c      55             push ebp\r\nâ”‚           0x0804918d      89e5           mov ebp, esp\r\nâ”‚           0x0804918f      51             push ecx\r\nâ”‚           0x08049190      83ec14         sub esp, 0x14\r\nâ”‚           0x08049193      65a114000000   mov eax, dword gs:[0x14]    ; [0x14:4]=-1 ; 20\r\nâ”‚           0x08049199      8945f4         mov dword [canary], eax\r\nâ”‚           0x0804919c      31c0           xor eax, eax\r\nâ”‚           0x0804919e      83ec08         sub esp, 8\r\nâ”‚           0x080491a1      8d45f0         lea eax, [var_10h]\r\nâ”‚           0x080491a4      50             push eax\r\nâ”‚           0x080491a5      6808a00408     push 0x804a008              ; const char *format\r\nâ”‚           0x080491aa      e8b1feffff     call sym.imp.__isoc99_scanf ; int scanf(const char *format)\r\n[0x08049070]> ps @ 0x804a008\r\n%d\r\n```\r\nThe `push 0x804a008              ; const char *format` part looks strange: r2 knows it's `const char *format` but doesn't show the corresponding string literal.\r\nThe binary is also attached: [a.zip](https://github.com/radare/radare2/files/2867066/a.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ2MzkwNzUzOQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"For 0x804a008 it's likely because the string is too small, thus r2 discard it to avoid false positive","createdAt":"2019-02-15T05:01:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13110#issuecomment-463907539","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2MzkwODM5NQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Also, none of the other existing tools: binja, ida nor hopper does provide %d in their disassembly listing.","createdAt":"2019-02-15T05:06:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13110#issuecomment-463908395","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2MzkzMTIzNQ==","author":{"login":"loskutov"},"authorAssociation":"NONE","body":"However, it's passed to a function as a string so it probably makes sense to treat it as one no matter how much it looks like a string to the analyzer","createdAt":"2019-02-15T07:04:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13110#issuecomment-463931235","viewerDidAuthor":false}],"number":13110,"title":"Radare2 doesn't recognize short string literals"},{"body":"See `libr/core/anal_tp.c` - it has many unoptimized and insufficient things. Optimizing this code will improve readability and speed.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ2Mzk4NjQ3NQ==","author":{"login":""},"authorAssociation":"NONE","body":"Do you open issues just for opening issues? This issue is pointless, you just say \"hi! this code is ugly, bye!\"\r\nI mean we can open issues for each line....","createdAt":"2019-02-15T10:23:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13097#issuecomment-463986475","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2Mzk5MDU1OA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Yes, when I am feeling depressed and lonely I do that.\r\n\r\nP.S. This code is part of analysis loop and runs many times in the loop, so making it faster will improve the whole analysis speeds. And it is also is part of Types Analysis GSoC task, which I am mentor of. Thanks for caring though.","createdAt":"2019-02-15T10:34:06Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13097#issuecomment-463990558","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NDMwOTgzMw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Note that there are some remnants for `signed int` or `long int`. I think it should not substitute resulting types but rather use them from the beginning, at `shlr/tcc` stage.","createdAt":"2019-03-19T11:06:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13097#issuecomment-474309833","viewerDidAuthor":false}],"number":13097,"title":"Optimize typing and retyping code"},{"body":"The idea of IO windows is to create a layer on top of all the maps that restricts the access to invalid memory addresses. This is useful for a variety of situations:\r\n\r\n* gdb connection with weak server that crashes when accessing invalid memory, the user must provide safe ranges by hand or maybe load from maps if available\r\n* restrict the scope of the analysis to allow to run 'af' in a small portion of the binary without having to redo all the maps.\r\n\r\nCommand proposal:\r\n\r\n```\r\now $$ $$+32K\r\naf\r\now-\r\n```\r\n\r\nr_io_is_valid_address() should honor that, as well as all the io operations (read/write)\r\n\r\nas long as we will want to define multiple ranges we can do this in a single expression or multiple commands just one after the other, the ow-$$ command may be enough to delete the io window in the current address (same as 'as-'), the ow-* will remove them all","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ2MzQ0MDczMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cc @condret ","createdAt":"2019-02-14T01:00:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13092#issuecomment-463440733","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2MzUzNzgzMg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Isnt't the `map` concept already enough? Can't we get the valid maps from the gdb server and setup the maps in r2?","createdAt":"2019-02-14T08:30:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13092#issuecomment-463537832","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2MzU0NzQyMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"For GDB yes, using IO maps is probably better. Wouldn't solve the second case though.","createdAt":"2019-02-14T09:01:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13092#issuecomment-463547421","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2MzU1MjA3MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Read the issue description again.\n\nThe problem is not that maps is enough or not. The problem is that i dont want to remove and redo all the maps to just run a command in a specific region of memory ignoring the rest.\n\nThis is also important when having multiple bins loaded in memory.\n\n> On 14 Feb 2019, at 10:01, Anton Kochkov <notifications@github.com> wrote:\n> \n> For GDB yes, using IO maps is probably better. Wouldn't solve the second case though.\n> \n> â€”\n> You are receiving this because you were assigned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-02-14T09:16:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13092#issuecomment-463552070","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2OTg5OTIyMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Please suggest commands, options and other stuff. the self:// plugin can be used as inspiration","createdAt":"2019-03-05T23:19:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13092#issuecomment-469899222","viewerDidAuthor":false}],"number":13092,"title":"RFE: Implement IO window"},{"body":"Add another column in `vbt`","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ2MzE5NjUyNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Done in 2d40d74d680da19e07652d8d493c760fb9cf7395, but requires more work because right now its just a readonly hack, but enough for this release, the proper impl will require spaguetti or long refactoring","createdAt":"2019-02-13T13:20:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13060#issuecomment-463196527","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3ODAzODA3NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping @sivaramaaa ","createdAt":"2019-03-29T15:22:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13060#issuecomment-478038075","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3ODA1ODIyMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"moved to 3.5, lets focus on fixing the 9000 bugs in types first","createdAt":"2019-03-29T16:15:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13060#issuecomment-478058222","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3ODA2Mjc2OQ==","author":{"login":"sivaramaaa"},"authorAssociation":"CONTRIBUTOR","body":"Yes :)","createdAt":"2019-03-29T16:28:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13060#issuecomment-478062769","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MTI0MDY4NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping @sivaramaaa ","createdAt":"2019-04-09T12:59:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13060#issuecomment-481240685","viewerDidAuthor":false}],"number":13060,"title":"Visual browse calling conventions"},{"body":"","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ5NjI2ODE0OA==","author":{"login":"deepakchethan"},"authorAssociation":"CONTRIBUTOR","body":"@radare, Should it really return to the same seek? It has 5 Js and 4 Ks am I missing something","createdAt":"2019-05-27T17:08:39Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13059#issuecomment-496268148","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwOTMxNzA1Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Just tried to reproduce - it seems to work - if you omit last `J`, which is probably a typo. @radare are you sure it wasn't fixed already?","createdAt":"2019-07-08T17:23:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13059#issuecomment-509317056","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwOTkxOTgwMg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"It is fixed. Reopen if I am wrong.","createdAt":"2019-07-10T05:56:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13059#issuecomment-509919802","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxMDIxNzYzOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"No, this is not fixed yet","createdAt":"2019-07-10T20:32:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13059#issuecomment-510217639","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxMDIxODcyNA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"It is fixed it's because you forgot a K in the command","createdAt":"2019-07-10T20:35:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13059#issuecomment-510218724","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxMDIxODc4Nw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"try with \r\n`vJKJKJKJKJK`","createdAt":"2019-07-10T20:35:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13059#issuecomment-510218787","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxMDQ1NzI4NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"omg.. could u guise at least try the things instead of taking the title of the issue literally?\r\n\r\nthis bug is there, it has never been fixed or addressed and it must be fixed. so stop closing the issue.","createdAt":"2019-07-11T12:03:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13059#issuecomment-510457284","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxMDQ1NzM2OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i have updated the title just to clarify that stupid confussion","createdAt":"2019-07-11T12:03:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13059#issuecomment-510457368","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxMDQ2MDEzMg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"```\r\nr2 -\r\n[0x0000000]> vJKJKJKJKq\r\n[0x0000000]> s 100\r\n[0x0000064]> vJKJKJKJKq\r\n[0x0000064]>\r\n```\r\nSo bug is not present","createdAt":"2019-07-11T12:12:53Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13059#issuecomment-510460132","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxMDQ2MDYyMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Now do vKJKJKJ\n\nAND TRY OPENING A FILE . Otherwise theres no metadata, or code or unallocated regions so obv the bug doesnt happen\n\n> On 11 Jul 2019, at 14:12, Anton Kochkov <notifications@github.com> wrote:\n> \n> r2 -\n> [0x0000000]> vJKJKJKJKq\n> [0x0000000]>\n> ```\n> So bug is not present\n> â€”\n> You are receiving this because you modified the open/close state.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-07-11T12:14:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13059#issuecomment-510460620","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxMDQ2MTgwNg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"```\r\nr2 /bin/ls\r\n -- Interpret radare2 scripts with '. <path-to-script>'. Similar to the bash source alias command.\r\n[0x00006890]> aaa\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Check for objc references\r\n[x] Check for vtables\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\n[0x00006890]> vKJKJKJq\r\n[0x00006890]> vKJKJKJq\r\n[0x00006890]> \r\n```\r\nStill not reproducible.","createdAt":"2019-07-11T12:18:40Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13059#issuecomment-510461806","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxMDQ4OTI1NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i even did a video, it is\n\n> On 11 Jul 2019, at 14:29, Maijin <notifications@github.com> wrote:\n> \n> It's not reproducible @radare <https://github.com/radare> ...\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/13059?email_source=notifications&email_token=AAG75FQ3IGX6AONM4GSIGU3P64RS7A5CNFSM4GWY4V2KYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGODZWRJLA#issuecomment-510465196>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AAG75FW5FWXLFMS3LPMM7RDP64RS7ANCNFSM4GWY4V2A>.\n> \n\n","createdAt":"2019-07-11T13:38:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13059#issuecomment-510489254","viewerDidAuthor":false}],"number":13059,"title":"vJKJKJKJK should keep the same seek position"},{"body":"For some particular environment you want to select which plugins to select (e.g. nogpl plugins, make them all statically linked or shared, etc.)\r\n\r\n**Describe the solution you'd like**\r\nAdd meson options `static_asm_plugins`, `shared_asm_plugins`, `static_bin_plugins`, `shared_bin_plugins`, etc.\r\n\r\n**Describe alternatives you've considered**\r\nThe other solution could be to parse the existing plugins.cfg files, though this seems much less *mesonic* and more risky (those files are sh script files).\r\n\r\nAnother way could be to just add `static_plugins` and `shared_plugins`, though this way additional parsing needs to be done inside the meson.build, because the plugins would need to be specified like `io.shm`, `bin.elf`, etc.\r\n\r\n**Additional context**\r\nThis wll make it easier to fix https://github.com/radare/radare2/issues/11666 .","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYxNzgzMDg5NQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Removed milestone from this, as I doubt I will work on this any time soon.","createdAt":"2020-04-22T14:57:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13057#issuecomment-617830895","viewerDidAuthor":false}],"number":13057,"title":"RFE: support static/shared plugin selection in meson build system"},{"body":"Intel's i960 (or 80960) was a RISC-based microprocessor design that became popular during the early 1990s as an embedded microcontroller. It became a best-selling CPU in that segment, along with the competing AMD 29000.\r\n[BiiN_CPU_Architecture_Reference_Man_Jul88.pdf](https://github.com/radare/radare2/files/2839289/BiiN_CPU_Architecture_Reference_Man_Jul88.pdf)\r\n\r\n![image](https://user-images.githubusercontent.com/203261/52390076-833f3580-2ad1-11e9-8a72-9e4004e2597a.png)\r\n[270710-003.pdf](https://github.com/radare/radare2/files/3509102/270710-003.pdf)\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ2OTk3ODM5MA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"https://github.com/CyberGrandChallenge/binutils/blob/master/bfd/cpu-i960.c","createdAt":"2019-03-06T05:52:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13010#issuecomment-469978390","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3MDAxMzgwMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Wow\n\n> On 6 Mar 2019, at 06:52, Maijin <notifications@github.com> wrote:\n> \n> https://github.com/CyberGrandChallenge/binutils/blob/master/bfd/cpu-i960.c\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-03-06T08:24:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/13010#issuecomment-470013800","viewerDidAuthor":false}],"number":13010,"title":"Intel i960 architecture support"},{"body":"* [ ] Support debugger, esil and esil in debugger\r\n* [ ] Support parsing strings \"\" in arguments\r\n* [ ] Show return value after calling the function","comments":[],"number":13004,"title":"Improve appcall aeC"},{"body":"Use tasks instead of threads, because right now its crashing because of that.\r\n\r\nAlso do the analysis in background if -A is used\r\n\r\n* [ ] Load rbin info in a task\r\n* ~~Load projects in a task~~\r\n* [ ] Run analysis in a task\r\n* [ ] Set scr.interactive=false in tasks","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3MzgzNDgyMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping @thestr4ng3r ","createdAt":"2019-03-18T09:33:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12996#issuecomment-473834823","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NDA1ODE4NA==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"There are other things like task-local temprary eval vars that I would prioritize over -t.","createdAt":"2019-03-18T19:04:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12996#issuecomment-474058184","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0NTQyMzk0Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping @thestr4ng3r can you bring it back?","createdAt":"2019-10-23T12:40:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12996#issuecomment-545423942","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0NTQyNzgwOQ==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"yes","createdAt":"2019-10-23T12:50:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12996#issuecomment-545427809","viewerDidAuthor":false}],"number":12996,"title":"Bring back r2 -t"},{"body":"For example right now we have `Vd` - visual disassembly. Many people complain that they don't want to run disassembly on everything, keeping data by default. But at the same time this mode is incredibly useful still.\r\nWhat I am proposing is to introduce new type of the navigational visual mode, where you can switch between data and code by default via option, at the same time preserving the `Vd` as is.\r\n\r\nThis way we can make even more differences and recommend those people to use it.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ2MDA1ODk0NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"This requires finishing the asm.meta work, but nobody give me a single comment/feedback in more than a year after bugging several people, so maybe we can just enable the option and then people will realise its buggy and complain\n\n> On 3 Feb 2019, at 08:05, Anton Kochkov <notifications@github.com> wrote:\n> \n> For example right now we have Vd - visual disassembly. Many people complain that they don't want to run disassembly on everything, keeping data by default. But at the same time this mode is incredibly useful still.\n> What I am proposing is to introduce new type of the navigational visual mode, where you can switch between data and code by default via option, at the same time preserving the Vd as is.\n> \n> This way we can make even more differences and recommend those people to use it.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/12975>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-llYPUl2SaXls8hDL6efTk0mOI6ufks5vJoo5gaJpZM4af-O->.\n> \n\n","createdAt":"2019-02-03T14:58:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12975#issuecomment-460058944","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2MDA1OTAwMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Also, this is the default behaviour on IDA/BN/Hopperâ€¦ which is imho a pretty retarded setup, but people gets used to bad behaviours and this is why we canâ€™t have nice things, but we are here to please everyone\n\n> On 3 Feb 2019, at 08:05, Anton Kochkov <notifications@github.com> wrote:\n> \n> For example right now we have Vd - visual disassembly. Many people complain that they don't want to run disassembly on everything, keeping data by default. But at the same time this mode is incredibly useful still.\n> What I am proposing is to introduce new type of the navigational visual mode, where you can switch between data and code by default via option, at the same time preserving the Vd as is.\n> \n> This way we can make even more differences and recommend those people to use it.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/12975>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-llYPUl2SaXls8hDL6efTk0mOI6ufks5vJoo5gaJpZM4af-O->.\n> \n\n","createdAt":"2019-02-03T14:59:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12975#issuecomment-460059001","viewerDidAuthor":false}],"number":12975,"title":"More configurable default visual mode"},{"body":"Go binaries, if I am not mistaken, uses ELF like .symtab to store symbols in its PE files.\r\nit seams that Radare2 doesn't load these symbols automatically.\r\n\r\n\r\nIt will be great if radare2 could load symbols from .symtab automatically, I verified IDA could in fact load these symbols.\r\n\r\nI have attached a Binary  file from an old CTF that can be used as a test case:\r\n\r\n[bin.zip](https://github.com/radare/radare2/files/2817572/bin.zip)\r\n\r\n![image](https://user-images.githubusercontent.com/10424605/52060290-8fc50a80-2574-11e9-8950-d3ae50bbed98.png)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1OTY0Nzc3Mg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Wait isnâ€™t that what aaa does by default?","createdAt":"2019-02-01T08:40:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12959#issuecomment-459647772","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1OTcyOTQ5OA==","author":{"login":"oddcoder"},"authorAssociation":"CONTRIBUTOR","body":"nope it didn't work as expected.\r\n\r\nI guess .symtab isn't a standard PE section and symbols was supposed to be to somewhere else. but Go choosed an ELF like section for symbols.","createdAt":"2019-02-01T13:54:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12959#issuecomment-459729498","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NDM2NjQ1NQ==","author":{"login":"SiD3W4y"},"authorAssociation":"NONE","body":"One solution would be to look for the gopclntab magic header as a fallback method if the section cannot be found (like here: https://github.com/SiD3W4y/r2-gorecover/blob/master/gorecover.c#L91).","createdAt":"2019-02-16T17:45:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12959#issuecomment-464366455","viewerDidAuthor":false}],"number":12959,"title":"automatically load .symtab from PE go binaries"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| System: linux(devuan) x86 64bit\r\n| File format: ELF \r\n| Arch: x86/64\r\n| r2 -v:  radare2 3.3.0-git 20836 @ linux-x86-64 git.3.2.1-202-g5535b6f38 commit: 5535b6f380b3b068fa9694914518c652d6f92c09 build: 2019-01-30__10:54:23\r\n\r\n### Expected behavior\r\nIn debug mode, the command dcp continues until RIP hits an address in the main program's memory map.\r\n\r\n\r\n### Actual behavior\r\ndcp singlesteps instead of continuing, giving this output:\r\n\r\n```\r\n[0x7fe2adfc6210]> dcp\r\n 0 7fe2adfc6250\r\n[0x7fe2adfc6210]> dcp\r\n 0 7fe2adfc6258\r\n[0x7fe2adfc6258]> dcp\r\n 0 7fe2adfc6260\r\n[0x7fe2adfc6258]> dcp\r\n 0 7fe2adfc6268\r\n[0x7fe2adfc6258]> \r\n```\r\n\r\n\r\n\r\n\r\n### Steps to reproduce the behavior \r\n1. r2 -d /bin/ls (either as root or not, and also works by attaching to a running process)\r\n2. enter \"dcp\" command. (aa or aaa doesn't make any difference)\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n.radare2rc:\r\n\r\n```\r\neco twilight\r\ne scr.utf8 = true\r\ne dbg.btdepth=512\r\ne graph.offset = true\r\ne anal.depth = 512\r\ne hex.depth = 10\r\ne asm.bbline = true\r\ne asm.lines = false\r\ne scr.scrollbar = true\r\ne hex.cols = 16\r\n```\r\n\r\nstrace:\r\n\r\n```\r\n[0x7f7c4312ec20]> dcp\r\n) = 52\r\nrt_sigaction(SIGINT, {sa_handler=0x7f88e78ec8d4, sa_mask=[INT], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f88e3e87060}, {sa_handler=0x7f88e78ec8d4, sa_mask=[INT], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f88e3e87060}, 8) = 0\r\nkill(16819, SIG_0)                      = 0\r\nkill(16819, SIG_0)                      = 0\r\nkill(16819, SIG_0)                      = 0\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nkill(16819, SIG_0)                      = 0\r\nrt_sigprocmask(SIG_BLOCK, [WINCH], [], 8) = 0\r\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\r\nwait4(16819, [{WIFSTOPPED(s) && WSTOPSIG(s) == SIGTRAP}], __WALL, NULL) = 16819\r\nrt_sigprocmask(SIG_BLOCK, [WINCH], [], 8) = 0\r\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nkill(16819, SIG_0)                      = 0\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nkill(16819, SIG_0)                      = 0\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nkill(16819, SIG_0)                      = 0\r\nkill(16819, SIG_0)                      = 0\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nkill(16819, SIG_0)                      = 0\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\n)       = 16 7f7c4312ec23\\r\", 16 0 7f7c4312ec23\r\nwrite(2, \"\\n\", 1\r\n)                       = 1\r\nkill(16819, SIG_0)                      = 0\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nwrite(1, \"\", 0)                         = 0\r\nkill(16819, SIG_0)                      = 0\r\nfutex(0x55ded0085808, FUTEX_WAKE_PRIVATE, 1) = 1\r\nrt_sigaction(SIGINT, {sa_handler=0x7f88e78ec8d4, sa_mask=[INT], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f88e3e87060}, {sa_handler=0x7f88e78ec8d4, sa_mask=[INT], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f88e3e87060}, 8) = 0\r\nioctl(0, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\nioctl(0, TIOCGWINSZ, {ws_row=60, ws_col=112, ws_xpixel=0, ws_ypixel=0}) = 0\r\nioctl(0, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\nioctl(0, TIOCGWINSZ, {ws_row=60, ws_col=112, ws_xpixel=0, ws_ypixel=0}) = 0\r\nioctl(0, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\nioctl(0, SNDCTL_TMR_START or TCSETS, {B38400 opost -isig -icanon -echo ...}) = 0\r\nioctl(0, TCGETS, {B38400 opost -isig -icanon -echo ...}) = 0\r\n)                 = 5\r\nwrite(1, \"\\33[0m\\33[38;2;112;128;128m[0x7f7c43\"..., 45[0x7f7c4312ec20]> ) = 45\r\nrt_sigaction(SIGINT, {sa_handler=0x7f88e78ec8d4, sa_mask=[INT], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f88e3e87060}, {sa_handler=0x7f88e78ec8d4, sa_mask=[INT], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f88e3e87060}, 8) = 0\r\nrt_sigprocmask(SIG_BLOCK, [WINCH], [], 8) = 0\r\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\r\nrt_sigprocmask(SIG_BLOCK, NULL, [], 8)  = 0\r\npselect6(1, [0], NULL, NULL, NULL, {[], 8}\r\n```\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1OTczMTM1MQ==","author":{"login":"jerc33"},"authorAssociation":"NONE","body":"Update: I've also replicated this behavior on a Ubuntu Server 18.10 system. Kernel 4.18.0-13-generic.\r\n\r\n![screenshot_2019-02-01_13-47-20](https://user-images.githubusercontent.com/12518848/52127289-9a8da700-2629-11e9-8e82-845e131f2656.png)\r\n\r\n![screenshot_2019-02-01_13-49-11](https://user-images.githubusercontent.com/12518848/52127298-a0838800-2629-11e9-9402-7d262ce9050f.png)\r\n\r\n![screenshot_2019-02-01_13-50-01](https://user-images.githubusercontent.com/12518848/52127306-a5483c00-2629-11e9-883f-2912f2a87830.png)\r\n\r\n","createdAt":"2019-02-01T14:00:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12955#issuecomment-459731351","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NjQ1NzE3MQ==","author":{"login":"jerc33"},"authorAssociation":"NONE","body":"I've been looking at the code a bit and this is what I found, (warning: I'm not good at C at all):\r\n\r\ndcp is implemented here:\r\nhttps://github.com/radare/radare2/blob/460d55ea83d00d8c4b5b1d13620ae05236b76323/libr/core/cmd_debug.c#L4171-L4192\r\n\r\n\r\n\r\nThis means that `while(!s)` expects *s to be null, for the loop to continue. But then I checked what r_io_map_get was assigning to that pointer by doing this:\r\n \r\n```\r\n\t\tpc = r_debug_reg_get (core->dbg, \"PC\");\r\n\t\ts = r_io_map_get (core->io, pc);\r\n\t\teprintf (\" %d %\"PFMT64x\" %\"PFMT64x\"\\r\", n++, pc, s);\r\n```\r\n\r\nAnd tested it:\r\n\r\n```\r\n$ r2 -d /bin/ls\r\nProcess with PID 22511 started...\r\n= attach 22511 22511\r\nbin.baddr 0x556e1cce9000\r\nUsing 0x556e1cce9000\r\nasm.bits 64\r\n -- Mind the tab\r\n[0x7f585ad3d000]> dcp\r\n 0 7f585ad3d003 560579240200\r\n[0x7f585ad3d000]> \r\n```\r\n\r\nThis means that `r_io_map_get` is **never** setting *s to null. Let's see what r_io_map_get is doing:\r\n\r\nhttps://github.com/radare/radare2/blob/a88c7e1e3b566e50d7ab76229c92e0364e3f85b0/libr/io/map.c#L343-L353\r\n\r\nEh... I'm lost now. Help? :)\r\n\r\n(edit: btw @XVilka shouldn't this issue be makerd as a bug?)\r\n\r\n(edit2: ah, forgot to mention, this is the commit that broke dcp. https://github.com/radare/radare2/commit/ab3a7be70486cd2a63176117e9c7312563f45d78)","createdAt":"2019-02-22T16:28:28Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12955#issuecomment-466457171","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NjQ4OTYyMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"iomaps in debugger just cover the whole memoryspace, so it may never be null\n\n> On 22 Feb 2019, at 17:28, jerc33 <notifications@github.com> wrote:\n> \n> I've been looking at the code a bit and this is what I found, (warning: I'm not good at C at all):\n> \n> dcp is implemented here:\n> https://github.com/radare/radare2/blob/460d55ea83d00d8c4b5b1d13620ae05236b76323/libr/core/cmd_debug.c#L4171-L4192 <https://github.com/radare/radare2/blob/460d55ea83d00d8c4b5b1d13620ae05236b76323/libr/core/cmd_debug.c#L4171-L4192>\n> This means that while(!s) expects *s to be null, for the loop to continue. But then I checked what r_io_map_get was assigning to that pointer by doing this:\n> \n> \t\tpc = r_debug_reg_get (core->dbg, \"PC\");\n> \t\ts = r_io_map_get (core->io, pc);\n> \t\teprintf (\" %d %\"PFMT64x\" %\"PFMT64x\"\\r\", n++, pc, s);\n> And tested it:\n> \n> $ r2 -d /bin/ls\n> Process with PID 22511 started...\n> = attach 22511 22511\n> bin.baddr 0x556e1cce9000\n> Using 0x556e1cce9000\n> asm.bits 64\n>  -- Mind the tab\n> [0x7f585ad3d000]> dcp\n>  0 7f585ad3d003 560579240200\n> [0x7f585ad3d000]> \n> This means that r_io_map_get is never setting *s to null. Let's see what r_io_map_get is doing:\n> \n> https://github.com/radare/radare2/blob/a88c7e1e3b566e50d7ab76229c92e0364e3f85b0/libr/io/map.c#L343-L353 <https://github.com/radare/radare2/blob/a88c7e1e3b566e50d7ab76229c92e0364e3f85b0/libr/io/map.c#L343-L353>\n> Eh... I'm lost now. Help? :)\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/12955#issuecomment-466457171>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lv4Af7p1-eyUtaezt62FmuGuYRxAks5vQBqygaJpZM4abPUl>.\n> \n\n","createdAt":"2019-02-22T18:04:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12955#issuecomment-466489620","viewerDidAuthor":false}],"number":12955,"title":"dcp not working"},{"body":"file size as int? ok we dont want > 4GB slurps,, but char*... unless the file is plaintext..","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ2MTI0NTMyOQ==","author":{"login":"deepakchethan"},"authorAssociation":"CONTRIBUTOR","body":"So the issue is about not slurping the file if the file size is greater than 4GB right. I apologize in advance for asking such a dumb question.\r\nCause that particular method already finds size in terms of int.","createdAt":"2019-02-07T00:36:32Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12954#issuecomment-461245329","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2Mzk0MjY0NA==","author":{"login":"lowlyw"},"authorAssociation":"CONTRIBUTOR","body":"`r_file_gzslurp`, `r_file_slurp_hexpairs` also have similar signature, (int size), this should either be`ssize_t` to match with `read` or other type of functions, or `size_t` to be reasonable\r\n\r\nalso\r\n\r\n`r_file_slurp_range` returns `char *` as well\r\n\r\nthe ones that get specific lines are probably ok with char *","createdAt":"2019-02-15T07:55:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12954#issuecomment-463942644","viewerDidAuthor":false}],"number":12954,"title":"R_API char *r_file_slurp(const char *str, int *usz)"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | MacOS x86 64\r\n| File format of the file you reverse (mandatory)      | N/A\r\n| Architecture/bits of the file (mandatory)            | N/A\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.3.0-git 20675 @ darwin-x86-64 git.3.2.1-197-gc056172a1 commit: 54d5cc3ae07e1ef6f477baa026e819a0ed0caedd build: 2019-01-30__07:49:31\r\n\r\n### Expected behavior\r\n\r\nWhen setting a new register profile with `drp <file>` that the registers are mapped correctly.\r\n\r\n### Actual behavior\r\n\r\nThe registers (flags) are not being mapped correctly.\r\n\r\n### Steps to reproduce the behavior \r\n\r\nUse the following register profile:\r\n```\r\n=PC pc\r\ngpr r0 .8 0 0\r\ngpr r1 .8 1 0\r\ngpr r2 .8 2 0\r\ngpr r3 .8 3 0\r\ngpr pc .8 4 0\r\nflg flags .8 5 0 ....oscz\r\nflg of .1 5.0 0 overflow\r\nflg sf .1 5.1 0 sign\r\nflg cf .1 5.2 0 carry\r\nflg zf .1 5.3 0 zero\r\n```\r\n\r\nNow run the following commands (loading the profile, setting a register, and inspecting the registers).\r\n\r\n```\r\n[0x00000000]> drp profile\r\n[0x00000000]> dr flags=3\r\n0x00000000 ->0x00000003\r\n[0x00000000]> drt all\r\nr0 = 0x00000000\r\nr1 = 0x00000000\r\nr2 = 0x00000000\r\nr3 = 0x00000000\r\npc = 0x00000000\r\nflags = 0x00000003\r\nof = 0x00000000\r\nsf = 0x00000000\r\ncf = 0x00000000\r\nzf = 0x00000000\r\n```\r\n\r\nAs you can see setting the `flags` register to `3`, does not set the bits in `of` and `sf`.\r\n\r\nNow use the following profile.\r\n```\r\n=PC pc\r\ngpr r0 .8 0 0\r\ngpr r1 .8 1 0\r\ngpr r2 .8 2 0\r\ngpr r3 .8 3 0\r\ngpr pc .8 4 0\r\nflg flags .8 5 0 ....oscz\r\nflg of .1 5.0 0 overflow\r\nflg sf .1 5.1 0 sign\r\nflg cf .1 5.2 0 carry\r\nflg zf .1 5.3 0 zero\r\ngpr why .8 6 0\r\n```\r\n\r\nAnd run the same commands again.\r\n```\r\n[0x00000000]> drp reg-prof.txt\r\n[0x00000000]> dr flags=3\r\n0x00000000 ->0x00000003\r\n[0x00000000]> drt all\r\nr0 = 0x00000000\r\nr1 = 0x00000000\r\nr2 = 0x00000000\r\nr3 = 0x00000000\r\npc = 0x00000000\r\nflags = 0x00000003\r\nof = 0x00000001\r\nsf = 0x00000001\r\ncf = 0x00000000\r\nzf = 0x00000000\r\nwhy = 0x00000000\r\n```\r\n\r\nIt works now.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU3ODI3NTY3MQ==","author":{"login":"puxlit"},"authorAssociation":"CONTRIBUTOR","body":"Can reproduce on Linux, so I don't think it's platform-specific.\r\n\r\n```\r\n$ r2 -v\r\nradare2 4.3.0-git 23678 @ linux-x86-64 git.4.2.0-15-g67a8bf057\r\ncommit: 67a8bf057635fc037eed4e81ceee0dc3f508bc58 build: 2020-01-24__19:36:46\r\n$ cat <<'EOF' >./v0\r\n> =PC pc\r\n> gpr r0 .8 0 0\r\n> gpr r1 .8 1 0\r\n> gpr r2 .8 2 0\r\n> gpr r3 .8 3 0\r\n> gpr pc .8 4 0\r\n> flg flags .8 5 0 ....oscz\r\n> flg of .1 5.0 0 overflow\r\n> flg sf .1 5.1 0 sign\r\n> flg cf .1 5.2 0 carry\r\n> flg zf .1 5.3 0 zero\r\n> EOF\r\n$ cp ./v0 ./v1\r\n$ echo 'gpr why .8 6 0' >>./v1\r\n$ r2 --\r\n -- Buy a Mac\r\n[0x00000000]> drp ./v0\r\n[0x00000000]> dr flags=3\r\n[0x00000000]> dr all\r\nr0 = 0x00000000\r\nr1 = 0x00000000\r\nr2 = 0x00000000\r\nr3 = 0x00000000\r\npc = 0x00000000\r\nflags = 0x00000003\r\nof = 0x00000000\r\nsf = 0x00000000\r\ncf = 0x00000000\r\nzf = 0x00000000\r\n[0x00000000]> drp ./v1\r\n[0x00000000]> dr flags=3\r\n[0x00000000]> dr all\r\nr0 = 0x00000000\r\nr1 = 0x00000000\r\nr2 = 0x00000000\r\nr3 = 0x00000000\r\npc = 0x00000000\r\nflags = 0x00000003\r\nof = 0x00000001\r\nsf = 0x00000001\r\ncf = 0x00000000\r\nzf = 0x00000000\r\nwhy = 0x00000000\r\n```","createdAt":"2020-01-24T19:50:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12949#issuecomment-578275671","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3OTEzMzY1MA==","author":{"login":"puxlit"},"authorAssociation":"CONTRIBUTOR","body":"Heya @ScrimpyCat, this should be fixed now!\r\n\r\n```\r\n$ r2 -v\r\nradare2 4.3.0-git 23694 @ linux-x86-64 git.4.2.0-31-g0a86b4c3a\r\ncommit: 0a86b4c3a2c768e9ac916bfa54a810a73e8dc418 build: 2020-01-28__08:20:05\r\n$ cat <<'EOF' >./v0\r\n> =PC pc\r\n> gpr r0 .8 0 0\r\n> gpr r1 .8 1 0\r\n> gpr r2 .8 2 0\r\n> gpr r3 .8 3 0\r\n> gpr pc .8 4 0\r\n> flg flags .8 5 0 ....oscz\r\n> flg of .1 5.0 0 overflow\r\n> flg sf .1 5.1 0 sign\r\n> flg cf .1 5.2 0 carry\r\n> flg zf .1 5.3 0 zero\r\n> EOF\r\n$ r2 --\r\n -- Step through your seek history with the commands 'u' (undo) and 'U' (redo)\r\n[0x00000000]> drp ./v0\r\n[0x00000000]> dr flags=3\r\n[0x00000000]> dr all\r\nr0 = 0x00000000\r\nr1 = 0x00000000\r\nr2 = 0x00000000\r\nr3 = 0x00000000\r\npc = 0x00000000\r\nflags = 0x00000003\r\nof = 0x00000001\r\nsf = 0x00000001\r\ncf = 0x00000000\r\nzf = 0x00000000\r\n[0x00000000]> dr zf=1\r\n[0x00000000]> dr sf=0\r\n[0x00000000]> dr flg\r\nflags = 0x00000009\r\nof = 0x00000001\r\nsf = 0x00000000\r\ncf = 0x00000000\r\nzf = 0x00000001\r\n```","createdAt":"2020-01-28T08:27:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"HEART","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/12949#issuecomment-579133650","viewerDidAuthor":false}],"number":12949,"title":"Flag registers not being mapped correctly"},{"body":"# Segmentation fault while listing symbols in PDB\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits                         | Debian arm 64, Ubuntu x86 32\r\n| File format     | PDB\r\n|File output|  `libmkv_plugin.pdb: MSVC program database ver 7.00, 1024*1707 bytes`\r\n| r2 -v    | `radare2 3.3.0-git 0 @ linux-x86-64 git.3.3.0-git commit: HEAD build: 2019-01-25__10:51:29`\r\n\r\n### Expected behavior\r\n\r\nRabin2 listing the symbols of the PDB when launching it like that: `LD_LIBRARY_PATH=\"./lib\" ./bin/rabin2 -P libmkv_plugin.pdb`.\r\n\r\n### Actual behavior\r\n\r\n```\r\n$ LD_LIBRARY_PATH=\"./lib\" ./bin/rabin2 -P libmkv_plugin.pdb\r\nWARNING: r_list_get_n: assertion 'list' failed (line 442)\r\nWARNING: r_list_get_n: assertion 'list' failed (line 442)\r\nWARNING: r_list_get_n: assertion 'list' failed (line 442)\r\nWARNING: r_list_get_n: assertion 'list' failed (line 442)\r\nWARNING: r_list_get_n: assertion 'list' failed (line 442)\r\nWARNING: r_list_get_n: assertion 'list' failed (line 442)\r\nWARNING: r_list_get_n: assertion 'list' failed (line 442)\r\n...\r\nWARNING: r_list_get_n: assertion 'list' failed (line 442)\r\nWARNING: r_list_get_n: assertion 'list' failed (line 442)\r\nWARNING: r_list_get_n: assertion 'list' failed (line 442)\r\nWARNING: r_list_get_n: assertion 'list' failed (line 442)\r\nWARNING: r_list_get_n: assertion 'list' failed (line 442)\r\nSegmentation fault\r\n```\r\n\r\n```\r\n(gdb) bt\r\n#0  0x0000555555858690 in ?? ()\r\n#1  0x00007ffff6c2590b in finish_pdb_parse (pdb=0x7ffffff9c560) at pdb/pdb.c:555\r\n#2  0x00007ffff6fbe904 in r_core_pdb_info (core=0x7ffffff9c6d0, file=0x555555856c60 \"libmkv_plugin.pdb\", baddr=0, mode=100) at cbin.c:1003\r\n#3  0x00007ffff6fbe94a in bin_pdb (core=0x7ffffff9c6d0, mode=0) at cbin.c:1010\r\n#4  0x00007ffff6fc74ec in r_core_bin_info (core=0x7ffffff9c6d0, action=8192, mode=0, va=1, filter=0x7fffffffdf50, chksum=0x0) at cbin.c:3496\r\n#5  0x000055555555a47b in main (argc=3, argv=0x7fffffffe198) at rabin2.c:1122\r\n```\r\n\r\n### Steps to reproduce the behavior \r\n\r\nJust list the symbols of the PDB (`libmkv_plugin.pdb`).\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\n[libmkv_plugin.pdb.zip](https://github.com/radare/radare2/files/2802157/libmkv_plugin.pdb.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ2MDM3MTkwNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"the  crash is fixed, but we are not closing this issue because it requires a better fix. cc @AdamVanScyoc ","createdAt":"2019-02-04T19:08:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12924#issuecomment-460371907","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3ODMyNTAyMg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Better fix wouldn't arrive in one day, moving ahead.","createdAt":"2019-03-31T09:14:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12924#issuecomment-478325022","viewerDidAuthor":false}],"number":12924,"title":"Segmentation fault while listing symbols in PDB"},{"body":"# This template is meant for bug reports, if you have a feature request, please be as descriptive as possible and delete the template\r\n\r\nMake sure you are testing using the latest git version of radare2 before submitting any issue.\r\n\r\n*If you would like to report a bug, please fill the template bellow*\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Kubuntu x86 64\r\n| File format of the file you reverse (mandatory)      | .so\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.3.0-git 20646 @ linux-x86-64 git.3.2.1-172-gea833632f commit: ea833632f1eb47e2dba4c5fa174d1880acec3f93 build: 2019-01-24__18:50:45\r\n\r\n### Expected behavior\r\nRadare2 properly prints out the instructions after running ood and pdf.\r\n### Actual behavior\r\nRadare2 prints invalid instead of the instructions\r\n### Steps to reproduce the behavior \r\n- Source File: https://github.com/radare/radare2/files/2797735/hello.zip\r\nRun `r2 hello` then `aaa` and then `s sym.main` and then `pdf`. Then run `ood`, `s sym.main` and then `pdf` again.\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\nWhat it is printing:\r\n`0x565c370f      ff             invalid \r\n..\r\n|           0x565c3712      ff             invalid \r\n..\r\n|           0x565c3715      ff             invalid \r\n..\r\n|           0x565c3718      ff             invalid \r\n..\r\n|           0x565c371b      ff             invalid \r\n..\r\n|           0x565c3721      ff             invalid \r\n|           0x565c3722      ff             invalid \r\n..\r\n|           0x565c3727      ff             invalid \r\n..\r\n|           0x565c372a      ff             invalid \r\n..\r\n|           0x565c372f      ff             invalid \r\n..\r\n|           0x565c3732      ff             invalid \r\n..\r\n|           0x565c3739      ff             invalid \r\n..\r\n|           0x565c373b      ff             invalid \r\n..\r\n|           ; CODE XREF from sym.main (0x565c3739)\r\n|           0x565c3740      ff             invalid \r\n..\r\n|           0x565c3743      ff             invalid \r\n|           0x565c3744      ff             invalid \r\n|           0x565c3745      ff             invalid \r\n|           0x565c3746      ff             invalid \r\n..\r\n|           0x565c3749      ff             invalid`","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1Nzc5ODE5Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Probably because of aslr and the code is somewhere else. Expected behaviour\n\n> On 25 Jan 2019, at 14:31, awdsklm <notifications@github.com> wrote:\n> \n> This template is meant for bug reports, if you have a feature request, please be as descriptive as possible and delete the template\n> \n> Make sure you are testing using the latest git version of radare2 before submitting any issue.\n> \n> If you would like to report a bug, please fill the template bellow\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tKubuntu x86 64\n> File format of the file you reverse (mandatory)\t.so\n> Architecture/bits of the file (mandatory)\tx86/64\n> r2 -v full output, not truncated (mandatory)\tradare2 3.3.0-git 20646 @ linux-x86-64 git.3.2.1-172-gea833632f commit: ea83363 build: 2019-01-24__18:50:45\n> Expected behavior\n> \n> Radare2 properly prints out the instructions after running ood and pdf.\n> \n> Actual behavior\n> \n> Radare2 prints invalid instead of the instructions\n> \n> Steps to reproduce the behavior\n> \n> Source File: https://github.com/radare/radare2/files/2797735/hello.zip\n> Run r2 hello then aaa and then s sym.main and then pdf. Then run ood, s sym.main and then pdf again.\n> Additional Logs, screenshots, source-code, configuration dump, ...\n> \n> What it is printing:\n> 0x565c370f ff invalid .. | 0x565c3712 ff invalid .. | 0x565c3715 ff invalid .. | 0x565c3718 ff invalid .. | 0x565c371b ff invalid .. | 0x565c3721 ff invalid | 0x565c3722 ff invalid .. | 0x565c3727 ff invalid .. | 0x565c372a ff invalid .. | 0x565c372f ff invalid .. | 0x565c3732 ff invalid .. | 0x565c3739 ff invalid .. | 0x565c373b ff invalid .. | ; CODE XREF from sym.main (0x565c3739) |           0x565c3740 ff invalid .. | 0x565c3743 ff invalid | 0x565c3744 ff invalid | 0x565c3745 ff invalid | 0x565c3746 ff invalid .. | 0x565c3749 ff invalid\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-01-26T03:41:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12914#issuecomment-457798193","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1Nzg0MjEzNw==","author":{"login":"xarkes"},"authorAssociation":"CONTRIBUTOR","body":"Will probably be fixed when https://github.com/radare/radare2/pull/12801 is merged.","createdAt":"2019-01-26T15:56:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12914#issuecomment-457842137","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1Nzg1NzY4Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Totally not. This fix requires tons of changes and many of them are probably not easy to solve\n\n> On 26 Jan 2019, at 09:56, xarkes <notifications@github.com> wrote:\n> \n> Will probably be fixed when #12801 is merged.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-01-26T19:19:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12914#issuecomment-457857682","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1Nzg2NDM4Mg==","author":{"login":"xarkes"},"authorAssociation":"CONTRIBUTOR","body":"Yes sorry I misunderstood the pending PR, I didn't realize it was for breakpoints only.","createdAt":"2019-01-26T20:42:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12914#issuecomment-457864382","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0MjQ0NDc3Ng==","author":{"login":"SkypLabs"},"authorAssociation":"NONE","body":"> Probably because of aslr and the code is somewhere else.\r\n\r\nI have the exact same issue and yes, it is because of ASLR, which makes sense.\r\n\r\n> Expected behaviour\r\n\r\nIs there a way to update the actual flags to point to the new addresses? When I execute `aaa` after `ood`, the function flags still point to the previous values.","createdAt":"2019-10-15T23:22:30Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12914#issuecomment-542444776","viewerDidAuthor":false}],"number":12914,"title":"Radare2 prints invalid when disassembling instructions after running ood"},{"body":"#### Problem\r\n\r\nAs a Vim user, I should be happy to be able to move around with \"`hjkl`\".\r\n\r\nHowever, I am not using a Qwerty layout (but [bÃ©po](https://en.wikipedia.org/wiki/File:KB_French_Dvorak_b%C3%A9po_simplifi%C3%A9.svg)), hence, in my Vim config, I remapped \"`hjkl`\" to \"`ctsr`\" ([here is what it looks like](https://github.com/Pamplemousse/dotfiles/blob/master/home/.vimrc.bepo)).\r\nI would like to be able to do the same in R2.\r\n\r\n#### Solution\r\n\r\nIt would be nice to be able to remap key bindings in the `~/.radare2rc`.","comments":[],"number":12910,"title":"Remap \"hjkl\" keys to something else to move around"},{"body":"# This template is meant for bug reports, if you have a feature request, please be as descriptive as possible and delete the template\r\n\r\nMake sure you are testing using the latest git version of radare2 before submitting any issue.\r\n\r\n*If you would like to report a bug, please fill the template bellow*\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | **Ubuntu 18.04**\r\n| File format of the file you reverse (mandatory)      | **memory dump**\r\n| Architecture/bits of the file (mandatory)            | **x86/64**\r\n| r2 -v full output, **not truncated** (mandatory)     | **radare2 3.3.0-git 20841 @ linux-x86-64 git.3.2.1-168-g7a8989e74 commit: 7a8989e74659f687b365cab179b556787d4c779a build: 2019-01-24__05:18:17**\r\n\r\n### Expected behavior\r\n**Output file should have been > 4GB.**\r\n\r\n### Actual behavior\r\n**I get only 23 lines.\r\nIndependent if I use r2 and izzz or rabin2 -zzz dump.raw**\r\n\r\n### Steps to reproduce the behavior \r\n- Please share the binary if it is shareable by drag and dropping it here in a zip archive (mandatory)\r\n**Sorry, can't. But I don't see any error.**\r\n- Use asciinema to describe the issue and share the link here (mandatory if u can't share the binary) \r\n**I must be doing something wrong.\r\nrabin2 -zzz dump.raw**\r\n- Use code markdown `CODE` to make your code visible\r\n- Or even better, create a Pull-Request for the https://github.com/radare/radare2-regressions containing the test case examples can be found in the t/ folder see for example https://github.com/radare/radare2-regressions/blob/master/t/cmd_search#L7\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\nDrag and drop zip archives containing the Additional info here, don't use external services or link.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1NzQ1MzY4MA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Can you run r2 in your case from GDB session? Or build it with [ASAN](https://github.com/radare/radare2/blob/master/sys/asan.sh) before running? Otherwise it is hard to understand the cause and context of the error.","createdAt":"2019-01-25T04:41:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12902#issuecomment-457453680","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2MDI1NzYyNw==","author":{"login":"MariasStory"},"authorAssociation":"NONE","body":"Hi @XVilka, thanks for your suggestion. I did run in GDB and it run without exception. After running izzz, I am constantly getting ~1.5K big text file, 23 lines. Way too small for the ~17G big file.\r\nDid you want me to check something specific with GDB?","createdAt":"2019-02-04T13:54:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12902#issuecomment-460257627","viewerDidAuthor":false}],"number":12902,"title":"zzz dump raw strings to stdout (for huge files) has limited output."},{"body":"just seekback half of the blocksize","comments":[],"number":12898,"title":"implement context dump in more p commands like px--5"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Arch Linux x86_64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.2.0 20745 @ linux-x86-64 git.3.2.1-156-g2ea94b733 commit: 2ea94b733f8c297a4fa24c804cff92efb9359348 build: 2019-01-23__11:22:45\r\n\r\n### Expected behavior\r\nDetect double and float arguments on amd64\r\n\r\n### Actual behavior\r\nradare2 doesn't detect double and float arguments\r\n\r\n### Steps to reproduce the behavior \r\n```\r\n$ cat main.cpp\r\nfloat g(float x) { return x; }\r\nint main() { return g(1.0f); }\r\n\r\n$ gcc main.cpp -o main && r2 -A main -q -c 'afi sym.g_float~args'\r\nargs: 0\r\n```\r\n[PR for radare2-regressions](https://github.com/radare/radare2-regressions/pull/1663)\r\n\r\n**Offtop:** issue template contains old information how to create test case for radare2-regressions ","comments":[],"number":12896,"title":"amd64 calling conventions doesn't support xmm1 arguments"},{"body":"See:\r\n- https://blog.quarkslab.com/reverse-engineering-a-philips-trimedia-cpu-based-ip-camera-part-1.html\r\n- https://blog.quarkslab.com/reverse-engineering-a-philips-trimedia-cpu-based-ip-camera-part-2.html","comments":[],"number":12893,"title":"Add TriMedia architecture support"},{"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nWhen I try to analyze function from shared library radare show me that it has 0 arguments, because disasm code needed to get this information. But it looks like in some cases this information can be taken from reloc info (I can see it for most of c++ code). \r\n\r\nExample:\r\n```\r\n$ cat test.cpp\r\nint sum(int a, int b);\r\nint main() { return sum(1, 2); }\r\n\r\n$ cat sum.cpp\r\nint sum(int a, int b) { return a + b; }\r\n\r\n$ g++ -c sum.c\r\n$ g++ -shared -o libsum.so sum.o\r\n$ g++ test.c -L. -lsum -o test\r\n$ LD_LIBRARY_PATH=. ./test\r\n\r\n$ r2 -A test\r\n[0x00001040]> afi sym.sum_int_int~args\r\nargs: 0\r\n[0x00001040]> pd 1 @sym.sum_int_int\r\n/ (fcn) sym.sum_int_int 6\r\n|   sym.sum_int_int ();\r\n|           ; CALL XREF from sym.main (0x1147)\r\n\\           0x00001030      ff25e22f0000   jmp qword reloc._Z3sumii    ; [0x4018:8]=0x1036 ; \"6\\x10\"\r\n[0x00001040]> pd 1 @reloc._Z3sumii\r\n            ;-- reloc.sum(int,int):\r\n            ; CODE XREF from sym.sum_int_int (0x1030)\r\n            0x00004018      .qword 0x0000000000001036                  ; RELOC 64 _Z3sumii\r\n```\r\nWith `reloc.sum(int,int):` we can understand, that function has 2 int arguments.\r\n\r\n**Describe the solution you'd like**\r\nradare should try to get arguments info from reloc name.\r\n\r\n**Additional context**\r\nI briefly looked how does analyze module works. And see two ways. The first one: extend `RAnalFunction` to store information if it is an external function and if so, store reloc data here. The second: retranslate recloc data itself in analyze module.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1NjkzODc5MQ==","author":{"login":"Diadlo"},"authorAssociation":"CONTRIBUTOR","body":"@Maijin @radare What do you think, which way is better? Or both are bad?","createdAt":"2019-01-23T19:41:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12888#issuecomment-456938791","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1Njk0NjY4NA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@sivaramaaa may be of better advice here^","createdAt":"2019-01-23T20:04:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12888#issuecomment-456946684","viewerDidAuthor":false}],"number":12888,"title":"Analyze reloc functions"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 18.10 x86_64\r\n| File format of the file you reverse (mandatory)      | ELF \r\n| Architecture/bits of the file (mandatory)            | x86_64 \r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.3.0-git 20620 @ linux-x86-64 git.3.2.1-148-ge24612ac4 commit: e24612ac415957d5b2b1d7028dc6818143ce1fc4 build: 2019-01-22__21:00:06\r\n\r\n\r\n\r\n### Expected behavior\r\n\r\n### Actual behavior\r\n\r\n1. \r\nIf i setting `e dbg.follow.child = true`  then only parent process is traced not child process.\r\n\r\n-----------------\r\n\r\n2.\r\nexplanation of two config variables in the below in help message is same.\r\naccording to my test i think `dbg.clone` is for threads.\r\nbut i can't understand about `dbg.execs` variable when used for.\r\nin linux threads only clone not exec\r\n\r\n- dbg.clone: Stop execution if new thread is created\r\n- dbg.execs: Stop execution if new thread is created\r\n\r\n-----------------\r\n\r\n3.\r\nIn visual mode if i setup vprompt setting below then the resulting value suddenly disappear from the top\r\nwhen entering \"libc\" library ( e.g puts )\r\n\r\n`cmd.vprompt> dm.`\r\n\r\n","comments":[],"number":12878,"title":"\"e dbg.follow.child = true\"  setting does not work"},{"body":"https://app.fossa.io/\r\n\r\nSee an example https://app.fossa.io/projects/git%2Bgithub.com%2Fsolokeys%2Fsolo/refs/branch/master/29d4d8825935c16da77fa512c315a77d91d34a7f/preview\r\n\r\n![image](https://user-images.githubusercontent.com/203261/51518057-ad4cf280-1e57-11e9-9dcd-731121bbd16a.png)\r\n\r\n![image](https://user-images.githubusercontent.com/203261/51518112-d40b2900-1e57-11e9-83e8-a9e5cc8bb75d.png)\r\n\r\n\r\nRelated https://github.com/radare/radare2/issues/12504","comments":[],"number":12872,"title":"Use FOSSA for licenses analysis and visualisation"},{"body":"See https://blog.trailofbits.com/2019/01/21/how-mcsema-handles-c-exceptions/\r\n\r\n\r\nRelated to:\r\n https://github.com/radare/radare2/issues/2036\r\n https://github.com/radare/radare2/issues/6851","comments":[],"number":12871,"title":"META - C++/etc exceptions parsing and handling"},{"body":"Now we have:\r\n\r\n- [ ] pj.c\r\n- [ ] sdbjson\r\n- [ ] dsojson\r\n- [ ] handmade printf json\r\n- [x] r_json\r\n\r\nWe must only keep pj.c and likely have sdb uses pj.c too.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1NjE1ODY1MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Sdb json api is for prsing. So i would just move pj.c into sdb and kill the rest\n\n> On 21 Jan 2019, at 18:57, Maijin <notifications@github.com> wrote:\n> \n> Now we have:\n> \n> pj.c\n> r_json\n> sdbjson\n> dsojson\n> handmade printf json\n> We must only keep pj.c and likely have sdb uses pj.c too.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-01-21T18:08:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12870#issuecomment-456158650","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1NjE2MDIxNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Rjson generates a memory structure so is usel too\n\n> On 21 Jan 2019, at 18:57, Maijin <notifications@github.com> wrote:\n> \n> Now we have:\n> \n> pj.c\n> r_json\n> sdbjson\n> dsojson\n> handmade printf json\n> We must only keep pj.c and likely have sdb uses pj.c too.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-01-21T18:14:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12870#issuecomment-456160216","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzODQwNDI3NQ==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"> Rjson generates a memory structure so is usel too\r\n\r\nWhat is rjson?","createdAt":"2019-10-04T13:47:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12870#issuecomment-538404275","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzODYyNTY1MA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@thestr4ng3r it's no more ;) It was a duplicate of pj.c and no, it wasn't generate memory structure.","createdAt":"2019-10-05T07:27:48Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12870#issuecomment-538625650","viewerDidAuthor":false}],"number":12870,"title":"Merge/Kill quintuplicate JSON implementations"},{"body":"A metanode is an abstraction that groups N basic blocks into one when disassembling or in the graph view\r\n\r\nThe metanodes are just a vector of ut64 with the addresses of the basic blocks grouped. \r\n\r\nWhen displaying we can display the entire disasm block or just the user comments?\r\n\r\nMetanodes must be a list inside the function\r\n\r\nWe need a command to manipulate the list of metanodes\r\n\r\nMetanodes can be used to fold code ","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1NTg1OTI5NA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"That sounds like a duplicate of #2952 ","createdAt":"2019-01-20T11:45:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12847#issuecomment-455859294","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1NTg2MTIwMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I know its kind of dupe. But issues explains exactly how to i plement it and how to use that info,\n\n> On 20 Jan 2019, at 12:45, Maijin <notifications@github.com> wrote:\n> \n> That sounds like a duplicate of #2952\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-01-20T12:10:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12847#issuecomment-455861203","viewerDidAuthor":false}],"number":12847,"title":"Implement metanodes"},{"body":"### Work environment\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Funtoo x86-64\r\n| File format of the file you reverse (mandatory)      | z64\r\n| Architecture/bits of the file (mandatory)            | MIPS, 64 bit\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.3.0-git 20619 @ linux-x86-64 git.3.2.1-116-gd3b487f26 commit: d3b487f26532bc86952aac737ecede86c338a126 build: 2019-01-19__09:54:55\r\n\r\n### Expected behavior\r\nRegister arguments set before saving a project should be present after loading it.\r\n### Actual behavior\r\nStack arguments are loaded, but register arguments are not, despite the relevant commands being present in the project's rc file.\r\n### Steps to reproduce the behavior \r\nOpen a non-native binary, add a register argument, save project, then load project.\r\nhttps://asciinema.org/a/jSdszIxBZxcCHV9CkQLBPyK5n\r\n\r\nAfter going at this with a debugger for a while, I've found the issue is that changing certain (all?) dbg settings as well as cfg.debug sets the registers to that of the host computer (libr/debug/plugin.c:36) This lasts while reading through the rc, and eventually gets set back by the r_config_bump() in r_core_project_load(). Removing any debug-related settings from the rc does indeed fix the problem.\r\nhttps://asciinema.org/a/MSsTaRHmjn1zuPo2m6O2Xh3RL\r\n\r\nHere is the unmodified project directory\r\n[project.tar.gz](https://github.com/radare/radare2/files/2775856/project.tar.gz)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1NTgwNzgzNA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Thanks for reporting, please note that projects are currently not working.","createdAt":"2019-01-19T19:22:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12843#issuecomment-455807834","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU4MTEzMDU2Mw==","author":{"login":"aronsky"},"authorAssociation":"CONTRIBUTOR","body":"Thanks for the workaround!","createdAt":"2020-02-02T12:26:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12843#issuecomment-581130563","viewerDidAuthor":false}],"number":12843,"title":"Register based arguments not loading from project on non-native binary"},{"body":"Currently, a lot of places are temporarily setting eval vars and resetting them later. This is obviously bad when doing things concurrently.\r\n\r\nThe solution would be a general API (which will also make such code nicer to write) for temporarily setting and resetting vars, which works task local. The idea is to add a structure to RConsContext that stores the temporary values in a hashtable (maybe in a stack, so multiple layers can be used) and each `r_config_get()` call will then first check if the var is set there and return that value, otherwise return the global value.\r\n\r\nWhat's non-trivial about this though is how to handle vars with custom setters. I see two possible solutions:\r\n- Move everything that is set by custom setters to task-local storage (we probably don't want that) \r\n- Call all setters for temporarily set vars once when dispatching a different task. This should work quite well. This obviously introduces more calls to the setters, but I think this is acceptable since only the ones for vars that are actually temporarily changed have to be called, which will in practice probably not be too many.","comments":[],"number":12831,"title":"Task-Local temporary eval vars"},{"body":"This is for example:\r\n\r\n* function Y goes after funtion X and before function Z","comments":[],"number":12826,"title":"Add function neighbourhood support signatures"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | any\r\n| File format of the file you reverse (mandatory)      | any\r\n| Architecture/bits of the file (mandatory)            | any\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.3.0-git 20776 @ darwin-x86-64 git.3.2.0-72-gea92c06e1 commit: ea92c06e1ac1df8ce7e087ab392cb6a1bc5bebbc build: 2019-01-14__14:42:50\r\n\r\n\r\n### Expected behavior\r\n```\r\n$ r2 /bin/ls\r\n -- There is only one binary, and we are all just reversing pieces of it.\r\n[0x1000011ec]> aaa\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\nInvalid instruction of 16357 bytes at 0x100001a100\r\nInvalid instruction of 16369 bytes at 0x100001ddc\r\nInvalid instruction of 16362 bytes at 0x100001ddc\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Constructing a function name for fcn.* and sym.func.* functions (aan)\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\n[0x1000011ec]>\r\n```\r\n\r\n### Actual behavior\r\n```\r\n$ r2 /bin/ls\r\n -- There is only one binary, and we are all just reversing pieces of it.\r\n[0x1000011ec]> aaa\r\n[Invalid instruction of 16357 bytes at 0x100001a100 (aa)\r\nInvalid instruction of 16369 bytes at 0x100001ddc\r\nInvalid instruction of 16362 bytes at 0x100001ddc\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Constructing a function name for fcn.* and sym.func.* functions (aan)\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\n[0x1000011ec]>\r\n```\r\n\r\n### Steps to reproduce the behavior \r\nOpen any binary with errors\r\n\r\n### Additional files\r\n[ls.zip](https://github.com/radare/radare2/files/2756175/ls.zip) - standard /bin/ls from MacOS 10.14\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1NTEwODY3Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"thats debugging messages for us to h elp us identify bugs in the  analysis loop and  improve them, could you check whats in those offsets? also git pull be ause i solved some false positives yesterday\n\n> On 14 Jan 2019, at 17:59, Boris Ryutin <notifications@github.com> wrote:\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tany\n> File format of the file you reverse (mandatory)\tany\n> Architecture/bits of the file (mandatory)\tany\n> r2 -v full output, not truncated (mandatory)\tradare2 3.3.0-git 20776 @ darwin-x86-64 git.3.2.0-72-gea92c06e1 commit: ea92c06 <https://github.com/radare/radare2/commit/ea92c06e1ac1df8ce7e087ab392cb6a1bc5bebbc> build: 2019-01-14__14:42:50\n> Expected behavior\n> \n> $ r2 /bin/ls\n>  -- There is only one binary, and we are all just reversing pieces of it.\n> [0x1000011ec]> aaa\n> [x] Analyze all flags starting with sym. and entry0 (aa)\n> Invalid instruction of 16357 bytes at 0x100001a100\n> Invalid instruction of 16369 bytes at 0x100001ddc\n> Invalid instruction of 16362 bytes at 0x100001ddc\n> [x] Analyze function calls (aac)\n> [x] Analyze len bytes of instructions for references (aar)\n> [x] Constructing a function name for fcn.* and sym.func.* functions (aan)\n> [x] Type matching analysis for all functions (aaft)\n> [x] Use -AA or aaaa to perform additional experimental analysis.\n> [0x1000011ec]>\n> Actual behavior\n> \n> $ r2 /bin/ls\n>  -- There is only one binary, and we are all just reversing pieces of it.\n> [0x1000011ec]> aaa\n> [Invalid instruction of 16357 bytes at 0x100001a100 (aa)\n> Invalid instruction of 16369 bytes at 0x100001ddc\n> Invalid instruction of 16362 bytes at 0x100001ddc\n> [x] Analyze all flags starting with sym. and entry0 (aa)\n> [x] Analyze function calls (aac)\n> [x] Analyze len bytes of instructions for references (aar)\n> [x] Constructing a function name for fcn.* and sym.func.* functions (aan)\n> [x] Type matching analysis for all functions (aaft)\n> [x] Use -AA or aaaa to perform additional experimental analysis.\n> [0x1000011ec]>\n> Steps to reproduce the behavior\n> \n> Open any binary with errors\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/12784>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lmEG-ydzQypzT1u5BpF24BAGahyjks5vDLdXgaJpZM4Z-67T>.\n> \n\n","createdAt":"2019-01-17T09:47:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12784#issuecomment-455108677","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1NTEyMjMyNg==","author":{"login":"dukebarman"},"authorAssociation":"CONTRIBUTOR","body":"I understand it, but this issue about that error messages corrupt normal informational messages from radare2 by overlapping them.\r\n```\r\n[Invalid instruction of 16357 bytes at 0x100001a100 (aa)\r\n```","createdAt":"2019-01-17T10:29:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12784#issuecomment-455122326","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1NTEyMjUwNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"thats how \\r works\n\n> On 17 Jan 2019, at 11:29, Boris Ryutin <notifications@github.com> wrote:\n> \n> I understand it, but this issue about that error messages corrupt normal informational messages from radare2 by overlapping them.\n> \n> [Invalid instruction of 16357 bytes at 0x100001a100 (aa)\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/12784#issuecomment-455122326>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lhnyhZ-FZpRk1k2KT6WYh3wxnhZzks5vEFCjgaJpZM4Z-67T>.\n> \n\n","createdAt":"2019-01-17T10:30:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12784#issuecomment-455122505","viewerDidAuthor":false}],"number":12784,"title":"Text of errors deteles info text of radare2"},{"body":"Like for finding changes where the amount of chars per block, etc","comments":[],"number":12780,"title":"The entropy section search command should support all p= subcommands"},{"body":"Visual browse projects","comments":[],"number":12776,"title":"Implement vbP"},{"body":"Like the dcu or dsu command, the pdu should disassemble until a specific condition is found.\r\n\r\n```\r\npdu 0x804804 @ 0x804600  # disassebmle from ..600 to ..804\r\n```\r\nAnother example would be\r\n\r\n```\r\npdur # disassemble until a ret instruction is found\r\n```\r\n\r\nOr maybe:\r\n```\r\npdub # print disasembly until end of block (branch or ret) or use anal info\r\n```\r\n\r\nUse esil to emulate the flow? with pdue?","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1Mzg4NTkyMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Same for piu","createdAt":"2019-01-14T01:49:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12775#issuecomment-453885922","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1NTkyOTIyNg==","author":{"login":"solomonbstoner"},"authorAssociation":"NONE","body":"This looks interesting. I'd like to give it a try to implement `pdu`. I'm half way through it now.","createdAt":"2019-01-21T02:23:45Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12775#issuecomment-455929226","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc1MzU3OTQ1OQ==","author":{"login":"eduardvercaemer"},"authorAssociation":"CONTRIBUTOR","body":"Was wondering if this is still being considered or worked on ? I may be able to work on it","createdAt":"2021-01-03T07:24:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12775#issuecomment-753579459","viewerDidAuthor":false}],"number":12775,"title":"Implement pdu command"},{"body":"Anal classes should be able to be marked as obfuscated in some way. This could easily be done by adding a new attribute.\r\n\r\nQuestions:\r\n- What information do we need to store? Just a bool or more?\r\n- Do we want to store it only for the whole class or maybe also per method?","comments":[],"number":12771,"title":"Add obfuscation info to anal classes"},{"body":"It would be nice to have recursive callgraphs. For example, agx and agc with a depth parameter. \r\nHere is a POC:\r\n'agx' and 2 depth levels, solved with a python r2pipe script.\r\nhttps://twitter.com/r2tips/status/1084410227565494273\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUxMDg0MjUzMA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"I suggest to add an optional depth parameter to the `agx`, this way it will be compatible (default depth would be 1).","createdAt":"2019-07-12T10:49:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12766#issuecomment-510842530","viewerDidAuthor":false}],"number":12766,"title":"recursive callgraphs (agx, agc ...)"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Debian 9 amd64 kernel 4.19.0-1-amd64\r\n| File format of the file you reverse (mandatory)      | ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 2.6.32, stripped\r\n| Architecture/bits of the file (mandatory)            | arch:x86 bits:64 (see below in logs `iI`)\r\n| r2 -v full output, **not truncated** (mandatory)     | rradare2 3.3.0-git 20686 @ linux-x86-64 git.3.2.0-41-g2f0b73d64 commit: 2f0b73d649e9ffbb7c4f639663d3cb0515b338d1 build: 2019-01-12__07:43:12\r\n\r\n### Expected behavior\r\nDebugging should go fine, as there is no int3 instruction in the original binary\r\n\r\n### Actual behavior\r\nint3 appears while stepping through the binary, failing the execution, this is very similar to #6223 which should be fixed back in 2016\r\nThe binary ran outside of debugger works fine, no traps or unexpected crashes\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\n```\r\n[0x0043a530]> iI\r\narch     x86\r\nbaddr    0x400000\r\nbinsz    808276\r\nbintype  elf\r\nbits     64\r\ncanary   false\r\nsanitiz  false\r\nclass    ELF64\r\ncrypto   false\r\nendian   little\r\nhavecode true\r\nintrp    /lib64/ld-linux-x86-64.so.2\r\nladdr    0x0\r\nlang     c++\r\nlinenum  false\r\nlsyms    false\r\nmachine  AMD x86-64 architecture\r\nmaxopsz  16\r\nminopsz  1\r\nnx       true\r\nos       linux\r\npcalign  0\r\npic      false\r\nrelocs   false\r\nrelro    no\r\nrpath    NONE\r\nstatic   false\r\nstripped true\r\nsubsys   linux\r\nva       true\r\n```\r\n\r\nBefore debugging, function, constructor of class (stripped of comments)\r\n```\r\n[0x0043a530]> s 0x00445e20\r\n[0x00445e20]> pd\r\n            ;-- LicenseManager::LicenseManager():\r\n            ;-- method.LicenseManager.LicenseManager:\r\n            0x00445e20      55             push rbp\r\n            0x00445e21      be40000000     mov esi, 0x40               ; '@' ; 64\r\n            0x00445e26      4889e5         mov rbp, rsp\r\n            0x00445e29      4155           push r13\r\n            0x00445e2b      4154           push r12\r\n            0x00445e2d      53             push rbx\r\n            0x00445e2e      4989fd         mov r13, rdi\r\n            0x00445e31      488d7f20       lea rdi, [rdi + 0x20]       ; 32\r\n            0x00445e35      4c8d65b0       lea r12, [rbp - 0x50]\r\n            0x00445e39      4883ec38       sub rsp, 0x38               ; '8'\r\n            0x00445e3d      48c747400000.  mov qword [rdi + 0x40], 0\r\n            0x00445e45      48c747480000.  mov qword [rdi + 0x48], 0\r\n            0x00445e4d      e8ae3effff     call sym.imp.gethostname\r\n            0x00445e52      be7e020000     mov esi, 0x27e              ; 638\r\n            0x00445e57      bf00874900     mov edi, 0x498700\r\n            0x00445e5c      e81f74ffff     call sym.GetEmbeddedData\r\n            0x00445e61      31c9           xor ecx, ecx\r\n            0x00445e63      31d2           xor edx, edx\r\n            0x00445e65      31f6           xor esi, esi\r\n            0x00445e67      4889c7         mov rdi, rax\r\n            0x00445e6a      4889c3         mov rbx, rax\r\n            0x00445e6d      e87e39ffff     call sym.imp.PEM_read_bio_PUBKEY\r\n            0x00445e72      bf89844900     mov edi, str.SHA1           ; 0x498489 ; \"SHA1\"\r\n            0x00445e77      49894510       mov qword [r13 + 0x10], rax\r\n            0x00445e7b      e8c044ffff     call sym.imp.EVP_get_digestbyname\r\n            0x00445e80      4889df         mov rdi, rbx\r\n            0x00445e83      49894518       mov qword [r13 + 0x18], rax\r\n            0x00445e87      31db           xor ebx, ebx\r\n            0x00445e89      e8523cffff     call sym.imp.BIO_free_all\r\n            0x00445e8e      e87dfbffff     call sym.GetSystemTag\r\n            0x00445e93      41c745080000.  mov dword [r13 + 8], 0\r\n            0x00445e9b      49894500       mov qword [r13], rax\r\n        ,=< 0x00445e9f      eb0b           jmp 0x445eac\r\n        |   0x00445ea1      0f1f80000000.  nop dword [rax]\r\n       .--> 0x00445ea8      498b4500       mov rax, qword [r13]\r\n       :`-> 0x00445eac      0fb61418       movzx edx, byte [rax + rbx]\r\n       :    0x00445eb0      4c89e7         mov rdi, r12\r\n       :    0x00445eb3      31c0           xor eax, eax\r\n       :    0x00445eb5      be024a4800     mov esi, 0x484a02\r\n       :    0x00445eba      4883c301       add rbx, 1\r\n       :    0x00445ebe      e83d43ffff     call sym.imp.sprintf\r\n       :    0x00445ec3      4898           cdqe\r\n       :    0x00445ec5      4901c4         add r12, rax                ; '#'\r\n       :    0x00445ec8      4883fb14       cmp rbx, 0x14               ; 20\r\n       `==< 0x00445ecc      75da           jne 0x445ea8\r\n            0x00445ece      488d55b0       lea rdx, [rbp - 0x50]\r\n            0x00445ed2      be8e844900     mov esi, str.System_Tag:__s ; 0x49848e ; \"System Tag: %s\\n\"\r\n            0x00445ed7      bf06000000     mov edi, 6\r\n            0x00445edc      31c0           xor eax, eax\r\n            0x00445ede      e8dd88ffff     call sym.report\r\n            0x00445ee3      4883c438       add rsp, 0x38               ; '8'\r\n            0x00445ee7      5b             pop rbx\r\n            0x00445ee8      415c           pop r12\r\n            0x00445eea      415d           pop r13\r\n            0x00445eec      5d             pop rbp\r\n            0x00445eed      c3             ret\r\n            0x00445eee      6690           nop\r\n```\r\n\r\nthen, stepping using `dso` will step to `0x00445e8e`, and next `dso` will trigger `signal 17`\r\n\r\n```\r\n[0x00445e61]> dso\r\nhit breakpoint at: 445e8e\r\n[0x00445e61]> dso\r\nchild stopped with signal 17\r\n[+] SIGNAL 17 errno=0 addr=0x3e800006253 code=1 ret=0\r\n[+] signal 17 aka SIGCHLD received 0\r\n[0x7f3b4b43851f]> s 0x00445e20\r\n[0x00445e20]> pd\r\n            ;-- LicenseManager::LicenseManager():\r\n            ;-- method.LicenseManager.LicenseManager:\r\n            0x00445e20      55             push rbp\r\n            0x00445e21      be40000000     mov esi, 0x40               ; '@' ; 64\r\n            0x00445e26      4889e5         mov rbp, rsp\r\n            0x00445e29      4155           push r13\r\n            0x00445e2b      4154           push r12\r\n            0x00445e2d      53             push rbx\r\n            0x00445e2e      4989fd         mov r13, rdi\r\n            0x00445e31      488d7f20       lea rdi, [rdi + 0x20]       ; 32\r\n            0x00445e35      4c8d65b0       lea r12, [rbp - 0x50]\r\n            0x00445e39      4883ec38       sub rsp, 0x38               ; '8'\r\n            0x00445e3d      48c747400000.  mov qword [rdi + 0x40], 0\r\n            0x00445e45      48c747480000.  mov qword [rdi + 0x48], 0\r\n            0x00445e4d      e8ae3effff     call sym.imp.gethostname\r\n            0x00445e52      be7e020000     mov esi, 0x27e              ; 638\r\n            0x00445e57      bf00874900     mov edi, 0x498700\r\n            0x00445e5c      e81f74ffff     call sym.GetEmbeddedData\r\n            0x00445e61      31c9           xor ecx, ecx\r\n            0x00445e63      31d2           xor edx, edx\r\n            0x00445e65      31f6           xor esi, esi\r\n            0x00445e67      4889c7         mov rdi, rax\r\n            0x00445e6a      4889c3         mov rbx, rax\r\n            0x00445e6d      e87e39ffff     call sym.imp.PEM_read_bio_PUBKEY\r\n            0x00445e72      bf89844900     mov edi, str.SHA1           ; 0x498489 ; \"SHA1\"\r\n            0x00445e77      49894510       mov qword [r13 + 0x10], rax\r\n            0x00445e7b      e8c044ffff     call sym.imp.EVP_get_digestbyname\r\n            0x00445e80      4889df         mov rdi, rbx\r\n            0x00445e83      49894518       mov qword [r13 + 0x18], rax\r\n            0x00445e87      31db           xor ebx, ebx\r\n            0x00445e89      e8523cffff     call sym.imp.BIO_free_all\r\n            0x00445e8e      e87dfbffff     call sym.GetSystemTag\r\n            0x00445e93      cc             int3\r\n            0x00445e94      c74508000000.  mov dword [rbp + 8], 0      ; [0x8:4]=-1 ; 0\r\n            0x00445e9b      49894500       mov qword [r13], rax\r\n        ,=< 0x00445e9f      eb0b           jmp 0x445eac\r\n        |   0x00445ea1      0f1f80000000.  nop dword [rax]\r\n       .--> 0x00445ea8      498b4500       mov rax, qword [r13]\r\n       :`-> 0x00445eac      0fb61418       movzx edx, byte [rax + rbx]\r\n       :    0x00445eb0      4c89e7         mov rdi, r12\r\n       :    0x00445eb3      31c0           xor eax, eax\r\n       :    0x00445eb5      be024a4800     mov esi, 0x484a02\r\n       :    0x00445eba      4883c301       add rbx, 1\r\n       :    0x00445ebe      e83d43ffff     call sym.imp.sprintf\r\n       :    0x00445ec3      4898           cdqe\r\n       :    0x00445ec5      4901c4         add r12, rax                ; '#'\r\n       :    0x00445ec8      4883fb14       cmp rbx, 0x14               ; 20\r\n       `==< 0x00445ecc      75da           jne 0x445ea8\r\n            0x00445ece      488d55b0       lea rdx, [rbp - 0x50]\r\n            0x00445ed2      be8e844900     mov esi, str.System_Tag:__s ; 0x49848e ; \"System Tag: %s\\n\"\r\n            0x00445ed7      bf06000000     mov edi, 6\r\n            0x00445edc      31c0           xor eax, eax\r\n            0x00445ede      e8dd88ffff     call sym.report\r\n            0x00445ee3      4883c438       add rsp, 0x38               ; '8'\r\n            0x00445ee7      5b             pop rbx\r\n            0x00445ee8      415c           pop r12\r\n            0x00445eea      415d           pop r13\r\n            0x00445eec      5d             pop rbp\r\n            0x00445eed      c3             ret\r\n            0x00445eee      6690           nop\r\n```\r\n\r\nSee the `0x00445e93      cc             int3` appeared out of nowhere.\r\n\r\nNo breakpoints were set manually, only those auto-created by `dcu` and `dso` were observed\r\n\r\nThe binary I sadly cannot share publicly","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1MzczMDkxMw==","author":{"login":"smarek"},"authorAssociation":"NONE","body":"I've just also verified, that running the same binary with same arguments through GDB, will proceed correctly with execution past mentioned code blocks","createdAt":"2019-01-12T08:43:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12752#issuecomment-453730913","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1Mzg0NjQ1NA==","author":{"login":"smarek"},"authorAssociation":"NONE","body":"Stepping into the execution, further down the stack, it seems like function `hd_list` is problematic, or it's debugger execution.\r\nI'm not able to pinpoint where or why the debugger decides to go with fatal error\r\n\r\n```\r\n[0x0043a530]> f~hd_list\r\n0x006c4ac8 8 reloc.hd_list\r\n0x006c4d60 8 reloc.hd_free_hd_list\r\n0x00439d20 16 sym.imp.hd_list\r\n0x0043a250 16 sym.imp.hd_free_hd_list\r\n[0x0043a530]> s reloc.hd_list\r\n[0x006c4ac8]> pd 10\r\n            ;-- reloc.hd_list:\r\n            0x006c4ac8      .qword 0x0000000000439d26                  ; RELOC 64 hd_list\r\n            ;-- reloc.dbus_connection_ref:\r\n            0x006c4ad0      .qword 0x0000000000439d36                  ; RELOC 64 dbus_connection_ref\r\n            ;-- reloc.sigemptyset:\r\n            0x006c4ad8      .qword 0x0000000000439d46                  ; RELOC 64 sigemptyset\r\n            ;-- reloc.sigaction:\r\n            0x006c4ae0      .qword 0x0000000000439d56                  ; RELOC 64 sigaction\r\n            ;-- reloc.sqlite3_prepare_v2:\r\n            0x006c4ae8      .qword 0x0000000000439d66                  ; RELOC 64 sqlite3_prepare_v2\r\n            ;-- reloc.malloc:\r\n            0x006c4af0      .qword 0x0000000000439d76                  ; RELOC 64 malloc\r\n            ;-- reloc.mosquitto_loop_read:\r\n            0x006c4af8      .qword 0x0000000000439d86                  ; RELOC 64 mosquitto_loop_read\r\n            ;-- reloc.mosquitto_new:\r\n            0x006c4b00      .qword 0x0000000000439d96                  ; RELOC 64 mosquitto_new\r\n            ;-- reloc.dbus_watch_get_unix_fd:\r\n            0x006c4b08      .qword 0x0000000000439da6                  ; RELOC 64 dbus_watch_get_unix_fd\r\n            ;-- reloc.tnt_next:\r\n            0x006c4b10      .qword 0x0000000000439db6                  ; RELOC 64 tnt_next\r\n[0x006c4ac8]> s sym.imp.hd_list\r\n[0x00439d20]> pd 10\r\n      :::   ;-- imp.hd_list:\r\n      :::   0x00439d20      ff25a2ad2800   jmp qword reloc.hd_list     ; [0x6c4ac8:8]=0x439d26 ; \"&\\x9dC\"\r\n      :::   0x00439d26      68e2000000     push 0xe2                   ; 226\r\n      `===< 0x00439d2b      e9c0f1ffff     jmp 0x438ef0\r\n       ::   ;-- imp.dbus_connection_ref:\r\n       ::   0x00439d30      ff259aad2800   jmp qword reloc.dbus_connection_ref ; [0x6c4ad0:8]=0x439d36 ; \"6\\x9dC\"\r\n       ::   0x00439d36      68e3000000     push 0xe3                   ; 227\r\n       `==< 0x00439d3b      e9b0f1ffff     jmp 0x438ef0\r\n        :   ;-- imp.sigemptyset:\r\n        :   0x00439d40      ff2592ad2800   jmp qword reloc.sigemptyset ; [0x6c4ad8:8]=0x439d46 ; \"F\\x9dC\"\r\n        :   0x00439d46      68e4000000     push 0xe4                   ; 228\r\n        `=< 0x00439d4b      e9a0f1ffff     jmp 0x438ef0\r\n            ;-- imp.sigaction:\r\n            0x00439d50      ff258aad2800   jmp qword reloc.sigaction   ; [0x6c4ae0:8]=0x439d56 ; \"V\\x9dC\"\r\n```\r\n\r\nstepping into the error seems like this\r\n\r\n```\r\n> r2 -r binary.rr2 -d binary.bin \r\nProcess with PID 1828 started...\r\n= attach 1828 1828\r\nbin.baddr 0x00400000\r\nUsing 0x400000\r\nasm.bits 64\r\n -- It's not you, it's me.\r\n[0x7f62efbb7090]> s main\r\n[0x0043a530]> db\r\n[0x0043a530]> db reloc.hd_list\r\n[0x0043a530]> db sym.imp.hd_list\r\n[0x0043a530]> db\r\n0x006c4ac8 - 0x006c4ac9 1 --x sw break enabled cmd=\"\" cond=\"\" name=\"reloc.hd_list\" module=\"--truncated--\"\r\n0x00439d20 - 0x00439d21 1 --x sw break enabled cmd=\"\" cond=\"\" name=\"sym.imp.hd_list\" module=\"--truncated--\"\r\n[0x7f62efbb7090]> dc\r\nhit breakpoint at: 439d20\r\n[0x00439d20]> f~hd_list\r\n0x006c4ac8 8 reloc.hd_list\r\n0x006c4d60 8 reloc.hd_free_hd_list\r\n0x00439d20 16 sym.imp.hd_list\r\n0x0043a250 16 sym.imp.hd_free_hd_list\r\n[0x00439d20]> s sym.imp.hd_list\r\n[0x00439d20]> fd 5\r\nrsi + 3\r\n[0x00439d20]> pd 5\r\n        :   ;-- imp.hd_list:\r\n        :   ;-- rip:\r\n        :   0x00439d20 b    ff25a2ad2800   jmp qword reloc.hd_list     ; [0x6c4ac8:8]=0x439d26 ; \"&\\x9dC\"\r\n        :   0x00439d26      68e2000000     push 0xe2                   ; 226\r\n        `=< 0x00439d2b      e9c0f1ffff     jmp 0x438ef0\r\n            ;-- imp.dbus_connection_ref:\r\n            0x00439d30      ff259aad2800   jmp qword reloc.dbus_connection_ref ; [0x6c4ad0:8]=0x439d36 ; \"6\\x9dC\"\r\n            0x00439d36      68e3000000     push 0xe3                   ; 227\r\n[0x00439d20]> dso\r\n[0x00439d20]> pd 5\r\n        :   ;-- imp.hd_list:\r\n        :   0x00439d20 b    ff25a2ad2800   jmp qword reloc.hd_list     ; [0x6c4ac8:8]=0x439d26 rip ; \"&\\x9dC\"\r\n        :   ;-- rip:\r\n        :   0x00439d26      68e2000000     push 0xe2                   ; 226\r\n        `=< 0x00439d2b      e9c0f1ffff     jmp 0x438ef0\r\n            ;-- imp.dbus_connection_ref:\r\n            0x00439d30      ff259aad2800   jmp qword reloc.dbus_connection_ref ; [0x6c4ad0:8]=0x439d36 ; \"6\\x9dC\"\r\n            0x00439d36      68e3000000     push 0xe3                   ; 227\r\n[0x00439d20]> dso\r\n[0x00439d20]> pd 5\r\n        :   ;-- imp.hd_list:\r\n        :   0x00439d20 b    ff25a2ad2800   jmp qword reloc.hd_list     ; [0x6c4ac8:8]=0x439d26 ; \"&\\x9dC\"\r\n        :   0x00439d26      68e2000000     push 0xe2                   ; 226\r\n        |   ;-- rip:\r\n        `=< 0x00439d2b      e9c0f1ffff     jmp 0x438ef0\r\n            ;-- imp.dbus_connection_ref:\r\n            0x00439d30      ff259aad2800   jmp qword reloc.dbus_connection_ref ; [0x6c4ad0:8]=0x439d36 ; \"6\\x9dC\"\r\n            0x00439d36      68e3000000     push 0xe3                   ; 227\r\n[0x00439d20]> dso\r\n[0x00438ef0]> pd 5\r\n            ;-- section..plt:\r\n            ;-- rip:\r\n            0x00438ef0      ff35b2b42800   push qword [0x006c43a8]     ; [12] -r-x section size 5664 named .plt\r\n            0x00438ef6      ff25b4b42800   jmp qword [0x006c43b0]      ; [0x6c43b0:8]=0x7f62efbcb510\r\n            0x00438efc      0f1f4000       nop dword [rax]\r\n            ;-- imp.snd_pcm_writei:\r\n            0x00438f00      ff25b2b42800   jmp qword reloc.snd_pcm_writei ; [0x6c43b8:8]=0x438f06\r\n            0x00438f06      6800000000     push 0\r\n[0x00438ef0]> dso\r\n[0x00438ef0]> pd 5\r\n            ;-- section..plt:\r\n            0x00438ef0      ff35b2b42800   push qword [0x006c43a8]     ; [12] -r-x section size 5664 named .plt\r\n            ;-- rip:\r\n            0x00438ef6      ff25b4b42800   jmp qword [0x006c43b0]      ; [0x6c43b0:8]=0x7f62efbcb510\r\n            0x00438efc      0f1f4000       nop dword [rax]\r\n            ;-- imp.snd_pcm_writei:\r\n            0x00438f00      ff25b2b42800   jmp qword reloc.snd_pcm_writei ; [0x6c43b8:8]=0x438f06\r\n            0x00438f06      6800000000     push 0\r\n[0x00438ef0]> dso \r\n[0x7f62efbcb510]> dc\r\nchild stopped with signal 17\r\n[+] SIGNAL 17 errno=0 addr=0x3e800000776 code=1 ret=0\r\n[+] signal 17 aka SIGCHLD received 0\r\n```","createdAt":"2019-01-13T17:00:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12752#issuecomment-453846454","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1Mzg1NjI3NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"you can use hw bps with  dbg.hwbp=true and the int3 shouldnt appear. but all those breakpoints should be set and unset when returning from the process, so it's a bug","createdAt":"2019-01-13T19:02:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12752#issuecomment-453856274","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1Mzg2MjAzMg==","author":{"login":"smarek"},"authorAssociation":"NONE","body":"@radare thanks, there is indeed something wrong, and I think it is in multi-thread debugging support, also hwbp has issues itself\r\n\r\nsee following\r\n\r\n  - [ ] drx is not documented in db? (which is confusing only for newcomers probably)\r\n  - [ ] dcr using hwbp hits multiple breakpoints without breaking ???\r\n  - [ ] dcr somehow infinite-looped for me, see last log\r\n\r\n```\r\n[0x7fe12b12301d]> dcu sym.GetSystemTag \r\nContinue until 0x00445a10 using 1 bpsize\r\nhit breakpoint at: 445a10\r\n[0x00445a10]> drx\r\n- dr0 Lx 0x00000000 1\r\n- dr1 Lx 0x00000000 1\r\n- dr2 Lx 0x00000000 1\r\n- dr3 Lx 0x00000000 1\r\n- dr6 Lx 0x00000000 1\r\n- dr7 Lx 0x00000000 1\r\n[0x00445a10]> db\r\n[0x00445a10]> dcr\r\nhit breakpoint at: 445a47\r\nhit breakpoint at: 445ab5\r\nhit breakpoint at: 445adb\r\nhit breakpoint at: 445af0\r\nhit breakpoint at: 445aff\r\nchild stopped with signal 17\r\n[+] SIGNAL 17 errno=0 addr=0x3e800004233 code=1 ret=0\r\n[+] signal 17 aka SIGCHLD received 0\r\n```\r\n\r\ninfinite loop\r\n```\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc969ea\r\nhit breakpoint at: 7f4a2cc969fc\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc969ea\r\nhit breakpoint at: 7f4a2cc969fc\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\nhit breakpoint at: 7f4a2cc968cb\r\nhit breakpoint at: 7f4a2cc968ee\r\nhit breakpoint at: 7f4a2cc968a5\r\n-- snip --\r\nCTRL+C resulted in:\r\n[+] SIGNAL 2 errno=0 addr=0x00000000 code=128 ret=0\r\n\r\nkilling the r2 from outside resulted in multiple (as many as \"hit breakpoint at\" messages)\r\n[+] SIGNAL 11 errno=0 addr=0x00000000 code=1 ret=0\r\n```","createdAt":"2019-01-13T20:18:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12752#issuecomment-453862032","viewerDidAuthor":false}],"number":12752,"title":"unexpected int3 in debugging"},{"body":"(And maybe improve pf too)\r\n\r\n* [ ] 8,16,24,32,64 bit signed, unsigned\r\n* [ ] 16, 32, 64, 80 float pointer\r\n","comments":[],"number":12748,"title":"Improve ? with more type views"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Fedora 29\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86-64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.3.0-git 22269 @ linux-x86-64 git.3.2.0-39-gd40178a23\r\ncommit: d40178a23fc59d20b52a9b0c9151e2da436a9108 build: 2019-01-11__14:06:04\r\n\r\n### Expected behavior\r\n```\r\n[0x00003ad0]> afv~rsi\r\narg char ** argv @ rsi\r\n[0x00003ad0]> pdi 14 @ main\r\n0x00003ad0    section..text:\r\n0x00003ad0                 4157  push r15\r\n0x00003ad2                 4156  push r14\r\n0x00003ad4                 4155  push r13\r\n0x00003ad6                 4154  push r12\r\n0x00003ad8               4989f4  mov r12, rsi\r\n0x00003adb                   55  push rbp\r\n0x00003adc                   53  push rbx\r\n0x00003add                 89fd  mov ebp, edi\r\n0x00003adf       4881eca8030000  sub rsp, 0x3a8\r\n0x00003ae6               488b3e  mov rdi, qword [rsi]\r\n0x00003ae9   64488b042528000000  mov rax, qword fs:[0x28]\r\n0x00003af2     4889842498030000  mov qword [rsp + 0x398], rax\r\n0x00003afa                 31c0  xor eax, eax\r\n0x00003afc           e87fb30000  call sub.strrchr_ee80\r\n[0x00003ad0]> afv @ sub.strrchr_ee80\r\narg char * arg1 @ rdi\r\n```\r\n\r\n### Actual behavior\r\n```\r\n[0x00003ad0]> afv~rsi\r\narg char ** argv @ rsi\r\n[0x00003ad0]> pdi 14 @ main\r\n0x00003ad0    section..text:\r\n0x00003ad0                 4157  push r15\r\n0x00003ad2                 4156  push r14\r\n0x00003ad4                 4155  push r13\r\n0x00003ad6                 4154  push r12\r\n0x00003ad8               4989f4  mov r12, rsi\r\n0x00003adb                   55  push rbp\r\n0x00003adc                   53  push rbx\r\n0x00003add                 89fd  mov ebp, edi\r\n0x00003adf       4881eca8030000  sub rsp, 0x3a8\r\n0x00003ae6               488b3e  mov rdi, qword [rsi]\r\n0x00003ae9   64488b042528000000  mov rax, qword fs:[0x28]\r\n0x00003af2     4889842498030000  mov qword [rsp + 0x398], rax\r\n0x00003afa                 31c0  xor eax, eax\r\n0x00003afc           e87fb30000  call sub.strrchr_ee80\r\n[0x00003ad0]> afv @ sub.strrchr_ee80\r\narg int arg1 @ rdi\r\n```\r\n\r\n### Steps to reproduce the behavior \r\n```\r\n$ r2 -A r2r/bins/elf/analysis/ls-linux64\r\n> s main\r\n> afv~rsi\r\n> pdi 14 @ main\r\n> afv @ sub.strrchr_ee80\r\n```","comments":[],"number":12747,"title":"type propagation: char* not propagate to called function in x86-64"},{"body":"Like with tables but for creating hierarchical  output. Might be beneficial in multiple commands, `pf`, `tp`, `dmh`, etc","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1NjM1OTE2OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"what about implementing all that stuff on top of json?\n\n> On 11 Jan 2019, at 11:13, Anton Kochkov <notifications@github.com> wrote:\n> \n> Like with tables but for creating hierarchical output. Might be beneficial in multiple commands, pf, tp, dmh, etc\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/12745>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lsmwwnZTLtR2YFfmLWqG5mUMD-Flks5vCGPNgaJpZM4Z7Kb9>.\n> \n\n","createdAt":"2019-01-22T11:01:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/12745#issuecomment-456359168","viewerDidAuthor":false}],"number":12745,"title":"Generic \"tree\" command/API"},{"body":"Different strings/flags/etc may easily become the same because of the r_name_filter function, which converts special chars to `_` and remove trailing and leading `_`. Thus `\\nHello World`, becomes `str.Hello_World` and `Hello World\\n` becomes `str.Hello_World`. This means that only one of the two flags would be stored.","comments":[],"number":12741,"title":"r_name_filter filters too much"},{"body":"r2r broken test: https://github.com/radare/radare2-regressions/commit/19ccc45154ca69041b8432147197738a453419e5\r\n\r\nELF parser should not rely on sections to compute relocations because they are not used by the loader. The loader uses the info provided in the DT_DYNAMIC segment.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYwNzgwNzI1MA==","author":{"login":""},"authorAssociation":"NONE","body":"Hi could you indicate where i should look in the code if i want override this behavior with a lookup on the DT_DYNAMIC segment.","createdAt":"2020-04-02T12:10:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12732#issuecomment-607807250","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwNzgxNDcyMg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@08A Hi, I would start from `Elf_(r_bin_elf_get_relocs)` defined in `libr/bin/format/elf/elf.c`. As you can see it iterates over the sections looking for `.rela` or `.rel` sections. As said, loaders don't really care about sections, but they do use the information in the DT_DYNAMIC segment to find out relocations (I cannot tell you the exact details as I don't remember them anymore, but I guess the entries PLTRELSZ, PLTREL, JMPREL, RELA, RELASZ, RELAENT, RELACOUNT may help). Also, looking at the source code of the linux dynamic loader may help.","createdAt":"2020-04-02T12:26:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12732#issuecomment-607814722","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwOTA0MjMyMQ==","author":{"login":""},"authorAssociation":"NONE","body":"@ret2libc There is in libr/bin/format/elf/elf.c an interesting function init_dynamic_section. I was wondering if i could modify this function and the struct ELFOBJ? I could add DT_RELA, DT_REL, ..","createdAt":"2020-04-04T15:06:50Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12732#issuecomment-609042321","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMDk4NTc2Ng==","author":{"login":""},"authorAssociation":"NONE","body":"I move here the list of possible refacto:\r\n\r\n - rel_cache_new and Elf_(r_bin_elf_get_relocs) (same behaviour different data structure, maybe replace by the new implementation or reused inside rel_cache_new)\r\n- move struct dynamic_relocation_section inside ELFOBJ\r\n- move the function get_dynamic_info inside init_dynamic_section\r\n- remove is_rela inside ELFOBJ\r\n","createdAt":"2020-04-08T14:16:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12732#issuecomment-610985766","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMTU1Nzc1MQ==","author":{"login":""},"authorAssociation":"NONE","body":"I am trying to remove the `struct ht_rel_t` but in the function `get_import_addr_ppc` k is used:\r\n`rel->k`.\r\nWhat is the purpose of the field?","createdAt":"2020-04-09T14:27:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12732#issuecomment-611557751","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMTU2NTcyMw==","author":{"login":""},"authorAssociation":"NONE","body":"I have no idea what `get_import_addr` is searching.","createdAt":"2020-04-09T14:41:50Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12732#issuecomment-611565723","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMTU3MjQwMw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"> I am trying to remove the `struct ht_rel_t` but in the function `get_import_addr_ppc` k is used:\r\n> `rel->k`.\r\n> What is the purpose of the field?\r\n\r\nAFAIS that is the position of the reloc entry in the relocations. IIRC ppc has some kind of relocation types that compute the final address based on the position of the relocation entry (or something like that, I don't remember exactly sorry).","createdAt":"2020-04-09T14:54:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12732#issuecomment-611572403","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMTY3NDQxMw==","author":{"login":""},"authorAssociation":"NONE","body":"I am not sure what the function get_import_addr is doing, do you have any idea?\r\nAnd maybe some documentation.","createdAt":"2020-04-09T18:10:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12732#issuecomment-611674413","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMTcxOTY5Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Its documented in C\n\n> On 9 Apr 2020, at 20:10, Alexis Ehret <notifications@github.com> wrote:\n> \n> ï»¿\n> I am not sure what the function get_import_addr is doing, do you have any idea?\n> And maybe some documentation.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-04-09T19:47:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12732#issuecomment-611719696","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMTc3NzA5NQ==","author":{"login":""},"authorAssociation":"NONE","body":"> Its documented in C\r\n\r\nThis part of the code base is a real spaghetti code without any context it take me 3 hour to understand that it was the addr inside the plt.\r\n\r\nI am rewriting this part and i was wandering how to get the base addr of the got.\r\nMy idea was take the first lazy binding inside the got.\r\n```\r\n            ;-- section..got:\r\n            0x00022c58      .qword 0x0000000000022a58 ; section..dynamic ; segment.DYNAMIC ; [22] -rw- section size 920 named .got\r\n            0x00022c60      .qword 0x0000000000000000\r\n            0x00022c68      .qword 0x0000000000000000\r\n            ;-- reloc.__cxa_atexit:\r\n            0x00022c70      .qword 0x0000000000004036                  ; RELOC 64 __cxa_atexit\r\n```\r\nDeref the ptr\r\n```\r\n        â•Ž   0x00004036      6800000000     push 0\r\n        â””â”€< 0x0000403b      e9e0ffffff     jmp section..plt\r\n            ;-- section..text:\r\n```\r\nDo some magic\r\n```\r\n            ;-- section..plt:\r\n        â”Œâ”€> 0x00004020      ff353aec0100   push qword [0x00022c60]     ; [12] -r-x section size 32 named .plt\r\n        â•Ž   0x00004026      ff253cec0100   jmp qword [0x00022c68]      ; [0x22c68:8]=0\r\n        â•Ž   0x0000402c      0f1f4000       nop dword [rax]\r\n        â•Ž   0x00004030      ff253aec0100   jmp qword [reloc.__cxa_atexit] ; [0x22c70:8]=0x4036 ; \"6@\"\r\n        â•Ž   0x00004036      6800000000     push 0\r\n        â””â”€< 0x0000403b      e9e0ffffff     jmp section..plt\r\n            ;-- section..text:\r\n```\r\n\r\nBut i can't read the got with `r_buf_read_at (bin->b, first_lazy_entry, buf, 0x8);`, the function seems to fail, is this a normal behavior?\r\n","createdAt":"2020-04-09T22:09:33Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12732#issuecomment-611777095","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMTkyMjM3Nw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Hi @08A . Why are you rewriting that part of the code? Why do you need new logic to compute the addresses when there is already one?\r\n\r\nBy the way, about using sections vs segments, I think that function is partially wrong as well as it relies on sections by name, instead of using the dynamic entries.","createdAt":"2020-04-10T07:48:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12732#issuecomment-611922377","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMTk2NjQyMQ==","author":{"login":""},"authorAssociation":"NONE","body":"I was refactoring the rel_cache_new and i discover this function that was like you said wrong because it relies on sections by name.","createdAt":"2020-04-10T09:58:07Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12732#issuecomment-611966421","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMTk2Njc4OQ==","author":{"login":""},"authorAssociation":"NONE","body":"My only problem right now is get the value in the got.","createdAt":"2020-04-10T09:59:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12732#issuecomment-611966789","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMTk5NTU4NQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@08A I think existing code is already doing that, so I suggest that you adapt the code but you change as little as possible. For example, I think you can find the code in `get_import_addr_x86` in the `R_386_JMP_SLOT` switch-case. In general, I believe the approach in RBin to get what you want is to get the file offset of the section and read it from there. If you already have the virtual address and you want to get the file offset, you should use `Elf_(r_bin_elf_v2p_new)` and then you can read data at that address in the file.","createdAt":"2020-04-10T11:44:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12732#issuecomment-611995585","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMjQxOTg3Ng==","author":{"login":""},"authorAssociation":"NONE","body":"```\r\n[XX] db/formats/elf/symbols symbols with no sections header information 3\r\nR2_NOPLUGINS=1 radare2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Qc is ../bins/elf/libmemalloc-dump-mem\r\n-- stdout\r\n```\r\n\r\ni don't have the same result than the example but i am pretty sure my result is valid, it is the only arm test that fail. \r\n\r\n```\r\n-1    0x00000000 0x00000000 GLOBAL FUNC   16       imp.__cxa_finalize\r\n-2    0x00000000 0x00000000 GLOBAL FUNC   16       imp.__cxa_atexit\r\n+1    0x00001050 0x00001050 GLOBAL FUNC   16       imp.__cxa_finalize\r\n+2    0x0000105c 0x0000105c GLOBAL FUNC   16       imp.__cxa_atexit\r\n```\r\nI can find addresses that the previous implementation couldn't find (it was based on section name)\r\n\r\nCan i have your opinion about this.","createdAt":"2020-04-11T13:20:36Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12732#issuecomment-612419876","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMjQyNTEzOQ==","author":{"login":""},"authorAssociation":"NONE","body":"```\r\n[XX] db/formats/elf/symbols symbols non common LD script\r\nR2_NOPLUGINS=1 radare2 -escr.utf8=0 -escr.color=0 -escr.interactive=0 -N -Qc is ../bins/elf/analysis/custom_ldscript\r\n-- stdout\r\n--- .a  2020-04-11 15:45:26.501957104 +0200\r\n+++ .b  2020-04-11 15:45:26.501957104 +0200\r\n@@ -26,7 +26,7 @@\r\n22   0x00200844 0x01c00844 LOCAL  SECT   0        .custom_text\r\n23   ---------- 0x00000000 LOCAL  SECT   0        .comment\r\n24   ---------- 0x00000000 LOCAL  FILE   0        custom_ldscript.c\r\n-25   ---------- 0x00000000 LOCAL  FILE   0\r\n+25   ---------- 0x00000000 LOCAL  FILE   0\r\n26   0x00000660 0x00600660 LOCAL  NOTYPE 0        __init_array_end\r\n27   0x00000660 0x00600660 LOCAL  OBJ    0        _DYNAMIC\r\n28   0x00000660 0x00600660 LOCAL  NOTYPE 0        __init_array_start\r\n```\r\n\r\n~And this test result seems strange.~\r\nit was just some whitespace","createdAt":"2020-04-11T13:47:17Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12732#issuecomment-612425139","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyMDU3NTk4Ng==","author":{"login":""},"authorAssociation":"NONE","body":"@ret2libc Hi, i was starting a small refacto, the idea was limiting the usage of `Elf_(Dyn) *dyn_buf;` inside `ELFOBJ`.\r\n\r\nSome entrie like `DT_RUNPATH` could have a valid value of 0. But inside `struct Elf_(r_bin_elf_dynamic_info)` the default value is 0. So we need to init the struct with the value -1.\r\n\r\nThe only problem is that the definition of `Elf_(Addr)` and `Elf_(Xword)` have a different size\r\n```\r\n  42 /* Types for signed and unsigned 64-bit quantities.  */\r\n  43 typedef uint64_t Elf32_Xword;\r\n  44 typedef int64_t  Elf32_Sxword;\r\n  45 typedef uint64_t Elf64_Xword;\r\n  46 typedef int64_t  Elf64_Sxword;\r\n  47\r\n  48 /* Type of addresses.  */\r\n  49 typedef uint32_t Elf32_Addr;\r\n  50 typedef uint64_t Elf64_Addr;\r\n```\r\n\r\nSo i was wandering what you prefer?\r\nCreate 2 macro `Elf_(Xword_MAX)` and `Elf_(Addr_MAX)`\r\nor define the `struct Elf_(r_bin_elf_dynamic_info)` with ut64?\r\n\r\nLast option forget the problem and switch to another task","createdAt":"2020-04-28T12:32:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12732#issuecomment-620575986","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyMDU3OTYwOQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"> Create 2 macro Elf_(Xword_MAX) and Elf_(Addr_MAX)\r\n\r\ni'd say this one.","createdAt":"2020-04-28T12:38:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12732#issuecomment-620579609","viewerDidAuthor":false}],"number":12732,"title":"do not rely on section info when DT_DYNAMIC is available"},{"body":"i think offset should go first, like it does in px or pd\r\n\r\n```\r\n[0x00000000]> pf xxd foo bar cow\r\n foo : 0x00000000 = 0xfeedfacf\r\n bar : 0x00000004 = 0x01000007\r\n cow : 0x00000008 = 2147483651\r\n```\r\n\r\nshould be\r\n\r\n```\r\n[0x00000000]> pf xxd foo bar cow\r\n0x00000000  foo 0xfeedfacf\r\n0x00000004  bar 0x01000007\r\n0x00000008  cow 2147483651\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1MzA1MTUyMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"also, the value should be aligned in column","createdAt":"2019-01-10T10:44:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12726#issuecomment-453051522","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NDA0MzE5MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Sounds good to me, just keep the equal sign:\r\n```\r\n0x00000000:  foo = 0xfeedfacf\r\n0x00000004:  bar = 0x01000007\r\n0x00000008:  cow = 2147483651\r\n```","createdAt":"2019-04-17T11:22:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12726#issuecomment-484043191","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NDA0Mzk3Mw==","author":{"login":"kazarmy"},"authorAssociation":"CONTRIBUTOR","body":"ðŸ‘  though no need for double spacing and the colon I suppose\r\n```\r\n0x00000000 foo = 0xfeedfacf\r\n0x00000004 bar = 0x01000007\r\n0x00000008 cow = 2147483651\r\n```","createdAt":"2019-04-17T11:25:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12726#issuecomment-484043973","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5NjA3NjY3NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@radare so, what was decided on this one? I think you got your feedback already.","createdAt":"2019-05-27T04:52:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12726#issuecomment-496076675","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzMzkzNTc4OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"will be good to add pft to show the output of pf in table format. this way we can query the output\r\n\r\nif we add proper csv support (or json) we will get more features in many places. it will be mainly useful when displaying arrays of structs","createdAt":"2019-09-23T01:06:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12726#issuecomment-533935788","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzNDA1MzE4OA==","author":{"login":"kazarmy"},"authorAssociation":"CONTRIBUTOR","body":"sgtm\r\n\r\n```\r\n0x00000000: foo = 0xfeedfacf\r\n0x00000004: bar = 0x01000007\r\n0x00000008: cow = 2147483651\r\n0x0000000c: 0xcc7811a78\r\n```\r\n\r\ni want to add a colon for formats with no labels","createdAt":"2019-09-23T11:05:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12726#issuecomment-534053188","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzNDE1MjY1Mw==","author":{"login":"kazarmy"},"authorAssociation":"CONTRIBUTOR","body":"bad news, this is more work than previously thought ... in particular, (nearly?) every `r_print_format_<type>()` function  has code that prints `<offset> = <value>`","createdAt":"2019-09-23T15:30:26Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12726#issuecomment-534152653","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzNDUwNzY1NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Yep. The pf code hurts a bit. It requires a lot of love and it always needed it. But its improving over time, so dont be afraid\n\n>> On 23 Sep 2019, at 17:30, Khairul Azhar Kasmiran <notifications@github.com> wrote:\n> ï»¿\n> bad news, this is more work than previously thought ... (nearly?) every r_print_format_<type>() function has code that prints <offset> = <value>\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-09-24T11:03:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12726#issuecomment-534507655","viewerDidAuthor":false}],"number":12726,"title":"pf output is confusing"},{"body":"Right now it's possible to see the format (with `pf`) of the ELF header, of a PHDR and of a SHDR.\r\nThis issue is about adding support for the Dynamic Entries in the PT_DYNAMIC segment.\r\n\r\n```\r\ntypedef struct\r\n{\r\n  Elf32_Sword\td_tag;\t\t\t/* Dynamic entry type */\r\n  union\r\n    {\r\n      Elf32_Word d_val;\t\t\t/* Integer value */\r\n      Elf32_Addr d_ptr;\t\t\t/* Address value */\r\n    } d_un;\r\n} Elf32_Dyn;\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ4NDA0MjcwMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"pfc prints C now. not sure if unions should be working too. but we want better types-header-sstructs-format integration","createdAt":"2019-04-17T11:20:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12724#issuecomment-484042702","viewerDidAuthor":false}],"number":12724,"title":"RFE: add support for pf.elf_dyn_entry"},{"body":"* [ ] The '=' command should list not only the active connections but also the listening servers\r\n* [ ] Use the tasks instead of raw threads.\r\n* [ ] Test and improve the =& command to run background servers\r\n* [ ] Test r2p\r\n* [ ] Add r2pipe:// \r\n* [ ] Test http\r\n* [ ] Support https\r\n\r\n...","comments":[],"number":12707,"title":"Proper background support for remote commands '='"},{"body":"https://www.riscosopen.org/content/downloads/common","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU3MzA5OTY5Mw==","author":{"login":"adwait1-g"},"authorAssociation":"CONTRIBUTOR","body":"I would like to work on this issue.\r\n\r\nThere are 3 file formats - one each for object files, shared libraries and executables. I am planning to start with object file format.\r\n\r\nAnything I need to note before getting started?","createdAt":"2020-01-10T16:12:52Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12697#issuecomment-573099693","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3MzM1ODAyNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Nice! Check out any simple rbin plugin as a skeleton. If you have any specific question hang on the chat or drop your questions here\n\n> On 10 Jan 2020, at 17:12, Adwaith V Gautham <notifications@github.com> wrote:\n> \n> ï»¿\n> I would like to work on this issue.\n> \n> There are 3 file formats - one each for object files, shared libraries and executables. I'll am planning to start with object file format.\n> \n> Anything I need to note before getting started?\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-01-11T21:56:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/12697#issuecomment-573358026","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NDk4ODIwNg==","author":{"login":"adwait1-g"},"authorAssociation":"CONTRIBUTOR","body":"Update:\r\n\r\n1. Installed the [gccsdk toolchain](http://www.riscos.info/index.php/GCCSDK_Releases#GCCSDK_GCC_4.1.2_Release_2) which can be used to generate RISCOS binaries. Got to know that the [latest version of the toolchain](http://www.riscos.info/index.php/GCCSDK_Releases#GCCSDK_GCC_4.7.4_Release_3) doesn't support RISCOS's traditional AOF object file format. ELF Object and executable files are generated. Later, there is a tool ```elf2aif``` to generate RISCOS compatible executables.\r\n\r\n2. Understood the AOF file format and wrote header files for the same using [specs document].(http://www.riscos.com/support/developers/prm/objectformat.html#55823) - [aof.h](https://github.com/radareorg/radare2/files/4069421/aof.txt) & [aof_specs.h](https://github.com/radareorg/radare2/files/4069422/aof_specs.txt)\r\n\r\n3. Currently writing code to parse it.","createdAt":"2020-01-16T05:20:30Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/12697#issuecomment-574988206","viewerDidAuthor":false}],"number":12697,"title":"Add support for RiscOS binaries"},{"body":"Lately KLEE updated (in git, probably release soon) to the latest LLVM version and improved a lot. We can try to setup the testing environment to catch more bugs in radare2.\r\n\r\nSee [coreutils tutorial](https://klee.github.io/tutorials/testing-coreutils/) on how it is possible to do.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NzI4Nzc0MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Using SymCC seems to be easier and faster:\r\n- http://www.s3.eurecom.fr/docs/usenixsec20_symcc.pdf\r\n- http://www.s3.eurecom.fr/tools/symbolic_execution/symcc.html\r\n- https://github.com/eurecom-s3/symcc","createdAt":"2020-06-22T05:28:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12660#issuecomment-647287741","viewerDidAuthor":false}],"number":12660,"title":"Use KLEE for testing and tests generation"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nWhen annotating a struct using types, it is very conveniant to annotate the struct offsets on relative addressing. This is very handy to use via the commands \"tas <offset>\" and \" ta <struct.member>\", but this only works for member where an offset is present and not for the first member of a struct.\r\n\r\nWhere the is e.g. code like the following it would be nice to annotate [rdi] to something like [struct.member1].\r\n   **mov dword [rdi], esi**                                                                                                                                                                                                     \r\n   **mov byte [rdi + 4], dl**                                                                                                                                                                                                              \r\n  **mov dword [rdi + 8], ecx**  \r\n\r\n**Describe the solution you'd like**\r\nIt would be nice if the command \"tas 0\" would show the first member of a struct and \"ta\" could be used to change the line\r\n   **mov dword [rdi], esi** \r\nto either\r\n   **mov dword [struct1.member1], esi**                                                                                                                                                                                                     \r\nor something like\r\n   **mov dword [rdi + member1], esi** \r\n                                                                                                                                                                                                                                                                                                                                                                              ","comments":[],"number":12650,"title":"Types Struct offset 0 / first member"},{"body":"I discussed this problem on telegram and get the conclusion. At this moment, for ARM binaries, radare2 only use the asm.bits to indicate the current mode(thumb/arm)\r\n\r\nI don't think this is right. As thumb mode also contains thumbee whose instruction length is 4. There is no way to distinguish between thumbee and arm. \r\n\r\nWhat I need is a flag that should be attached with every instruction indicating the right instruction set(arm/thumb). Many Thanks\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1MTQyOTg3Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"\n\n> On 4 Jan 2019, at 07:46, Muhui Jiang <notifications@github.com> wrote:\n> \n> I discussed this problem on telegram and get the conclusion. At this moment, for ARM binaries, radare2 only use the asm.bits to indicate the current mode(thumb/arm)\n> \n> I don't think this is right. As thumb mode also contains thumbee whose instruction length is 4. There is no way to distinguish between thumbee and arm.\n> \n> \nit have nothing to do, with asm.bits=16 there are also 4 byte instructions. it also depends on asm.cpu\n\nfunctions use the anal hints to determine the asm.bits of the function   (if its thumb o r  not), also, if there's no  anal hint then it uses asm.bits which is global.\n> What I need is a flag that should be attached with every instruction indicating the right instruction set(arm/thumb). Many Thanks\n> \n\nbut  you only want to know if a function is thumb or arm, the thumb2 is implicit and useless in  99% of the cases to determine and  you can just check the instruction length for those cases, so i dont see any  problem in  the current behaviour","createdAt":"2019-01-04T12:21:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12635#issuecomment-451429872","viewerDidAuthor":false}],"number":12635,"title":"Thumb and ARM mode flags"},{"body":"As it turns out, PTRACE_EVENT_VFORK is not supported by native debugger (linux_ptrace_event) for some reason. I don't know how to add it correctly so I can't pr :( Also, maybe some other events should be added.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDg1MTU0MjQ2Nw==","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"Assign me to this issue please.\r\n\r\nI basolutely need a binary to debug and for the unit tests. Could you find me one please?","createdAt":"2021-05-31T14:55:01Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12633#issuecomment-851542467","viewerDidAuthor":false}],"number":12633,"title":"Add missing PTRACE_EVENT_VFORK in native debugger"},{"body":"I think some changes were made to the r_buf_read_at API recently so it is now broken.\r\nI am saying this because currently r_buf_read_at returns 0 because `real_len` is set to 0 [here](https://github.com/radare/radare2/blob/master/libr/util/buf.c#L749) because `r_buf_size(b)` returns 0.\r\n\r\nWhen setting b->length to a big value (i.e. 65536) it seems to work but I don't think this is how RBuffer is supposed to work... Or maybe it should be set in r_buf_new_file?\r\n\r\nThanks.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1MTQyMzEwNQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Related PR - https://github.com/radare/radare2/pull/12638","createdAt":"2019-01-04T11:46:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12632#issuecomment-451423105","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MTg5OTQ2Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"not  prioritary for this  release, enotime focusing on  crashes and the other issues for now","createdAt":"2019-01-07T11:02:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12632#issuecomment-451899467","viewerDidAuthor":false}],"number":12632,"title":"ar:// is broken"},{"body":"```\r\n$ ls -Ã±\r\nls: illegal option -- ï¿½\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ2MTQ1ODAzMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"thats probably a bug in libc :P","createdAt":"2019-02-07T15:04:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12629#issuecomment-461458032","viewerDidAuthor":false}],"number":12629,"title":"Getopt issues with  multi-byte chars"},{"body":"","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1MTYyOTcyMA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"I believe cert pining was killed by Google Chrome, so makes no sense to waste time on it, no? See https://raymii.org/s/blog/Chrome_68_is_deprecating_HPKP.html","createdAt":"2019-01-05T05:33:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12626#issuecomment-451629720","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MTY0MDkyNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"All decent mobile apps do that to avoid man in the middle attacks\n\n> On 5 Jan 2019, at 06:33, Anton Kochkov <notifications@github.com> wrote:\n> \n> I believe cert pining was killed by Google Chrome, so makes no sense to waste time on it, no? See https://raymii.org/s/blog/Chrome_68_is_deprecating_HPKP.html\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-01-05T09:28:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12626#issuecomment-451640926","viewerDidAuthor":false}],"number":12626,"title":"Support cert pining in the http webserver"},{"body":"`Vb` already supports browsing bin classes. The same thing should be implemented for anal classes.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYxNzU1ODMyNg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Mostly supported, probably needs some interface improvement. @thestr4ng3r @radare please evaluate","createdAt":"2020-04-22T05:25:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12604#issuecomment-617558326","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxNzY5MzIxOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ive never used anal classes","createdAt":"2020-04-22T10:29:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12604#issuecomment-617693219","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxNzY5MzMxNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i dont even have a reproducer to test","createdAt":"2020-04-22T10:29:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12604#issuecomment-617693316","viewerDidAuthor":false}],"number":12604,"title":"Add anal classes to Vb"},{"body":"Consider the following call: `call dword [eax + 0x6c]`\r\nLet's assume eax is the base pointer of a vtable we have saved in anal classes and we want to find out the actual address of the called method.\r\n\r\nSo there should be a command that takes the offset (in this case 0x6c) and looks up the actual destination.\r\nIt should be possible to call this command with a specific class, so it only looks into its vtable, or without a class, so it gives a list of possible destinations for all vtables that are not too small for the offset (partially requires #12601)\r\n\r\nWhen that is implemented, one could also add a command that does the same thing, but automatically takes the offset from the opcode at the current seek.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1MDc0ODEwNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Isnt this the same as what its done for structs?\n\n> On 1 Jan 2019, at 18:42, Florian MÃ¤rkl <notifications@github.com> wrote:\n> \n> Consider the following call: call dword [eax + 0x6c]\n> \n> Let's assume eax is the base pointer of a vtable we have saved in anal classes and we want to find out the actual address of the called method.\n> So there should be a command that takes the offset (in this case 0x6c) and looks up the actual destination.\n> It should be possible to call this command with a specific class, so it only looks into its vtable, or without a class, so it gives a list of possible destinations for all vtables that are not too small for the offset (partially requires #12601)\n> \n> When that is implemented, one could also add a command that does the same thing, but automatically takes the offset from the opcode at the current seek.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-01-01T18:23:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12603#issuecomment-450748105","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MDc0OTI1MA==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"I'm not familiar with the structs code, but I can imagine it to be very similar to what has to be done here.","createdAt":"2019-01-01T18:43:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12603#issuecomment-450749250","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MDg4MjE2Mw==","author":{"login":"nullableVoidPtr"},"authorAssociation":"NONE","body":"VTables could be something under SDB C Types; it is essentially a struct of method pointers that could be \"inherited\" or expanded upon if the class is also inherited.","createdAt":"2019-01-02T14:49:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12603#issuecomment-450882163","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MDg4MjUwMw==","author":{"login":"nullableVoidPtr"},"authorAssociation":"NONE","body":"Though I'd assume we would need to make a distinction between `classA.vtable->virtualMethodA` and `classA.virtualMethodA`...","createdAt":"2019-01-02T14:50:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12603#issuecomment-450882503","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MDg5Mzk4MQ==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"Vtables are already implemented in anal classes, see `aC?`.","createdAt":"2019-01-02T15:31:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12603#issuecomment-450893981","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MTM2MjUzOQ==","author":{"login":"nullableVoidPtr"},"authorAssociation":"NONE","body":"Apologies, misunderstood the issue.\r\nWhat would this new command be? `acmx`?","createdAt":"2019-01-04T06:25:47Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12603#issuecomment-451362539","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MTQyOTkxMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"aC is now ac  in  master\n\n> On 4 Jan 2019, at 07:25, nullableVoidPtr <notifications@github.com> wrote:\n> \n> Apologies, misunderstood the issue.\n> What would this new command be? aCx?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/12603#issuecomment-451362539>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-liC369KgN8rO8xgA1adbMy3hOKBgks5u_vPwgaJpZM4Zl-WJ>.\n> \n\n","createdAt":"2019-01-04T12:21:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12603#issuecomment-451429911","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2MTA2NjI2MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@nullableVoidPtr see also https://github.com/radare/radare2/issues/6851","createdAt":"2019-02-06T15:32:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12603#issuecomment-461066261","viewerDidAuthor":false}],"number":12603,"title":"Devirtualize method calls using anal class vtables"},{"body":"This command is necessary to kept visual tabs between r2 sessions via projects or just to keep them after leaving visual mode.\r\n\r\n* [ ] add a new tab\r\n* [ ] close a tab\r\n* [ ] name a tab\r\n* [ ] select nth tab\r\n\r\nWe need to define a way to specify what to print in this tab\r\n\r\nMore ideas and discussions below vvvv","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1MDU1MzYzNg==","author":{"login":"rlaemmert"},"authorAssociation":"CONTRIBUTOR","body":"How about adding something to be able to open a new tab with directly for a command.\r\nFor example seek to offset in new tab. It would also be nice to be able to open a new tab of a specific type (hex,disassembly...)","createdAt":"2018-12-30T11:12:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12588#issuecomment-450553636","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MDU1NjIxOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"all this stuff seems a bit related to the panels approach, maybe vanellope can share some thoughs here and we can start sharing code between visual and panels\n\n> On 30 Dec 2018, at 12:12, Rene Laemmert <notifications@github.com> wrote:\n> \n> How about adding something to be able to open a new tab with directly for a command.\n> For example seek to offset in new tab. It would also be nice to be able to open a new tab of a specific type (hex,disassembly...)\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/12588#issuecomment-450553636>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lpKy-r526ye1VgJJ61M6ZxnG2Trdks5u-J-4gaJpZM4Zk5EV>.\n> \n\n","createdAt":"2018-12-30T12:03:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12588#issuecomment-450556218","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NDAzMzI3Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"we need more improvements in the visual tabs. right now its im PoC state and its usable, but will be good to refactor it and improve the usability, integrating it in the following modes:\r\n\r\n* panels\r\n* graph\r\n* shell","createdAt":"2019-04-17T10:45:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12588#issuecomment-484033276","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDgwODkwMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping @deepakchethan ","createdAt":"2019-05-09T08:28:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12588#issuecomment-490808901","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwMjQ4NTg2NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"this one will be very interesting to have for 3.6 cc @Vane11ope ","createdAt":"2019-06-16T21:06:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12588#issuecomment-502485865","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwMjY0Njg0OA==","author":{"login":"Vane11ope"},"authorAssociation":"CONTRIBUTOR","body":"i think I implemented tab for panels","createdAt":"2019-06-17T11:37:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12588#issuecomment-502646848","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwMjY2NDcxMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"yes, you did, but this issue is not about this\n\n> On 17 Jun 2019, at 13:37, Vanellope <notifications@github.com> wrote:\n> \n> i think I implemented tab for panels\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/12588?email_source=notifications&email_token=AAG75FRUXO7ZSRHD3USZ7J3P25ZO3A5CNFSM4GMTSEK2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGODX24QQA#issuecomment-502646848>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AAG75FRX5PKCJQTWZBU2UO3P25ZO3ANCNFSM4GMTSEKQ>.\n> \n\n","createdAt":"2019-06-17T12:36:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12588#issuecomment-502664710","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwMjg3OTgyMQ==","author":{"login":"Vane11ope"},"authorAssociation":"CONTRIBUTOR","body":"ah right","createdAt":"2019-06-17T22:52:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12588#issuecomment-502879821","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwNDYzOTIwMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Better to move to 3.7.0 instead.","createdAt":"2019-06-22T07:17:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12588#issuecomment-504639201","viewerDidAuthor":false}],"number":12588,"title":"Add command to manage visual tabs"},{"body":"GIven an offset. it may take the basic block into a separate function, replacing the edges with refs. this is the inverse operation of afm. (merge)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1MDEyNzI4Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"thisi s  already  done by af, but will be good to have a funtion that does that separately and without analyzing anything","createdAt":"2018-12-27T10:45:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12566#issuecomment-450127286","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDczNDI1ODIzNQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-11-26T12:00:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12566#issuecomment-734258235","viewerDidAuthor":false}],"number":12566,"title":"Add command to split a function"},{"body":"See http://mjfrazer.org/mjfrazer/bitfields on how to unpack on different endians.\r\n```\r\n[0x000068c0]> \"td struct qwe { int a:4; int b:16; int c:3; };\"\r\n[0x000068c0]> ts\r\nqwe\r\n[0x000068c0]> ts qwe\r\npf ddd a b c\r\n[0x000068c0]> px 4\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x000068c0  f30f 1efa                                ....\r\n[0x000068c0]> tp qwe\r\n a : 0x000068c0 = 4196274163\r\n b : 0x000068c4 = 2303323441\r\n c : 0x000068c8 = 2303221457\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ2MDQ3MjM2Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping","createdAt":"2019-02-05T00:49:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12555#issuecomment-460472363","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2MTcxMTY3NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"What format for `pf` should be added? Something like `d[0:5]`? Or any other ideas?","createdAt":"2019-02-08T07:10:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12555#issuecomment-461711674","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2MzIwMTM3NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"pls show a full example with this syntax . moving forward 3.4, i dont trust this can be done /tested in a week when it passed more than 2 months","createdAt":"2019-02-13T13:36:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12555#issuecomment-463201375","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2MzIxNTU3NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"It is already implemented from TCC and parsing side. The only missing part is fixing `pf` with a new syntax, but this part is not small indeed, since require some `pf` refactoring.","createdAt":"2019-02-13T14:19:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12555#issuecomment-463215575","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2MzIzMzA5Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Then make a proposal for a syntax in pf and send a pr. So we can test and discuss\n\n> On 13 Feb 2019, at 15:19, Anton Kochkov <notifications@github.com> wrote:\n> \n> It is already implemented from TCC and parsing side. The only missing part is fixing pf with a new syntax, but this part is not small indeed, since require some pf refactoring.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-02-13T15:06:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12555#issuecomment-463233097","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2MzIzMzMxNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Try to not refactor pf code too much. We should refactor code with a clear design in mind not because of a new feature.\n\n> On 13 Feb 2019, at 15:19, Anton Kochkov <notifications@github.com> wrote:\n> \n> It is already implemented from TCC and parsing side. The only missing part is fixing pf with a new syntax, but this part is not small indeed, since require some pf refactoring.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-02-13T15:06:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12555#issuecomment-463233317","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3Mzg3MjY0Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"no hope for 3.4 imho","createdAt":"2019-03-18T11:28:12Z","includesCreatedEdit":false,"isMinimized":true,"minimizedReason":"outdated","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12555#issuecomment-473872647","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NDA0MjQ2Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"status of this? @XVilka ","createdAt":"2019-04-17T11:20:09Z","includesCreatedEdit":false,"isMinimized":true,"minimizedReason":"outdated","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12555#issuecomment-484042466","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5EWqmT","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Solved in `pfb`, but we need to extend tcc syntax parser and types internals to handle all this syntax in little and big bit endianness","createdAt":"2022-06-05T12:04:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12555#issuecomment-1146792339","viewerDidAuthor":true}],"number":12555,"title":"Support bitfields in `pf` and `t` commands"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nAfaik, r2 toolchains has no fuzzy comparison method now. SimHash is a good alternative to do fuzzy comparison.\r\n\r\n**Describe the solution you'd like**\r\nImplement simhash and make it available in rahash2 radiff2 and radare2.\r\nIn rahash2 use `rahash2 -a simhash ...` to calculate simhash of specified content\r\nIn radiff2 use `radiff2 -f file1 file2` to compute the difference with simhash algorithm.\r\nIn radare2 use `ph simhash` to calculate simhash of a block. \r\nIt's better to make function hash available in radare2.\r\n\r\n**Additional context**\r\nHere are some references:\r\n[wiki](https://en.wikipedia.org/wiki/SimHash)\r\n[paper](http://www.cs.princeton.edu/courses/archive/spring04/cos598B/bib/CharikarEstim.pdf)\r\n[application](https://googleprojectzero.blogspot.com/2018/12/searching-statically-linked-vulnerable.html) and it's [repo](https://github.com/googleprojectzero/functionsimsearch)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ0OTYzMzYwMg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"We have ssdeep in r2extras and r2pm, simhash should also go there.","createdAt":"2018-12-23T12:34:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12530#issuecomment-449633602","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0OTYzNTA1OA==","author":{"login":"Haoyu-Xiao"},"authorAssociation":"CONTRIBUTOR","body":"> We have ssdeep in r2extras and r2pm, simhash should also go there.\r\n\r\nssdeep is in r2extras because it lives on ssdeep project. But if SimHash is implemented without other dependencies, I think, it should be integrated to r2 toolchains.","createdAt":"2018-12-23T13:02:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12530#issuecomment-449635058","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0OTY0MTMyNw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@XYlearn - if it will be implemented in C, clean and lean enough - why not? Now the easiest part of the issue - someone should write this code.","createdAt":"2018-12-23T14:52:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12530#issuecomment-449641327","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0OTY0NDMxMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i think its interesting to have context sensitive hash support in r2 core\n\n> On 23 Dec 2018, at 15:52, Anton Kochkov <notifications@github.com> wrote:\n> \n> @XYlearn <https://github.com/XYlearn> - if it will be implemented in C, clean and lean enough - why not? Now the easiest part of the issue - someone should write this code.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/12530#issuecomment-449641327>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-llTCkV8J_GXg_Sq7XobPyVPYpgfKks5u75iTgaJpZM4ZdP8s>.\n> \n\n","createdAt":"2018-12-23T15:39:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12530#issuecomment-449644313","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0OTY0NTY3Mg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"As long as it's tested and maintained it's ok in core too ðŸ‘ ","createdAt":"2018-12-23T16:01:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12530#issuecomment-449645672","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MDExODM0Mg==","author":{"login":"r4dix10"},"authorAssociation":"CONTRIBUTOR","body":"Should we integrate https://github.com/BartMassey/simhash into radare ?","createdAt":"2018-12-27T09:55:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12530#issuecomment-450118342","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MDExOTg2Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"yes, but without duplicating functionalities, and integrating it with the rest of features in r2, so its not just a copypasta\n\n> On 27 Dec 2018, at 10:55, r4dix10 <notifications@github.com> wrote:\n> \n> Should we integrate https://github.com/BartMassey/simhash <https://github.com/BartMassey/simhash> into radare ?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/12530#issuecomment-450118342>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-loUfRgFPZuDZgeSNo_xpDvf1VrmSks5u9JkCgaJpZM4ZdP8s>.\n> \n\n","createdAt":"2018-12-27T10:03:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12530#issuecomment-450119866","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MDEyMjEyOA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@r4dix10 note that algorithms are totally different in these - the SimHash from Thomas Dullien consists of these:\r\n\r\n 1.   An efficient implementation of a hash function (based on SimHashing) which calculates a 128-bit hash from disassembled functions - and which preserves similarity (e.g. â€œdistanceâ€ of two functions can be calculated by simply calculating the hamming distance between two hashes - which translates to two XOR and two POPCNT instructions on x64).\r\n 2.   An efficient search index to allow approximate nearest neighbor search for 128-bit hashes.\r\n 3.   Some supervised machine learning code that can be used to â€œlearnâ€ a good hash function from human-provided examples - given a set of functions that should be similar according to the hash, and a set of functions that should be dissimilar, the code learns a hash function that attempts to respect these examples.\r\n\r\nThe link you posted is much more basic and simple.\r\n","createdAt":"2018-12-27T10:15:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12530#issuecomment-450122128","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MDEzMDAyMg==","author":{"login":"r4dix10"},"authorAssociation":"CONTRIBUTOR","body":"@XVilka this is what i was thinking to implement:\r\n\r\n    pick a hashsize, lets say 32 bits\r\n    let V = [0] * 32 # (ie 32 zeros)\r\n    break the phrase up into features\r\n\r\n    irb(main):003:0> 'the cat sat on the mat'.shingles\r\n    => #<Set: {\"th\", \"he\", \"e \", \" c\", \"ca\", \"at\", \"t \",\r\n        \" s\", \"sa\", \" o\", \"on\", \"n \", \" t\", \" m\", \"ma\"}>\r\n\r\n    hash each feature using a normal 32-bit hash algorithm\r\n\r\n    \"th\".hash = -502157718\r\n    \"he\".hash = -369049682\r\n    ...\r\n\r\n    for each hash\r\n    if biti of hash is set then add 1 to V[i]\r\n    if biti of hash is not set then take 1 from V[i]\r\n    simhash biti is 1 if V[i] > 0 and 0 otherwise\r\n\r\nNow with the generated simhash of two or more files; calculate hamming distance(s).\r\nWe may generate feature hash with 128 bit hash algorithm and increase feature length for better performance.\r\n\r\nReference : http://matpalm.com/resemblance/simhash/","createdAt":"2018-12-27T11:03:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12530#issuecomment-450130022","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgwMTQ5NTAxMg==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I have implemented ssdeep algorithm. Is simhash needed too? https://github.com/radareorg/radare2/pull/18490","createdAt":"2021-03-17T22:57:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12530#issuecomment-801495012","viewerDidAuthor":true}],"number":12530,"title":"Implement SimHash"},{"body":"**Features Requested**\r\nThe code located in libr/bin/format/wasm should parse more information:\r\n- [ ] Parse function Information and make them used by anal.\r\n    - [ ] parse function index and bind it to offset.\r\n    - [ ] parse function's signature index and bind it to signature.\r\n- [ ] Parse init_expr in global section and elem section.\r\n\r\nAnd some parsed information is not used or used properly:\r\n- [ ] Symbols in Global section is not visible via iE command. And related function is not renamed as expect.\r\n- [ ] Function signatures in type section should be used to enhance analysis.\r\n- [ ] The metadata such as limits of memory section and table section is better to be commented in proper place.\r\n\r\nHope I can help to add these features when I have time.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc0MDc0MTg4NQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-12-08T16:28:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12529#issuecomment-740741885","viewerDidAuthor":false}],"number":12529,"title":"Enhance wasm binary loading"},{"body":"| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu x86 64\r\n| File format of the file you reverse (mandatory)      | -\r\n| Architecture/bits of the file (mandatory)            | -\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.2.0-git 20447 @ linux-x86-64 git.3.1.3-98-gd2133cbdf commit: d2133cbdf843cef278f7a22e763b9c6485c2b55a build: 2018-12-18__16:17:40\r\n\r\n### Expected behavior\r\nr2 analyzes and exits.\r\n\r\n### Actual behavior\r\nr2 takes quite a long time to analyze and exit.\r\n\r\n### Steps to reproduce the behavior \r\n- build radare2 (`./sys/install.sh`)\r\n- `r2pm install evm`\r\n- run `time r2 -a evm -AA -Q $FILE`. It may take quite a lot of time during `Emulate code to find computed references (aae)` the procedure, on one of my machines it took almost 1 hour on one of the seeds; on the other hand, when no arch is specified, `time r2 -AA -Q $FILE` exits immediately. The uploaded archive contains the sample input files.\r\n[hangs.zip](https://github.com/radare/radare2/files/2690705/hangs.zip)\r\n\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n- r2pm version 3.2.0-git\r\n- radare2-extras version 7436fe3.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDcyOTQ3MTk3MQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-11-18T06:48:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12510#issuecomment-729471971","viewerDidAuthor":false}],"number":12510,"title":"Performance issue when analyzing inputs with arch specified with evm"},{"body":"It will make headers better formatted and improves licensing transparency for each file:\r\n\r\n- https://spdx.org/licenses/\r\n- https://reuse.software/practices/2.0/\r\n- https://www.kernel.org/doc/html/v4.18/process/license-rules.html\r\n\r\nCan be (partially) converted automatically:\r\n- https://invent.kde.org/sdk/licensedigger\r\n\r\n","comments":[],"number":12504,"title":"Switch to SPDX for copyright and licenses"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nIn android shared libraries (with PIC) references are calculated in a way which confuses radare2\r\n\r\nFirst, it sets a register to a base address (.got.plt VA). I've found two different methods:\r\n\r\n1. call $+5 +  pop reg (related to #11309):\r\n```asm\r\n0x001b7d36      e800000000     call 0x1b7d3b\r\n0x001b7d3b      5b             pop ebx\r\n0x001b7d3c      81c30d4c7b01   add ebx, 0x17b4c0d\r\n```\r\n\r\n2. call function which return $+5\r\n```asm\r\n0x00000c86      e8b5ffffff     call fcn.mov_ebx_esp\r\n0x00000c8b      81c3e1220000   add ebx, 0x22e1\r\n\r\n; fcn.mov_ebx_esp ();\r\n0x00000c40      8b1c24         mov ebx, dword [esp]\r\n0x00000c43      c3             ret\r\n```\r\n\r\nThen it uses this register across the function to get references to global variables or strings:\r\n```asm\r\n0x00001025      8d83f2e4ffff   lea eax, [ebx - 0x1b0e]\r\n0x0000102b      890424         mov dword [esp], eax\r\n0x0000102e      e86dfaffff     call sym.imp.opendir\r\n```\r\n\r\n**Describe the solution you'd like**\r\nI'd like to get register base cross references in shared libraries with PIC enabled\r\n```asm\r\n0x00001025      8d83f2e4ffff   lea eax, str.proc_self_id\r\n0x0000102b      890424         mov dword [esp], eax\r\n0x0000102e      e86dfaffff     call sym.imp.opendir\r\n```\r\n\r\n**Describe alternatives you've considered**\r\nFor shared libraries with PIC handle xrefs differently\r\n\r\nIf a library has PIC enabled radare2 should not make references like this:\r\n```asm\r\n; \"_traitsIS6_EEEEEEvRNS0_11timer_queueIT_EERKNSB_9time_typeERNSC_14per_timer_dataEPNS0_7wait_opE\"  â”‚                         \r\n0x001b7d54 6806000100     push 0x10006\r\n\r\n[0x001b7d2b]> ps @ 0x10006\r\n_traitsIS6_EEEEEEvRNS0_11timer_queueIT_EERKNSB_9time_typeERNSC_14per_timer_dataEPNS0_7wait_opE\r\n```\r\n\r\nI think should be assumed addresses are gonna be calculated in some way\r\n\r\n**Additional context**\r\nReference binaries:\r\n[libnative-lib.zip](https://github.com/radare/radare2/files/2683213/libnative-lib.zip)\r\n[libtermux.zip](https://github.com/radare/radare2/files/2683214/libtermux.zip)\r\n\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ0NzYzMTY2OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"There is an issue for this already. There also other x86- 32 bit constructions for relocatable code that is also not yet handled.\n\nThat can be handled if you do aae with emu.write after aeim, but as long as emulation is linear in aae it may not work blindly. Ideally we should have a way to tag callpop functions like we do with noreturn ones. And use them to statically return the delta address without emulation\n\n> On 16 Dec 2018, at 03:15, fabianMendez <notifications@github.com> wrote:\n> \n> Is your feature request related to a problem? Please describe.\n> In android shared libraries (with PIC) references are calculated in a way which confuses radare2\n> \n> First, it sets a register to a base address (.got.plt VA). I've found two different methods:\n> \n> call $+5 + pop reg (related to #11309):\n> 0x001b7d36      e800000000     call 0x1b7d3b\n> 0x001b7d3b      5b             pop ebx\n> 0x001b7d3c      81c30d4c7b01   add ebx, 0x17b4c0d\n> call function which return $+5\n> 0x00000c86      e8b5ffffff     call fcn.mov_ebx_esp\n> 0x00000c8b      81c3e1220000   add ebx, 0x22e1\n> \n> ; fcn.mov_ebx_esp ();\n> 0x00000c40      8b1c24         mov ebx, dword [esp]\n> 0x00000c43      c3             ret\n> Then it uses this register across the function to get references to global variables or strings:\n> \n> 0x00001025      8d83f2e4ffff   lea eax, [ebx - 0x1b0e]\n> 0x0000102b      890424         mov dword [esp], eax\n> 0x0000102e      e86dfaffff     call sym.imp.opendir\n> Describe the solution you'd like\n> I'd like to get register base cross references in shared libraries with PIC enabled\n> \n> 0x00001025      8d83f2e4ffff   lea eax, str.proc_self_id\n> 0x0000102b      890424         mov dword [esp], eax\n> 0x0000102e      e86dfaffff     call sym.imp.opendir\n> Describe alternatives you've considered\n> For shared libraries with PIC handle xrefs differently\n> \n> If a library has PIC enabled radare2 should not make references like this:\n> \n> ; \"_traitsIS6_EEEEEEvRNS0_11timer_queueIT_EERKNSB_9time_typeERNSC_14per_timer_dataEPNS0_7wait_opE\"  â”‚                         \n> 0x001b7d54 6806000100     push 0x10006\n> \n> [0x001b7d2b]> ps @ 0x10006\n> _traitsIS6_EEEEEEvRNS0_11timer_queueIT_EERKNSB_9time_typeERNSC_14per_timer_dataEPNS0_7wait_opE\n> I think should be assumed addresses are gonna be calculated in some way\n> \n> Additional context\n> Reference binaries:\n> libnative-lib.zip\n> libtermux.zip\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-12-16T10:23:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12489#issuecomment-447631669","viewerDidAuthor":false}],"number":12489,"title":"For shared libraries with PIC handle xrefs differently"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nStrings and sections are empty after analysis.\r\n\r\n```sh\r\n[0x14680000]> iz\r\n[Strings]\r\nNum Paddr      Vaddr      Len Size Section  Type  String\r\n\r\n[0x14680000]> iS\r\n[Sections]\r\nNm Paddr       Size Vaddr      Memsz Perms Name\r\n\r\n[0x14680000]> s segment.LOAD1\r\n[0x14680000]> s segment.LOAD2 \r\n[0x14688000]> s segment.LOAD3\r\n[0x1468e000]> x 16\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x1468e000  9105 0058 3102 40f9 5100 00b4 8101 0014  ...X1.@.Q.......\r\n[0x1468e000]> ia\r\nstripped false\r\n\r\n$ file tz.mbn\r\ntz.mbn: ELF 64-bit LSB executable, ARM aarch64, version 1 (SYSV), statically linked, stripped\r\n```\r\n**UPDATED:** My bad because I didnt know the `iSS` command\r\n```sh\r\n[0x1468e000]> iSS\r\n[Segments]\r\nNm Paddr       Size Vaddr      Memsz Perms Name\r\n00 0x00000000   960 0x00000000     0 ---- UNKNOWN\r\n01 0x00001000 13816 0x1c1e8000 16384 ---- UNKNOWN_1\r\n02 0x00005000     0 0x00000000     0 ---- LOAD0\r\n03 0x00005000 31856 0x14680000 31856 -r-x LOAD1\r\n04 0x0000d000 18864 0x14688000 18864 -rw- LOAD2\r\n05 0x00012000  3248 0x1468e000  3248 -rwx LOAD3\r\n06 0x00013000  9960 0x1468f000  9960 -rw- LOAD4\r\n07 0x00016000  2048 0x14696000  2048 -r-x LOAD5\r\n08 0x00017000  2944 0x1c000000  2944 -r-x LOAD6\r\n09 0x00018000 36864 0x1c001000 36864 -rw- LOAD7\r\n10 0x00021000 45056 0x1c00a000 45056 -rw- LOAD8\r\n11 0x0002c000 753536 0x1c016000 753536 -r-x LOAD9\r\n12 0x000e4000 159872 0x1c0ce000 159872 -rw- LOAD10\r\n13 0x0010c000 489216 0x1c0f6000 489216 -rw- LOAD11\r\n14 0x00184000 376832 0x1c18a000 376832 -rw- LOAD12\r\n15 0x001e0000     0 0x1c1e6000  8192 -rw- LOAD13\r\n16 0x00000000    64 0x00000000    64 -rw- ehdr\r\n```\r\n\r\n**Describe the solution you'd like**\r\n- Detect strings with `iz` instead of `izz` and get xrefs to them\r\n- The binary is fully stripped, r2 says `stripped` is false\r\n\r\n**Sample to reproduce**\r\n[tz.mbn.zip](https://github.com/radare/radare2/files/2675917/tz.mbn.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ0Njk2MjMzNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"e anal.strings=true\naae/aar\n\n> On 13 Dec 2018, at 13:24, Eduardo Novella <notifications@github.com> wrote:\n> \n> Is your feature request related to a problem? Please describe.\n> Strings and segments are empty after analysis.\n> \n> Describe the solution you'd like\n> \n> Detect strings with iz instead of izz and get xrefs to them\n> Detect LOAD segments\n> Sample to reproduce\n> tz.mbn.zip <https://github.com/radare/radare2/files/2675917/tz.mbn.zip>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/12475>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lgWpwOhrUIDDku9bmDEaV-VMyoQoks5u4kb0gaJpZM4ZRhzN>.\n> \n\n","createdAt":"2018-12-13T13:08:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12475#issuecomment-446962336","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0NzA0NzI1NA==","author":{"login":"enovella"},"authorAssociation":"CONTRIBUTOR","body":"> e anal.strings=true aae/aar\r\n\r\n```c\r\n[0x14680000]> e anal.strings=true\r\n[0x14680000]> aae\r\nInvalid shift at 0x1c0b5b54\r\nInvalid shift at 0x1c0b5b5c\r\n[0x14680000]> iz\r\n\r\n[0x14680000]> aar\r\n[0x14680000]> iz\r\n\r\n[0x14680000]> \r\n```\r\n\r\nWith `izz` strings are found though.","createdAt":"2018-12-13T17:10:57Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12475#issuecomment-447047254","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0NzA5MzI4NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"f~str\n\nIz is from rbin, u wont get any new string in there\n\n> On 13 Dec 2018, at 18:11, Eduardo Novella <notifications@github.com> wrote:\n> \n> e anal.strings=true aae/aar\n> \n> [0x14680000]> e anal.strings=true\n> [0x14680000]> aae\n> Invalid shift at 0x1c0b5b54\n> Invalid shift at 0x1c0b5b5c\n> [0x14680000]> iz\n> \n> [0x14680000]> aar\n> [0x14680000]> iz\n> \n> [0x14680000]> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-12-13T19:36:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12475#issuecomment-447093284","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0NzgzNDM4Mg==","author":{"login":"enovella"},"authorAssociation":"CONTRIBUTOR","body":"ok, I just wanted to obtain the same analysis that in IDA. Meaning that, xrefs to strings (iz) and function identification.\r\n\r\nLet me investigate why radare2 doesnt recognize xrefs nor strings with the cmd `iz`.","createdAt":"2018-12-17T12:48:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12475#issuecomment-447834382","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0NzkxMTE1MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"xrefs to iz strings doesnt exist at all. everything is wrapped around flags. ","createdAt":"2018-12-17T16:39:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12475#issuecomment-447911151","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY2MDA4NzE2NQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"`iz` doesn't find anything because the binary has no sections and `iz` finds strings in data sections.","createdAt":"2020-07-17T12:46:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12475#issuecomment-660087165","viewerDidAuthor":false}],"number":12475,"title":"Strings and segment recognition on ELF Aarch64 TrustZone analysis"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu x86 64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.2.0-git 20341 @ linux-x86-64 git.3.1.3-25-g9a91f9610 commit: 9a91f96101988bf58c358dfc966b4f8c880ec075 build: 2018-12-10__19:26:0\r\n\r\n### Expected behavior\r\nr2 reports warning with reasonable info.\r\n\r\n### Actual behavior\r\nr2 reports message like: `Cannot allocate -1928585920 bytes`.\r\n\r\n### Steps to reproduce the behavior \r\n- analyze r2 with a big binary with debug info (in my case, I used a self-built clang-7 with `relwithdebinfo`, and the binary is about 2.3GB; when stripped, it has about 125MB)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ0NTc4NjkxMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"never seen this binary before. what about showing a backtrace of that allocation fail, or sharing a file (smaller than 3GB) to test it? we obviously dont want to allocate 2GB of linear memory in the heap. \n\nso let me know which of these is the reason of the p roblem\n\ni assume this problem doesnt h appens with the 125MB bin\n\n$ git grep 'Cannot allocate' | grep 'bytes.'\nbinr/rafind2/rafind2.c:\t\teprintf (\"Cannot allocate %\"PFMT64d\" bytes\\n\", bsize);\nlibr/anal/session.c:\t\teprintf (\"Cannot allocate 0x%\"PFMT64x\" bytes for stack\\n\", session->size);\nlibr/bin/bin.c:\t\t\teprintf (\"Cannot allocate %d bytes\\n\", (int)(opt->sz));\nlibr/bin/bin.c:\t\t\teprintf (\"Cannot allocate %d bytes.\\n\", asz);\nlibr/bin/obj.c:\t\t\teprintf (\"Cannot allocate %\" PFMT64u \" bytes\\n\", sz);\nlibr/core/cmd_debug.c:\t\t\t\teprintf (\"Cannot allocate 0x%08\"PFMT64x\" bytes\\n\", map->size);\nlibr/core/cmd_print.c:\t\t\t\t\t\teprintf (\"Cannot allocate %d byte(s)\\n\", addrbytes * l);\nlibr/core/cmd_search.c:\t\t\t\teprintf (\"Cannot allocate %\"PFMT64d \" bytes\\n\", bufsz);\nlibr/io/p/io_malloc.c:\t\t\t\teprintf (\"Cannot allocate (%s) 0 bytes\\n\", pathname + 9); \n\n\n> On 10 Dec 2018, at 12:30, hongxu <notifications@github.com> wrote:\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tUbuntu x86 64\n> File format of the file you reverse (mandatory)\tELF\n> Architecture/bits of the file (mandatory)\tx86/64\n> r2 -v full output, not truncated (mandatory)\tradare2 3.2.0-git 20341 @ linux-x86-64 git.3.1.3-25-g9a91f9610 commit: 9a91f96 <https://github.com/radare/radare2/commit/9a91f96101988bf58c358dfc966b4f8c880ec075> build: 2018-12-10__19:26:0\n> Expected behavior\n> \n> r2 reports warning with reasonable info.\n> \n> Actual behavior\n> \n> r2 reports message like: Cannot allocate -1928585920 bytes.\n> \n> Steps to reproduce the behavior\n> \n> analyze r2 with a big binary with debug info (in my case, I used a self-built clang-7 with relwithdebinfo, and the binary is about 2.3GB; when stripped, it has about 125MB)\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/12440>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-ljDciMKlQm8vWbjzuyxI6nMlBuMmks5u3kXigaJpZM4ZLLPY>.\n> \n\n","createdAt":"2018-12-10T11:40:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12440#issuecomment-445786911","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0NTc4ODA3MA==","author":{"login":"hongxuchen"},"authorAssociation":"NONE","body":"The stripped binary is fine.\r\n\r\nr2 does not crash when run `r2 clang` but only reports this message, then enter the interactive shell *immediately* (while for the stripped clang, it will dump some warnings and wait for 1s or so to enter the interactive shell).\r\nI'm sorry I don't know how to get the backtrace in this sense.","createdAt":"2018-12-10T11:45:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12440#issuecomment-445788070","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0NTc5NzI0Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Add an int3 in all the lines i showed in my prev comment \n\n> On 10 Dec 2018, at 12:45, hongxu <notifications@github.com> wrote:\n> \n> The stripped binary is fine.\n> \n> r2 does not crash when run r2 clang but only reports this message, then enter the interactive shell immediately (while for the stripped clang, it will dump some warnings and wait for 1s or so to enter the interactive shell).\n> I'm sorry I don't know how to get the backtrace in this sense.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-12-10T12:22:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12440#issuecomment-445797242","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0NTgxMDU4NA==","author":{"login":"hongxuchen"},"authorAssociation":"NONE","body":"It seems that only `libr/bin/bin.c:373` and `libr/bin/bin.c:379` matched; and a quick glimpse tells that it should be line 373 -- in this sense maybe only reporting with a better error message is ok.","createdAt":"2018-12-10T13:13:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12440#issuecomment-445810584","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0NjM4MDg4Nw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Can you share the binary somewhere?","createdAt":"2018-12-11T22:07:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12440#issuecomment-446380887","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0NjQ2NDIzNQ==","author":{"login":"hongxuchen"},"authorAssociation":"NONE","body":"@Maijin Pls see the temporarily shared file https://drive.google.com/open?id=1JdSe_mYCn3O8KWJb96bdf1KpwipwwWev","createdAt":"2018-12-12T05:11:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12440#issuecomment-446464235","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0NjU4OTUxMg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"ok got it, MD5 - 76140b7c5e9e4933b8008c13eecee9cf of the archive*","createdAt":"2018-12-12T13:34:39Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12440#issuecomment-446589512","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0NjU4OTk5OA==","author":{"login":"hongxuchen"},"authorAssociation":"NONE","body":"@Maijin yes","createdAt":"2018-12-12T13:36:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12440#issuecomment-446589998","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxODUyMjk1Nw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@Maijin is this still reproducible?","createdAt":"2019-08-06T06:25:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12440#issuecomment-518522957","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxODU5NzM5OA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"It got other issues, it doesn't map anything and iS shows weird stuff\r\n\r\n<img width=\"276\" alt=\"image\" src=\"https://user-images.githubusercontent.com/1408600/62530031-16b6b080-b840-11e9-8707-8f825d80885b.png\">\r\n\r\nBinary is on telegram r2-bins search for \"Issue 12440\"","createdAt":"2019-08-06T09:48:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12440#issuecomment-518597398","viewerDidAuthor":false}],"number":12440,"title":"\"Cannot allocate -xxx bytes\" when analyzing big binary (with debug info)"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Windows/x86/64\r\n| File format of the file you reverse (mandatory)      | wasm\r\n| Architecture/bits of the file (mandatory)            | wasm\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.2.0-git 20376 @ windows-x86-64 git.3.1.3-15-g2cd65e45b commit: 2cd65e45b131ca650307c67af852c6c8c612e153 build: 06/12/2018__15:29:24,29\r\n### Expected behavior\r\ncall instuction has correct symbol name\r\n`call 1234 ; sym.fcn.1234`\r\n### Actual behavior\r\ncall instruction has wrong symbol name\r\n`call 1234 ; sym.fcn.154`\r\n### Steps to reproduce the behavior \r\n```\r\npd 1 @ `/c call 1234 @e:search.maxhits=1,search.flags=false~[0]`\r\n```\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n[diep.zip](https://github.com/radare/radare2/files/2654036/diep.zip)\r\ngetting call offset relies on isq command and on the first byte after the instruction opcode\r\nhttps://github.com/radare/radare2/blob/7bf0380e77693dca2cb5dc3149532f5fdf7ef22a/libr/anal/p/anal_wasm.c#L25\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1NTYwMDE5Ng==","author":{"login":"cgvwzq"},"authorAssociation":"CONTRIBUTOR","body":"Technically the dissasembly is coherent (at least with https://github.com/radare/radare2/commit/ddb925a9b32c0ddf623bd8aea8431737c2365bb8#diff-d964db38ee6551436c2a1722588c5cedR28).\r\n\r\nThe point is that the `sym.fcn.N` is an arbitrary name, `N` is only used for functions w/o more information (no exported).\r\n\r\nAgree that it's not the most intuitive thing:\r\n`call 1234 ; sym.fnc.1189`\r\n\r\nBut this shows that the function with id `1234` in fact is `fnc.1189`:\r\n`is ~ FUNC[-:1234]`\r\n\r\nI'll try to fix it in a next commit, but not bug here.","createdAt":"2019-01-18T16:12:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12426#issuecomment-455600196","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1NjAwMjQ4MA==","author":{"login":"wargio"},"authorAssociation":"CONTRIBUTOR","body":"i agree with @cgvwzq ","createdAt":"2019-01-21T09:21:53Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12426#issuecomment-456002480","viewerDidAuthor":false}],"number":12426,"title":"[WASM] calls enrichment produces an unexpected function name"},{"body":"To be able to change the generic MCR/MRC syntax into the readable version\r\n![image](https://user-images.githubusercontent.com/203261/49225290-a0df8700-f41e-11e8-9926-63aa1e3c6a32.png)\r\n![image](https://user-images.githubusercontent.com/203261/49225324-b2c12a00-f41e-11e8-8cc1-827fd02039d3.png)\r\n![image](https://user-images.githubusercontent.com/203261/49225365-d2585280-f41e-11e8-985d-b9f6b0f23542.png)\r\n![image](https://user-images.githubusercontent.com/203261/49225391-e308c880-f41e-11e8-8d80-20c23c272839.png)\r\n\r\nSee https://github.com/alexhude/FRIEND and https://github.com/NeatMonster/AMIE","comments":[],"number":12358,"title":"Rewrite MRC/MCR commands of ARM"},{"body":"being able to turn backward lines before the next graph row level\r\n\r\n<img width=\"282\" alt=\"screenshot 2018-11-27 at 23 44 14\" src=\"https://user-images.githubusercontent.com/917142/49116598-6ea71b80-f29e-11e8-83b7-d311ee2b990f.png\">\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ0MjI0NzQ5Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Reproducer: copypaste this in your terminal\r\n```\r\nr2 -a arm -b32 -\r\nwx f0412de974419fe594d04de2000000ea014084e20060d4e5000056e3fbffff1a58319fe558119fe50620a0e30100a0e3048063e0d9ffffeb0240a0e350c0a0e3fc30a0e3b310a0e38720a0e33600a0e383c0cde58040cde58160cde58260cde5a5ffffeb1c119fe584008de518219fe518019fe5b8ffffeb0110a0e30070a0e10620a0e10400a0e1d2ffffeb010070e3010077130050a0e10100a003a6ffff0b0500a0e180108de21020a0e3b1ffffeb004050e2050000aa0100a0e3d0109fe50420a0e3b5ffffeb000064e29affffeb224088e20500a0e1b8109fe50420a0e1aeffffeb040050e10300a01392ffff1b0640a0e193108de20120a0e30500a0e1adffffeb010050e30400a0e38affff1b9330dde5044483e17c309fe5030054e1f3ffff1a0d10a0e18020a0e30500a0e1a1ffffeb002050e20d40a0e10d10a0e10700a0e1010000da94ffffebf4ffffea0500a0e17cffffeb0700a0e17affffeb38109fe50420a0e30100a0e38bffffeb0500a0e370ffffeb94d08de2f081bde8\r\naf\r\nVV\r\n```","createdAt":"2018-11-27T22:46:27Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12344#issuecomment-442247497","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxMjc0ODExOQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@deepakchethan you might want to check also this one, while working on the radiff2 ASCII graphs task (https://github.com/radare/radare2/issues/7332)","createdAt":"2019-07-18T09:52:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12344#issuecomment-512748119","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxNTcyNTA0MA==","author":{"login":"deepakchethan"},"authorAssociation":"CONTRIBUTOR","body":"I am a bit confused about what needs to be done. Should the length of the backward blue line be decreased ?","createdAt":"2019-07-28T01:22:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12344#issuecomment-515725040","viewerDidAuthor":false}],"number":12344,"title":"Improve graph lines height"},{"body":"**Is your feature request related to a problem? Please describe.**\r\nAdd the functionnality of this script from @aaSSfxxx  in core https://github.com/aaSSfxxx/r2_scripts/blob/master/vb_analysis.py like the gohelper (https://github.com/radare/radare2/pull/11594 and https://github.com/radare/radare2/pull/11698)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ0MTM5NDc3MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Vb must die\n\n> On 24 Nov 2018, at 20:26, Maijin <notifications@github.com> wrote:\n> \n> Is your feature request related to a problem? Please describe.\n> Add the functionnality of this script in core https://github.com/aaSSfxxx/r2_scripts/blob/master/vb_analysis.py like the gohelper\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-11-24T20:49:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"LAUGH","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/12311#issuecomment-441394770","viewerDidAuthor":false}],"number":12311,"title":"Add VB helpers in core "},{"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\n* [ ] Add tab to switch to disassembly and metadata cursor mode in Vp\r\n* [ ] Ability to select vars\r\n* [ ] Ability to show xrefs vars (`x` after selection)\r\n* [ ] Ability to show refs vars (`X` after selection)\r\n* [ ] Ability to select locals\r\n* [ ] Ability to show xrefs locals (`x` after selection)\r\n* [ ] Ability to show refs locals (`X` after selection)\r\n* [ ] Ability to select function name in this mode\r\n* [ ] Ability to show function xref (`x` after selection)\r\n* [ ] Ability to show function ref (`X` after selection)\r\n\r\n**Describe the solution you'd like**\r\nIn Vp press c to enable hexadecimal cursor mode then tab to go in disassembly and metadata cursor mode","comments":[],"number":12276,"title":"Disassembly and Metadata cursor mode in Vp"},{"body":"**Environment information**\r\n* Operating System: Ubuntu 18\r\n* File format: ELF ARM\r\n**Describe the bug**\r\ndoes not detect that a function is thumb code and I set manually the bits to 16 I obtain the correct code but it does not update the boundaries of the function making impossible to use the graph mode. \r\n\r\ntested binary \r\n[libtmessages.29.zip](https://github.com/radareorg/cutter/files/2604978/libtmessages.29.zip)\r\n\r\nScreenshots from Cutter, but related to radare2: \r\n![s1](https://user-images.githubusercontent.com/6418737/48854261-c252ca00-edb1-11e8-8f89-78ceed2658cd.png)\r\n![s2](https://user-images.githubusercontent.com/6418737/48854266-c4b52400-edb1-11e8-9d78-7e77e3a85919.png)\r\n\r\n\r\n\r\nsee https://github.com/radareorg/cutter/issues/953\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ0MDk4MzEyMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"See https://github.com/radare/radare2/pull/12068\n\n> On 22 Nov 2018, at 11:17, matbrik <notifications@github.com> wrote:\n> \n> see radareorg/cutter#953\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-11-22T10:22:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12271#issuecomment-440983120","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0MTA4MDY2NA==","author":{"login":"alvarofe"},"authorAssociation":"CONTRIBUTOR","body":"try out the PR radare mentioned. It should improve a bit, if you define that direction as thumb, undefine the function and analyze again - changing the bits does not trigger the analysis. This might be an option worth to add into cutter, which could aid with arm","createdAt":"2018-11-22T16:38:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12271#issuecomment-441080664","viewerDidAuthor":false}],"number":12271,"title":"Error in updating thumb functions"},{"body":"`r_str_utf16_encode()` looks very wrong to me. All it does is go through the string byte by byte and print non-printable bytes as `\\u00xx`, which is nonsense, because it corresponds to no real encoding and especially not to utf-16.\r\n\r\nThis function is especially used in some `ps` commands, in particular `psu`, which I have no idea what purpose it should have. If you know, please tell me.\r\n\r\nAlso, from just quickly looking at `r_print_string()`, I think there is a lot wrong here too. The seek parameter is not used at all and if R_PRINT_STRING_WIDE is passed, the only difference is that every second byte is skipped. What kind of an encoding is that supposed to be?\r\n\r\nFor `ps`, I would suggest a command format like `ag` has.\r\nI.e. you have multiple commands that read strings with different encodings and print it in different formats, for example:\r\n\r\n```\r\npsr[format]    print raw string (just interpret bytes as unicode indices)\r\npsu[format]    print utf-8 string\r\npsw[format]    print utf-16 string\r\npsW[format]    print utf-32 string\r\n...\r\n\r\nOutput formats:\r\n<blank>    utf-8\r\nj          json\r\n...\r\n```\r\n\r\nSo this means for example `psw` will READ a zero-terminated utf-16 string from the current seek and PRINT it as utf-8.\r\nFor non-zero terminated strings, one could for example pass the size as an arg.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ0MDc2Njk5OA==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"Btw, for cases where data should be printed to json without clear awareness of the encoding, `r_str_utf16_encode()` should be replaced by base64.","createdAt":"2018-11-21T18:29:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12261#issuecomment-440766998","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcxNDAxNDg5OQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-10-21T23:54:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12261#issuecomment-714014899","viewerDidAuthor":false}],"number":12261,"title":"Revise ps and kill r_str_utf16_encode()"},{"body":"`r_str_utf16_encode()` looks very wrong to me. All it does is go through the string byte by byte and print non-printable bytes as `\\u00xx`, which is nonsense, because it corresponds to no real encoding and especially not to utf-16.\r\n\r\nThis function is especially used in some `ps` commands, in particular `psu`, which I have no idea what purpose it should have. If you know, please tell me.\r\n\r\nAlso, from just quickly looking at `r_print_string()`, I think there is a lot wrong here too. The seek parameter is not used at all and if R_PRINT_STRING_WIDE is passed, the only difference is that every second byte is skipped. What kind of an encoding is that supposed to be?\r\n\r\nFor `ps`, I would suggest a command format like `ag` has.\r\nI.e. you have multiple commands that read strings with different encodings and print it in different formats, for example:\r\n\r\n```\r\npsr[format]    print raw string (just interpret bytes as unicode indices)\r\npsu[format]    print utf-8 string\r\npsw[format]    print utf-16 string\r\npsW[format]    print utf-32 string\r\n...\r\n\r\nOutput formats:\r\n<blank>    utf-8\r\nj          json\r\n...\r\n```\r\n\r\nSo this means for example `psw` will READ a zero-terminated utf-16 string from the current seek and PRINT it as utf-8.\r\nFor non-zero terminated strings, one could for example pass the size as an arg.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ0MDg5Mzg5Mg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Note that utf16 and utf32 are endian-depended and also might need BOM.\n\nOn Thu, Nov 22, 2018, 2:22 AM Florian MÃ¤rkl <notifications@github.com wrote:\n\n> r_str_utf16_encode() looks very wrong to me. All it does is go through\n> the string byte by byte and print non-printable bytes as \\u00xx, which is\n> nonsense, because it corresponds to no real encoding and especially not to\n> utf-16.\n>\n> This function is especially used in some ps commands, in particular psu,\n> which I have no idea what purpose it should have. If you know, please tell\n> me.\n>\n> Also, from just quickly looking at r_print_string(), I think there is a\n> lot wrong here too. The seek parameter is not used at all and if\n> R_PRINT_STRING_WIDE is passed, the only difference is that every second\n> byte is skipped. What kind of an encoding is that supposed to be?\n>\n> For ps, I would suggest a command format like ag has.\n> I.e. you have multiple commands that read strings with different encodings\n> and print it in different formats, for example:\n>\n> psr[format]    print raw string (just interpret bytes as unicode indices)\n> psu[format]    print utf-8 string\n> psw[format]    print utf-16 string\n> psW[format]    print utf-32 string\n> ...\n>\n> Output formats:\n> <blank>    utf-8\n> j          json\n> ...\n>\n> So this means for example psw will READ a zero-terminated utf-16 string\n> from the current seek and PRINT it as utf-8.\n> For non-zero terminated strings, one could for example pass the size as an\n> arg.\n>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/radare/radare2/issues/12260>, or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAMZ_aivM65fa42aMpGzB_96tmXp-_Gfks5uxZnSgaJpZM4Ytqtn>\n> .\n>\n","createdAt":"2018-11-22T02:29:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12260#issuecomment-440893892","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3ODMzNjA3MA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Maybe something @kazarmy wants to take a look at?^","createdAt":"2019-03-31T12:09:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12260#issuecomment-478336070","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3ODMzODA2OQ==","author":{"login":"kazarmy"},"authorAssociation":"CONTRIBUTOR","body":"What's the difference between `psr` and `psu`?","createdAt":"2019-03-31T12:37:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12260#issuecomment-478338069","viewerDidAuthor":false}],"number":12260,"title":"Revise ps commands and kill r_str_utf16_encode()"},{"body":"Maybe useful for autonaming functions and offsets or unknown places. we can also use dragon names.\r\n\r\nInspired by https://twitter.com/swapgs/status/1064549714903920641\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ0MDE0MTUwMA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"What about providing a 'presets' instead? With dictionary words. I would love to use abhorrent monstrosity names from Lovecraft's and Lovecraftian fiction.","createdAt":"2018-11-20T05:14:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12223#issuecomment-440141500","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcxMjYxNDg2NA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-10-20T06:04:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12223#issuecomment-712614864","viewerDidAuthor":false}],"number":12223,"title":"Fantasy words instead of offsets"},{"body":"Make sure you are testing using the latest git version of radare2 before submitting any issue.\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | macOS\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86_64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.1.0-git 20218 @ darwin-x86-64 git.3.0.1-273-g6d0f9ce28 commit: 6d0f9ce282926af91d1350acaf4722a56a0467b0 build: 2018-11-18__15:46:47\r\n\r\n### Expected behavior\r\n\r\n```\r\n[0x00001090]> afb. @0x32e0\r\n0x000032e0 0x000032f7 01:00CC 23 j 0x0000345A f 0x000032F7\r\n```\r\n\r\n### Actual behavior\r\n\r\n```\r\n[0x00001090]> afb. @0x32e0\r\n0x000032e0 0x000032f7 01:00CC 23 f 0x000032f7\r\n```\r\n\r\n### Steps to reproduce the behavior \r\n\r\n```\r\nr2 spacerex\r\n> aaa\r\n```\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\n<img width=\"417\" alt=\"image\" src=\"https://user-images.githubusercontent.com/6639926/48675330-d26f6d00-eb57-11e8-902f-75e2fd17ad6a.png\">\r\n\r\n[spacerex.zip](https://github.com/radare/radare2/files/2592964/spacerex.zip)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzOTcwNjEyOQ==","author":{"login":"felberj"},"authorAssociation":"NONE","body":"General question: Sometimes I want to give radare a hint (e.g. add an edge) if I see something failed. Is it possible to do so and then to resume the analysis?","createdAt":"2018-11-18T16:36:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12208#issuecomment-439706129","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzOTcxOTY0OA==","author":{"login":"felberj"},"authorAssociation":"NONE","body":"Update: as in #10259, just `aab` works","createdAt":"2018-11-18T19:41:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12208#issuecomment-439719648","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzOTcyMzg3Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"e anal.endsize=false fixes this well known issue\n\n> On 18 Nov 2018, at 20:41, Jonas <notifications@github.com> wrote:\n> \n> Update: as in #10259, just aab works\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-11-18T20:38:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/12208#issuecomment-439723877","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzOTc5ODI1Mg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Well `anal.endsize=false` is just a workaround... Evidently it doesn't work in general, because otherwise it would be default and it wouldn't have `known to be buggy` in the description.","createdAt":"2018-11-19T07:39:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12208#issuecomment-439798252","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzOTg3MTExMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"well, we have a bunch  of fails with anal.endsize=true too :P theres an issue to track this already. so yes, we shuold find time to solve this workaroundy var\n\n> On 19 Nov 2018, at 08:39, Riccardo Schirone <notifications@github.com> wrote:\n> \n> Well anal.endsize=false is just a workaround... Evidently it doesn't work in general, because otherwise it would be default and it wouldn't have known to be buggy in the description.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/12208#issuecomment-439798252>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lp3xzFXZ7fLAzubM_jr-78FNdVZ2ks5uwmAugaJpZM4YoBVR>.\n> \n\n","createdAt":"2018-11-19T12:04:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12208#issuecomment-439871110","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0MDE0NTA3OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@felberj if you craft a test for radare2-regressions it will certainly help for improving the analysis.","createdAt":"2018-11-20T05:29:16Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12208#issuecomment-440145079","viewerDidAuthor":false}],"number":12208,"title":"Failing to to CFG recovery"},{"body":"This issue aims to track and describe a bunch of issues found in a small ELF file compiled with the NDK for Android.\r\n\r\n[libhello-jni.so.zip](https://github.com/radare/radare2/files/2592686/libhello-jni.so.zip)\r\n\r\n\r\n* [ ] two relocs pointing to the same import\r\n* [ ] reloc resolution\r\n\r\nBy setting asm.emu=1 and emu.write=1 i see that r6 points to 0 by doing the esil emulation of this function.\r\n\r\nThe reason why  r6 points to 0 is because its a reloc, and this is set by the system linker at runtime, but we should be able to identify the address  which matches witht he info from rabin2, but for some reason that i didnt checked yet, the flag is pointing somewhere else, thats why there's no name in the resolution as a comment next the the blx lines.\r\n\r\nby looking at the output of ir* i find out the problem... this bin  have 2 relocs to the same strtok import (WTF). thats why the  2nd reloc overwrites the first flag.\r\n\r\n[0x00000c9c]> ir*~strtok\r\nf reloc.strtok @ 0x00003f6c\r\nf reloc.strtok @ 0x00003fdc\r\n\r\nrelocs virtual values can be set with io.cache, but that can result in some unexpected and complicated results, so thats why the .dynamic section is empty.\r\n\r\n<img width=\"567\" alt=\"screenshot 2018-11-17 at 18 37 40\" src=\"https://user-images.githubusercontent.com/917142/48671342-bc958400-eb26-11e8-9f71-4312017368a9.png\">\r\n\r\n![image 2018-11-18 11 42 59](https://user-images.githubusercontent.com/917142/48671362-1ac26700-eb27-11e8-8021-1b21e0a1020a.jpg)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzOTY4MzI4Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"The 2nd, \"reloc resolution\" one. Is related to the fact that this code does like this:\r\n\r\n```\r\nldr r1, [0xdd0] ; \r\nadd r1, pc // strtok\r\nadd r4, pc // another import\r\nldr r6, [r1]  // load reloc runtime address which is 0 in  r2land\r\nblx r6    // call strtok reloc // actually calls to  0, beacuse r2 didnt \"resolved\" this reloc in  memory\r\n```\r\n\r\nwe need the io.cache magic here and set false values in memory to trick the disassembler to output meaningful references here","createdAt":"2018-11-18T10:46:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12206#issuecomment-439683282","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2OTc1NjI1MQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"With regard to \"two relocs pointing to the same import\":\r\n\r\nAre you sure it is a bug? From `readelf` I can see two relocations, so I'm inclined to say we are doing the right thing.\r\n\r\n```\r\nRelocation section '.rel.dyn' at offset 0x93c contains 25 entries\r\n...\r\n00003f6c  00002015 R_ARM_GLOB_DAT    00000000   strtok@LIBC\r\n...\r\n\r\nRelocation section '.rel.plt' at offset 0xa04 contains 18 entries:\r\n...\r\n00003fdc  00002016 R_ARM_JUMP_SLOT   00000000   strtok@LIBC\r\n...\r\n```","createdAt":"2019-03-05T16:46:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12206#issuecomment-469756251","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2OTc1ODQxOQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@radare could you please explain exactly what is the issue with precise \"Steps to reproduce\"/\"Expected output\"/\"Actual output\"? I have an hard time understanding what is the second issue you are mentioning. Also, I fail to understand how all this is related to RBin (it seems more like an ESIL issue for what I got so far).","createdAt":"2019-03-05T16:51:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12206#issuecomment-469758419","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2OTgyMzk2OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"yeah not all is depending on bin here, i will have a look when i get some time","createdAt":"2019-03-05T19:25:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12206#issuecomment-469823969","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzY5NTg0MA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"This can't be solved if we don't get a better description of the issue, as already asked in https://github.com/radare/radare2/issues/12206#issuecomment-469758419","createdAt":"2019-04-16T14:53:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12206#issuecomment-483695840","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzY5NjIxOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i will describe in detail when i get some spare time. focus on the other elf issue for now","createdAt":"2019-04-16T14:54:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12206#issuecomment-483696219","viewerDidAuthor":false}],"number":12206,"title":"ARM/ELF issues"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Debian amd 64, Kali x86-64\r\n| File format of the file you reverse (mandatory)      | ELF \r\n| Architecture/bits of the file (mandatory)            | arm 32-bit\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.0.1 0 @ linux-x86-64 git.3.0.1 commit: HEAD build: 2018-10-20__19:42:15\r\n\r\nThe binary i'm using, a simple crackme : \r\n[ch23.zip](https://github.com/radare/radare2/files/2585296/ch23.zip)\r\n\r\n### Expected behavior\r\nI'm trying to remote debug the binary via a chrooted environnement using qemu-arm-static. Normally i should be able to see the code, put breakpoints and more...\r\n\r\n### Actual behavior\r\ni can connect r2 to the gdb server but when I print the main by example, I view the qemu code instead of the binary one. But when i try in IDA, i can debug normally.\r\n\r\n### \r\nSteps to reproduce the behavior \r\nto launch the chroot with the binary : \r\n`sudo chroot ./ /usr/bin/qemu-arm-static -g 8686 /ch23.bin AAAA`\r\n\r\nAnd then the connection with r2 : \r\n![radare2](https://user-images.githubusercontent.com/40743997/48558610-ffb6e380-e8e9-11e8-8861-f0095328a15e.PNG)\r\n\r\nI don't know if i'm doing something bad or if r2 cannot do that kind of task, but any help would be much appreciated.\r\n\r\nthanks for reading ! :)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYyNjI3MzgxMg==","author":{"login":"abcSup"},"authorAssociation":"CONTRIBUTOR","body":"Thanks for reporting the issue!\r\n\r\n`r2 -d ./ch23.bin gdb://localhost:8686` will actually run `./ch23.bin gdb://localhost:8686` on your host instead of connecting to the remote ARM gdbserver. Please try `r2 -d gdb://localhost:8686` and let me know if it works.\r\n","createdAt":"2020-05-10T04:58:06Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12179#issuecomment-626273812","viewerDidAuthor":false}],"number":12179,"title":"Problems to remote debugging arm binaries"},{"body":"Still used in some legacy but popular devices.\r\n[R8822.PDF](https://github.com/radare/radare2/files/2583677/R8822.PDF)\r\n","comments":[],"number":12168,"title":"Support for 16bit RISC R8822 architecture"},{"body":"e graph.layout=1\r\n\r\n<img width=\"1359\" alt=\"screenshot 2018-11-15 at 02 42 33\" src=\"https://user-images.githubusercontent.com/917142/48524322-30623300-e880-11e8-89f6-bf61318bc5ba.png\">\r\n","comments":[],"number":12164,"title":"Align nodes vertically in horizontal layout"},{"body":"We miss those:\r\n\r\n* [ ] r600\r\n* [ ] nvptx\r\n* [ ] amdgcn\r\n\r\n\r\n<img width=\"539\" alt=\"screenshot 2018-11-15 at 01 25 35\" src=\"https://user-images.githubusercontent.com/917142/48521618-8ed5e400-e875-11e8-8a69-eb6e688f62e0.png\">\r\n\r\nThis issue aims to coordinate efforts towards making those archs into capstone first.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzODg3NzM3Nw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Probably in 10 years in capstone, if we are lucky enough.\n\nOn Thu, Nov 15, 2018, 8:28 AM radare <notifications@github.com wrote:\n\n> We miss those:\n>\n>    - nvptx\n>    - [ ] r600\n>    - amdgcn\n>\n> [image: screenshot 2018-11-15 at 01 25 35]\n> <https://user-images.githubusercontent.com/917142/48521618-8ed5e400-e875-11e8-8a69-eb6e688f62e0.png>\n>\n> This issue aims to coordinate efforts towards making those archs into\n> capstone first.\n>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/radare/radare2/issues/12161>, or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAMZ_U4izy8KWYCG9Tq334s5ypdl6To4ks5uvLUwgaJpZM4Ye2Nd>\n> .\n>\n","createdAt":"2018-11-15T01:05:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12161#issuecomment-438877377","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzODkxNTg3Mg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"https://github.com/radare/radare2/issues/6996","createdAt":"2018-11-15T04:45:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12161#issuecomment-438915872","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NjQyMzA0Mg==","author":{"login":"Silipwn"},"authorAssociation":"NONE","body":"Would like to work on this issue, any tips on how to get started?","createdAt":"2019-02-22T14:52:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12161#issuecomment-466423042","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NjQyNjMzMg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"There is a page about adding new architecture in the r2book + you can check any history for any architecture in the repo ðŸ‘ ","createdAt":"2019-02-22T15:01:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12161#issuecomment-466426332","viewerDidAuthor":false}],"number":12161,"title":"Add support for GPUs"},{"body":"While working on arm analysis I noticed that files which are loadded by mapping it into another direction with `-m` was not setting the bits hints correctly.\r\n\r\n```\r\nryzen:new alvaro$ r2 -a arm -b 16 -m 0x8000 ../bins/elf/libmagic.so \r\nWARNING: using oba to load the syminfo from different mapaddress.\r\nTODO: Must use the API instead of running commands to speedup loading times.\r\n -- Execute a command on the visual prompt with cmd.vprompt\r\n[0x0000dfa8]> ah\r\n[0x0000dfa8]> \r\n```\r\n\r\nHowever, if loaded normally\r\n\r\n```\r\nryzen:new alvaro$ r2 -a arm -b 16 ../bins/elf/libmagic.so \r\n -- Do you want to print 333.5K chars? (y/N)\r\n[0x00005fa8]> ah\r\n 0x00000000 - 0x00000000 => bits=32\r\n 0x00006060 - 0x00006060 => bits=16\r\n 0x00007edc - 0x00007edc => bits=32\r\n 0x000080fc - 0x000080fc => bits=16\r\n 0x000083f0 - 0x000083f0 => bits=32\r\n 0x00017024 - 0x00017024 => bits=16\r\n```\r\n\r\nThis is gonna affect the analysis enormously on arm due to missing anal hints. Furthermore, there are some `WARNINGS` and `TODO`.\r\n\r\nThe issue is here in `r_bin_open_io`\r\n\r\n```c\r\n    if (!buf_bytes) {                                                                                                                                                                                                                                                                                                     \r\n                if ((int)opt->sz < 0) {                                                                                                                                                                                                                                                                                       \r\n                        eprintf (\"Cannot allocate %d bytes\\n\", (int)(opt->sz));                                                                                                                                                                                                                                               \r\n                        return false;                                                                                                                                                                                                                                                                                         \r\n                }                                                                                                                                                                                                                                                                                                             \r\n                const int asz = opt->sz? (int)opt->sz: 1;                                                                                                                                                                                                                                                                     \r\n                buf_bytes = calloc (1, asz);                                                                                                                                                                                                                                                                                  \r\n                if (!buf_bytes) {                                                                                                                                                                                                                                                                                             \r\n                        eprintf (\"Cannot allocate %d bytes.\\n\", asz);                                                                                                                                                                                                                                                         \r\n                        return false;                                                                                                                                                                                                                                                                                         \r\n                }                                                                                                                                                                                                                                                                                                             \r\n                ut64 seekaddr = is_debugger? opt->baseaddr: opt->loadaddr;                                                                                                                                                                                                                                                    \r\n                if (!iob->fd_read_at (io, opt->fd, seekaddr, buf_bytes, asz)) {                                                                                                                                                                                                                                               \r\n                        opt->sz = 0LL;                                                                                                                                                                                                                                                                                        \r\n                }                                                                                                                                                                                                                                                                                                             \r\n        }                  \r\n```\r\n`seekaddr` will be what is was passed to `-m` and this should be 0 since the file is paddr so later on `check_bytes` can detect correctly the bin plugin.\r\n\r\nI believe @ret2libc is working on refactoring  this - dunno if a regression. \r\n\r\nDue to this issue my PR https://github.com/radare/radare2/pull/12068 will have some [XX].\r\n\r\nExample\r\n\r\n```\r\nryzen:new alvaro$ r2 -a arm -b 16 ../bins/elf/libmagic.so \r\n -- I endians swap.\r\n[0x00005fa8]> aac\r\n[0x00005fa8]> afl~?\r\n202\r\n[0x00005fa8]> q\r\nryzen:new alvaro$ r2 -a arm -b 16 -m 0x80000000 ../bins/elf/libmagic.so \r\nWARNING: Plugin any should implement load_buffer method instead of load.\r\nWARNING: using oba to load the syminfo from different mapaddress.\r\nTODO: Must use the API instead of running commands to speedup loading times.\r\n -- nothing personal, just bitness\r\n[0x80005fa8]> aac\r\n[0x80005fa8]> afl~?\r\n96\r\n```\r\nThe functions should be the same independently where the binary was loaded.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzODQ0NTEwOQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I donâ€™t think itâ€™s a regression. We can easily test on 2 releases ago anyway... however it happened to me too and I have some doubts about the whole base/laddr concept.\r\n\r\nFor your particular case, why donâ€™t you use -B?","createdAt":"2018-11-13T21:32:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12146#issuecomment-438445109","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzODU3MDE4NQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I can confirm it was happening in radare2-2.9.0 too.","createdAt":"2018-11-14T07:54:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12146#issuecomment-438570185","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzODU3NjEzNg==","author":{"login":"alvarofe"},"authorAssociation":"CONTRIBUTOR","body":"-B it is what I use, I was trying to understand why there were tests failing in my PR and I noticed this behaviour. ","createdAt":"2018-11-14T08:19:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/12146#issuecomment-438576136","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzODU4Njk1MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"-B is what you should use if the bin have headers. Use only -m when messing with raw dumps\n\n> On 14 Nov 2018, at 09:19, Ãlvaro Felipe Melchor <notifications@github.com> wrote:\n> \n> -B it is what I use, I was trying to understand why there were tests failing in my PR and I noticed this behaviour.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-11-14T08:59:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12146#issuecomment-438586951","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzODYxMTMzOA==","author":{"login":"alvarofe"},"authorAssociation":"CONTRIBUTOR","body":"https://github.com/radare/radare2-regressions/blob/master/new/db/anal/others#L67","createdAt":"2018-11-14T10:18:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12146#issuecomment-438611338","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcwODMyMzU3MQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-10-14T10:50:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12146#issuecomment-708323571","viewerDidAuthor":false}],"number":12146,"title":"-m option in r2 does not detect the right bin plugin and hence things are missed"},{"body":"Radare2 GRUB code is very old, while mainline changed a lot. It would be beneficial to update it to the latest and introduce updating mechanism, like for capstone.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzODI2NzkyMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I also changed many things in grub to make it usable as a library. We dont want asserts for example\n\n> On 13 Nov 2018, at 13:22, Anton Kochkov <notifications@github.com> wrote:\n> \n> Radare2 GRUB code is very old, while mainline changed a lot. It would be beneficial to update it to the latest and introduce updating mechanism, like for capstone.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-11-13T13:36:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12142#issuecomment-438267921","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzODM4MDE4Mg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"For removing asserts we can use semantic patching with coccinelle http://coccinelle.lip6.fr/sp.php","createdAt":"2018-11-13T18:17:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12142#issuecomment-438380182","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcwNzk1NTA1MA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-10-13T19:19:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12142#issuecomment-707955050","viewerDidAuthor":false}],"number":12142,"title":"Update shlr/grub"},{"body":"To provide the same source using different compilers and optimization levels.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ0MTk1MDc3NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See https://github.com/ethanhs/cce on how to produce many binaries from the same source with many different compilers.","createdAt":"2018-11-27T07:05:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15585#issuecomment-441950774","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2MzMwNTg5OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"No\n\n> On 9 Dec 2019, at 14:29, Anton Kochkov <notifications@github.com> wrote:\n> \n> ï»¿\n> To provide the same source using different compilers and optimization levels.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2019-12-09T15:59:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15585#issuecomment-563305899","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2Mzk2NzIyMw==","author":{"login":"kazarmy"},"authorAssociation":"CONTRIBUTOR","body":"> See https://github.com/ethanhs/cce ...\r\n\r\nIs there a way to download the binary?","createdAt":"2019-12-10T10:23:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15585#issuecomment-563967223","viewerDidAuthor":false}],"number":15585,"title":"Generate more tests using GodBolt"},{"body":"While radare2 is low-level debugger, sometimes it is being used with some source-level debugging too.\r\nMicrosoft started an initiative very similar to LSP (Language Server Protocol) but targeting debuggers.\r\nIt is called DAP - Debug Adapter Protocol. In this issue I encourage you to think if this kind of support may benefit radare2 or not.\r\n\r\nSee more information at https://microsoft.github.io/debug-adapter-protocol/\r\n\r\nSpecification is here https://microsoft.github.io/debug-adapter-protocol/specification\r\n\r\nSee implementation for C/C++ https://github.com/Microsoft/vscode-cpptools/tree/master/Documentation/Debugger\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzODY4NTcxNw==","author":{"login":""},"authorAssociation":"NONE","body":"useless I think","createdAt":"2018-11-14T14:44:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12128#issuecomment-438685717","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg2MDY5NDEzNQ==","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"I do not think this feature is useless. This protocol is the only remote debugger protocol handled by a gameboy emulator: Emulicious. This protocol is usefull for retro-console debugging.\r\n\r\nI plan to write a paper about gameboy console for r2conf. Have this feature could be a real plus!","createdAt":"2021-06-14T13:41:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12128#issuecomment-860694135","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg2MDc1MTE0Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"You can look into that page to see different implementations \n\n\nhttps://microsoft.github.io/debug-adapter-protocol//debug-adapter-protocol/implementors/adapters/\n\n\nSent from my iPhone\n\n> On 14 Jun 2021, at 15:41, gogo2464 ***@***.***> wrote:\n> \n> ï»¿\n> I do not think this feature is useless. This protocol is the only remote debugger protocol handled by a gameboy emulator: Emulicious. This protocol is usefull for retro-console debugging.\n> \n> I plan to write a paper about gameboy console for r2conf. Have this feature could be a real plus!\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2021-06-14T14:55:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12128#issuecomment-860751146","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg2MDk1MzM1Mw==","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"@radare error 404: are you sure that your link is not dead?","createdAt":"2021-06-14T19:58:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12128#issuecomment-860953353","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg2MTA4MTEzOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Funny they check for the referer\n\nhttps://microsoft.github.io/debug-adapter-protocol//debug-adapter-protocol/","createdAt":"2021-06-15T00:33:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12128#issuecomment-861081138","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg2MTA5OTA3MQ==","author":{"login":"gogo2464"},"authorAssociation":"CONTRIBUTOR","body":"> \r\n> Funny they check for the referer https://microsoft.github.io/debug-adapter-protocol//debug-adapter-protocol/\r\n\r\nThey also check for the refere here","createdAt":"2021-06-15T01:18:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12128#issuecomment-861099071","viewerDidAuthor":false}],"number":12128,"title":"Support DAP - Debug Adapter Protocol"},{"body":"Change signature to `R_IPI bool r_bin_file_set_cur_binfile_obj(RBin *bin, RBinFile *bf)`\r\n\r\nbecause the last argument is implicit","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzODY2MDM2Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"for 3.1?","createdAt":"2018-11-14T13:24:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12084#issuecomment-438660363","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzODY2MjI1Ng==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Yes, I'll do it soon","createdAt":"2018-11-14T13:31:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12084#issuecomment-438662256","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzOTE1Nzg2MA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"actually... the last argument is necessary:\r\n```\r\nR_IPI bool r_bin_file_set_cur_binfile_obj(RBin *bin, RBinFile *bf, RBinObject *obj) {\r\n\tr_return_val_if_fail (bin && bf, false);\r\n\tif (!obj) {\r\n\t\treturn false;\r\n\t}\r\n\tbin->file = bf->file;\r\n\tbin->cur = bf;\r\n\tbin->narch = bf->narch;\r\n\tbf->o = obj;\r\n\tRBinPlugin *plugin = r_bin_file_cur_plugin (bf);\r\n\tif (bin->minstrlen < 1) {\r\n\t\tbin->minstrlen = plugin? plugin->minstrlen: bin->minstrlen;\r\n\t}\r\n\treturn true;\r\n}\r\n```\r\n\r\nYou cannot remove it, because this function is used to set `bf->o`, that means that `bf->o` is not set before. Can I close this?","createdAt":"2018-11-15T19:17:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12084#issuecomment-439157860","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzOTIyMzgxNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"imho the function name is pretty bad, as well as the code inside.\n\n* returns false if any of the args is null, so you cant unset a binobj.  then it should be in the val_if_fail\n* sets some internal vars from the binfile as \"global\" in bin->, those are weak pointers which have no safetiness to break, and there must be a generic way to access those instead of \"caching\" them globally\n* follows the concept of bin->cur which should be avoided\n* plugin->minstrlen should have a valid value range, this is not checked\n* r_bin_file_cur_plugin is pretty long and boring api to just do bf->curplugin (which also have a pretty bad name)\n\ni mean, this code hurts me in several ways\n\n> On 15 Nov 2018, at 20:17, Riccardo Schirone <notifications@github.com> wrote:\n> \n> actually... the last argument is necessary:\n> \n> R_IPI bool r_bin_file_set_cur_binfile_obj(RBin *bin, RBinFile *bf, RBinObject *obj) {\n> \tr_return_val_if_fail (bin && bf, false);\n> \tif (!obj) {\n> \t\treturn false;\n> \t}\n> \tbin->file = bf->file;\n> \tbin->cur = bf;\n> \tbin->narch = bf->narch;\n> \tbf->o = obj;\n> \tRBinPlugin *plugin = r_bin_file_cur_plugin (bf);\n> \tif (bin->minstrlen < 1) {\n> \t\tbin->minstrlen = plugin? plugin->minstrlen: bin->minstrlen;\n> \t}\n> \treturn true;\n> }\n> You cannot remove it, because this function is used to set bf->o, that means that bf->o is not set before. Can I close this?\n> \n> â€”\n> You are receiving this because you were assigned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/12084#issuecomment-439157860>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-ltOWium9pr5yQNwF2EjD-kmKRSfHks5uvb3ngaJpZM4YS1xi>.\n> \n\n","createdAt":"2018-11-15T23:10:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12084#issuecomment-439223814","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzOTMyNjg2Mg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Yeah I agree there are many things to fix, though they will probably be resolved once we start merging RBinFile/RBinObject together... I will start the merge soon, but not sure it will land for 3.2","createdAt":"2018-11-16T09:02:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12084#issuecomment-439326862","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzOTMyNjkwMA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I meant 3.1","createdAt":"2018-11-16T09:02:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12084#issuecomment-439326900","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzOTMzODk1OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"The function name is confusing and i dont think there must be any setter to fill this field because it must be done when calling the plugin\n\n> On 15 Nov 2018, at 20:17, Riccardo Schirone <notifications@github.com> wrote:\n> \n> actually... the last argument is necessary:\n> \n> R_IPI bool r_bin_file_set_cur_binfile_obj(RBin *bin, RBinFile *bf, RBinObject *obj) {\n> \tr_return_val_if_fail (bin && bf, false);\n> \tif (!obj) {\n> \t\treturn false;\n> \t}\n> \tbin->file = bf->file;\n> \tbin->cur = bf;\n> \tbin->narch = bf->narch;\n> \tbf->o = obj;\n> \tRBinPlugin *plugin = r_bin_file_cur_plugin (bf);\n> \tif (bin->minstrlen < 1) {\n> \t\tbin->minstrlen = plugin? plugin->minstrlen: bin->minstrlen;\n> \t}\n> \treturn true;\n> }\n> You cannot remove it, because this function is used to set bf->o, that means that bf->o is not set before. Can I close this?\n> \n> â€”\n> You are receiving this because you were assigned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-11-16T09:46:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12084#issuecomment-439338958","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2MzIwMjA3Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i will focus on RBin and RAnal on next release. we shouldnt be delaying issues like this that much","createdAt":"2019-02-13T13:38:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12084#issuecomment-463202076","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwMjQ5Mzc3Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I did tonss of changes sin RBin related to this, actually i think the function hsould be renamed from `r_bin_file_set_cur_binfile_obj` to `r_bin_file_set_obj`. right onw theres only one rbinobj for eachh rbinfile, so the only problem is when this is null, becaues the plugin didnt initialized anything and there's some dupped info between binfile and binobj which may be deleted","createdAt":"2019-06-16T23:14:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12084#issuecomment-502493776","viewerDidAuthor":false}],"number":12084,"title":"R_IPI bool r_bin_file_set_cur_binfile_obj(RBin *bin, RBinFile *bf, RBinObject *obj) {"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu x86 64\r\n| File format of the file you reverse (mandatory)      | PE\r\n| Architecture/bits of the file (mandatory)            |  x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.0.1 19829 @ linux-x86-64 git.3.0.1\r\ncommit: addb7f21e73073600fd6205e385fa096084701f5 build: 2018-10-23__16:16:31\r\n\r\n### Expected behavior\r\n0x00467bf1]> axt str.212.74.90.154\r\n(nofunc) 0x403c1e [DATA] mov eax, str.212.74.90.154\r\n### Actual behavior\r\n[0x0041298b]> axt @ str.212.74.90.154\r\n[0x0041298b]> \r\n\r\n### Here I debug exe file with remote winedbg ï¼ˆ **Do not work**) \r\n- [test.zip](https://github.com/radare/radare2/files/2557723/test.zip)\r\n```\r\n $ winedbg.exe --gdb --no-start ./bkl.exe\r\n $ r2 -e bin.baddr=0x400000 -e dbg.exe.path=./bkl.exe -d gdb://localhost:55238 \r\n > aaa\r\n > axt @ str.212.74.90.154 ;  get nothing\r\n > \r\n```\r\n### Here I open file with static analysis ( **can work** )\r\n```\r\n$ r2 ./bkl.exe \r\n -- \"a collection of garbage\" -- an r2 pro user\r\n[0x00467bf1]> aar\r\n[0x00467bf1]> axt str.212.74.90.154 ;  this can get xrefs \r\n(nofunc) 0x403c1e [DATA] mov eax, str.212.74.90.154 \r\n[0x00467bf1]> \r\n\r\n```\r\n\r\n\r\n\r\nBut I want r2 can work in debug mode with  winedbg.exe --gdb --no-start .\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzNzM2NjcxOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"You have to. export al the flags and analysis info from the static session. this way the info will be there for sure. but if you want to analyze code directly in the gdb session you may probably have a look at the maps and identify the reason the code is not analyzed (see anal.noncode and anal.in variables). if there are no maps (see dm command) or regions are not marked as executable, the code analysis will not process that by default. i assume this is the reason","createdAt":"2018-11-09T13:56:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12081#issuecomment-437366718","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NDA0NDEwMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can you try again and confirm?","createdAt":"2019-04-17T11:25:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12081#issuecomment-484044103","viewerDidAuthor":false}],"number":12081,"title":"axt missing xrefs in remote debug"},{"body":"Consider the following example:\r\n![photo_2018-11-06_17-34-40](https://user-images.githubusercontent.com/1460997/48083916-b209ef00-e1f6-11e8-93d8-1c6acd00914d.jpg)\r\nBoth pushes use the same offset from rsp, but they will end up reading from different addresses. r2 assigns the same var to both, which is wrong.\r\n\r\nMy idea to solve this by \"converting\" sp-based vars to bp-based ones (since bp in practice usually doesn't change inside a function) would be the following:\r\nDo a complete trace through the whole graph of the function from the beginning to the end and save the value of bp-sp (size of the stackframe) as metadata for each instruction. `RAnalOp.stackptr` gives the difference by which sp changes when the instruction is executed. Then, for each `sp + x`, an equivalent `bp + y` can be calculated, which will identify our vars.\r\n\r\nThis has some downsides/pitfalls:\r\n* There might be no bp in the arch\r\n* Depends on `RAnalOp.stackptr` to be always correct. If it is not for a single instruction, the analysis for the whole function might be wrong.\r\n* What if there is something like `sub esp, eax`?\r\n* It is theoretically possible to have different possible values for bp-sp at a point depending on the control flow executed before\r\n* ...\r\n\r\nThus, as a fallback if the above method fails, it would be possible to just create a new variable for each instruction that accesses any `sp + ?` (or perhaps for a sequence of instruction where we know that sp doesn't change?).","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzNjU1OTcyMA==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"Quick and dirty implementation of the sp tracing in r2pipe: https://gist.github.com/thestr4ng3r/403fecffc081a899618b1500ba6d1156\r\nIt fails pretty hard on callee cleanup calls if the arguments of the callee are not known.","createdAt":"2018-11-07T09:26:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12070#issuecomment-436559720","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3Mzg3NTAxMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i think we should have a codeshare-style repository to hold all those r2pipe snippets. maybe managed via r2pm and having a database of gist urls?","createdAt":"2019-03-18T11:36:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12070#issuecomment-473875012","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5NDc3MTEzOQ==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"@radare What do you think about adding an analysis hint that contains the stackframe size for an instruction? This could be easily filled from different kinds of analysis and then used later.","createdAt":"2019-05-22T11:55:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12070#issuecomment-494771139","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5NDc4MjgyNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Sgtm\n\n> On 22 May 2019, at 13:55, Florian MÃ¤rkl <notifications@github.com> wrote:\n> \n> @radare What do you think about adding an analysis hint that contains the stackframe size for an instruction? This could be easily filled from different kinds of analysis and then used later.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-05-22T12:34:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12070#issuecomment-494782827","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5NTk5MTc4Ng==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"Now that ahF is there, here is an example how to import an x64dbg trace to annotate sp-based vars with a bp offset: https://gist.github.com/thestr4ng3r/24a7b93a8b936019316d6fff46becf33\r\nThis produces:\r\n![Bildschirmfoto vom 2019-05-26 13-31-14](https://user-images.githubusercontent.com/1460997/58381206-94e21580-7fba-11e9-9336-ddb10d80b691.png)\r\n","createdAt":"2019-05-26T11:26:50Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12070#issuecomment-495991786","viewerDidAuthor":false}],"number":12070,"title":"Better ways to handle sp-based vars"},{"body":"DEMO: https://asciinema.org/a/P6210DmJoUFgGtb68sKThQKGW\r\n\r\nWishlist/Future:\r\n\r\n* [ ] Launch it after N minutes of inactivity\r\n* [ ] noecho|icanon is required for iterm to show the key emoji, but read seems to fail that way\r\n* [ ] Not tested on windows (probably not working)\r\n","comments":[],"number":12017,"title":"LL Lock screen improvements"},{"body":"Continuation of #11786 \r\n- [ ] Use heap for buffer instead of stack (r_str_newf)\r\n- [ ] Move callback system to RVector with context/*user support - https://pastebin.com/QPhvTmfy\r\n- [ ] Use REvent API's r_event_send #11914 \r\n\r\nOther changes already done by ret2libc: #11971","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzNTk1MzQ4NA==","author":{"login":"mcd1992"},"authorAssociation":"CONTRIBUTOR","body":"Current changes: https://github.com/radare/radare2/compare/master...mcd1992:rlog-fixes","createdAt":"2018-11-05T17:05:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12007#issuecomment-435953484","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NDA0NDg2NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"updates on this? i think a small PR shouldnt be hard to solve all this","createdAt":"2019-04-17T11:28:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/12007#issuecomment-484044864","viewerDidAuthor":false}],"number":12007,"title":"Improvements to the RLog API"},{"body":"Evaluate results and consider removing this code or keep the current implementation","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ2MzIwMDc5MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping @ret2libc ","createdAt":"2019-02-13T13:34:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11992#issuecomment-463200790","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2MzIwMTU4OA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I don't think this is *that* important. I'm going to mark it for milestone 9999, flag zones are not one of the main features IMO.","createdAt":"2019-02-13T13:36:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11992#issuecomment-463201588","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2MzIzMjgzMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I use them pretty frequently\n\n> On 13 Feb 2019, at 14:36, Riccardo Schirone <notifications@github.com> wrote:\n> \n> I don't think this is that important. I'm going to mark it for milestone 9999, flag zones are not one of the main features IMO.\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-02-13T15:05:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11992#issuecomment-463232830","viewerDidAuthor":false}],"number":11992,"title":"Enable R_FLAG_ZONE_USE_SDB (and fix whatever its broken)"},{"body":"* [ ] Rename `ob` to `oi` as reported in https://github.com/radareorg/radare2/issues/19975\r\n* [ ] Add `obaa`: command to open a bin for all the opened files 'o'\r\n* [ ] `ob file` -> should open a file, and `obf` must die\r\n* [ ] `obp bd` -> should do what `ob bd` does now\r\n* [ ] `ob.` -> the same as `oba $$`\r\n* [ ] kill `obb`\r\n* [ ] `ob` to display the name of the plugin\r\n* [ ] rename `objid` to `binfd` in `ob`?\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzNDA4NDExNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Maybe we should make `io` command to be an alias for `ob` and kill what its doing right now","createdAt":"2018-10-29T21:18:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11988#issuecomment-434084116","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzNDIyMjI0MA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"The whole oa, ob, oc, of, on, o for opening files is very confusing ","createdAt":"2018-10-30T09:04:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11988#issuecomment-434222240","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzNDMwNDU1Mw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"I think it is better to remove `io` whatsoever.","createdAt":"2018-10-30T13:40:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11988#issuecomment-434304553","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzNDMxMjkwMA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"I agree on removing `io` too","createdAt":"2018-10-30T14:02:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11988#issuecomment-434312900","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzNDM4OTczNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"why\n\n> On 30 Oct 2018, at 14:41, Anton Kochkov <notifications@github.com> wrote:\n> \n> I think it is better to remove io whatsoever.\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/11988#issuecomment-434304553>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lkulcn0x4dS5zhjz3xW68cRdqxh8ks5uqFb6gaJpZM4YAan9>.\n> \n\n","createdAt":"2018-10-30T17:12:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11988#issuecomment-434389735","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5NjE2ODk4Ng==","author":{"login":"c-urly"},"authorAssociation":"CONTRIBUTOR","body":"How many of this task got over can anybody check the boxes above? ","createdAt":"2020-03-08T05:34:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11988#issuecomment-596168986","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5NjE5MDQ0Nw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@c-urly none","createdAt":"2020-03-08T10:36:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11988#issuecomment-596190447","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgyNjI5NTE3MA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"bringing back this discussion to the table. comments out there? anyone in the mood to do any of the changes enumerated there?","createdAt":"2021-04-25T09:58:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11988#issuecomment-826295170","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs5CJ61F","author":{"login":"alex-bender"},"authorAssociation":"CONTRIBUTOR","body":"```]> ob?\r\nUsage: ob   # List open binary files backed by fd\r\n| ob [bfid]              switch to open given objid\r\n| ob                     list opened binary files and objid\r\n| ob*                    list opened binary files and objid (r2 commands)\r\n| ob *                   select all bins (use 'ob bfid' to pick one)\r\n| ob-*                   delete all binfiles\r\n| ob-[objid]             delete binfile by binobjid\r\n| ob. ([addr])           show bfid at current address\r\n| ob=                    show ascii art table having the list of open files\r\n| obL                    same as iL or Li\r\n| oba [addr] [baddr]     open file and load bin info at given address\r\n| oba [addr] [filename]  open file and load bin info at given address\r\n| oba [addr]             open bin info from the given address\r\n| obf ([file])           load bininfo for current file (useful for r2 -n)\r\n| obj                    list opened binary files and objid (JSON format)\r\n| obn [name]             select binfile by name\r\n| obo [fd]               switch to open binfile by fd number\r\n| obr [baddr]            rebase current bin object\r\n```\r\nlooks like `ob bd` does nothing now\r\nkill obb -- looks like it's done\r\n","createdAt":"2022-04-26T14:52:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11988#issuecomment-1109896517","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5zmOju","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"moving to 6.x because enotime to do all the changes and the last release is delayed for more than 6 month","createdAt":"2024-02-12T19:28:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11988#issuecomment-1939400942","viewerDidAuthor":true}],"number":11988,"title":"ob inconsistencies"},{"body":"Something like `Ve` or `Vv`, but based on `k` commands.\r\nVery helpful when browsing meta information and thinking on improving the analysis.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY5NzE4MjU0NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Will be still relevant for the new r2db @thestr4ng3r ","createdAt":"2020-09-23T07:19:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11979#issuecomment-697182544","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NzE5MzE5MQ==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"Yeah could be useful to manually browse and debug projects.","createdAt":"2020-09-23T07:42:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11979#issuecomment-697193191","viewerDidAuthor":false}],"number":11979,"title":"Visual SDB browser"},{"body":"https://github.com/0ki/presentation-toolkit/","comments":[],"number":11957,"title":"Improve hexdump coloring taking ideas from here"},{"body":"Hi, I want to suggest getting some of the representation and API definitions from xAnalyzer:\r\nhttps://github.com/ThunderCls/xAnalyzer/tree/master/apis_def\r\n\r\nhttps://github.com/ThunderCls/xAnalyzer/issues/37\r\n\r\nIs it all covered?","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzMjk1ODU3OQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Nop it's definitely not all covered, it'd require converting them to r2 format like https://github.com/radare/radare2/blob/master/libr/anal/d/types-windows.sdb.txt#L643","createdAt":"2018-10-25T08:20:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11934#issuecomment-432958579","viewerDidAuthor":false}],"number":11934,"title":"xAnalyzer api definitions."},{"body":"Hi,\r\n\r\nDebian build farm reports a build failure for RISC-V due to jemalloc not support the architecture [0]. I suggest to update radare2's jemalloc implementation, so that it includes RISC-V support [1].\r\n\r\n-- Sebastian\r\n\r\n[0] https://buildd.debian.org/status/fetch.php?pkg=radare2&arch=riscv64&ver=3.0.1%2Bdfsg-1&stamp=1540087129&raw=0\r\n[1] https://github.com/aerospike/jemalloc/commit/919e4a0ea92fbbf9b97efdf9f31a3c800f77cd8f\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzMTY2MDQ0MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Theres a commandline flag to disable this jemalloc thing. For now :p\n\nOur jemalloc implementation is a stripped down version of the official one only caring about parsing so there should be nobarch specific code. \n\n> On 21 Oct 2018, at 05:49, Sebastian Reichel <notifications@github.com> wrote:\n> \n> Hi,\n> \n> Debian build farm reports a build failure for RISC-V due to jemalloc not support the architecture [0]. I suggest to update radare2's jemalloc implementation, so that it includes RISC-V support [1].\n> \n> -- Sebastian\n> \n> [0] https://buildd.debian.org/status/fetch.php?pkg=radare2&arch=riscv64&ver=3.0.1%2Bdfsg-1&stamp=1540087129&raw=0\n> [1] aerospike/jemalloc@919e4a0\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-10-21T11:20:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11886#issuecomment-431660440","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MTA2OTAyNg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Problem it uses system-provided types and ifdefs. We should use refactor the code to use our own types and use dynamic settings (e.g. config variables) to switch between things instead of ifdefs.","createdAt":"2019-01-03T07:10:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11886#issuecomment-451069026","viewerDidAuthor":false}],"number":11886,"title":"Refactor Jemalloc heap parsing code for dynamic configuration and independce from system types."},{"body":"I cooked a script to make a list of all the files with duplicated filenames. this will basically allow us to un-ar all the archives in a single directory and get a single libr.a that works without all the non-portable/messy/hacky partial-ld thing that is breaking static builds on many platforms.\r\n\r\nAnother benefit of doing this is that static build errors will be easier to understand because a single .o file will refer to a unique object file. Having multiple objects with the same name in library archives is \"useful\" but the root of all evil\r\n\r\n```\r\n$ node cfiles.js\r\nDUPE dis.c\r\nDUPE asm.c\r\nDUPE disasm.c\r\nDUPE log.c\r\nDUPE spaces.c\r\nDUPE format.c\r\nDUPE graph.c\r\nDUPE wasm.c\r\nDUPE main.c\r\nDUPE print.c\r\nDUPE calc.c\r\nDUPE code.c\r\nDUPE plugin.c\r\nDUPE cache.c\r\nDUPE lib.c\r\nDUPE file.c\r\nDUPE pipe.c\r\nDUPE utf8.c\r\nDUPE diff.c\r\nDUPE state.c\r\nDUPE cond.c\r\nDUPE op.c\r\nDUPE xrefs.c\r\nDUPE value.c\r\nDUPE session.c\r\nDUPE esil.c\r\nDUPE map.c\r\nDUPE signal.c\r\nDUPE darwin.c\r\nDUPE reg.c\r\nDUPE core.c\r\nDUPE utils.c\r\nDUPE packet.c\r\nDUPE adler32.c\r\nDUPE test.c\r\nDUPE list.c\r\nDUPE fs.c\r\nDUPE disk.c\r\n```\r\n\r\n\r\nThe script:\r\n```js\r\nconst fs = require('fs');\r\n\r\nconst cfiles = fs.readFileSync('cfiles').toString();\r\n\r\nconst cnames = cfiles.split('\\n').map(_ => {\r\n  var a = _.split('/');\r\n  return a[a.length - 1];\r\n});\r\n\r\nconst cache = {};\r\nconst duped = {};\r\nfor (let cfile of cnames) {\r\n\tif (cache[cfile]) {\r\n\t\tif (!duped[cfile]) {\r\n\t\t\tconsole.error(\"DUPE\", cfile);\r\n\t\t}\r\n\t\tduped[cfile] = true;\r\n\t}\r\n\tcache[cfile] = true;\r\n}\r\n```\r\n\r\n\r\nHow to run\r\n```sh\r\nfind libr shlr| grep '\\.c$' > cfiles\r\nnode cfiles.js\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzMTU2ODI5NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Btw static library results in those warnings, which should be taken care:\r\n\r\n```\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: ../libr.a(grub_fs_ntfscomp.c.o) has no symbols\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: ../libr.a(output.c.o) has no symbols\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: ../libr.a(pool.c.o) has no symbols\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: ../libr.a(qnx_src_libqnxr.c.o) has no symbols\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: ../libr.a(thread_pipe.c.o) has no symbols\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: ../libr.a(w32-sys.c.o) has no symbols\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: ../libr.a(grub_fs_ntfscomp.c.o) has no symbols\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: ../libr.a(qnx_src_libqnxr.c.o) has no symbols\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: ../libr.a(output.c.o) has no symbols\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: ../libr.a(pool.c.o) has no symbols\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: ../libr.a(thread_pipe.c.o) has no symbols\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: ../libr.a(w32-sys.c.o) has no symbols\r\n```","createdAt":"2018-10-20T10:23:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11878#issuecomment-431568294","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzMTU2ODQ1Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"See https://github.com/radare/radare2/commit/7d32c05f9a4134e78b5b7d5737ff9bcbcdfca54d#diff-c7a2816e1e3bd74fd1f2ee3ed01d2ce1 ","createdAt":"2018-10-20T10:26:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11878#issuecomment-431568457","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzMTY2Njk3OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"The way im buliding the static libs right now works fine because im packing each module in a separate directory, so as long as there are no duplicated filenames on any module it will work.","createdAt":"2018-10-21T13:03:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11878#issuecomment-431666979","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2MzIwMzY0MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"No issues on this anymore, the current build system for creating static libraries is working fine and its been tested for a while. we may be able to detect when this happens again thanks to the radare2-release repo, so imho we can close it.","createdAt":"2019-02-13T13:43:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11878#issuecomment-463203641","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1NjYwOTMzOA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@ret2libc you might be interested in this as well.","createdAt":"2020-07-10T10:39:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11878#issuecomment-656609338","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1NjY1MzMxMg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"> @ret2libc you might be interested in this as well.\r\n\r\nWhy?\r\n\r\nI think meson doesn't really use `libr.a` and I (still) don't understand the purpose of it.","createdAt":"2020-07-10T12:35:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11878#issuecomment-656653312","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1Njc4MzAyNQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i fixed this long time ago (no two .c files with the same name), actually when i wrote the script. Let me rephrase:\r\n\r\n* If filenames are unique across the project it is easier for everyone if `reg.c` relates to libr_reg, libr_debug, libr_anal or libr_core.\r\n* Archive files support multiple files with the same name, but this is problematic because the way to handle that depends on the version of AR and the way its used. this is why right now it is built this way\r\n* the idea for this issue is to have a way to detect this at PR time\r\n* Meson does not generate libr.a which is imho much better way to use r2 on 3rd party projects (r2-sdk with libr.a and libr.dylib/so/dll) instead of having to drop 50 files to get r2 working","createdAt":"2020-07-10T17:04:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11878#issuecomment-656783025","viewerDidAuthor":true}],"number":11878,"title":"Avoid C files with the same name to simplify libr.a"},{"body":"We need to replicate the sys/sdk.sh with meson.. i would go for sys/meson.py --sdk This is:\r\n\r\n* [x] Build r2 statically\r\n* [ ] Add --nogpl because the SDK must be built WITHOUT GPL code\r\n* [ ] Generate libr.a\r\n* [ ] Create a zip containing libr.a + include files + README?\r\n* [ ] Maybe Add a meson.build and deps.mk \r\n* [ ] Build a small program and link it against this libr.a to test that it works as expected\r\n* [ ] Support for Windows. (.lib)\r\n* [x] Support Android NDK builds\r\n* [ ] Support iOS XCode builds","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzMTU2ODQ2MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"See https://github.com/radare/radare2/commit/7d32c05f9a4134e78b5b7d5737ff9bcbcdfca54d#diff-c7a2816e1e3bd74fd1f2ee3ed01d2ce1","createdAt":"2018-10-20T10:26:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11877#issuecomment-431568461","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MTEzMTQ0Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping","createdAt":"2019-01-03T12:36:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11877#issuecomment-451131447","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1OTY3OTE3NQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Android build and static build can already be done with meson. Sys/meson should die btw. You should always directly use meson.","createdAt":"2020-07-16T21:19:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11877#issuecomment-659679175","viewerDidAuthor":false}],"number":11877,"title":"Build SDK with meson"},{"body":"See https://github.com/cha5126568/rust-reversing-helper\r\n\r\nhttp://kong.re.kr/?p=71","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzMTM2NjU1MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See also https://github.com/radare/radare2/issues/10959 for an examples","createdAt":"2018-10-19T13:39:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11850#issuecomment-431366551","viewerDidAuthor":false}],"number":11850,"title":"Rust language reversing helpers"},{"body":" - Enable `anal.types.constraint` by default\r\n - Add commands to read and change the constraints for particular types or variables\r\n - Add JSON input/output for these commands","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzMTM2NzE1Mw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Don't forget please tests for radare2-regressions.","createdAt":"2018-10-19T13:41:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11828#issuecomment-431367153","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NjU1NzMxOA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"This paper also might be useful for such task:\r\n[PDF: Circular Linear Progressions in SWEET](https://github.com/radare/radare2/files/3007601/3813.pdf)\r\n","createdAt":"2019-03-26T10:11:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11828#issuecomment-476557318","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzA3NzQxMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Can you give some examples of how those commands should look like?","createdAt":"2019-04-15T01:20:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11828#issuecomment-483077413","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzM0NTgxMA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Well, something like:\r\n```\r\nafvc arg3\r\n\r\nafvc arg1\r\n[1;5]\r\nafvc var0\r\n0,[-1;8],25\r\n```\r\n```\r\n\"afvcs var0 1,2,3\"\r\n```\r\nIf you have better ideas - please feel free to suggest.","createdAt":"2019-04-15T17:31:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11828#issuecomment-483345810","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzM1MjY3OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i always anted to have a range parser/checker in r2, i have written it in different languagees already.. so..\n\nhaving 1,2-10,80,90,100-120\n\nthis will allow to \"compile\" this statement and check if a value is in range, or use it as an iterator generator pulling values out of it.\n\n> On 15 Apr 2019, at 19:31, Anton Kochkov <notifications@github.com> wrote:\n> \n> Well, something like:\n> \n> afvc arg3\n> \n> afvc arg1\n> [1;5]\n> afvc var0\n> 0,[-1;8],25\n> \"afvcs var0 1,2,3\"\n> If you have better ideas - please feel free to suggest.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/11828#issuecomment-483345810>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-luWFoiuqGjQwonynjMnMC-2jMHiUks5vhLd6gaJpZM4XdqLR>.\n> \n\n","createdAt":"2019-04-15T17:50:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11828#issuecomment-483352679","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5EWqM4","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I think `aht` should be used to `hint` the analysis with type information. it was deprecated long time ago, so it makes sense to break that in the upcoming big release. \r\n```\r\n| aht[s][?] <type>             Mark immediate as a type offset (deprecated, moved to \"aho\")\r\n```","createdAt":"2022-06-05T11:53:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11828#issuecomment-1146790712","viewerDidAuthor":true}],"number":11828,"title":"Constrained types enhancements"},{"body":"Finding references to strings is a really important/common part of reversing (in my opinion). So it will be cool to have an option that just find references to strings specially when you are reversing a more \"real life\" sample which is > 30 MB, because as far as I know `aaa` and `aar` are currently the only options to find those references, which in a library that I'm currently working, crash because it eats all the ram in no time (memleak?)\r\n\r\nPS: English is obviously no my native language\r\n\r\nThanks","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQyODk4MDA0OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"memory usage will be heavily reduced when we update the version of SDB, probably before next week release.\n\nthe current xrefs storage is not memory efficient because focus on access performance. you can use /r to find references to one place, but maybe will be good to add /rs to find references to strings.\n\n> On 11 Oct 2018, at 15:52, fabianMendez <notifications@github.com> wrote:\n> \n> Finding references to strings is a really important/common part of reversing (in my opinion). So it will be cool to have an option that just find references to strings specially when you are reversing a more \"real life\" sample which is > 30 MB, because as far as I know aaa and aar are currently the only options to find those references, which in a library that I'm currently working, crash because it eats all the ram in no time (memleak?)\n> \n> PS: English is obviously no my native language\n> \n> Thanks\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/11793>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lqesRf_s297_hmv7JEJ3JUyD1iCmks5uj00GgaJpZM4XXk6A>.\n> \n\n","createdAt":"2018-10-11T14:37:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11793#issuecomment-428980049","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyOTI5NDQyNg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Did you try with current version of radare2 from git?","createdAt":"2018-10-12T11:27:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11793#issuecomment-429294426","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyOTQ5ODk3Mw==","author":{"login":"fabianMendez"},"authorAssociation":"NONE","body":"> Did you try with current version of radare2 from git?\r\n\r\nI just updated my radare2 installation, ran `aaa` and the memory usage was significantly reduced\r\n\r\nThanks","createdAt":"2018-10-13T01:06:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11793#issuecomment-429498973","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyOTUzNTAyMg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"So can be closed?","createdAt":"2018-10-13T11:39:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11793#issuecomment-429535022","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyOTkwMjUzNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"nope. i would prefer to have an /rs command for that instead. using esil and data analysis to identify if it points to a string","createdAt":"2018-10-15T15:33:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11793#issuecomment-429902534","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzODg5MjMyNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Which shuold be a modification of /rr (read references)","createdAt":"2018-11-15T02:22:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11793#issuecomment-438892325","viewerDidAuthor":false}],"number":11793,"title":"Analysis of references to strings only"},{"body":"I need to find statically linked libraries inside a binary. Is it possible to load multiple flirt file together with zfs command?","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQyODc2NTQ1OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"you can use zfz to convert them into r2 zignatures and then load them all at once , but theres no way to load multiple flirts at once right now.\n\n> On 10 Oct 2018, at 17:54, Luca Massarelli <notifications@github.com> wrote:\n> \n> I need to find statically linked libraries inside a binary. Is it possible to load multiple flirt file together with zfs command?\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/11784>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lrSuBYKF5pwMPTEx-csrOc4S4LSqks5ujhgrgaJpZM4XVpXE>.\n> \n\n","createdAt":"2018-10-10T23:21:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11784#issuecomment-428765458","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyODgxNjM2MA==","author":{"login":"lucamassarelli"},"authorAssociation":"NONE","body":"Thank you for the answer. How can i load multiple zignatures at once?\r\n\r\n","createdAt":"2018-10-11T04:25:18Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11784#issuecomment-428816360","viewerDidAuthor":false}],"number":11784,"title":"Using multiple FLIRT signature files"},{"body":"Current r2pipe protocol is very simple but have some issues.\r\n\r\n* Not encapsulable (can't embed other protocols inside)\r\n* Special chars can't be transmitted without previous encoding (this can be fixed by adding a length field on each packet)\r\n* Only 1 communication channel ( cannot receive stderr or target debug process stdin for example)\r\n* Cannot send signals or oob data\r\n* No authentication\r\n* No encryption\r\n\r\nThose are some of the issues i find in current r2pipe protocol, if you think on others stuff that i'm missing here please share and we can discuss on how this new protocol may look \r\n\r\nRelated issues:\r\n\r\n* https://github.com/radare/radare2/issues/11425","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQyNzY5NTMyMQ==","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"is encapsulation really a problem?\r\ndon't make encryption a part of this layer.","createdAt":"2018-10-07T23:12:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11763#issuecomment-427695321","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyNzcwODQ4Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Need also full duplex.\n\nOn Mon, Oct 8, 2018, 5:33 AM radare <notifications@github.com> wrote:\n\n> Current r2pipe protocol is very simple but have some issues.\n>\n>    - Not encapsulable (can't embed other protocols inside)\n>    - Special chars can't be transmitted without previous encoding (this\n>    can be fixed by adding a length field on each packet)\n>    - Only 1 communication channel ( cannot receive stderr or target debug\n>    process stdin for example)\n>    - Cannot send signals or oob data\n>    - No authentication\n>    - No encryption\n>\n> Those are some of the issues i find in current r2pipe protocol, if you\n> think on others stuff that i'm missing here please share and we can discuss\n> on how this new protocol may look\n>\n> Related issues:\n>\n>    - #11425 <https://github.com/radare/radare2/issues/11425>\n>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/radare/radare2/issues/11763>, or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAMZ_UxwRwWMnJaSc2Agu7nUAxAMqZ12ks5uinMcgaJpZM4XMDEj>\n> .\n>\n","createdAt":"2018-10-08T02:28:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11763#issuecomment-427708486","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyNzcyMjIyNA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See https://github.com/radareorg/r2pipe.rs/issues/21","createdAt":"2018-10-08T04:59:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11763#issuecomment-427722224","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyNzc1MDA5NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"the RAP protocol actually allows us to do some stuff already, but needs more love, because the length is already there\n\n> On 8 Oct 2018, at 01:12, condret <notifications@github.com> wrote:\n> \n> is encapsulation really a problem?\n> don't make encryption a part of this layer.\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/11763#issuecomment-427695321>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-ls37XpTjpr5O-IRGSTm4RuRtOdTsks5uiopfgaJpZM4XMDEj>.\n> \n\n","createdAt":"2018-10-08T08:03:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11763#issuecomment-427750095","viewerDidAuthor":false}],"number":11763,"title":"r2pipe2 protocol"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu x86 64\r\n| File format of the file you reverse (mandatory)      | None\r\n| Architecture/bits of the file (mandatory)            | x86/32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.0.0-git 19606 @ linux-x86-64 git.2.9.0-271-g237e6c294 commit: 237e6c2947599c90a1dc76b986044e642d270386 build: 2018-10-03__15:56:23\r\n\r\n### Expected behavior\r\n\r\n```bash\r\n$ rasm2 -d -a x86 -b 32 8b444b10 # used for test the right result\r\n$ mov eax, dword [ebx + ecx*2 + 0x10] # This is right\r\n$ rasm2 -a x86 -b 32 \"mov eax, dword [ebx + ecx*2 + 0x10]\"\r\n$ 8b444b10\r\n```\r\n\r\n### Actual behavior\r\n\r\n```bash\r\n$ rasm2 -d -a x86 -b 32 8b444b10 # used for test the right result\r\n$ mov eax, dword [ebx + ecx*2 + 0x10] # This is right\r\n$ rasm2 -a x86 -b 32 \"mov eax, dword [ebx + ecx*2 + 0x10]\"\r\n$ 8b040b # This is wrong\r\n```\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQyNjc5MzQ3MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"the probem is not the disassembler. but the assembler. fix the title pls\n\nyou can use keystone or try to fix it if you have some spare time. look at libr/asm/p/asm_x86_nz.c\n\n> On 3 Oct 2018, at 22:07, izhuer <notifications@github.com> wrote:\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tUbuntu x86 64\n> File format of the file you reverse (mandatory)\tNone\n> Architecture/bits of the file (mandatory)\tx86/32\n> r2 -v full output, not truncated (mandatory)\tradare2 3.0.0-git 19606 @ linux-x86-64 git.2.9.0-271-g237e6c294 commit: 237e6c2 <https://github.com/radare/radare2/commit/237e6c2947599c90a1dc76b986044e642d270386> build: 2018-10-03__15:56:23\n> Expected behavior\n> \n> $ rasm2 -d -a x86 -b 32 8b444b10 # used for test the right result\n> $ mov eax, dword [ebx + ecx*2 + 0x10] # This is right\n> $ rasm2 -a x86 -b 32 \"mov eax, dword [ebx + ecx*2 + 0x10]\"\n> $ 8b444b10\n> Actual behavior\n> \n> $ rasm2 -d -a x86 -b 32 8b444b10 # used for test the right result\n> $ mov eax, dword [ebx + ecx*2 + 0x10] # This is right\n> $ rasm2 -a x86 -b 32 \"mov eax, dword [ebx + ecx*2 + 0x10]\"\n> $ 8b040b # This is wrong\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/11724>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-luiVLpxPss9ucgaeh_pZJMjWNE7-ks5uhRkHgaJpZM4XGxk->.\n> \n\n","createdAt":"2018-10-03T20:39:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11724#issuecomment-426793471","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyODE3Mjg2Mg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Greetings,\r\n\r\nx86.nz (x86 handmade assembler) is one of the many x86 assemblers available in radare2 and is updated frequently.  **Please add a test case so we can fix x86.nz in https://github.com/radare/radare2-regressions/tree/master/new/db/asm** (See https://github.com/radare/radare2-regressions/blob/master/new/README.md) You can do so with github web editor without even cloning the repo.\r\n\r\nYou can contribute to x86.nz by completing the following file https://github.com/radare/radare2/blob/master/libr/asm/p/asm_x86_nz.c.\r\nYou can also use keystone(http://keystone-engine.org) within radare2/rasm2 by installing the radare2 plugin via r2pm : \r\n\r\n```\r\n\tr2pm -i keystone-lib\r\n\tr2pm -i keystone\r\nthen\r\n\trasm2 -a x86.ksâ€¦\r\nor in radare2 session\r\n\te asm.assembler = x86.ks\r\n```\r\n\r\nOthers x86 assemblers are also available trough r2pm or master (see rasm2 -L list):\r\n\r\n```\r\na___  16 32 64   x86.as      LGPL3   Intel X86 GNU Assembler\r\na___  16 32 64   x86.nasm    LGPL3   X86 nasm assembler\r\na___  16 32 64   x86.nz      LGPL3   x86 handmade assembler\r\nad__  32         x86.olly    GPL2    OllyDBG X86 disassembler\r\n```","createdAt":"2018-10-09T12:29:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11724#issuecomment-428172862","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyOTg4MjY2OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"nobody is gonna fix this for today","createdAt":"2018-10-15T14:45:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11724#issuecomment-429882668","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDczODAxNjk3Mg==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-12-03T14:09:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11724#issuecomment-738016972","viewerDidAuthor":false}],"number":11724,"title":"Wrong assembler output for x86 "},{"body":"For context, please read what [BGZF is about first](https://blastedbio.blogspot.com/2011/11/bgzf-blocked-bigger-better-gzip.html).\r\n\r\nAlso, for a good BGZF sample file to reproduce and fix this issue, you [can download this one, the hg38 revision of the human genome](http://hgdownload.cse.ucsc.edu/goldenPath/hg38/bigZips/hg38.fa.gz).\r\n\r\n\r\n### Work environment\r\n\r\n```\r\n$ r2 -v full\r\nradare2 3.0.0-git 19597 @ darwin-x86-64 git.1.0.2-6642-g237e6c294\r\ncommit: 237e6c2947599c90a1dc76b986044e642d270386 build: 2018-10-03__14:43:22\r\n```\r\n\r\n### Expected behavior\r\n\r\n`$ r2 gzip://test.txt.gz` should open the [bgzip-compressed file](http://www.htslib.org/doc/bgzip.html) **containing more than one block** as any other gzip file. So creating a short/small text and compressing it with `bgzip` should span over more than one block to see the problem presented here.\r\n\r\n### Actual behavior\r\n\r\n```\r\n$ r2 gzip://hg38.fa.gz\r\nCannot allocate (38.fa.gz) 0 byte(s)\r\n[r] Cannot open 'gzip://hg38.fa.gz'\r\n$ r2 -zzz gzip://hg38.fa.gz\r\nCannot allocate (38.fa.gz) 0 byte(s)\r\n[r] Cannot open 'gzip://hg38.fa.gz'\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQyNjUzNTQ2Ng==","author":{"login":"brainstorm"},"authorAssociation":"CONTRIBUTOR","body":"Smaller BGZF files can be found [on the biopython test suite](https://github.com/biopython/biopython/commit/c098f8d77f64767272be862efada451101819b4e#diff-852819655d0e8289f4b261b7f034d9ec) and a good (python) [reference implementation is in the same codebase](https://github.com/biopython/biopython/blob/0a439faa6cde1d74c0ffaf1cd559951a87983df3/Bio/bgzf.py).","createdAt":"2018-10-03T07:16:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11720#issuecomment-426535466","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0NjQ2NzgxMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"make an io plugin in python or find an implementation in C","createdAt":"2019-10-25T18:44:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11720#issuecomment-546467810","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5MDc5ODY4OA==","author":{"login":"brainstorm"},"authorAssociation":"CONTRIBUTOR","body":"This C implementation is the oldest and most well supported in bioinfo:\r\n\r\nhttps://github.com/samtools/htslib/blob/develop/bgzf.c","createdAt":"2020-02-25T10:32:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11720#issuecomment-590798688","viewerDidAuthor":false}],"number":11720,"title":"Support for BGZF (gzip blocked format) via the gzip plugin"},{"body":"Cutter needs some analysis presets for its users.\r\nThere is a pad talking about that here: https://hackmd.io/LF7lUpxdQx-MT3Zb_gtZdA\r\n\r\nIt would be nice if there is a new command under `a` that allows to run the best preset for the current loaded `bin`, or run a specific preset.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQyNjU0Mjg1Mw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Do you really need to implement it in r2? Can't it be implemented in cutter?","createdAt":"2018-10-03T07:47:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11705#issuecomment-426542853","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyNjU0MzMwNQ==","author":{"login":"xarkes"},"authorAssociation":"CONTRIBUTOR","body":"No I don't need to implement it in r2, but I thought that would be useful anyway?\r\nIf not, we'll just do that in Cutter.","createdAt":"2018-10-03T07:49:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11705#issuecomment-426543305","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyNjU0NTEzOA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Let's hear from @pancake , but my opinion is that we have already wayyy tooo many `a` commands and adding others is just going to make things harder (at the moment at least)","createdAt":"2018-10-03T07:56:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11705#issuecomment-426545138","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyNjY1MTE4Mw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@ret2libc @radare @xarkes my proposal for this is\r\n\r\n-> aaa automatically determine the best like x86/ELF is \"aa\", \"aac\", \"aar\", \"aan\", \"afta\", \"XX\", \"YY\" / arm/ELF is \"aa\", \"aac\", \"aar\", \"aan\", \"afta\", \"XX\", \"XX\", it's already like that at the moment so there is no change required there except deciding which are the best and we can use https://hackmd.io/LF7lUpxdQx-MT3Zb_gtZdA for that.\r\n-> And a command `aaaj` that return `[\"aa\", \"aac\", \"aar\", \"aan\", \"afta\", \"XX\"]` for XX format/arch so the info can be retrieved in Cutter","createdAt":"2018-10-03T14:08:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/11705#issuecomment-426651183","viewerDidAuthor":false}],"number":11705,"title":"Analysis preset"},{"body":"Hope this is not a dupe :)\r\nWhen loading a header file with the following struct:\r\n```C\r\ntypedef struct Node {\r\n        int value;\r\n        int index;\r\n        struct Node *next;\r\n} node;\r\n```\r\nand then doing `ts* Node` to generate a `pf` command, the command recieved is `pf.Node ddp value index next`. This makes next a generic pointer and doesn't express the recursiveness of the structure. A better command might have been `pf dd*? value index (node)next`. One problem I can see with this is that it wouldn't work on `ts` only because it requires a pf format definition to work, but I still think this would be a nice improvement.\r\nðŸ˜„ ","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQyNDcwNTg1OA==","author":{"login":"sivaramaaa"},"authorAssociation":"CONTRIBUTOR","body":"hi @yarjor , i had did a little work on nested structure, so the nested structure works in r2 \r\n\r\n```\r\n[0x00000000]> \"td struct Node {int value; int idx ; struct Node next;}\"\r\n[0x00000000]> ts Node\r\npf dd? value idx (Node)next\r\n```\r\n\r\nBut yeah , the pointer to struct is not working , i will look into this whenever i have time :)","createdAt":"2018-09-26T12:59:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11655#issuecomment-424705858","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDczODAxNjk1Ng==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-12-03T14:09:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11655#issuecomment-738016956","viewerDidAuthor":false}],"number":11655,"title":"Improve loading of recursive types from C header file"},{"body":"## Information\r\nMachine: Arch Linux, x86_64 Linux 4.18.9-arch1-1-ARCH\r\nBinary & asciinema cast: [ood_issue.zip](https://github.com/radare/radare2/files/2412507/ood_issue.zip)\r\n\r\n`r2 -v` output:\r\n\r\n>  radare2 3.0.0-git 19535 @ linux-x86-64 git.2.9.0-194-ga36534b9f\r\n>  commit: a36534b9f380905bd6d561bea4c552b3937ed117 build: 2018-09-24__20:25:23\r\n\r\n## Steps to reproduce:\r\n- Open the binary with r2 `Crackme`\r\n- aaa\r\n- Save project with `Ps project1`\r\n- Exit with `q`\r\n- Open the project with either `r2 -p project1` or `r2 -p project1 Crackme`\r\n\r\n## Problem\r\nRe-opening in debug mode with `ood` gives me:\r\n> No file open?\r\n\r\neven though the output of `o` is:\r\n\r\n>  3 - r-x 0x000047b8 Crackme\r\n>  4 - rw- 0x00000148 null://328\r\n\r\nIf I open the file using the `o Crackme` command, the new output of `o` is:\r\n\r\n>  3 - r-x 0x000047b8 Crackme\r\n>  4 - rw- 0x00000148 null://328\r\n>  5 * r-x 0x000047b8 Crackme\r\n\r\nand the ood works correctly.\r\n\r\nI tried this with multiple binaries and I got the same result. `ood` command seems to ignore the file descriptor...\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQyNDEyNzgzMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Thats because rbin doesnt keep track of the associated fds created from there and then u get dupes\n\n> On 24 Sep 2018, at 15:09, 81rect <notifications@github.com> wrote:\n> \n> Machine: Arch Linux, x86_64 Linux 4.18.9-arch1-1-ARCH\n> ood_issue.zip\n> \n> r2 -v\n> radare2 3.0.0-git 19535 @ linux-x86-64 git.2.9.0-194-ga36534b9f\n> commit: a36534b build: 2018-09-24__20:25:23\n> \n> Open the binary with r2 Crackme\n> aaa (not sure if this is important)\n> Save project with Ps project1\n> Exit with q\n> Open the project with either r2 -p project1 or r2 -p project1 Crackme\n> Re-opening in debug mode with ood gives me:\n> \n> No file open?\n> \n> even though the output of o is:\n> \n> 3 - r-x 0x000047b8 Crackme\n> 4 - rw- 0x00000148 null://328\n> \n> If I open the file using the o Crackme command, the new output of o is:\n> \n> 3 - r-x 0x000047b8 Crackme\n> 4 - rw- 0x00000148 null://328\n> 5 * r-x 0x000047b8 Crackme\n> \n> I tried this with multiple binaries and I got the same result. ood command seems to ignore the file descriptor...\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-09-24T21:15:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11639#issuecomment-424127833","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyNDEzODI2Mw==","author":{"login":""},"authorAssociation":"NONE","body":"Ah, I missed that. It seems this issue is known and you have already been working on it.","createdAt":"2018-09-24T21:53:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11639#issuecomment-424138263","viewerDidAuthor":false}],"number":11639,"title":"File isn't recognized by ood  command when opening a project"},{"body":"Example:\r\n```\r\n[florian@florian-desktop ~]$ r2 -\r\n -- THE CAKE IS A PIE\r\n[0x00000000]> & #!pipe python p.py\r\n[0x00000000]> &\r\n  0          running  -- MAIN TASK --\r\n  1         sleeping  #!pipe python p.py\r\n--\r\ntotal running: 1\r\n[0x00000000]> &b 1\r\nTask 1 finished\r\n[0x00000000]> ^D\r\n[florian@florian-desktop ~]$ ps f\r\n  PID TTY      STAT   TIME COMMAND\r\n(...)\r\n11156 pts/12   S      0:00 radare2 -\r\n11157 pts/12   S      0:00  \\_ python p.py\r\n```\r\nThe python process is still running.\r\n\r\np.py:\r\n```\r\nimport r2pipe\r\nimport time\r\nr2=r2pipe.open()\r\nwhile True:\r\n        r2.cmd(\"?e jiji\")\r\n        time.sleep(1)\r\n```\r\n\r\nTo be fixed in `libr/lang/p/pipe.c`. Probably by sending SIGINT to the child process and waiting for it to quit.\r\n\r\nThis issue was already present before tasks, it just didn't really become visible because if you pressed ^C while a script was running in the foreground, the SIGINT would be delivered to python instead of r2 and breaking from r2 side never happened.","comments":[{"id":"IC_kwDOAEpMrs5EWp_D","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"This bug is in tasks, not in r2pipe","createdAt":"2022-06-05T11:46:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11623#issuecomment-1146789827","viewerDidAuthor":true}],"number":11623,"title":"Breaking #!pipe does not stop the child process"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Debian v9.5 x86_64\r\n| Architecture/bits of the file (mandatory)            | x86/32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.0.0-git 1 @ linux-x86-64 git.3.0.0-git commit: b56c4862ebea4681cc38a9cea5b884e3a49e2b2f build: 2018-09-21__12:04:28\r\n\r\n### Expected behavior\r\n\r\n`x86` and `x86.nz` asm plugins should work:\r\n\r\n```r2\r\n% rasm2 -a x86 -b 32 'call dword [0x11223344]'\r\nff1544332211   \r\n% rasm2 -a x86.nz -b 32 'call dword [0x11223344]'\r\nff1544332211   \r\n```\r\n\r\n### Actual behavior\r\n\r\n```r2\r\n% rasm2 -a x86 -b 32 'call dword [0x11223344]'\r\nCannot assemble 'call dword [0x11223344]' at line 3\r\ninvalid\r\n% rasm2 -a x86.nz -b 32 'call dword [0x11223344]'\r\nCannot assemble 'call dword [0x11223344]' at line 3\r\ninvalid\r\n```\r\n\r\n### Additional information\r\n\r\nThe reversed operation works:\r\n```r2\r\n% rasm2 -a x86 -b 32 -d 'ff1544332211'\r\ncall dword [0x11223344]\r\n```\r\n\r\n`x86.as` and `x86.nasm` plugins works well:\r\n```r2\r\n% rasm2 -a x86.nasm -b 32 'call dword [0x11223344]'\r\nff1544332211   \r\n% rasm2 -a x86.as -b 32 'call dword [0x11223344]'\r\nff1548332211\r\n```\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQyMzUyNzk5Mg==","author":{"login":"tesuji"},"authorAssociation":"CONTRIBUTOR","body":"Updated with `radare/radare2` docker image.","createdAt":"2018-09-21T13:18:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11611#issuecomment-423527992","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyMzUzMzM4OA==","author":{"login":"tesuji"},"authorAssociation":"CONTRIBUTOR","body":"`x86.nz` plugin does not work either.","createdAt":"2018-09-21T13:36:59Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11611#issuecomment-423533388","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyNDU5ODQxNQ==","author":{"login":"sudhackar"},"authorAssociation":"NONE","body":"I think this goes under the same bug.\r\n\r\n```sh\r\n$ rasm2 -a x86 -b 32 'call dword [eax]'     \r\nff10\r\n$ rasm2 -a x86 -b 32 'call dword [10*eax]'\r\nff10\r\n$ rasm2 -a x86 -b 32 'call dword [110*eax]'\r\nff10\r\n$ rasm2 -a x86 -b 32 'call dword [4*eax]'  \r\nff10\r\n$ rasm2 -a x86 -b 32 'call dword [4*eax+7]'\r\nff5007\r\n$ rasm2 -a x86 -b 32 'call dword [4*eax+0]'\r\nff10\r\n$ rasm2 -a x86 -b 32 'call dword ptr [4*eax+0]'\r\nff10\r\n```","createdAt":"2018-09-26T06:20:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11611#issuecomment-424598415","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1NTczMjYzNQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Greetings,\r\n\r\nx86.nz (x86 handmade assembler) is one of the many x86 assemblers available in radare2 and is updated frequently.  **Please add a test case so we can fix x86.nz in https://github.com/radare/radare2-regressions/tree/master/new/db/asm** (See https://github.com/radare/radare2-regressions/blob/master/new/README.md) You can do so with github web editor without even cloning the repo.\r\n\r\nYou can contribute to x86.nz by completing the following file https://github.com/radare/radare2/blob/master/libr/asm/p/asm_x86_nz.c.\r\nYou can also use keystone(http://keystone-engine.org) within radare2/rasm2 by installing the radare2 plugin via r2pm : \r\n\r\n```\r\n\tr2pm -i keystone-lib\r\n\tr2pm -i keystone\r\nthen\r\n\trasm2 -a x86.ksâ€¦\r\nor in radare2 session\r\n\te asm.assembler = x86.ks\r\n```\r\n\r\nOthers x86 assemblers are also available trough r2pm or master (see rasm2 -L list):\r\n\r\n```\r\na___  16 32 64   x86.as      LGPL3   Intel X86 GNU Assembler\r\na___  16 32 64   x86.nasm    LGPL3   X86 nasm assembler\r\na___  16 32 64   x86.nz      LGPL3   x86 handmade assembler\r\nad__  32         x86.olly    GPL2    OllyDBG X86 disassembler\r\n```","createdAt":"2019-01-19T00:52:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11611#issuecomment-455732635","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1NTczMjY4NQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"And no @sudhackar this is not the same issue. Please open a new issue with that info.","createdAt":"2019-01-19T00:52:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11611#issuecomment-455732685","viewerDidAuthor":false}],"number":11611,"title":"asm.nz/x86: cannot assemble `call dword [mem32]`"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu x86_64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 3.0.0-git 1 @ linux-x86-64 git.3.0.0-git commit: 533da1306534ece22d67eaa3c32e46b717cd9199 build: 2018-09-19__02:44:12\r\n\r\nI use r2 from docker image `radare/radare2`.\r\n\r\n### Expected behavior\r\n\r\nradare2 should reference the format string of `scanf` function, just like it does with `printf` function.\r\n\r\nThe below output is from radare2 (non-modified) and in `sym.main` function:\r\n\r\n```asm\r\n0x08048632      c704247c8704.  mov dword [esp], str.Password: ; [0x804877c:4]=0x73736150 ; \"Password: \" ; const char *format\r\n0x08048639      e87afdffff     call sym.imp.printf         ; int printf(const char *format)\r\n0x0804863e      8d4588         lea eax, [local_78h]\r\n0x08048641      89442404       mov dword [local_4h], eax\r\n0x08048645      c70424878704.  mov dword [esp], 0x8048787  ; [0x8048787:4]=0x7325 ; const char *format\r\n0x0804864c      e847fdffff     call sym.imp.scanf          ; int scanf(const char *format)\r\n```\r\n\r\nThe address `0x8048787` should turn to some form of `str._s` cause it actually points to `\"%s\"`.\r\n\r\nThe below is dumping of `.rodata`:\r\n\r\n```r2\r\n> iS~.rodata\r\n15 0x00000730    90 0x08048730    90 -r-- .rodata\r\n> px@0x08048730\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x08048730  0300 0000 0100 0200 4c4f 4c4f 0025 6400  ........LOLO.%d.\r\n0x08048740  5061 7373 776f 7264 204f 4b21 0a00 5061  Password OK!..Pa\r\n0x08048750  7373 776f 7264 2049 6e63 6f72 7265 6374  ssword Incorrect\r\n0x08048760  210a 0049 4f4c 4920 4372 6163 6b6d 6520  !..IOLI Crackme \r\n0x08048770  4c65 7665 6c20 3078 3036 0a00 5061 7373  Level 0x06..Pass\r\n0x08048780  776f 7264 3a20 0025 7300 0000 0000 0000  word: .%s.......\r\n0x08048790  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x080487a0  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x080487b0  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x080487c0  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x080487d0  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x080487e0  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x080487f0  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x08048800  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x08048810  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x08048820  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n```\r\n\r\n### Actual behavior\r\n\r\nradare2 did not reference the format string.\r\n\r\n### Steps to reproduce the behavior \r\n\r\n[binary.zip](https://github.com/radare/radare2/files/2396640/binary.zip)\r\n\r\n```\r\nr2 ./crackme0x06\r\n> aaa\r\n> s sym.main\r\n> pdf\r\n```\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQyMjg1NjA1NA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"I think that's because the string \"%s\" is too small, maybe could add an exception in the disasm string filter for this one?","createdAt":"2018-09-19T15:52:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11584#issuecomment-422856054","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyMzA1NDcyNA==","author":{"login":"tesuji"},"authorAssociation":"CONTRIBUTOR","body":"The [PE binary](https://github.com/radare/radare2/files/2399925/binary-win32.zip) has the reference to `\"%s\"`.\r\n\r\n```asm\r\n0x0040149c      c70424444040.  mov dword [esp], str.Password: ; [0x404044:4]=0x73736150 ; \"Password: \" ; const char *format\r\n0x004014a3      e8d8190000     call sym._printf            ; int printf(const char *format)\r\n0x004014a8      8d4588         lea eax, [local_78h]\r\n0x004014ab      89442404       mov dword [local_4h], eax\r\n0x004014af      c704244f4040.  mov dword [esp], 0x40404f   ; 'O@@' ; [0x40404f:4]=0x7325 ; \"%s\" ; const char *format\r\n0x004014b6      e895190000     call sym._scanf             ; int scanf(const char *format)\r\n```\r\n\r\n### Steps to reproduce the behavior\r\n\r\n```bash\r\nr2 bin-win32/crackme0x06.exe\r\n> aaa\r\n> s sym._main\r\n> pdf\r\n```\r\n\r\nDump of `.rdata`:\r\n```r2\r\n> iS~.rdata\r\n02 0x00002600  1024 0x00404000  4096 -r-- .rdata\r\n> px@0x00404000\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x00404000  4c4f 4c4f 0025 6400 5061 7373 776f 7264  LOLO.%d.Password\r\n0x00404010  204f 4b21 0a00 5061 7373 776f 7264 2049   OK!..Password I\r\n0x00404020  6e63 6f72 7265 6374 210a 0049 4f4c 4920  ncorrect!..IOLI \r\n0x00404030  4372 6163 6b6d 6520 4c65 7665 6c20 3078  Crackme Level 0x\r\n0x00404040  3036 0a00 5061 7373 776f 7264 3a20 0025  06..Password: .%\r\n0x00404050  7300 0000 0000 0000 0000 0000 0000 0000  s...............\r\n0x00404060  1017 4000 7417 4000 8517 4000 1017 4000  ..@.t.@...@...@.\r\n0x00404070  6017 4000 6717 4000 6717 4000 6717 4000  `.@.g.@.g.@.g.@.\r\n0x00404080  6717 4000 8d17 4000 6c17 4000 1017 4000  g.@...@.l.@...@.\r\n0x00404090  6017 4000 0000 0000 0000 0000 0000 0000  `.@.............\r\n0x004040a0  2d4c 4942 4743 4357 3332 2d45 482d 332d  -LIBGCCW32-EH-3-\r\n0x004040b0  4754 4852 2d4d 494e 4757 3332 0000 0000  GTHR-MINGW32....\r\n0x004040c0  7733 325f 7368 6172 6564 7074 722d 3e73  w32_sharedptr->s\r\n0x004040d0  697a 6520 3d3d 2073 697a 656f 6628 5733  ize == sizeof(W3\r\n0x004040e0  325f 4548 5f53 4841 5245 4429 0000 0000  2_EH_SHARED)....\r\n0x004040f0  2e2e 2f2e 2e2f 6763 632d 332e 342e 352d  ../../gcc-3.4.5-\r\n```\r\n","createdAt":"2018-09-20T06:23:07Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11584#issuecomment-423054724","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyOTUzOTA4MQ==","author":{"login":"sivaramaaa"},"authorAssociation":"CONTRIBUTOR","body":"okk i think i have found the issue here , the \"%s\" is not printed in elf binary but printed in exe is because the way we classify the data :  \r\n\r\n![classify](https://user-images.githubusercontent.com/18589720/46905555-38425680-cf13-11e8-93b9-e1b95073a745.png)\r\n\r\nSo from above code , it's clear that a data is clasified as \"text\" if more that 40% data is valid ascii , but\r\n\r\nIn elf binary there are lot of \"0xff\" around so it's classifed as \"invalid\" : \r\n\r\n![elf_str](https://user-images.githubusercontent.com/18589720/46905559-3ed0ce00-cf13-11e8-9228-784ec6c72af5.png)\r\n\r\nBut in exe binary there are lot of valid ascii char's around , hence classifed as \"text\" : \r\n\r\n![exe_str](https://user-images.githubusercontent.com/18589720/46905560-41cbbe80-cf13-11e8-815d-bde338a5ae55.png)\r\n\r\n@radare , @Maijin , what do u guys think ? ","createdAt":"2018-10-13T12:46:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11584#issuecomment-429539081","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyOTU0MDgxMA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"What solution do you propose @sivaramaaa ?","createdAt":"2018-10-13T13:12:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11584#issuecomment-429540810","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyOTU0MTA0OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"also 2 char string is usually considered a false positive\n\n> On 13 Oct 2018, at 14:46, sivaramaaa <notifications@github.com> wrote:\n> \n> okk i think i have found the issue here , the \"%s\" is not printed in elf binary but printed in exe is because the way we classify the data :\n> \n>  <https://user-images.githubusercontent.com/18589720/46905555-38425680-cf13-11e8-93b9-e1b95073a745.png>\n> So from above code , it's clear that a data is clasified as \"text\" if more that 40% data is valid ascii , but\n> \n> In elf binary there are lot of \"0xff\" around so it's classifed as \"invalid\" :\n> \n>  <https://user-images.githubusercontent.com/18589720/46905559-3ed0ce00-cf13-11e8-9228-784ec6c72af5.png>\n> But in exe binary there are lot of valid ascii char's around , hence classifed as \"text\" :\n> \n>  <https://user-images.githubusercontent.com/18589720/46905560-41cbbe80-cf13-11e8-815d-bde338a5ae55.png>\n> @radare <https://github.com/radare> , @Maijin <https://github.com/Maijin> , what do u guys think ?\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/11584#issuecomment-429539081>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lpnG-v9VyXEWuNCkwecAQoLYjIPhks5ukeCcgaJpZM4Wv4EU>.\n> \n\n","createdAt":"2018-10-13T13:15:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11584#issuecomment-429541049","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyOTU0MjMzMQ==","author":{"login":"sivaramaaa"},"authorAssociation":"CONTRIBUTOR","body":"> What solution do you propose @sivaramaaa ?\r\n\r\nwell , one solution would be to check the buf until reaching '\\x00' and if all are ascii we could print them !\r\n\r\n> also 2 char string is usually considered a false positive\r\n\r\n@radare  yup , but i think according to above algo , even if we find a larger string but surrounded by large no of invalid chars like '0xff' , it would still produce same result as above!","createdAt":"2018-10-13T13:34:24Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11584#issuecomment-429542331","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyOTg4MzA5Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"we have functions to get strings from address memory, supporting utf16, wide char and other encodings that will break if you do this \"until \\x00\" thing. moving to 3.1","createdAt":"2018-10-15T14:46:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11584#issuecomment-429883092","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0MDI5NDQ2NA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I would expect that r2 knows that's the first param of `printf`/`scanf`/etc. and it knows it is expected to be a `const char *`, so it should transform whatever it is found at that address into a string.","createdAt":"2018-11-20T14:35:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11584#issuecomment-440294464","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0MDI5NjkyNA==","author":{"login":"kazarmy"},"authorAssociation":"CONTRIBUTOR","body":"I suppose the best way to handle this is to:\r\n\r\n1. Have metadata override everything, including whether the string should be printed i.e. if it's data (`Cd`), it shouldn't be printed.\r\n1. If there's no metadata, then disasm.c can do as it sees fit (including what @ret2libc said above).","createdAt":"2018-11-20T14:43:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11584#issuecomment-440296924","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0MDI5OTYzMQ==","author":{"login":"kazarmy"},"authorAssociation":"CONTRIBUTOR","body":"For the time being, adding a flag i.e. `f str.format @ 0x8048787` works fine.","createdAt":"2018-11-20T14:50:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11584#issuecomment-440299631","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0MTA1OTE0Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"moving to 3.2 because we have a \"workaround\" and proper fix requires more time","createdAt":"2018-11-22T15:14:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11584#issuecomment-441059147","viewerDidAuthor":false}],"number":11584,"title":"No reference constant string in format string of scanf family function"},{"body":"To be able to have ipython/jupyter command line like in Cutter via r2lang.py and ipython","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQyMjAyNzM4MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"?\n\n> On 17 Sep 2018, at 15:37, Anton Kochkov <notifications@github.com> wrote:\n> \n> To be able to have ipython/jupyter command line like in Cutter via r2lang.py and ipython\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-09-17T13:58:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11564#issuecomment-422027381","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyMjA3NDQyNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"in panels? or where? you can use ipython already in r2, but i dont know how you want this vertical split thing","createdAt":"2018-09-17T16:03:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11564#issuecomment-422074427","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyMjA4NDg3MA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"In panels or usual visual split - doesn't matter. A way to run IPython console with r2lang (like you already can within r2 cli), but side-by-side with usual disassembly or whatever.\r\nhttps://www.youtube.com/watch?v=lrzJIow33WU","createdAt":"2018-09-17T16:37:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11564#issuecomment-422084870","viewerDidAuthor":false}],"number":11564,"title":"Vertical split with ipython "},{"body":"So it will be possible to show the help in the split screen/panel, like man page or maybe an instruction reference, like in this plugin but better:\r\n![image](https://user-images.githubusercontent.com/203261/45620931-14752780-bab1-11e8-8b80-5320dc8c12be.png)\r\n\r\nhttps://github.com/nologic/idaref\r\n\r\nAnd markdown should be very easy to parse.\r\n\r\nMoreover, this can be integrated with `CC, [file]` command to show the attached/linked file in such a split/preview.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQyMjAxODgyNw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See https://github.com/mity/md4c and https://github.com/vmg/sundown","createdAt":"2018-09-17T13:36:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11562#issuecomment-422018827","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyMjA4MjAxNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"What is this abomination\n\n> On 17 Sep 2018, at 13:38, Anton Kochkov <notifications@github.com> wrote:\n> \n> So it will be possible to show the help in the split screen/panel, like man page or maybe an instruction reference, like in this plugin but better:\n> \n> \n> https://github.com/nologic/idaref\n> \n> And markdown should be very easy to parse.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-09-17T16:28:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11562#issuecomment-422082017","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyMjA4MjM3Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"That fits a bit with my idea of visual tabs. But i didnt implemented support for console in there. Basically keeping the output buffered and be able to cancel the readline call \n\n> On 17 Sep 2018, at 13:38, Anton Kochkov <notifications@github.com> wrote:\n> \n> So it will be possible to show the help in the split screen/panel, like man page or maybe an instruction reference, like in this plugin but better:\n> \n> \n> https://github.com/nologic/idaref\n> \n> And markdown should be very easy to parse.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-09-17T16:29:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11562#issuecomment-422082373","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NDAzMjMxMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I have written a small markdown parser in C, no support for tables in it yet. but yeah will be good to have a way to render markdown files inside r2. will commit my code at some point","createdAt":"2019-04-17T10:42:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11562#issuecomment-484032313","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDAzNDk1Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@radare no need to write it from scratch - we can just import [md4c](https://github.com/mity/md4c) or [hoedown](https://github.com/hoedown/hoedown) (and they both support code blocks, tables and such) in shlr/mdown and call this code from radare2 code. @deepakchethan might be interested in this.","createdAt":"2019-05-07T11:08:59Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11562#issuecomment-490034956","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDA0MDAwMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"its just 100 LOC, those implementations are bloated imho but we can discuss this. totally low prio for now \n\n> On 7 May 2019, at 13:09, Anton Kochkov <notifications@github.com> wrote:\n> \n> @radare <https://github.com/radare> no need to write it from scratch - we can just import md4c <https://github.com/mity/md4c> or hoedown <https://github.com/hoedown/hoedown> in shlr/mdown and call this code from radare2 code. @deepakchethan <https://github.com/deepakchethan> might be interested in this.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/11562#issuecomment-490034956>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AAG75FSNOMPZHDEKCGK3FPDPUFPM5ANCNFSM4FVO6HLA>.\n> \n\n","createdAt":"2019-05-07T11:26:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11562#issuecomment-490040002","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDA3MDU5MQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"md4c is very active and works very well, there are so many tricky cases in markdown I'd rather rely on something existing than doing that ourselves like for the XML","createdAt":"2019-05-07T13:04:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11562#issuecomment-490070591","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDA3MDcyNA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"and it's tested.","createdAt":"2019-05-07T13:05:04Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11562#issuecomment-490070724","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDA3MzI5MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Then just make a plugin. Dont add more shit in shlr or extra deps\n\n> On 7 May 2019, at 15:05, Maijin <notifications@github.com> wrote:\n> \n> it's tested.\n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-05-07T13:12:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11562#issuecomment-490073291","viewerDidAuthor":false}],"number":11562,"title":"Embedded markdown viewer"},{"body":"```\r\n==1275892==ERROR: LeakSanitizer: detected memory leaks\r\n\r\nDirect leak of 2248 byte(s) in 10 object(s) allocated from:\r\n    #0 0x7fef5e306e50 in calloc (/lib64/libasan.so.5+0xeee50)\r\n    #1 0x7fef4e1b7785 in sdb_decode /home/akochkov/radare/radare2/shlr/sdb/src/base64.c:101\r\n    #2 0x7fef5725f5c3 in r_meta_get_string /home/akochkov/radare/radare2/libr/anal/meta.c:185\r\n    #3 0x7fef5d1443db in ds_show_comments_right /home/akochkov/radare/radare2/libr/core/disasm.c:1836\r\n    #4 0x7fef5d179820 in r_core_print_disasm /home/akochkov/radare/radare2/libr/core/disasm.c:4708\r\n    #5 0x7fef5cee21ea in cmd_print /home/akochkov/radare/radare2/libr/core/cmd_print.c:4591\r\n    #6 0x7fef5d09703b in r_cmd_call /home/akochkov/radare/radare2/libr/core/cmd_api.c:237\r\n    #7 0x7fef5cf583bd in r_core_cmd_subst_i /home/akochkov/radare/radare2/libr/core/cmd.c:2922\r\n    #8 0x7fef5cf4adb4 in r_core_cmd_subst /home/akochkov/radare/radare2/libr/core/cmd.c:1934\r\n    #9 0x7fef5cf62711 in r_core_cmd /home/akochkov/radare/radare2/libr/core/cmd.c:3626\r\n    #10 0x7fef5cf63a45 in r_core_cmd0 /home/akochkov/radare/radare2/libr/core/cmd.c:3790\r\n    #11 0x7fef5cfdae6d in visual_refresh /home/akochkov/radare/radare2/libr/core/visual.c:3155\r\n    #12 0x7fef5cfddbaa in r_core_visual /home/akochkov/radare/radare2/libr/core/visual.c:3329\r\n    #13 0x7fef5cf44d0d in cmd_visual /home/akochkov/radare/radare2/libr/core/cmd.c:1296\r\n    #14 0x7fef5d09703b in r_cmd_call /home/akochkov/radare/radare2/libr/core/cmd_api.c:237\r\n    #15 0x7fef5cf583bd in r_core_cmd_subst_i /home/akochkov/radare/radare2/libr/core/cmd.c:2922\r\n    #16 0x7fef5cf4adb4 in r_core_cmd_subst /home/akochkov/radare/radare2/libr/core/cmd.c:1934\r\n    #17 0x7fef5cf62711 in r_core_cmd /home/akochkov/radare/radare2/libr/core/cmd.c:3626\r\n    #18 0x7fef5cd05aff in r_core_prompt_exec /home/akochkov/radare/radare2/libr/core/core.c:2568\r\n    #19 0x560050fe87be in main /home/akochkov/radare/radare2/binr/radare2/radare2.c:1432\r\n    #20 0x7fef4c7b211a in __libc_start_main (/lib64/libc.so.6+0x2311a)\r\n\r\nDirect leak of 616 byte(s) in 4 object(s) allocated from:\r\n    #0 0x7fef5e306e50 in calloc (/lib64/libasan.so.5+0xeee50)\r\n    #1 0x7fef4e1b7785 in sdb_decode /home/akochkov/radare/radare2/shlr/sdb/src/base64.c:101\r\n    #2 0x7fef572619f0 in r_meta_deserialize_val /home/akochkov/radare/radare2/libr/anal/meta.c:346\r\n    #3 0x7fef57262844 in r_meta_find /home/akochkov/radare/radare2/libr/anal/meta.c:425\r\n    #4 0x7fef57268c90 in r_anal_reflines_get /home/akochkov/radare/radare2/libr/anal/reflines.c:120\r\n    #5 0x7fef5d12daba in ds_reflines_init /home/akochkov/radare/radare2/libr/core/disasm.c:791\r\n    #6 0x7fef5d1763bf in r_core_print_disasm /home/akochkov/radare/radare2/libr/core/disasm.c:4595\r\n    #7 0x7fef5cee21ea in cmd_print /home/akochkov/radare/radare2/libr/core/cmd_print.c:4591\r\n    #8 0x7fef5d09703b in r_cmd_call /home/akochkov/radare/radare2/libr/core/cmd_api.c:237\r\n    #9 0x7fef5cf583bd in r_core_cmd_subst_i /home/akochkov/radare/radare2/libr/core/cmd.c:2922\r\n    #10 0x7fef5cf4adb4 in r_core_cmd_subst /home/akochkov/radare/radare2/libr/core/cmd.c:1934\r\n    #11 0x7fef5cf62711 in r_core_cmd /home/akochkov/radare/radare2/libr/core/cmd.c:3626\r\n    #12 0x7fef5cf63a45 in r_core_cmd0 /home/akochkov/radare/radare2/libr/core/cmd.c:3790\r\n    #13 0x7fef5cfdae6d in visual_refresh /home/akochkov/radare/radare2/libr/core/visual.c:3155\r\n    #14 0x7fef5cfddbaa in r_core_visual /home/akochkov/radare/radare2/libr/core/visual.c:3329\r\n    #15 0x7fef5cf44d0d in cmd_visual /home/akochkov/radare/radare2/libr/core/cmd.c:1296\r\n    #16 0x7fef5d09703b in r_cmd_call /home/akochkov/radare/radare2/libr/core/cmd_api.c:237\r\n    #17 0x7fef5cf583bd in r_core_cmd_subst_i /home/akochkov/radare/radare2/libr/core/cmd.c:2922\r\n    #18 0x7fef5cf4adb4 in r_core_cmd_subst /home/akochkov/radare/radare2/libr/core/cmd.c:1934\r\n    #19 0x7fef5cf62711 in r_core_cmd /home/akochkov/radare/radare2/libr/core/cmd.c:3626\r\n    #20 0x7fef5cd05aff in r_core_prompt_exec /home/akochkov/radare/radare2/libr/core/core.c:2568\r\n    #21 0x560050fe87be in main /home/akochkov/radare/radare2/binr/radare2/radare2.c:1432\r\n    #22 0x7fef4c7b211a in __libc_start_main (/lib64/libc.so.6+0x2311a)\r\n\r\nDirect leak of 456 byte(s) in 3 object(s) allocated from:\r\n    #0 0x7fef5e306e50 in calloc (/lib64/libasan.so.5+0xeee50)\r\n    #1 0x7fef4e1b7785 in sdb_decode /home/akochkov/radare/radare2/shlr/sdb/src/base64.c:101\r\n    #2 0x7fef572619f0 in r_meta_deserialize_val /home/akochkov/radare/radare2/libr/anal/meta.c:346\r\n    #3 0x7fef57262844 in r_meta_find /home/akochkov/radare/radare2/libr/anal/meta.c:425\r\n    #4 0x7fef57268c90 in r_anal_reflines_get /home/akochkov/radare/radare2/libr/anal/reflines.c:120\r\n    #5 0x7fef5d12de09 in ds_reflines_init /home/akochkov/radare/radare2/libr/core/disasm.c:794\r\n    #6 0x7fef5d1763bf in r_core_print_disasm /home/akochkov/radare/radare2/libr/core/disasm.c:4595\r\n    #7 0x7fef5cee21ea in cmd_print /home/akochkov/radare/radare2/libr/core/cmd_print.c:4591\r\n    #8 0x7fef5d09703b in r_cmd_call /home/akochkov/radare/radare2/libr/core/cmd_api.c:237\r\n    #9 0x7fef5cf583bd in r_core_cmd_subst_i /home/akochkov/radare/radare2/libr/core/cmd.c:2922\r\n    #10 0x7fef5cf4adb4 in r_core_cmd_subst /home/akochkov/radare/radare2/libr/core/cmd.c:1934\r\n    #11 0x7fef5cf62711 in r_core_cmd /home/akochkov/radare/radare2/libr/core/cmd.c:3626\r\n    #12 0x7fef5cf63a45 in r_core_cmd0 /home/akochkov/radare/radare2/libr/core/cmd.c:3790\r\n    #13 0x7fef5cfdae6d in visual_refresh /home/akochkov/radare/radare2/libr/core/visual.c:3155\r\n    #14 0x7fef5cfddbaa in r_core_visual /home/akochkov/radare/radare2/libr/core/visual.c:3329\r\n    #15 0x7fef5cf44d0d in cmd_visual /home/akochkov/radare/radare2/libr/core/cmd.c:1296\r\n    #16 0x7fef5d09703b in r_cmd_call /home/akochkov/radare/radare2/libr/core/cmd_api.c:237\r\n    #17 0x7fef5cf583bd in r_core_cmd_subst_i /home/akochkov/radare/radare2/libr/core/cmd.c:2922\r\n    #18 0x7fef5cf4adb4 in r_core_cmd_subst /home/akochkov/radare/radare2/libr/core/cmd.c:1934\r\n    #19 0x7fef5cf62711 in r_core_cmd /home/akochkov/radare/radare2/libr/core/cmd.c:3626\r\n    #20 0x7fef5cd05aff in r_core_prompt_exec /home/akochkov/radare/radare2/libr/core/core.c:2568\r\n    #21 0x560050fe87be in main /home/akochkov/radare/radare2/binr/radare2/radare2.c:1432\r\n    #22 0x7fef4c7b211a in __libc_start_main (/lib64/libc.so.6+0x2311a)\r\n\r\nDirect leak of 7 byte(s) in 1 object(s) allocated from:\r\n    #0 0x7fef5e253320 in strdup (/lib64/libasan.so.5+0x3b320)\r\n    #1 0x7fef5ce0535a in setFunctionName /home/akochkov/radare/radare2/libr/core/cmd_anal.c:2103\r\n    #2 0x7fef5ce0cecc in cmd_anal_fcn /home/akochkov/radare/radare2/libr/core/cmd_anal.c:2704\r\n    #3 0x7fef5ce53686 in cmd_anal /home/akochkov/radare/radare2/libr/core/cmd_anal.c:7393\r\n    #4 0x7fef5d09703b in r_cmd_call /home/akochkov/radare/radare2/libr/core/cmd_api.c:237\r\n    #5 0x7fef5cf583bd in r_core_cmd_subst_i /home/akochkov/radare/radare2/libr/core/cmd.c:2922\r\n    #6 0x7fef5cf4adb4 in r_core_cmd_subst /home/akochkov/radare/radare2/libr/core/cmd.c:1934\r\n    #7 0x7fef5cf62711 in r_core_cmd /home/akochkov/radare/radare2/libr/core/cmd.c:3626\r\n    #8 0x7fef5cf639b9 in r_core_cmdf /home/akochkov/radare/radare2/libr/core/cmd.c:3784\r\n    #9 0x7fef5d0d25df in r_core_anal_all /home/akochkov/radare/radare2/libr/core/canal.c:3208\r\n    #10 0x7fef5ce4eda5 in cmd_anal_all /home/akochkov/radare/radare2/libr/core/cmd_anal.c:7023\r\n    #11 0x7fef5ce53b50 in cmd_anal /home/akochkov/radare/radare2/libr/core/cmd_anal.c:7441\r\n    #12 0x7fef5d09703b in r_cmd_call /home/akochkov/radare/radare2/libr/core/cmd_api.c:237\r\n    #13 0x7fef5cf583bd in r_core_cmd_subst_i /home/akochkov/radare/radare2/libr/core/cmd.c:2922\r\n    #14 0x7fef5cf4adb4 in r_core_cmd_subst /home/akochkov/radare/radare2/libr/core/cmd.c:1934\r\n    #15 0x7fef5cf62711 in r_core_cmd /home/akochkov/radare/radare2/libr/core/cmd.c:3626\r\n    #16 0x7fef5cd05aff in r_core_prompt_exec /home/akochkov/radare/radare2/libr/core/core.c:2568\r\n    #17 0x560050fe87be in main /home/akochkov/radare/radare2/binr/radare2/radare2.c:1432\r\n    #18 0x7fef4c7b211a in __libc_start_main (/lib64/libc.so.6+0x2311a)\r\n\r\nSUMMARY: AddressSanitizer: 3327 byte(s) leaked in 18 allocation(s).\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQyMDk0NTM0Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"pleae update, line numbers doesnt match\n\n> On 12 Sep 2018, at 05:34, Anton Kochkov <notifications@github.com> wrote:\n> \n> ==1275892==ERROR: LeakSanitizer: detected memory leaks\n> \n> Direct leak of 2248 byte(s) in 10 object(s) allocated from:\n>     #0 0x7fef5e306e50 in calloc (/lib64/libasan.so.5+0xeee50)\n>     #1 0x7fef4e1b7785 in sdb_decode /home/akochkov/radare/radare2/shlr/sdb/src/base64.c:101\n>     #2 0x7fef5725f5c3 in r_meta_get_string /home/akochkov/radare/radare2/libr/anal/meta.c:185\n>     #3 0x7fef5d1443db in ds_show_comments_right /home/akochkov/radare/radare2/libr/core/disasm.c:1836\n>     #4 0x7fef5d179820 in r_core_print_disasm /home/akochkov/radare/radare2/libr/core/disasm.c:4708\n>     #5 0x7fef5cee21ea in cmd_print /home/akochkov/radare/radare2/libr/core/cmd_print.c:4591\n>     #6 0x7fef5d09703b in r_cmd_call /home/akochkov/radare/radare2/libr/core/cmd_api.c:237\n>     #7 0x7fef5cf583bd in r_core_cmd_subst_i /home/akochkov/radare/radare2/libr/core/cmd.c:2922\n>     #8 0x7fef5cf4adb4 in r_core_cmd_subst /home/akochkov/radare/radare2/libr/core/cmd.c:1934\n>     #9 0x7fef5cf62711 in r_core_cmd /home/akochkov/radare/radare2/libr/core/cmd.c:3626\n>     #10 0x7fef5cf63a45 in r_core_cmd0 /home/akochkov/radare/radare2/libr/core/cmd.c:3790\n>     #11 0x7fef5cfdae6d in visual_refresh /home/akochkov/radare/radare2/libr/core/visual.c:3155\n>     #12 0x7fef5cfddbaa in r_core_visual /home/akochkov/radare/radare2/libr/core/visual.c:3329\n>     #13 0x7fef5cf44d0d in cmd_visual /home/akochkov/radare/radare2/libr/core/cmd.c:1296\n>     #14 0x7fef5d09703b in r_cmd_call /home/akochkov/radare/radare2/libr/core/cmd_api.c:237\n>     #15 0x7fef5cf583bd in r_core_cmd_subst_i /home/akochkov/radare/radare2/libr/core/cmd.c:2922\n>     #16 0x7fef5cf4adb4 in r_core_cmd_subst /home/akochkov/radare/radare2/libr/core/cmd.c:1934\n>     #17 0x7fef5cf62711 in r_core_cmd /home/akochkov/radare/radare2/libr/core/cmd.c:3626\n>     #18 0x7fef5cd05aff in r_core_prompt_exec /home/akochkov/radare/radare2/libr/core/core.c:2568\n>     #19 0x560050fe87be in main /home/akochkov/radare/radare2/binr/radare2/radare2.c:1432\n>     #20 0x7fef4c7b211a in __libc_start_main (/lib64/libc.so.6+0x2311a)\n> \n> Direct leak of 616 byte(s) in 4 object(s) allocated from:\n>     #0 0x7fef5e306e50 in calloc (/lib64/libasan.so.5+0xeee50)\n>     #1 0x7fef4e1b7785 in sdb_decode /home/akochkov/radare/radare2/shlr/sdb/src/base64.c:101\n>     #2 0x7fef572619f0 in r_meta_deserialize_val /home/akochkov/radare/radare2/libr/anal/meta.c:346\n>     #3 0x7fef57262844 in r_meta_find /home/akochkov/radare/radare2/libr/anal/meta.c:425\n>     #4 0x7fef57268c90 in r_anal_reflines_get /home/akochkov/radare/radare2/libr/anal/reflines.c:120\n>     #5 0x7fef5d12daba in ds_reflines_init /home/akochkov/radare/radare2/libr/core/disasm.c:791\n>     #6 0x7fef5d1763bf in r_core_print_disasm /home/akochkov/radare/radare2/libr/core/disasm.c:4595\n>     #7 0x7fef5cee21ea in cmd_print /home/akochkov/radare/radare2/libr/core/cmd_print.c:4591\n>     #8 0x7fef5d09703b in r_cmd_call /home/akochkov/radare/radare2/libr/core/cmd_api.c:237\n>     #9 0x7fef5cf583bd in r_core_cmd_subst_i /home/akochkov/radare/radare2/libr/core/cmd.c:2922\n>     #10 0x7fef5cf4adb4 in r_core_cmd_subst /home/akochkov/radare/radare2/libr/core/cmd.c:1934\n>     #11 0x7fef5cf62711 in r_core_cmd /home/akochkov/radare/radare2/libr/core/cmd.c:3626\n>     #12 0x7fef5cf63a45 in r_core_cmd0 /home/akochkov/radare/radare2/libr/core/cmd.c:3790\n>     #13 0x7fef5cfdae6d in visual_refresh /home/akochkov/radare/radare2/libr/core/visual.c:3155\n>     #14 0x7fef5cfddbaa in r_core_visual /home/akochkov/radare/radare2/libr/core/visual.c:3329\n>     #15 0x7fef5cf44d0d in cmd_visual /home/akochkov/radare/radare2/libr/core/cmd.c:1296\n>     #16 0x7fef5d09703b in r_cmd_call /home/akochkov/radare/radare2/libr/core/cmd_api.c:237\n>     #17 0x7fef5cf583bd in r_core_cmd_subst_i /home/akochkov/radare/radare2/libr/core/cmd.c:2922\n>     #18 0x7fef5cf4adb4 in r_core_cmd_subst /home/akochkov/radare/radare2/libr/core/cmd.c:1934\n>     #19 0x7fef5cf62711 in r_core_cmd /home/akochkov/radare/radare2/libr/core/cmd.c:3626\n>     #20 0x7fef5cd05aff in r_core_prompt_exec /home/akochkov/radare/radare2/libr/core/core.c:2568\n>     #21 0x560050fe87be in main /home/akochkov/radare/radare2/binr/radare2/radare2.c:1432\n>     #22 0x7fef4c7b211a in __libc_start_main (/lib64/libc.so.6+0x2311a)\n> \n> Direct leak of 456 byte(s) in 3 object(s) allocated from:\n>     #0 0x7fef5e306e50 in calloc (/lib64/libasan.so.5+0xeee50)\n>     #1 0x7fef4e1b7785 in sdb_decode /home/akochkov/radare/radare2/shlr/sdb/src/base64.c:101\n>     #2 0x7fef572619f0 in r_meta_deserialize_val /home/akochkov/radare/radare2/libr/anal/meta.c:346\n>     #3 0x7fef57262844 in r_meta_find /home/akochkov/radare/radare2/libr/anal/meta.c:425\n>     #4 0x7fef57268c90 in r_anal_reflines_get /home/akochkov/radare/radare2/libr/anal/reflines.c:120\n>     #5 0x7fef5d12de09 in ds_reflines_init /home/akochkov/radare/radare2/libr/core/disasm.c:794\n>     #6 0x7fef5d1763bf in r_core_print_disasm /home/akochkov/radare/radare2/libr/core/disasm.c:4595\n>     #7 0x7fef5cee21ea in cmd_print /home/akochkov/radare/radare2/libr/core/cmd_print.c:4591\n>     #8 0x7fef5d09703b in r_cmd_call /home/akochkov/radare/radare2/libr/core/cmd_api.c:237\n>     #9 0x7fef5cf583bd in r_core_cmd_subst_i /home/akochkov/radare/radare2/libr/core/cmd.c:2922\n>     #10 0x7fef5cf4adb4 in r_core_cmd_subst /home/akochkov/radare/radare2/libr/core/cmd.c:1934\n>     #11 0x7fef5cf62711 in r_core_cmd /home/akochkov/radare/radare2/libr/core/cmd.c:3626\n>     #12 0x7fef5cf63a45 in r_core_cmd0 /home/akochkov/radare/radare2/libr/core/cmd.c:3790\n>     #13 0x7fef5cfdae6d in visual_refresh /home/akochkov/radare/radare2/libr/core/visual.c:3155\n>     #14 0x7fef5cfddbaa in r_core_visual /home/akochkov/radare/radare2/libr/core/visual.c:3329\n>     #15 0x7fef5cf44d0d in cmd_visual /home/akochkov/radare/radare2/libr/core/cmd.c:1296\n>     #16 0x7fef5d09703b in r_cmd_call /home/akochkov/radare/radare2/libr/core/cmd_api.c:237\n>     #17 0x7fef5cf583bd in r_core_cmd_subst_i /home/akochkov/radare/radare2/libr/core/cmd.c:2922\n>     #18 0x7fef5cf4adb4 in r_core_cmd_subst /home/akochkov/radare/radare2/libr/core/cmd.c:1934\n>     #19 0x7fef5cf62711 in r_core_cmd /home/akochkov/radare/radare2/libr/core/cmd.c:3626\n>     #20 0x7fef5cd05aff in r_core_prompt_exec /home/akochkov/radare/radare2/libr/core/core.c:2568\n>     #21 0x560050fe87be in main /home/akochkov/radare/radare2/binr/radare2/radare2.c:1432\n>     #22 0x7fef4c7b211a in __libc_start_main (/lib64/libc.so.6+0x2311a)\n> \n> Direct leak of 7 byte(s) in 1 object(s) allocated from:\n>     #0 0x7fef5e253320 in strdup (/lib64/libasan.so.5+0x3b320)\n>     #1 0x7fef5ce0535a in setFunctionName /home/akochkov/radare/radare2/libr/core/cmd_anal.c:2103\n>     #2 0x7fef5ce0cecc in cmd_anal_fcn /home/akochkov/radare/radare2/libr/core/cmd_anal.c:2704\n>     #3 0x7fef5ce53686 in cmd_anal /home/akochkov/radare/radare2/libr/core/cmd_anal.c:7393\n>     #4 0x7fef5d09703b in r_cmd_call /home/akochkov/radare/radare2/libr/core/cmd_api.c:237\n>     #5 0x7fef5cf583bd in r_core_cmd_subst_i /home/akochkov/radare/radare2/libr/core/cmd.c:2922\n>     #6 0x7fef5cf4adb4 in r_core_cmd_subst /home/akochkov/radare/radare2/libr/core/cmd.c:1934\n>     #7 0x7fef5cf62711 in r_core_cmd /home/akochkov/radare/radare2/libr/core/cmd.c:3626\n>     #8 0x7fef5cf639b9 in r_core_cmdf /home/akochkov/radare/radare2/libr/core/cmd.c:3784\n>     #9 0x7fef5d0d25df in r_core_anal_all /home/akochkov/radare/radare2/libr/core/canal.c:3208\n>     #10 0x7fef5ce4eda5 in cmd_anal_all /home/akochkov/radare/radare2/libr/core/cmd_anal.c:7023\n>     #11 0x7fef5ce53b50 in cmd_anal /home/akochkov/radare/radare2/libr/core/cmd_anal.c:7441\n>     #12 0x7fef5d09703b in r_cmd_call /home/akochkov/radare/radare2/libr/core/cmd_api.c:237\n>     #13 0x7fef5cf583bd in r_core_cmd_subst_i /home/akochkov/radare/radare2/libr/core/cmd.c:2922\n>     #14 0x7fef5cf4adb4 in r_core_cmd_subst /home/akochkov/radare/radare2/libr/core/cmd.c:1934\n>     #15 0x7fef5cf62711 in r_core_cmd /home/akochkov/radare/radare2/libr/core/cmd.c:3626\n>     #16 0x7fef5cd05aff in r_core_prompt_exec /home/akochkov/radare/radare2/libr/core/core.c:2568\n>     #17 0x560050fe87be in main /home/akochkov/radare/radare2/binr/radare2/radare2.c:1432\n>     #18 0x7fef4c7b211a in __libc_start_main (/lib64/libc.so.6+0x2311a)\n> \n> SUMMARY: AddressSanitizer: 3327 byte(s) leaked in 18 allocation(s).\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/11493>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-llncdn7YTcKvyKN4CbwHYrfAD9xFks5uaIDXgaJpZM4WkluT>.\n> \n\n","createdAt":"2018-09-13T09:34:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11493#issuecomment-420945346","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0NzQyNjM5OA==","author":{"login":"dav1901"},"authorAssociation":"CONTRIBUTOR","body":"I believe those were fixed in \r\nhttps://github.com/radare/radare2/commit/f7be81edbbeaf99862d5e552398d6a91630cc2a9#diff-7b45b46dd8a84a924b91f34c2b1e6309\r\n https://github.com/radare/radare2/commit/8c521e8bf1c8b4accbf558b6ed06b510b09aa5c7#diff-b29aa2f07bcaeba1c57e637fab81237d\r\nhttps://github.com/radare/radare2/commit/2b055189918296d93512449d3a459967bd2a6bf5#diff-9a7bcc9d9f9b6439c4d8b9301f1d46cc","createdAt":"2018-12-14T19:16:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11493#issuecomment-447426398","viewerDidAuthor":false}],"number":11493,"title":"Memory leaks in the metainformation handling (comments/reflines) upon exit."},{"body":"See https://github.com/sushant94/esil-tests \r\n\r\ncc @condret @ret2libc @sivaramaaa ","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQyNzY0NzY1MQ==","author":{"login":"xtrm0"},"authorAssociation":"CONTRIBUTOR","body":"I think this is really needed. But it needs to be implemented along with ESIL rewrites, as most ESIL has wrong flags in most of the instructions (at least for x86). \r\n\r\nAlso it probably needs to use qemu, as it's impossible to run the tests for all the architectures in a sane amount of time without it.","createdAt":"2018-10-07T11:57:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11472#issuecomment-427647651","viewerDidAuthor":false}],"number":11472,"title":"Automated ESIL tests"},{"body":"should afi stack frame include (in arm) the push registers?\r\nfor example:\r\npush (r4, r5, lr)   - that's 12 bytes\r\nsub sp,sp,0x10 - 16 bytes\r\n\r\nshouldn't the stack frame be 12+16 bytes (as the registers are pushed to the stack)?\r\ncurrently the stack frame is only 16 bytes.\r\n\r\nalso is it possible to store the registers that are pushed in afi?\r\n","comments":[],"number":11391,"title":"question/bug in afi stack frame"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Arch x86_64\r\n| File format of the file you reverse (mandatory)      | raw\r\n| Architecture/bits of the file (mandatory)            | raw\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.9.0-git 19320 @ linux-x86-64 git.2.8.0-297-g5c848d1e8 commit: 5c848d1e8a1c065193896f189f7413062ac4f705 build: 2018-09-03__04:55:50\r\n\r\n### Expected behavior\r\n`pf [2]n2` prints two 16-bit words starting at current address with `cfg.bigendian=true`\r\n```\r\n$ r2 -\r\n[0x00000000]> wx 010102020303\r\n[0x00000000]> pf [2]n2\r\n0x00000000 = [ 257, 514 ]\r\n[0x00000000]> e cfg.bigendian=true\r\n[0x00000000]> pf [2]n2\r\n0x00000000 = [ 257, 514 ]\r\n```\r\n\r\n### Actual behavior\r\n`pf [2]n2` prints two 16-bit words starting at current address + 2 with `cfg.bigendian=true`\r\n```\r\nr2 -\r\n[0x00000000]> wx 010102020303\r\n[0x00000000]> pf [2]n2\r\n0x00000000 = [ 257, 514 ]\r\n[0x00000000]> e cfg.bigendian=true\r\n[0x00000000]> pf [2]n2\r\n0x00000000 = [ 514, 771 ]\r\n```\r\n\r\n### Steps to reproduce the behavior \r\nhttps://asciinema.org/a/J92dwtbUu1ZP3D4j75mairAZd","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY2NzgxMjEwOA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-08-03T05:33:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11365#issuecomment-667812108","viewerDidAuthor":false}],"number":11365,"title":"`pf n2` starts at wrong address when `cfg.bigendian=true`"},{"body":"r2pm should clone and pull for a specific date if using r2 from release (r2 -v| grep git)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYwMjEzMDQ3MQ==","author":{"login":"imyxh"},"authorAssociation":"CONTRIBUTOR","body":"I'd be happy work on an implementation for this in the shell script, but I worry that checkout by date isn't the optimal solution. What if some function is renamed very close to a release date, and plugin creators are just a day or so behind the refactor?\r\n\r\nI think if we make checkout by date the default behavior, we should probably also implement an option to install from a specific commit of a package. Then, at least, users can override when necessary.\r\n\r\n```\r\n-i,install <pkgname> [commit]\r\ninstall or update package in your home (pkgname=all);\r\nif [commit] is specified, install from package's git commit hash [commit];\r\nelse if r2 is a release build, install package from latest commit at date of r2 release;\r\nelse install package from git master\r\n```\r\n\r\nAlso, getting the date of the release from GitHub looks like it might be annoying. Off the top of my head, the best I can think of is\r\n\r\n```sh\r\ncurl -gs \"https://github.com/radareorg/radare2/releases/tag/$(r2 -qv)\" | grep relative-time | ...\r\n```\r\n\r\nwhich would break if GitHub changes their html. I imagine that it would be a smarter idea to write date-of-release information into `r2 -v`.\r\n\r\nThoughts? Another option, of course, is to just ask plugin writers to tag their damn packages with corresponding r2 versions. :)","createdAt":"2020-03-22T01:09:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11353#issuecomment-602130471","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjEzMTAzNA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Shellscript r2pm is outdated, please contribute to https://github.com/radareorg/r2pm instead.","createdAt":"2020-03-22T01:14:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11353#issuecomment-602131034","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjEzMTUyOA==","author":{"login":"imyxh"},"authorAssociation":"CONTRIBUTOR","body":"@XVilka okay, will do; corresponding issue is [r2pm/67](https://github.com/radareorg/r2pm/issues/67). I assume the golang version of r2pm is eventually going to be merged into this repository? It's been in development for a while so I wasn't sure if it was to be merged in future or if it's just a side thing for compatibility.","createdAt":"2020-03-22T01:18:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11353#issuecomment-602131528","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjEzMjI2OA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"It will not be merged in this repository, but shell script will be removed (once r2pm.go is done) yes.","createdAt":"2020-03-22T01:25:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/11353#issuecomment-602132268","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjIwMTUyMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i think r2pm.c will be done before r2pm.go and i dont want to remove the shellscript because r2pm.go doesnt uses the same syntax so many packages that i use wont be there.\n\nr2pm.go is almost 2 years old and its still unusable, r2pm.sh took me one night to do and its still rocking. i have 0 hope in Go\n\n> On 22 Mar 2020, at 02:25, Anton Kochkov <notifications@github.com> wrote:\n> \n> \n> It will not be merged in this repository, but shell script will be removed (once r2pm.go is done) yes.\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/11353#issuecomment-602132268>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FSXO5C2LYHGJZCAX2TRIVSHZANCNFSM4FSZX5NA>.\n> \n\n","createdAt":"2020-03-22T13:33:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_DOWN","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/11353#issuecomment-602201522","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjIwMjY4OA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Shellscript is non-portable solution (no Windows). We need portable\nsolution. Go gives libs out of the box - for https, GitHub API, zip files,\netc. It will become way more complex in pure C.\n\nOn Sun, Mar 22, 2020, 21:33 radare <notifications@github.com> wrote:\n\n> i think r2pm.c will be done before r2pm.go and i dont want to remove the\n> shellscript because r2pm.go doesnt uses the same syntax so many packages\n> that i use wont be there.\n>\n> r2pm.go is almost 2 years old and its still unusable, r2pm.sh took me one\n> night to do and its still rocking. i have 0 hope in Go\n>\n> > On 22 Mar 2020, at 02:25, Anton Kochkov <notifications@github.com>\n> wrote:\n> >\n> >\n> > It will not be merged in this repository, but shell script will be\n> removed (once r2pm.go is done) yes.\n> >\n> > â€”\n> > You are receiving this because you authored the thread.\n> > Reply to this email directly, view it on GitHub <\n> https://github.com/radareorg/radare2/issues/11353#issuecomment-602132268>,\n> or unsubscribe <\n> https://github.com/notifications/unsubscribe-auth/AAG75FSXO5C2LYHGJZCAX2TRIVSHZANCNFSM4FSZX5NA\n> >.\n> >\n>\n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/radareorg/radare2/issues/11353#issuecomment-602201522>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AABRT7PPPKOMJCXAZE2AC7DRIYHSXANCNFSM4FSZX5NA>\n> .\n>\n","createdAt":"2020-03-22T13:41:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}},{"content":"HEART","users":{"totalCount":3}}],"url":"https://github.com/radareorg/radare2/issues/11353#issuecomment-602202688","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjI1NzI3NA==","author":{"login":"imyxh"},"authorAssociation":"CONTRIBUTOR","body":"@XVilka, wouldn't libcurl provide all the functionality we need from C? If we ask plugin authors to simply tag their repos, downloading could be as simple as a GET request to the appropriate GitHub URL.","createdAt":"2020-03-22T19:11:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11353#issuecomment-602257274","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjM4NDA3Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@imyxh surely there are libraries for C, but then the problems arise:\r\n- Crossplatform building, preferably without any of radare2 source dependencies (for Go it's just `go get` or whatever similar)\r\n- Building statically binaries, with Go it's easy as one command for ANY supported platform\r\n- r2pm.go is supposed to be small independent binary (like `rustup`) to keep your radare2 and cutter installations updated, along with plugins\r\n- We want to have simple binary packages support with r2pm - https://github.com/radareorg/r2pm/issues/7\r\n- And so on. ","createdAt":"2020-03-23T04:50:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/11353#issuecomment-602384076","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjQ0NTQxMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"System(curl) is better than libcurl same goes for system(git) vs libgit. I dont want to add those dependencies to r2 when we can just call the system programs\n\n> On 22 Mar 2020, at 20:11, Ian Huang <notifications@github.com> wrote:\n> \n> ï»¿\n> @XVilka, wouldn't libcurl provide all the functionality we need from C? If we ask plugin authors to simply tag their repos, downloading could be as simple as a GET request to the appropriate GitHub URL.\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-03-23T08:10:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11353#issuecomment-602445411","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjYyMzI0MA==","author":{"login":"qbarrand"},"authorAssociation":"NONE","body":"> r2pm.go is almost 2 years old and its still unusable, r2pm.sh took me one night to do and its still rocking. i have 0 hope in Go\r\n\r\nNot exactly the same products, are they? :)\r\n`r2pm` in Go would also call those programs, and allow for a variety for package types (including binary archives for Windows) with a YAML syntax. See https://github.com/radareorg/r2pm/blob/master/docs/packages.md#schema for an idea of what a package file might look like. Note that there is exactly zero dependency on `sh`!\r\n\r\nI am certainly to blame for the lack of progress of `r2pm`, but I see that there's been some interest lately, which is great. I must confess that comments like https://github.com/radareorg/radare2/issues/11353#issuecomment-602201522 are not encouraging, though.","createdAt":"2020-03-23T14:15:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}},{"content":"HEART","users":{"totalCount":3}}],"url":"https://github.com/radareorg/radare2/issues/11353#issuecomment-602623240","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjY3MTY4OQ==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"> I am certainly to blame for the lack of progress of `r2pm`\r\n\r\nNo actually you are the one reason there HAS been progress in r2pm at all.\r\n\r\nAbout C, I don't see a big reason to switch to C now, Go is easy enough to learn.","createdAt":"2020-03-23T15:24:04Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11353#issuecomment-602671689","viewerDidAuthor":false}],"number":11353,"title":"Fix R2pm for release builds"},{"body":"","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY2MjgyMzk5MA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-07-23T05:23:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11193#issuecomment-662823990","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NTkxNjUyOQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically closed because marked as stale and it has not been updated since then. If the issue is still relevant, feel free to re-open it or open a new one.\n","createdAt":"2020-09-21T06:01:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11193#issuecomment-695916529","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NTkyMTM1Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@trufae is this still the case? Do you mean for the `char* assembly` field? Or for something else? ","createdAt":"2020-09-21T06:15:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11193#issuecomment-695921356","viewerDidAuthor":false}],"number":11193,"title":"Make RAsmCode use RStrBuf like RAsmOp"},{"body":"In V mode, the cmd.cprompt collides with the disassembly. \r\n\r\n![screenshot from 2018-08-21 03-42-48](https://user-images.githubusercontent.com/12518848/44378579-e1fbfd00-a4f9-11e8-9903-bb3a373d396f.png)\r\n\r\n\r\nIn this picture the behaviour is a bit exaggerated  by setting --> **asm.emu = true**\r\nJust as an example, **cmd.cprompt = drr**\r\n\r\n\r\nIf there was a way to configure the width||position of **cmd.cprompt** like **asm.cmt.col** defines the position of comments, users with high-res screens could adjust that setting and avoid texts colliding.\r\n\r\n- r2 Info:\r\n  $r2 -v \r\n  radare2 2.9.0-git 19244 @ linux-x86-64 git.2.8.0-147-g4016763f5\r\n  commit: 4016763f54bc8275a8762dcd68277b447244421a build: 2018-08-21__00:47:44\r\n\r\n- System: Debian/Gnome/GnomeTerminal\r\n- Screen Res: 3200x1800px\r\n\r\nCheers.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQxNDU4NjAzMQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"(Tips - You may want to try `e dbg.slow=true` mode) and also `V!` mode","createdAt":"2018-08-21T07:59:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11167#issuecomment-414586031","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxNDY3OTM2OQ==","author":{"login":"jerc33"},"authorAssociation":"NONE","body":"I know Maijin, thanks ;)\r\n\r\n\r\nAs I said **drr** was just an example, I was a bit in a hurry so I didn't use my usual setup.\r\n\r\nBut **dbg.slow** actually accentuates the problem if you try to use **cmd.cprompt** in visual mode:\r\n![screenshot from 2018-08-21 12-58-57](https://user-images.githubusercontent.com/12518848/44401737-848e9d00-a547-11e8-9552-eeaf8fbe9e21.png)\r\n\r\nThe thing is the cmd.cprompt in Visual mode is really handy for stuff like this (even though comments must be disabled):\r\n![screenshot from 2018-08-21 12-37-42](https://user-images.githubusercontent.com/12518848/44402286-34b0d580-a549-11e8-9c90-82d9d9bf9cf2.png)\r\n\r\n\r\nIn V mode it's manageable, notice I've disabled **asm.lines**  and **asm.comments** now. I could disable **asm.cmt.right** but then it all becomes cluttered, specially if I have **asm.bbline = true**.\r\n\r\nIn Panels mode (V!) this becomes unmanageable, specially when there's a **/n character** in a chunk of memory. Then the panels break quite often and disasm gets obstructed sometimes, like so:\r\n![screenshot from 2018-08-21 12-54-35](https://user-images.githubusercontent.com/12518848/44402044-78570f80-a548-11e8-8ec1-05d86e8f408e.png)\r\n\r\n\r\nSo if there was a setting we could edit to push the cprompt in V farther away form the left corner, maybe we could even expand the terminal window to a second screen. I believe some more users would find that handy. I know I would. ;)","createdAt":"2018-08-21T13:46:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11167#issuecomment-414679369","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxNTI4MTExNg==","author":{"login":"jerc33"},"authorAssociation":"NONE","body":"So I searched around in the code and found this:\r\n\r\n~/radare2/libr/core/visual.c\r\nlines: 3081-3082\r\n```\r\nint hc = r_config_get_i (core->config, \"hex.cols\");\r\nint nw = 12 + 4 + hc + (hc * 3);\r\n```\r\n\r\nSo the distance value is dependant on **e hex.cols**, which means I found what I was looking for.\r\nThe downside might be that the alignment on the hex panels might be thrown off, but I'm ok with that.\r\n\r\nChecked and confirmed. I'm happy with using **hex.cols**. I'm considering this issue closed. \r\nThanks @Maijin ","createdAt":"2018-08-23T03:57:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11167#issuecomment-415281116","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxNTI4NjA3MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Reopening, because it would be nice to fix in a better way.","createdAt":"2018-08-23T04:26:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11167#issuecomment-415286071","viewerDidAuthor":false}],"number":11167,"title":"FR/maybe bug? Exposing cprompt width for big screen resolution compatibility."},{"body":"<img width=\"982\" alt=\"image\" src=\"https://user-images.githubusercontent.com/1408600/53043344-d3979980-34ba-11e9-813b-ecb1344a52ba.png\">\r\n\r\n\r\n* [ ] Create `rafind2 -mX` equivalent to binwalk -e for extracting known file types\r\n* [ ] Create `rafind2 -mXY` equivalent to binwalk -Me for extracting known file types recursively\r\n* [ ] Add a command in radare2 to do same under `/me` and `/meR`\r\n\r\nNote - The search for magic is already implemented in `rafind2 -m`","comments":[],"number":11163,"title":"Create rafind2 equivalent to binwalk -Me"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 18.04 x64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)                | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.9.0-git 19150 @ linux-x86-64 git.2.8.0-114-gc6f0342a4 commit: c6f0342a411289d65b7d009ac52d4e73619059a4 build: 2018-08-17__12:58:37\r\n\r\n### Expected behavior\r\n\r\n```\r\n[0x00000898]> afv\r\nvar unsigned int local_84h @ rbp-0x84\r\nvar char[32] s1 @ rbp-0x80\r\nvar char * s2 @ rbp-0x60\r\nvar int canary @ rbp-0x8\r\n```\r\n\r\n### Actual behavior\r\n\r\n```\r\n[0x00000898]> afv\r\nvar unsigned int local_84h @ rbp-0x84\r\nvar char[32] s1 @ rbp-0x80\r\nvar int local_78h @ rbp-0x78\r\nvar int local_70h @ rbp-0x70\r\nvar int local_6ch @ rbp-0x6c\r\nvar int local_6ah @ rbp-0x6a\r\nvar char * s2 @ rbp-0x60\r\nvar int canary @ rbp-0x88\r\n```\r\n\r\n### Steps to reproduce the behavior \r\n\r\n\r\n```\r\n[0x00000730]> aa;afta;s main;afvt s1 char[32];afv;\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\nvar unsigned int local_84h @ rbp-0x84\r\nvar char[32] s1 @ rbp-0x80\r\nvar int local_78h @ rbp-0x78\r\nvar int local_70h @ rbp-0x70\r\nvar int local_6ch @ rbp-0x6c\r\nvar int local_6ah @ rbp-0x6a\r\nvar char * s2 @ rbp-0x60\r\nvar int canary @ rbp-0x8\r\n```\r\n\r\nJust to say I am not saying this is a bug, but I would expect overlapped fields to be overwritten by the first (s1) var if the type is bigger than below.\r\n\r\n[crackme-01.zip](https://github.com/radare/radare2/files/2297243/crackme-01.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY2MDEwNjUwOA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-07-17T13:26:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11119#issuecomment-660106508","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY2MDY4NTg1Ng==","author":{"login":"manokara"},"authorAssociation":"NONE","body":"This is still valid, albeit as OP mentioned it could be more of a feature request than a bug. At first I thought you were supposed to put the array size in the identifier, but that also doesn't work. This is behavior is quite intuitive, and IDA for example allows that.\r\n\r\nI think the underlying problem is lack of array support for types in general. You could create a struct of ints and longs until they match the size of the variable, like this:\r\n\r\n```\r\n\"td struct CharArray32 { unsigned long a1; unsigned long a2; unsigned long a3; unsigned long a4; };\"\r\nafvt s1 CharArray32;\r\n```\r\n\r\nAnd that works as intended, s1 now takes 32 bytes of the stack frame. Recently a PR on the types API was merged, and from what I've seen of it there's a chance this is going to work quite soon.","createdAt":"2020-07-19T18:14:42Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11119#issuecomment-660685856","viewerDidAuthor":false}],"number":11119,"title":"Writting a bigger type doesn't overlap following frame fields."},{"body":"Hi, I'm still relatively new to working with radare2, so I don't know if this is a bug or maybe a misconfiguration on my side.\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Linux Mint 19, x86_64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | MIPS 32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.8.0-git 18956 @ linux-x86-64 git.2.7.0-177-g8e2803c18 commit: 8e2803c18270ac3f3b4fdf2bc4ade910dd3f8a4b build: 2018-07-30__12:34:32\r\n\r\n### Problem Description\r\n\r\nThe call references of functions (\"call-refs\" in `afi`) don't seem to get resolved correctly for MIPS.\r\n\r\n### Expected behavior\r\nI have compiled the binary for several architectures and for the other cases (x86, x86_64, ARMv7, PowerPC32) the method calls get identified correctly and can be traced to other methods and imports.\r\n\r\n### Actual behavior\r\nThe  call references that can be seen in the disassembly do not show up in the function call-refs output.\r\n\r\nExample output for a function:\r\nThe calls from the disassembly (to sym.sign_key_free, sym.seedrandom, sym.imp.clearenv, etc.) do mostly not show up in the afi output (especially all calls to imported APIs). Also, the number of the \"call-refs\" seems to be off and the output seems to contain duplicates (every second call-ref is the same).\r\n\r\nThe disassembly:\r\n```\r\n[0x00432da8]> pdf\r\n/ (fcn) sym.execchild 1036\r\n|   sym.execchild ();\r\n|           ; var int local_10h @ sp+0x10\r\n|           ; var int local_20h @ sp+0x20\r\n|           ; var int local_24h @ sp+0x24\r\n|           ; var int local_b0h @ sp+0xb0\r\n|           ; var int local_b4h @ sp+0xb4\r\n|           ; DATA XREF from sym.noptycommand (0x4325a0)\r\n|           ; CALL XREF from sym.ptycommand (0x432b74)\r\n|           0x00432da8 b    27bdffd8       addiu sp, sp, -0x28\r\n|           0x00432dac      afbf0024       sw ra, 0x24(sp)\r\n|           0x00432db0      afbe0020       sw fp, 0x20(sp)\r\n|           0x00432db4      03a0f025       move fp, sp\r\n|           0x00432db8      3c1c0048       lui gp, 0x48\r\n|           0x00432dbc      279c9380       addiu gp, gp, -0x6c80\r\n|           0x00432dc0      afbc0010       sw gp, 0x10(sp)\r\n|           0x00432dc4      afc40028       sw a0, 0x28(fp)\r\n|           0x00432dc8      8fc20028       lw v0, 0x28(fp)\r\n|           0x00432dcc      afc20018       sw v0, 0x18(fp)\r\n|           0x00432dd0      afc0001c       sw zero, 0x1c(fp)\r\n|           0x00432dd4      8f828398       lw v0, -obj.svr_opts(gp)    ; [0x471718:4]=0x472298 obj.svr_opts\r\n|           0x00432dd8      8c420080       lw v0, 0x80(v0)\r\n|           0x00432ddc      00402025       move a0, v0\r\n|           0x00432de0      8f828218       lw v0, -sym.sign_key_free\r\n\r\n(gp) ; [0x471598:4]=0x409dc4 sym.sign_key_free\r\n|           0x00432de4      0040c825       move t9, v0\r\n|           0x00432de8      0320f809       jalr t9\r\n|           0x00432dec      00000000       nop\r\n|           0x00432df0      8fdc0010       lw gp, 0x10(fp)\r\n|           0x00432df4      8f828398       lw v0, -obj.svr_opts(gp)    ; [0x471718:4]=0x472298 obj.svr_opts\r\n|           0x00432df8      ac400080       sw zero, 0x80(v0)\r\n|           0x00432dfc      8f8281fc       lw v0, -sym.seedrandom(gp)  ; [0x47157c:4]=0x40c278 sym.seedrandom\r\n|           0x00432e00      0040c825       move t9, v0\r\n|           0x00432e04      0320f809       jalr t9\r\n|           0x00432e08      00000000       nop\r\n|           0x00432e0c      8fdc0010       lw gp, 0x10(fp)\r\n|           0x00432e10      8f8287e8       lw v0, -sym.imp.clearenv(gp) ; [0x471b68:4]=0x458e40 sym.imp.clearenv\r\n|           0x00432e14      0040c825       move t9, v0\r\n|           0x00432e18      0320f809       jalr t9\r\n|           0x00432e1c      00000000       nop\r\n|           0x00432e20      8fdc0010       lw gp, 0x10(fp)\r\n|           0x00432e24      8f828798       lw v0, -sym.imp.getuid(gp)  ; [0x471b18:4]=0x458f60 sym.imp.getuid\r\n|           0x00432e28      0040c825       move t9, v0\r\n|           0x00432e2c      0320f809       jalr t9\r\n|           0x00432e30      00000000       nop\r\n|           0x00432e34      8fdc0010       lw gp, 0x10(fp)\r\n|       ,=< 0x00432e38      1440002e       bnez v0, 0x432ef4\r\n|       |   0x00432e3c      00000000       nop\r\n|       |   0x00432e40      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\r\n|       |   0x00432e44      8c4200c0       lw v0, 0xc0(v0)\r\n|       |   0x00432e48      00402025       move a0, v0\r\n|       |   0x00432e4c      8f828750       lw v0, -sym.imp.setgid(gp)  ; [0x471ad0:4]=0x459080 sym.imp.setgid\r\n|       |   0x00432e50      0040c825       move t9, v0\r\n|       |   0x00432e54      0320f809       jalr t9\r\n|       |   0x00432e58      00000000       nop\r\n|       |   0x00432e5c      8fdc0010       lw gp, 0x10(fp)\r\n|      ,==< 0x00432e60      0440000e       bltz v0, 0x432e9c\r\n|      ||   0x00432e64      00000000       nop\r\n|      ||   0x00432e68      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\r\n|      ||   0x00432e6c      8c4300cc       lw v1, 0xcc(v0)\r\n|      ||   0x00432e70      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\r\n|      ||   0x00432e74      8c4200c0       lw v0, 0xc0(v0)\r\n|      ||   0x00432e78      00402825       move a1, v0\r\n|      ||   0x00432e7c      00602025       move a0, v1\r\n|      ||   0x00432e80      8f828794       lw v0, -sym.imp.initgroups(gp) ; [0x471b14:4]=0x458f70 sym.imp.initgroups\r\n|      ||   0x00432e84      0040c825       move t9, v0\r\n|      ||   0x00432e88      0320f809       jalr t9\r\n|      ||   0x00432e8c      00000000       nop\r\n|      ||   0x00432e90      8fdc0010       lw gp, 0x10(fp)\r\n|     ,===< 0x00432e94      04410007       bgez v0, 0x432eb4\r\n|     |||   0x00432e98      00000000       nop\r\n|     |||   ; CODE XREF from sym.execchild (0x432e60)\r\n|     |`--> 0x00432e9c      3c020046       lui v0, 0x46\r\n|     | |   0x00432ea0      2444ba00       addiu a0, v0, -0x4600       ; 0x45ba00 ; \"Error changing user group\" ; str.Error_changing_user_group\r\n|     | |   0x00432ea4      8f828044       lw v0, -sym.dropbear_exit(gp) ; [0x4713c4:4]=0x404fa0 sym.dropbear_exit\r\n|     | |   0x00432ea8      0040c825       move t9, v0\r\n|     | |   0x00432eac      0320f809       jalr t9\r\n|     | |   0x00432eb0      00000000       nop\r\n|     | |   ; CODE XREF from sym.execchild (0x432e94)\r\n|     `---> 0x00432eb4      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\r\n|       |   0x00432eb8      8c4200bc       lw v0, 0xbc(v0)\r\n|       |   0x00432ebc      00402025       move a0, v0\r\n|       |   0x00432ec0      8f828678       lw v0, -sym.imp.setuid(gp)  ; [0x4719f8:4]=0x4593c0 sym.imp.setuid\r\n|       |   0x00432ec4      0040c825       move t9, v0\r\n|       |   0x00432ec8      0320f809       jalr t9\r\n|       |   0x00432ecc      00000000       nop\r\n|       |   0x00432ed0      8fdc0010       lw gp, 0x10(fp)\r\n|      ,==< 0x00432ed4      04410017       bgez v0, 0x432f34\r\n|      ||   0x00432ed8      00000000       nop\r\n|      ||   0x00432edc      3c020046       lui v0, 0x46\r\n|      ||   0x00432ee0      2444ba1c       addiu a0, v0, -0x45e4       ; 0x45ba1c ; \"Error changing user\" ; str.Error_changing_user\r\n|      ||   0x00432ee4      8f828044       lw v0, -sym.dropbear_exit(gp) ; [0x4713c4:4]=0x404fa0 sym.dropbear_exit\r\n|      ||   0x00432ee8      0040c825       move t9, v0\r\n|      ||   0x00432eec      0320f809       jalr t9\r\n|      ||   0x00432ef0      00000000       nop\r\n|      ||   ; CODE XREF from sym.execchild (0x432e38)\r\n|      |`-> 0x00432ef4      8f828798       lw v0, -sym.imp.getuid(gp)  ; [0x471b18:4]=0x458f60 sym.imp.getuid\r\n|      |    0x00432ef8      0040c825       move t9, v0\r\n|      |    0x00432efc      0320f809       jalr t9\r\n|      |    0x00432f00      00000000       nop\r\n|      |    0x00432f04      8fdc0010       lw gp, 0x10(fp)\r\n|      |    0x00432f08      00401825       move v1, v0\r\n|      |    0x00432f0c      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\r\n|      |    0x00432f10      8c4200bc       lw v0, 0xbc(v0)\r\n|      |,=< 0x00432f14      10620007       beq v1, v0, 0x432f34\r\n|      ||   0x00432f18      00000000       nop\r\n|      ||   0x00432f1c      3c020046       lui v0, 0x46\r\n|      ||   0x00432f20      2444ba30       addiu a0, v0, -0x45d0       ; 0x45ba30 ; \"Couldn't\\tchange user as non-root\" ; str.Couldn_t__change_user_as_non_root\r\n|      ||   0x00432f24      8f828044       lw v0, -sym.dropbear_exit(gp) ; [0x4713c4:4]=0x404fa0 sym.dropbear_exit\r\n|      ||   0x00432f28      0040c825       move t9, v0\r\n|      ||   0x00432f2c      0320f809       jalr t9\r\n|      ||   0x00432f30      00000000       nop\r\n|      ||   ; CODE XREFS from sym.execchild (0x432ed4, 0x432f14)\r\n|      ``-> 0x00432f34      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\r\n|           0x00432f38      8c4200cc       lw v0, 0xcc(v0)\r\n|           0x00432f3c      00402825       move a1, v0\r\n|           0x00432f40      3c020046       lui v0, 0x46\r\n|           0x00432f44      2444ba54       addiu a0, v0, -0x45ac       ; 0x45ba54 ; \"USER\" ; str.USER\r\n|           0x00432f48      0c10ccbb       jal sym.addnewvar\r\n|           0x00432f4c      00000000       nop\r\n|           0x00432f50      8fdc0010       lw gp, 0x10(fp)\r\n|           0x00432f54      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\r\n|           0x00432f58      8c4200cc       lw v0, 0xcc(v0)\r\n|           0x00432f5c      00402825       move a1, v0\r\n|           0x00432f60      3c020046       lui v0, 0x46\r\n|           0x00432f64      2444ba5c       addiu a0, v0, -0x45a4       ; 0x45ba5c ; \"LOGNAME\" ; str.LOGNAME\r\n|           0x00432f68      0c10ccbb       jal sym.addnewvar\r\n|           0x00432f6c      00000000       nop\r\n|           0x00432f70      8fdc0010       lw gp, 0x10(fp)\r\n|           0x00432f74      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\r\n|           0x00432f78      8c4200c4       lw v0, 0xc4(v0)\r\n|           0x00432f7c      00402825       move a1, v0\r\n|           0x00432f80      3c020046       lui v0, 0x46\r\n|           0x00432f84      2444ba64       addiu a0, v0, -0x459c       ; 0x45ba64 ; \"HOME\" ; str.HOME\r\n|           0x00432f88      0c10ccbb       jal sym.addnewvar\r\n|           0x00432f8c      00000000       nop\r\n|           0x00432f90      8fdc0010       lw gp, 0x10(fp)\r\n|           0x00432f94      8f828480       lw v0, -sym.get_user_shell(gp) ; [0x471800:4]=0x412ec8 sym.get_user_shell\r\n|           0x00432f98      0040c825       move t9, v0\r\n|           0x00432f9c      0320f809       jalr t9\r\n|           0x00432fa0      00000000       nop\r\n|           0x00432fa4      8fdc0010       lw gp, 0x10(fp)\r\n|           0x00432fa8      00402825       move a1, v0\r\n|           0x00432fac      3c020046       lui v0, 0x46\r\n|           0x00432fb0      2444ba6c       addiu a0, v0, -0x4594       ; 0x45ba6c ; \"SHELL\" ; str.SHELL\r\n|           0x00432fb4      0c10ccbb       jal sym.addnewvar\r\n|           0x00432fb8      00000000       nop\r\n|           0x00432fbc      8fdc0010       lw gp, 0x10(fp)\r\n|           0x00432fc0      3c020046       lui v0, 0x46\r\n|           0x00432fc4      2445ba74       addiu a1, v0, -0x458c       ; 0x45ba74 ; \"/usr/bin:/bin\" ; str.usr_bin:_bin\r\n|           0x00432fc8      3c020046       lui v0, 0x46\r\n|           0x00432fcc      2444ba84       addiu a0, v0, -0x457c       ; 0x45ba84 ; \"PATH\" ; str.PATH\r\n|           0x00432fd0      0c10ccbb       jal sym.addnewvar\r\n|           0x00432fd4      00000000       nop\r\n|           0x00432fd8      8fdc0010       lw gp, 0x10(fp)\r\n|           0x00432fdc      8fc20018       lw v0, 0x18(fp)\r\n|           0x00432fe0      8c420014       lw v0, 0x14(v0)\r\n|       ,=< 0x00432fe4      10400009       beqz v0, 0x43300c\r\n|       |   0x00432fe8      00000000       nop\r\n|       |   0x00432fec      8fc20018       lw v0, 0x18(fp)\r\n|       |   0x00432ff0      8c420014       lw v0, 0x14(v0)\r\n|       |   0x00432ff4      00402825       move a1, v0\r\n|       |   0x00432ff8      3c020046       lui v0, 0x46\r\n|       |   0x00432ffc      2444ba8c       addiu a0, v0, -0x4574       ; 0x45ba8c ; \"TERM\" ; str.TERM\r\n|       |   0x00433000      0c10ccbb       jal sym.addnewvar\r\n|       |   0x00433004      00000000       nop\r\n|       |   0x00433008      8fdc0010       lw gp, 0x10(fp)\r\n|       |   ; CODE XREF from sym.execchild (0x432fe4)\r\n|       `-> 0x0043300c      8fc20018       lw v0, 0x18(fp)\r\n|           0x00433010      8c420010       lw v0, 0x10(v0)\r\n|       ,=< 0x00433014      10400009       beqz v0, 0x43303c\r\n|       |   0x00433018      00000000       nop\r\n|       |   0x0043301c      8fc20018       lw v0, 0x18(fp)\r\n|       |   0x00433020      8c420010       lw v0, 0x10(v0)\r\n|       |   0x00433024      00402825       move a1, v0\r\n|       |   0x00433028      3c020046       lui v0, 0x46\r\n|       |   0x0043302c      2444ba94       addiu a0, v0, -0x456c       ; 0x45ba94 ; \"SSH_TTY\" ; str.SSH_TTY\r\n|       |   0x00433030      0c10ccbb       jal sym.addnewvar\r\n|       |   0x00433034      00000000       nop\r\n|       |   0x00433038      8fdc0010       lw gp, 0x10(fp)\r\n|       |   ; CODE XREF from sym.execchild (0x433014)\r\n|       `-> 0x0043303c      8fc20018       lw v0, 0x18(fp)\r\n|           0x00433040      8c420028       lw v0, 0x28(v0)\r\n|       ,=< 0x00433044      10400009       beqz v0, 0x43306c\r\n|       |   0x00433048      00000000       nop\r\n|       |   0x0043304c      8fc20018       lw v0, 0x18(fp)\r\n|       |   0x00433050      8c420028       lw v0, 0x28(v0)\r\n|       |   0x00433054      00402825       move a1, v0\r\n|       |   0x00433058      3c020046       lui v0, 0x46\r\n|       |   0x0043305c      2444ba9c       addiu a0, v0, -0x4564       ; 0x45ba9c ; \"SSH_CONNECTION\" ; str.SSH_CONNECTION\r\n|       |   0x00433060      0c10ccbb       jal sym.addnewvar\r\n|       |   0x00433064      00000000       nop\r\n|       |   0x00433068      8fdc0010       lw gp, 0x10(fp)\r\n|       |   ; CODE XREF from sym.execchild (0x433044)\r\n|       `-> 0x0043306c      8fc20018       lw v0, 0x18(fp)\r\n|           0x00433070      8c42002c       lw v0, 0x2c(v0)\r\n|       ,=< 0x00433074      10400009       beqz v0, 0x43309c\r\n|       |   0x00433078      00000000       nop\r\n|       |   0x0043307c      8fc20018       lw v0, 0x18(fp)\r\n|       |   0x00433080      8c42002c       lw v0, 0x2c(v0)\r\n|       |   0x00433084      00402825       move a1, v0\r\n|       |   0x00433088      3c020046       lui v0, 0x46\r\n|       |   0x0043308c      2444baac       addiu a0, v0, -0x4554       ; 0x45baac ; \"SSH_CLIENT\" ; str.SSH_CLIENT\r\n|       |   0x00433090      0c10ccbb       jal sym.addnewvar\r\n|       |   0x00433094      00000000       nop\r\n|       |   0x00433098      8fdc0010       lw gp, 0x10(fp)\r\n|       |   ; CODE XREF from sym.execchild (0x433074)\r\n|       `-> 0x0043309c      8fc20018       lw v0, 0x18(fp)\r\n|           0x004330a0      8c420054       lw v0, 0x54(v0)\r\n|       ,=< 0x004330a4      10400009       beqz v0, 0x4330cc\r\n|       |   0x004330a8      00000000       nop\r\n|       |   0x004330ac      8fc20018       lw v0, 0x18(fp)\r\n|       |   0x004330b0      8c420054       lw v0, 0x54(v0)\r\n|       |   0x004330b4      00402825       move a1, v0\r\n|       |   0x004330b8      3c020046       lui v0, 0x46\r\n|       |   0x004330bc      2444bab8       addiu a0, v0, -0x4548       ; 0x45bab8 ; \"SSH_ORIGINAL_COMMAND\" ; str.SSH_ORIGINAL_COMMAND\r\n|       |   0x004330c0      0c10ccbb       jal sym.addnewvar\r\n|       |   0x004330c4      00000000       nop\r\n|       |   0x004330c8      8fdc0010       lw gp, 0x10(fp)\r\n|       |   ; CODE XREF from sym.execchild (0x4330a4)\r\n|       `-> 0x004330cc      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\r\n|           0x004330d0      8c4200c4       lw v0, 0xc4(v0)\r\n|           0x004330d4      00402025       move a0, v0\r\n|           0x004330d8      8f8287a0       lw v0, -sym.imp.chdir(gp)   ; [0x471b20:4]=0x458f40 sym.imp.chdir\r\n|           0x004330dc      0040c825       move t9, v0\r\n|           0x004330e0      0320f809       jalr t9\r\n|           0x004330e4      00000000       nop\r\n|           0x004330e8      8fdc0010       lw gp, 0x10(fp)\r\n|       ,=< 0x004330ec      04410007       bgez v0, 0x43310c\r\n|       |   0x004330f0      00000000       nop\r\n|       |   0x004330f4      3c020046       lui v0, 0x46\r\n|       |   0x004330f8      2444bad0       addiu a0, v0, -0x4530       ; 0x45bad0 ; \"Error changing directory\" ; str.Error_changing_directory\r\n|       |   0x004330fc      8f828044       lw v0, -sym.dropbear_exit(gp) ; [0x4713c4:4]=0x404fa0 sym.dropbear_exit\r\n|       |   0x00433100      0040c825       move t9, v0\r\n|       |   0x00433104      0320f809       jalr t9\r\n|       |   0x00433108      00000000       nop\r\n|       |   ; CODE XREF from sym.execchild (0x4330ec)\r\n|       `-> 0x0043310c      8fc40018       lw a0, 0x18(fp)\r\n|           0x00433110      8f828484       lw v0, -sym.x11setauth(gp)  ; [0x471804:4]=0x436c08 sym.x11setauth\r\n|           0x00433114      0040c825       move t9, v0\r\n|           0x00433118      04110ebb       bal sym.x11setauth\r\n|           0x0043311c      00000000       nop\r\n|           0x00433120      8fdc0010       lw gp, 0x10(fp)\r\n|           0x00433124      8fc40018       lw a0, 0x18(fp)\r\n|           0x00433128      8f828488       lw v0, -sym.svr_agentset(gp) ; [0x471808:4]=0x434b00 sym.svr_agentset\r\n|           0x0043312c      0040c825       move t9, v0\r\n|           0x00433130      04110673       bal sym.svr_agentset\r\n|           0x00433134      00000000       nop\r\n|           0x00433138      8fdc0010       lw gp, 0x10(fp)\r\n|           0x0043313c      8f828480       lw v0, -sym.get_user_shell(gp) ; [0x471800:4]=0x412ec8 sym.get_user_shell\r\n|           0x00433140      0040c825       move t9, v0\r\n|           0x00433144      0320f809       jalr t9\r\n|           0x00433148      00000000       nop\r\n|           0x0043314c      8fdc0010       lw gp, 0x10(fp)\r\n|           0x00433150      00402025       move a0, v0\r\n|           0x00433154      8f8282b4       lw v0, -sym.m_strdup(gp)    ; [0x471634:4]=0x4060e0 sym.m_strdup\r\n|           0x00433158      0040c825       move t9, v0\r\n|           0x0043315c      0320f809       jalr t9\r\n|           0x00433160      00000000       nop\r\n|           0x00433164      8fdc0010       lw gp, 0x10(fp)\r\n|           0x00433168      afc2001c       sw v0, 0x1c(fp)\r\n|           0x0043316c      8fc20018       lw v0, 0x18(fp)\r\n|           0x00433170      8c430000       lw v1, (v0)\r\n|           0x00433174      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\r\n|           0x00433178      8c420014       lw v0, 0x14(v0)\r\n|           0x0043317c      8fc6001c       lw a2, 0x1c(fp)\r\n|           0x00433180      00402825       move a1, v0\r\n|           0x00433184      00602025       move a0, v1\r\n|           0x00433188      8f82848c       lw v0, -sym.run_shell_command(gp) ; [0x47180c:4]=0x4058b0 sym.run_shell_command\r\n|           0x0043318c      0040c825       move t9, v0\r\n|           0x00433190      0320f809       jalr t9\r\n|           0x00433194      00000000       nop\r\n|           0x00433198      8fdc0010       lw gp, 0x10(fp)\r\n|           0x0043319c      3c020046       lui v0, 0x46\r\n|           0x004331a0      2444baec       addiu a0, v0, -0x4514       ; 0x45baec ; \"Child failed\" ; str.Child_failed\r\n|           0x004331a4      8f828044       lw v0, -sym.dropbear_exit(gp) ; [0x4713c4:4]=0x404fa0 sym.dropbear_exit\r\n|           0x004331a8      0040c825       move t9, v0\r\n|           0x004331ac      0320f809       jalr t9\r\n\\           0x004331b0      00000000       nop\r\n```\r\n\r\nThe analysis output:\r\n```\r\n[0x00432da8]> afi\r\n#\r\noffset: 0x00432da8\r\nname: sym.execchild\r\nsize: 1036\r\nrealsz: 1036\r\nstackframe: 224\r\ncall-convention: n32\r\ncyclomatic-cost : 0\r\ncyclomatic-complexity: 12\r\nbits: 32\r\ntype: sym [NEW]\r\nnum-bbs: 21\r\nedges: 31\r\nend-bbs: 1\r\ncall-refs: 0x00432ef4 J 0x00432ef4 J 0x00432e9c J 0x00432e9c J 0x00432eb4 J 0x00432eb4 J 0x00432f34 J 0x00432f34 J 0x00432f34 J 0x00432f34 J 0x004332ec C 0x004332ec C 0x004332ec C 0x004332ec C 0x004332ec C 0x004332ec C 0x004332ec C 0x004332ec C 0x004332ec C 0x004332ec C 0x0043300c J 0x0043300c J 0x004332ec C 0x004332ec C 0x0043303c J 0x0043303c J 0x004332ec C 0x004332ec C 0x0043306c J 0x0043306c J 0x004332ec C 0x004332ec C 0x0043309c J 0x0043309c J 0x004332ec C 0x004332ec C 0x004330cc J 0x004330cc J 0x004332ec C 0x004332ec C 0x0043310c J 0x0043310c J 0x00436c08 C 0x00436c08 C 0x00434b00 C 0x00434b00 C 0x004332ac J 0x004332ac J \r\ndata-refs: 0x00471718 0x00472318 0x00471598 0x00471718 0x0047157c 0x00471b68 0x00471b18 0x004715c4 0x00471ad0 0x004715c4 0x004715c4 0x00471b14 0x0045ba00 0x004713c4 0x004715c4 0x004719f8 0x0045ba1c 0x004713c4 0x00471b18 0x004715c4 0x0045ba30 0x004713c4 0x004715c4 0x0045ba54 0x004715c4 0x0045ba5c 0x004715c4 0x0045ba64 0x00471800 0x0045ba6c 0x0045ba74 0x0045ba84 0x0045ba8c 0x0045ba94 0x0045ba9c 0x0045baac 0x0045bab8 0x004715c4 0x00471b20 0x0045bad0 0x004713c4 0x00471804 0x00471808 0x00471800 0x00471634 0x004715c4 0x0047180c 0x0045baec 0x004713c4 0x00471b44 0x004713c8 0x00471750 0x00471750 0x00471750 0x00471750 0x00471750 0x00430784 0x00471a24 0x004719d0 \r\ncode-xrefs: 0x00432b74 C 0x00432e60 J 0x00432e94 J 0x00432e38 J 0x00432ed4 J 0x00432f14 J 0x00432fe4 J 0x00433014 J 0x00433044 J 0x00433074 J 0x004330a4 J 0x004330ec J 0x0042fd60 C \r\nin-degree: 13\r\nout-degree: 24\r\ndata-xrefs: 0x004325a0 \r\nlocals:5\r\nargs: 0\r\nvar int local_10h @ sp+0x10\r\nvar int local_20h @ sp+0x20\r\nvar int local_24h @ sp+0x24\r\nvar int local_b0h @ sp+0xb0\r\nvar int local_b4h @ sp+0xb4\r\ndiff: type: new\r\n```\r\n\r\n### Steps to reproduce the behavior \r\n[dropbear_mips.zip](https://github.com/radare/radare2/files/2287510/dropbear_mips.zip)\r\n- `aaaa`\r\n- `s sym.execchild`\r\n- `afi`\r\n- `pdf`\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQxMzEyOTc4Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I assume this is because you need emulation to get such thing, and afi shows qhat it has been found by doing static analysis\n\n> On 14 Aug 2018, at 17:31, JÃ¶rg Stucke <notifications@github.com> wrote:\n> \n> Hi, I'm still relatively new to working with radare2, so I don't know if this is a bug or maybe a misconfiguration on my side.\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tLinux Mint 19, x86_64\n> File format of the file you reverse (mandatory)\tELF\n> Architecture/bits of the file (mandatory)\tMIPS 32\n> r2 -v full output, not truncated (mandatory)\tradare2 2.8.0-git 18956 @ linux-x86-64 git.2.7.0-177-g8e2803c18 commit: 8e2803c build: 2018-07-30__12:34:32\n> Problem Description\n> \n> The call references of functions (\"call-refs\" in afi) don't seem to get resolved correctly for MIPS.\n> \n> Expected behavior\n> \n> I have compiled the binary for several architectures and for the other cases (x86, x86_64, ARMv7, PowerPC32) the method calls get identified correctly and can be traced to other methods and imports.\n> \n> Actual behavior\n> \n> The call references that can be seen in the disassembly do not show up in the function call-refs output.\n> \n> Example output for a function:\n> The calls from the disassembly (to sym.sign_key_free, sym.seedrandom, sym.imp.clearenv, etc.) do mostly not show up in the afi output (especially all calls to imported APIs). Also, the number of the \"call-refs\" seems to be off and the output seems to contain duplicates (every second call-ref is the same).\n> \n> The disassembly:\n> \n> [0x00432da8]> pdf\n> / (fcn) sym.execchild 1036\n> |   sym.execchild ();\n> |           ; var int local_10h @ sp+0x10\n> |           ; var int local_20h @ sp+0x20\n> |           ; var int local_24h @ sp+0x24\n> |           ; var int local_b0h @ sp+0xb0\n> |           ; var int local_b4h @ sp+0xb4\n> |           ; DATA XREF from sym.noptycommand (0x4325a0)\n> |           ; CALL XREF from sym.ptycommand (0x432b74)\n> |           0x00432da8 b    27bdffd8       addiu sp, sp, -0x28\n> |           0x00432dac      afbf0024       sw ra, 0x24(sp)\n> |           0x00432db0      afbe0020       sw fp, 0x20(sp)\n> |           0x00432db4      03a0f025       move fp, sp\n> |           0x00432db8      3c1c0048       lui gp, 0x48\n> |           0x00432dbc      279c9380       addiu gp, gp, -0x6c80\n> |           0x00432dc0      afbc0010       sw gp, 0x10(sp)\n> |           0x00432dc4      afc40028       sw a0, 0x28(fp)\n> |           0x00432dc8      8fc20028       lw v0, 0x28(fp)\n> |           0x00432dcc      afc20018       sw v0, 0x18(fp)\n> |           0x00432dd0      afc0001c       sw zero, 0x1c(fp)\n> |           0x00432dd4      8f828398       lw v0, -obj.svr_opts(gp)    ; [0x471718:4]=0x472298 obj.svr_opts\n> |           0x00432dd8      8c420080       lw v0, 0x80(v0)\n> |           0x00432ddc      00402025       move a0, v0\n> |           0x00432de0      8f828218       lw v0, -sym.sign_key_free\n> \n> (gp) ; [0x471598:4]=0x409dc4 sym.sign_key_free\n> |           0x00432de4      0040c825       move t9, v0\n> |           0x00432de8      0320f809       jalr t9\n> |           0x00432dec      00000000       nop\n> |           0x00432df0      8fdc0010       lw gp, 0x10(fp)\n> |           0x00432df4      8f828398       lw v0, -obj.svr_opts(gp)    ; [0x471718:4]=0x472298 obj.svr_opts\n> |           0x00432df8      ac400080       sw zero, 0x80(v0)\n> |           0x00432dfc      8f8281fc       lw v0, -sym.seedrandom(gp)  ; [0x47157c:4]=0x40c278 sym.seedrandom\n> |           0x00432e00      0040c825       move t9, v0\n> |           0x00432e04      0320f809       jalr t9\n> |           0x00432e08      00000000       nop\n> |           0x00432e0c      8fdc0010       lw gp, 0x10(fp)\n> |           0x00432e10      8f8287e8       lw v0, -sym.imp.clearenv(gp) ; [0x471b68:4]=0x458e40 sym.imp.clearenv\n> |           0x00432e14      0040c825       move t9, v0\n> |           0x00432e18      0320f809       jalr t9\n> |           0x00432e1c      00000000       nop\n> |           0x00432e20      8fdc0010       lw gp, 0x10(fp)\n> |           0x00432e24      8f828798       lw v0, -sym.imp.getuid(gp)  ; [0x471b18:4]=0x458f60 sym.imp.getuid\n> |           0x00432e28      0040c825       move t9, v0\n> |           0x00432e2c      0320f809       jalr t9\n> |           0x00432e30      00000000       nop\n> |           0x00432e34      8fdc0010       lw gp, 0x10(fp)\n> |       ,=< 0x00432e38      1440002e       bnez v0, 0x432ef4\n> |       |   0x00432e3c      00000000       nop\n> |       |   0x00432e40      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\n> |       |   0x00432e44      8c4200c0       lw v0, 0xc0(v0)\n> |       |   0x00432e48      00402025       move a0, v0\n> |       |   0x00432e4c      8f828750       lw v0, -sym.imp.setgid(gp)  ; [0x471ad0:4]=0x459080 sym.imp.setgid\n> |       |   0x00432e50      0040c825       move t9, v0\n> |       |   0x00432e54      0320f809       jalr t9\n> |       |   0x00432e58      00000000       nop\n> |       |   0x00432e5c      8fdc0010       lw gp, 0x10(fp)\n> |      ,==< 0x00432e60      0440000e       bltz v0, 0x432e9c\n> |      ||   0x00432e64      00000000       nop\n> |      ||   0x00432e68      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\n> |      ||   0x00432e6c      8c4300cc       lw v1, 0xcc(v0)\n> |      ||   0x00432e70      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\n> |      ||   0x00432e74      8c4200c0       lw v0, 0xc0(v0)\n> |      ||   0x00432e78      00402825       move a1, v0\n> |      ||   0x00432e7c      00602025       move a0, v1\n> |      ||   0x00432e80      8f828794       lw v0, -sym.imp.initgroups(gp) ; [0x471b14:4]=0x458f70 sym.imp.initgroups\n> |      ||   0x00432e84      0040c825       move t9, v0\n> |      ||   0x00432e88      0320f809       jalr t9\n> |      ||   0x00432e8c      00000000       nop\n> |      ||   0x00432e90      8fdc0010       lw gp, 0x10(fp)\n> |     ,===< 0x00432e94      04410007       bgez v0, 0x432eb4\n> |     |||   0x00432e98      00000000       nop\n> |     |||   ; CODE XREF from sym.execchild (0x432e60)\n> |     |`--> 0x00432e9c      3c020046       lui v0, 0x46\n> |     | |   0x00432ea0      2444ba00       addiu a0, v0, -0x4600       ; 0x45ba00 ; \"Error changing user group\" ; str.Error_changing_user_group\n> |     | |   0x00432ea4      8f828044       lw v0, -sym.dropbear_exit(gp) ; [0x4713c4:4]=0x404fa0 sym.dropbear_exit\n> |     | |   0x00432ea8      0040c825       move t9, v0\n> |     | |   0x00432eac      0320f809       jalr t9\n> |     | |   0x00432eb0      00000000       nop\n> |     | |   ; CODE XREF from sym.execchild (0x432e94)\n> |     `---> 0x00432eb4      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\n> |       |   0x00432eb8      8c4200bc       lw v0, 0xbc(v0)\n> |       |   0x00432ebc      00402025       move a0, v0\n> |       |   0x00432ec0      8f828678       lw v0, -sym.imp.setuid(gp)  ; [0x4719f8:4]=0x4593c0 sym.imp.setuid\n> |       |   0x00432ec4      0040c825       move t9, v0\n> |       |   0x00432ec8      0320f809       jalr t9\n> |       |   0x00432ecc      00000000       nop\n> |       |   0x00432ed0      8fdc0010       lw gp, 0x10(fp)\n> |      ,==< 0x00432ed4      04410017       bgez v0, 0x432f34\n> |      ||   0x00432ed8      00000000       nop\n> |      ||   0x00432edc      3c020046       lui v0, 0x46\n> |      ||   0x00432ee0      2444ba1c       addiu a0, v0, -0x45e4       ; 0x45ba1c ; \"Error changing user\" ; str.Error_changing_user\n> |      ||   0x00432ee4      8f828044       lw v0, -sym.dropbear_exit(gp) ; [0x4713c4:4]=0x404fa0 sym.dropbear_exit\n> |      ||   0x00432ee8      0040c825       move t9, v0\n> |      ||   0x00432eec      0320f809       jalr t9\n> |      ||   0x00432ef0      00000000       nop\n> |      ||   ; CODE XREF from sym.execchild (0x432e38)\n> |      |`-> 0x00432ef4      8f828798       lw v0, -sym.imp.getuid(gp)  ; [0x471b18:4]=0x458f60 sym.imp.getuid\n> |      |    0x00432ef8      0040c825       move t9, v0\n> |      |    0x00432efc      0320f809       jalr t9\n> |      |    0x00432f00      00000000       nop\n> |      |    0x00432f04      8fdc0010       lw gp, 0x10(fp)\n> |      |    0x00432f08      00401825       move v1, v0\n> |      |    0x00432f0c      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\n> |      |    0x00432f10      8c4200bc       lw v0, 0xbc(v0)\n> |      |,=< 0x00432f14      10620007       beq v1, v0, 0x432f34\n> |      ||   0x00432f18      00000000       nop\n> |      ||   0x00432f1c      3c020046       lui v0, 0x46\n> |      ||   0x00432f20      2444ba30       addiu a0, v0, -0x45d0       ; 0x45ba30 ; \"Couldn't\\tchange user as non-root\" ; str.Couldn_t__change_user_as_non_root\n> |      ||   0x00432f24      8f828044       lw v0, -sym.dropbear_exit(gp) ; [0x4713c4:4]=0x404fa0 sym.dropbear_exit\n> |      ||   0x00432f28      0040c825       move t9, v0\n> |      ||   0x00432f2c      0320f809       jalr t9\n> |      ||   0x00432f30      00000000       nop\n> |      ||   ; CODE XREFS from sym.execchild (0x432ed4, 0x432f14)\n> |      ``-> 0x00432f34      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\n> |           0x00432f38      8c4200cc       lw v0, 0xcc(v0)\n> |           0x00432f3c      00402825       move a1, v0\n> |           0x00432f40      3c020046       lui v0, 0x46\n> |           0x00432f44      2444ba54       addiu a0, v0, -0x45ac       ; 0x45ba54 ; \"USER\" ; str.USER\n> |           0x00432f48      0c10ccbb       jal sym.addnewvar\n> |           0x00432f4c      00000000       nop\n> |           0x00432f50      8fdc0010       lw gp, 0x10(fp)\n> |           0x00432f54      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\n> |           0x00432f58      8c4200cc       lw v0, 0xcc(v0)\n> |           0x00432f5c      00402825       move a1, v0\n> |           0x00432f60      3c020046       lui v0, 0x46\n> |           0x00432f64      2444ba5c       addiu a0, v0, -0x45a4       ; 0x45ba5c ; \"LOGNAME\" ; str.LOGNAME\n> |           0x00432f68      0c10ccbb       jal sym.addnewvar\n> |           0x00432f6c      00000000       nop\n> |           0x00432f70      8fdc0010       lw gp, 0x10(fp)\n> |           0x00432f74      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\n> |           0x00432f78      8c4200c4       lw v0, 0xc4(v0)\n> |           0x00432f7c      00402825       move a1, v0\n> |           0x00432f80      3c020046       lui v0, 0x46\n> |           0x00432f84      2444ba64       addiu a0, v0, -0x459c       ; 0x45ba64 ; \"HOME\" ; str.HOME\n> |           0x00432f88      0c10ccbb       jal sym.addnewvar\n> |           0x00432f8c      00000000       nop\n> |           0x00432f90      8fdc0010       lw gp, 0x10(fp)\n> |           0x00432f94      8f828480       lw v0, -sym.get_user_shell(gp) ; [0x471800:4]=0x412ec8 sym.get_user_shell\n> |           0x00432f98      0040c825       move t9, v0\n> |           0x00432f9c      0320f809       jalr t9\n> |           0x00432fa0      00000000       nop\n> |           0x00432fa4      8fdc0010       lw gp, 0x10(fp)\n> |           0x00432fa8      00402825       move a1, v0\n> |           0x00432fac      3c020046       lui v0, 0x46\n> |           0x00432fb0      2444ba6c       addiu a0, v0, -0x4594       ; 0x45ba6c ; \"SHELL\" ; str.SHELL\n> |           0x00432fb4      0c10ccbb       jal sym.addnewvar\n> |           0x00432fb8      00000000       nop\n> |           0x00432fbc      8fdc0010       lw gp, 0x10(fp)\n> |           0x00432fc0      3c020046       lui v0, 0x46\n> |           0x00432fc4      2445ba74       addiu a1, v0, -0x458c       ; 0x45ba74 ; \"/usr/bin:/bin\" ; str.usr_bin:_bin\n> |           0x00432fc8      3c020046       lui v0, 0x46\n> |           0x00432fcc      2444ba84       addiu a0, v0, -0x457c       ; 0x45ba84 ; \"PATH\" ; str.PATH\n> |           0x00432fd0      0c10ccbb       jal sym.addnewvar\n> |           0x00432fd4      00000000       nop\n> |           0x00432fd8      8fdc0010       lw gp, 0x10(fp)\n> |           0x00432fdc      8fc20018       lw v0, 0x18(fp)\n> |           0x00432fe0      8c420014       lw v0, 0x14(v0)\n> |       ,=< 0x00432fe4      10400009       beqz v0, 0x43300c\n> |       |   0x00432fe8      00000000       nop\n> |       |   0x00432fec      8fc20018       lw v0, 0x18(fp)\n> |       |   0x00432ff0      8c420014       lw v0, 0x14(v0)\n> |       |   0x00432ff4      00402825       move a1, v0\n> |       |   0x00432ff8      3c020046       lui v0, 0x46\n> |       |   0x00432ffc      2444ba8c       addiu a0, v0, -0x4574       ; 0x45ba8c ; \"TERM\" ; str.TERM\n> |       |   0x00433000      0c10ccbb       jal sym.addnewvar\n> |       |   0x00433004      00000000       nop\n> |       |   0x00433008      8fdc0010       lw gp, 0x10(fp)\n> |       |   ; CODE XREF from sym.execchild (0x432fe4)\n> |       `-> 0x0043300c      8fc20018       lw v0, 0x18(fp)\n> |           0x00433010      8c420010       lw v0, 0x10(v0)\n> |       ,=< 0x00433014      10400009       beqz v0, 0x43303c\n> |       |   0x00433018      00000000       nop\n> |       |   0x0043301c      8fc20018       lw v0, 0x18(fp)\n> |       |   0x00433020      8c420010       lw v0, 0x10(v0)\n> |       |   0x00433024      00402825       move a1, v0\n> |       |   0x00433028      3c020046       lui v0, 0x46\n> |       |   0x0043302c      2444ba94       addiu a0, v0, -0x456c       ; 0x45ba94 ; \"SSH_TTY\" ; str.SSH_TTY\n> |       |   0x00433030      0c10ccbb       jal sym.addnewvar\n> |       |   0x00433034      00000000       nop\n> |       |   0x00433038      8fdc0010       lw gp, 0x10(fp)\n> |       |   ; CODE XREF from sym.execchild (0x433014)\n> |       `-> 0x0043303c      8fc20018       lw v0, 0x18(fp)\n> |           0x00433040      8c420028       lw v0, 0x28(v0)\n> |       ,=< 0x00433044      10400009       beqz v0, 0x43306c\n> |       |   0x00433048      00000000       nop\n> |       |   0x0043304c      8fc20018       lw v0, 0x18(fp)\n> |       |   0x00433050      8c420028       lw v0, 0x28(v0)\n> |       |   0x00433054      00402825       move a1, v0\n> |       |   0x00433058      3c020046       lui v0, 0x46\n> |       |   0x0043305c      2444ba9c       addiu a0, v0, -0x4564       ; 0x45ba9c ; \"SSH_CONNECTION\" ; str.SSH_CONNECTION\n> |       |   0x00433060      0c10ccbb       jal sym.addnewvar\n> |       |   0x00433064      00000000       nop\n> |       |   0x00433068      8fdc0010       lw gp, 0x10(fp)\n> |       |   ; CODE XREF from sym.execchild (0x433044)\n> |       `-> 0x0043306c      8fc20018       lw v0, 0x18(fp)\n> |           0x00433070      8c42002c       lw v0, 0x2c(v0)\n> |       ,=< 0x00433074      10400009       beqz v0, 0x43309c\n> |       |   0x00433078      00000000       nop\n> |       |   0x0043307c      8fc20018       lw v0, 0x18(fp)\n> |       |   0x00433080      8c42002c       lw v0, 0x2c(v0)\n> |       |   0x00433084      00402825       move a1, v0\n> |       |   0x00433088      3c020046       lui v0, 0x46\n> |       |   0x0043308c      2444baac       addiu a0, v0, -0x4554       ; 0x45baac ; \"SSH_CLIENT\" ; str.SSH_CLIENT\n> |       |   0x00433090      0c10ccbb       jal sym.addnewvar\n> |       |   0x00433094      00000000       nop\n> |       |   0x00433098      8fdc0010       lw gp, 0x10(fp)\n> |       |   ; CODE XREF from sym.execchild (0x433074)\n> |       `-> 0x0043309c      8fc20018       lw v0, 0x18(fp)\n> |           0x004330a0      8c420054       lw v0, 0x54(v0)\n> |       ,=< 0x004330a4      10400009       beqz v0, 0x4330cc\n> |       |   0x004330a8      00000000       nop\n> |       |   0x004330ac      8fc20018       lw v0, 0x18(fp)\n> |       |   0x004330b0      8c420054       lw v0, 0x54(v0)\n> |       |   0x004330b4      00402825       move a1, v0\n> |       |   0x004330b8      3c020046       lui v0, 0x46\n> |       |   0x004330bc      2444bab8       addiu a0, v0, -0x4548       ; 0x45bab8 ; \"SSH_ORIGINAL_COMMAND\" ; str.SSH_ORIGINAL_COMMAND\n> |       |   0x004330c0      0c10ccbb       jal sym.addnewvar\n> |       |   0x004330c4      00000000       nop\n> |       |   0x004330c8      8fdc0010       lw gp, 0x10(fp)\n> |       |   ; CODE XREF from sym.execchild (0x4330a4)\n> |       `-> 0x004330cc      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\n> |           0x004330d0      8c4200c4       lw v0, 0xc4(v0)\n> |           0x004330d4      00402025       move a0, v0\n> |           0x004330d8      8f8287a0       lw v0, -sym.imp.chdir(gp)   ; [0x471b20:4]=0x458f40 sym.imp.chdir\n> |           0x004330dc      0040c825       move t9, v0\n> |           0x004330e0      0320f809       jalr t9\n> |           0x004330e4      00000000       nop\n> |           0x004330e8      8fdc0010       lw gp, 0x10(fp)\n> |       ,=< 0x004330ec      04410007       bgez v0, 0x43310c\n> |       |   0x004330f0      00000000       nop\n> |       |   0x004330f4      3c020046       lui v0, 0x46\n> |       |   0x004330f8      2444bad0       addiu a0, v0, -0x4530       ; 0x45bad0 ; \"Error changing directory\" ; str.Error_changing_directory\n> |       |   0x004330fc      8f828044       lw v0, -sym.dropbear_exit(gp) ; [0x4713c4:4]=0x404fa0 sym.dropbear_exit\n> |       |   0x00433100      0040c825       move t9, v0\n> |       |   0x00433104      0320f809       jalr t9\n> |       |   0x00433108      00000000       nop\n> |       |   ; CODE XREF from sym.execchild (0x4330ec)\n> |       `-> 0x0043310c      8fc40018       lw a0, 0x18(fp)\n> |           0x00433110      8f828484       lw v0, -sym.x11setauth(gp)  ; [0x471804:4]=0x436c08 sym.x11setauth\n> |           0x00433114      0040c825       move t9, v0\n> |           0x00433118      04110ebb       bal sym.x11setauth\n> |           0x0043311c      00000000       nop\n> |           0x00433120      8fdc0010       lw gp, 0x10(fp)\n> |           0x00433124      8fc40018       lw a0, 0x18(fp)\n> |           0x00433128      8f828488       lw v0, -sym.svr_agentset(gp) ; [0x471808:4]=0x434b00 sym.svr_agentset\n> |           0x0043312c      0040c825       move t9, v0\n> |           0x00433130      04110673       bal sym.svr_agentset\n> |           0x00433134      00000000       nop\n> |           0x00433138      8fdc0010       lw gp, 0x10(fp)\n> |           0x0043313c      8f828480       lw v0, -sym.get_user_shell(gp) ; [0x471800:4]=0x412ec8 sym.get_user_shell\n> |           0x00433140      0040c825       move t9, v0\n> |           0x00433144      0320f809       jalr t9\n> |           0x00433148      00000000       nop\n> |           0x0043314c      8fdc0010       lw gp, 0x10(fp)\n> |           0x00433150      00402025       move a0, v0\n> |           0x00433154      8f8282b4       lw v0, -sym.m_strdup(gp)    ; [0x471634:4]=0x4060e0 sym.m_strdup\n> |           0x00433158      0040c825       move t9, v0\n> |           0x0043315c      0320f809       jalr t9\n> |           0x00433160      00000000       nop\n> |           0x00433164      8fdc0010       lw gp, 0x10(fp)\n> |           0x00433168      afc2001c       sw v0, 0x1c(fp)\n> |           0x0043316c      8fc20018       lw v0, 0x18(fp)\n> |           0x00433170      8c430000       lw v1, (v0)\n> |           0x00433174      8f828244       lw v0, -obj.ses(gp)         ; [0x4715c4:4]=0x472160 obj.ses\n> |           0x00433178      8c420014       lw v0, 0x14(v0)\n> |           0x0043317c      8fc6001c       lw a2, 0x1c(fp)\n> |           0x00433180      00402825       move a1, v0\n> |           0x00433184      00602025       move a0, v1\n> |           0x00433188      8f82848c       lw v0, -sym.run_shell_command(gp) ; [0x47180c:4]=0x4058b0 sym.run_shell_command\n> |           0x0043318c      0040c825       move t9, v0\n> |           0x00433190      0320f809       jalr t9\n> |           0x00433194      00000000       nop\n> |           0x00433198      8fdc0010       lw gp, 0x10(fp)\n> |           0x0043319c      3c020046       lui v0, 0x46\n> |           0x004331a0      2444baec       addiu a0, v0, -0x4514       ; 0x45baec ; \"Child failed\" ; str.Child_failed\n> |           0x004331a4      8f828044       lw v0, -sym.dropbear_exit(gp) ; [0x4713c4:4]=0x404fa0 sym.dropbear_exit\n> |           0x004331a8      0040c825       move t9, v0\n> |           0x004331ac      0320f809       jalr t9\n> \\           0x004331b0      00000000       nop\n> The analysis output:\n> \n> [0x00432da8]> afi\n> #\n> offset: 0x00432da8\n> name: sym.execchild\n> size: 1036\n> realsz: 1036\n> stackframe: 224\n> call-convention: n32\n> cyclomatic-cost : 0\n> cyclomatic-complexity: 12\n> bits: 32\n> type: sym [NEW]\n> num-bbs: 21\n> edges: 31\n> end-bbs: 1\n> call-refs: 0x00432ef4 J 0x00432ef4 J 0x00432e9c J 0x00432e9c J 0x00432eb4 J 0x00432eb4 J 0x00432f34 J 0x00432f34 J 0x00432f34 J 0x00432f34 J 0x004332ec C 0x004332ec C 0x004332ec C 0x004332ec C 0x004332ec C 0x004332ec C 0x004332ec C 0x004332ec C 0x004332ec C 0x004332ec C 0x0043300c J 0x0043300c J 0x004332ec C 0x004332ec C 0x0043303c J 0x0043303c J 0x004332ec C 0x004332ec C 0x0043306c J 0x0043306c J 0x004332ec C 0x004332ec C 0x0043309c J 0x0043309c J 0x004332ec C 0x004332ec C 0x004330cc J 0x004330cc J 0x004332ec C 0x004332ec C 0x0043310c J 0x0043310c J 0x00436c08 C 0x00436c08 C 0x00434b00 C 0x00434b00 C 0x004332ac J 0x004332ac J \n> data-refs: 0x00471718 0x00472318 0x00471598 0x00471718 0x0047157c 0x00471b68 0x00471b18 0x004715c4 0x00471ad0 0x004715c4 0x004715c4 0x00471b14 0x0045ba00 0x004713c4 0x004715c4 0x004719f8 0x0045ba1c 0x004713c4 0x00471b18 0x004715c4 0x0045ba30 0x004713c4 0x004715c4 0x0045ba54 0x004715c4 0x0045ba5c 0x004715c4 0x0045ba64 0x00471800 0x0045ba6c 0x0045ba74 0x0045ba84 0x0045ba8c 0x0045ba94 0x0045ba9c 0x0045baac 0x0045bab8 0x004715c4 0x00471b20 0x0045bad0 0x004713c4 0x00471804 0x00471808 0x00471800 0x00471634 0x004715c4 0x0047180c 0x0045baec 0x004713c4 0x00471b44 0x004713c8 0x00471750 0x00471750 0x00471750 0x00471750 0x00471750 0x00430784 0x00471a24 0x004719d0 \n> code-xrefs: 0x00432b74 C 0x00432e60 J 0x00432e94 J 0x00432e38 J 0x00432ed4 J 0x00432f14 J 0x00432fe4 J 0x00433014 J 0x00433044 J 0x00433074 J 0x004330a4 J 0x004330ec J 0x0042fd60 C \n> in-degree: 13\n> out-degree: 24\n> data-xrefs: 0x004325a0 \n> locals:5\n> args: 0\n> var int local_10h @ sp+0x10\n> var int local_20h @ sp+0x20\n> var int local_24h @ sp+0x24\n> var int local_b0h @ sp+0xb0\n> var int local_b4h @ sp+0xb4\n> diff: type: new\n> Steps to reproduce the behavior\n> \n> dropbear_mips.zip\n> \n> aaaa\n> s sym.execchild\n> afi\n> pdf\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-08-15T08:28:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11089#issuecomment-413129782","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxMzEzMDM5Mw==","author":{"login":"jstucke"},"authorAssociation":"NONE","body":"To elaborate a bit:\r\n\r\nWhen looking at the function \"sym.execchild\" again, there is a call at offset 0x00432e4c (4402764) to sym.imp.setgid. The `pdfj` data shows the following:\r\n\r\n```\r\n{\r\n  \"offset\": 4402764,\r\n  \"ptr\": 4659920,\r\n  \"val\": 0,\r\n  \"esil\": \"30896,gp,-,[4],v0,=\",\r\n  \"refptr\": true,\r\n  \"fcn_addr\": 4402600,\r\n  \"fcn_last\": 4403632,\r\n  \"size\": 4,\r\n  \"opcode\": \"lw v0, -0x78b0(gp)\",\r\n  \"disasm\": \"lw v0, -0x78b0(gp)\",\r\n  \"bytes\": \"8f828750\",\r\n  \"family\": \"cpu\",\r\n  \"type\": \"load\",\r\n  \"type_num\": 32,\r\n  \"type2_num\": 0\r\n}\r\n```\r\nThe call target is shown to have the address 0x471ad0 (4659920) = gp - 0x78b0 (with `e anal.gp` = 0x479380 (4690816))\r\nThat address contains the GOT with the correct address 0x459080 of the function:\r\n```\r\n[0x00471ad0 87% 305 dropbear_mips-linux-gnu_gcc_-O0]> pd $r @ obj._GLOBAL_OFFSET_TABLE+1856 # 0x471ad0\r\n            ; DATA XREF from sym.execchild (0x432e4c)                                                    \r\n            0x00471ad0      00459080       invalid   \r\n```\r\n\r\nWhy doesn't it show up in the call-ref data of `afij` and is there a way to correct this?","createdAt":"2018-08-15T08:31:13Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11089#issuecomment-413130393","viewerDidAuthor":false}],"number":11089,"title":"Problems with call-refs in MIPS32"},{"body":"Please decode strings from some simple obfuscation:\r\n![string1](https://user-images.githubusercontent.com/6576335/44095047-134280b8-9fd8-11e8-98c0-ad19ff6c95cf.png)\r\n\r\nIt might be already implemented, but it would be nice to have the string in the strings list ;-)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQxMjg4NTM0Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Use esil, anal.strings and theres another one that statically analyzes stack movements to find strings constructed like this but i dont remember ir right now.\n\nand no, you wont see this in the strings list, because the string list you get is from RBin, aka by parsing the binary headrs, not by emulating the program, youâ€™ll find a flag\n\n> On 14 Aug 2018, at 15:39, MariasStory <notifications@github.com> wrote:\n> \n> Please decode strings from some simple obfuscation:\n>  <https://user-images.githubusercontent.com/6576335/44095047-134280b8-9fd8-11e8-98c0-ad19ff6c95cf.png>\n> It might be already implemented, but it would be nice to have the string in the strings list ;-)\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/11085>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lsdf6jgcfgvRpmpbTXhwOCTRvFrmks5uQtMggaJpZM4V8dID>.\n> \n\n","createdAt":"2018-08-14T14:10:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-412885342","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxMzE0ODExMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"It makes sense though to create something like `emu.str.*` namespace where to put the found strings after emulation.","createdAt":"2018-08-15T09:46:40Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-413148111","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxMzE1NDg1MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Flagspace?\n\n> On 15 Aug 2018, at 11:46, Anton Kochkov <notifications@github.com> wrote:\n> \n> It make sense though to create something like emu.str.* namespace where to put the found strings after emulation.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-08-15T10:17:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-413154850","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxMzIyMzk4Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Yes, flagspace, where to push the flags for strings found during emulation, lets say during `aaaa` command. It might be very imprecise and error-prone, but certainly useful in some cases.","createdAt":"2018-08-15T14:56:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-413223986","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxMzIzMjY5OQ==","author":{"login":"malware-kitten"},"authorAssociation":"CONTRIBUTOR","body":"Emulation would be a great way to solve this issue, especially if the strings are pushed out of order.  \r\nIE:\r\n```\r\nindex[0] = 'h'\r\nindex[4] = 'o'\r\nindex[1] = 'e'\r\nindex[2] = 'l'\r\nindex[3] = 'l'\r\n```\r\n\r\nThere is an existing project on github that uses unicorn and yara to do a variant of this -> https://gist.github.com/williballenthin/ea1fef4984ea31ae92e333f04e9d0110\r\n\r\nI've posted a blog talking about this, and posted a cutter script to rebuild these.  It could be easily repurposed work commandline with radare2.  (https://securitykitten.github.io/2018/07/06/unstacking-strings-with-cutter-and-radare2.html) and the script is here -> (https://github.com/securitykitten/cutter_scripts/blob/master/scripts/cutter_stackstrings.py) \r\n\r\nI would like to see the emulation of this solved, I took a couple unsuccessful stabs at the problem, but I think that most of it is just my ignorance on r2's emulation.\r\n\r\nAs a side note (probably more of a version 2), there are going to be more pattens to look for, take for example the following rust application, the stack string is 'Moon'\r\n\r\n![](https://securitykitten.github.io/images/cutter05.png)","createdAt":"2018-08-15T15:23:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-413232699","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxMzI1MDIyNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Anal.strings do that but its not imprecise\n\n> On 15 Aug 2018, at 16:57, Anton Kochkov <notifications@github.com> wrote:\n> \n> Yes, flagspace, where to push the flags for strings found during emulation, lets say during aaaa command. It might be very imprecise and error-prone, but certainly useful in some cases.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-08-15T16:18:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-413250227","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxMzU1Njc5MA==","author":{"login":"MariasStory"},"authorAssociation":"NONE","body":"Someone wants to try his skills on the this shellcode?\r\n[download.zip](https://github.com/radare/radare2/files/2293909/download.zip)\r\nYou know the pass ;-)\r\nI am sure that you can find out where it comes from.\r\n\r\nWould be nice to see your results. This one is related to the first screenshot that I posted.","createdAt":"2018-08-16T14:04:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-413556790","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyNDc0NDk3Nw==","author":{"login":"MariasStory"},"authorAssociation":"NONE","body":"Hi team. Did someone check the shellcode? If so, did you get the strings extracted?\r\nThere are some more strings that also can be extracted but not seen in the disassembly.","createdAt":"2018-09-26T14:50:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-424744977","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyNTI1OTExMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"if you seek at the begining of the movs, enable emu.str=1 and do aepc $$ and aeim in there, the string will appear while you step in.. but itsâ€™ not automatically resolved with anal.strings because it doesnt assume the strings are constructred in the stack. so the issue is not solved, but you can write a script to automate that solution\n\n> On 26 Sep 2018, at 07:52, MariasStory <notifications@github.com> wrote:\n> \n> Hi team. Did someone check the shellcode? If so, did you get the strings extracted?\n> There are some more strings that also can be extracted but not seen in the disassembly.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/11085#issuecomment-424744977>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lqIRi95kaEA61tBj0taeU98UN5JIks5ue5TIgaJpZM4V8dID>.\n> \n\n","createdAt":"2018-09-27T22:10:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-425259111","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyNTI1OTU3NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"<img width=\"1440\" alt=\"screen shot 2018-09-27 at 15 12 40\" src=\"https://user-images.githubusercontent.com/917142/46177481-cc4fc500-c267-11e8-9e82-baf461f8d39b.png\">\r\n","createdAt":"2018-09-27T22:12:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-425259574","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzNTc4NTAyOA==","author":{"login":"MariasStory"},"authorAssociation":"NONE","body":"Hi @radare, Thanks for your interest in this topic. I have another example where an executable is reconstructed in memory using the \"mov\" obfuscation. It would be nice if r2 would extract the stuff without execution.\r\nIs it possible/planned?","createdAt":"2018-11-05T08:01:42Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-435785028","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzNTg2OTU4Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Can you share it?\n\n> On 5 Nov 2018, at 09:01, MariasStory <notifications@github.com> wrote:\n> \n> Hi @radare, Thanks for your interest in this topic. I have another example where an executable is reconstructed in memo using the \"mov\" obfuscation. It would be nice if r2 would extract the stuff without execution.\n> It is possible/planned?\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-11-05T13:15:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-435869587","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzNzgwODg2Mw==","author":{"login":"MariasStory"},"authorAssociation":"NONE","body":"Sure.\r\nHere you go.\r\n[shellDll_movJMP.zip](https://github.com/radare/radare2/files/2571268/shellDll_movJMP.zip)\r\n","createdAt":"2018-11-12T09:15:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-437808863","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzODk4OTU4NA==","author":{"login":"MariasStory"},"authorAssociation":"NONE","body":"Hi, did someone improve such strings detection/extraction?\r\nI have more samples to play with ;-)","createdAt":"2019-10-07T12:37:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-538989584","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0MTAwNjQ5OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can you give us some pointers about what you want exactly?","createdAt":"2019-10-11T10:17:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-541006498","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0MTI0MjI5Nw==","author":{"login":"MariasStory"},"authorAssociation":"NONE","body":"Hi Radare,\r\n\r\nIt would be nice to have something similar to the flare-floss - \"FireEye Labs Obfuscated String Solver\".\r\nInstead the strings could appear in r2 analysis and in extracted strings list (like zzz) of radare2.\r\nI know floss can export .r2 file and it kind of works.\r\nI think that this functionality is better to be implemented in r2 and used in the native environment.\r\nAlthough, if you think that it is not worth the effort, you can close the issue and I will use the floss.\r\n\r\nThanks,\r\nTolik","createdAt":"2019-10-11T22:16:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-541242297","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0MTI2Mzg0Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Yes i think this feature makes sense to have it in r2 directly. Using anal.strings and aae it may resolve the strings referenced via esil. So i guess that enabling this and io.cache will be enough to get all the strings with f str.<tab>\n\nWhich command/action do u think it makes more sense to do this?\n\n> On 12 Oct 2019, at 00:16, forensicator <notifications@github.com> wrote:\n> \n> ï»¿\n> Hi Radare,\n> \n> It would be nice to have something similar to the flare-floss - \"FireEye Labs Obfuscated String Solver\".\n> Instead the strings could appear in r2 analysis and in extracted strings list (like zzz) of radare2.\n> I know floss can export .r2 file and it kind of works.\n> I think that this functionality is better to be implemented in r2 and used in the native environment.\n> Although, if you think that it is not worth the effort, you can close the issue and I will use the floss.\n> \n> Thanks,\n> Tolik\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2019-10-12T00:31:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-541263846","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0MTI2MzkxMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"We can also just extract strings out of the immediates in the instructions, but sometimes this is scrambled or xored before written into stack\n\n> On 12 Oct 2019, at 00:16, forensicator <notifications@github.com> wrote:\n> \n> ï»¿\n> Hi Radare,\n> \n> It would be nice to have something similar to the flare-floss - \"FireEye Labs Obfuscated String Solver\".\n> Instead the strings could appear in r2 analysis and in extracted strings list (like zzz) of radare2.\n> I know floss can export .r2 file and it kind of works.\n> I think that this functionality is better to be implemented in r2 and used in the native environment.\n> Although, if you think that it is not worth the effort, you can close the issue and I will use the floss.\n> \n> Thanks,\n> Tolik\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2019-10-12T00:32:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-541263910","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0MTQwMjk2NA==","author":{"login":"MariasStory"},"authorAssociation":"NONE","body":"Thanks, for following this idea.\r\nI suggest to have approach similar to z vs zz vs zzz.\r\nI mean that there should be option to have all strings logged/shown in r2 interface (in comments) or less noisy options for only stack related strings or strings that are kind of sorted out.\r\nFrom forensic point of view, every string that was reconstructed/used/manipulated in binary can give a hint for finding the evidence (let's say in memory).\r\nPossibly, I would emulate the (all) code with esil (maybe with some additional option) and get all possible strings that are generated/modified in this binary.\r\nI know that you implemented part of it in the visible field. Maybe it can be extended to have it as a part of complete analysis results?\r\nAlso, it would be nice to have it in the way that is easy to use. Let's say you get additional results if you use more that 3z.","createdAt":"2019-10-13T09:37:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11085#issuecomment-541402964","viewerDidAuthor":false}],"number":11085,"title":"Decode additional strings."},{"body":"# Binary\r\n[crackme0x03.zip](https://github.com/radare/radare2/files/2273836/crackme0x03.zip)\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | ArchLinux / ARM 64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/32.\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.9.0-git 19018 @ linux-x86-64 git.2.8.0-14-gb8de51270 commit: b8de51270320ee35a281495a41009c89b2d64642 build: 2018-08-09__10:12:00\r\n\r\nHey. I'm trying to debug the attached binary. Running the following steps in normal mode, yields expected and correct values:\r\n\r\n```\r\n$ r2 -Ad crackme0x03\r\n[0x12345678] db 0x0804846e\r\n[0x12345678] dc\r\nIOLI Crackme Level 0x03\r\nPassword: 1234\r\nhit breakpoint at: 0804846e\r\n[0x12345678] dr eax\r\n0x000004d2\r\n```\r\n\r\nRunning the same binary with the same breakpoints but in Visual Mode or in a rarun2 sequence, yields completely different results:\r\n\r\n```\r\n$ r2 -Ad crackme0x03\r\n[0x12345678] db 0x080484df # Just a bit before\r\n[0x12345678] db 0x0804846e\r\n[0x12345678] dc\r\nIOLI Crackme Level 0x03\r\nPassword: 1234\r\nhit breakpoint at: 80484df\r\n\r\n[Enter Visual Mode. Either run F9 or step until reaching the sym.test (its only around 6 instructions away)]\r\n\r\n[0x0804846e] dr eax \r\n0xffd5dd58 # Number varies\r\n```\r\n\r\nAm I doing something really funky wrong here?\r\n\r\n### Steps to reproduce the behavior \r\nI've made a small R2R PR to reproduce the steps: https://github.com/Obaied/radare2-regressions/tree/bug_bin_debugging","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ1MTEyNTUwMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"using -Ad is not recommended and known to be buggy","createdAt":"2019-01-03T12:06:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11001#issuecomment-451125503","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MTEyNjUwNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cant reproduce any  issue without the -A, and this  -A thing is known  to introduce problems in  many situations. pls  @Maijin disable  the commands that are breaking the debugger in aaa. there are other issues related to the same bug ","createdAt":"2019-01-03T12:11:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11001#issuecomment-451126507","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MTEyNzYyNg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Why disabling, it was working before your NSO fix. I can revert this one, but again, it will break the NSO support (which very few people use).","createdAt":"2019-01-03T12:17:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11001#issuecomment-451127626","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MTEzMzM1Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"because there's no sense in switching the debugger backend to ESIL when you are debugging with a NATIVE backend. the regstate is transferred and it results in wrong behaviour in the debuggee side. it's simply  wrong\n\n> On 3 Jan 2019, at 13:17, Maijin <notifications@github.com> wrote:\n> \n> Why disabling, it was working before your NSO fix. I can revert this one, but again, it will break the NSO support (which very few people use).\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/11001#issuecomment-451127626>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lmS-fdDHK4zl5rivRjj9l6AgLdyAks5u_fTcgaJpZM4V1de_>.\n> \n\n","createdAt":"2019-01-03T12:46:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/11001#issuecomment-451133353","viewerDidAuthor":false}],"number":11001,"title":"Visual Mode debugging is yielding different results than expected"},{"body":"./bins/elf/libverifyPass.so from radare2-regressions is ARM ELF32 binary, but r2 shows that \"void *\" size is 2 bytes for all functions.\r\n\r\nThis happens because libverifyPass have ARM Thumb function, and r_bin_elf_get_bits (from libr/bin/format/elf/elf.c) returns 16 bits. This value later is used for load typeinfo from \"fcnsign/types-%d.sdb\". And even if later somewhere r_asm_set_bits will be called with new bits value, architecture dependend types size would not be updated.\r\n\r\nI can help with fix, but plz answer these questions:\r\n\r\n1) Is it will be sufficient to update some types size from r_asm_set_bits?\r\n2) Is it normal that function, written in thumb instrcution set have 16 bit pointer? As far as I know the tumb instruction set supports 32bit pointers.\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Debian\r\n| File format of the file you reverse (mandatory)      |  ELF\r\n| Architecture/bits of the file (mandatory)            | ARM 32-bit\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.9.0-git 19224 @ linux-x86-64 git.2.7.0-315-gb60a25b91 commit: b60a25b914d02fa124a538c9ccdf7ec95522e711 build: 2018-08-08__16:03:47\r\n\r\n### Expected behavior\r\ntype.void *.size==32\r\n\r\n### Actual behavior\r\ntype.void *.size==16\r\n\r\n### Steps to reproduce the behavior \r\n```\r\nr2 ./bins/elf/libverifyPass.so\r\n\r\n[0x00000f50]> tk~void~size\r\ntype.void *.size=16\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQxMTQzNzg3NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Oh, this one is difficult, because we treat types per binary/session. Will\nthink how to solve this. Most likely will require massive refactoring.\n\nOn Wed, Aug 8, 2018, 10:02 PM Andry <notifications@github.com> wrote:\n\n> ./bins/elf/libverifyPass.so from radare2-regressions is ARM ELF32 binary,\n> but r2 shows that \"void *\" size is 2 bytes for all functions.\n>\n> This happens because libverifyPass have ARM Thumb function, and\n> r_bin_elf_get_bits (from libr/bin/format/elf/elf.c) returns 16 bits. This\n> value later is used for load typeinfo from \"fcnsign/types-%d.sdb\". And even\n> if later somewhere r_asm_set_bits will be called with new bits value,\n> architecture dependend types size would not be updated.\n>\n> I can help with fix, but plz answer these questions:\n>\n>    1. Is it will be sufficient to update some types size from\n>    r_asm_set_bits?\n>    2. Is it normal that function, written in thumb instrcution set have\n>    16 bit pointer? As far as I know the tumb instruction set supports 32bit\n>    pointers.\n>\n> Work environment\n> Questions Answers\n> OS/arch/bits (mandatory) Debian\n> File format of the file you reverse (mandatory) ELF\n> Architecture/bits of the file (mandatory) ARM 32-bit\n> r2 -v full output, *not truncated* (mandatory) radare2 2.9.0-git 19224 @\n> linux-x86-64 git.2.7.0-315-gb60a25b91 commit: b60a25b\n> <https://github.com/radare/radare2/commit/b60a25b914d02fa124a538c9ccdf7ec95522e711>\n> build: 2018-08-08__16:03:47 Expected behavior\n>\n> type.void *.size==32\n> Actual behavior\n>\n> type.void *.size==16\n> Steps to reproduce the behavior\n>\n> r2 ./bins/elf/libverifyPass.so\n>\n> [0x00000f50]> tk~void~size\n> type.void *.size=16\n>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/radare/radare2/issues/10996>, or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAMZ_aiHSPhFfV-fUYrwXbZMHoa1e-A9ks5uOu9jgaJpZM4Vz_uw>\n> .\n>\n","createdAt":"2018-08-08T15:02:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10996#issuecomment-411437875","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxMTcwMTQwMQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"https://github.com/radare/radare2/blob/master/libr/core/cconfig.c#L531 dunno if this is useful.","createdAt":"2018-08-09T09:45:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10996#issuecomment-411701401","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxMTcwNDE3NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"There is one more thing - \"td/to\" receives the C representation, it compiles into the SDB types format depending on the current value of `asm.arch` and `asm.bits` (and `asm.cpu`, and `asm.os`).","createdAt":"2018-08-09T09:56:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10996#issuecomment-411704175","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzI4OTE4Mg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@oxcabe please don't rush to solve this, it might be hard to do and less important than rest of the \"Type Analysis Improvements\" tasks.","createdAt":"2019-04-15T15:02:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10996#issuecomment-483289182","viewerDidAuthor":false}],"number":10996,"title":"ARM void* type size is incorrect"},{"body":"I realize that this is a deliberate design decision because those characters have a special meaning in the command language, but it can make complex types substantially less readable. Maybe this could be an option and the autocompletion could automatically escape the *problem* characters?","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQwOTg2MzQxMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Thats why flags have a realname field to store the unfiltered representation\n\n> On 2 Aug 2018, at 06:22, io12 <notifications@github.com> wrote:\n> \n> I realize that this is a deliberate design decision because those characters have a special meaning in the command language, but it can make complex types substantially less readable. Maybe this could be an option and the autocompletion could automatically escape the problem characters?\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-08-02T09:21:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10891#issuecomment-409863412","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwOTk0OTMzNw==","author":{"login":"io12"},"authorAssociation":"CONTRIBUTOR","body":"Yes, but realname still filters out spaces, and the filtered flag names are displayed in the disassembly.","createdAt":"2018-08-02T14:37:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10891#issuecomment-409949337","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwOTk1MTYyOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"it shouldnt filter the realname. can you provide a reproducer?\n\n> On 2 Aug 2018, at 16:38, io12 <notifications@github.com> wrote:\n> \n> Yes, but realname still filters out spaces, and the filtered flag names are displayed in the disassembly.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/10891#issuecomment-409949337>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-ltk8yZ8et8h03xwOjTWn-2oweSV0ks5uMw7pgaJpZM4Vrm9h>.\n> \n\n","createdAt":"2018-08-02T14:43:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10891#issuecomment-409951629","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwOTk1NTk0Mg==","author":{"login":"io12"},"authorAssociation":"CONTRIBUTOR","body":"From what I can see, this happens for all mangled flags. https://github.com/radare/radare2/blob/master/libr/bin/demangle.c#L154","createdAt":"2018-08-02T14:55:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10891#issuecomment-409955942","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY4NzkyOTkzOA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-09-06T23:15:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10891#issuecomment-687929938","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY4ODE0NzEzMg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Can we define what this issue is really about before? Is it about making sure realnames are not escaped? Or about removing the realname/flagname at all? Or just adding a config var? Or what? Issues without a clear way forward are easily left behind and never acted upon. @XVilka ","createdAt":"2020-09-07T08:14:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/10891#issuecomment-688147132","viewerDidAuthor":false}],"number":10891,"title":"Special characters in demangled names replaced with underscores"},{"body":"rafind2 -I â€œx86 elfâ€ r2r/bins/fuzzed","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQxMTgyNjkxOA==","author":{"login":"afjoseph"},"authorAssociation":"NONE","body":"Can we get a description of what is 'rbin' here?","createdAt":"2018-08-09T16:59:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10875#issuecomment-411826918","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxMTkxOTc3OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"https://github.com/radare/radare2/blob/master/libr/bin","createdAt":"2018-08-09T22:35:59Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10875#issuecomment-411919779","viewerDidAuthor":false}],"number":10875,"title":"Rafind2 to use rbin to identify and filter by filetype/arch/type/bits/..."},{"body":"Given a function flag-name or an address, it would list the value of the arguments that will pass to this function for each of its xrefs-to.\r\nThis command should implement it statically, maybe by using ESIL.\r\n\r\n**Example:**\r\nImagine the following C code:\r\n\r\n```c\r\n#include <stdio.h>\r\n\r\nint print_it(char c, int n) {\r\n    for (int i = 0; i < n; i++) {\r\n        printf (\"%c\", c);\r\n    }\r\n\r\n    printf (\"\\n\");\r\n}\r\n\r\nvoid dumb_function(int n) {\r\n        print_it ('q', n);\r\n}\r\n\r\nint main(int argc, char *argv[]) {\r\n\r\n    print_it ('a', 7);\r\n    print_it ('k', 17);\r\n    int n = 5;\r\n    n = n * 3; // n = 15\r\n    dumb_function(n);\r\n    print_it ('b', 9);\r\n\r\n    return 0;\r\n}\r\n```\r\n\r\nI want to get all the xrefs-to `print_it()` **with the values of arguments** that were pushed to it in each xref (CALL).\r\n\r\nWhile opened in radare2, `main()` would look like this:\r\n\r\n```asm\r\n  [0x00000540]> pdf @ main                                                                            \r\n  â”‚           ;-- main:                                                                               \r\n  â”‚ (fcn) sym.main 96                                                                                 \r\n  â”‚   sym.main (int arg1, int arg2);                                                                  \r\n  â”‚           ; var int local_20h @ rbp-0x20                                                          \r\n  â”‚           ; var int local_14h @ rbp-0x14                                                          \r\n  â”‚           ; var int local_4h @ rbp-0x4                                                            \r\n  â”‚           ; DATA XREF from entry0 (0x55d)                                                         \r\n  â”‚           0x000006a4      55             push rbp                                                 \r\n  â”‚           0x000006a5      4889e5         mov rbp, rsp                                             \r\n  â”‚           0x000006a8      4883ec20       sub rsp, 0x20                                            \r\n  â”‚           0x000006ac      897dec         mov dword [local_14h], edi  ; arg1                       \r\n  â”‚           0x000006af      488975e0       mov qword [local_20h], rsi  ; arg2                       \r\n  â”‚           0x000006b3      be07000000     mov esi, 7                                               \r\n  â”‚           0x000006b8      bf61000000     mov edi, 0x61               ; 'a'                        \r\n  â”‚           0x000006bd      e888ffffff     call sym.print_it                                        \r\n  â”‚           0x000006c2      be11000000     mov esi, 0x11                                            \r\n  â”‚           0x000006c7      bf6b000000     mov edi, 0x6b               ; 'k'                        \r\n  â”‚           0x000006cc      e879ffffff     call sym.print_it                                        \r\n  â”‚           0x000006d1      c745fc050000.  mov dword [local_4h], 5                                  \r\n  â”‚           0x000006d8      8b55fc         mov edx, dword [local_4h]                                \r\n  â”‚           0x000006db      89d0           mov eax, edx                                             \r\n  â”‚           0x000006dd      01c0           add eax, eax                                             \r\n  â”‚           0x000006df      01d0           add eax, edx                                             \r\n  â”‚           0x000006e1      8945fc         mov dword [local_4h], eax                                \r\n  â”‚           0x000006e4      8b45fc         mov eax, dword [local_4h]                                \r\n  â”‚           0x000006e7      89c7           mov edi, eax                                             \r\n  â”‚           0x000006e9      e899ffffff     call sym.dumb_function                                   \r\n  â”‚           0x000006ee      be09000000     mov esi, 9                                               \r\n  â”‚           0x000006f3      bf62000000     mov edi, 0x62               ; 'b'                        \r\n  â”‚           0x000006f8      e84dffffff     call sym.print_it                                        \r\n  â”‚           0x000006fd      b800000000     mov eax, 0                                               \r\n  â”‚           0x00000702      c9             leave                                                    \r\n  â”‚           0x00000703      c3             ret                                                                                                                                          \r\n```\r\n\r\n\r\n`dumb_function` would look like this:\r\n\r\n```asm\r\n[0x00000540]> pdf @ sym.dumb_function\r\nâ”‚ (fcn) sym.dumb_function 29\r\nâ”‚   sym.dumb_function (int arg1);\r\nâ”‚           ; var int local_4h @ rbp-0x4\r\nâ”‚           ; CALL XREF from sym.main (0x6e9)\r\nâ”‚           0x00000687      55             push rbp\r\nâ”‚           0x00000688      4889e5         mov rbp, rsp\r\nâ”‚           0x0000068b      4883ec10       sub rsp, 0x10\r\nâ”‚           0x0000068f      897dfc         mov dword [local_4h], edi   ; arg1\r\nâ”‚           0x00000692      8b45fc         mov eax, dword [local_4h]\r\nâ”‚           0x00000695      89c6           mov esi, eax\r\nâ”‚           0x00000697      bf71000000     mov edi, 0x71               ; 'q'\r\nâ”‚           0x0000069c      e8a9ffffff     call sym.print_it\r\nâ”‚           0x000006a1      90             nop\r\nâ”‚           0x000006a2      c9             leave\r\nâ”‚           0x000006a3      c3             ret\r\n```\r\n\r\n\r\nUsing `axt sym.print_it` we can get to following result:\r\n\r\n```\r\n[0x00000540]> axt sym.print_it\r\nsym.dumb_function 0x69c [CALL] call sym.print_it\r\nsym.main 0x6bd [CALL] call sym.print_it\r\nsym.main 0x6cc [CALL] call sym.print_it\r\nsym.main 0x6f8 [CALL] call sym.print_it\r\n```\r\n\r\n---\r\n\r\n**My feature request is for a command that will output something like this:**\r\n\r\n```\r\n[0x00000540]> new_command sym.print_it\r\n0x69c: sym.print_it (0x71, 15)\r\n0x6bd: sym.print_it (0x61, 7)\r\n0x6cc: sym.print_it (0x6b, 0x11)\r\n0x6f8: sym.print_it (0x62, 9)\r\n```\r\n\r\nIt should probably be under `af` and should take into consideration the architecture, calling-convention, etc","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQwNjM0NDQwNQ==","author":{"login":"ITAYC0HEN"},"authorAssociation":"CONTRIBUTOR","body":"CC @sivaramaaa ","createdAt":"2018-07-19T16:53:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10783#issuecomment-406344405","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNjM0Nzk4NA==","author":{"login":"ITAYC0HEN"},"authorAssociation":"CONTRIBUTOR","body":"Implemented for syscalls: https://github.com/radare/radare2/blob/master/libr/core/cmd_search.c#L1702","createdAt":"2018-07-19T17:06:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10783#issuecomment-406347984","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNjQ3Mjk4Mg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"using e asm.emu/e asm.emuwrite/aeim you can do something similar. \r\n\r\nThis is currently only enabled for functions that have function definition, the work from @sivaramaaa for the type inference should now be able to complete the work of @oddcoder.\r\n\r\n@sivaramaaa is going to add the function definition prediction with this behavior ðŸ‘ ","createdAt":"2018-07-20T02:46:58Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10783#issuecomment-406472982","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNjQ4MzA2NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"It is related to recursive emulation, otherwise results might be TOO wrong https://github.com/radare/radare2/issues/6194","createdAt":"2018-07-20T04:04:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10783#issuecomment-406483065","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyNDgzMjU2Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"my proposal is this:\r\n```\r\n> pdf\r\n;-- main:\r\n;-- section.0.__TEXT.__text:\r\n;-- func.100000f60:\r\n;-- rip:\r\n0x100000f60      55         push rbp\r\n0x100000f61      4889e5     mov rbp, rsp\r\n0x100000f64      4883ec10   sub rsp, 0x10\r\n0x100000f68      488d3d3b.  lea rdi, str.bin_ls\r\n0x100000f6f      be010000.  mov esi, 1\r\n0x100000f74      c745fc00.  mov dword [local_4h], 0\r\n0x100000f7b      b000       mov al, 0\r\n0x100000f7d      e8060000.  call sym.imp.open\r\n0x100000f82      4883c410   add rsp, 0x10\r\n0x100000f86      5d         pop rbp\r\n0x100000f87      c3         ret\r\n\r\n> aftcj 0x100000f7d # function call type analysis\r\n{\r\n  \"args\": [\r\n    {\r\n      \"name\": \"path\",\r\n      \"value\": \"/bin/ls\r\n    }, {\r\n      \"name\": \"oflag\",\r\n      \"value\": 1\r\n    }\r\n  ]\r\n\r\n}\r\n\r\n> aftc 0x100000f7d\r\ncall: sym.func.open\r\npath: /bin/ls\r\noflag: 1\r\n```\r\n\r\nso we get this info once when analyzing the function recursively and store the results in sdb","createdAt":"2018-09-26T19:01:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10783#issuecomment-424832562","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyNDgzMjkwOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"afta should do recursive emulation instead of linear otherwise it will fail in most objc bins","createdAt":"2018-09-26T19:02:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10783#issuecomment-424832909","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY4MTA3OTA3NQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-08-26T19:29:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10783#issuecomment-681079075","viewerDidAuthor":false}],"number":10783,"title":"[Feature request] Getting the function's argument values for each xrefs-to it"},{"body":"If some file is very big and contains big amount of zero areas (or 0xFF), it will be very useful to have the \"sparse\" mode for entropy and counters, which will skip those huge zeroed areas.","comments":[],"number":10779,"title":"Sparse mode for `p=` "},{"body":"It is quite a common case, requiring quite some performance. Having it in radare2 core and in C will increase efficiency of dealing with it. See https://github.com/nforest/droidimg/","comments":[],"number":10778,"title":"Reimplement loading vmlinux images in radare2"},{"body":"think in improvements that can be done here\r\n\r\nhttps://twitter.com/bezjaje/status/1018787596506451968\r\n\r\nsee what rax2 does\r\n\r\n<img width=\"307\" alt=\"screen shot 2018-07-16 at 21 24 23\" src=\"https://user-images.githubusercontent.com/917142/42778867-cc7be16a-893e-11e8-8843-f7d04bfe6cba.png\">\r\n","comments":[],"number":10751,"title":"Show prompt/visual/graph/disasm/hexdump with 0xff..%x instead"},{"body":"To be able to run under FreeRTOS","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQwNTE3Mjk0OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"How to\n\n> On 16 Jul 2018, at 08:38, Anton Kochkov <notifications@github.com> wrote:\n> \n> To be able to run under FreeRTOS\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-07-16T07:59:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10739#issuecomment-405172948","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNTIyOTk1Mw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Seems https://github.com/labapart/polymcu can be used for compilation","createdAt":"2018-07-16T12:22:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10739#issuecomment-405229953","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjg2MQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:23:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10739#issuecomment-644522861","viewerDidAuthor":false}],"number":10739,"title":"FreeRTOS port"},{"body":"Basefind aims at find the base address of a binary by using ASCII strings and their intersections.\r\n\r\nThere are various implementations of this:\r\n- https://github.com/sgayou/rbasefind (in Rust)\r\n- https://github.com/mncoppola/ws30/blob/master/basefind.py (Python)\r\n- https://github.com/mncoppola/ws30/blob/master/basefind.cpp (C++)\r\n\r\nI think that could be a nice radare2 feature.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQwNDg2NjM4OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"there was an issue already for this, but didnt knew about this tool. interesting indeed. thanks","createdAt":"2018-07-13T15:24:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10725#issuecomment-404866388","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMTk4NDU5Mw==","author":{"login":"kuqadk3"},"authorAssociation":"CONTRIBUTOR","body":"I could try to implement the tool (https://github.com/mncoppola/ws30/blob/master/basefind.py) but I don't know which part of r2 that I should put this in. Also, it would be great to know which command that we will use for this one.\r\n\r\nThanks.","createdAt":"2020-03-21T03:07:31Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10725#issuecomment-601984593","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjA0NzYxOA==","author":{"login":"guedou"},"authorAssociation":"CONTRIBUTOR","body":"rabin2 is a good candidate","createdAt":"2020-03-21T14:02:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10725#issuecomment-602047618","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjA1NzI1Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I would say rafind2 and also add a subcommand of / to do this because thats what this tool is doing, actually its pretty similar to what aav do\n\nAnd theres an issue already for this with some more ideas but cant find it now\n\n> On 21 Mar 2020, at 15:02, Guillaume Valadon <notifications@github.com> wrote:\n> \n> ï»¿\n> rabin2 is a good candidate\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-03-21T15:02:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10725#issuecomment-602057252","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcxNTAxNTQxNg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Also this is looks interesting https://gist.github.com/rpw/2c4064712638bce602755a938991e5e9 cc @marcograss ","createdAt":"2020-10-23T07:00:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10725#issuecomment-715015416","viewerDidAuthor":false}],"number":10725,"title":"[request] Implement basefind"},{"body":"### Work environment\r\n\r\n2.5.0 on Debian\r\n\r\n### Build an example binary\r\n\r\n```\r\n$ r2 - -qc 'w radare2; wtf test.bin 7'\r\nDumped 7 bytes from 0x00000000 into test.bin\r\n```\r\n### Expected behavior\r\n\r\nI would like to see the string address at 0xC00000 not at 0x0\r\n\r\n### Actual behavior\r\n\r\n```\r\n$ r2 test.bin -qc 'izz'\r\n000 0x00000000 0x00000000   7   7 () ascii radare2\r\n\r\n$ r2 test.bin -qc 'izz' -m 0xC00000\r\n000 0x00000000 0x00000000   7   7 () ascii radare2\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQwNDcxODE0MA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"`2.5.0 on Debian`...\r\n","createdAt":"2018-07-13T03:53:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"LAUGH","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-404718140","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNDcyMzU3Mw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Reproduced in master","createdAt":"2018-07-13T04:40:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-404723573","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNDcyMzY3NA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"But yeah please test on master the issue you report please","createdAt":"2018-07-13T04:41:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-404723674","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNDcyNTY5NQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"This issue is https://github.com/radareorg/cutter/issues/516","createdAt":"2018-07-13T04:58:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-404725695","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNDczMTA0MA==","author":{"login":"guedou"},"authorAssociation":"CONTRIBUTOR","body":"Sorry, this was a typo and misleading. I meant 2.5.0+ \nI had the issue on 2.5.0 and also checked on master.\n\nThe issue also affects rabin2.\n","createdAt":"2018-07-13T05:38:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-404731040","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNDc1MDI2Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Thats expected behaviour. Wtf writes from current seek not from map address if u want this use sparse:// or bigger mallocs\n\n> On 12 Jul 2018, at 23:33, Guillaume Valadon <notifications@github.com> wrote:\n> \n> Work environment\n> \n> 2.5.0 on Debian\n> \n> Build an example binary\n> \n> $ r2 - -qc 'w radare2; wtf test.bin 7'\n> Dumped 7 bytes from 0x00000000 into test.bin\n> Expected behavior\n> \n> I would like to see the string address at 0xC00000 not at 0x0\n> \n> Actual behavior\n> \n> $ r2 test.bin -qc 'izz'\n> 000 0x00000000 0x00000000   7   7 () ascii radare2\n> \n> $ r2 test.bin -qc 'izz' -m 0xC00000\n> 000 0x00000000 0x00000000   7   7 () ascii radare2\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-07-13T07:27:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-404750266","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNDc1MjMyNg==","author":{"login":"guedou"},"authorAssociation":"CONTRIBUTOR","body":"wtf works fine.\n\nI think that izz should use the offset specified by the -m flag.\n","createdAt":"2018-07-13T07:36:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-404752326","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNDc1ODM1NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Preferibly mever pass flags after the filename. Thats a gnuism. But i see your issue now\n\n> On 13 Jul 2018, at 09:36, Guillaume Valadon <notifications@github.com> wrote:\n> \n> wtf works fine.\n> \n> I think that izz should use the offset specified by the -m flag.\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-07-13T08:02:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-404758355","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxNzYyMTk4MA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@xarkes can you confirm?","createdAt":"2018-08-31T10:23:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-417621980","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxNzYyODU2MA==","author":{"login":"guedou"},"authorAssociation":"CONTRIBUTOR","body":"@Maijin not fixed on current master.\r\n\r\n```\r\n$ r2 -v\r\nradare2 2.9.0-git 19085 @ darwin-x86-64 git.2.8.0-271-gaa35e11\r\ncommit: aa35e11e2eafc40c1beff98c34d287eedcc1965d build: 2018-08-31__12:47:36\r\n\r\n$ r2 -qc 'izz' -m 0xC00000 test.bin \r\nWARNING: using oba to load the syminfo from different mapaddress.\r\nTODO: Must use the API instead of running commands to speedup loading times.\r\n000 0x00000000 0x00000000   7   7 () ascii radare2\r\n```","createdAt":"2018-08-31T10:54:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-417628560","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxNzYzNjE2OA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"not sure why @radare closed this then, reopened","createdAt":"2018-08-31T11:28:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-417636168","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxNzY0MDYzOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Sorry missread the replies\n\n> On 31 Aug 2018, at 13:28, Maijin <notifications@github.com> wrote:\n> \n> not sure why @radare closed this then, reopened\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-08-31T11:50:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-417640639","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxNzk0MTE5NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"the thing is...maps are unlinked to rbin, because thats a mapped binary, so izz works thru rbin and have no way to know in which address has been mapped.","createdAt":"2018-09-02T16:07:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-417941194","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxNzk0MTIyNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"better use /z for that case maybe until we refactor rbin to hold io information like associated fd and maps","createdAt":"2018-09-02T16:07:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-417941227","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxODA0MTgzNw==","author":{"login":"guedou"},"authorAssociation":"CONTRIBUTOR","body":"Thanks for the tip! I use `izz` with r2pipe so I am currently fixing the offset on my side.","createdAt":"2018-09-03T08:32:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-418041837","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyOTMxMTU0Mg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Removing 3.0 milestone from this since a RBin refactoring will hardly land in 3 days :)","createdAt":"2018-10-12T12:39:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-429311542","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyOTMxNTY4MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"this fix have nothing to do with refactoring rbin.\n\nplease discuss the issues before doing those changes. because i have been asking for this feedbackf or 2 weeks and nobody answered anything.\n\nthe fix for this is probably 1 line change and requires no changes in rbin\n\n> On 12 Oct 2018, at 14:39, Riccardo Schirone <notifications@github.com> wrote:\n> \n> Removing 3.0 milestone from this since a RBin refactoring will hardly land in 3 days :)\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/10722#issuecomment-429311542>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lk9go0REuI0aeLV2cCICRtEBGxoNks5ukI2HgaJpZM4VN1i9>.\n> \n\n","createdAt":"2018-10-12T12:55:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-429315680","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyOTMyMDk5NQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@xarkes ^","createdAt":"2018-10-12T13:13:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-429320995","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyOTMyMzcxMA==","author":{"login":"xarkes"},"authorAssociation":"CONTRIBUTOR","body":"As a reminder, the Strings widget in Cutter is often broken because of this.\r\nhttps://github.com/radareorg/cutter/issues/516\r\n","createdAt":"2018-10-12T13:22:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-429323710","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0MzY4MDQ3OQ==","author":{"login":"ITAYC0HEN"},"authorAssociation":"CONTRIBUTOR","body":"What's the plan for fixing this?\r\n```\r\n$ r2 -m 999999 /bin/echo\r\n\r\n[0x000f5a3f]> iz\r\n[Strings]\r\nNum Paddr      Vaddr      Len Size Section  Type  String\r\n000 0x00004902 0x00404902   4   5 (.rodata) ascii echo\r\n001 0x00004907 0x00404907  15  16 (.rodata) ascii test invocation\r\n...\r\n[0x000f5a3f]> px @ 0x00404902\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x00404902  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x00404912  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n...\r\n```","createdAt":"2018-12-03T11:36:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-443680479","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NDQyMTY5Ng==","author":{"login":"ITAYC0HEN"},"authorAssociation":"CONTRIBUTOR","body":"ping - RBin refactoring handles this already?","createdAt":"2019-02-17T06:23:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-464421696","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NDQ0NDk2Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Not solved yet andbyes its part of the required refactoring\n\n> On 17 Feb 2019, at 07:23, Itay Cohen <notifications@github.com> wrote:\n> \n> ping - RBin refactoring handles this already?\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-02-17T11:28:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-464444966","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3MzI5NjM5NQ==","author":{"login":"ITAYC0HEN"},"authorAssociation":"CONTRIBUTOR","body":"seems like there are slight improvements in this.\r\nNow at least the mapped address shown under `vaddr` column. Still, nothing really in this address.\r\n\r\n```\r\nr2 -m 0x999999 /bin/echo\r\n[0x00999999]> iz\r\n[Strings]\r\nnth paddr      vaddr      len size section type    string\r\nâ€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•\r\n0   0x000061c0 0x0099fb59 5   6    .rodata ascii   usage\r\n1   0x000061c6 0x0099fb5f 4   5    .rodata ascii   echo\r\n2   0x000061cb 0x0099fb64 10  11   .rodata ascii   src/echo.c\r\n3   0x000061d6 0x0099fb6f 22  23   .rodata ascii   status == EXIT_SUCCESS\r\n4   0x000061ef 0x0099fb88 15  16   .rodata ascii   test invocation\r\n...\r\n...\r\n\r\n\r\n\r\n[0x00999999]> px @ 0x0099fb59\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x0099fb59  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x0099fb69  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n\r\n[0x00999999]> px @ 0x000061c0\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x000061c0  7573 6167 6500 6563 686f 0073 7263 2f65  usage.echo.src/e\r\n0x000061d0  6368 6f2e 6300 7374 6174 7573 203d 3d20  cho.c.status == \r\n\r\n\r\n```\r\n\r\n","createdAt":"2020-01-11T08:42:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10722#issuecomment-573296395","viewerDidAuthor":false}],"number":10722,"title":"-m not applied to raw binaries with izz"},{"body":"# This template is meant for bug reports, if you have a feature request, please be as descriptive as possible and delete the template\r\n\r\nMake sure you are testing using the latest git version of radare2 before submitting any issue.\r\n\r\n*If you would like to report a bug, please fill the template bellow*\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | OSX \\ Windows \\ Linux\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.8.0-git 18935 @ darwin-x86-64 git.2.7.0-24-gd3a3940d7 commit: d3a3940d75a2d1abdb78031eb9a43482a657f5ac build: 2018-07-12__17:46:48\r\n\r\n### Expected behavior\r\nr2 searches instructions only in disasm with `/c` command\r\n\r\n### Actual behavior\r\nr2 searches instructions byte per byte with `/c` command (it's `/ca` behaviour) and break Visual mode with hits* inserts in wrong places\r\n\r\n### Steps to reproduce the behavior \r\n```\r\n$ r2 /bin/ls\r\n[0x100001200]> Vp # check view\r\n[0x100001200]>/c mov\r\n[0x100001200]> Vp # check after search\r\n```\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\nNormal disasm view\r\n![screen shot 2018-07-12 at 5 53 28 pm](https://user-images.githubusercontent.com/1186777/42641255-d4c4bdaa-85fc-11e8-802b-3660b94285bd.png)\r\n\r\n\r\nAfter try to search `/c mov`\r\n![screen shot 2018-07-12 at 5 53 48 pm](https://user-images.githubusercontent.com/1186777/42641261-d912ea30-85fc-11e8-9010-81cf2b921943.png)\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjg2Ng==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10720#issuecomment-644522866","viewerDidAuthor":false}],"number":10720,"title":"Change behaviour for search instruction with '/c' command"},{"body":"When debugging libraries, kernels or binaries with large it will be useful to have a way to have automatic number replacements in all instructions to show map+off\r\n\r\nfor example\r\n\r\nmov eax, [usr_lib_ld+0x1000]\r\n\r\ninstead of\r\n\r\nmov eax, 0x7fff834be000","comments":[],"number":10713,"title":"Replace addresses with map+offset"},{"body":"```\r\nHow will the undef (implementation defined) flags represented in esil.\r\nFor example, in X86 instruction, andn,  the pf flag is undefined. \r\nIn the corresponding esil, should we expect the flag to be unmodified or set with an particular value. As we know all the behaviors are correct as per the manual. \r\n```\r\n\r\nAlso problem solvers have similar concept for preconditions, will be good to have such magic value in ESIL too","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjg2OQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10695#issuecomment-644522869","viewerDidAuthor":false}],"number":10695,"title":"Undefined value in ESIL"},{"body":"Basically we need to fix the following instructions in the assembler:\r\n\r\n* [ ] a \"mov rax, qword[r12]\" 498b0424\r\n* [ ] a \"mov rax, qword[r13]\" 498b4500\r\n* [ ] a \"mov rsp, qword[r12 - 0x12]\"  498b6424ee\r\n* [ ] a \"mov qword[r12], rsp\" 49892424\r\n* [ ] a \"mov qword[r8 + 0x20], rax\" 49894020\r\n* [Â ]Â a \"mov r12, qword[r12]\" 4d8b2424\r\n* [Â ] a \"mov r12, qword[xmm0]\" 00000000\r\n\r\n\r\n### Artwork\r\n\r\n![add r12, qword[r12]](https://i.imgur.com/rL9dbnq.png)\r\n\r\n![add r12, qword[rsp]](https://i.imgur.com/L2e3mXg.png)\r\n\r\n![mov r12, qword[rsp]](https://i.imgur.com/PqI21GE.png)\r\n\r\n![add rax, qword[rsp]](https://i.imgur.com/uMqChLL.png) correct behavior here\r\n\r\n![add r12, qword[r8]](https://i.imgur.com/3CiLrYk.png)\r\n\r\n\r\nInfinite loop on qword[xmm0] <- *FIXED*\r\n\r\nvarying the qword, dword, byte, etc results in different behavior too.\r\n\r\nDoes this with anything that uses libr/r_asm (rasm2, radare2 visual assembly, using libr as a library, etc)\r\n\r\n### Steps to reproduce the behavior \r\nPretty much assembling any instruction using [] and a register that isn't in the 32 bit set (r8, r9, r15, xmm0, etc) results in some very odd results. It is difficult to pinpoint exactly what is happening, as sometime the operand is wrong, sometimes both operands are wrong (even if one of them is rax), sometimes the system just outputs the entirely wrong opcode too, and sometimes the system infinite loops (qword[xmm0], but just [xmm0] doesn't infinite loop)\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQwMzg2MTA5Mw==","author":{"login":"roboman2444"},"authorAssociation":"CONTRIBUTOR","body":"I've traced the infinate loop with qword[xmm0] down to https://github.com/radare/radare2/blob/master/libr/asm/p/asm_x86_nz.c#L4166\r\n(I think).\r\nNo idea on the general wrong output from using r12 (extended registers) though.\r\n\r\nIt appears that the infinate loop with xmm0 is due to the instruction string parsing phase (parseOperand, parseReg, getToken), and the extended register issues are related to the various instruction writing functions (opmov, process_group_1, etc), but I am not entirely sure.","createdAt":"2018-07-10T15:18:44Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10689#issuecomment-403861093","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzg5NzUyMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can u send a pr fixing this issue and another one in r2r with the tests to avoid this to happen again?\n\nthanks\n\n> On 10 Jul 2018, at 17:18, Alex Gaines <notifications@github.com> wrote:\n> \n> I've traced the infinate loop with qword[xmm0] down to https://github.com/radare/radare2/blob/master/libr/asm/p/asm_x86_nz.c#L4166 <https://github.com/radare/radare2/blob/master/libr/asm/p/asm_x86_nz.c#L4166>\n> (I think).\n> No idea on the general wrong output from using r12 though.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/10689#issuecomment-403861093>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-ljjCBDD4jgaaL0X0HpgkHqkqQCXAks5uFMXZgaJpZM4VIs20>.\n> \n\n","createdAt":"2018-07-10T17:09:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10689#issuecomment-403897522","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNDcyNDAxMw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"x86.nz (x86 handmade assembler) is one of the many x86 assemblers available in radare2 and is updated frequently.  **Please add a test case so we can fix x86.nz in https://github.com/radare/radare2-regressions/tree/master/new/db/asm** (See https://github.com/radare/radare2-regressions/blob/master/new/README.md) You can do so with github web editor without even cloning the repo.\r\n\r\nYou can contribute to x86.nz by completing the following file https://github.com/radare/radare2/blob/master/libr/asm/p/asm_x86_nz.c.","createdAt":"2018-07-13T04:44:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10689#issuecomment-404724013","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNTM5NzMzOQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Given it can infinite loop, I'm moving to 2.8.0","createdAt":"2018-07-16T22:10:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10689#issuecomment-405397339","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxMDU1NDM3MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i have fixed the infinite loop in f07c02eafe9d87318183d4d27fcc83fd2467dd3c\r\n\r\nbut he instructions are wrongly assembled","createdAt":"2018-08-05T22:52:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10689#issuecomment-410554371","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxNzk0MzAyNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"see last comment in this issue https://github.com/radare/radare2/issues/10195","createdAt":"2018-09-02T16:36:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10689#issuecomment-417943024","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2NTA5MDE5OA==","author":{"login":"roboman2444"},"authorAssociation":"CONTRIBUTOR","body":"I'm pretty sure this is still an active bug.\r\n![2019-12-12-115311_819x134_scrot](https://user-images.githubusercontent.com/3598431/70732054-c19b1780-1cd5-11ea-8ed3-d521ff99b8dc.png)\r\n","createdAt":"2019-12-12T16:51:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10689#issuecomment-565090198","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2NTExMjgwOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Try without â€œqwordâ€\n\n> On 12 Dec 2019, at 17:51, Alex Gaines <notifications@github.com> wrote:\n> \n> ï»¿\n> I'm pretty sure this is still an active bug.\n> \n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2019-12-12T17:48:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10689#issuecomment-565112808","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2NTEyNTYyMw==","author":{"login":"roboman2444"},"authorAssociation":"CONTRIBUTOR","body":"> Try without â€œqwordâ€\r\n\r\nLooks like it works fine without qword.\r\n\r\n","createdAt":"2019-12-12T18:23:38Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10689#issuecomment-565125623","viewerDidAuthor":false}],"number":10689,"title":"libr/r_asm x86.nz breaks when using certain registers with memory accesses"},{"body":"Currently running radiff2 (for example, with -A/-AA commands) on binaries is a time consuming process, especially when comparing multiple binaries.  With r2's support for r2 project files, adding support into radiff2 so that it can load r2 projects that have already had the aaa/aaaa analysis completed would save time and avoid the re-analysis process.  ","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzMzM5OTA1Mw==","author":{"login":"inigofox"},"authorAssociation":"NONE","body":"Is this issue never going to be addressed? It seems like a basic feature add to make radiff a more useful tool.","createdAt":"2018-10-26T12:59:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10685#issuecomment-433399053","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzMzQwNDU4OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Projects are radare scripts. You can just load them for diffing. The problem is that projects are quite broken and this requires a lot of work in rbin that we are doing. Yes this will be addressed in a better way when we fix the projects","createdAt":"2018-10-26T13:19:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10685#issuecomment-433404588","viewerDidAuthor":false}],"number":10685,"title":"R2 Project File Support for Radiff2 Analysis"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | MacOS\r\n| File format of the file you reverse (mandatory)      | PE\r\n| Architecture/bits of the file (mandatory)            | x86/32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.7.0-git 18638 @ darwin-x86-64 git.2.4.0-1100-gb9ce57d68 commit: b9ce57d68d57c9e9689859baae7fae972d2f5351 build: 2018-07-06__09:16:56\r\n\r\n### Expected behavior\r\nBinary structures (like IMAGE_DOS_HEADER, IMAGE_NT_HEADER, ...) should be mapped by default when analyzing a binary\r\n\r\n### Actual behavior\r\nHeaders are not mapped in memory\r\n\r\n### Steps to reproduce the behavior \r\nOpen an exe with r2, `px @ 0x00400000` (if file is mapped at 0x00400000) => not mapped (no MZ magic, ...)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQwMzA4MTE5NQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Some people want it some people don't want it. You can just use e io.va=false for now.","createdAt":"2018-07-06T16:21:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10638#issuecomment-403081195","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzA5NDkzNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Nope this doesnt makes the data structures to appear magically\n\n> On 6 Jul 2018, at 18:21, Maijin <notifications@github.com> wrote:\n> \n> Some people want it some people don't want it. You can just use e io.va=false for now.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-07-06T17:14:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10638#issuecomment-403094935","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzIxODg1NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"its not about wanting it, its a bug and must be fixed. @Maijin the issue is about the maps not the types","createdAt":"2018-07-07T14:19:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10638#issuecomment-403218854","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzIyMTI0OA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"kk","createdAt":"2018-07-07T14:56:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10638#issuecomment-403221248","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzIyMjE5Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Its about a missing map. Is this issue for ELF only? Or PE is affected too? Should be easy to fix\n\n> On 7 Jul 2018, at 16:56, Maijin <notifications@github.com> wrote:\n> \n> kk\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-07-07T15:10:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10638#issuecomment-403222197","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzI3NDE5Nw==","author":{"login":"randvoid"},"authorAssociation":"CONTRIBUTOR","body":"I noted this issue when analysing a PE. I have no idea for ELF and other stuffs.","createdAt":"2018-07-08T09:15:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10638#issuecomment-403274197","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzI4MTQ4MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I have implemented the omo command that should make this map appear but its not yet depriorized when created. Will fix that later today but will be good to do the fix properly in rbin. Because i saw many inconsistent output in -S and -SS after the last changes from @ret2libc and i think we must review that but after the 2.7 release\n\n> On 8 Jul 2018, at 11:15, redmed666 <notifications@github.com> wrote:\n> \n> I noted this issue when analysing a PE. I have no idea for ELF and other stuffs.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-07-08T11:36:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10638#issuecomment-403281481","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzMxNzY0MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"moving for 2.8 because now we have the `omo` command that seems to work. tested on a mach0 binary. We will need to import the header parser info and show the header properly. this is where asm.meta joins the game.","createdAt":"2018-07-08T21:13:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10638#issuecomment-403317640","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzM4MTE5Mw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"> Because i saw many inconsistent output in -S and -SS after the last changes from @ret2libc and i think we must review that but after the 2.7 release\r\n\r\n@radare what are you referring to?","createdAt":"2018-07-09T07:08:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10638#issuecomment-403381193","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzQyMzExMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i think that r2 -SS should print something and it does nothing, at least for mach0 binaries, didnt tested more. also r2 -rSS should print om commands, not S ones.\n\n> On 9 Jul 2018, at 09:08, Riccardo Schirone <notifications@github.com> wrote:\n> \n> Because i saw many inconsistent output in -S and -SS after the last changes from @ret2libc <https://github.com/ret2libc> and i think we must review that but after the 2.7 release\n> \n> @radare <https://github.com/radare> what are you referring to?\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/10638#issuecomment-403381193>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lg_QWHO7wCzB3iTZdQoJ1iwnzn4Oks5uEwGLgaJpZM4VFIz5>.\n> \n\n","createdAt":"2018-07-09T09:46:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10638#issuecomment-403423113","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzQzMDk2MQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"If you have some concrete examples please open an issue and I'll have a look","createdAt":"2018-07-09T10:16:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10638#issuecomment-403430961","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzQzMjIzNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"itâ€™s more like random ideas in my head that i have to put in a pad to make real issues and plans for it\n\n> On 9 Jul 2018, at 12:16, Riccardo Schirone <notifications@github.com> wrote:\n> \n> If you have some concrete examples please open an issue and I'll have a look\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/10638#issuecomment-403430961>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lsosE759Aom7YNVu6YL5HMHAJu6cks5uEy12gaJpZM4VFIz5>.\n> \n\n","createdAt":"2018-07-09T10:21:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10638#issuecomment-403432236","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NzEzNjEzNw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-09-23T05:04:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10638#issuecomment-697136137","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NzE4NTY3NQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Since the automation was \"interrupted\" by recent tags.. Please do provide additional details about the issue, which includes: a specific binary where the problem happens, the exact commands you use, the exact actual output you see and what you expect to see. Make sure to use an updated version of r2 please.","createdAt":"2020-09-23T07:26:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10638#issuecomment-697185675","viewerDidAuthor":false}],"number":10638,"title":"Binary structures not mapped by default"},{"body":"With some of the cross control stuff i'm working on, it would be nice to be able to trigger a refresh remotely via http. For instance, i'm updating comments via http while looking in visual mode on the command line. I don't see the updated comments until I hit `r` for refresh locally. If I try to perform that command remotely, the command line does not update.\r\n\r\nIt would be nice to have some way of triggering to the command line that something just updated and i would like to refresh the screen.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQwMjAwMTI4Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Also required for this https://github.com/radare/radare2/issues/7410","createdAt":"2018-07-03T03:20:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10571#issuecomment-402001286","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjg3Mw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10571#issuecomment-644522873","viewerDidAuthor":false}],"number":10571,"title":"Refresh screen via http server"},{"body":"https://github.com/radare/radare2/blob/master/libr/util/sandbox.c#L55\r\nhttps://github.com/radare/radare2/blob/master/libr/util/sandbox.c#L19","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQwMTU5NDA4Nw==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"Is there a way to access global instance of `core->config`?","createdAt":"2018-07-01T09:05:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10564#issuecomment-401594087","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMjQ0OTYzNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"No. Globals are evil\n\n> On 1 Jul 2018, at 11:05, Paul I. <notifications@github.com> wrote:\n> \n> Is there a way to access global instance of core->config?\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-07-04T11:21:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10564#issuecomment-402449634","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzEzOTg0Mw==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"So how to fix this issue?","createdAt":"2018-07-06T20:33:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10564#issuecomment-403139843","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzE0NTk2MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Caching them at their values at the moment of enabling the sandbox and honoring them from their use place instead of globally\n\n> On 6 Jul 2018, at 22:33, Paul I. <notifications@github.com> wrote:\n> \n> So how to fix this issue?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-07-06T21:01:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10564#issuecomment-403145960","viewerDidAuthor":false}],"number":10564,"title":"Sandbox doesn't honor `http.root` and `http.homeroot`"},{"body":"I am launching ARC cpu environmental testing and bugfix platform for the ARC processor dev basis radare2 hoping to prepare and support the compatibility.\r\nPing me for details, and started in several checks already. Let me know if you have interest in participation.\r\nWill share the remote access for dev as soon as it's stable.\r\n\r\nThank you!\r\n\r\ncc: @radare @XVilka ","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQwMjQ1Mjk1Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ðŸ‘\n\n> On 1 Jul 2018, at 07:38, unixfreaxjp <notifications@github.com> wrote:\n> \n> I am launching ARC cpu environmental testing and bugfix platform for the ARC processor.\n> Ping me for details, and started in several checks already. Let me know if you have interest in participation.\n> \n> Thank you!\n> \n> cc: @radare @XVilka\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-07-04T11:37:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10557#issuecomment-402452952","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMjUyNDQ1MA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"I have ordered some ARC board, but it wasn't delivered yet, so it will be useful.","createdAt":"2018-07-04T16:42:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/10557#issuecomment-402524450","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMjU4NDc1MA==","author":{"login":"unixfreaxjp"},"authorAssociation":"NONE","body":"Will announce more info in the r2con2018","createdAt":"2018-07-05T01:56:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10557#issuecomment-402584750","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYzNDIyMTExNw==","author":{"login":"unixfreaxjp"},"authorAssociation":"NONE","body":"Where are we on ARC parsing and opcodes analysis now?","createdAt":"2020-05-26T19:11:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10557#issuecomment-634221117","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0Mzc0NzA4MA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"there are asm and anal plugins for ARC already, but not much work have been done to improve its support","createdAt":"2020-06-14T10:23:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/10557#issuecomment-643747080","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY0NTMzMTc5MA==","author":{"login":"unixfreaxjp"},"authorAssociation":"NONE","body":"@trufae thank you!! I will analyze some ARC binaries I have before weekend and will let you know, I put it into task list.\r\n\r\n@XVilka ; your ARC board is now installed with TRON (RTOS). Can not run Linux in it. Now I just have to figure how to natively run r2 on TRON or toppers.. Yes I know the solution if using frida agent, yet just curious.","createdAt":"2020-06-17T12:02:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10557#issuecomment-645331790","viewerDidAuthor":false}],"number":10557,"title":"ARC processor support for r2 (on native ARC cpu, not for analyzing ARC binary)"},{"body":"Most things that normally go to stderr, like the log of aaa are printed using eprintf().\r\nIt would be nice if we could redirect that output in cutter.\r\n\r\nAll the buffering, etc stuff that regular r_cons_print can do is not necessary imho, so a simple function pointer in RConsContext to make it configurable and a function r_cons_eprintf or something to use it conveniently would be enough.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQwMTM2MTgyMw==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"I'm not sure though if everything that uses eprintf right now also links against cons...","createdAt":"2018-06-29T13:56:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10546#issuecomment-401361823","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMTM2NzMwNw==","author":{"login":"sivaramaaa"},"authorAssociation":"CONTRIBUTOR","body":"+1 , yup that would be nice !","createdAt":"2018-06-29T14:14:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10546#issuecomment-401367307","viewerDidAuthor":false}],"number":10546,"title":"Make prints to stderr redirectable"},{"body":"I am using Radare to analyze STM32 code.\r\nI load the binary and then create maps for the RAM and peripherals regions.\r\nWhen I save the project it clears the file.path and file.lastpath preventing the binary from being saved with the project when prj.files is true.  This affects Cutter since the project when saved as non-simple project no longer has a path to the binary and fails to create the memory map regions.\r\n\r\nSo I have two issues:\r\n1. Radare is not able to save binary to project directory for non-simple saves\r\n2. Cutter does not have file path for non-simple saves\r\n\r\nI can workaround radare issue just fine but not sure about the cutter issue\r\n\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| MAC/arch/bits (mandatory)                             | macOS v10.13.5 64-bit\r\n| File format of the file you reverse (mandatory)      | bin\r\n| Architecture/bits of the file (mandatory)            | arm / 16\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.7.0-git 18495 @ darwin-x86-64 git.2.6.0-317-g129c0a6dc commit: 129c0a6dcc011b92817f2e5aae3cd8713b6205ac build: 2018-06-20__06:42:5\r\n\r\n### Expected behavior\r\nRadare: Allow binary to be saved with project\r\nCutter: Allow loading of non-simple projects with memory maps\r\n### Actual behavior\r\n\r\n### Steps to reproduce the behavior \r\n```\r\nr2 -a arm -b 16 test.bin\r\nomb 1 0x8000000\r\nomr 1 0x80000\r\no malloc://0x20000 0x20000000\r\ne prj.files=true\r\nPs test\r\n\r\nSave returns:\r\nTODO: prj.files: support copying more than one file into the project directory\r\nWarning: Cannot copy '' into '/Users/brian/.local/share/radare2/projects/transmitter/bin/'\r\ntransmitter\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQwMTMzMDE5MA==","author":{"login":"SpenserStyles"},"authorAssociation":"CONTRIBUTOR","body":"I figured out a work around for Cutter by manually running the RC script.","createdAt":"2018-06-29T11:44:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10541#issuecomment-401330190","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjg3Nw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10541#issuecomment-644522877","viewerDidAuthor":false}],"number":10541,"title":"Unable to store binaries with non-simple project save"},{"body":"The pava will allow us to do such cool things","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQxNzUwODIyNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"related to https://github.com/radare/radare2/issues/10637","createdAt":"2018-08-31T00:14:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10520#issuecomment-417508226","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1MTEyOTYyNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"See ib and oob","createdAt":"2019-01-03T12:27:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10520#issuecomment-451129624","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzE5OTUwMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ive started to rework on pava in https://github.com/radare/radare2/pull/13759","createdAt":"2019-04-15T10:36:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10520#issuecomment-483199502","viewerDidAuthor":false}],"number":10520,"title":"The PAVA mode should allow to reload bininfo if headers are modified"},{"body":"* [ ] RConfig should be saved/restored on each thread.. .this is a `per-thread cfg->ht`\r\n* [ ] Can't be stopped\r\n* [ ] Is not listed in tasks\r\n* [ ] =H& vs &=H, same goes for =h\r\n* [ ] cfg.sandbox must be honored in context switching too","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQwMzIyMDkwMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cc @thestr4ng3r ","createdAt":"2018-07-07T14:50:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10515#issuecomment-403220901","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzMxOTQ4OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"* `=H&` -> starts webserver, but not the browser\r\n* `& =H` -> makes everything go slow and eventually hang (same happens with `& =h`","createdAt":"2018-07-08T21:43:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10515#issuecomment-403319489","viewerDidAuthor":false}],"number":10515,"title":"Background Webserver doesnt plays well with tasks"},{"body":"It would be nice to edit the structs created with `to -` again by typing `to -`\r\n\r\nExample:\r\n\r\n1. Create struct definition\r\n\r\n`r2> to -`\r\n```\r\nstruct foo {\r\n\r\n};\r\n```\r\n2. Edit the struct definition of the struct defined above:\r\n\r\n`r2> to -`\r\n```\r\nstruct foo {\r\n\r\n};\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjg4Mw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10457#issuecomment-644522883","viewerDidAuthor":false}],"number":10457,"title":"Make types editable in their C format."},{"body":"Taken from https://svnweb.freebsd.org/ports/head/devel/radare2/Makefile?revision=549827&view=markup\r\n```\r\nNOT_FOR_ARCHS=          armv6 armv7 mips mips64 powerpc powerpc64 powerpc64le powerpcspe sparc64\r\n--\r\n17 | NOT_FOR_ARCHS_REASON=   does not build: Unsupported BSD architecture\r\n```\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQxMTk3Mjg3Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Related: https://github.com/radare/radare2/commit/a13f436f36451b2ddf8456194d892d435393c71d by @evadot ","createdAt":"2018-08-10T04:36:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10439#issuecomment-411972876","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxMjAxMTY3Mw==","author":{"login":"evadot"},"authorAssociation":"CONTRIBUTOR","body":"armv6/v7 should not be hard to add for me, I'll try to have a look soon.","createdAt":"2018-08-10T08:17:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10439#issuecomment-412011673","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxMjA0MjAxOA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@evadot you may want to check the BSD Github label https://github.com/radare/radare2/labels/BSD ðŸ‘ ","createdAt":"2018-08-10T10:19:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10439#issuecomment-412042018","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyMzQ1NDY1MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"any update on this?","createdAt":"2018-09-21T08:22:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10439#issuecomment-423454651","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyNDQ4Mzc2NA==","author":{"login":"mizhka"},"authorAssociation":"CONTRIBUTOR","body":"Hi,\r\n\r\nI found this issue today, I will try to solve it. \r\naarch64 is OK as of now.\r\narm6/7 - @evadot , any ideas?\r\nmips/mips64 - I'll check on my mips32 board, then qemu-mips64...\r\npower / sparc / riscv - no idea how to support it","createdAt":"2018-09-25T20:09:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10439#issuecomment-424483764","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyNDYzNDk1MA==","author":{"login":"evadot"},"authorAssociation":"CONTRIBUTOR","body":"aarch64 needs some more ptrace support on the FreeBSD side then we can use the debugger.\r\nFor armv6/v7 just need to find so time to test, everything should work.","createdAt":"2018-09-26T08:42:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10439#issuecomment-424634950","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3Mzk2Nzc3OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@devnexen you might be interested in this one.","createdAt":"2020-08-14T08:52:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10439#issuecomment-673967779","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3Mzk3NDYxOQ==","author":{"login":"devnexen"},"authorAssociation":"CONTRIBUTOR","body":"I ll try to have a look at some point.","createdAt":"2020-08-14T09:07:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10439#issuecomment-673974619","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcxNzcwNzU1OA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Since it's related to the FreeBSD debugger support - @yossizap you are also might be interested in this.","createdAt":"2020-10-28T05:28:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10439#issuecomment-717707558","viewerDidAuthor":false}],"number":10439,"title":"FreeBSD support for ARM, MIPS, PowerPC, SPARC"},{"body":"```\r\n:> ao\r\naddress: 0xd6d4\r\nopcode: jarl 0x00001080, r0\r\nmnemonic: jarl\r\nprefix: 0\r\nid: 0\r\nbytes: 80072100\r\nrefptr: 0\r\nsize: 4\r\nsign: false\r\ntype: null\r\ncycles: 0\r\nstack: null\r\nfamily: cpu\r\nstackop: null\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjkxNQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10426#issuecomment-644522915","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MDU4Nzc4NQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Still not fixed. it's actually worst right now:\r\n\r\n```\r\n[0x00000000]> e asm.arch =v850\r\n[0x00000000]> ao\r\naddress: 0x0\r\nopcode: jarl 0x00001080, r0\r\ndisasm: jarl 0x00001080, r0\r\npseudo: jarl 0x00001080, r0\r\nmnemonic: jarl\r\nmask: ffffffff\r\nprefix: 0\r\nid: 0\r\nbytes: 80072100\r\nrefptr: 0\r\nsize: 4\r\nsign: false\r\ntype: null\r\ncycles: 0\r\nfamily: cpu\r\n[0x00000000]>\r\n```\r\n\r\ncc @XVilka ","createdAt":"2020-06-27T17:15:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10426#issuecomment-650587785","viewerDidAuthor":true}],"number":10426,"title":"JARL is not UJMP :D"},{"body":"```\r\n:> ao\r\naddress: 0xcf6a\r\nopcode: jarl 0x007a423a, r29\r\nbytes: bdef84f4\r\nesil: pc,r29,=,pc,0,+=\r\njump: 0xe908cf6a\r\nfail: 0x0000cf6e\r\n```","comments":[],"number":10424,"title":"wrong v850 jarl disasm"},{"body":"```\r\nrasm2 -a v850 -d f5efbfcd\r\nsetf , r29\r\n```\r\n\r\na comma here doesnt seems fine","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY5MDEzNTg0MA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-09-10T10:17:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10423#issuecomment-690135840","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcyMzk0MzMwNg==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically closed because marked as stale and it has not been updated since then. If the issue is still relevant, feel free to re-open it or open a new one.\n","createdAt":"2020-11-09T11:07:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10423#issuecomment-723943306","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcyMzk3NjIzNw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"According to r2ghidra this is:\r\n\r\n```\r\n$ r2 -a r2ghidra -b 32 -e asm.cpu=v850 -\r\n[0x00000000]> wx f5efbfcd\r\n[0x00000000]> pd 2\r\n            0x00000000      ld.hu -0x3242[r21], r29\r\n            0x00000004      nop\r\n[0x00000000]>\r\n```\r\n\r\nBut there are tons of bad instruction disassemblies in the current v850 disassembler, also i dont understand why are you reopening staled issues when i got blamed several times for this even if the issue wasnt fixed. But anyway i will probably not understand it either. \r\n\r\nNow i have SDK, samples and documentation for v850 and i try to find time to improve the support, but totally no hurry for that. so ill just assign this issue to me","createdAt":"2020-11-09T12:14:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10423#issuecomment-723976237","viewerDidAuthor":true}],"number":10423,"title":"wrong v850 disasm"},{"body":"binary with trhee mallocs: A, B, C\r\ndmh shows chunks correctly\r\nfree(B)\r\ndmh shows C chunk freed instead of B\r\n\r\nhttps://asciinema.org/a/Pr165M3Sb0f8LEb5ztd8StufZ\r\n\r\nTested on Ubuntu x64\r\nbinary x64\r\nradare2 2.7.0-git 18461 @ linux-x86-64 git.2.6.0-283-g8638b83\r\ncommit: 8638b8395fbda29c9441100122de618994c29855 build: 2018-06-18__19:48:58\r\n\r\n### Expected behavior\r\nIt should show [free] on B chunk\r\n### Actual behavior\r\nIt shows [free] on chunk C\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM5ODU4NzE1NQ==","author":{"login":"soez"},"authorAssociation":"CONTRIBUTOR","body":"The function had to detect the double free the distance of a node, if it was greater no. Now if it detects it, although it has a triple while.. :/ the other functions will be changed if this likes pancake (more will be optimized)\r\n\r\nhttps://github.com/radare/radare2/pull/10419","createdAt":"2018-06-20T00:32:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10398#issuecomment-398587155","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5ODcwMzMxNQ==","author":{"login":"Goyo2600"},"authorAssociation":"NONE","body":"Hello soez, I've seen the modified code in linux_heap_glibc.c, but there are something wrong.\r\nAs you can see in this simple binary, there are three mallocs, A, B, C (three large continuous chunks), and a free(B).\r\nAfter free(B), r2  dmh and dmhg commands doesn't show chunk size modified neither [free] text in freed chunk.\r\n\r\n[prueba2.gz](https://github.com/radare/radare2/files/2118870/prueba2.gz)\r\n","createdAt":"2018-06-20T10:32:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10398#issuecomment-398703315","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5ODc4MzEyMg==","author":{"login":"soez"},"authorAssociation":"CONTRIBUTOR","body":"I look at it, can you give me the source code?\r\n\r\nPD1. dmhg is logical to fail because dmhg continues the same\r\n\r\nPD2. I think it's fixed, if you see any mistakes, let me know :) \r\n\r\nPD3. dmhg still remains unchanged...\r\n","createdAt":"2018-06-20T15:00:39Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10398#issuecomment-398783122","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5OTAxMDY2Mg==","author":{"login":"Goyo2600"},"authorAssociation":"NONE","body":"Hi, now is perfect without loading libc with LD_PRELOAD, but using LD_PRELOAD r2 crash after dmh \r\n\r\nWarning: glibc library with symbol main_arena could not be found. Is libc6-dbg installed?\r\n*** Error in `r2': free(): invalid pointer: 0x00007f5cec737c68 ***\r\n======= Backtrace: =========\r\n/lib/x86_64-linux-gnu/libc-64.so.6(+0x777e5)[0x7f5cec3eb7e5]\r\n/lib/x86_64-linux-gnu/libc-64.so.6(+0x7fe0a)[0x7f5cec3f3e0a]\r\n/lib/x86_64-linux-gnu/libc-64.so.6(cfree+0x4c)[0x7f5cec3f798c]\r\n/usr/lib/libr_util.so(r_list_pop_head+0x9c)[0x7f5ce83653ff]\r\n/usr/lib/libr_core.so(r_core_task_schedule+0x7a)[0x7f5cec0f2caf]\r\n/usr/lib/libr_core.so(r_core_task_continue+0x1d)[0x7f5cec0f2fc8]\r\n/usr/lib/libr_core.so(+0x5946a)[0x7f5cebfdd46a]\r\n/usr/lib/libr_cons.so(r_cons_is_breaked+0x23)[0x7f5ceb909477]\r\n/usr/lib/libr_core.so(+0xe8786)[0x7f5cec06c786]\r\n/usr/lib/libr_core.so(r_cmd_call+0x1c9)[0x7f5cec0bace6]\r\n/usr/lib/libr_core.so(+0xedd95)[0x7f5cec071d95]\r\n/usr/lib/libr_core.so(+0xea90c)[0x7f5cec06e90c]\r\n/usr/lib/libr_core.so(r_core_cmd+0x3b3)[0x7f5cec07446e]\r\n/usr/lib/libr_core.so(+0x5aaf2)[0x7f5cebfdeaf2]\r\n/usr/lib/libr_core.so(r_core_prompt+0x4b)[0x7f5cebfdeee3]\r\nr2(+0x763f)[0x56090864d63f]\r\n/lib/x86_64-linux-gnu/libc-64.so.6(__libc_start_main+0xf0)[0x7f5cec394830]\r\nr2(+0x3329)[0x560908649329]\r\n\r\nyou can see it here:\r\nhttps://asciinema.org/a/w3p6MTtmYOBVBPJtWonXPPUdk\r\n\r\nI've used this libc from a CTF webpage.\r\n[libc-64.so.6.gz](https://github.com/radare/radare2/files/2122639/libc-64.so.6.gz)\r\n","createdAt":"2018-06-21T07:55:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10398#issuecomment-399010662","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5OTE0OTE4OQ==","author":{"login":"soez"},"authorAssociation":"CONTRIBUTOR","body":"fixed, if you find more bugs tell me or open issue :+1: ","createdAt":"2018-06-21T15:42:36Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10398#issuecomment-399149189","viewerDidAuthor":false}],"number":10398,"title":"dmh not shows correctly freed chunk"},{"body":"When binding listening ports in C, you're allowed to specify 0 for the port and the OS will pick an available port for you. When attempting that with `=h& 0`, it appears radare will use the default port.\r\n\r\nIt would be nice if i could specify either 0 or maybe a negative port number and radare will pass through to the OS the random port selection.","comments":[],"number":10382,"title":"r2 http random port bind"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Archlinux amd64 intel x86-64 64\r\n| File format of the file you reverse (mandatory)      | memory dump\r\n| Architecture/bits of the file (mandatory)            | msp430/16\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.6.0 0 @ linux-x86-64 git.2.6.0                    commit: HEAD build: 2018-05-23__01:38:10\r\n\r\n### Expected behavior\r\nThere being no XREF lines pointing to parts of the binary that were marked as \"data\" with 'dd' in visual mode.\r\n\r\n### Actual behavior\r\nThere are XREF lines referring to data as if it were code to be executed (it is not).\r\n\r\n### Steps to reproduce the behavior\r\n- Mark functions and data in the memory dump in msp430Memdump.zip with `df` and `dd` as shown \r\n\r\n> [0x00004a32 28% 580 binForR2]> pd $r @ get_from_table+102 # 0x4a32\r\n> |           0x00004a32      3a41           pop r10\r\n> |           0x00004a34      3b41           pop r11\r\n> \\           0x00004a36      3041           ret\r\n>             0x00004a38 hex length=340 delta=0\r\n> 0x00004a38  5765 6c63 6f6d 6520 746f 2074 6865  Welcome to the\r\n> 0x00004a46  206c 6f63 6b20 636f 6e74 726f 6c6c   lock controll\r\n> 0x00004a54  6572 2e00 596f 7520 6361 6e20 6f70  er..You can op\r\n> 0x00004a62  656e 2074 6865 2064 6f6f 7220 6279  en the door by\r\n> 0x00004a70  2065 6e74 6572 696e 6720 2761 6363   entering 'acc\r\n> 0x00004a7e  6573 7320 5b79 6f75 7220 6e61 6d65  ess [your name\r\n> 0x00004a8c  5d20 5b70 696e 5d27 0000 4e6f 2073  ] [pin]'..No s\r\n> 0x00004a9a  7563 6820 626f 782e 0041 6363 6573  uch box..Acces\r\n> 0x00004aa8  7320 6772 616e 7465 642e 0041 6363  s granted..Acc\r\n> 0x00004ab6  6573 7320 6772 616e 7465 643b 2062  ess granted; b\r\n> 0x00004ac4  7574 2061 6363 6f75 6e74 206e 6f74  ut account not\r\n> 0x00004ad2  2061 6374 6976 6174 6564 2e00 4163   activated..Ac\r\n> 0x00004ae0  6565 7373 2064 656e 6965 6400 4361  eess denied.Ca\r\n> 0x00004aee  6e20 6e6f 7420 6861 7665 2061 2070  n not have a p\r\n> 0x00004afc  696e 2077 6974 6820 6869 6768 2062  in with high b\r\n> 0x00004b0a  6974 2073 6574 2e00 5573 6572 2061  it set..User a\r\n> 0x00004b18  6c72 6561 6479 2068 6173 2061 6e20  lready has an\r\n> 0x00004b26  6163 636f 756e 742e 0041 6464 696e  account..Addin\r\n> 0x00004b34  6720 7573 6572 2061 6363 6f75 6e74  g user account\r\n> 0x00004b42  2025 7320 7769 7468 2070 696e 2025   %s with pin %\r\n> 0x00004b50  782e 0a00 496e 7661 6c69 6420 636f  x...Invalid co\r\n> 0x00004b5e  6d6d 616e 642e 0000 0b12 0a12 0912  mmand.........\r\n> 0x00004b6c  0812 0712 3150 00fa 3e40 0500 3f40  ....1P..>@..?@\r\n> 0x00004b7a  0300 b012 7847 084f 3f40 384a b012  ....xG.O?@8J..\r\n> 0x00004b88  504d 3f40                           PM?@\r\n> 0x00004b88  504d 3f40                           PM?@\r\n> / (fcn) run 390\r\n> |   run ();\r\n> |           0x00004b66      0b12           push r11\r\n> |           ; CODE XREF from 0x00004a80 (get_from_table + 180)\r\n> |           0x00004b68      0a12           push r10\r\n> |           0x00004b6a      0912           push r9\r\n> |           ; CODE XREF from 0x00004a86 (get_from_table + 186)\r\n> |           0x00004b6c      0812           push r8\r\n> |           ; CODE XREF from 0x00004a9c (get_from_table + 208)\r\n> |           0x00004b6e      0712           push r7\r\n> |           0x00004b70      315000fa       add #0xfa00, r1\r\n> |           0x00004b74      3e400500       mov #0x0005, r14\r\n> |           0x00004b78      3f400300       mov #0x0003, r15\r\n> |           0x00004b7c      b0127847       call #0x4778\r\n> |           0x00004b80      084f           mov r15, r8\r\n> |           0x00004b82      3f40384a       mov #0x4a38, r15\r\n> |           0x00004b86      b012504d       call #0x4d50\r\n> |           0x00004b8a      3f40584a       mov #0x4a58, r15\r\n> |           0x00004b8e      b012504d       call #0x4d50\r\n> |           ; CODE XREF from 0x00004aa0 (get_from_table + 212)\r\n> |           0x00004b92      3f40954a       mov #0x4a95, r15\r\n> |           0x00004b96      b012504d       call #0x4d50\r\n> |           0x00004b9a      0e43           clr r14\r\n> |           0x00004b9c      3740ff05       mov #0x05ff, r7\r\n> |           ; CODE XREF from 0x00004ab8 (get_from_table + 236)\r\n> |       ,=< 0x00004ba0      053c           jmp $+0x000c\r\n\r\n- Notice that in the run function, for example at address 4b6c there are XREF comment-lines which refer to the data block preceding the run function as if it were code.\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n[msp430Memdump.zip](https://github.com/radare/radare2/files/2100053/msp430Memdump.zip)\r\n\r\n\r\n### Another surely unrelated issue that is also visible\r\n- The last line of the data display (address 4b88) is duplicated.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjkyMQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10345#issuecomment-644522921","viewerDidAuthor":false}],"number":10345,"title":"CODE XREF from ADDRESS, where address is data, not code"},{"body":"This can be used in:\r\n\r\n* [ ] the diagonal edges in the graphs (VVE)\r\n* [ ] pie charts (?ep command)\r\n* [ ] Smaller QR Codes (pq command)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM5Njc5NTQ3OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Please note it should be a separate config option, since not all computers/setups have Braille fonts installed.","createdAt":"2018-06-13T02:40:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10328#issuecomment-396795479","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0Njc1ODgwOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping @cyanpencil ","createdAt":"2018-12-12T21:55:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10328#issuecomment-446758809","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2NzM4MTk3OQ==","author":{"login":"deepakchethan"},"authorAssociation":"CONTRIBUTOR","body":"Will start working on this ","createdAt":"2019-12-19T08:07:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10328#issuecomment-567381979","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2Nzc0Njk5Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Welcome back!\n\n> On 19 Dec 2019, at 17:07, dodococo <notifications@github.com> wrote:\n> \n> ï»¿\n> Will start working on this\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2019-12-20T01:20:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10328#issuecomment-567746996","viewerDidAuthor":false}],"number":10328,"title":"Support utf8 dots for better \"ascii\" art"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 18.04 LTS x86_64\r\n| File format of the file you reverse (mandatory)      | ELF \r\n| Architecture/bits of the file (mandatory)            | x86_64 \r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.7.0-git 18424 @ linux-x86-64 git.2.6.0-146-gcfe152b0f commit: cfe152b0fcbbdc1161ee84387c5d5582aed2c16b build: 2018-06-07__04:31:56\r\n\r\n\r\n### Expected behavior\r\n\r\n### Actual behavior\r\n\r\ncmd.vprompt setting In visual mode does not work properly when debug program\r\n\r\n```\r\n# works well in radare command line : results in single line\r\n\r\n:> dm~*\r\n\r\n# does not work properly : results in multiple lines like just typed in \"dm\"\r\n\r\ncmd.vprompt> dm~* \r\n\r\n# this one does not work also\r\n\r\ncmd.vprompt> dm | grep '*'\r\n\r\n---------------------------------------------------------------------------------------\r\n\r\n# this works but does not work when entering \"libc\" library ( e.g puts ) : value disappear\r\n# if i run r2 shell command with \": dm\" then the value appears again.\r\n\r\ncmd.vprompt> dm.\r\n```\r\n\r\n\r\n### Steps to reproduce the behavior \r\n\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\n","comments":[],"number":10283,"title":"cmd.vprompt setting in visual mode does not work properly  when debug program"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Exherbo x86 64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            |  x86 64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.7.0-git 18210 @ linux-x86-64 git.2.6.0-53-gc5fce46a8 commit: c5fce46a8e04a075ddb459ff532e54d597b5159d build: 2018-05-27__18:49:17\r\n\r\n### Expected behavior\r\n\r\nUsing RAP to remotely debug an executable should work\r\n\r\n### Actual behavior\r\n\r\nIt doesn't work, the RAP server doesn't seem to read the right address offset from the debuggee\r\n\r\n### Steps to reproduce the behavior \r\n- launch a server with `radare2 rap://:1234`\r\n- start a client with `radare2 rap://127.0.0.1:1234/dbg:///bin/ls`\r\n- on the client, run `px`, output should be `0xFF` only\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\nI've debugged it up until here: https://github.com/radare/radare2/blob/master/libr/io/p/io_ptrace.c#L65\r\nthe function call returns `0xFF` which indicates an error in the `ptrace()` call. The \"textual\" error is `Input/Output error`. The PID is the right PID.\r\n\r\nThe given address to ptrace() is always `0x0` which means `io->off` is also at `0x0` here https://github.com/radare/radare2/blob/master/libr/io/p/io_ptrace.c#L77\r\nWhen debugging a regular binary, it seems the address should be something else, like `0x840d30f0`\r\n\r\nFrom there, I searched which function could set that value but I'm a bit lost since I don't really know the architecture. I'm willing to look further, any pointer as to what / where to look is appreciated :)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM5MzA5Nzc3OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i guess thatâ€™s related to the siol change\n\n> On 28 May 2018, at 14:34, Arnaud Lefebvre <notifications@github.com> wrote:\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tExherbo x86 64\n> File format of the file you reverse (mandatory)\tELF\n> Architecture/bits of the file (mandatory)\tx86 64\n> r2 -v full output, not truncated (mandatory)\tradare2 2.7.0-git 18210 @ linux-x86-64 git.2.6.0-53-gc5fce46a8 commit: c5fce46 <https://github.com/radare/radare2/commit/c5fce46a8e04a075ddb459ff532e54d597b5159d> build: 2018-05-27__18:49:17\n> Expected behavior\n> \n> Using RAP to remotely debug an executable should work\n> \n> Actual behavior\n> \n> It doesn't work, the RAP server doesn't seem to read the right address offset from the debuggee\n> \n> Steps to reproduce the behavior\n> \n> launch a server with radare2 rap://:1234\n> start a client with radare2 rap://127.0.0.1:1234/dbg:///bin/ls\n> on the client, run px, output should be 0xFF only\n> Additional Logs, screenshots, source-code, configuration dump, ...\n> \n> I've debugged it up until here: https://github.com/radare/radare2/blob/master/libr/io/p/io_ptrace.c#L65 <https://github.com/radare/radare2/blob/master/libr/io/p/io_ptrace.c#L65>\n> the function call returns 0xFF which indicates an error in the ptrace() call. The \"textual\" error is Input/Output error. The PID is the right PID.\n> \n> The given address to ptrace() is always 0x0 which means io->off is also at 0x0 here https://github.com/radare/radare2/blob/master/libr/io/p/io_ptrace.c#L77 <https://github.com/radare/radare2/blob/master/libr/io/p/io_ptrace.c#L77>\n> When debugging a regular binary, it seems the address should be something else, like 0x840d30f0\n> \n> From there, I searched which function could set that value but I'm a bit lost since I don't really know the architecture. I'm willing to look further, any pointer as to what / where to look is appreciated :)\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/10211>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lsA2EUv2Q5sKPrUOl4Qpa1_IhxqDks5t2-7ggaJpZM4UQIQC>.\n> \n\n","createdAt":"2018-05-30T09:39:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10211#issuecomment-393097778","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5MzEwOTQ4NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"try with -e io.va=0","createdAt":"2018-05-30T10:19:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10211#issuecomment-393109485","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5MzEwOTUyMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cc @jroimartin ","createdAt":"2018-05-30T10:20:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10211#issuecomment-393109520","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjkzOA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10211#issuecomment-644522938","viewerDidAuthor":false}],"number":10211,"title":"Remote rap debug: ptrace PEEKTEXT doesn't have the right address"},{"body":"OS: Linux Mint 18.3 x64\r\nLinux rd 4.13.0-32-generic #35~16.04.1-Ubuntu SMP Thu Jan 25 10:13:43 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\nRadare2:\r\nradare2 2.6.0-git 18142 @ linux-x86-64 git.2.5.0-229-g731b067\r\ncommit: 731b067f25aa0dbc5553165bf952288c0ce7a0b1 build: 2018-05-11__11:59:21\r\n\r\nFile formart:\r\nELF64\r\n\r\nGCC:\r\ngcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.9) \r\n\r\n\r\nI run the debugger:\r\n$r2 -A -d example\r\nThen I am restarting debugger, type\r\n':> ood'\r\nAfter that I get message \"Unable to find filedescriptor <number>\" and can continued debug.\r\nEach time, when I restart debugger via 'ood' I get more and more this message \"Unable to find filedescriptor <number+1>'\r\n\r\nHowever, If I try debug for example \r\n$r2 -A -d ls\r\nand than restart debug via 'ood', I don't get message \"unable to find filedescriptor\".\r\n\r\n![question](https://user-images.githubusercontent.com/12990408/40536006-74addb04-6013-11e8-8be1-72475159c3ea.png)\r\n[example.tar.gz](https://github.com/radare/radare2/files/2038710/example.tar.gz)\r\n\r\n\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM5MzIwMjg5NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i think those are harmless warnings, but enotime to test right now, if anyone is in the mood\n\n> On 25 May 2018, at 11:03, Egor <notifications@github.com> wrote:\n> \n> OS: Linux Mint 18.3 x64\n> Linux rd 4.13.0-32-generic #35 <https://github.com/radare/radare2/pull/35>~16.04.1-Ubuntu SMP Thu Jan 25 10:13:43 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n> \n> Radare2:\n> radare2 2.6.0-git 18142 @ linux-x86-64 git.2.5.0-229-g731b067\n> commit: 731b067 <https://github.com/radare/radare2/commit/731b067f25aa0dbc5553165bf952288c0ce7a0b1> build: 2018-05-11__11:59:21\n> \n> File formart:\n> ELF64\n> \n> GCC:\n> gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.9)\n> \n> I run the debugger:\n> $r2 -A -d example\n> Then I am restarting debugger, type\n> ':> ood'\n> After that I get message \"Unable to find filedescriptor \" and can continued debug.\n> Each time, when I restart debugger via 'ood' I get more and more this message \"Unable to find filedescriptor <number+1>'\n> \n> However, If I try debug for example\n> $r2 -A -d ls\n> and than restart debug via 'ood', I don't get message \"unable to find filedescriptor\".\n> \n>  <https://user-images.githubusercontent.com/12990408/40536006-74addb04-6013-11e8-8be1-72475159c3ea.png>\n> example.tar.gz <https://github.com/radare/radare2/files/2038710/example.tar.gz>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/10183>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lpYXi6bqGTJ1-r9S8gUDKmh-PBExks5t18jVgaJpZM4UNnfx>.\n> \n\n","createdAt":"2018-05-30T15:19:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10183#issuecomment-393202895","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyNTk4NjcwMQ==","author":{"login":"Anutrix"},"authorAssociation":"NONE","body":"Same issue here. Any updates.\r\nUpdate: Issue gone if the correct argument expected by the binary is given.\r\n","createdAt":"2018-10-01T17:09:26Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10183#issuecomment-425986701","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyODE1NDkyNA==","author":{"login":"flobotics"},"authorAssociation":"NONE","body":"Hi,\r\nthe issue with this is, that after a restart, it does not stop at breakpoints anymore, even the breakpoints still exists.\r\n\r\n```\r\n[0x7f6debcfec30]> dor stdin=!ragg2 -P 32 -r, program=./test\r\n[0x7f6debcfec30]> do\r\nchild received signal 9\r\nProcess with PID 23484 started...\r\n= attach 23484 23484\r\nFile dbg://./test reopened in read-write mode\r\nUnable to find filedescriptor 3\r\nUnable to find filedescriptor 3\r\n23484\r\n[0x7fac2f6ecc30]> dc\r\nchild stopped with signal 28\r\n[+] SIGNAL 28 errno=0 addr=0x00000000 code=128 ret=0\r\n[0x7fac2f6ecc30]> db\r\n0x004005bf - 0x004005c0 1 --x sw break enabled valid cmd=\"\" cond=\"\" name=\"0x004005bf\" module=\"/home/user/test\"\r\n\r\n\r\n```\r\n\r\n\r\n```\r\nradare2 -v\r\nradare2 4.4.0-git 24193 @ linux-x86-64 git.4.3.1-199-gc6e8fb1\r\ncommit: c6e8fb1e30371427cc7b57569cf1df6bea468bc6 build: 2020-04-04__13:02:01\r\n```","createdAt":"2020-05-13T18:03:56Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10183#issuecomment-628154924","viewerDidAuthor":false}],"number":10183,"title":"Unable to find filedescriptor"},{"body":"# Very old versions \r\n\r\n- [x] MacPorts - very old version (1.2.1) https://github.com/macports/macports-ports/tree/master/devel/radare2\r\n- [ ] Funtoo - very old version (2.0.1) https://github.com/funtoo/dev-kit/tree/master/dev-util/radare2\r\n- [x] OpenBSD - super old version (0.10.6) http://openports.se/devel/radare2/main\r\n      - [x] https://github.com/radare/radare2/issues/7560 (fix debugger)\r\n- [ ] Trisquel linux - 0.9.6 version. No comments \r\n- [x] SliTaz - 0.9.8 version http://bugs.slitaz.org/bugs.cgi?id=202\r\n\r\n~ GoboLinux - very old version (1.1.0) https://github.com/gobolinux/Recipes/tree/master/trunk/Radare2/1.1.0~ *was removed*\r\n~  Hyperbola - very old version (1.4.0) https://www.hyperbola.info/packages/?q=radare2~ *was removed*\r\n\r\n# Missing packages\r\n\r\n- [x] Fedora https://bugzilla.redhat.com/show_bug.cgi?id=1368855\r\n- [ ] OpenSUSE\r\n- [ ] Linux Mint\r\n- [x] Mageia https://bugs.mageia.org/show_bug.cgi?id=23064\r\n  - [x] https://github.com/radare/radare2/issues/10159 (fix build)\r\n- [x] ALT Linux https://bugzilla.altlinux.org/show_bug.cgi?id=34927\r\n- [ ] ROSA Linux https://bugzilla.rosalinux.ru/show_bug.cgi?id=9008\r\n- [ ] Astra Linux https://bt.astralinux.ru/view.php?id=134\r\n\r\n# Other\r\n - [ ] AppImage\r\n - [ ] Flatpak\r\n - [ ] Snap https://github.com/radare/radare2/issues/10428\r\n - [ ] FreeBSD build issues: https://github.com/radare/radare2/issues/10439 and https://github.com/radare/radare2/issues/10440","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM5MDYwMDE1Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"voidlinux\n\n\n> On 20 May 2018, at 05:31, Anton Kochkov <notifications@github.com> wrote:\n> \n> Very old versions\n> \n>  MacPorts - very old version (1.2.1) https://github.com/macports/macports-ports/tree/master/devel/radare2 <https://github.com/macports/macports-ports/tree/master/devel/radare2>\n>  Funtoo - very old version (2.0.1) https://github.com/funtoo/dev-kit/tree/master/dev-util/radare2 <https://github.com/funtoo/dev-kit/tree/master/dev-util/radare2>\n>  GoboLinux - very old version (1.1.0) https://github.com/gobolinux/Recipes/tree/master/trunk/Radare2/1.1.0 <https://github.com/gobolinux/Recipes/tree/master/trunk/Radare2/1.1.0>\n>  Hyperbola - very old version (1.4.0) https://www.hyperbola.info/packages/?q=radare2 <https://www.hyperbola.info/packages/?q=radare2>\n>  OpenBSD - super old version (0.10.6) http://openports.se/devel/radare2/main <http://openports.se/devel/radare2/main>\n>  Trisquel linux - 0.9.6 version. No comments\n> Missing packages\n> \n>  Fedora https://bugzilla.redhat.com/show_bug.cgi?id=1368855 <https://bugzilla.redhat.com/show_bug.cgi?id=1368855>\n>  OpenSUSE\n>  Linux Mint\n>  Mageia https://bugs.mageia.org/show_bug.cgi?id=23064 <https://bugs.mageia.org/show_bug.cgi?id=23064>\n>  ALT Linux https://bugzilla.altlinux.org/show_bug.cgi?id=34927 <https://bugzilla.altlinux.org/show_bug.cgi?id=34927>\n>  ROSA Linux https://bugzilla.rosalinux.ru/show_bug.cgi?id=9008 <https://bugzilla.rosalinux.ru/show_bug.cgi?id=9008>\n>  Astra Linux\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/10137>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lnXoSPiCiE1vUQJL6yCBC4md6t6oks5t0OOkgaJpZM4UF8Mq>.\n> \n\n","createdAt":"2018-05-21T09:18:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10137#issuecomment-390600156","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5MDY3MDYzNA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@radare Voidlinux what?","createdAt":"2018-05-21T14:28:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10137#issuecomment-390670634","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5MDY3MTE4NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"theres no voidlinux in the badge\n\n> On 21 May 2018, at 16:28, Anton Kochkov <notifications@github.com> wrote:\n> \n> @radare <https://github.com/radare> Voidlinux what?\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/10137#issuecomment-390670634>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lvdpBrox3f9C2pkxRXyiTQU9fOi8ks5t0s8HgaJpZM4UF8Mq>.\n> \n\n","createdAt":"2018-05-21T14:30:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10137#issuecomment-390671184","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5MDY3MjEwMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@radare it is because VoidLinux not yet merged in this repology tool: https://github.com/repology/repology/pull/400","createdAt":"2018-05-21T14:33:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10137#issuecomment-390672101","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5NjQ1OTEyMg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"I wrote an email to OpenBSD maintainer but no response. If you have other means to ping them - please do.","createdAt":"2018-06-12T04:04:28Z","includesCreatedEdit":false,"isMinimized":true,"minimizedReason":"outdated","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10137#issuecomment-396459122","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5ODk3NDE5OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"https://github.com/radare/radare2/issues/10428","createdAt":"2018-06-21T04:42:14Z","includesCreatedEdit":false,"isMinimized":true,"minimizedReason":"outdated","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/10137#issuecomment-398974199","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5OTIwMjUyNg==","author":{"login":"simos"},"authorAssociation":"CONTRIBUTOR","body":"By adding the snap package of radare2 (#10428), it will cover the following distributions:\r\n1.  Arch Linux\r\n2.  Debian\r\n3.  elementary OS\r\n4.  Fedora\r\n5.  Gentoo\r\n6.  Linux Mint\r\n7.  Manjaro\r\n8.  OpenEmbedded/Yocto\r\n9.  openSUSE\r\n10. OpenWrt\r\n11. Solus\r\n12. Raspbian\r\n13. Ubuntu\r\n\r\nMultiply that to the following four architectures: i386, amd64, armhf and arm64.\r\nIn practice, more distributions are able to install those packages. See a live example of the Skype snap package at https://snapcraft.io/skype and the distribution stats at the end of the page.\r\n\r\nI am also interested in packaging Cutter. That will come at a latter date.\r\n\r\nI can take care of issues that may arise from the packaging and respond to them on github (you can ping me in those reports).\r\n\r\nFor testing, you can try my unofficial package (only for amd64) at https://snapcraft.io/radare2-simosx\r\nI'll remove my unofficial package once the official radare2 snap package is released.\r\nThe snap package has [`strict` confinement](https://docs.snapcraft.io/reference/confinement) meaning that if there is a security vulnerability out there, it will not affect the rest of the system.","createdAt":"2018-06-21T18:37:15Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10137#issuecomment-399202526","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzNTcwMzAyMg==","author":{"login":"devnexen"},"authorAssociation":"CONTRIBUTOR","body":"@XVilka we re going to update OpenBSD version finally ;-) straight to the 3.0.1 release.","createdAt":"2018-11-04T20:29:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10137#issuecomment-435703022","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzNjIyNjYwNQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Also would be nice to add radare2 package in DragonFlyBSD DPorts repository: https://github.com/DragonFlyBSD/DPorts","createdAt":"2018-11-06T11:51:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10137#issuecomment-436226605","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzNjM5MjA5NQ==","author":{"login":"devnexen"},"authorAssociation":"CONTRIBUTOR","body":"The proper repository to contribute is more this one https://github.com/DragonFlyBSD/DeltaPorts, but there seemingly already an attempt https://github.com/DragonFlyBSD/DeltaPorts/blob/master/ports/devel/radare2/STATUS (ie most of dragonflybsd ports are \"copy/paste\" of FreeBSD's as possible).","createdAt":"2018-11-06T20:11:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10137#issuecomment-436392095","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1NzUxMzI3MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@devnexen could you please try to update radare2 to 4.5.0 in these DeltaPorts? ","createdAt":"2020-07-13T11:47:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10137#issuecomment-657513271","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1ODA0NDM2MA==","author":{"login":"devnexen"},"authorAssociation":"CONTRIBUTOR","body":"Thanks for the reminder, as first step I did a PR to minimize local dports patching (and fix the build in the process anyway).","createdAt":"2020-07-14T08:24:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10137#issuecomment-658044360","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3Mzk3NDA0MA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@devnexen I did https://github.com/radareorg/radare2/pull/17470 also I think it's possible to update the package in DragonFly to 4.5.0.\r\nWe also plan the patch release 4.5.1 soon: https://github.com/radareorg/radare2/milestone/57\r\n\r\nTell me if the patch is required so I can cherry-pick it to the 4.5.1 branch.","createdAt":"2020-08-14T09:06:14Z","includesCreatedEdit":false,"isMinimized":true,"minimizedReason":"outdated","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10137#issuecomment-673974040","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NjU3NzEzNw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@devnexen since you also improved Illumos/Solaris support, please consider to publish it also in [OpenIndiana](https://www.openindiana.org/packages/) package repository:\r\n- http://docs.openindiana.org/dev/userland/\r\n- https://github.com/OpenIndiana/oi-userland/tree/oi/hipster/components","createdAt":"2020-09-22T08:18:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/10137#issuecomment-696577137","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg1MDQwNjMwNw==","author":{"login":"q2dg"},"authorAssociation":"NONE","body":"I've notice \"radare2\" package in Ubuntu has disappeared from \"hirsute\" version (21.04). See this:\r\nhttps://packages.ubuntu.com/search?suite=hirsute&searchon=names&keywords=radare2\r\nand this, instead:\r\nhttps://packages.ubuntu.com/search?suite=groovy&searchon=names&keywords=radare2\r\nDo you know the reason?\r\nThanks!\r\n","createdAt":"2021-05-28T13:07:29Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10137#issuecomment-850406307","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg1MTIzOTM1MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Thanks for the heads up on this. I waited a bit to see if someone would reply. But I donâ€™t know which are the actual reasons for this.\n\nIâ€™ll contact the maintainer\n\n> On 28 May 2021, at 15:07, Osqui LittleRiver ***@***.***> wrote:\n> \n> ï»¿\n> I've notice \"radare2\" package in Ubuntu has dissapeared from \"hirsute\" version (21.04). See this:\n> https://packages.ubuntu.com/search?suite=**hirsute**&searchon=names&keywords=radare2\n> and this, instead:\n> https://packages.ubuntu.com/search?suite=**groovy**&searchon=names&keywords=radare2\n> Do you know the reason?\n> Thanks!\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2021-05-31T06:51:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10137#issuecomment-851239351","viewerDidAuthor":false}],"number":10137,"title":"[META] Packaging"},{"body":"We have enough power at our paid AppVeyor account. Would be nice to have the version for Windows with all sanitizers enabled, which will help us to catch the bugs easier.\r\n\r\nSee https://clang.llvm.org/docs/MSVCCompatibility.html and Google Chrome success story http://blog.llvm.org/2018/03/clang-is-now-used-to-build-chrome-for.html","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM4OTk0MDYyOQ==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"https://github.com/mesonbuild/meson/issues/534\r\nhttps://github.com/mesonbuild/meson/issues/2560","createdAt":"2018-05-17T17:10:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10115#issuecomment-389940629","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzODY1MDk5Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@pelijah it was fixed by https://github.com/mesonbuild/meson/pull/4250","createdAt":"2018-11-14T12:50:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10115#issuecomment-438650996","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3MzM4ODI2NA==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"```\r\nC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\um\\winnt.h:2653:1: error: conflicting types for '_bittest'\r\n_bittest (\r\n^\r\nC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\um\\winnt.h:2653:1: note: '_bittest' is a builtin with type 'unsigned char (const long *, long)'\r\nC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\um\\winnt.h:2677:1: error: conflicting types for '_interlockedbittestandset'\r\n_interlockedbittestandset (\r\n^\r\nC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\um\\winnt.h:2677:1: note: '_interlockedbittestandset' is a builtin with type 'unsigned char (volatile long *, long)'\r\nC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\um\\winnt.h:2683:1: error: conflicting types for '_interlockedbittestandreset'\r\n_interlockedbittestandreset (\r\n^\r\nC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\um\\winnt.h:2683:1: note: '_interlockedbittestandreset' is a builtin with type 'unsigned char (volatile long *, long)'\r\nC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\um\\winnt.h:2689:1: error: conflicting types for '_bittest64'\r\n_bittest64 (\r\n^\r\nC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\um\\winnt.h:2689:1: note: '_bittest64' is a builtin with type 'unsigned char (const long long *, long long)'\r\nC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\um\\winnt.h:2713:1: error: conflicting types for '_interlockedbittestandset64'\r\n_interlockedbittestandset64 (\r\n^\r\nC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\um\\winnt.h:2713:1: note: '_interlockedbittestandset64' is a builtin with type 'unsigned char (volatile long long *, long long)'\r\nC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\um\\winnt.h:2719:1: error: conflicting types for '_interlockedbittestandreset64'\r\n_interlockedbittestandreset64 (\r\n^\r\nC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\um\\winnt.h:2719:1: note: '_interlockedbittestandreset64' is a builtin with type 'unsigned char (volatile long long *, long long)'\r\nC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\um\\winnt.h:2889:1: error: conflicting types for '_InterlockedIncrement16'\r\nInterlockedIncrement16 (\r\n^\r\n```","createdAt":"2019-03-15T18:04:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10115#issuecomment-473388264","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3Mzc3NTgyNQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@pelijah what version of Clang/LLVM you are using?","createdAt":"2019-03-18T05:34:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10115#issuecomment-473775825","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NDAxNDgxMQ==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"7.0.1","createdAt":"2019-03-18T17:16:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10115#issuecomment-474014811","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NDAxNjAwNA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"TOO OLD. Try with 8.0.0-rc5 (release is a matter of days now).","createdAt":"2019-03-18T17:19:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10115#issuecomment-474016004","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NDAyMjY1OQ==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"```\r\n[1/1116] Compiling C object shlr/cafa177@@r2windbg@sta/windbg_kd.c.obj.\r\nFAILED: shlr/cafa177@@r2windbg@sta/windbg_kd.c.obj\r\nclang @shlr/cafa177@@r2windbg@sta/windbg_kd.c.obj.rsp\r\nAssertion failed: !isAnnotation() && \"Annotation tokens have no length field\", file C:\\src\\llvm_package_800-rc5\\llvm\\tools\\clang\\include\\clang/Lex/Token.h, line 128\r\n0x00007FF6F7892B76 (0x0000000000000016 0x00007FF6F7892B70 0x000000B300000000 0x00007FFD57EBA510)\r\n0x00007FFD57E3DA2D (0x0000000000000001 0x00007FF600000000 0x0000000000000080 0x00007FF6FAD5D43E), raise() + 0x1DD bytes(s)\r\n0x00007FFD57E3E901 (0x00007FFD00000003 0x00007FFD00000003 0x00007FF6FAD5D43E 0x00007FF6FAD5C2B0), abort() + 0x31 bytes(s)\r\n0x00007FFD57E40261 (0x0000000000000080 0x00007FF6FAD5D43E 0x00007F0100000000 0x0000EBDB6EC94E5D), _get_wpgmptr() + 0x18A1 bytes(s)\r\n0x00007FFD57E40591 (0x00000000001B90AD 0x00000000801B90AD 0x00000205B58EFCF0 0x000000B3A0D8C7E0), _wassert() + 0x71 bytes(s)\r\n0x00007FF6F9993F61 (0x00000000000071E6 0x000000B3A0D8C787 0x000000B3A0D8C770 0x00000205B585883E)\r\n0x00007FF6F99917AA (0x00000001001A42DF 0x0000000000000000 0x000000000000003E 0x00000008001A42E5)\r\n0x00007FF6F9991240 (0x00000001001A4308 0x0000000000000000 0x0000000000000013 0x00000001001A4309)\r\n0x00007FF6F9977C54 (0x00000205B58119A8 0x00000000001A412F 0x00000205B5858400 0x0000000000000008)\r\n0x00007FF6F996CD46 (0x00000205B513F8C0 0x00007FF6F9932CE4 0x0000EBDB6EC95E3D 0x0000000000010000)\r\n0x00007FF6F99328D5 (0x000000B3A0D8D8CF 0x000000B3001A3FCC 0x00000205001A4004 0x000000B3A0D8DAF0)\r\n0x00007FF6F9925A6C (0x00000205B51D4AD0 0x00000205B51D4AB8 0x00000205B51D4AE8 0x010000B3A0D8D901)\r\n0x00007FF6F992A867 (0x00000000001A3543 0x00000205B51D4AC0 0x0000000000000000 0x0000EBDB6EC95C8D)\r\n0x00007FF6F99293A8 (0x0000EBDB6EC9530D 0x000000B3A0D8DAF0 0x0000000000000003 0x00000205B51D4AB0)\r\n0x00007FF6F9932CE4 (0x00000205B5721F98 0x0000020100000000 0x0000EBDB6EC9526D 0x0000EBDB6EC9531D)\r\n0x00007FF6F8CB77A6 (0x0000000000000000 0x0000000000000000 0x0000000000000000 0x0000000000000000)\r\n0x00007FF6F8CB7030 (0x00000205B51D4AB0 0x00007FF6FAE1796F 0x0000000000000000 0x00007FF6F99293A8)\r\n0x00007FF6F8CB59AD (0x00000205B513E970 0x00007FF6F9B67E7C 0x00000205B51D4AB0 0x00007FF6F9B78600)\r\n0x00007FF6F8CB4635 (0x0000000000000009 0x0000000000000013 0x00007FF6FA89F3E6 0x0000000000000004)\r\n0x00007FF6F8CB0706 (0x0000000000000000 0x0000000000000000 0x00000205B513C610 0x00000205B50E9930)\r\n0x00007FF6F80249B0 (0x00000000000000C0 0x00000205B5164E30 0x00000205B50E9930 0x00000205B5128AB0)\r\n0x00007FF6F7FE051F (0x00000205B510E701 0x0000000000000000 0x0000000000000000 0x0000000000000055)\r\n0x00007FF6F8081E37 (0x00000205B50E0000 0x0000000000800003 0x0000000000001000 0x0000000000001010)\r\n0x00007FF6F5CB75F7 (0x00000000000006A6 0x0000000000000000 0x0000000008000008 0x00000000000006B0)\r\n0x00007FF6F5CB47D2 (0x0000000000000000 0x0000000000000000 0x0000000000000000 0x0000000000000000)\r\n0x00007FF6F9B73D00 (0x0000000000000000 0x0000000000000000 0x0000000000000000 0x0000000000000000)\r\n0x00007FFD5BAA81F4 (0x0000000000000000 0x0000000000000000 0x0000000000000000 0x0000000000000000), BaseThreadInitThunk() + 0x14 bytes(s)\r\n0x00007FFD5BBEA251 (0x0000000000000000 0x0000000000000000 0x0000000000000000 0x0000000000000000), RtlUserThreadStart() + 0x21 bytes(s)\r\nclang: error: clang frontend command failed due to signal (use -v to see invocation)\r\nclang version 8.0.0 (tags/RELEASE_800/rc5)\r\nTarget: x86_64-pc-windows-msvc\r\nThread model: posix\r\nInstalledDir: C:\\Program Files\\LLVM\\bin\r\n```","createdAt":"2019-03-18T17:34:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10115#issuecomment-474022659","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NDAyNDA1MA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"can you please paste output with `-v`? I am reporting bug to Clang devs.","createdAt":"2019-03-18T17:37:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10115#issuecomment-474024050","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NDAyOTIxNg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"https://bugs.llvm.org/show_bug.cgi?id=41128","createdAt":"2019-03-18T17:49:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10115#issuecomment-474029216","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NDAzNTIyMg==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"Preprocessed source(s) and associated run script(s):\r\n[Temp.zip](https://github.com/radare/radare2/files/2979599/Temp.zip)\r\n","createdAt":"2019-03-18T18:04:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10115#issuecomment-474035222","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NDAzNjk4MQ==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"Another example:\r\n```\r\n[13/971] Compiling C object libr/io/4d97eb2@@r_io@sha/p_io_windbg.c.obj.\r\nFAILED: libr/io/4d97eb2@@r_io@sha/p_io_windbg.c.obj \r\nclang @libr/io/4d97eb2@@r_io@sha/p_io_windbg.c.obj.rsp\r\nclang version 8.0.0 (tags/RELEASE_800/rc5)\r\nTarget: x86_64-pc-windows-msvc\r\nThread model: posix\r\nInstalledDir: C:\\Program Files\\LLVM\\bin\r\n \"C:\\\\Program Files\\\\LLVM\\\\bin\\\\clang.exe\" -cc1 -triple x86_64-pc-windows-msvc19.16.27027 -emit-obj -mincremental-linker-compatible -disable-free -main-file-name io_windbg.c -mrelocation-model pic -pic-level 2 -mthread-model posix -fmath-errno -masm-verbose -mconstructor-aliases -munwind-tables -target-cpu x86-64 -dwarf-column-info -momit-leaf-frame-pointer -v -coverage-notes-file \"C:\\\\dev\\\\radare2\\\\build_clang\\\\libr/io/4d97eb2@@r_io@sha/p_io_windbg.c.gcno\" -resource-dir \"C:\\\\Program Files\\\\LLVM\\\\lib\\\\clang\\\\8.0.0\" -dependency-file \"libr/io\\\\4d97eb2@@r_io@sha\\\\p_io_windbg.c.obj.d\" -sys-header-deps -MT libr/io/4d97eb2@@r_io@sha/p_io_windbg.c.obj -I \"libr/io\\\\4d97eb2@@r_io@sha\" -I . -I \"..\\\\\" -I \"..\\\\libr/include\" -I \"..\\\\libr/include/msvc\" -I \"..\\\\shlr\\\\sdb/src\" -I \"..\\\\shlr\\\\bochs/include\" -I \"..\\\\shlr\\\\./gdb/include\" -I \"..\\\\shlr\\\\./gdb/include/gdbclient\" -I \"..\\\\shlr\\\\./gdb/include/gdbserver\" -I \"..\\\\shlr\\\\windbg\" -I \"..\\\\shlr\\\\qnx/include\" -I \"..\\\\shlr\\\\zip/include\" -I \"..\\\\shlr\\\\ar\" -D _CRT_SECURE_NO_WARNINGS -D _CRT_NONSTDC_NO_DEPRECATE -D CORELIB=1 -internal-isystem \"C:\\\\Program Files\\\\LLVM\\\\lib\\\\clang\\\\8.0.0\\\\include\" -internal-isystem \"C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.16.27023\\\\include\" -internal-isystem \"C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\Include\\\\10.0.17134.0\\\\ucrt\" -internal-isystem \"C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\include\\\\10.0.17134.0\\\\shared\" -internal-isystem \"C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\include\\\\10.0.17134.0\\\\um\" -internal-isystem \"C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\include\\\\10.0.17134.0\\\\winrt\" -O3 -Wall -Winvalid-pch -fdebug-compilation-dir \"C:\\\\dev\\\\radare2\\\\build_clang\" -ferror-limit 19 -fmessage-length 0 -fvisibility hidden -pthread -fno-use-cxa-atexit -fms-extensions -fms-compatibility -fms-compatibility-version=19.16.27027 -fdelayed-template-parsing -fobjc-runtime=gcc -fdiagnostics-show-option -vectorize-loops -vectorize-slp -fcolor-diagnostics -o libr/io/4d97eb2@@r_io@sha/p_io_windbg.c.obj -x c ../libr/io/p/io_windbg.c -faddrsig\r\nclang -cc1 version 8.0.0 based upon LLVM 8.0.0-rc5 default target x86_64-pc-windows-msvc\r\n#include \"...\" search starts here:\r\n#include <...> search starts here:\r\n libr/io\\4d97eb2@@r_io@sha\r\n .\r\n ..\r\n ..\\libr/include\r\n ..\\libr/include/msvc\r\n ..\\shlr\\sdb/src\r\n ..\\shlr\\bochs/include\r\n ..\\shlr\\./gdb/include\r\n ..\\shlr\\./gdb/include/gdbclient\r\n ..\\shlr\\./gdb/include/gdbserver\r\n ..\\shlr\\windbg\r\n ..\\shlr\\qnx/include\r\n ..\\shlr\\zip/include\r\n ..\\shlr\\ar\r\n C:\\Program Files\\LLVM\\lib\\clang\\8.0.0\\include\r\n C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\r\n C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\ucrt\r\n C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\shared\r\n C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\um\r\n C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\winrt\r\nEnd of search list.\r\nAssertion failed: !isAnnotation() && \"Annotation tokens have no length field\", file C:\\src\\llvm_package_800-rc5\\llvm\\tools\\clang\\include\\clang/Lex/Token.h, line 128\r\n0x00007FF6F7892B76 (0x0000000000000016 0x00007FF6F7892B70 0x000000FA00000000 0x00007FFD57EBA510)\r\n0x00007FFD57E3DA2D (0x0000000000000001 0x00007FF600000000 0x0000000000000080 0x00007FF6FAD5D43E), raise() + 0x1DD bytes(s)\r\n0x00007FFD57E3E901 (0x00007FFD00000003 0x00007FFD00000003 0x00007FF6FAD5D43E 0x00007FF6FAD5C2B0), abort() + 0x31 bytes(s)\r\n0x00007FFD57E40261 (0x0000000000000080 0x00007FF6FAD5D43E 0x00007F0100000000 0x00007DF7F384E467), _get_wpgmptr() + 0x18A1 bytes(s)\r\n0x00007FFD57E40591 (0x000000000133F088 0x000000008133F088 0x000001FEDD07DFF0 0x000000FA0538C160), _wassert() + 0x71 bytes(s)\r\n0x00007FF6F9993F61 (0x0000000000000111 0x000001FED8BEDC90 0x0000000000049874 0x000001FED8BFAC80)\r\n0x00007FF6F99917AA (0x000000010133E76A 0x0000000000000000 0x000000000000003E 0x000000080133E770)\r\n0x00007FF6F9991240 (0x000000010133E793 0x0000000000000000 0x0000000000000013 0x000000010133E794)\r\n0x00007FF6F9977C54 (0x000001FEDD075FB0 0x000000000133E5BA 0x000001FEDB5F3AF0 0x0000000000000008)\r\n0x00007FF6F996CD46 (0x000001FED8BEEBE0 0x00007FF6F9932CE4 0x00007DF7F3849407 0x0000000000010000)\r\n0x00007FF6F99328D5 (0x000000FA0538D24F 0x000000FA0133E457 0x000001FE0133E48F 0x000000FA0538D470)\r\n0x00007FF6F9925A6C (0x000001FED8C82AE0 0x000001FED8C82AC8 0x000001FED8C82AF8 0x010000FA0538D301)\r\n0x00007FF6F992A867 (0x000000000133D9CE 0x000001FED8C82AD0 0x0000000000000000 0x00007DF7F3848BB7)\r\n0x00007FF6F99293A8 (0x00007DF7F3848937 0x000000FA0538D470 0x0000000000000003 0x000001FED8C82AC0)\r\n0x00007FF6F9932CE4 (0x0000000000540000 0x000001FED9FBC820 0x000001FEDB73AF90 0x00007DF7F3848927)\r\n0x00007FF6F8CB77A6 (0x0000000000000000 0x0000000000000000 0x0000000000000000 0x0000000000000000)\r\n0x00007FF6F8CB7030 (0x000001FED8C82AC0 0x00007FF6FAE1796F 0x0000000000000000 0x00007FF6F99293A8)\r\n0x00007FF6F8CB59AD (0x000001FED8BEDC90 0x00007FF6F9B67E7C 0x000001FED8C82AC0 0x00007FF6F9B78600)\r\n0x00007FF6F8CB4635 (0x000000000000001F 0x0000000000000016 0x000000FA0538DA48 0x00007FFD57DDCA26)\r\n0x00007FF6F8CB0706 (0x0000000000000000 0x0000000000000000 0x000000FA0538EE28 0x000001FED8B95F10)\r\n0x00007FF6F80249B0 (0x00000000000000C0 0x000001FE00000000 0x000001FED8B95F10 0x000001FED8BEC930)\r\n0x00007FF6F7FE051F (0x000001FED8BB6001 0x0000000000000000 0x0000000000000000 0x0000000000000069)\r\n0x00007FF6F8081E37 (0x000001FED8B90000 0x0000000000800003 0x0000000000001000 0x0000000000001010)\r\n0x00007FF6F5CB75F7 (0x00000000000006A6 0x0000000000000000 0x0000000008000008 0x00000000000006B0)\r\n0x00007FF6F5CB47D2 (0x0000000000000000 0x0000000000000000 0x0000000000000000 0x0000000000000000)\r\n0x00007FF6F9B73D00 (0x0000000000000000 0x0000000000000000 0x0000000000000000 0x0000000000000000)\r\n0x00007FFD5BAA81F4 (0x0000000000000000 0x0000000000000000 0x0000000000000000 0x0000000000000000), BaseThreadInitThunk() + 0x14 bytes(s)\r\n0x00007FFD5BBEA251 (0x0000000000000000 0x0000000000000000 0x0000000000000000 0x0000000000000000), RtlUserThreadStart() + 0x21 bytes(s)\r\nclang: error: clang frontend command failed due to signal (use -v to see invocation)\r\nclang version 8.0.0 (tags/RELEASE_800/rc5)\r\nTarget: x86_64-pc-windows-msvc\r\nThread model: posix\r\nInstalledDir: C:\\Program Files\\LLVM\\bin\r\nclang: note: diagnostic msg: PLEASE submit a bug report to https://bugs.llvm.org/ and include the crash backtrace, preprocessed source, and associated run script.\r\nclang: note: diagnostic msg: \r\n********************\r\n\r\nPLEASE ATTACH THE FOLLOWING FILES TO THE BUG REPORT:\r\nPreprocessed source(s) and associated run script(s) are located at:\r\nclang: note: diagnostic msg: C:\\Users\\XXXX\\AppData\\Local\\Temp\\io_windbg-f96a2c.c\r\nclang: note: diagnostic msg: C:\\Users\\XXXX\\AppData\\Local\\Temp\\io_windbg-f96a2c.sh\r\nclang: note: diagnostic msg: \r\n```\r\nFiles: [Temp.zip](https://github.com/radare/radare2/files/2979612/Temp.zip)","createdAt":"2019-03-18T18:08:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10115#issuecomment-474036981","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NDM3NDMxNQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Sadly 8.0 is practically released, so this bug will survive until 9.0 I guess. There is no joy in this world...","createdAt":"2019-03-19T13:40:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10115#issuecomment-474374315","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMTg3NzEyMg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"clang-cl AppVeyor build was merged in https://github.com/radare/radare2/pull/14814","createdAt":"2019-08-16T04:10:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10115#issuecomment-521877122","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyOTA4ODQ0NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Now we do wait for these being fixed in meson:\r\n- [Option b_sanitize doesn't work with clang-cl](https://github.com/mesonbuild/meson/issues/5845) - there a [PR for this](https://github.com/mesonbuild/meson/pull/5854) already.\r\n- [Meson fails on sanity check step when using clang-cl+ASAN](https://github.com/mesonbuild/meson/issues/5846)","createdAt":"2019-09-07T08:54:06Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10115#issuecomment-529088444","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzNjg4NjE2NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@pelijah you might be interested that patch for Clang that will fix that pragma problem is under review for Clang 10.0 https://reviews.llvm.org/D68114","createdAt":"2019-10-01T06:22:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10115#issuecomment-536886164","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzNjk2MzU1Ng==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"Weird but the bug is not reproduced even on AppVeyor with its Clang 8.0.0 (https://ci.appveyor.com/project/radare/radare2/builds/27785044/job/jvd6sjvemoqstyth?fullLog=true#L44)","createdAt":"2019-10-01T09:58:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10115#issuecomment-536963556","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUzOTkzMTI4OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@pelijah what bug? Because pragma one was refactored in the radare2 code.","createdAt":"2019-10-09T09:59:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10115#issuecomment-539931289","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU1MTM4Mjk4Mg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Landed in https://github.com/llvm/llvm-project/commit/6bdfe3aeba8bb000571c453669817e9f33e24909","createdAt":"2019-11-08T04:47:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10115#issuecomment-551382982","viewerDidAuthor":false}],"number":10115,"title":"Meson + clang-cl with ASAN, UBSAN, etc build for Windows"},{"body":"\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 18.04 LTS x86_64\r\n| File format of the file you reverse (mandatory)      | ELF \r\n| Architecture/bits of the file (mandatory)            | x86_64 \r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.6.0-git 18194 @ linux-x86-64 git.2.5.0-273-g4d61d66e2   commit: 4d61d66e29131bd532647eb55cde073c7161caf2 build: 2018-05-17__06:17:59\r\n\r\n\r\n### Expected behavior\r\n\r\n### Actual behavior\r\n\r\nIn visual mode vprompt setting below does not work when entering \"libc\" library ( e.g puts )\r\nif i run r2 shell command with \": dm\" then the value appears again.\r\n\r\n\"cmd.vprompt> dm.\"\r\n\r\n\r\n\r\n### Steps to reproduce the behavior \r\n\r\nI have added screen recording file\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\nscreen recording file\r\n[radare2.mkv.gz](https://github.com/radare/radare2/files/2011536/radare2.mkv.gz)\r\n","comments":[],"number":10114,"title":"cmd.vprompt setting in visual mode does not work when entering \"libc\"  library"},{"body":"Tested with commit 9656ba12aa7f77060f25a0c1489092dec4466279.\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 17.10, x86_64\r\n| File format of the file you reverse (mandatory)      | bin\r\n| Architecture/bits of the file (mandatory)            | avr\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.6.0-git 18184 @ linux-x86-64 git.2.5.0-262-g9656ba12a\r\ncommit: 9656ba12aa7f77060f25a0c1489092dec4466279 build: 2018-05-16__09:27:55\r\n\r\n\r\n### Expected behavior\r\nRe-opening a saved project should show the binary correctly.\r\n\r\n### Actual behavior\r\nRe-opening a saved project shows the binary as all ff.\r\n\r\n### Steps to reproduce the behavior \r\nDownload https://github.com/Riscure/Rhme-2016/blob/master/challenges/binaries/jumpy/jumpy.bin\r\nr2 -a avr -A jumpy.bin\r\nV (visual mode, verify there is valid code at 0x8a)\r\nq (leave visual mode)\r\nPs test (save as project named 'test')\r\nq (quit r2)\r\nn (we have just saved the project)\r\nr2 -p test (start r2 and re-open the project we have just created)\r\nV (visual mode, the code at 0x8a is now displayed as ff ff...)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM4OTQ0MTI5OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"projects are broken and there are over 9000 issues about the same thing, we wont fix projects until we do the proper refactorings in rbin and rio\n\n> On 16 May 2018, at 10:36, danceswithbytes <notifications@github.com> wrote:\n> \n> Tested with commit 9656ba1 <https://github.com/radare/radare2/commit/9656ba12aa7f77060f25a0c1489092dec4466279>.\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tUbuntu 17.10, x86_64\n> File format of the file you reverse (mandatory)\tbin\n> Architecture/bits of the file (mandatory)\tavr\n> r2 -v full output, not truncated (mandatory)\tradare2 2.6.0-git 18184 @ linux-x86-64 git.2.5.0-262-g9656ba12a\n> commit: 9656ba1 <https://github.com/radare/radare2/commit/9656ba12aa7f77060f25a0c1489092dec4466279> build: 2018-05-16__09:27:55\t\n> Expected behavior\n> \n> Re-opening a saved project should show the binary correctly.\n> \n> Actual behavior\n> \n> Re-opening a saved project shows the binary as all ff.\n> \n> Steps to reproduce the behavior\n> \n> Download https://github.com/Riscure/Rhme-2016/blob/master/challenges/binaries/jumpy/jumpy.bin <https://github.com/Riscure/Rhme-2016/blob/master/challenges/binaries/jumpy/jumpy.bin>\n> r2 -a avr -A jumpy.bin\n> V (visual mode, verify there is valid code at 0x8a)\n> q (leave visual mode)\n> Ps test (save as project named 'test')\n> q (quit r2)\n> n (we have just saved the project)\n> r2 -p test (start r2 and re-open the project we have just created)\n> V (visual mode, the code at 0x8a is now displayed as ff ff...)\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/10107>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lnS5jYqqH3JwH2EyFrpAemuNLR-3ks5ty-UGgaJpZM4UA31J>.\n> \n\n","createdAt":"2018-05-16T08:38:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10107#issuecomment-389441298","viewerDidAuthor":false}],"number":10107,"title":"avr binary content sometimes displayed as ff... when re-opening project"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu x86_64  18.04\r\n| File format of the file you reverse (mandatory)      | NES rom\r\n| Architecture/bits of the file (mandatory)            | 6502\r\n| r2 -v full output, **not truncated** (mandatory)     |  radare2 2.6.0-git 18147 @ linux-x86-64 git.2.5.0-234-g81f718280 commit: 81f71828002fc0e555051700bfa2dfb91d38813f build: 2018-05-12__06:26:09\r\n\r\n### Expected behavior\r\n\r\nThis reads from the proper offset (vaddr==0x8000, paddr==0x0010)\r\n\r\n    ./binr/radare2/radare2 -qc \"px 16 @entry0\" /host/bins/Contra.nes\r\n    - offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n    0x00008000  0007 8068 8000 81a9 809d 9805 a922 9d88  ...h.........\"..\r\n\r\n### Actual behavior\r\n\r\nThis reads from an invalid offset (vaddr==0x8000, paddr==0x8000)\r\n\r\n    ./binr/radare2/radare2 -wqc \"px 16 @entry0\" /host/bins/Contra.nes\r\n    - offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n    0x00008000  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n\r\n### Steps to reproduce the behavior \r\n- Load an NES rom in a way such that mmap of the target binary fails.\r\n  - I'm unsure as to why this wasn't an issue for other file formats I tried\r\n- Read bytes from any virtual address\r\n- Values should be incorrect\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\nThe addition of a write permission in the failing example causes mmap to fail (in this case because the file is located on a virtualbox shared folder which doesn't support it). \r\n\r\nThis causes the IO to fallback to raw file io. Because of this, eventually an attempt to seek to the virtual offset instead of the physical , yielding invalid read data. \r\n\r\nRemoving the lseek from r_io_def_mmap_read (line 229 of io_default.c) appears to resolve the issue. The skyline code calculates the physical offset earlier on and has already seeked the file to the proper position before that lseek ever triggers. It appears to me that the lseek is just redundant. \r\n\r\nWithout the lseek all regression tests still pass. However this seems to be very widely used code and probably merits more investigation than what I've done to date, so I'm opening this issue.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjk0OQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10106#issuecomment-644522949","viewerDidAuthor":false}],"number":10106,"title":"Virtual addressing failure after fallback to rawio "},{"body":"Many ppl has been asking recently about how to create an escaped hex string, the answer is pcs, but first commands that come to my mind are pxs, p8s, p8x... so maybe p8s should be an alias for pcs","comments":[],"number":10058,"title":"p8s should do the same as pcs"},{"body":"```\r\n$ rasm2 -b 64 -s intel -a x86.as 'inc byte ptr [rcx]'\r\nfe01\r\n$ rasm2 -b 64 -s intel -a x86.as 'inc word ptr [rcx]'\r\n66ff01\r\n$ rasm2 -b 64 -s intel -a x86.as 'inc dword ptr [ecx]'\r\n67ff01\r\n$ rasm2 -b 64 -s intel -a x86.as 'inc qword ptr [ecx]'\r\n6748ff01\r\n...\r\n```\r\n\r\nEnabling this functionality would require a rework of the current opcode parsing in [this](https://github.com/radare/radare2/blob/004031aaeb5b11eb31370e2822b4255316c4be17/libr/asm/p/asm_x86_nz.c) file.\r\n\r\nThe problem is that op->operand[0].type is only one single variable, while to keep track of sizes in, e.g., \"inc dword ptr [rcx]\" we would require at least two. At the moment the information about the size is overwritten by parseReg().","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjk1NQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10053#issuecomment-644522955","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MDU4NzIyMw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"This issue is not yet fixed. thats handy for r2wars\r\n\r\n```\r\n$ rasm2 -b 64 'inc qword ptr [ecx]'\r\n48ff01\r\n$ rasm2 -d 48ff01\r\ndec eax\r\ninc dword [ecx]\r\n$\r\n``` ","createdAt":"2020-06-27T17:10:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10053#issuecomment-650587223","viewerDidAuthor":true}],"number":10053,"title":"x86.nz does not assemble \"inc/dec size ptr [reg]\" instructions"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu 16.04 x86_64\r\n| File format of the file you reverse (mandatory)      | CLI\r\n| Architecture/bits of the file (mandatory)            | arm 32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.6.0-git 18064 @ linux-x86-64 git.2.5.0-170-g1c4464d commit: 1c4464d88fbf31e602b802c40ec3fc466e7eeb96 build: 2018-05-03__19:21:01\r\n\r\n### Expected behavior\r\n```\r\n$ rasm2 -a arm 'ldr r0, [pc, #04]'\r\n04009fe5\r\n\r\n$ rasm2 -a arm 'ldr r0, [pc, #04 ]'\r\n04009fe5\r\n```\r\n\r\n### Actual behavior\r\n```\r\n$ rasm2 -a arm 'ldr r0, [pc, #04]'\r\n04009fe5\r\n\r\n$ rasm2 -a arm 'ldr r0, [pc, #04 ]'\r\n00009fe0\r\n```\r\n\r\nNotice the extra space before the ']' in the second instruction","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM4NzA0OTczOA==","author":{"login":"xarkes"},"authorAssociation":"CONTRIBUTOR","body":"There was a case on irc where `pa ldr r0, [pc, 04 ]` would not even assemble, causing an error.","createdAt":"2018-05-07T12:31:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10038#issuecomment-387049738","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM4NzA1NjYyMA==","author":{"login":"PaoloMonti42"},"authorAssociation":"CONTRIBUTOR","body":"@xarkes They seem like they are two completely separate issues.\r\n`rasm2 -a arm 'ldr r0, [pc, #04]'`infers arm32, and has this behavior\r\n`pa ldr r0, [pc, 04 ]`from issue #10039 is arm16","createdAt":"2018-05-07T12:59:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10038#issuecomment-387056620","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM4NzA3NTE3Mg==","author":{"login":"vdf-git"},"authorAssociation":"CONTRIBUTOR","body":"It would not be a major bug fix to allow spaces before ] (and ! and so on) in thumb-2. Question is if this is desirable: \"ldr r3, [r2, 0x30 ]  !\" is nasty syntex IMHO...","createdAt":"2018-05-07T14:04:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10038#issuecomment-387075172","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM4NzQwMTM4OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Imho assemblers should support any amount of whitespace between operands and arguments\n\n> On 7 May 2018, at 16:04, vdf-git <notifications@github.com> wrote:\n> \n> It would not be a major bug fix to allow spaces before ] (and ! and so on) in thumb-2. Question is if this is desirable: \"ldr r3, [r2, 0x30 ] !\" is nasty syntex IMHO...\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-05-08T13:26:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/10038#issuecomment-387401389","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjk2MA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10038#issuecomment-644522960","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MDU4NzM0Mg==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"This issue is not fixed yet and it should","createdAt":"2020-06-27T17:11:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10038#issuecomment-650587342","viewerDidAuthor":true}],"number":10038,"title":"rasm2 assembles differently in presence of a space "},{"body":"We need to think how properly to \"apply\" the union type to the memory (and link it).\r\nWhen it is a structure - it is easy to do - just print/link every field.\r\nIt is unclear though what to do in the case of union which provides a way to select the member.\r\n\r\n - [x] Way to print the union like a structure \r\n-  [ ] To fill the all fields with the values in `tp` command (must be done , not tested yet !)\r\n - [ ] Way to select particular \"branch\" of the union with the `tp` command\r\n - [ ] Way to link the union type with the `tl` command (partially done)\r\n - [ ] Maybe to think about specifying some conditionals in C description of the union, to choose the right \"branch\" depending on the value of some of its members (e.g. in case of the union wrapped in structure with some additional selector)\r\n - [ ] To apply the proper \"branch\" of the union in the way of types analysis (e.g. `afta`)\r\n - [ ] Tests for this\r\n\r\n@sivaramaaa assigning you not to write everything from scratch - the main task is more important, assigning you to see the big picture.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM5NzAyMjQ4NA==","author":{"login":"sivaramaaa"},"authorAssociation":"CONTRIBUTOR","body":"I have started some initial work for supporting union type, though there are some issues which IMHO is better we shall discuss here!\r\n\r\nThe problem with union is all members share same memory location and it's not accessed using immediate value, so it's difficult to recover or distinguish each one of them, so maybe after type inference task is done we may use that info to solve this issue . \r\n\r\n","createdAt":"2018-06-13T17:35:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10032#issuecomment-397022484","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0MDkxMzg0OA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@radare see also this one regarding the unions support https://github.com/radare/radare2/issues/12267","createdAt":"2018-11-22T05:05:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/10032#issuecomment-440913848","viewerDidAuthor":false}],"number":10032,"title":"C types - unions support interface"},{"body":"Currently we perform a dumb size and offset calculation for the structures. We need the way to set, store and use the information about alignment of the whole structure, some of its members or parts of it.","comments":[],"number":10031,"title":"C types - structures alignment"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | macOS x86_64\r\n| File format of the file you reverse (mandatory)      | PE\r\n| Architecture/bits of the file (mandatory)            | x86/32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.6.0-git 18048 @ darwin-x86-64 git.2.5.0-160-gd774f579a, commit: d774f579ac9a1c68cbe2c8fdba7f615921caa78b build: 2018-05-02__07:25:51\r\n\r\n### Expected behavior\r\n`Cs` should correctly create a string\r\n\r\n### Actual behavior\r\nradare2 hangs\r\n\r\n### Steps to reproduce the behavior \r\n\r\nIf we check the `Cs?` command we can see that we can use `Cs` like this:\r\n> | Cs [size] @addr     add string (guess latin1/utf16le)\r\nbut when executed like this:\r\n\r\n`Cs 31 0x401034` it hangs the r2.\r\n\r\n1. `r2 EsetCrackMe2015.exe` ([Dropbox link](https://www.dropbox.com/s/y0t836gr18vt83f/EsetCrackme2015.exe.zip?dl=0))\r\n2. Navigate to data to be converted to string `s 0x401034`\r\n3. Execute `Cs` command like help suggests `Cs 31 0x401034`\r\n4. Observe r2 hangs\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\nA bit of invesitgation done and it looks like the code that handles this cmd (`libr/core/cmd_meta.c`) treats the 3rd paramter as a repeat counter and not the address location.\r\n\r\nThe code in question is in mentioned file in lines [658](https://github.com/radare/radare2/blob/0036b2cae832696793593117c0724d277a459174/libr/core/cmd_meta.c#L658)-[665](https://github.com/radare/radare2/blob/0036b2cae832696793593117c0724d277a459174/libr/core/cmd_meta.c#L664). \r\n\r\n    char *rep = strchr (input + len, '[');\r\n\tif (!rep) {\r\n\t\trep = strchr (input + len, ' ');\r\n\t\t}\r\n\tif (rep) {\r\n\t\trepeat = r_num_math (core->num, rep + 1);\r\n\t}\r\n\r\nWe can see that the third argument is parsed and set as reapet variable and later it's used as an condition for exiting the [while-loop](https://github.com/radare/radare2/blob/0036b2cae832696793593117c0724d277a459174/libr/core/cmd_meta.c#L670). Having this knowledge it's obvious that r2 hangs as it tries to repeat the action `0x401034` times.\r\n\r\nNot sure if my understanding of this command usage is wrong, help message is not updated or the code is not working as it should according to the spec.\r\n\r\nAlso noticed additional (if think) wrong behavior, if the third parameter is something that's not parsable as number it will be set as the string itself (which is weird).\r\n\r\nI.e. `Cs 31 @0x401034` will put in the current location the string \"Error\". (https://asciinema.org/a/Tv9uMsuYlUYqwfQ5zJ8gSATEJ)\r\n\r\nNote, that the address-less form (`Cs 31`) of this command works as expected.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM4NzMxMTE3NQ==","author":{"login":"pawlos"},"authorAssociation":"CONTRIBUTOR","body":"@XVilka thanks for tagging this, if it's a good first issue I might consider doing it, but I'm still missing what should be the expected behavior here? Is the help message of Cs wrong? Or the code should change to make use the third parameter as addr and not as repeat counter?","createdAt":"2018-05-08T07:28:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9999#issuecomment-387311175","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjk2Ng==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9999#issuecomment-644522966","viewerDidAuthor":false}],"number":9999,"title":"Cs help info is misleading or it does not work as stated in help"},{"body":"Hello,\r\n\r\nFirst of all, I'm just starting with radare2, I'm sorry if a similar issue has been opened or if the problem is known, I couldn't find it :-/\r\n\r\nThanks for the tool, it's fun and nice to use!\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Exherbo x86 64 (GCC 7.3), kernel 4.16.3\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.6.0-git 18047 @ linux-x86-64 git.2.5.0-159-g60a128b4e commit: 60a128b4ee9fd95d7b748d3108afd87a6ca20c84 build: 2018-05-01__15:01:53\r\n\r\n### Expected behavior\r\n\r\nHardware breakpoint set on a 32 bits target using a 64 bits system should be hit.\r\n\r\n### Actual behavior\r\n\r\nHardware breakpoints set on a 32 bits target using a 64 bits system aren't hit.\r\n\r\n### Steps to reproduce the behavior \r\n- Binary in description. It comes from https://www.root-me.org/en/Challenges/Cracking/ELF-No-software-breakpoints and is a basic crackme\r\n- asciinema: https://asciinema.org/a/miI4WmNarHov1SrMML46dWEYR \r\n[ch20.bin.zip]() \r\n- open the binary in debug mode\r\n- try to set a hardware breakpoint in the early instructions of the program (I used 0x080480b5 in my tests).\r\n- run until you hit the breakpoint (you shouldn't)\r\n- if it didn't break, restart debug\r\n- set `asm.bits = 64`\r\n- try to set the same breakpoint\r\n- it should be hit\r\n\r\nLet me know if you need anything else. I also tried with version 2.4.0, the problem happens too.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM4NTkxNTE0OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Whichcommand did u used to set the hwbp?\n\n> On 1 May 2018, at 15:30, Arnaud Lefebvre <notifications@github.com> wrote:\n> \n> Hello,\n> \n> First of all, I'm just starting with radare2, I'm sorry if a similar issue has been opened or if the problem is known, I couldn't find it :-/\n> \n> Thanks for the tool, it's fun and nice to use!\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tExherbo x86 64 (GCC 7.3), kernel 4.16.3\n> File format of the file you reverse (mandatory)\tELF\n> Architecture/bits of the file (mandatory)\tx86/32\n> r2 -v full output, not truncated (mandatory)\tradare2 2.6.0-git 18047 @ linux-x86-64 git.2.5.0-159-g60a128b4e commit: 60a128b build: 2018-05-01__15:01:53\n> Expected behavior\n> \n> Hardware breakpoint set on a 32 bits target using a 64 bits system should be hit.\n> \n> Actual behavior\n> \n> Hardware breakpoint set on a 32 bits target using a 64 bits system aren't hit.\n> \n> Steps to reproduce the behavior\n> \n> Binary in description. It comes from https://www.root-me.org/en/Challenges/Cracking/ELF-No-software-breakpoints and is a basic crackme\n> asciinema: https://asciinema.org/a/miI4WmNarHov1SrMML46dWEYR\n> ch20.bin.zip\n> open the binary in debug mode\n> try to set a hardware breakpoint in the early instructions of the program (I used 0x080480b5 in my tests).\n> run until you hit the breakpoint (you shouldn't)\n> if it didn't break, restart debug\n> set asm.bits = 64\n> try to set the same breakpoint\n> it should be hit\n> Let me know if you need anything else. I also tried with version 2.4.0, the problem happens too.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-05-02T09:15:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9995#issuecomment-385915149","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM4NTk1OTA4Mw==","author":{"login":"BlackYoup"},"authorAssociation":"CONTRIBUTOR","body":"I used the following command `drx 0 0x080480b5 1 x`\r\n\r\nThen, the debug registers were:\r\n```\r\n[0x08048080]> drx\r\n* dr0 Gx 0x080480b5 1\r\n- dr1 Lx 0x00000000 1\r\n- dr2 Lx 0x00000000 1\r\n- dr3 Lx 0x00000000 1\r\n- dr6 Lx 0x00000000 1\r\n- dr7 Lx 0x00000001 1   \r\n```","createdAt":"2018-05-02T12:20:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9995#issuecomment-385959083","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM4ODIwNzA2Mg==","author":{"login":"guivc"},"authorAssociation":"NONE","body":"thank you @BlackYoup , I started to use randare not so long ago and when i tried that command it didn't work as i would expect it to... i thought it was me that didn't get the idea of how to use this hwbp...","createdAt":"2018-05-10T22:38:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/9995#issuecomment-388207062","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjk1Mg==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9995#issuecomment-644522952","viewerDidAuthor":false}],"number":9995,"title":"Hardware breakpoint won't be hit for 32 bit binary on a 64 bits system unless asm.bits = 64"},{"body":"Like graph.offset, but to toggle asm.bytes instead of asm.offset in the bb rendering","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjk3OA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9979#issuecomment-644522978","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDYxNTM1Nw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"It already exists. Closing.","createdAt":"2020-06-16T08:25:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9979#issuecomment-644615357","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDY5ODkxNg==","author":{"login":"karliss"},"authorAssociation":"CONTRIBUTOR","body":"graph.bytes exist but it behaves inconsistently depending on whether you view graph interactively, write to file using graphviz or query using `agj`.","createdAt":"2020-06-16T11:14:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9979#issuecomment-644698916","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDcxNTk2NQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@karliss as the title says \"Implement graph.bytes\" that's why it was closed. Also, it would be great to know what are the exact inconsistencies. I see graphviz does not show `graph.bytes`, what else? In any case, I feel like a new issue would be more appropriate, as this one was done indeed.","createdAt":"2020-06-16T11:54:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9979#issuecomment-644715965","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDcxNzIyNQ==","author":{"login":"karliss"},"authorAssociation":"CONTRIBUTOR","body":"Don't remember exactly but it was something like this:\r\n* graph.bytes is used only by the interactive mode\r\n* graphviz output never included bytes\r\n* json output uses asm.bytes","createdAt":"2020-06-16T11:57:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9979#issuecomment-644717225","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDcyMjkwNw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"As said, I think this should be handled in a separate issue, because it easily goes out of scope.\r\n\r\n> graph.bytes is used only by the interactive mode\r\n\r\n```\r\n[0x000068a0]> e graph.bytes =true\r\n[0x000068a0]> agf\r\n[0x000068a0]>  # entry0 (int64_t arg3);\r\n â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\r\nâ”‚  0x68a0                                                                              â”‚\r\nâ”‚   ;-- rip:                                                                           â”‚\r\nâ”‚ 46: entry0 (int64_t arg3);                                                           â”‚\r\nâ”‚ ; arg int64_t arg3 @ rdx                                                             â”‚\r\nâ”‚ 0x000068a0 f30f1efa       endbr64                                                    â”‚\r\nâ”‚ 0x000068a4 31ed           xor ebp, ebp                                               â”‚\r\nâ”‚ 0x000068a6 4989d1         mov r9, rdx    ; arg3                                      â”‚\r\nâ”‚ 0x000068a9 5e             pop rsi                                                    â”‚\r\nâ”‚ 0x000068aa 4889e2         mov rdx, rsp                                               â”‚\r\nâ”‚ 0x000068ad 4883e4f0       and rsp, 0xfffffffffffffff0                                â”‚\r\nâ”‚ 0x000068b1 50             push rax                                                   â”‚\r\nâ”‚ 0x000068b2 54             push rsp                                                   â”‚\r\nâ”‚ 0x000068b3 4c8d05361501.  lea r8, [0x00017df0]                                       â”‚\r\nâ”‚ 0x000068ba 488d0dbf1401.  lea rcx, [0x00017d80]                                      â”‚\r\nâ”‚ 0x000068c1 488d3d98e5ff.  lea rdi, main    ; 0x4e60                                  â”‚\r\nâ”‚ 0x000068c8 ff15eac60100   call qword [reloc.__libc_start_main] ;[oa] ; [0x22fb8:8]=0 â”‚\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\r\n```\r\n\r\nseems to work\r\n\r\n> graphviz output never included bytes\r\n\r\nTrue, probably a new issue/PR with \"honor graph.bytes\" in graphviz output\r\n\r\n> json output uses asm.bytes\r\n\r\nI'm not sure this should really respect `graph.bytes`, as it is just json. `graph.bytes` should (from the help) \"Show opcode bytes in graphs\" and json output is not really a graph. I think it is quite normal for json output to include a bunch of info and there is not always (or never?)  a way to just print some fields.\r\n\r\n","createdAt":"2020-06-16T12:10:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9979#issuecomment-644722907","viewerDidAuthor":false}],"number":9979,"title":"Implement graph.bytes"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Xubuntu amd64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86/64\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.6.0-git 17914 @ linux-x86-64 git.2.5.0-59-g6bff6b758 commit: 6bff6b758aec9e6655101ead1b9f4351e52e8d86 build: 2018-04-15__17:46:43\r\n\r\n### Expected behavior\r\n```\r\nr2 radare2-regressions/bins/jmptbl/ls_amd64 -A\r\n> s 0x004020a8\r\n> pd 1\r\n            0x004020a8      e8e2610000     call fcn.0040828f\r\n> axf\r\n>\r\n```\r\nThere are no call xrefs\r\n\r\n### Actual behavior\r\n```\r\nr2 radare2-regressions/bins/jmptbl/ls_amd64 -A\r\n> s 0x004020a8\r\n> pd 1\r\n            0x004020a8      e8e2610000     call fcn.0040828f\r\n> axf\r\n 0x4020a8 call fcn.0040828f\r\nC 0x4020a8 call fcn.0040828f\r\n```\r\nThere is a call xref into the middle of a function, messing up disassembly\r\n```\r\n> s 0x00408283\r\n> pdf\r\n...\r\n0x00408283      488b5dc8       mov rbx, qword [local_38h]\r\n0x00408287      64             invalid\r\n0x00408288      48             invalid\r\n0x00408289      33             invalid\r\n0x0040828a      1c25           sbb al, 0x25\r\n0x0040828c      2800           sub byte [rax], al\r\n0x0040828e      00             invalid\r\n\r\n0x0040828f   <--- call xref from reloc section\r\n```\r\n\r\n### Steps to reproduce the behavior \r\nThe binary is in the r2 regression repo `radare2-regressions/bins/jmptbl/ls_amd64`\r\n\r\nI have looked into the code already and the issue is probably somewhere in `libr/core/canal.c r_core_anal_search_xrefs`, where it disassembles anything looking for jumps/calls\r\n\r\n@sivaramaaa \r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDUwMjUwNDM1NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can you share this binary? is the bug still there after so much time?","createdAt":"2019-06-17T01:23:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9975#issuecomment-502504355","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwMjU2NTU5NQ==","author":{"login":"Toizi"},"authorAssociation":"CONTRIBUTOR","body":"```\r\nradare2 3.6.0-git 22086 @ linux-x86-64 git.3.5.1-263-g762b8e2d5\r\ncommit: 762b8e2d50ffff49354511dab0203cdf8187c84f build: 2019-06-17__09:16:05\r\n```\r\nThis version (should be current master) still has this issue.\r\n\r\nAs I said in the bug report, the binary can be found in the r2 regression repo [radare2-regressions/bins/jmptbl/ls_amd64](https://github.com/radare/radare2-regressions/raw/master/bins/jmptbl/ls_amd64)","createdAt":"2019-06-17T07:23:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9975#issuecomment-502565595","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwMzYzNzYzNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"works fine for me","createdAt":"2019-06-19T16:38:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9975#issuecomment-503637634","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwMzYzNzcwNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"<img width=\"583\" alt=\"Screenshot 2019-06-19 at 18 38 54\" src=\"https://user-images.githubusercontent.com/917142/59783906-81785080-92c1-11e9-80aa-5fee5e91eb16.png\">\r\n","createdAt":"2019-06-19T16:39:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9975#issuecomment-503637704","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwNDM5MTc4MA==","author":{"login":"Toizi"},"authorAssociation":"CONTRIBUTOR","body":"@radare Maybe my bug report was not worded clearly enough.\r\nAt address `0x004020a8` - which is part of the relocations, i.e. data - the bytes represent a `call` when disassembled, which makes radare create this function from your screenshot. However the relocation data should not be disassembled because it's not actually code. In this case, it is not just some wrong xref but also the function is broken because of this. To look at the broken function, `pdf @ 0x00407f80` and scroll down until you can see an invalid opcode. Right after the invalid, the function from your screenshot starts, which is not actually a valid function for a compiler generated binary.\r\nHope this clears things up","createdAt":"2019-06-21T11:25:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9975#issuecomment-504391780","viewerDidAuthor":false}],"number":9975,"title":"Call xrefs from relocation section"},{"body":"I'm attempting to debug a Windows binary from Ubuntu but cannot get it to work the way I want. Specifically, I've tried many renditions of `gdb://` and `rap://` handlers. The closest I've gotten is the following:\r\n\r\nOn Windows, I start radare with:\r\n```\r\nradare2 -\r\n=:12345\r\n```\r\n\r\nThen, I can connect from Ubuntu with:\r\n```\r\nr2 rap://<ip>:12345/test.exe\r\n```\r\n\r\nThis seems to mostly work for remote disassembling. However, the problem comes when attempting to remote debug. I can open the file again in debug using something like:\r\n\r\n```\r\nr2 rap://<ip>:12345/dbg://test.exe\r\n```\r\n\r\nThis will open for debug. However, all of the things I could do previously without being in debug (such as `i`, `is`, `V`, `VV`, etc) no longer work. Also, I cannot directly continue debugging. I.e.: `dc` does not work. The closest I've gotten is by forwarding the command using something like `!=!` then `dc`, but i still cannot do things like `V`, `drr`, etc.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQwOTY5ODA5MQ==","author":{"login":"unconfigured"},"authorAssociation":"NONE","body":"I have the same problem, is there any chance to get this working?","createdAt":"2018-08-01T19:45:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9919#issuecomment-409698091","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwOTg5MzgxNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"use winedbg://  or just spawn a windows VM, r2 cant do magic\n\n> On 1 Aug 2018, at 21:45, Friedo <notifications@github.com> wrote:\n> \n> I have the same problem, is there any chance to get this working?\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/9919#issuecomment-409698091>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-liWrtMCYSXNZLYiZC7ph2guWVQFIks5uMgU_gaJpZM4TZMc2>.\n> \n\n","createdAt":"2018-08-02T11:22:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9919#issuecomment-409893815","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwOTkyMTA0OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"if you want to debug remotely thats a different topic. you can use the remote windbg. but in fact i think that the remote debug should work with rap:// and using the debug.io in the other side instead of the debug.native","createdAt":"2018-08-02T13:12:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9919#issuecomment-409921048","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwOTk3OTc5Ng==","author":{"login":"unconfigured"},"authorAssociation":"NONE","body":"I just want to \"control\" the remote debugger / radare instance. Windows runs in a vm, Linux on my host.\r\n\r\nAfter your last suggestion I tried:\r\nWindows: ```radare2 rap://:1234```\r\nLinux: ```radare2 -D io rap://<ip>:<port>/dbg://my.exe```\r\n\r\nBut that is not much better than running without \"-D io\" and using !=! on the linux side.","createdAt":"2018-08-02T16:05:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/9919#issuecomment-409979796","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxMDIwNDg2MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Can you suggest things to improve or make PRs changing them.\n\n> On 2 Aug 2018, at 18:07, Friedo <notifications@github.com> wrote:\n> \n> I just want to \"control\" the remote debugger / radare instance. Windows runs in a vm, Linux on my host.\n> \n> After your last suggestion I tried:\n> Windows: radare2 rap://:1234\n> Linux: radare2 -D io rap://<ip>:<port>/dbg://my.exe\n> \n> But that is not much better than running without \"-D io\" and using !=! on the linux side.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/9919#issuecomment-409979796>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-luETS3djoLcmwmYxRGhqpcb0uZ-Vks5uMyO0gaJpZM4TZMc2>.\n> \n\n","createdAt":"2018-08-03T09:51:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9919#issuecomment-410204860","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1NzUxMzg0OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See also https://github.com/radareorg/radare2/issues/16226","createdAt":"2020-07-13T11:48:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9919#issuecomment-657513849","viewerDidAuthor":false}],"number":9919,"title":"Debugging Windows binary from Linux"},{"body":"### Work environment\r\n\r\n| Questions                                                   | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch | Arch /  x86_64\r\n| File Format | ELF 32 bit\r\n| Architecture/bits of the file (mandatory)  | x86\r\n| âžœ r2 -v     |  radare2 2.6.0-git 18020 @ linux-x86-64 git.2.5.0-75-gf6c5d0e98  commit: f6c5d0e98bcc4f26a1fd418a8977907d3ee23717 build: 2018-04-17__00:20:26\r\n\r\n### Expected behavior\r\n\r\npdf @ sym.func prints the disassembly of the function.\r\n\r\n### Actual behavior\r\n\r\npdf @ sym.func prints invalid repeated.\r\n\r\n### Steps to reproduce the behavior \r\n- Load binary in r2 (with debugging), `aa`, `pdf @ sym.func` correctly prints disassembly\r\n- Re-load binary with `do`, `aa`\r\n- `pdf @ sym.func` now prints 'ff invalid' with xrefs still in place.\r\n\r\n### Screenshot\r\n\r\n![r2_bug](https://user-images.githubusercontent.com/10477734/38859248-83976812-4225-11e8-9a73-98459dfd3e83.png)\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM4MjAwMjI5OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Thats called aslr\n\n> On 17 Apr 2018, at 11:01, SjRNMzU <notifications@github.com> wrote:\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch\tArch / x86_64\n> File Format\tELF 32 bit\n> Architecture/bits of the file (mandatory)\tx86\n> âžœ r2 -v\tradare2 2.6.0-git 18020 @ linux-x86-64 git.2.5.0-75-gf6c5d0e98 commit: f6c5d0e build: 2018-04-17__00:20:26\n> Expected behavior\n> \n> pdf @ sym.func prints the disassembly of the function.\n> \n> Actual behavior\n> \n> pdf @ sym.func prints invalid repeated.\n> \n> Steps to reproduce the behavior\n> \n> Load binary in r2 (with debugging), aa, pdf @ sym.func correctly prints disassembly\n> Re-load binary with do, aa\n> pdf @ sym.func now prints 'ff invalid' with xrefs still in place.\n> Screenshot\n> \n> \n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-04-17T13:57:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9907#issuecomment-382002298","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM4MjE2NTI3Mw==","author":{"login":"SjRNMzU"},"authorAssociation":"CONTRIBUTOR","body":"It's not the behavior of many other debuggers nor is it useful.  I re-ran `aa` after reloading the binary so r2 should reload symbol info.","createdAt":"2018-04-17T21:57:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9907#issuecomment-382165273","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM4MjE4MTczMQ==","author":{"login":"SjRNMzU"},"authorAssociation":"CONTRIBUTOR","body":"If I run `doo` once, then the output of `afl` is incorrect and you cannot correct it until you restart r2. Using `aslr=false` with rarun2 does not fix this.","createdAt":"2018-04-17T22:51:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9907#issuecomment-382181731","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM4MjM0MTM0NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"\n> On 17 Apr 2018, at 23:57, SjRNMzU <notifications@github.com> wrote:\n> \n> It's not the behavior of many other debuggers nor is it useful.\n> \ndebuggers dont do analysis usually, and if they do, the info is volatile\n> I re-ran aa after reloading the binary so r2 should reload symbol info.\n> \naa doesnt reload symbol information, it analyzes the symbols to get functions from them, but doesnt do what you are looking for","createdAt":"2018-04-18T10:28:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9907#issuecomment-382341345","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMjk1MjAwNA==","author":{"login":"alkeryn"},"authorAssociation":"NONE","body":"the issue is that after terminating the program while debuging even a normal assembled with nasm assembly code\r\nwe have to run \"doo\" or \"oo\" for everything to be at its place again\r\nalso we lose the breakpoints by doing so ^\r\ncouldn't there be an option to disable aslr with radare?","createdAt":"2018-07-06T07:31:36Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9907#issuecomment-402952004","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NTk5MDI4Ng==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@Alkeryn there is in rarun2","createdAt":"2019-03-24T19:14:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9907#issuecomment-475990286","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5ODYyOTYxNQ==","author":{"login":"aronsky"},"authorAssociation":"CONTRIBUTOR","body":"I came upon this issue when working on something. It seems to have been fixed at some point, as after doing `doo` repeatedly, all the symbols were correctly reloaded under 3.4.0/3.4.1 (those are the versions I checked). However, under 3.6.0 the symbols remain pointing to the original locations, and disassembling doesn't work, just as this issue describes.\r\n\r\nWhat changed?","createdAt":"2019-06-04T11:18:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9907#issuecomment-498629615","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5ODYzNDk3NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"A lot of things have changed but no single test got broken... soooo :)\n\n> On 4 Jun 2019, at 07:19, Lev Aronsky <notifications@github.com> wrote:\n> \n> I came upon this issue when working on something. It seems to have been fixed at some point, as after doing doo repeatedly, all the symbols were correctly reloaded under 3.4.0/3.4.1 (those are the versions I checked). However, under 3.6.0 the symbols remain pointing to the original locations, and disassembling doesn't work, just as this issue describes.\n> \n> What changed?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-06-04T11:37:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9907#issuecomment-498634974","viewerDidAuthor":false}],"number":9907,"title":"BUG: Invalid disasembly after reloading binary."},{"body":"      â”‚â‹®    0x00003dca         7eba       rev16 r6,r7","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM4MTM0Mjc0MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Same goes for the following:\r\n\r\n*  4abe       TODO,bkpt 0x4a\r\n*  cfba       TODO,revsh r7, r1\r\n*  01f31a1e   TODO,ssat lr, 0x1b, r1, lsl 4\r\n* TODO,stcl p4, c0, [r7, -0xb0]!\r\n* 5def92b1   TODO,vbic d27, d29, d2\r\n* 66b2       TODO,sxtb r6, r4\r\n* 2bba       TODO,rev r3, r5\r\n* 8fecefd5   TODO,stc p5, c13, [pc], {0xef}\r\n* a2b2 TODO,uxth r2, r4\r\n* 93ed68a6   TODO,ldc p6, c10, [r3, 0x1a0]\r\n* ddfd6614   TODO,invalid. # if its invalid cant be TODO :P","createdAt":"2018-04-14T16:47:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9885#issuecomment-381342740","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM4MTQ0ODcyOA==","author":{"login":"mrmacete"},"authorAssociation":"COLLABORATOR","body":"Tracking status of this:\r\n\r\n- [x] 7eba       rev16 r6,r7\r\n- [ ] 4abe TODO,bkpt 0x4a\r\n- [x] cfba TODO,revsh r7, r1\r\n- [ ] 01f31a1e TODO,ssat lr, 0x1b, r1, lsl 4\r\n- [ ] TODO,stcl p4, c0, [r7, -0xb0]!\r\n- [ ] 5def92b1 TODO,vbic d27, d29, d2\r\n- [ ] 66b2 TODO,sxtb r6, r4\r\n- [x] 2bba TODO,rev r3, r5\r\n- [ ] 8fecefd5 TODO,stc p5, c13, [pc], {0xef}\r\n- [ ] a2b2 TODO,uxth r2, r4\r\n- [ ] 93ed68a6 TODO,ldc p6, c10, [r3, 0x1a0]\r\n- [ ] ddfd6614 TODO,invalid. # if its invalid cant be TODO :P","createdAt":"2018-04-16T00:02:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/9885#issuecomment-381448728","viewerDidAuthor":false}],"number":9885,"title":"Missing esil for rev16 (thumb)"},{"body":"for float and double. we need the bytes for the instruction doing this to write a test.","comments":[],"number":9881,"title":"ahi f and ahi F"},{"body":"For jumps like this: `jmp dword [ecx*4 + 0x10003020]    `\r\n\r\naka UJMP","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM4MTM5MDIxNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"See f443be9dc8690985c11b9a3d1612d335f7d72240 as reference to find where to touch","createdAt":"2018-04-15T08:43:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9880#issuecomment-381390217","viewerDidAuthor":false}],"number":9880,"title":"ESIL asm.shortcuts"},{"body":"Feature request comes from here:\r\nhttps://reverseengineering.stackexchange.com/questions/14556/can-radare2-support-word-oriented-architectures/17913#17913","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUzNzk5MA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T05:24:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9813#issuecomment-644537990","viewerDidAuthor":false}],"number":9813,"title":"Show word offset and octal words in bytes"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Ubuntu x86 64\r\n| File format of the file you reverse (mandatory)      | plain file\r\n| Architecture/bits of the file (mandatory)            | empty file\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.5.0-git 17744 @ linux-x86-64 git.2.4.0-225-gd903205 commit: d903205fc0a2c3f67bdc254018e804ee84ba17b9 build: 2018-03-27__10:23:51\r\n\r\n### Expected behavior\r\n\r\nTrying to create a binary file from scratch :\r\n```\r\n$ # myfile.bin does not exist at this point\r\n$ touch myfile.bin\r\n$ r2 -w myfile.bin\r\n[0x00000000]> r 16\r\n[0x00000000]> w0 16\r\n[0x00000000]> pxc 16\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF  comment \r\n0x00000000  0000 0000 0000 0000 0000 0000 0000 0000  ................\r\n```\r\n### Actual behavior\r\n\r\nAlthough the file is resized and filled with zeros on disk, the dump command doesn't show this :  \r\n\r\n```\r\n[0x00000000]> pxc 16\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF  comment \r\n0x00000000  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n```\r\n\r\n\r\nhttps://asciinema.org/a/Imltfi2M7yNwixOvMS82whhkV\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM3NjU0NzIzNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"You have to update the maps. Check the om command. Theres an automap resize for those cases. This is because of the siol change snd we discussed a bit on how to solve that without being too intrussive with the internal logic of siol\n\n> On 27 Mar 2018, at 11:08, elouet <notifications@github.com> wrote:\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tUbuntu x86 64\n> File format of the file you reverse (mandatory)\tplain file\n> Architecture/bits of the file (mandatory)\tempty file\n> r2 -v full output, not truncated (mandatory)\tradare2 2.5.0-git 17744 @ linux-x86-64 git.2.4.0-225-gd903205 commit: d903205 build: 2018-03-27__10:23:51\n> Expected behavior\n> \n> Trying to create a binary file from scratch :\n> $ # myfile.bin does not exist at this point\n> $ touch myfile.bin\n> $ r2 -w myfile.bin\n> [0x00000000]> r 16\n> [0x00000000]> w0 16\n> [0x00000000]> pxc 16\n> \n> offset - 0 1 2 3 4 5 6 7 8 9 A B C D E F 0123456789ABCDEF comment\n> 0x00000000 0000 0000 0000 0000 0000 0000 0000 0000 ................\n> Actual behavior\n> \n> Although the file is resized and filled with zeros on disk, the dump command doesn't show this :\n> \n> [0x00000000]> pxc 16\n> \n> offset - 0 1 2 3 4 5 6 7 8 9 A B C D E F 0123456789ABCDEF comment\n> 0x00000000 ffff ffff ffff ffff ffff ffff ffff ffff ................\n> https://asciinema.org/a/Imltfi2M7yNwixOvMS82whhkV\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-03-27T14:32:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9772#issuecomment-376547234","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3OTkwNTkwMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Cc @condret","createdAt":"2018-04-09T21:54:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9772#issuecomment-379905901","viewerDidAuthor":false}],"number":9772,"title":"Inconsistent display after file resize"},{"body":"On ARM mach-O libraries it has been found that when marking an address as data, it gets disassembled \r\n\r\nMake sure you are testing using the latest git version of radare2 before submitting any issue.\r\n\r\n*If you would like to report a bug, please fill the template bellow*\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                            | MacOS x86_64\r\n| File format of the file you reverse (mandatory)      | Mach-O\r\n| Architecture/bits of the file (mandatory)            | ARM 32/64\r\n| r2 -v full output, **not truncated** (mandatory)     | \r\n[0x0001c2f2]> Cd 4 @0x00008864\r\n[0x0001c2f2]> pd 1 @0x00008864\r\n            0x00008864      .dword 0x44790253\r\n[0x0001c2f2]> pdj 1 @0x00008864 ~{}\r\n[\r\n  {\r\n    \"offset\": 34916,\r\n    \"esil\": \"9,r2,<<,0xffffffff,&,r3,=,$z,zf,=\",\r\n    \"refptr\": false,\r\n    \"fcn_addr\": 0,\r\n    \"fcn_last\": 0,\r\n    \"size\": 2,\r\n    \"opcode\": \"lsls r3, r2, 9\",\r\n    \"disasm\": \"lsls r3, r2, 9\",\r\n    \"bytes\": \"5302\",\r\n    \"family\": \"cpu\",\r\n    \"type\": \"shl\",\r\n    \"type_num\": 23,\r\n    \"type2_num\": 0\r\n  }\r\n]\r\n\r\n### Expected behavior\r\ndisassemble the address as data.\r\n\r\n### Actual behavior\r\ndisassembes the address as code on JSON output.\r\n\r\n### Steps to reproduce the behavior\r\n- Please share the binary if it is shareable by drag and dropping it here in a zip archive (mandatory)\r\n[Altoro-App-armv7.zip](https://github.com/radare/radare2/files/1841374/Altoro-App-armv7.zip)\r\n`unzip Altoro-App-armv7.zip`\r\n`radare2 Altoro-App-armv7`\r\n`Cd 4 @0x00008864`\r\n`pd 1 @0x00008864`\r\n`pdj 1 @0x00008864`\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\n![sample_screenshot](https://user-images.githubusercontent.com/928372/37827763-b75186f4-2e90-11e8-9640-c88508ffdc9f.png)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM3NjEyMTQzOA==","author":{"login":"xtsop"},"authorAssociation":"CONTRIBUTOR","body":"I can help fixing the bug but can you give me a hint from which source file to start dissecting it?","createdAt":"2018-03-26T10:33:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9756#issuecomment-376121438","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3NjM5MTg2Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@xtsop `lib/core/disasm,c` - `r_core_print_disasm` and `r_core_print_disasm_json`. Commands calling code is located in `libr/core/cmd_print.c`","createdAt":"2018-03-27T04:16:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9756#issuecomment-376391866","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUzODAwNg==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T05:24:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9756#issuecomment-644538006","viewerDidAuthor":false}],"number":9756,"title":"Mismatch between disassembling on JSON and non-JSON exported results for DATA"},{"body":"\r\n### Work environment\r\nUbuntu x86 64\r\nraw binary\r\narm/thumb\r\nradare2 2.5.0-git 17697 @ linux-x86-64 git.2.4.0-178-ge0086d7d7\r\ncommit: e0086d7d701763c91f31c5875a47717138811210 build: 2018-03-20__14:02:38\r\n\r\n### Expected behavior\r\nsetting ahb will only impact asm.bits of the upper range\r\n\r\n### Actual behavior\r\nasm.bits is modified by the last ahb encountered\r\n\r\n### Steps to reproduce the behavior \r\nr2 -aarm -b32 armthumb.bin\r\n\r\n```\r\n[0x00000000]> ahb 16 @ 0xc\r\n[0x00000000]> e asm.bits\r\n32\r\n[0x00000000]> pd 16\r\n            0x00000000      0000           movs r0, r0\r\n            0x00000002      a0e1           b 0x346\r\n            0x00000004      0100           movs r1, r0\r\n            0x00000006      00ebfeff       add.w pc, r0, lr, ror 31\r\n            0x0000000a      ffea0120       invalid\r\n            0x0000000e      7047           bx lr\r\n            0x00000010      00c09fe5       invalid\r\n        |   0x00000014      1cff2fe1       vrhadd.u16 d14, d12, d31\r\n        |   0x00000018      0d00           movs r5, r1\r\n        |   0x0000001a      0000           movs r0, r0\r\n        |   0x0000001c      ffffffff       invalid\r\n        |   0x00000020      ffffffff       invalid\r\n        |   0x00000024      ffffffff       invalid\r\n        |   0x00000028      ffffffff       invalid\r\n        |   0x0000002c      ffffffff       invalid\r\n        |   0x00000030      ffffffff       invalid\r\n[0x00000000]> e asm.bits\r\n16\r\n```\r\nStart of the file is disassembled with asm.bits=16 and asm.bits is changed to 16\r\n\r\nadding \r\nahb 32 @ 0x10\r\n```\r\n[0x00000000]> ahb 32 @ 0x10\r\n[0x00000000]> pd 16\r\n            0x00000000      0000a0e1       mov r0, r0\r\n        |   0x00000004      010000eb       bl 0x10\r\n        |   0x00000008      feffffea       b 8\r\n        |   0x0000000c      0120           movs r0, 1                  ; 1\r\n        |   0x0000000e      7047           bx lr\r\n        |   0x00000010      00c09fe5       ldr ip, [pc]                ; [0x18:4]=13 ; 24\r\n        |   0x00000014      1cff2fe1       bx ip\r\n        |   0x00000018      0d000000       andeq r0, r0, sp\r\n        |   0x0000001c      ffffffff       invalid\r\n        |   0x00000020      ffffffff       invalid\r\n        |   0x00000024      ffffffff       invalid\r\n        |   0x00000028      ffffffff       invalid\r\n        |   0x0000002c      ffffffff       invalid\r\n        |   0x00000030      ffffffff       invalid\r\n        |   0x00000034      ffffffff       invalid\r\n        |   0x00000038      ffffffff       invalid\r\n[0x00000000]> e asm.bits\r\n32\r\n```\r\nCorrectly disassemble the start with asm.bits=32\r\n\r\n[armthumb.zip](https://github.com/radare/radare2/files/1837748/armthumb.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUzODAxNQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T05:24:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9749#issuecomment-644538015","viewerDidAuthor":false}],"number":9749,"title":"ahb side effects"},{"body":"Like it is done for the disassembly preview when changing `e asm.*` variables.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM3MzkwNTYxOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Itâ€™s Vbe now but yep this seems like a nice thing to have\n\n> On 17 Mar 2018, at 03:54, Anton Kochkov <notifications@github.com> wrote:\n> \n> Like it is done for the disassembly preview when changing e asm.* variables.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-03-17T09:05:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9719#issuecomment-373905618","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NDAzNDM5OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Im thinking that maybe we want to remove ve (because we have vbe) , and use 've' to toggle ESIL in the disasm.. but we have already oO to rotate that. thoughs on more changes in visual keys?","createdAt":"2019-04-17T10:50:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9719#issuecomment-484034398","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMjMzNzMyNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i think we can just construct a small graph with fake code to have this preview. i like t his idea and i  think its useful, also i  think ve should die, because we have it in vbe","createdAt":"2019-08-18T16:48:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/radareorg/radare2/issues/9719#issuecomment-522337324","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMjMzNzMzNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"otherwise it will be pretty expensive to update the graph results on  a huge function","createdAt":"2019-08-18T16:48:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9719#issuecomment-522337337","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMjMzODY2NA==","author":{"login":"deepakchethan"},"authorAssociation":"CONTRIBUTOR","body":"Yeah sounds good\r\n","createdAt":"2019-08-18T17:08:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9719#issuecomment-522338664","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0NTQzMTEyNQ==","author":{"login":"deepakchethan"},"authorAssociation":"CONTRIBUTOR","body":"Started working on this","createdAt":"2019-10-23T12:59:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9719#issuecomment-545431125","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5ODAwNTMzNQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@deepakchethan any updates on this?","createdAt":"2020-03-12T04:51:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9719#issuecomment-598005335","viewerDidAuthor":false}],"number":9719,"title":"Visual preview for the `graph.*` variables changes in `Ve` mode"},{"body":"There are several issues in the current rop gadget classification code:\r\n\r\n* [ ] esil.stats=1 + esil.romem=1 + aeim is required, \r\n* [ ] no error messages are shown if those vars are not set\r\n* [ ] we probably want to use io.cache or pcache whatever\r\n* [ ] Multiple Sdbs are created to hold all the rop types.\r\n* [ ] We may probably want to use only 1 Sdb and store stuff using a different syntax (const/0x100000f61=0xa LOAD_CONST { rax <-- 0xffffffff;rip <-- 0x100000f7c; } is a bit ugly and non-parseable)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM3Mzc2MDAzNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Also, we probably want to have more classifications\r\n","createdAt":"2018-03-16T16:00:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9713#issuecomment-373760036","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3Mzc4NDEyMg==","author":{"login":"Gr0minet"},"authorAssociation":"CONTRIBUTOR","body":"As for esil.stats and esil.romem, should we modify them in core/cconfig.c directly ? And it doesn't seem like aeim is required to make classification works. I mean, I just set romem and stats to true and it worked for me.\r\nAnd what are io.cache/pcache for ? I may try to do this this weekend (and merge the multiple sdb into one).\r\n","createdAt":"2018-03-16T17:18:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9713#issuecomment-373784122","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3MzgxNjA0MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I think /R should set thise vars and restore the origina value after that when rop.db is true\n\n> On 16 Mar 2018, at 18:18, Gromimousse <notifications@github.com> wrote:\n> \n> As for esil.stats and esil.romem, should we modify them in core/cconfig.c directly ? And it doesn't seem like aeim is required to make classification works. I mean, I just set romem and stats to true and it worked for me.\n> And what are io.cache/pcache for ? I may try to do this this weekend (and merge the multiple sdb into one).\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-03-16T19:09:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9713#issuecomment-373816040","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3MzkwNDU3OQ==","author":{"login":"Gr0minet"},"authorAssociation":"CONTRIBUTOR","body":"Actually the multiple sdb are sub ns from the global \"rop_db\" sdb, isn't it ? Isn't it good ?\r\nMaybe another problem is that the rop_db is created and gadgets are classified each time we call print_rop, but gadgets aren't gonna change between 2 analysis... So perhaps we should check if the rop_db already exists before trying to create a new one ?","createdAt":"2018-03-17T08:47:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9713#issuecomment-373904579","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3NDE1NDQ5NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"We can use. A single sdb for everything, making it easier to save in a project and move around. But its ok as its now, could improve that way i think.\n\nAnd yep we shuokd reuse that db instead of creating. A new one each time. Also we may want to have. Acommand to reset that db \n\n> On 17 Mar 2018, at 09:47, Gromimousse <notifications@github.com> wrote:\n> \n> Actually the multiple sdb are sub ns from the global \"rop_db\" sdb, isn't it ? Isn't it good ?\n> Maybe another problem is that the rop_db is created and gadgets are classified each time we call print_rop, but gadgets aren't gonna change between 2 analysis... So perhaps we should check if the rop_db already exists before trying to create a new one ?\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-03-19T09:45:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9713#issuecomment-374154495","viewerDidAuthor":false}],"number":9713,"title":"ROP classification not working if setup is not done properly"},{"body":"I got a problem using rarun2 files on Fedora 27: everytime i try r2 output is \"permission denied\".\r\nIt isn't a problem of permissions, if i run r2 with sudo command output is the same.\r\nAlso if i try to run `r2 -e dbg.profile = blabla.rr2` (without specify filename in the commandline) radare2 doesn't open.\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Fedora 27 x86-x64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            |  x86/32\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.5.0-git 17615 @ linux-x86-64 git.2.4.0-96-gea69b7056 commit: ea69b705682314facde1fdb60a1a0a8d36fe6d90 build: 2018-03-13__23:20:07\r\n### Expected behavior\r\nit should run with blabla.rr2 parameters\r\n### Actual behavior\r\n`[0x08048320]> ood\r\nCould not execvp: Permission denied\r\nr_core_file_reopen: Cannot reopen file: dbg:///home/Mercurio/Documenti/CTFs/Root_me/blabla.rr2  with perms 0x0007, attempting to open read-only.`\r\n### Steps to reproduce the behavior \r\n- `r2 ch18.bin -e dbg.profile = blabla.rr2`\r\n- `ood`\r\n\r\nblabla.rr2: [blabla.zip](https://github.com/radare/radare2/files/1808939/blabla.zip)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM3MjkyMDA0OQ==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"Somehow it doesn't escape whitechars:\r\n\r\n<pre>\r\n> r2 /bin/ls -e dbg.profile=blabla.rr2\r\n -- Warning, your trial license is about to expire.\r\n[0x00005bc0]> e dbg.profile\r\nblabla.rr2\r\n[0x00005bc0]> quit\r\n\r\n> r2 /bin/ls -e dbg.profile = blabla.rr2\r\n\r\n\r\n\r\n -- Initial frame selected; you cannot go up.\r\n[0x00005bc0]> e dbg.profile\r\n\r\n[0x00005bc0]>\r\n</pre>\r\n\r\nIt should be easy to fix.","createdAt":"2018-03-14T06:40:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9687#issuecomment-372920049","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3MzE1MDQ2Nw==","author":{"login":"xambroz"},"authorAssociation":"CONTRIBUTOR","body":"Having Radare 2.50 on fedora 27 as well. \r\nThe issue seem really about the whitespaces in the rarun2 file - looking on some examples and past bug reports I tend to say it is rather feature then a bug.\r\n\r\nThis works:\r\nprogram=/bin/ls\r\n\r\n![image](https://user-images.githubusercontent.com/723625/37426506-972145dc-27be-11e8-8886-fa027c17f776.png)\r\n\r\nThis doesnn't work:\r\nprogram = /bin/ls\r\n\r\n![image](https://user-images.githubusercontent.com/723625/37426596-dbf37f22-27be-11e8-8f5f-a326dacad290.png)\r\n\r\n1) Please can you show us what are the permissions on the file you are having (ch18.bin/ch1.bin) ?\r\n\r\n2) Are you trying to run ch18.bin as you have on radare2 commandline or are you trying to run the ch1.bin as you have it in the rarun2 profile?\r\nIf ch18.bin ... then I guess the program in a profile should not be defined AND the program on the radare2 commandline should be the last parameter like:\r\nradare2 -e dbg.profile=blabla.rr2 ch18.bin\r\n\r\nSee https://github.com/radare/radare2/issues/3951 for more examples/explanation.\r\n\r\n\r\n\r\n ","createdAt":"2018-03-14T19:43:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9687#issuecomment-373150467","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3MzE2Njk5NQ==","author":{"login":"TWVyY3VyaW8K"},"authorAssociation":"NONE","body":"1.` [Mercurio@localhost Root_me]$ ls -la ch18.bin`\r\n`-rwxrwxr-x. 1 Mercurio Mercurio 5240 13 mar 21.10 ch18.bin`\r\n`[Mercurio@localhost Root_me]$ ls -la ch1.bin`\r\n`-rwxr-xr-x. 1 Mercurio Mercurio 7339 26 nov  2009 ch1.bin`\r\n\r\n2. I tried both: i tried to do `r2 ch18.bin -e dbg.profile = blabla.rr2` with program = ch8.bin into rr2 file, and i tried `r2 -e dbg.profile = blabla.rr2` with program = ch1.bin.\r\nthe first one shows \"permission denied\", the second one doesn't even open radare2\r\n\r\nIt works without spaces, so if it's a feature it's ok for me.","createdAt":"2018-03-14T20:40:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9687#issuecomment-373166995","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3MzIyMTk3MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Its not a feature. Do you want to try to make the patch to fix this issue? Thereâ€™s another issue discussing the same topic iirc\n\n> On 14 Mar 2018, at 21:40, Daniele Bianchin <notifications@github.com> wrote:\n> \n> 1.[Mercurio@localhost Root_me]$ ls -la ch18.bin\n> -rwxrwxr-x. 1 Mercurio Mercurio 5240 13 mar 21.10 ch18.bin\n> [Mercurio@localhost Root_me]$ ls -la ch1.bin\n> -rwxr-xr-x. 1 Mercurio Mercurio 7339 26 nov 2009 ch1.bin\n> \n> I tried both: i tried to do r2 ch18.bin -e dbg.profile = blabla.rr2 with program = ch8.bin into rr2 file, and i tried r2 -e dbg.profile = blabla.rr2 with program = ch1.bin.\n> the first one shows \"permission denied\", the second one doesn't even open radare2\n> Anyway without spaces it works, so if it's a feature it's ok for me.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-03-15T00:40:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9687#issuecomment-373221970","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3MzIyNTI2MQ==","author":{"login":"xambroz"},"authorAssociation":"CONTRIBUTOR","body":"Still the \"permission denied\"  is strange - I do not have any explanation for that one.\r\nPlease @Daniele-B could you try running with \"strace r2 -e dbg.profile = blabla.rr2\"  to see access to which file si being denied.\r\n\r\nAlso would you consider trying with the rpm build for Fedora whether the issue would be the same?\r\nHere is RPM for the today's commit :100: \r\nhttps://copr-be.cloud.fedoraproject.org/results/rebus/infosec-rebus/fedora-27-x86_64/00728012-radare2/\r\nhttps://copr-be.cloud.fedoraproject.org/results/rebus/infosec-rebus/fedora-27-x86_64/00728012-radare2/radare2-2.5.0-0.1.git38d3d36.fc27.x86_64.rpm\r\nhttps://copr-be.cloud.fedoraproject.org/results/rebus/infosec-rebus/fedora-27-x86_64/00728012-radare2/radare2-devel-2.5.0-0.1.git38d3d36.fc27.x86_64.rpm\r\n\r\n\r\n\r\n\r\n\r\n","createdAt":"2018-03-15T01:00:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9687#issuecomment-373225261","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3MzUzNjcyMQ==","author":{"login":"TWVyY3VyaW8K"},"authorAssociation":"NONE","body":"@radare I don't have knowledge about radare internals, so i'd prefer not\r\n\r\n@xambroz i attacched the output on this message cause its big. Here is: [ch1.log](https://github.com/radare/radare2/files/1817160/ch1.log)\r\nI've updated Fedora at the lastest version today and the output still the same.\r\n\"permissions denied\" shows only when i add filename on commandline and i type `ood` on radare2 shell.\r\n","createdAt":"2018-03-15T22:00:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9687#issuecomment-373536721","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3NDgzNTI4OQ==","author":{"login":"xambroz"},"authorAssociation":"CONTRIBUTOR","body":"Interesting - in the strace we can see that some directories are not where it should be, but nothing about permission denied. Possibly it could be in some sub-process.\r\nPlease can you try with the \"-f\" option to strace to follow also on the forked processes?\r\n\r\nSomething like:\r\nstrace -f r2 -e dbg.profile = blabla.rr2\r\nstrace -f r2 -e dbg.profile = blabla.rr2 2>&1 | grep -i -E \"open|perm\"\r\n\r\n\r\n ","createdAt":"2018-03-21T05:09:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9687#issuecomment-374835289","viewerDidAuthor":false}],"number":9687,"title":"Can't open rarun2 file"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | OSX / x86/64\r\n| File format of the file you reverse (mandatory)      | ALL\r\n| Architecture/bits of the file (mandatory)            | ALL\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.5.0-git 17574 @ darwin-x86-64 git.2.4.0-56-g4dffa5cd2 commit: 4dffa5cd2e7fec369b6ee55d7e43c8039e8aa7b5 build: 2018-03-09__20:12:34\r\n\r\n### Expected behavior\r\n\r\n/c and /cj should search also .sub disable/enable with asm.relsub false/true asm.filter true/false and asm.jmpsub true/false\r\n\r\n```\r\n[0x100001200]> /c isatty\r\n0x100001242   # 5: call sym.imp.isatty\r\n\r\n[0x100001200]> /cj isatty\r\n[{\"offset\":xxxxx,\"len\":5,\"code\":\"call sym.imp.isatty\"}]\r\n\r\n[0x100001200]> /cj 0x100004400\r\n0x100001242   # 5: call sym.imp.isatty\r\n\r\n[0x100001200]> /cj 0x100004400\r\n{\"offset\":4294971970 ,\"len\":5,\"code\":\"call sym.imp.isatty\"}\r\n```\r\n\r\n### Actual behavior\r\n\r\n```\r\n\r\n[0x100001200]> /c isatty\r\n\r\n[0x100001200]> /cj isatty\r\n\r\n[0x100001200]> /cj 0x100004400\r\n0x100001242   # 5: call 0x100004400\r\n\r\n[0x100001200]> /cj 0x100004400\r\n{\"offset\":4294971970 ,\"len\":5,\"code\":\"call 0x100004400\"}\r\n```\r\nls binary:\r\n[ls.zip](https://github.com/radare/radare2/files/1800197/ls.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0ODEwNzUwNg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@Maijin is this still relevant? Right now there are many more `/` commands, so maybe there is something that improves the situation?","createdAt":"2020-06-23T12:16:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9653#issuecomment-648107506","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0OTgzNjU5OA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"No that's important and not just for radare2, for cutter too! Basically one cannot search for sym.imp.XXX using /ac and /acj that's a major RSearch issue!","createdAt":"2020-06-25T21:53:34Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9653#issuecomment-649836598","viewerDidAuthor":false}],"number":9653,"title":"/c and /cj should search also .sub disable/enable"},{"body":"### Expected behavior\r\nI assume that `pdf` (pdc, pdr, maybe other?) should disassemble whole function, but it can't  disassemble after **int3** instruction. `pd` works as expected.\r\n### Actual behavior\r\nRecorded behavior: https://asciinema.org/a/zCQiST74pLRckCyWcrCOSuisT\r\n\r\n### Steps to reproduce the behavior \r\n- Use this binary [lab2.zip](https://github.com/radare/radare2/files/1799910/lab2.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM3MjA3NjM4NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Int3 is a breakpoint, no execution will happen after that. Why it should be considered differently? And pdf, pdr, pdc and others are completely unrelated to the code analysis loops\n\n> On 11 Mar 2018, at 00:38, wavvs <notifications@github.com> wrote:\n> \n> Expected behavior\n> \n> I assume that pdf (pdc, pdr, maybe other?) should disassemble whole function, but it can't disassemble after int3 instruction. pd works as expected.\n> \n> Actual behavior\n> \n> Recorded behavior: https://asciinema.org/a/zCQiST74pLRckCyWcrCOSuisT\n> \n> Steps to reproduce the behavior\n> \n> Use this binary lab2.zip\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-03-10T23:41:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9649#issuecomment-372076384","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3MjA3NjYyNw==","author":{"login":"wavvs"},"authorAssociation":"NONE","body":"I expect that if `pdf` disas whole function it shouldn't stop at int3, it should disas until last ret instruction, right?","createdAt":"2018-03-10T23:46:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9649#issuecomment-372076627","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3MjA3ODA3OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Pdf shows what the previous analysis did. So its not pdf fault. And no, not all functions end with a ret. some do with jmp others with call , others with breakpoint instructions etc\n\n> On 11 Mar 2018, at 00:46, wavvs <notifications@github.com> wrote:\n> \n> I expect that if pdf disas whole function it shouldn't stop at int3, it should disas until last ret instruction, right?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-03-11T00:12:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9649#issuecomment-372078079","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3MjA3ODY0Nw==","author":{"login":"wavvs"},"authorAssociation":"NONE","body":"Yeah, my mistake, sorry, I meant function in my situation. So it is not an issue or something with analysis? ","createdAt":"2018-03-11T00:24:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9649#issuecomment-372078647","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3MjEwMTEwOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I didnt had time to check this bin with my laptop yet. But one option to skip that would be to add anal hints or tweak the analysis loop or the plugin to make int3 instructions be considered a nop. But anyway i doubt any anyalisis tool will consider an int3 not the end of a function\n\n> On 11 Mar 2018, at 01:24, wavvs <notifications@github.com> wrote:\n> \n> Yeah, my mistake, sorry, I meant function in my situation. So it is not an issue or something with analysis?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-03-11T09:23:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9649#issuecomment-372101109","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUzODAyMg==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T05:24:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9649#issuecomment-644538022","viewerDidAuthor":false}],"number":9649,"title":"pdf does not print instructions after int3 "},{"body":"this is /bin/ls from debian after aab\r\n\r\n<img width=\"836\" alt=\"screen shot 2018-03-07 at 01 58 56\" src=\"https://user-images.githubusercontent.com/917142/37067663-2cefef38-21ab-11e8-89e4-c05a58c5ea17.png\">\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0ODE0NjYxOQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"No actual reproducer here. Is this still relevant @trufae ? If not, please close, otherwise just comment and remove the `inactive` label.","createdAt":"2020-06-23T13:27:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9613#issuecomment-648146619","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0ODMyMTkxMw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"maybe worth checking by defragger who wrote the code. i dont think anything changed, but im aware of some issues in aab on some cases, but it works pretty well in other cases. ill ping him in telegram","createdAt":"2020-06-23T17:55:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9613#issuecomment-648321913","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY0ODc4MjYwMw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Any binary with nopsleds should work as a test case but i dont have any here, anyone have a file like this handy?","createdAt":"2020-06-24T12:13:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9613#issuecomment-648782603","viewerDidAuthor":true}],"number":9613,"title":"nopskip ignored by aab"},{"body":"cc @radare \r\n\r\nI've been thinking for a while that we should have better handling when loading coredumps.\r\nRight now (I'm talking for ELF), the only thing we do is retrieve the registers and spit them to the output so the user has a chance to set it via \"arw\".\r\nI think we could:\r\n\r\n1) Retrieve the register values and set them automatically\r\n2) Retrieve the maps and set them\r\n\r\nThe good thing about setting the maps is that the user could dig in the stack for example.\r\n\r\nIn order to do that, i think a core should be open with \"-d\".\r\nIs there a preferred way to do this? (if not I can do it my way)\r\n\r\n- [x] Loading core for analysis\r\n- [ ] Loading core for debugging\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM3MDc5NzAzMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Agree. Theres no prefered way. Just design it the best you can think of and we can discuss later on this :)\n\n> On 6 Mar 2018, at 14:08, Oscar Salvador <notifications@github.com> wrote:\n> \n> cc @radare\n> \n> I've been thinking for a while that we should have better handling when loading coredumps.\n> Right now (I'm talking for ELF), the only thing we do is retrieve the registers and spit them to the output so the user has a chance to set it via \"arw\".\n> I think we could:\n> \n> Retrieve the register values and set them automatically\n> Retrieve the maps and set them\n> The good thing about setting the maps is that the user could dig in the stack for example.\n> \n> In order to do that, i think a core should be open with \"-d\".\n> Is there a preferred way to do this? (if not I can do it my way)\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-03-06T14:23:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9606#issuecomment-370797033","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3MDg1NDczMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Keep in mind that the same treatment may be needed for MDMP loading too.","createdAt":"2018-03-06T17:09:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9606#issuecomment-370854731","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3MDg1NDg1Nw==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"You can assign this to me if you want","createdAt":"2018-03-06T17:09:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9606#issuecomment-370854857","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3MTgyMjI2NQ==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"Ok, I have got something.\r\nThe approach I took is to split it in two parts:\r\n\r\n<b>1)</b> $ r2 [corefile] - This will load the maps and the regstate found in the coredump. Only for analysis.\r\n<b>2)</b> $ r2 -d [binary] [corefile] - This will start a new process and set the maps and the regstate to the ones found in the coreudmp. This will be for debugging.\r\n\r\nSo far, I got the first part working:\r\n\r\n<pre>\r\n$ /lab/r2/core> readelf -h core | grep Type\r\n  Type:                              CORE (Core file)\r\n$ /lab/r2/core> r2 core \r\nSetting up coredump: 17 maps have been found and created\r\nSetting up coredump: Registers have been set\r\n -- Now with more better English!\r\n[0x00000000]> om\r\n17 fd: 3 +0x0003807c 0xffffffffff600000 - 0xffffffffff600fff -r-x \r\n16 fd: 3 +0x0003607c 0x7ffd7d93b000 - 0x7ffd7d93cfff -r-x \r\n15 fd: 3 +0x0003607c 0x7ffd7d938000 - 0x7ffd7d93afff -r-x \r\n14 fd: 3 +0x0001507c 0x7ffd7d880000 - 0x7ffd7d8a0fff -r-x \r\n13 fd: 3 +0x0001407c 0x7f1c7983e000 - 0x7f1c7983efff -r-x \r\n12 fd: 3 +0x0001307c 0x7f1c7983d000 - 0x7f1c7983dfff -r-x /lib64/ld-2.22.so\r\n11 fd: 3 +0x0001207c 0x7f1c7983c000 - 0x7f1c7983cfff -r-x /lib64/ld-2.22.so\r\n10 fd: 3 +0x0001007c 0x7f1c7983a000 - 0x7f1c7983bfff -r-x \r\n 9 fd: 3 +0x0000d07c 0x7f1c79819000 - 0x7f1c7981bfff -r-x \r\n 8 fd: 3 +0x0000d07c 0x7f1c7961c000 - 0x7f1c7963cfff -r-x /lib64/ld-2.22.so\r\n 7 fd: 3 +0x0000907c 0x7f1c79618000 - 0x7f1c7961bfff -r-x \r\n 6 fd: 3 +0x0000707c 0x7f1c79616000 - 0x7f1c79617fff -r-x /lib64/libc-2.22.so\r\n 5 fd: 3 +0x0000307c 0x7f1c79612000 - 0x7f1c79615fff -r-x /lib64/libc-2.22.so\r\n 4 fd: 3 +0x0000307c 0x7f1c79279000 - 0x7f1c79411fff -r-x /lib64/libc-2.22.so\r\n 3 fd: 3 +0x0000207c 0x00601000 - 0x00601fff -r-x /home/osalvador/lab/r2/core/arg\r\n 2 fd: 3 +0x0000107c 0x00600000 - 0x00600fff -r-x /home/osalvador/lab/r2/core/arg\r\n 1 fd: 3 +0x0000107c 0x00400000 - 0x00400fff -r-x /home/osalvador/lab/r2/core/arg\r\n[0x00000000]> [0x00000000]> ar\r\nrax = 0xfffffffffffffdfc\r\nrbx = 0x7ffd7d89fc00\r\nrcx = 0x7f1c79333040\r\nrdx = 0x00000000\r\nrsi = 0x7ffd7d89fbf0\r\nrdi = 0x7ffd7d89fbf0\r\nr8 = 0x7ffd7d89fd00\r\nr9 = 0x7ffd7d89fb40\r\nr10 = 0x00000008\r\nr11 = 0x00000246\r\nr12 = 0x7ffd7d89fc80\r\nr13 = 0x7ffd7d89fed0\r\nr14 = 0x00000000\r\nr15 = 0x00000000\r\nrip = 0x7f1c79333040\r\nrbp = 0xffffffff\r\nrflags = 0x00000246\r\nrsp = 0x7ffd7d89fbe8\r\n[0x00000000]> px 8 @ 0x7ffd7d89fbe8\r\n- offset -       0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x7ffd7d89fbe8  f42e 3379 1c7f 0000                      ..3y....\r\n[0x00000000]> pd 4 @ 0x004004f0\r\n            0x004004f0      31ed           xor ebp, ebp\r\n            0x004004f2      4989d1         mov r9, rdx\r\n            0x004004f5      5e             pop rsi\r\n            0x004004f6      4889e2         mov rdx, rsp\r\n[0x00000000]>\r\n</pre>\r\n\r\n* sidenote: perms are not the real ones, i did not set them yet, but that is trivial.\r\n\r\nI have only tested it on x86_64, so the next step is to check that works on other archs.\r\nAfter that, I will start part 2.","createdAt":"2018-03-09T14:10:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9606#issuecomment-371822265","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3MjI4NDczNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Cool!\n\n> On 9 Mar 2018, at 15:10, Oscar Salvador <notifications@github.com> wrote:\n> \n> Ok, I have got something.\n> The approach I took is to split it in two parts:\n> \n> 1) $ r2 [corefile] - This will load the maps and the regstate found in the coredump. Only for analysis.\n> 2) $ r2 -d [binary] [corefile] - This will start a new process and set the maps and the regstate to the ones found in the coreudmp. This will be for debugging.\n> \n> So far, I got the first part working:\n> \n> $ /lab/r2/core> readelf -h core | grep Type\n>   Type:                              CORE (Core file)\n> $ /lab/r2/core> r2 core \n> Setting up coredump: 17 maps have been found and created\n> Setting up coredump: Registers have been set\n>  -- Now with more better English!\n> [0x00000000]> om\n> 17 fd: 3 +0x0003807c 0xffffffffff600000 - 0xffffffffff600fff -r-x \n> 16 fd: 3 +0x0003607c 0x7ffd7d93b000 - 0x7ffd7d93cfff -r-x \n> 15 fd: 3 +0x0003607c 0x7ffd7d938000 - 0x7ffd7d93afff -r-x \n> 14 fd: 3 +0x0001507c 0x7ffd7d880000 - 0x7ffd7d8a0fff -r-x \n> 13 fd: 3 +0x0001407c 0x7f1c7983e000 - 0x7f1c7983efff -r-x \n> 12 fd: 3 +0x0001307c 0x7f1c7983d000 - 0x7f1c7983dfff -r-x /lib64/ld-2.22.so\n> 11 fd: 3 +0x0001207c 0x7f1c7983c000 - 0x7f1c7983cfff -r-x /lib64/ld-2.22.so\n> 10 fd: 3 +0x0001007c 0x7f1c7983a000 - 0x7f1c7983bfff -r-x \n>  9 fd: 3 +0x0000d07c 0x7f1c79819000 - 0x7f1c7981bfff -r-x \n>  8 fd: 3 +0x0000d07c 0x7f1c7961c000 - 0x7f1c7963cfff -r-x /lib64/ld-2.22.so\n>  7 fd: 3 +0x0000907c 0x7f1c79618000 - 0x7f1c7961bfff -r-x \n>  6 fd: 3 +0x0000707c 0x7f1c79616000 - 0x7f1c79617fff -r-x /lib64/libc-2.22.so\n>  5 fd: 3 +0x0000307c 0x7f1c79612000 - 0x7f1c79615fff -r-x /lib64/libc-2.22.so\n>  4 fd: 3 +0x0000307c 0x7f1c79279000 - 0x7f1c79411fff -r-x /lib64/libc-2.22.so\n>  3 fd: 3 +0x0000207c 0x00601000 - 0x00601fff -r-x /home/osalvador/lab/r2/core/arg\n>  2 fd: 3 +0x0000107c 0x00600000 - 0x00600fff -r-x /home/osalvador/lab/r2/core/arg\n>  1 fd: 3 +0x0000107c 0x00400000 - 0x00400fff -r-x /home/osalvador/lab/r2/core/arg\n> [0x00000000]> [0x00000000]> ar\n> rax = 0xfffffffffffffdfc\n> rbx = 0x7ffd7d89fc00\n> rcx = 0x7f1c79333040\n> rdx = 0x00000000\n> rsi = 0x7ffd7d89fbf0\n> rdi = 0x7ffd7d89fbf0\n> r8 = 0x7ffd7d89fd00\n> r9 = 0x7ffd7d89fb40\n> r10 = 0x00000008\n> r11 = 0x00000246\n> r12 = 0x7ffd7d89fc80\n> r13 = 0x7ffd7d89fed0\n> r14 = 0x00000000\n> r15 = 0x00000000\n> rip = 0x7f1c79333040\n> rbp = 0xffffffff\n> rflags = 0x00000246\n> rsp = 0x7ffd7d89fbe8\n> [0x00000000]> px 8 @ 0x7ffd7d89fbe8\n> - offset -       0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\n> 0x7ffd7d89fbe8  f42e 3379 1c7f 0000                      ..3y....\n> [0x00000000]> pd 4 @ 0x004004f0\n>             0x004004f0      31ed           xor ebp, ebp\n>             0x004004f2      4989d1         mov r9, rdx\n>             0x004004f5      5e             pop rsi\n>             0x004004f6      4889e2         mov rdx, rsp\n> [0x00000000]>\n> I have only tested it on x86_64, so the next step is to check that works on other archs.\n> After that, I will start part 2.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-03-12T11:53:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9606#issuecomment-372284737","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3MzY3ODY2MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can we close this now?","createdAt":"2018-03-16T10:55:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9606#issuecomment-373678660","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3MzY4MDIwNA==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"No please.\r\nI would like to start with the part 2 of this, which should be loading the binary for debugging with the status of the coredump, just as gdb does with \"gdb [binary] [coredump]\".\r\nI am planning to start soon.","createdAt":"2018-03-16T11:01:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9606#issuecomment-373680204","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3OTU5NTM2MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping","createdAt":"2018-04-09T00:25:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9606#issuecomment-379595360","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5NjMyODQ2MA==","author":{"login":"mcd1992"},"authorAssociation":"CONTRIBUTOR","body":"Commenting so I can find this later and give implementation a shot after getting a little more familiar with the codebase.","createdAt":"2018-06-11T17:50:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9606#issuecomment-396328460","viewerDidAuthor":false}],"number":9606,"title":"Better handling when loading coredump"},{"body":"Like structure offset will propagate over all immediates. Suggesting `tC` command for that.\r\n Currently is possible as a part of enum, but would be handy even without enum.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3Mzg3ODgxOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Right now:\r\n```\r\n[0x00000000]> \"td const int foo = 3;\"\r\n<string>:1: error: ';' expected (got \"=\")\r\n<string>:1: error: declaration expected\r\n```","createdAt":"2019-03-18T11:51:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9600#issuecomment-473878819","viewerDidAuthor":false}],"number":9600,"title":"Define a constant via \"types\" command"},{"body":"When printing the used libraries of a Mach-O binary with _otool_, the output looks like this:\r\n\r\n```\r\n/System/Library/Frameworks/Foundation.framework/Foundation (compatibility version 300.0.0, current version 1450.14.0)\r\n/usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0)\r\n/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1252.0.0)\r\n/System/Library/Frameworks/AddressBook.framework/AddressBook (compatibility version 1.0.0, current version 1.0.0)\r\n```\r\n\r\nSo could we extend the `il` command, to also print the compatibility and current version?","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM3MDEzNDk4MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Seems like a good addition to rbin. But this implies changing the liblist to return a list of structs instead of strings.\n\nAlso, wonder which other fileformats expose this info outside the filename\n\n> On 3 Mar 2018, at 07:52, Daniel Corak <notifications@github.com> wrote:\n> \n> When printing the used libraries of a Mach-O binary with otool, the output looks like this:\n> \n> /System/Library/Frameworks/Foundation.framework/Foundation (compatibility version 300.0.0, current version 1450.14.0)\n> /usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0)\n> /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1252.0.0)\n> /System/Library/Frameworks/AddressBook.framework/AddressBook (compatibility version 1.0.0, current version 1.0.0)\n> So could we extend the il command, to also print the compatibility and current version?\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-03-03T09:49:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9557#issuecomment-370134980","viewerDidAuthor":false}],"number":9557,"title":"Not only list the used library names, but also their version"},{"body":"Hello, I have made a few issues about this problem. Like GDB, it's very useful to do something like \"pd\", read the assembly, and press enter again to continue the assembly. Last time I brought up this issue, I was told to use \"e cmd.repeat = true\". This actually is inaccurate as shown below:\r\n\r\n$ r2 /bin/ls\r\n -- It's working! Look at the door!\r\n[0x00005430]> b 32\r\n[0x00005430]> pd\r\n            ;-- entry0:\r\n            ;-- rip:\r\n            0x00005430      31ed           xor ebp, ebp\r\n            0x00005432      4989d1         mov r9, rdx\r\n            0x00005435      5e             pop rsi\r\n            0x00005436      4889e2         mov rdx, rsp\r\n            0x00005439      4883e4f0       and rsp, 0xfffffffffffffff0\r\n            0x0000543d      50             push rax\r\n            0x0000543e      54             push rsp\r\n            0x0000543f      4c8d05ca0701.  lea r8, [0x00015c10]\r\n[0x00005430]>  **PRESSING ENTER DOES NOTHING**\r\n[0x00005430]> e cmd.repeat = true\r\n[0x00005430]> pd\r\n            ;-- entry0:\r\n            ;-- rip:\r\n            0x00005430      31ed           xor ebp, ebp\r\n            0x00005432      4989d1         mov r9, rdx\r\n            0x00005435      5e             pop rsi\r\n            0x00005436      4889e2         mov rdx, rsp\r\n            0x00005439      4883e4f0       and rsp, 0xfffffffffffffff0\r\n            0x0000543d      50             push rax\r\n            0x0000543e      54             push rsp\r\n            0x0000543f      4c8d05ca0701.  lea r8, [0x00015c10]\r\n[0x00005430]>  **ENTER PRESSED**\r\n            0x000054ae      55             push rbp **<-- wrong address. a lot further up in .text**\r\n            0x000054af      4829fe         sub rsi, rdi\r\n            0x000054b2      4889e5         mov rbp, rsp\r\n            0x000054b5      48c1fe03       sar rsi, 3\r\n            0x000054b9      4889f0         mov rax, rsi\r\n            0x000054bc      48c1e83f       shr rax, 0x3f\r\n            0x000054c0      4801c6         add rsi, rax                ; '#'\r\n            0x000054c3      48d1fe         sar rsi, 1\r\n        :   0x00005526      662e0f1f8400.  nop word cs:[rax + rax]\r\n        :   ;-- entry1.init:\r\n        :   0x00005530      488d3d618e21.  lea rdi, [0x0021e398]       ; section..jcr\r\n        :   0x00005537      48833f00       cmp qword [rdi], 0\r\n       ,==< 0x0000553b      750b           jne 0x5548\r\n       |`=< 0x0000553d      e95effffff     jmp 0x54a0\r\n       |    0x00005542      660f1f440000   nop word [rax + rax]\r\n       `--> 0x00005548      488b05899a21.  mov rax, qword [reloc._Jv_RegisterClasses_216] ; [0x21efd8:8]=0\r\n            0x0000554f      4885c0         test rax, rax\r\n[0x00005526]> b 64 **switch to 64 block size just to prove the point**\r\n[0x00005526]> s 0x5430\r\n[0x00005430]> pd\r\n            ;-- entry0:\r\n            ;-- rip:\r\n            0x00005430      31ed           xor ebp, ebp\r\n            0x00005432      4989d1         mov r9, rdx\r\n            0x00005435      5e             pop rsi\r\n            0x00005436      4889e2         mov rdx, rsp\r\n            0x00005439      4883e4f0       and rsp, 0xfffffffffffffff0\r\n            0x0000543d      50             push rax\r\n            0x0000543e      54             push rsp\r\n            0x0000543f      4c8d05ca0701.  lea r8, [0x00015c10]\r\n            0x00005446      488d0d530701.  lea rcx, [0x00015ba0] **<-- this part is skipped above**\r\n            0x0000544d      488d3d5ce7ff.  lea rdi, [0x00003bb0]       ; section..text ; \"AWAVAUATA\\x89\\xfcUSH\\x89\\xf5H\\x83\\xecHH\\x8b>dH\\x8b\\x04%(\"\r\n            0x00005454      ff15669b2100   call qword [reloc.__libc_start_main_192] ; [0x21efc0:8]=0\r\n            0x0000545a      f4             hlt\r\n            0x0000545b      0f1f440000     nop dword [rax + rax]\r\n            0x00005460      488d3d81a121.  lea rdi, [loc.__bss_start]  ; 0x21f5e8\r\n            0x00005467      488d0581a121.  lea rax, [0x0021f5ef]\r\n            0x0000546e      55             push rbp\r\n[0x00005430]> \r\n\r\nSo to recap, after enabling cmd.repeat, when I press repeat on an assembly it doesn't continue disassembling at the correct location.\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM2ODAyNTE1MQ==","author":{"login":"msftsecurityteam"},"authorAssociation":"NONE","body":"This is the latest git commit as of 2/23/2018 9:33 AM EST, but it's been happening for a while now","createdAt":"2018-02-23T14:33:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9479#issuecomment-368025151","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2ODA1MzczNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"it goes by block size not instruction size\n\n> On 23 Feb 2018, at 15:29, msftsecurityteam <notifications@github.com> wrote:\n> \n> Hello, I have made a few issues about this problem. Like GDB, it's very useful to do something like \"pd\", read the assembly, and press enter again to continue the assembly. Last time I brought up this issue, I was told to use \"e cmd.repeat = true\". This actually is inaccurate as shown below:\n> \n> $ r2 /bin/ls\n> -- It's working! Look at the door!\n> [0x00005430]> b 32\n> [0x00005430]> pd\n> ;-- entry0:\n> ;-- rip:\n> 0x00005430 31ed xor ebp, ebp\n> 0x00005432 4989d1 mov r9, rdx\n> 0x00005435 5e pop rsi\n> 0x00005436 4889e2 mov rdx, rsp\n> 0x00005439 4883e4f0 and rsp, 0xfffffffffffffff0\n> 0x0000543d 50 push rax\n> 0x0000543e 54 push rsp\n> 0x0000543f 4c8d05ca0701. lea r8, [0x00015c10]\n> [0x00005430]> *** PRESSING ENTER DOES NOTHING ***\n> [0x00005430]> e cmd.repeat = true\n> [0x00005430]> pd\n> ;-- entry0:\n> ;-- rip:\n> 0x00005430 31ed xor ebp, ebp\n> 0x00005432 4989d1 mov r9, rdx\n> 0x00005435 5e pop rsi\n> 0x00005436 4889e2 mov rdx, rsp\n> 0x00005439 4883e4f0 and rsp, 0xfffffffffffffff0\n> 0x0000543d 50 push rax\n> 0x0000543e 54 push rsp\n> 0x0000543f 4c8d05ca0701. lea r8, [0x00015c10]\n> [0x00005430]> *** ENTER PRESSED ***\n> 0x000054ae 55 push rbp <-- but, it starts way further up in .text than it should\n> 0x000054af 4829fe sub rsi, rdi\n> 0x000054b2 4889e5 mov rbp, rsp\n> 0x000054b5 48c1fe03 sar rsi, 3\n> 0x000054b9 4889f0 mov rax, rsi\n> 0x000054bc 48c1e83f shr rax, 0x3f\n> 0x000054c0 4801c6 add rsi, rax ; '#'\n> 0x000054c3 48d1fe sar rsi, 1\n> : 0x00005526 662e0f1f8400. nop word cs:[rax + rax]\n> : ;-- entry1.init:\n> : 0x00005530 488d3d618e21. lea rdi, [0x0021e398] ; section..jcr\n> : 0x00005537 48833f00 cmp qword [rdi], 0\n> ,==< 0x0000553b 750b jne 0x5548\n> |=< 0x0000553d e95effffff jmp 0x54a0 | 0x00005542 660f1f440000 nop word [rax + rax]--> 0x00005548 488b05899a21. mov rax, qword [reloc._Jv_RegisterClasses_216] ; [0x21efd8:8]=0\n> 0x0000554f 4885c0 test rax, rax\n> [0x00005526]> b 64 *** switch to 64 block size just to prove the point ***\n> [0x00005526]> s 0x5430\n> [0x00005430]> pd\n> ;-- entry0:\n> ;-- rip:\n> 0x00005430 31ed xor ebp, ebp\n> 0x00005432 4989d1 mov r9, rdx\n> 0x00005435 5e pop rsi\n> 0x00005436 4889e2 mov rdx, rsp\n> 0x00005439 4883e4f0 and rsp, 0xfffffffffffffff0\n> 0x0000543d 50 push rax\n> 0x0000543e 54 push rsp\n> 0x0000543f 4c8d05ca0701. lea r8, [0x00015c10]\n> 0x00005446 488d0d530701. lea rcx, [0x00015ba0] **** this part is skipped above ****\n> 0x0000544d 488d3d5ce7ff. lea rdi, [0x00003bb0] ; section..text ; \"AWAVAUATA\\x89\\xfcUSH\\x89\\xf5H\\x83\\xecHH\\x8b>dH\\x8b\\x04%(\"\n> 0x00005454 ff15669b2100 call qword [reloc.__libc_start_main_192] ; [0x21efc0:8]=0\n> 0x0000545a f4 hlt\n> 0x0000545b 0f1f440000 nop dword [rax + rax]\n> 0x00005460 488d3d81a121. lea rdi, [loc.__bss_start] ; 0x21f5e8\n> 0x00005467 488d0581a121. lea rax, [0x0021f5ef]\n> 0x0000546e 55 push rbp\n> [0x00005430]>\n> \n> So to recap, after enabling cmd.repeat, when I press repeat on an assembly it doesn't continue disassembling at the correct location.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/9479>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lqMd0AAVdChGW_2EBxeOtZ-rhMEuks5tXss9gaJpZM4SQ9Vo>.\n> \n\n","createdAt":"2018-02-23T16:07:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9479#issuecomment-368053735","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2ODA4NTM0NQ==","author":{"login":"msftsecurityteam"},"authorAssociation":"NONE","body":"So how do I get an enter press to continue disassembling where I left off\npreviously?\nOn Fri, Feb 23, 2018 at 11:07 AM radare <notifications@github.com> wrote:\n\n> it goes by block size not instruction size\n>\n> > On 23 Feb 2018, at 15:29, msftsecurityteam <notifications@github.com>\n> wrote:\n> >\n> > Hello, I have made a few issues about this problem. Like GDB, it's very\n> useful to do something like \"pd\", read the assembly, and press enter again\n> to continue the assembly. Last time I brought up this issue, I was told to\n> use \"e cmd.repeat = true\". This actually is inaccurate as shown below:\n> >\n> > $ r2 /bin/ls\n> > -- It's working! Look at the door!\n> > [0x00005430]> b 32\n> > [0x00005430]> pd\n> > ;-- entry0:\n> > ;-- rip:\n> > 0x00005430 31ed xor ebp, ebp\n> > 0x00005432 4989d1 mov r9, rdx\n> > 0x00005435 5e pop rsi\n> > 0x00005436 4889e2 mov rdx, rsp\n> > 0x00005439 4883e4f0 and rsp, 0xfffffffffffffff0\n> > 0x0000543d 50 push rax\n> > 0x0000543e 54 push rsp\n> > 0x0000543f 4c8d05ca0701. lea r8, [0x00015c10]\n> > [0x00005430]> *** PRESSING ENTER DOES NOTHING ***\n> > [0x00005430]> e cmd.repeat = true\n> > [0x00005430]> pd\n> > ;-- entry0:\n> > ;-- rip:\n> > 0x00005430 31ed xor ebp, ebp\n> > 0x00005432 4989d1 mov r9, rdx\n> > 0x00005435 5e pop rsi\n> > 0x00005436 4889e2 mov rdx, rsp\n> > 0x00005439 4883e4f0 and rsp, 0xfffffffffffffff0\n> > 0x0000543d 50 push rax\n> > 0x0000543e 54 push rsp\n> > 0x0000543f 4c8d05ca0701. lea r8, [0x00015c10]\n> > [0x00005430]> *** ENTER PRESSED ***\n> > 0x000054ae 55 push rbp <-- but, it starts way further up in .text than\n> it should\n> > 0x000054af 4829fe sub rsi, rdi\n> > 0x000054b2 4889e5 mov rbp, rsp\n> > 0x000054b5 48c1fe03 sar rsi, 3\n> > 0x000054b9 4889f0 mov rax, rsi\n> > 0x000054bc 48c1e83f shr rax, 0x3f\n> > 0x000054c0 4801c6 add rsi, rax ; '#'\n> > 0x000054c3 48d1fe sar rsi, 1\n> > : 0x00005526 662e0f1f8400. nop word cs:[rax + rax]\n> > : ;-- entry1.init:\n> > : 0x00005530 488d3d618e21. lea rdi, [0x0021e398] ; section..jcr\n> > : 0x00005537 48833f00 cmp qword [rdi], 0\n> > ,==< 0x0000553b 750b jne 0x5548\n> > |=< 0x0000553d e95effffff jmp 0x54a0 | 0x00005542 660f1f440000 nop word\n> [rax + rax]--> 0x00005548 488b05899a21. mov rax, qword\n> [reloc._Jv_RegisterClasses_216] ; [0x21efd8:8]=0\n> > 0x0000554f 4885c0 test rax, rax\n> > [0x00005526]> b 64 *** switch to 64 block size just to prove the point\n> ***\n> > [0x00005526]> s 0x5430\n> > [0x00005430]> pd\n> > ;-- entry0:\n> > ;-- rip:\n> > 0x00005430 31ed xor ebp, ebp\n> > 0x00005432 4989d1 mov r9, rdx\n> > 0x00005435 5e pop rsi\n> > 0x00005436 4889e2 mov rdx, rsp\n> > 0x00005439 4883e4f0 and rsp, 0xfffffffffffffff0\n> > 0x0000543d 50 push rax\n> > 0x0000543e 54 push rsp\n> > 0x0000543f 4c8d05ca0701. lea r8, [0x00015c10]\n> > 0x00005446 488d0d530701. lea rcx, [0x00015ba0] **** this part is skipped\n> above ****\n> > 0x0000544d 488d3d5ce7ff. lea rdi, [0x00003bb0] ; section..text ;\n> \"AWAVAUATA\\x89\\xfcUSH\\x89\\xf5H\\x83\\xecHH\\x8b>dH\\x8b\\x04%(\"\n> > 0x00005454 ff15669b2100 call qword [reloc.__libc_start_main_192] ;\n> [0x21efc0:8]=0\n> > 0x0000545a f4 hlt\n> > 0x0000545b 0f1f440000 nop dword [rax + rax]\n> > 0x00005460 488d3d81a121. lea rdi, [loc.__bss_start] ; 0x21f5e8\n> > 0x00005467 488d0581a121. lea rax, [0x0021f5ef]\n> > 0x0000546e 55 push rbp\n> > [0x00005430]>\n> >\n> > So to recap, after enabling cmd.repeat, when I press repeat on an\n> assembly it doesn't continue disassembling at the correct location.\n> >\n> > â€”\n> > You are receiving this because you are subscribed to this thread.\n> > Reply to this email directly, view it on GitHub <\n> https://github.com/radare/radare2/issues/9479>, or mute the thread <\n> https://github.com/notifications/unsubscribe-auth/AA3-lqMd0AAVdChGW_2EBxeOtZ-rhMEuks5tXss9gaJpZM4SQ9Vo\n> >.\n> >\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/radare/radare2/issues/9479#issuecomment-368053735>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AGSvM3Q8GtiZGcL7NPRQY5FFVTDCVzEgks5tXuI9gaJpZM4SQ9Vo>\n> .\n>\n","createdAt":"2018-02-23T17:46:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9479#issuecomment-368085345","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2ODA4NjQxMA==","author":{"login":"msftsecurityteam"},"authorAssociation":"NONE","body":"Maybe I am misunderstanding but block size doesnâ€™t appear to be relevant\nhere at all. I disassemble at 0x5430 with block size 32 (0x20), but\npressing enter starts disassembly at 0x54ae, 0x7e bytes away?\nOn Fri, Feb 23, 2018 at 12:46 PM MC <darkhat@gmail.com> wrote:\n\n> So how do I get an enter press to continue disassembling where I left off\n> previously?\n> On Fri, Feb 23, 2018 at 11:07 AM radare <notifications@github.com> wrote:\n>\n>> it goes by block size not instruction size\n>>\n>> > On 23 Feb 2018, at 15:29, msftsecurityteam <notifications@github.com>\n>> wrote:\n>> >\n>> > Hello, I have made a few issues about this problem. Like GDB, it's very\n>> useful to do something like \"pd\", read the assembly, and press enter again\n>> to continue the assembly. Last time I brought up this issue, I was told to\n>> use \"e cmd.repeat = true\". This actually is inaccurate as shown below:\n>> >\n>> > $ r2 /bin/ls\n>> > -- It's working! Look at the door!\n>> > [0x00005430]> b 32\n>> > [0x00005430]> pd\n>> > ;-- entry0:\n>> > ;-- rip:\n>> > 0x00005430 31ed xor ebp, ebp\n>> > 0x00005432 4989d1 mov r9, rdx\n>> > 0x00005435 5e pop rsi\n>> > 0x00005436 4889e2 mov rdx, rsp\n>> > 0x00005439 4883e4f0 and rsp, 0xfffffffffffffff0\n>> > 0x0000543d 50 push rax\n>> > 0x0000543e 54 push rsp\n>> > 0x0000543f 4c8d05ca0701. lea r8, [0x00015c10]\n>> > [0x00005430]> *** PRESSING ENTER DOES NOTHING ***\n>> > [0x00005430]> e cmd.repeat = true\n>> > [0x00005430]> pd\n>> > ;-- entry0:\n>> > ;-- rip:\n>> > 0x00005430 31ed xor ebp, ebp\n>> > 0x00005432 4989d1 mov r9, rdx\n>> > 0x00005435 5e pop rsi\n>> > 0x00005436 4889e2 mov rdx, rsp\n>> > 0x00005439 4883e4f0 and rsp, 0xfffffffffffffff0\n>> > 0x0000543d 50 push rax\n>> > 0x0000543e 54 push rsp\n>> > 0x0000543f 4c8d05ca0701. lea r8, [0x00015c10]\n>> > [0x00005430]> *** ENTER PRESSED ***\n>> > 0x000054ae 55 push rbp <-- but, it starts way further up in .text than\n>> it should\n>> > 0x000054af 4829fe sub rsi, rdi\n>> > 0x000054b2 4889e5 mov rbp, rsp\n>> > 0x000054b5 48c1fe03 sar rsi, 3\n>> > 0x000054b9 4889f0 mov rax, rsi\n>> > 0x000054bc 48c1e83f shr rax, 0x3f\n>> > 0x000054c0 4801c6 add rsi, rax ; '#'\n>> > 0x000054c3 48d1fe sar rsi, 1\n>> > : 0x00005526 662e0f1f8400. nop word cs:[rax + rax]\n>> > : ;-- entry1.init:\n>> > : 0x00005530 488d3d618e21. lea rdi, [0x0021e398] ; section..jcr\n>> > : 0x00005537 48833f00 cmp qword [rdi], 0\n>> > ,==< 0x0000553b 750b jne 0x5548\n>> > |=< 0x0000553d e95effffff jmp 0x54a0 | 0x00005542 660f1f440000 nop word\n>> [rax + rax]--> 0x00005548 488b05899a21. mov rax, qword\n>> [reloc._Jv_RegisterClasses_216] ; [0x21efd8:8]=0\n>> > 0x0000554f 4885c0 test rax, rax\n>> > [0x00005526]> b 64 *** switch to 64 block size just to prove the point\n>> ***\n>> > [0x00005526]> s 0x5430\n>> > [0x00005430]> pd\n>> > ;-- entry0:\n>> > ;-- rip:\n>> > 0x00005430 31ed xor ebp, ebp\n>> > 0x00005432 4989d1 mov r9, rdx\n>> > 0x00005435 5e pop rsi\n>> > 0x00005436 4889e2 mov rdx, rsp\n>> > 0x00005439 4883e4f0 and rsp, 0xfffffffffffffff0\n>> > 0x0000543d 50 push rax\n>> > 0x0000543e 54 push rsp\n>> > 0x0000543f 4c8d05ca0701. lea r8, [0x00015c10]\n>> > 0x00005446 488d0d530701. lea rcx, [0x00015ba0] **** this part is\n>> skipped above ****\n>> > 0x0000544d 488d3d5ce7ff. lea rdi, [0x00003bb0] ; section..text ;\n>> \"AWAVAUATA\\x89\\xfcUSH\\x89\\xf5H\\x83\\xecHH\\x8b>dH\\x8b\\x04%(\"\n>> > 0x00005454 ff15669b2100 call qword [reloc.__libc_start_main_192] ;\n>> [0x21efc0:8]=0\n>> > 0x0000545a f4 hlt\n>> > 0x0000545b 0f1f440000 nop dword [rax + rax]\n>> > 0x00005460 488d3d81a121. lea rdi, [loc.__bss_start] ; 0x21f5e8\n>> > 0x00005467 488d0581a121. lea rax, [0x0021f5ef]\n>> > 0x0000546e 55 push rbp\n>> > [0x00005430]>\n>> >\n>> > So to recap, after enabling cmd.repeat, when I press repeat on an\n>> assembly it doesn't continue disassembling at the correct location.\n>> >\n>> > â€”\n>> > You are receiving this because you are subscribed to this thread.\n>> > Reply to this email directly, view it on GitHub <\n>> https://github.com/radare/radare2/issues/9479>, or mute the thread <\n>> https://github.com/notifications/unsubscribe-auth/AA3-lqMd0AAVdChGW_2EBxeOtZ-rhMEuks5tXss9gaJpZM4SQ9Vo\n>> >.\n>> >\n>>\n>> â€”\n>> You are receiving this because you authored the thread.\n>> Reply to this email directly, view it on GitHub\n>> <https://github.com/radare/radare2/issues/9479#issuecomment-368053735>,\n>> or mute the thread\n>> <https://github.com/notifications/unsubscribe-auth/AGSvM3Q8GtiZGcL7NPRQY5FFVTDCVzEgks5tXuI9gaJpZM4SQ9Vo>\n>> .\n>>\n>\n","createdAt":"2018-02-23T17:50:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9479#issuecomment-368086410","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2ODA4NjUwOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"by editing the code and sending a PR\n\nor using pD instead of pd, but you will get some invalid instructions\n\n> On 23 Feb 2018, at 18:46, msftsecurityteam <notifications@github.com> wrote:\n> \n> So how do I get an enter press to continue disassembling where I left off\n> previously?\n","createdAt":"2018-02-23T17:50:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9479#issuecomment-368086509","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2ODA4Njk3MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"pd disassembles N instructions, and pD bytes.\n\nin fact pd N <enter><enter> works fine, the problem is when you use pd without arguments.\n\ncan you confirm this?\n\n> On 23 Feb 2018, at 18:50, msftsecurityteam <notifications@github.com> wrote:\n> \n> Maybe I am misunderstanding but block size doesnâ€™t appear to be relevant\n> here at all. I disassemble at 0x5430 with block size 32 (0x20), but\n> pressing enter starts disassembly at 0x54ae, 0x7e bytes away?\n> On Fri, Feb 23, 2018 at 12:46 PM MC <darkhat@gmail.com> wrote:\n> \n> > So how do I get an enter press to continue disassembling where I left off\n> > previously?\n> > On Fri, Feb 23, 2018 at 11:07 AM radare <notifications@github.com> wrote:\n> >\n> >> it goes by block size not instruction size\n> >>\n> >> > On 23 Feb 2018, at 15:29, msftsecurityteam <notifications@github.com>\n> >> wrote:\n> >> >\n> >> > Hello, I have made a few issues about this problem. Like GDB, it's very\n> >> useful to do something like \"pd\", read the assembly, and press enter again\n> >> to continue the assembly. Last time I brought up this issue, I was told to\n> >> use \"e cmd.repeat = true\". This actually is inaccurate as shown below:\n> >> >\n> >> > $ r2 /bin/ls\n> >> > -- It's working! Look at the door!\n> >> > [0x00005430]> b 32\n> >> > [0x00005430]> pd\n> >> > ;-- entry0:\n> >> > ;-- rip:\n> >> > 0x00005430 31ed xor ebp, ebp\n> >> > 0x00005432 4989d1 mov r9, rdx\n> >> > 0x00005435 5e pop rsi\n> >> > 0x00005436 4889e2 mov rdx, rsp\n> >> > 0x00005439 4883e4f0 and rsp, 0xfffffffffffffff0\n> >> > 0x0000543d 50 push rax\n> >> > 0x0000543e 54 push rsp\n> >> > 0x0000543f 4c8d05ca0701. lea r8, [0x00015c10]\n> >> > [0x00005430]> *** PRESSING ENTER DOES NOTHING ***\n> >> > [0x00005430]> e cmd.repeat = true\n> >> > [0x00005430]> pd\n> >> > ;-- entry0:\n> >> > ;-- rip:\n> >> > 0x00005430 31ed xor ebp, ebp\n> >> > 0x00005432 4989d1 mov r9, rdx\n> >> > 0x00005435 5e pop rsi\n> >> > 0x00005436 4889e2 mov rdx, rsp\n> >> > 0x00005439 4883e4f0 and rsp, 0xfffffffffffffff0\n> >> > 0x0000543d 50 push rax\n> >> > 0x0000543e 54 push rsp\n> >> > 0x0000543f 4c8d05ca0701. lea r8, [0x00015c10]\n> >> > [0x00005430]> *** ENTER PRESSED ***\n> >> > 0x000054ae 55 push rbp <-- but, it starts way further up in .text than\n> >> it should\n> >> > 0x000054af 4829fe sub rsi, rdi\n> >> > 0x000054b2 4889e5 mov rbp, rsp\n> >> > 0x000054b5 48c1fe03 sar rsi, 3\n> >> > 0x000054b9 4889f0 mov rax, rsi\n> >> > 0x000054bc 48c1e83f shr rax, 0x3f\n> >> > 0x000054c0 4801c6 add rsi, rax ; '#'\n> >> > 0x000054c3 48d1fe sar rsi, 1\n> >> > : 0x00005526 662e0f1f8400. nop word cs:[rax + rax]\n> >> > : ;-- entry1.init:\n> >> > : 0x00005530 488d3d618e21. lea rdi, [0x0021e398] ; section..jcr\n> >> > : 0x00005537 48833f00 cmp qword [rdi], 0\n> >> > ,==< 0x0000553b 750b jne 0x5548\n> >> > |=< 0x0000553d e95effffff jmp 0x54a0 | 0x00005542 660f1f440000 nop word\n> >> [rax + rax]--> 0x00005548 488b05899a21. mov rax, qword\n> >> [reloc._Jv_RegisterClasses_216] ; [0x21efd8:8]=0\n> >> > 0x0000554f 4885c0 test rax, rax\n> >> > [0x00005526]> b 64 *** switch to 64 block size just to prove the point\n> >> ***\n> >> > [0x00005526]> s 0x5430\n> >> > [0x00005430]> pd\n> >> > ;-- entry0:\n> >> > ;-- rip:\n> >> > 0x00005430 31ed xor ebp, ebp\n> >> > 0x00005432 4989d1 mov r9, rdx\n> >> > 0x00005435 5e pop rsi\n> >> > 0x00005436 4889e2 mov rdx, rsp\n> >> > 0x00005439 4883e4f0 and rsp, 0xfffffffffffffff0\n> >> > 0x0000543d 50 push rax\n> >> > 0x0000543e 54 push rsp\n> >> > 0x0000543f 4c8d05ca0701. lea r8, [0x00015c10]\n> >> > 0x00005446 488d0d530701. lea rcx, [0x00015ba0] **** this part is\n> >> skipped above ****\n> >> > 0x0000544d 488d3d5ce7ff. lea rdi, [0x00003bb0] ; section..text ;\n> >> \"AWAVAUATA\\x89\\xfcUSH\\x89\\xf5H\\x83\\xecHH\\x8b>dH\\x8b\\x04%(\"\n> >> > 0x00005454 ff15669b2100 call qword [reloc.__libc_start_main_192] ;\n> >> [0x21efc0:8]=0\n> >> > 0x0000545a f4 hlt\n> >> > 0x0000545b 0f1f440000 nop dword [rax + rax]\n> >> > 0x00005460 488d3d81a121. lea rdi, [loc.__bss_start] ; 0x21f5e8\n> >> > 0x00005467 488d0581a121. lea rax, [0x0021f5ef]\n> >> > 0x0000546e 55 push rbp\n> >> > [0x00005430]>\n> >> >\n> >> > So to recap, after enabling cmd.repeat, when I press repeat on an\n> >> assembly it doesn't continue disassembling at the correct location.\n> >> >\n> >> > â€”\n> >> > You are receiving this because you are subscribed to this thread.\n> >> > Reply to this email directly, view it on GitHub <\n> >> https://github.com/radare/radare2/issues/9479>, or mute the thread <\n> >> https://github.com/notifications/unsubscribe-auth/AA3-lqMd0AAVdChGW_2EBxeOtZ-rhMEuks5tXss9gaJpZM4SQ9Vo\n> >> >.\n> >> >\n> >>\n> >> â€”\n> >> You are receiving this because you authored the thread.\n> >> Reply to this email directly, view it on GitHub\n> >> <https://github.com/radare/radare2/issues/9479#issuecomment-368053735>,\n> >> or mute the thread\n> >> <https://github.com/notifications/unsubscribe-auth/AGSvM3Q8GtiZGcL7NPRQY5FFVTDCVzEgks5tXuI9gaJpZM4SQ9Vo>\n> >> .\n> >>\n> >\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/9479#issuecomment-368086410>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lrxvUymr9OFTH4nugMYxfI0W1ffJks5tXvphgaJpZM4SQ9Vo>.\n> \n\n","createdAt":"2018-02-23T17:52:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9479#issuecomment-368086971","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2ODA4NzE0Nw==","author":{"login":"msftsecurityteam"},"authorAssociation":"NONE","body":"Ok, so I will close this issue then if this is expected behavior\nOn Fri, Feb 23, 2018 at 12:50 PM radare <notifications@github.com> wrote:\n\n> by editing the code and sending a PR\n>\n> or using pD instead of pd, but you will get some invalid instructions\n>\n> > On 23 Feb 2018, at 18:46, msftsecurityteam <notifications@github.com>\n> wrote:\n> >\n> > So how do I get an enter press to continue disassembling where I left off\n> > previously?\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/radare/radare2/issues/9479#issuecomment-368086509>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AGSvM6aCSZoyKiLu0obwlQu2Zoc2meI6ks5tXvp6gaJpZM4SQ9Vo>\n> .\n>\n","createdAt":"2018-02-23T17:52:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9479#issuecomment-368087147","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2ODA4NzQ2OQ==","author":{"login":"msftsecurityteam"},"authorAssociation":"NONE","body":"Ok give me a few minutes I will confirm and get back. Apologies for the out\nof sync responses I am on mobile\nOn Fri, Feb 23, 2018 at 12:52 PM MC <darkhat@gmail.com> wrote:\n\n> Ok, so I will close this issue then if this is expected behavior\n> On Fri, Feb 23, 2018 at 12:50 PM radare <notifications@github.com> wrote:\n>\n>> by editing the code and sending a PR\n>>\n>> or using pD instead of pd, but you will get some invalid instructions\n>>\n>> > On 23 Feb 2018, at 18:46, msftsecurityteam <notifications@github.com>\n>> wrote:\n>> >\n>> > So how do I get an enter press to continue disassembling where I left\n>> off\n>> > previously?\n>>\n>> â€”\n>> You are receiving this because you authored the thread.\n>> Reply to this email directly, view it on GitHub\n>> <https://github.com/radare/radare2/issues/9479#issuecomment-368086509>,\n>> or mute the thread\n>> <https://github.com/notifications/unsubscribe-auth/AGSvM6aCSZoyKiLu0obwlQu2Zoc2meI6ks5tXvp6gaJpZM4SQ9Vo>\n>> .\n>>\n>\n","createdAt":"2018-02-23T17:53:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9479#issuecomment-368087469","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2ODA4NzcwNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"no its not expected, i want to know if the behavious is correct if you run â€œpd 5â€<enter><enter>, because i think the problem is only when calling pd without arguments. pls confirm\n\n> On 23 Feb 2018, at 18:52, msftsecurityteam <notifications@github.com> wrote:\n> \n> Ok, so I will close this issue then if this is expected behavior\n> On Fri, Feb 23, 2018 at 12:50 PM radare <notifications@github.com> wrote:\n> \n> > by editing the code and sending a PR\n> >\n> > or using pD instead of pd, but you will get some invalid instructions\n> >\n> > > On 23 Feb 2018, at 18:46, msftsecurityteam <notifications@github.com>\n> > wrote:\n> > >\n> > > So how do I get an enter press to continue disassembling where I left off\n> > > previously?\n> >\n> > â€”\n> > You are receiving this because you authored the thread.\n> > Reply to this email directly, view it on GitHub\n> > <https://github.com/radare/radare2/issues/9479#issuecomment-368086509>,\n> > or mute the thread\n> > <https://github.com/notifications/unsubscribe-auth/AGSvM6aCSZoyKiLu0obwlQu2Zoc2meI6ks5tXvp6gaJpZM4SQ9Vo>\n> > .\n> >\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/9479#issuecomment-368087147>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-llca0J7lO-UfiZvGbweiTjs2hr01ks5tXvrxgaJpZM4SQ9Vo>.\n> \n\n","createdAt":"2018-02-23T17:54:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9479#issuecomment-368087704","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2ODkwMjU5MQ==","author":{"login":"msftsecurityteam"},"authorAssociation":"NONE","body":"\"pd 5\"<enter><enter> seems to work fine as shown here:\r\n\r\n$ r2 /bin/ls\r\n -- Did you know that r2 is 10 years old?\r\n[0x00005430]> e cmd.repeat = true\r\n[0x00005430]> pd 5\r\n            ;-- entry0:\r\n            ;-- rip:\r\n            0x00005430      31ed           xor ebp, ebp\r\n            0x00005432      4989d1         mov r9, rdx\r\n            0x00005435      5e             pop rsi\r\n            0x00005436      4889e2         mov rdx, rsp\r\n            0x00005439      4883e4f0       and rsp, 0xfffffffffffffff0\r\n[0x00005430]> **ENTER PRESSED**\r\n            0x0000543d      50             push rax\r\n            0x0000543e      54             push rsp\r\n            0x0000543f      4c8d05ca0701.  lea r8, [0x00015c10]\r\n            0x00005446      488d0d530701.  lea rcx, [0x00015ba0]\r\n            0x0000544d      488d3d5ce7ff.  lea rdi, [0x00003bb0]       ; section..text ; \"AWAVAUATA\\x89\\xfcUSH\\x89\\xf5H\\x83\\xecHH\\x8b>dH\\x8b\\x04%(\"\r\n            0x00005454      ff15669b2100   call qword [reloc.__libc_start_main_192] ; [0x21efc0:8]=0\r\n            0x0000545a      f4             hlt\r\n            0x0000545b      0f1f440000     nop dword [rax + rax]\r\n            0x00005460      488d3d81a121.  lea rdi, [loc.__bss_start]  ; 0x21f5e8\r\n            0x00005467      488d0581a121.  lea rax, [0x0021f5ef]\r\n[0x00005454]> **ENTER PRESSED**\r\n            0x0000546e      55             push rbp\r\n            0x0000546f      4829f8         sub rax, rdi\r\n            0x00005472      4889e5         mov rbp, rsp\r\n            0x00005475      4883f80e       cmp rax, 0xe\r\n        ,=< 0x00005479      7615           jbe 0x5490\r\n            0x0000547b      488b052e9b21.  mov rax, qword [reloc._ITM_deregisterTMCloneTable_176] ; [0x21efb0:8]=0\r\n            0x00005482      4885c0         test rax, rax\r\n        ,=< 0x00005485      7409           je 0x5490\r\n        |   0x00005487      5d             pop rbp\r\n        |   0x00005488      ffe0           jmp rax\r\n**Then i seek back to the beginning, increase the block size, and verify the disassembly is accurate**\r\n[0x0000547b]> s 0x5430\r\n[0x00005430]> b 64\r\n[0x00005430]> pd\r\n            ;-- entry0:\r\n            ;-- rip:\r\n            0x00005430      31ed           xor ebp, ebp\r\n            0x00005432      4989d1         mov r9, rdx\r\n            0x00005435      5e             pop rsi\r\n            0x00005436      4889e2         mov rdx, rsp\r\n            0x00005439      4883e4f0       and rsp, 0xfffffffffffffff0\r\n            0x0000543d      50             push rax\r\n            0x0000543e      54             push rsp\r\n            0x0000543f      4c8d05ca0701.  lea r8, [0x00015c10]\r\n            0x00005446      488d0d530701.  lea rcx, [0x00015ba0]\r\n            0x0000544d      488d3d5ce7ff.  lea rdi, [0x00003bb0]       ; section..text ; \"AWAVAUATA\\x89\\xfcUSH\\x89\\xf5H\\x83\\xecHH\\x8b>dH\\x8b\\x04%(\"\r\n            0x00005454      ff15669b2100   call qword [reloc.__libc_start_main_192] ; [0x21efc0:8]=0\r\n            0x0000545a      f4             hlt\r\n            0x0000545b      0f1f440000     nop dword [rax + rax]\r\n            0x00005460      488d3d81a121.  lea rdi, [loc.__bss_start]  ; 0x21f5e8\r\n            0x00005467      488d0581a121.  lea rax, [0x0021f5ef]\r\n            0x0000546e      55             push rbp\r\n[0x00005430]> \r\n\r\nSeems to look accurate to me","createdAt":"2018-02-27T14:49:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9479#issuecomment-368902591","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3NzA4NDQ0Nw==","author":{"login":"msftsecurityteam"},"authorAssociation":"NONE","body":"Came back to this issue. Yes what you said above is correct, if I do \"pd 5\" and then press enter, it continues disassembling at the correct address. If I just do \"pd\" with no arguments, that's where it runs into trouble","createdAt":"2018-03-29T00:44:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9479#issuecomment-377084447","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUzNzk5Mw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T05:24:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9479#issuecomment-644537993","viewerDidAuthor":false}],"number":9479,"title":"Pressing enter doesn't continue assembly correctly "},{"body":"# This template is meant for bug reports, if you have a feature request, please be as descriptive as possible and delete the template\r\n\r\nMake sure you are testing using the latest git version of radare2 before submitting any issue.\r\n\r\n*If you would like to report a bug, please fill the template bellow*\r\n\r\n### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | 14.04.1-Ubuntu x86_64\r\n| File format of the file you reverse (mandatory)      | elf\r\n| Architecture/bits of the file (mandatory)            | ARM Cortex-M0 (Nrf51822) - 16 bits instructions set\r\n| r2 -v full output, **not truncated** (mandatory)     | radare2 2.4.0-git 17275 @ linux-x86-64 git.2.2.0-466-g8e8f54f commit: 8e8f54fab4db218bef0ba53a0e7a4d682bfcb6e7 build: 2018-02-15__01:41:22\r\n\r\n\r\n### Expected behavior\r\nBeing able to interact with the debugger and set some breakpoints\r\n\r\n### Actual behavior\r\nNo interaction seems to happen between r2 and gdb, but openOCD (Open On-Chip Debugger 0.10.0+dev-00299-g6d390e1 (2018-02-16-22:41)) accepts the connection at r2 launch:\r\n`Info : accepting 'gdb' connection on tcp/3333 `\r\ntyping dr gives\r\n `cannot retrieve registers from pid -1 `\r\n\r\nAlso, when I launch directly `arm-none-eabi-gdb`, and then into gdb 'target remote localhost 3333', or `telnet localhost 4444` I'm able to halt and resume.\r\n\r\n### Steps to reproduce the behavior\r\n\r\nread the flash, obtain a bin with `openocd -f interface/stlink-v2-1.cfg -f target/nrf51.cfg -c \"init\" -c \"flash read_bank 0 bdiff.bin\" -c \"exit\"`, and then convert it into an elf with `arm-none-eabi-objcopy -I binary -O elf32-littlearm bdiff.bin bdiff.elf`\r\n\r\nLaunch openOCD `openocd -f ./interface/stlink-v2-1.cfg -f ./target/nrf51.cfg`\r\n\r\nLaunche radare2\r\nhttps://asciinema.org/a/7D8RAmbN8ygoBjFETNkzt9lpR\r\nPressing F2 to set a breakpoint results in\r\n`Cannot get breakpoint bytes. No architecture selected?`\r\n`Cannot set breakpoint at 'main'`\r\n\r\nThe `dr` command gives gives:\r\n`cannot retrieve registers from pid -1`","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM2NzE0NDkxOA==","author":{"login":"GuiguiZ"},"authorAssociation":"NONE","body":"tried also with the following firmware on Nucleo  STM32 L073RZ\r\n[STM32L073RZ_NUCLEO.elf.zip](https://github.com/radare/radare2/files/1742148/STM32L073RZ_NUCLEO.elf.zip)\r\n\r\n","createdAt":"2018-02-20T22:35:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9437#issuecomment-367144918","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2NzE0NzIxMg==","author":{"login":"GuiguiZ"},"authorAssociation":"NONE","body":"It seems that there is a problem with the` -D `option since with `r2 -a arm -e io.cache=true -b 16 -D blahblahblah gdb://127.0.0.1:3333 STM32L073RZ_NUCLEO.elf` I can see `Info : accepting 'gdb' connection on tcp/3333` into my OpenOCD console, as when I use the more conventional `r2 -a arm -e io.cache=true -b 16 -D arm-none-eabi-gdb gdb://127.0.0.1:3333 STM32L073RZ_NUCLEO.elf`","createdAt":"2018-02-20T22:44:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9437#issuecomment-367147212","viewerDidAuthor":false}],"number":9437,"title":"Communication problem between arm-none-eabi-gdb and r2"},{"body":"https://github.com/radare/radare2/blob/master/libr/include/r_types.h#L465\r\n\r\nmsvc supports only 32bit enums, that doesnt scales\r\n\r\n* And riscv is not there","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUzODA1Nw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T05:24:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9433#issuecomment-644538057","viewerDidAuthor":false}],"number":9433,"title":"Make arch enum a iota instead bit mask"},{"body":"It makes many IO related functions harder because one needs to know to re-read the block whenever there is a write or a seek. For file based IO mapping, this application-layer cache is nearly useless because an extra `read` syscall does not much and this cache does not work in many cases\r\n\r\n* A lot of unnecessary block read after a command execution in `core/cmd_*` files\r\n* when a length is specified on the command line, it is likely `core->block` will be re-read\r\n* every write needs special handling of block read because it may be invalidated\r\n* There are some cases that `core->block` is used to save an argument when calling functions. This is a legitimate use of `core->block` but we can rename it to another member variable to not be confused with `core->block`.\r\n\r\nThere are 209 references to `core->block` which is in a manageable scale.\r\n\r\nAnother member variable of `RCore` that looks confusing is `\tbool fixedblock;`","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM2NjQ4OTI4Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"so we need to improve on io cache and invalidation to be able to kill core->block without having slowdowns","createdAt":"2018-02-18T03:13:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9419#issuecomment-366489287","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2NjQ4OTM1NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"this is.. all the read vcache, memoization, a better way to invalidate regions in the cache or in the memoized area (if the file changes but r2 doesnt rereads), which lead to some bugs but make some slow io plugins to be manageable by avoiding reads for everything.","createdAt":"2018-02-18T03:15:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9419#issuecomment-366489355","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2NjY4MjIzNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"totally agree, but right now io doesnt caches/invalidates properly, so better dont abuse until io have proper cache and memoization for read operations\n\n> On 18 Feb 2018, at 03:26, Fangrui Song <notifications@github.com> wrote:\n> \n> It makes many IO related functions harder because one needs to know to re-read the block whenever there is a write or a seek. For file based IO mapping, this application-layer cache is nearly useless because an extra read syscall does not much and this cache does not work in many cases (there are many unnecessary block read in many core/cmd_* files). The current just does not make good use of the cache.\n> \n> There are 209 references to core->block which is in a manageable scale.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/9419>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lt4E_HZNT1B_FxUpXR74DLUi-Vupks5tV4ptgaJpZM4SJizQ>.\n> \n\n","createdAt":"2018-02-19T12:41:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9419#issuecomment-366682235","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjkwNg==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9419#issuecomment-644522906","viewerDidAuthor":false}],"number":9419,"title":"Phrase out `core->block` (cache) and prefer read before use"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | RHEL x86_64 64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | Arm 6 in thumb2 mode\r\n| r2 -v full output, **not truncated** (mandatory)         | radare2 2.3.0-git 16927 @ linux-x86-64 git.2.2.0-9-g469e811\r\n| r2 -V full output in a pastebin document (mandatory) | https://gist.github.com/mscherer/c2f49a88cec5f7e4a025cab756a66ec3\r\n\r\n### Expected behavior\r\n\r\nIT for more than 1 instruction is correctly detected and show proper jump and conditional.\r\n\r\n### Actual behavior\r\n\r\nBasic block is not correctly detected, thus graphs are wrong.\r\n\r\n### Steps to reproduce the behavior \r\n\r\nI was fiddling with a bigger binary, but I wrote a small assembly code for that:\r\n```\r\n.data\r\n\r\nmsg_a:\r\n    .ascii      \"R0 = 8\\n\"\r\nlen_a = . - msg_a\r\n\r\nmsg_b:\r\n    .ascii      \"R0 != 8\\n\"\r\nlen_b = . - msg_b\r\n\r\n.text\r\n\r\n.globl _start\r\n.syntax unified\r\n\r\n.code 16\r\nsome_IT_func:\r\n    push {LR}\r\n    cmp r0, r1\r\n    itte eq\r\n    addeq r0, r0, #1\r\n    addeq r0, r0, #1\r\n    movne r0, #4\r\n    pop {pc}\r\n\r\n\r\n.code 32\r\n_start:\r\n    mov r0, #6\r\n    mov r1, r0\r\n\r\n    blx some_IT_func\r\n\r\n    ldreq r1, =msg_b\r\n    ldreq r2, =len_b\r\n \r\n    cmp r0, #8\r\n    ldreq r1, =msg_a\r\n    ldreq r2, =len_a\r\n    mov r0, #1\r\n    mov r7, #4   \r\n    swi #0 \r\n\r\n    mov     r0, #0  \r\n    mov     r7, #1  \r\n    swi     #0         \r\n```\r\n\r\nTo compile (using the cross compiler of Fedora):\r\n```\r\narm-linux-gnu-as -o test.o test.s\r\narm-linux-gnu-ld -s -o test.bin test.o \r\n```\r\n\r\nThen use test.bin. Running on a RPI 2, this display:\r\n```\r\nR0 = 8\r\n```\r\n\r\nHowever, if we look at the disassembly of some_IT_func, the arrow do not show that instructions in 0x0001007e is skipped.\r\n\r\n```\r\n[0x00010074]> afb\r\n0x00010074 0x0001007a 00:0000 6 j 0x0001007a f 0x0001007e\r\n0x0001007a 0x0001007e 00:0000 4 j 0x0001007e\r\n0x0001007e 0x00010082 00:0000 4\r\n[0x00010074]> pdf\r\n            ;-- section..text:\r\n/ (fcn) fcn.00010074 14\r\n|   fcn.00010074 ();\r\n|              ; CALL XREF from 0x0001008c (entry0)\r\n|           0x00010074      00b5           push {lr}                   ; [01] --r-x section size 80 named .text\r\n|           0x00010076      8842           cmp r0, r1\r\n|       ,=< 0x00010078      06bf           itte eq\r\n|       |      ; JMP XREF from 0x00010078 (fcn.00010074)\r\n|       `-> 0x0001007a      0130           adds r0, 1\r\n|           0x0001007c      0130           adds r0, 1\r\n|           0x0001007e      0420           movs r0, 4                  ; 4\r\n\\           0x00010080      00bd           pop {pc}\r\n[0x00010074]> \r\n```\r\n\r\nThe block is not correctly detected or displayed.\r\n\r\nAfter the ITTE, the branch are either do 0x0001007a and 0x0001007c, then jump to 0x00010080 and skip 0x0001007e, or jump to 0x0001007e. \r\n\r\nI did search for a while if that could be fixed, but the current analyser in radare 2 seems to work on a per operation basis, so adding support for this would requires a slightly different architecture of that whole part of the software. I suspect that would mean either adding a state machine somewhere down in the plugin for arm (which is a bit ugly and likely not workable), or letting the  IT instructions go up to the plugin consumer, and none of the 2 alternatives are very elegant. I suspect doing that just for thumb is too complex. I didn't found any architecture doing that too to justifiy some generic implementation. And that's also deprecated in aarch64 and arm v8, as gcc warn me.\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM2NTQyOTg0NA==","author":{"login":"mscherer"},"authorAssociation":"CONTRIBUTOR","body":"I can't seems to upload the test.bin file, so here is the base64 code\r\n```\r\n$ sha256sum< test.bin \r\nf7d723f92dc6a1d790ce4ee94ce07eac1712c0709202ff1f0c61838f4add41c5  -\r\n```\r\n\r\n```\r\nf0VMRgEBAQAAAAAAAAAAAAIAKAABAAAAhAABADQAAAAQAQAAAAIABTQAIAACACgABQAEAAEAAAAA\r\nAAAAAAABAAAAAQDEAAAAxAAAAAUAAAAAAAEAAQAAAMQAAADEAAIAxAACAA8AAAAPAAAABgAAAAAA\r\nAQAAtYhCBr8BMAEwBCAAvQAABgCg4wAQoOH4///6JBCfBQggoAMIAFDjHBCfBQcgoAMBAKDjBHCg\r\n4wAAAO8AAKDjAXCg4wAAAO/LAAIAxAACAFIwID0gOApSMCAhPSA4CkEVAAAAYWVhYmkAAQsAAAAG\r\nCAgBCQIALnNoc3RydGFiAC50ZXh0AC5kYXRhAC5BUk0uYXR0cmlidXRlcwAAAAAAAAAAAAAAAAAA\r\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAAGAAAAdAABAHQAAABQAAAAAAAAAAAA\r\nAAAEAAAAAAAAABEAAAABAAAAAwAAAMQAAgDEAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAXAAAAAwAA\r\ncAAAAAAAAAAA0wAAABYAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAOkAAAAnAAAA\r\nAAAAAAAAAAABAAAAAAAAAA==\r\n```\r\n\r\n\r\n","createdAt":"2018-02-13T22:39:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9384#issuecomment-365429844","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2NTQ1NDUxNg==","author":{"login":"mscherer"},"authorAssociation":"CONTRIBUTOR","body":"So reading a bit more the code, I found out .post_anal and .post_anal_bb_cb for RAnalPlugin. I guess this could be used to sweep on Thumb code to fix the basic blocks.","createdAt":"2018-02-14T00:34:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9384#issuecomment-365454516","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2NTQ5NTQzMg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Please add a testcase for radare2-regressions, so after being fixed this bug wont be repeated in the future.","createdAt":"2018-02-14T04:49:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9384#issuecomment-365495432","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2NTYzNDk1Mg==","author":{"login":"mscherer"},"authorAssociation":"CONTRIBUTOR","body":"Test cases (or a tentative) added","createdAt":"2018-02-14T15:05:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9384#issuecomment-365634952","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3NjQxNjQ3OA==","author":{"login":"elouet"},"authorAssociation":"CONTRIBUTOR","body":"I just ran into the same issue, although in a more simple case :\r\n![arm_it](https://user-images.githubusercontent.com/436633/37951172-c9c36c4a-319b-11e8-9405-d001180df2e0.png)\r\nIn the sequence above, there is only one single instruction which is subject to conditional execution following the IT NE instruction (movs r3, 1). The flow represents the second (strb r3, [r4]) one as part of the same block [gg], although it will be executed at all times and should be represented in the [gi] block.\r\n\r\nThis may be a more simple fix than the original post of this issue.","createdAt":"2018-03-27T06:51:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9384#issuecomment-376416478","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3NjU0OTA1MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"thats a known issue, can you send apr fixing it?\r\n\r\nsee libr/anal/p/anal_arm_cs.c\r\n\r\n<img width=\"605\" alt=\"screen shot 2018-03-27 at 16 35 42\" src=\"https://user-images.githubusercontent.com/917142/37974373-11b4dde0-31dd-11e8-86fa-6431c39c1684.png\">\r\n","createdAt":"2018-03-27T14:37:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9384#issuecomment-376549050","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3ODUzMjAyNQ==","author":{"login":"mrmacete"},"authorAssociation":"COLLABORATOR","body":"The problem pointed by @elouet is solvable, for example in this way: https://github.com/radare/radare2/pull/9795\r\n\r\ninstead, handling the \"else\"-condition cases by creating basic blocks without explicit jumps seems less feasible, also because there are complex cases like `ITET`, `ITTET`, `ITETE`, etc.\r\n\r\nIn my opinion it's better to keep the instructions following the `IT` instruction in the same basic block (see the screenshot in the pull request linked above), and handle the conditions by properly handling flags in ESIL instead (taking care of controlling the condition at the beginning of the block because the following instructions may change the flags too).","createdAt":"2018-04-04T09:04:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9384#issuecomment-378532025","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0ODE2OTQxMQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Hi! A lot has changed since this issue was reported. Could you please double check whether the bug still exists? If not, please close this issue, otherwise leave a comment. Thanks again!","createdAt":"2020-06-23T14:01:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9384#issuecomment-648169411","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MjU4NzI1MQ==","author":{"login":"mscherer"},"authorAssociation":"CONTRIBUTOR","body":"Things did look better, but still incorrect:\r\n```\r\n[0x00010074]> pdf\r\n            ; CALL XREF from entry0 @ 0x1008c\r\n            ;-- section..text:\r\nâ”Œ 14: fcn.00010074 ();\r\nâ”‚           0x00010074      00b5           push {lr}                   ; [01] -r-x section size 80 named .text\r\nâ”‚           0x00010076      8842           cmp r0, r1\r\nâ”‚      â”Œâ”Œâ”€< 0x00010078      06bf           itte eq\r\nâ”‚      â”‚â”‚   ; CODE XREF from fcn.00010074 @ 0x10078\r\nâ”‚      â””â”€â”€> 0x0001007a      0130           adds r0, 1\r\nâ”‚       â”‚   0x0001007c      0130           adds r0, 1\r\nâ”‚       â”‚   0x0001007e      0420           movs r0, 4\r\nâ””       â””â”€> 0x00010080      00bd           pop {pc}\r\n```\r\n\r\n0x0001007e should be skipped, but is not. And VV output is the same.","createdAt":"2020-07-01T18:47:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/9384#issuecomment-652587251","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3ODQxMDA4OQ==","author":{"login":"4z0x"},"authorAssociation":"CONTRIBUTOR","body":"@mscherer I think your analysis is wrong. The disassembly should look like this:\r\n\r\n```\r\n0x00000000\t00b5\tpush {lr}\r\n0x00000002\t8842\tcmp r0, r1\r\n0x00000004\t06bf\titte eq\r\n0x00000006\t0130\taddeq r0, #1\r\n0x00000008\t0420\tmoveq r0, #4\r\n0x0000000a\t00bd\tpopne {pc}\r\n0x0000000c\t0000\tmovs r0, r0\r\n``` \r\n\r\nThe issue exists because the disassembly in ARM is performed instruction by instruction.\r\n\r\nI have been able to patch (not commit yet) the analysis part, however I need to figure out how to do it for the disassembly.\r\n\r\nThe best would be to perform the analysis on a buffer (buf) which encompass also the previous 5 instructions\r\n\r\nIf anyone has an idea on how to fix it, please let me know","createdAt":"2020-08-21T17:44:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9384#issuecomment-678410089","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3ODgxNzQ2NA==","author":{"login":"4z0x"},"authorAssociation":"CONTRIBUTOR","body":"@mscherer please check my PR (disass + anal fix)","createdAt":"2020-08-23T19:56:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9384#issuecomment-678817464","viewerDidAuthor":false}],"number":9384,"title":"Radare2 do not properly detect branches with IT on Arm Thumb 2"},{"body":"What is currently the suggested / most well supported way of saving & loading state between debugging sessions?\r\n\r\nBy state I mean:\r\n\r\n- analysis of the binary (functions, renamed variables, etc...)\r\n- comments\r\n- breakpoints\r\n\r\nI've tried a few options and always end up in a bad state because r2 seems to have saved the PIDs I was previously debugging, which no longer exist when I start a new session of the same binary.\r\n\r\nFor example:\r\n\r\n- Project files\r\n    - Start debugging session\r\n    - Set some breakpoints\r\n    - Save project file with 'Ps'\r\n    - Exit (killing process)\r\n    - Start new debugging session\r\n    - Re-open project with 'Po'\r\n    - End up with invalid PIDs being ptraced shown in output of  'o'.  Presumably PIDs of when I saved the project\r\n    - Can't seem to kill / close those entries in 'o' and get back onto the PID of my current process\r\n\r\n\r\n\r\n- Saving to script from non-debug session & running script in debug session\r\n    - Open binary in r2 not in debug mode\r\n    - Do analysis (comments, rename variables, etc...)\r\n    - Save what I've done to a r2 script file using 'PS'\r\n    - Quit r2 & reopen binary in debug mode.\r\n    - Run script I've saved previously\r\n    - Configuration variables from non-debug mode are replayed into debug mode (i.e. e cfg.debug=false) and doesn't seem to work.\r\n\r\n\r\n- Saving to script in debug session & running script next debug session\r\n    - Open binary in r2 in debug mode\r\n    - Do analysis (comments, rename variables, etc...)\r\n    - Set breakpoints\r\n    - Save to script using 'PS'\r\n    - Exit debugging killing process\r\n    - Open binary in r2 in debug mode using -i option to run saved script file\r\n    - End up with inaccurate / dead PIDs listed in 'o' output.  Can execute binary in debugger but disassembly is showing all 'invalid' 'ff' rather than opcodes.\r\n\r\nWhat I'd like to know is at the current state of radare2, what is the best way to debug, save some metadata / state & succesfully re-open it again later without getting into trouble?  I understand projects are being reworked and those may not be the best option at this moment (https://github.com/radare/radare2/issues/8582#issuecomment-361023404). \r\n\r\nIs there a chain of commands I can make a macro of to use to dump my analysis, comments, variable names and breakpoints out...but without saving details of the specific PID so I can re-open later on a different PID?\r\n\r\nDon't mean to be a complainer here, I really like r2 both in terms of functionality & philosophy, but I've spent all afternoon unsuccefully trying to figure out how to do this and that's time I haven't been productive on what I was hoping to look at & learn this afternoon.\r\n\r\nGiven the state of project functionality right now, how would radare2 devs and power users save & load debugging session data?\r\n\r\nSomething like this (but including analysis, variable names, etc):\r\n`\r\nC*;db*; > my_debug_session_state`\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM2NDgxMDE5NA==","author":{"login":""},"authorAssociation":"NONE","body":"Example of PID problem whe re-opening a previously saved project of a debugging session\r\n\r\n\r\n```\r\nmbe_test@mbe-testlab:~/mbe_dev/solutions/lab03$ r2 -r lab03C.rr2 -d /home/mbe_test/bin/lab3C\r\nProcess with PID 17633 started...\r\n= attach 17633 17633\r\nbin.baddr 0x08048000\r\nUsing 0x8048000\r\nasm.bits 32\r\n -- Initial frame selected; you cannot go up.\r\n[0xb7fdf030]> o\r\n 3 * -rwx 0xffffffffffffffff ptrace://17633\r\n 4 - -r-- 0x00001d75 /home/mbe_test/mbe_dev/bin/lab3C\r\n[0xb7fdf030]> !ps 17633\r\n  PID TTY      STAT   TIME COMMAND\r\n17633 pts/0    t+     0:00 /home/mbe_test/mbe_dev/bin/lab3C\r\n[0xb7fdf030]> Po MBE_lab3C\r\nClose current session? (Y/n)\r\n********* ADMIN LOGIN PROMPT *********\r\n[0xb7fdbd4c]> o\r\n 3 - -rwx 0xffffffffffffffff ptrace://17413\r\n 4 - -r-- 0x00001d75 /home/mbe_test/mbe_dev/bin/lab3C\r\n 5 - -rwx 0xffffffffffffffff ptrace://1444\r\n 6 - -r-- 0x00001d75 /home/mbe_test/mbe_dev/bin/lab3C\r\n[0xb7fdbd4c]> !ps 17413\r\n  PID TTY      STAT   TIME COMMAND\r\n[0xb7fdbd4c]> !ps 1444\r\n  PID TTY      STAT   TIME COMMAND\r\n[0xb7fdbd4c]> s sym.main\r\n[0x08048520]> pd 10\r\n            ;-- main:\r\n            ;-- sym.main:\r\n            0x08048520      ff             invalid\r\n            0x08048521      ff             invalid\r\n            0x08048522      ff             invalid\r\n            0x08048523      ff             invalid\r\n            0x08048524      ff             invalid\r\n            0x08048525      ff             invalid\r\n            0x08048526      ff             invalid\r\n            0x08048527      ff             invalid\r\n            0x08048528      ff             invalid\r\n            0x08048529      ff             invalid\r\n[0x08048520]> dc\r\nasdf\r\nverifying username....\r\n\r\nnope, incorrect username...\r\n\r\n[0xb7fdbd4c]> ? eip\r\n3086859596 0xb7fdbd4c 026777336514 2.9G b7fd000:0d4c -1208107700 \"L\\xbd\\xfd\\xb7\" 0b10110111111111011011110101001100 3086859596.0 3086859520.000000f 3086859596.000000 0t21222010110201022012\r\n[0xb7fdbd4c]> pd 5 @ eip\r\n            ;-- eip:\r\n            0xb7fdbd4c      ff             invalid\r\n            0xb7fdbd4d      ff             invalid\r\n            0xb7fdbd4e      ff             invalid\r\n            0xb7fdbd4f      ff             invalid\r\n            0xb7fdbd50      ff             invalid\r\n[0xb7fdbd4c]> o\r\n 3 - -rwx 0xffffffffffffffff ptrace://17413\r\n 4 - -r-- 0x00001d75 /home/mbe_test/mbe_dev/bin/lab3C\r\n 5 - -rwx 0xffffffffffffffff ptrace://1444\r\n 6 - -r-- 0x00001d75 /home/mbe_test/mbe_dev/bin/lab3C\r\n[0xb7fdbd4c]> \r\n```","createdAt":"2018-02-12T01:27:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9378#issuecomment-364810194","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2NDgxMTk3OQ==","author":{"login":""},"authorAssociation":"NONE","body":"Same example but with nothing after the \"-d\" option when launching r2\r\n\r\n```\r\nmbe_test@mbe-testlab:~/mbe_dev/solutions/lab03$ r2 -r lab03C.rr2 /home/mbe_test/mbe_dev/bin/lab3C -d\r\nProcess with PID 18482 started...\r\n= attach 18482 18482\r\nbin.baddr 0x08048000\r\nUsing 0x8048000\r\nasm.bits 32\r\n -- nothing personal, just bitness\r\n[0xb7fdf030]> s sym.main\r\n[0x08048520]> af\r\n[0x08048520]> pd 5\r\n            ;-- main:\r\nâ•­ (fcn) main 229\r\nâ”‚   main ();\r\nâ”‚           ; var int local_8h @ ebp-0x8\r\nâ”‚           ; var int local_4h @ esp+0x4\r\nâ”‚           ; var int local_8h_2 @ esp+0x8\r\nâ”‚           ; var int local_1ch @ esp+0x1c\r\nâ”‚           ; var int local_5ch @ esp+0x5c\r\nâ”‚           0x08048520      55             push ebp\r\nâ”‚           0x08048521      89e5           mov ebp, esp\r\nâ”‚           0x08048523      57             push edi\r\nâ”‚           0x08048524      53             push ebx\r\nâ”‚           0x08048525      83e4f0         and esp, 0xfffffff0\r\n[0x08048520]> o\r\n 3 * -rwx 0xffffffffffffffff ptrace://18482\r\n 4 - -r-- 0x00001d75 /home/mbe_test/mbe_dev/bin/lab3C\r\n[0x08048520]> Ps test_foo\r\ntest_foo\r\n[0x08048520]> q\r\nDo you want to quit? (Y/n)\r\nDo you want to kill the process? (Y/n)\r\nDo you want to save the 'test_foo' project? (Y/n)\r\nmbe_test@mbe-testlab:~/mbe_dev/solutions/lab03$ r2 -r lab03C.rr2 /home/mbe_test/mbe_dev/bin/lab3C -d\r\nProcess with PID 18484 started...\r\n= attach 18484 18484\r\nbin.baddr 0x08048000\r\nUsing 0x8048000\r\nasm.bits 32\r\n -- Welcome to \"IDA - the roguelike\"\r\n[0xb7fdf030]> Po test_foo\r\nClose current session? (Y/n)\r\n[0x08048520]> o\r\n 3 - -rwx 0xffffffffffffffff ptrace://18482\r\n 4 - -r-- 0x00001d75 /home/mbe_test/mbe_dev/bin/lab3C\r\n[0x08048520]> s sym.main\r\n[0x08048520]> pd 5\r\n            ;-- sym.main:\r\nâ•­ (fcn) main 229\r\nâ”‚   main (int local_4h, int local_8h_2, int local_1ch, int local_5ch);\r\nâ”‚           ; var int local_8h @ ebp-0x8\r\nâ”‚           ; arg int local_4h @ esp+0x4\r\nâ”‚           ; arg int local_8h_2 @ esp+0x8\r\nâ”‚           ; arg int local_1ch @ esp+0x1c\r\nâ”‚           ; arg int local_5ch @ esp+0x5c\r\nâ”‚           0x08048520      ff             invalid\r\nâ”‚           0x08048521      ff             invalid\r\nâ”‚           0x08048522      ff             invalid\r\nâ”‚           0x08048523      ff             invalid\r\nâ”‚           0x08048524      ff             invalid\r\n[0x08048520]> dc\r\n[0xb7fdbd4c]> s sym.main\r\n[0x08048520]> pd 5\r\n            ;-- sym.main:\r\nâ•­ (fcn) main 229\r\nâ”‚   main (int local_4h, int local_8h_2, int local_1ch, int local_5ch);\r\nâ”‚           ; var int local_8h @ ebp-0x8\r\nâ”‚           ; arg int local_4h @ esp+0x4\r\nâ”‚           ; arg int local_8h_2 @ esp+0x8\r\nâ”‚           ; arg int local_1ch @ esp+0x1c\r\nâ”‚           ; arg int local_5ch @ esp+0x5c\r\nâ”‚           0x08048520      ff             invalid\r\nâ”‚           0x08048521      ff             invalid\r\nâ”‚           0x08048522      ff             invalid\r\nâ”‚           0x08048523      ff             invalid\r\nâ”‚           0x08048524      ff             invalid\r\n[0x08048520]> q\r\nDo you want to quit? (Y/n)\r\nDo you want to kill the process? (Y/n)\r\nDo you want to save the 'test_foo' project? (Y/n)\r\n```\r\n","createdAt":"2018-02-12T01:46:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9378#issuecomment-364811979","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0MzcxMzQ0OA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@radare  @ret2libc by the way, this looks like a possible solution for this problem: https://github.com/secrary/IDA-scripts/tree/master/dumpDyn","createdAt":"2018-12-03T13:41:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9378#issuecomment-443713448","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1Nzg5NTUxNw==","author":{"login":"isaac-peka"},"authorAssociation":"NONE","body":"Does anyone have any suggestions of workarounds for this? First of all, just want to say Radare2 is great and I'm grateful to the community here for creating and maintaining this :) but being able to save and restore at least some comments is a really useful feature. Presumably some people must have found a workaround for this, especially if they're working on longer term projects or or on larger binaries etc? Or do you have a workflow that doesn't need comments?","createdAt":"2019-01-27T07:27:01Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9378#issuecomment-457895517","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1ODAzOTg5Mw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"> @radare @ret2libc by the way, this looks like a possible solution for this problem: https://github.com/secrary/IDA-scripts/tree/master/dumpDyn\r\n\r\nfrom a quick glance this seems related to Projects, as always. In theory the kind of problem listed in this issue could already be solved, since flags, etc. can be rebased AFAIK. However... projects as of right now are in a messy state :(","createdAt":"2019-01-28T08:39:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9378#issuecomment-458039893","viewerDidAuthor":false}],"number":9378,"title":"Question - Workflow for saving / loading state (analysis, comments, breakpoints, etc...) of debugger session?"},{"body":"### Work environment\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Fedora 26, x86_64\r\n| File format of the file you reverse (mandatory)      | ELF\r\n| Architecture/bits of the file (mandatory)            | x86_64\r\n| r2 -v full output, **not truncated** (mandatory)         | radare2 2.4.0-git 17206 @ linux-x86-64 git.2.2.0-398-g6ba461f1c\r\ncommit: 6ba461f1c1c0e32fad16e2191676711da02865ad build: 2018-02-06__20:23:54\r\n\r\n| r2 -V full output in a pastebin document (mandatory) | https://gist.github.com/armijnhemel/3e141ffc36b7a1cce1f0468cde56667a\r\n\r\n### Expected behavior\r\n\r\nrabin2 -H and rabin2 -Hj should give similar information\r\n\r\n### Actual behavior\r\n\r\nrabin2 -H and rabin2 -Hj seem to give completely different data.\r\n\r\nWhen running rabin2 -H on a stock vim binary on Fedora 26 I get 7 lines, with information from the ELF header (machine, type, etc.). When running rabin2 -Hj it seems that the information is pulled from the section header instead.\r\n\r\n### Steps to reproduce the behavior \r\n\r\nI have attached a Vim binary from stock Fedora 26\r\n\r\n1. run rabin2 -H /path/to/vim/binary\r\n\r\nYou should see 7 lines from the ELF header\r\n\r\n2. run rabin2 -Hj /path/to/vim/binary | json_pp\r\n\r\n(or any other JSON pretty printer). You should see 12 fields that are clearly fro the section header (verified with readelf).\r\n\r\n[vim.zip](https://github.com/radare/radare2/files/1700651/vim.zip)\r\n\r\n\r\n### Additional Logs, screenshots, source-code,  configuration dump, ...\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM2MzU3MTQ5NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"-H is far from perfect, it was the last addition to rbin and we are now working on a redesign of it. This code will be reused, so its good to fix it. Wanna contribute?\n\nThe output from j is related to the one in -r, but thats not the same as the human friendly format because it expects the user to use pf commands to format the structs from r2 instead of having the whole data structures as json, which would be probably more useful for the -j format\n\n> On 6 Feb 2018, at 21:17, Armijn Hemel <notifications@github.com> wrote:\n> \n> Work environment\n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tFedora 26, x86_64\n> File format of the file you reverse (mandatory)\tELF\n> Architecture/bits of the file (mandatory)\tx86_64\n> r2 -v full output, not truncated (mandatory)\tradare2 2.4.0-git 17206 @ linux-x86-64 git.2.2.0-398-g6ba461f1c\n> commit: 6ba461f build: 2018-02-06__20:23:54\t\n> | r2 -V full output in a pastebin document (mandatory) | https://gist.github.com/armijnhemel/3e141ffc36b7a1cce1f0468cde56667a\n> \n> Expected behavior\n> \n> rabin2 -H and rabin2 -Hj should give similar information\n> \n> Actual behavior\n> \n> rabin2 -H and rabin2 -Hj seem to give completely different data.\n> \n> When running rabin2 -H on a stock vim binary on Fedora 26 I get 7 lines, with information from the ELF header (machine, type, etc.). When running rabin2 -Hj it seems that the information is pulled from the section header instead.\n> \n> Steps to reproduce the behavior\n> \n> I have attached a Vim binary from stock Fedora 26\n> \n> run rabin2 -H /path/to/vim/binary\n> You should see 7 lines from the ELF header\n> \n> run rabin2 -Hj /path/to/vim/binary | json_pp\n> (or any other JSON pretty printer). You should see 12 fields that are clearly fro the section header (verified with readelf).\n> \n> vim.zip\n> \n> Additional Logs, screenshots, source-code, configuration dump, ...\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-02-06T21:32:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9332#issuecomment-363571495","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2MzgyMjQwMQ==","author":{"login":"armijnhemel"},"authorAssociation":"CONTRIBUTOR","body":"I will try to see if I can free up some resources to let someone help on it. This might take some time :(","createdAt":"2018-02-07T16:18:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9332#issuecomment-363822401","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NDkzNDU1OA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-09-18T15:28:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9332#issuecomment-694934558","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NTAwMDE3NA==","author":{"login":"karliss"},"authorAssociation":"CONTRIBUTOR","body":"```\r\n[karlis@desktop1 build]$ rabin2 -H /usr/bin/ls\r\n0x00000000  ELF64       0x464c457f\r\n0x00000010  Type        0x0003\r\n0x00000012  Machine     0x003e\r\n0x00000014  Version     0x00000001\r\n0x00000018  Entrypoint  0x00005b20\r\n0x00000020  PhOff       0x00000040\r\n0x00000028  ShOff       0x000223b0\r\n[karlis@desktop1 build]$ rabin2 -Hj /usr/bin/ls\r\n{\"fields\":[{\"name\":\"ELF\",\"vaddr\":0,\"paddr\":0,\"comment\":\"0x464c457f\",\"format\":\"x\",\"pf\":[{\"type\":\"x\",\"offset\":0,\"value\":-1}]\r\n},{\"name\":\"Type\",\"vaddr\":16,\"paddr\":16,\"comment\":\"0x00000003\",\"format\":\"x\",\"pf\":[{\"type\":\"x\",\"offset\":16,\"value\":-1}]\r\n},{\"name\":\"Machine\",\"vaddr\":18,\"paddr\":18,\"comment\":\"0x0000003e\",\"format\":\"x\",\"pf\":[{\"type\":\"x\",\"offset\":18,\"value\":-1}]\r\n},{\"name\":\"Version\",\"vaddr\":20,\"paddr\":20,\"comment\":\"0x00000001\",\"format\":\"x\",\"pf\":[{\"type\":\"x\",\"offset\":20,\"value\":-1}]\r\n},{\"name\":\"Entry point\",\"vaddr\":24,\"paddr\":24,\"comment\":\"0x00005b20\",\"format\":\"x\",\"pf\":[{\"type\":\"x\",\"offset\":24,\"value\":-1}]\r\n},{\"name\":\"PhOff\",\"vaddr\":32,\"paddr\":32,\"comment\":\"0x00000040\",\"format\":\"x\",\"pf\":[{\"type\":\"x\",\"offset\":32,\"value\":-1}]\r\n},{\"name\":\"ShOff\",\"vaddr\":40,\"paddr\":40,\"comment\":\"0x000223b0\",\"format\":\"x\",\"pf\":[{\"type\":\"x\",\"offset\":40,\"value\":-1}]\r\n}]}\r\n```","createdAt":"2020-09-18T17:45:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9332#issuecomment-695000174","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NTk1ODQxMw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"What is this issue really about? I think it's ok to have a bit more info in the json version and show less stuff for the humans. Unless this issue specify exactly what would be the expected output, I don't see much value in keeping this open.","createdAt":"2020-09-21T07:49:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9332#issuecomment-695958413","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NjAzOTUxOQ==","author":{"login":"armijnhemel"},"authorAssociation":"CONTRIBUTOR","body":"It has been a few years, so it might be that it is different now and I would need to recheck. One of the issues at the time that I raised this is that different parts of the ELF header were used to extract the information from. For me this is not a superhigh priority bug, so if you feel it should be closed I would be OK with that.","createdAt":"2020-09-21T10:50:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9332#issuecomment-696039519","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NjA5NjAxNQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Indeed it seems info are taken from two different functions.\r\n\r\n`rabin2 -H /bin/ls` calls `RBinPlugin.header`, which is a function defined by the binary format plugin (https://github.com/radareorg/radare2/blob/eab60612287c2d7680c9b4a80e1b7489bcc2dd5a/libr/bin/p/bin_elf64.c#L27).\r\n`rabin2 -Hj /bin/ls` calls `cbin.c:bin_fields()`, which gets the info from `RBinPlugin.fields` (https://github.com/radareorg/radare2/blob/eab60612287c2d7680c9b4a80e1b7489bcc2dd5a/libr/bin/p/bin_elf.inc#L1152).\r\n\r\nHowever even if taken from different places, It seems the info are the same. In case of `Hj` they are extended a bit with some more info, but as previously said, I don't think it's really a \"bug\", as it is ok to have some more info in json.","createdAt":"2020-09-21T12:56:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9332#issuecomment-696096015","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5NjA5Njc1NA==","author":{"login":"armijnhemel"},"authorAssociation":"CONTRIBUTOR","body":"> However even if taken from different places, It seems the info are the same. In case of `Hj` they are extended a bit with some more info, but as previously said, I don't think it's really a \"bug\", as it is ok to have some more info in json.\r\n\r\nI do seem to remember that there were broken versions of sstrip on some platforms (quite a long time ago) where the ELF header and other headers were actually different. I would need to look into this more though.","createdAt":"2020-09-21T12:58:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9332#issuecomment-696096754","viewerDidAuthor":false}],"number":9332,"title":"rabin2: different information printed when using -H and -Hj"},{"body":"![hexdump_mode](https://user-images.githubusercontent.com/203261/35789458-3bb0e392-0a77-11e8-9b0b-eb734508efe2.png)\r\n\r\nWould be VERY useful, see how it is done in multidiff tool: https://github.com/juhakivekas/multidiff","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM2MzE4Mjg5NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"We have this but only for 2. No idea how this can be useful for more\n\n> On 5 Feb 2018, at 06:20, Anton Kochkov <notifications@github.com> wrote:\n> \n> \n> Would be VERY useful, see how it is done in multidiff tool: https://github.com/juhakivekas/multidiff\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-02-05T18:50:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9320#issuecomment-363182895","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUzODA3OQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T05:24:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9320#issuecomment-644538079","viewerDidAuthor":false}],"number":9320,"title":"Multidiff mode"},{"body":"I am trying to implement a RAP server within my project (c64 6502 emulator) to enable remote debugging. So far I have implemented Open/Read/Write/Seek/Close/Cmd operations and they seem to work fine.\r\n\r\nHowever, I am struggling to figure out how to properly implement handling of Cmd operations that are issued by r2 debug module. For starters I have looked at handling of \"drp\" and \"dr\".\r\n\r\n### DRP - debug register profile\r\n\r\ncurrently i have it returning the following string (register profile for 6502 cpu):\r\n\r\n```\r\n=PC\tpc\r\n=SP\tsp\r\ngpr\ta\t.8\t0\t0\r\ngpr\tx\t.8\t1\t0\r\ngpr\ty\t.8\t2\t0\r\ngpr\tflags\t.8\t3\t0\r\ngpr\tC\t.1\t.24\t0\r\ngpr\tZ\t.1\t.25\t0\r\ngpr\tI\t.1\t.26\t0\r\ngpr\tD\t.1\t.27\t0\r\ngpr\tV\t.1\t.30\t0\r\ngpr\tN\t.1\t.31\t0\r\ngpr\tsp\t.8\t4\t0\r\ngpr\tpc\t.16\t5\t0\r\n```\r\n\r\n### DR - debug registers\r\n\r\nOption 1: string\r\n\r\n```\r\na = 0x00\r\nx = 0x00\r\ny = 0x00\r\nflags = 0x00\r\nsp = 0x00\r\npc = 0x0000\r\n```\r\n\r\nOption 2: byte array w/ 7 elements that correspond to register values with offsets listed in DRP.\r\n\r\n[ x x x x x x x ]\r\n\r\n### Question 1\r\n\r\nWhat is the format that r2 expects for 'dr' command? I tried the two options listed above but neither one seems to work.\r\n\r\nI also tried tracing through the call stack for dr command:\r\n```\r\n\r\nlibr/core/cmd_debug.c:  cmd_debug_reg()\r\nlibr/debug/dreg.c: r_debug_reg_sync()\r\nlibr/debug/p/debug_rap.c: r_debug_rap_reg_read()\r\nlibr/io/io.c: r_io_system()\r\nlibr/io/p/io_rap.c: rap__system()\r\n```\r\nbut  I don't see how data received from my server in rap__system() call is actually copied into buffer set up by r_debug_reg_sync().\r\n```\r\nR_API int r_debug_reg_sync(RDebug *dbg, int type, int write) {\r\n                ...\r\n\t\t} else {\r\n\t\t\t// int bufsize = R_MAX (1024, dbg->reg->size*2); // i know. its hacky\r\n\t\t\tint bufsize = dbg->reg->size;\r\n\t\t\t//int bufsize = dbg->reg->regset[i].arena->size;\r\n\t\t\tif (bufsize > 0) {\r\n\t\t\t\tut8 *buf = calloc (1 + 1, bufsize);\r\n\t\t\t\tif (!buf) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t//we have already checked dbg->h and dbg->h->reg_read above\r\n\t\t\t\tsize = dbg->h->reg_read (dbg, i, buf, bufsize);\r\n\t\t\t\t// we need to check against zero because reg_read can return false\r\n\t\t\t\tif (size > 0) {\r\n\t\t\t\t\tr_reg_set_bytes (dbg->reg, i, buf, size); //R_MIN (size, bufsize));\r\n\t\t\t//\t\tfree (buf);\r\n\t\t\t//\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tfree (buf);\r\n\t\t\t}\r\n\t\t}\r\n```\r\n\r\nMore specifically, it seems that \r\n\r\nsize = dbg->h->reg_read (dbg, i, buf, bufsize);\r\n\r\nalways returns 0 and hence this line never gets called\r\n\r\nr_reg_set_bytes (dbg->reg, i, buf, size); \r\n\r\nAny thoughts?\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM3ODUzNDc3Ng==","author":{"login":"wargio"},"authorAssociation":"CONTRIBUTOR","body":"when i use `dr` on ppc i simply do `dr reg=0x12345678` an example: `dr r2=0xb7ffffff`","createdAt":"2018-04-04T09:14:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9286#issuecomment-378534776","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1OTIzNzg4Mg==","author":{"login":"ScrimpyCat"},"authorAssociation":"CONTRIBUTOR","body":"I'm having this problem too. @digitalstreamio were you ever able to resolve it?\r\n\r\nWhatever I reply (`RMT_CMD | RMT_REPLY`) back to the prompt for `drp`, simply gets echoed out on the radare client. Tried returning the profile (as you did), file path to profile, drp command, etc. And nothing seems to work. Ends up looking something like this:\r\n\r\n```\r\nclient -> (RMT_CMD, \"drp\") -> server\r\nclient <- (RMT_CMD | RMT_REPLY, \"my_file\") <- server (tried \"my_file\", \"drp my_file\", contents of the profile, etc.)\r\nclient echos \"my_file\"\r\n``` \r\n\r\nSince `__rap_system` is setup to resolve reverse cmds (`RMT_CMD` responses) I thought about replying back using that to execute the `drp` command, but I think reverse cmds are preserving the original clients state (as it seems to get restored back to the original right away). e.g. So the network messages look something like this:\r\n\r\n```\r\nclient -> (RMT_CMD, \"drp\") -> server\r\nclient <- (RMT_CMD, \"drp my_file\") <- server\r\nclient calls r_reg_set_profile_string with the contents of my_file\r\nclient -> (RMT_CMD | RMT_REPLY, \"\") -> server\r\nclient <- (RMT_CMD | RMT_REPLY, \"\") <- server\r\nclient calls r_reg_set_profile_string with \"\" (or what I assume is restoring the previous state)\r\n``` \r\n\r\nSo yeh I'm not sure if this is a bug here (either in the response client is expecting, or that state is being restored on server sending RMT_CMD), or if there's some other format the client is expecting, or if it's just not possible to setup debugging information with the RAP protocol just yet (as I did notice the `r_io_plugin_rap` doesn't set the `isdbg` field). I was hoping you could use the RAP protocol to simulate a kind of debugging experience (the server in my case already has it's own debugger, so was hoping I could just implement the RAP protocol as an interface to my debugger). Or is the only option that you need to write your own debug enabled IO plugin?\r\n\r\nBy the way this is when starting the client with `r2 -d rap://localhost:9999/1`","createdAt":"2019-01-31T07:00:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9286#issuecomment-459237882","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1OTQ4MzEyMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Maybe better to use rap://ip:port//dbg://path|pid and the e cfg.debug=true\n\n> On 31 Jan 2019, at 01:00, Stefan <notifications@github.com> wrote:\n> \n> I'm having this problem too. @digitalstreamio were you ever able to resolve it?\n> \n> Whatever I reply (RMT_CMD | RMT_REPLY) back to the prompt for drp, simply gets echoed out on the radare client. Tried returning the profile (as you did), file path to profile, drp command, etc. And nothing seems to work. Ends up looking something like this:\n> \n> client -> (RMT_CMD, \"drp\") -> server\n> client <- (RMT_CMD | RMT_REPLY, \"my_file\") <- server (tried \"my_file\", \"drp my_file\", contents of the profile, etc.)\n> client echos \"my_file\"\n> Since __rap_system is setup to resolve reverse cmds (RMT_CMD responses) I thought about replying back using that to execute the drp command, but I think reverse cmds are preserving the original clients state (as it seems to get restored back to the original right away). e.g. So the network messages look something like this:\n> \n> client -> (RMT_CMD, \"drp\") -> server\n> client <- (RMT_CMD, \"drp my_file\") <- server\n> client calls r_reg_set_profile_string with the contents of my_file\n> client -> (RMT_CMD | RMT_REPLY, \"\") -> server\n> client <- (RMT_CMD | RMT_REPLY, \"\") <- server\n> client calls r_reg_set_profile_string with \"\" (or what I assume is restoring the previous state)\n> So yeh I'm not sure if this is a bug here (either in the response client is expecting, or that state is being restored on server sending RMT_CMD), or if there's some other format the client is expecting, or if it's just not possible to setup debugging information with the RAP protocol just yet (as I did notice the r_io_plugin_rap doesn't set the isdbg field). I was hoping you could use the RAP protocol to simulate a kind of debugging experience (the server in my case already has it's own debugger, so was hoping I could just implement the RAP protocol as an interface to my debugger). Or is the only option that you need to write your own debug enabled IO plugin?\n> \n> By the way this is when starting the client with r2 -d rap://localhost:9999/1\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-01-31T19:54:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9286#issuecomment-459483120","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1OTU5NjgzNw==","author":{"login":"ScrimpyCat"},"authorAssociation":"CONTRIBUTOR","body":"That unfortunately won't work since this is talking with my own RAP server, not a radare2 server. So the `/dbg://path|pid` doesn't really mean anything (my server just sees that as a file, but my server ignores the file anyway as it's handling what should be debugged and what shouldn't, basically I'm adding radare2 support to an interactive reverse engineering game I'm working on).\r\n\r\nAnd setting `e cfg.debug=true` doesn't seem to send any additional commands to the server, so it just loads the profile it gets from `dbg->h->reg_profile (dbg);` in `r_debug_use`. \r\n\r\nDoing `r2 -d rap://localhost:9999/1` will actually send a `RMT_CMD` message to my server with the command `drp`. I have figured out the correct response however, it expects a `RMT_CMD | RMT_REPLY` with the result being the profile contents itself (i.e. `gpr r0 .8 0 0` etc.). The reason it wasn't working however was because there's a bug in `__rap_reg_profile` in `debug_rap.c` where it's missing a flush, so the contents don't get piped to the temp file in-time before it gets read and deleted. I'm working on a PR (https://github.com/ScrimpyCat/radare2/commit/e7e7bff7c59c4b2ca8414b7e47970101c0956a6a) that's fixed that and hopefully any other problem. However there's now another issue, where after the profile is set with the remote profile, it's getting overridden when it gets to this line https://github.com/radare/radare2/blob/b9460c353c2441832548e9195ae173097d3219d8/libr/core/cconfig.c#L517\r\n\r\nSo when I'm logging (`eprintf(\"%p, (%s)\\n\", reg, reg->reg_profile_str);`) the profile being set in `r_reg_set_profile_string` I'm getting this when I launch.\r\n\r\n```\r\n$ r2 -a chasm -d rap://localhost:9999/1 # launch with my custom arch (I made a plugin for that in a fork)\r\n0x7fb2b960b5f0, (=PC pc\r\ngpr r0 .8 0 0\r\ngpr r1 .8 1 0\r\ngpr r2 .8 2 0\r\ngpr r3 .8 3 0\r\nflg flags .8 4 0 ....oscz\r\nflg of .1 4.0 0 overflow\r\nflg sf .1 4.1 0 sign\r\nflg cf .1 4.2 0 carry\r\nflg zf .1 4.3 0 zero\r\ngpr pc .8 5 0\r\n)\r\n0x7fb2b960b5f0, ()\r\n[0x00000000]> drp\r\n[0x00000000]> \r\n```","createdAt":"2019-02-01T03:53:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9286#issuecomment-459596837","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcyNjUzOTQ3OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Wasn't this fixed? See also https://github.com/radareorg/radare2/issues/17091","createdAt":"2020-11-13T05:57:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9286#issuecomment-726539479","viewerDidAuthor":false}],"number":9286,"title":"RAP Protocol Question"},{"body":"It looks like the defining a block with a pre-existing format is broken when using visual mode.  More specifically, when applying a previously defined format to a block of data the length of the format is not being calculated properly.  Rather than the actual defined length being used the length of the format string is being used (eg. in the below example the structure defined structure size for cpio_image_header is being set to 21 rather than 111) which causes an improper amount of bytes to be consumed when displayed.\r\n\r\n### Work environment\r\n\r\nQ01) OS/arch/bits\r\nA01) ULinux <hidden> 4.4.0-112-generic #135-Ubuntu SMP Fri Jan 19 11:48:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\nQ02) File format of the file you reverse\r\nA02) CPIO Archive \"newc\"\r\n\r\nQ03) Architecture/bits of the file\r\nA03) RAW\r\n\r\nQ04A) r2 -v full output\r\nQ04B) r2 -V full output\r\nA04AB)\r\nhttps://gist.github.com/OhioDuckFarmer/ce2bfb729252e79cd89e9539a66cc94c.js\r\n\r\n### Expected behavior\r\n\r\nWhen applying a defined format to a block of bytes in visual mode both the proper size of the format should be displayed along with the correct amount of bytes being consumed by the format:\r\n```\r\n    [0x00000000 0% 316 cpio_image.bin]> pd $r\r\n                0x00000000 format cpio_image_header {\r\n        c_magic : 0x00000000 = [ '0', '7', '0', '7', '0', '1' ]\r\n          c_ino : 0x00000006 = [ '0', '0', '0', '0', '0', '2', 'D', '1' ]\r\n         c_mode : 0x0000000e = [ '0', '0', '0', '0', '4', '1', 'E', 'D' ]\r\n          c_uid : 0x00000016 = [ '0', '0', '0', '0', '0', '3', 'E', '9' ]\r\n          c_gid : 0x0000001e = [ '0', '0', '0', '0', '0', '3', 'E', '9' ]\r\n        c_nlink : 0x00000026 = [ '0', '0', '0', '0', '0', '0', '0', '2' ]\r\n        c_mtime : 0x0000002e = [ '5', '8', '1', '0', '9', '0', 'E', '6' ]\r\n     c_filesize : 0x00000036 = [ '0', '0', '0', '0', '0', '0', '0', '0' ]\r\n          c_maj : 0x0000003e = [ '0', '0', '0', '0', '0', '0', '0', '3' ]\r\n          c_min : 0x00000046 = [ '0', '0', '0', '0', '0', '0', '0', '1' ]\r\n         c_rmaj : 0x0000004e = [ '0', '0', '0', '0', '0', '0', '0', '0' ]\r\n         c_rmin : 0x00000056 = [ '0', '0', '0', '0', '0', '0', '0', '0' ]\r\n     c_namesize : 0x0000005e = [ '0', '0', '0', '0', '0', '0', '0', '5' ]\r\n       c_chksum : 0x00000066 = [ '0', '0', '0', '0', '0', '0', '0', '0' ]\r\n       filename : 0x0000006e = /lib\r\n    } 116\r\n                0x00000074      ffffffff\r\n```\r\n### Actual behavior \r\n\r\nThe size of the format is being calculated from the length of the format string (including the Cf 0 portion contained within the cann to cmd_meta_hsdmf) rather than the actual length (as specified by the formatting chracters) of the format:\r\n```\r\n    [0x00000000]> pf.\r\n    pf.cpio_image_header [6]c[8]c[8]c[8]c[8]c[8]c[8]c[8]c[8]c[8]c[8]c[8]c[8]c[8]cz c_magic c_ino c_mode c_uid c_gid c_nlink c_mtime c_filesize c_maj c_min c_rmaj c_rmin c_namesize c_chksum filename\r\n    [0x00000000]> pfs.cpio_image_header\r\n    111\r\n    [0x00000000]> V\r\n\r\n    [0x00000000 0% 3472 cpio_image.bin]> xc\r\n    - offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF  comment\r\n    0x00000000  3037 3037 3031 3030 3030 3032 4431 3030  070701000002D100\r\n    0x00000010  3030 3431 4544 3030 3030 3033 4539 3030  0041ED000003E900\r\n    0x00000020  3030 3033 4539 3030 3030 3030 3032 3538  0003E90000000258\r\n    0x00000030  3130 3930 4536 3030 3030 3030 3030 3030  1090E60000000000\r\n    0x00000040  3030 3030 3033 3030 3030 3030 3031 3030  0000030000000100\r\n    0x00000050  3030 3030 3030 3030 3030 3030 3030 3030  0000000000000000\r\n    0x00000060  3030 3030 3035 3030 3030 3030 3030 2f6c  00000500000000/l\r\n    0x00000070  6962 0000\r\n\r\n    [0x00000000 0% 992 cpio_image.bin]> pd $r\r\n                0x00000000      30373037       ori s0, t9, 0x3730\r\n                0x00000004      30313030       andi s0, at, 0x3130\r\n                0x00000008      30303032       andi s0, s1, 0x3030\r\n                0x0000000c      44313030       andi s0, at, 0x3144\r\n                0x00000010      30303431       andi s4, t1, 0x3030\r\n                0x00000014      45443030       andi s0, at, 0x4445\r\n                0x00000018      30303033       andi s0, t9, 0x3030\r\n                0x0000001c      45393030       andi s0, at, 0x3945\r\n                0x00000020      30303033       andi s0, t9, 0x3030\r\n                0x00000024      45393030       andi s0, at, 0x3945\r\n                0x00000028      30303030       andi s0, at, 0x3030\r\n                0x0000002c      30323538       xori s5, at, 0x3230\r\n                0x00000030      31303930       andi t9, at, 0x3031\r\n                0x00000034      45363030       andi s0, at, 0x3645\r\n                0x00000038      30303030       andi s0, at, 0x3030\r\n                0x0000003c      30303030       andi s0, at, 0x3030\r\n                0x00000040      30303030       andi s0, at, 0x3030\r\n                0x00000044      30333030       andi s0, at, 0x3330\r\n                0x00000048      30303030       andi s0, at, 0x3030\r\n                0x0000004c      30313030       andi s0, at, 0x3130\r\n                0x00000050      30303030       andi s0, at, 0x3030\r\n                0x00000054      30303030       andi s0, at, 0x3030\r\n                0x00000058      30303030       andi s0, at, 0x3030\r\n                0x0000005c      30303030       andi s0, at, 0x3030\r\n                0x00000060      30303030       andi s0, at, 0x3030\r\n                0x00000064      30353030       andi s0, at, 0x3530\r\n                0x00000068      30303030       andi s0, at, 0x3030\r\n                0x0000006c      30302f6c       invalid\r\n                0x00000070      69620000\r\n\r\n                [Vd]- Define current block as:\r\n                 $    define flag size\r\n                 1    edit bits\r\n                 b    set as byte\r\n                 B    set as short word (2 bytes)\r\n                 c    set as code\r\n                 C    define flag color (fc)\r\n                 d    set as data\r\n                 e    end of function\r\n                 f    analyze function\r\n                 F    format\r\n                 i    immediate base (b(in), o(ct), d(ec), h(ex), s(tr))\r\n                 j    merge down (join this and next functions)\r\n                 k    merge up (join this and previous function)\r\n                 h    define anal hint\r\n                 m    manpage for current call\r\n                 n    rename flag used at cursor\r\n                 r    rename function\r\n                 R    find references /r\r\n                 s    set string\r\n                 S    set strings in current block\r\n                 u    undefine metadata here\r\n                 x    find xrefs to current address (./r)\r\n                 w    set as 32bit word\r\n                 W    set as 64bit word\r\n                 q    quit menu\r\n                 z    zone flag\r\n                |pf: pf[.k[.f[=v]]|[v]]|[n]|[0|cnt][fmt] [a0 a1 ...]\r\n                | Commands:\r\n                | pf?                        Show this help\r\n                | pf??                       Format characters\r\n                | pf???                      pf usage examples\r\n                | pf fmt                     Show data using the given format-string. See 'pf??' and 'pf???'.\r\n                | pf.fmt_name                Show data using named format\r\n                | pf.fmt_name.field_name     Show specific data field using named format\r\n                | pfj fmt_name|fmt           Show data using (named) format in JSON\r\n                | pf* fmt_name|fmt           Show data using (named) format as r2 flag create commands\r\n                | pfd.fmt_name               Show data using named format as graphviz commands\r\n                | pf.name [0|cnt]fmt         Define a new named format\r\n                | pf.                        List all format definitions\r\n                | pf?fmt_name                Show the definition of a named format\r\n                | pfo                        List all format definition files (fdf)\r\n                | pfo fdf_name               Load a Format Definition File (fdf)\r\n                | pf.fmt_name.field_name=33  Set new value for the specified field in named format\r\n                | pfv.fmt_name[.field]       Print value(s) only for named format. Useful for one-liners\r\n                | pfs[.fmt_name| fmt]        Print the size of (named) format in bytes\r\n                format: cpio_image_header\r\n                [0x00000000 0% 310 cpio_image.bin]> pd $r\r\n                            0x00000000 format cpio_image_header {\r\n                    c_magic : 0x00000000 = [ '0', '7', '0', '7', '0', '1' ]\r\n                      c_ino : 0x00000006 = [ '0', '0', '0', '0', '0', '2', 'D', '1' ]\r\n                     c_mode : 0x0000000e = [ '0', '0', '0', '0', '4', '1', 'E', 'D' ]\r\n                      c_uid : 0x00000016 = [ '0', '0', '0', '0', '0', '3', 'E', '9' ]\r\n                      c_gid : 0x0000001e = [ '0', '0', '0', '0', '0', '3', 'E', '9' ]\r\n                    c_nlink : 0x00000026 = [ '0', '0', '0', '0', '0', '0', '0', '2' ]\r\n                    c_mtime : 0x0000002e = [ '5', '8', '1', '0', '9', '0', 'E', '6' ]\r\n                 c_filesize : 0x00000036 = [ '0', '0', '0', '0', '0', '0', '0', '0' ]\r\n                      c_maj : 0x0000003e = [ '0', '0', '0', '0', '0', '0', '0', '3' ]\r\n                      c_min : 0x00000046 = [ '0', '0', '0', '0', '0', '0', '0', '1' ]\r\n                     c_rmaj : 0x0000004e = [ '0', '0', '0', '0', '0', '0', '0', '0' ]\r\n                     c_rmin : 0x00000056 = [ '0', '0', '0', '0', '0', '0', '0', '0' ]\r\n                 c_namesize : 0x0000005e = [ '0', '0', '0', '0', '0', '0', '0', '5' ]\r\n                   c_chksum : 0x00000066 = [ '0', '0', '0', '0', '0', '0', '0', '0' ]\r\n                   filename : 0x0000006e = /lib\r\n                } 21\r\n                            0x00000015      443030         unaligned\r\n                            0x00000016      3030           unaligned\r\n                            0x00000017      30             unaligned\r\n                            0x00000018      30303033       andi s0, t9, 0x3030\r\n                            0x0000001c      45393030       andi s0, at, 0x3945\r\n                            0x00000020      30303033       andi s0, t9, 0x3030\r\n                            0x00000024      45393030       andi s0, at, 0x3945\r\n                            0x00000028      30303030       andi s0, at, 0x3030\r\n                            0x0000002c      30323538       xori s5, at, 0x3230\r\n                            0x00000030      31303930       andi t9, at, 0x3031\r\n                            0x00000034      45363030       andi s0, at, 0x3645\r\n                            0x00000038      30303030       andi s0, at, 0x3030\r\n                            0x0000003c      30303030       andi s0, at, 0x3030\r\n                            0x00000040      30303030       andi s0, at, 0x3030\r\n                            0x00000044      30333030       andi s0, at, 0x3330\r\n                            0x00000048      30303030       andi s0, at, 0x3030\r\n                            0x0000004c      30313030       andi s0, at, 0x3130\r\n                            0x00000050      30303030       andi s0, at, 0x3030\r\n                            0x00000054      30303030       andi s0, at, 0x3030\r\n                            0x00000058      30303030       andi s0, at, 0x3030\r\n                            0x0000005c      30303030       andi s0, at, 0x3030\r\n                            0x00000060      30303030       andi s0, at, 0x3030\r\n                            0x00000064      30353030       andi s0, at, 0x3530\r\n                            0x00000068      30303030       andi s0, at, 0x3030\r\n                            0x0000006c      30302f6c       invalid\r\n                            0x00000070      69620000\r\n```\r\n\r\n### Steps to reproduce the behavior \r\n\r\n01) Open any file for reversing\r\n02) Using the pf command define a named format\r\n03) Enter visual mode \r\n04) Change the print mode to disassembly\r\n05) Define the current offset as type <defined format> (using dF command)\r\n\r\n[format_problem.zip](https://github.com/radare/radare2/files/1678128/format_problem.zip)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUzODA5Mw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T05:24:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9273#issuecomment-644538093","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0ODE3NzQ3Ng==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"This is still wrong:\r\n```\r\n[0x00000000 [xAdvc]0 0% 220 ./cpio_image.bin]> pd $r                                                                                                                                          \r\n            0x00000000 pf cpio_image_header # size=111                                                                                                                                        \r\n    c_magic : 0x00000000 = [ '0', '7', '0', '7', '0', '1' ]                                                                                                                                   \r\n      c_ino : 0x00000006 = [ '0', '0', '0', '0', '0', '2', 'D', '1' ]                                                                                                                         \r\n     c_mode : 0x0000000e = [ '0', '0', '0', '0', '4', '1', 'E', 'D' ]                                                                                                                         \r\n      c_uid : 0x00000016 = [ '0', '0', '0', '0', '0', '3', 'E', '9' ]                                                                                                                         \r\n      c_gid : 0x0000001e = [ '0', '0', '0', '0', '0', '3', 'E', '9' ]                                                                                                                         \r\n    c_nlink : 0x00000026 = [ '0', '0', '0', '0', '0', '0', '0', '2' ]                                                                                                                         \r\n    c_mtime : 0x0000002e = [ '5', '8', '1', '0', '9', '0', 'E', '6' ]                                                                                                                         \r\n c_filesize : 0x00000036 = [ '0', '0', '0', '0', '0', '0', '0', '0' ]                                                                                                                         \r\n      c_maj : 0x0000003e = [ '0', '0', '0', '0', '0', '0', '0', '3' ]                                                                                                                         \r\n      c_min : 0x00000046 = [ '0', '0', '0', '0', '0', '0', '0', '1' ]                                                                                                                         \r\n     c_rmaj : 0x0000004e = [ '0', '0', '0', '0', '0', '0', '0', '0' ]                                                                                                                         \r\n     c_rmin : 0x00000056 = [ '0', '0', '0', '0', '0', '0', '0', '0' ]                                                                                                                         \r\n c_namesize : 0x0000005e = [ '0', '0', '0', '0', '0', '0', '0', '5' ]                                                                                                                         \r\n   c_chksum : 0x00000066 = [ '0', '0', '0', '0', '0', '0', '0', '0' ]                                                                                                                         \r\n   filename : 0x0000006e = \"/lib\"                                                                                                                                                             \r\n            0x0000006f      6c             insb byte [rdi], dx                                 \r\n```\r\nIt should end at 0x73.","createdAt":"2020-06-23T14:13:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9273#issuecomment-648177476","viewerDidAuthor":false}],"number":9273,"title":"Defining a block with a pre-existing format (via dF) is broken when using visual mode"},{"body":"Background:\r\n\r\nAll CPU registers of the 8051 are also mapped to memory. Many common ops like push reg, pop reg, mov reg, reg are using memory addresses instead of register names.\r\n\r\nSupport of memory-mapped registers was disabled during refactoring of 8051 ESIL because it broke basic emulation (e.g. ar commands). The original implementation used RAnalEsil.cb.hook_reg_write and hook_reg_read, which are invoked on register access by ESIL, but ignored by other code inside and outside of libr/anal.\r\n\r\nSupport for memory-mapped registers requires, that all r2 operations which read or write CPU registers invoke arch specific logic to read or write memory.\r\n\r\nProposal:\r\n\r\nAdd extension points for register read/write access to libr/reg. I propose to add callbacks to the R_Reg structure, which are invoked by r_reg_get_value and r_reg_set_value to replace or augment their native implementation.\r\n\r\nAs most arch specific code already is in the anal plugins, I propose to set the hooks from there, e.g. as part of get/set_reg_profile, instead of adding arch-specific plugins to libr/reg. \r\n\r\nA first implementation will likely ignore register arenas, i.e. not support ara commands for architectures that choose to implement this hook. \r\n\r\nThis also creates a good extension point to implement other arch specific register behavior that can't be expressed in a reasonable amount of ESIL.\r\n\r\nComments? Thoughts?","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM2MDcyODYxOA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Probably better to put it in `.esil_init` callback in RAnalPlugin structure. @radare @condret may have their opinions on this.","createdAt":"2018-01-26T09:27:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9242#issuecomment-360728618","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2MDczNzA5OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"the problem of esil:init and such is what was causing all the problems, because we are asuming that esil is initialized once. but thats not correct, we get several esil instances while disasseblming, to get different contexts and such, and hooking requires a single instance to get events from, that was causing segfaults because the hooking list was getting broken with dead callbacks.\n\n> On 26 Jan 2018, at 10:27, Anton Kochkov <notifications@github.com> wrote:\n> \n> Probably better to put it in .esil_init callback in RAnalPlugin structure. @radare <https://github.com/radare> @condret <https://github.com/condret> may have their opinions on this.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/9242#issuecomment-360728618>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lt-5jYM-2nOlLCFdp9uzSYCeUE-Nks5tOZpsgaJpZM4Rtrig>.\n> \n\n","createdAt":"2018-01-26T10:03:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9242#issuecomment-360737099","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5MjkxODI1NA==","author":{"login":"astuder"},"authorAssociation":"CONTRIBUTOR","body":"@courk You mention memory-mapped registers in your recent PIC commit. Is that similar to the 8051 where general purpose registers can also be written/read via data memory addresses?\r\n\r\nIf so, what are your thoughts for a possible solution to support memory mapped registers in r2?\r\n","createdAt":"2018-05-29T19:44:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9242#issuecomment-392918254","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5Mjk1NDQ4OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"[0x100001200]> e?cmd.esil.\n       cmd.esil.intr: Command to run when an esil interrupt happens\n       cmd.esil.ioer: Command to run when esil fails to IO (invalid read/write)\n       cmd.esil.mdev: Command to run when memory device address is accessed\n       cmd.esil.todo: Command to run when the esil instruction contains TODO\n       cmd.esil.trap: Command to run when an esil trap happens\n\nbut you may be also interested in aep:\n\n[0x100001200]> aep?\n|Usage: aep[-c]  [...]\n| aepc [addr]          change program counter for esil\n| aep-[addr]           remove pin\n| aep [name] @ [addr]  set pin\n| aep                  list pins\n[0x100001200]> aep\n[0x100001200]> aep ?e jiji @ $$+1\n[0x100001200]> aes\n[0x100001200]> aes\njiji\n[0x100001200]> aes\n[0x100001200]>\n\n> On 29 May 2018, at 21:44, Adrian Studer <notifications@github.com> wrote:\n> \n> @courk <https://github.com/courk> You mention memory-mapped registers in your recent PIC commit. Is that similar to the 8051 where general purpose registers can also be written/read via data memory addresses?\n> \n> If so, what are your thoughts for a possible solution to support memory mapped registers in r2?\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/9242#issuecomment-392918254>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lqC31-rPr0PEW0ysBkDDOkmjofWaks5t3aUagaJpZM4Rtrig>.\n> \n\n","createdAt":"2018-05-29T21:38:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9242#issuecomment-392954489","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5MzI3NDY0OQ==","author":{"login":"astuder"},"authorAssociation":"CONTRIBUTOR","body":"Implementing the logic in esil, if that's what you propose, will be convoluted and slow.\r\n\r\nMy latest thought is, that I could hook mem_read/write in anal, i.e. read/write from/to registers when certain memory locations are accessed by esil. Unlike reg_read/write that should be compatible with the ar commands. But if a user uses p/w commands, memory content may be different from register value seen in esil and ar commands.\r\n","createdAt":"2018-05-30T18:47:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9242#issuecomment-393274649","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5MzI4MDMzOA==","author":{"login":"astuder"},"authorAssociation":"CONTRIBUTOR","body":"Looking into the code, using anal cb.hook_mem_read/write: Some commands, e.g. aea and debug breakpoints, overwrite these without restoring or chaining existing hooks. I.e. arch dependent hooking will break. An option may be to hook into cb.mem_read/write instead.","createdAt":"2018-05-30T19:03:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9242#issuecomment-393280338","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5MzI4ODIwMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Yep\n\n> On 30 May 2018, at 21:03, Adrian Studer <notifications@github.com> wrote:\n> \n> Looking into the code, using anal cb.hook_mem_read/write: Some commands, e.g. aea and debug breakpoints, overwrite these without restoring or chaining existing hooks. I.e. arch dependent hooking will break. An option may be to hook into cb.mem_read/write instead.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-05-30T19:29:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9242#issuecomment-393288200","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjkyOQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9242#issuecomment-644522929","viewerDidAuthor":false}],"number":9242,"title":"Hooks for arch specific implementation of reg read/write"},{"body":"**Feature:**\r\nThis `-O p/<section_name>/<permissions>` can be extended to `-O p/<section or segment name>/<permissions>` in rabin2.\r\n\r\n**Description:**\r\n[r_bin_elf_get_sections](https://github.com/radare/radare2/blob/8f6d84c6a2d1ec5a5fa84593639a7d50051c9f27/libr/bin/format/elf/elf.c#L2496) is responsible for generating sections under the linux platform. I'd like to see only sections in there. Listing segments with sections is confusing.\r\nrabin2 is capable of changing permissions via `-O p/<section_name>/<perms|rwx>`. [r_bin_elf_section_perms](https://github.com/radare/radare2/blob/8f6d84c6a2d1ec5a5fa84593639a7d50051c9f27/libr/bin/format/elf/elf_write.c#L215) is the underlying function. It'd be nice to be able to use segment permissions in there too. Because if some segment overwrites a section permission changing the latter one won't affect anything.\r\n \r\n**Hack around**:\r\n_tested on linux for elf x86(x32)_\r\nIt might be hacked with `r2 -qc \"oo+; wx <perm_byte|07=rwx|05=rx>@@=<list of offsets|0x4c=LOAD0,0x6c=LOAD1,e.g.0x4c 0x6c>\" <file>`. The result might be verified with `rabin2 -S <file>` or `readelf -a <file>|grep LOAD`.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM1NjUzMDUyNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Why dont you use -nw?\n\nAlso in execution the loader ignores most of the info in the file.\n\nWhats the exact request for this bug? I still dont get the issue... is rabin2-O not working for you? Or you are requesting that option to be available from r2?\n\n> On 9 Jan 2018, at 23:10, Siarhei Siniak <notifications@github.com> wrote:\n> \n> It might be hacked with r2 -qc \"oo+; wx <perm_byte|07=rwx|05=rx>@@=<list of offsets|0x4c=LOAD0,0x6c=LOAD1,e.g.0x4c 0x6c>\" <file>. The result might be verified with rabin2 -S <file> or readelf -a <file>|grep LOAD.\n> The thing is that the update of segment permissions doesn't affect execution permissions.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-01-10T08:13:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9169#issuecomment-356530525","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NjU1ODU5Ng==","author":{"login":"nartes"},"authorAssociation":"CONTRIBUTOR","body":"I've updated the issue/feature request, please take a look.","createdAt":"2018-01-10T10:18:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9169#issuecomment-356558596","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NjYwODIyMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"So... if i understand correctly you want:\n\n* rabin2 -O to be able to change segment permissions\n* make rabin2 -O available from r2\n\nDid i  understand it now?\n\n> On 10 Jan 2018, at 11:18, Siarhei Siniak <notifications@github.com> wrote:\n> \n> I've updated the issue/feature request, please take a look.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-01-10T13:53:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9169#issuecomment-356608220","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NjYwOTI1NQ==","author":{"login":"nartes"},"authorAssociation":"CONTRIBUTOR","body":"Just the first, rabin2 -O to change segment permissions. I was not able to find a proper tool for that. It was needed to make a non-trivial permissions for a process map. Currently the hack around mentioned above works for me. But it'd be better to extend the radare project.\r\nAdding this to r2 is not necessary. There's a lot of more important things to change in it.","createdAt":"2018-01-10T13:57:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9169#issuecomment-356609255","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NjYxMDk3NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Feel free to send a patch for this. Also. This must be implemented for each fileformat. Because haddr are not yet fully exposed.\n\n> On 10 Jan 2018, at 14:57, Siarhei Siniak <notifications@github.com> wrote:\n> \n> Just the first, rabin2 -O to change segment permissions. I was not able to find a proper tool for that. It was needed to make a non-trivial permissions for a process map. Currently the hack around mentioned above works for me. But it'd be better to extend the radare project.\n> Adding this to r2 is not necessary. There's a lot of more important things to change in it.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-01-10T14:03:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9169#issuecomment-356610974","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUzODA2Mg==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T05:24:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9169#issuecomment-644538062","viewerDidAuthor":false}],"number":9169,"title":"[feature request] r2 doesn't allow to change segment perms"},{"body":"\r\n\r\n| Questions                                            | Answers\r\n|------------------------------------------------------|--------------------\r\n| OS/arch/bits (mandatory)                             | Debian\r\n| File format of the file you reverse (mandatory)      | AVR prog file\r\n| Architecture/bits of the file (mandatory)            | bin file\r\n| r2 -v full output, **not truncated** (mandatory)         |\r\nradare2 2.3.0-git 16829 @ linux-x86-32 git.2.2.0-20-g4968a55da\r\ncommit: 4968a55da80c384d70d14dbbe41f06ef41df0753 build: 2018-01-06__23:47:19\r\n\r\n| r2 -V full output in a pastebin document (mandatory) | \r\n<script src=\"https://gist.github.com/rob2e/2bcaa1da26a543da78d87c5aeb41f653.js\"></script>\r\n\r\n### Expected behavior\r\nAll valid opcodes of the AVR code disassembly should be recognized, but about 1% of Opcodes are shown as \"invalid\".\r\nThis happens in \"r2 -a avr <file>\"   and is reproduceable with \"rasm2 -a avr -d <opcode>\" as well \r\nI figured out, that when you make a byteswap of the opcode word, then you get the right translation.\r\nIt seems that sometimes ther is a byteswap of the opcode word before entering avr_instructionset.c\r\nThe rules in this file are o.k.\r\n\r\n\r\n### Steps to reproduce the behavior \r\nThe opcode for \"ldi r31, 0x9a\" is 0xe9fa   !!!\r\nrasm2 -a avr -d 0xe9fa  -->   \"invalid\"\r\nrasm2 -a avr -d 0xfae9  -->   \"ldi r31, 0x9a\"\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM1NjM5MDUzMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I dont think hexpairs are expressed as 0x...\n\n> On 9 Jan 2018, at 20:34, rob2e <notifications@github.com> wrote:\n> \n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tDebian\n> File format of the file you reverse (mandatory)\tAVR prog file\n> Architecture/bits of the file (mandatory)\tbin file\n> r2 -v full output, not truncated (mandatory)\t\n> radare2 2.3.0-git 16829 @ linux-x86-32 git.2.2.0-20-g4968a55da\t\n> commit: 4968a55 build: 2018-01-06__23:47:19\t\n> | r2 -V full output in a pastebin document (mandatory) |\n> \n> <script src=\"https://gist.github.com/rob2e/2bcaa1da26a543da78d87c5aeb41f653.js\"></script>\n> Expected behavior\n> \n> All valid opcodes of the AVR code disassembly should be recognized, but about 1% of Opcodes are shown as \"invalid\".\n> This happens in \"r2 -a avr \" and is reproduceable with \"rasm2 -a avr -d \" as well\n> I figured out, that when you make a byteswap of the opcode word, then you get the right translation.\n> It seems that sometimes ther is a byteswap of the opcode word before entering avr_instructionset.c\n> The rules in this file are o.k.\n> \n> Steps to reproduce the behavior\n> \n> The opcode for \"ldi r31, 0x9a\" is 0xe9fa !!!\n> rasm2 -a avr -d 0xe9fa --> \"invalid\"\n> rasm2 -a avr -d 0xfae9 --> \"ldi r31, 0x9a\"\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-01-09T19:36:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9166#issuecomment-356390533","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NjM5MDY3Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Also that opcode is 0xfae9\n\nHexpairs ar not affected by endian, numbers do\n\n> On 9 Jan 2018, at 20:34, rob2e <notifications@github.com> wrote:\n> \n> \n> Questions\tAnswers\n> OS/arch/bits (mandatory)\tDebian\n> File format of the file you reverse (mandatory)\tAVR prog file\n> Architecture/bits of the file (mandatory)\tbin file\n> r2 -v full output, not truncated (mandatory)\t\n> radare2 2.3.0-git 16829 @ linux-x86-32 git.2.2.0-20-g4968a55da\t\n> commit: 4968a55 build: 2018-01-06__23:47:19\t\n> | r2 -V full output in a pastebin document (mandatory) |\n> \n> <script src=\"https://gist.github.com/rob2e/2bcaa1da26a543da78d87c5aeb41f653.js\"></script>\n> Expected behavior\n> \n> All valid opcodes of the AVR code disassembly should be recognized, but about 1% of Opcodes are shown as \"invalid\".\n> This happens in \"r2 -a avr \" and is reproduceable with \"rasm2 -a avr -d \" as well\n> I figured out, that when you make a byteswap of the opcode word, then you get the right translation.\n> It seems that sometimes ther is a byteswap of the opcode word before entering avr_instructionset.c\n> The rules in this file are o.k.\n> \n> Steps to reproduce the behavior\n> \n> The opcode for \"ldi r31, 0x9a\" is 0xe9fa !!!\n> rasm2 -a avr -d 0xe9fa --> \"invalid\"\n> rasm2 -a avr -d 0xfae9 --> \"ldi r31, 0x9a\"\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-01-09T19:36:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9166#issuecomment-356390677","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NjM5MTcyNQ==","author":{"login":"rob2e"},"authorAssociation":"NONE","body":"O.K. I tried it, you don't need the 0x in front of the opcode, but try it yourself, what you get as disassembly for fae9 or for e9fa !","createdAt":"2018-01-09T19:40:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9166#issuecomment-356391725","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NjU3MTg0MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"you are confused by the crappy endianness use of other tools","createdAt":"2018-01-10T11:10:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9166#issuecomment-356571840","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NjYwMDA0NA==","author":{"login":"rob2e"},"authorAssociation":"NONE","body":"No! No! No!\r\nIt's not that simple!\r\n99% of the opcodes work when you enter them as described in the Atmel documentation and for 1%\r\nof opcodes you take the same order as described by Atmel you get an invalid.\r\nOnly this one percent Need a byteswap to be interpreted correctly?","createdAt":"2018-01-10T13:20:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9166#issuecomment-356600044","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NjYwNzMyNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Can you send a pr fixing tjis? If this is just an issue with 1 opcode should be 1 line fix.\nMaybe @killabytenow can have a look\n\n> On 10 Jan 2018, at 14:20, rob2e <notifications@github.com> wrote:\n> \n> No! No! No!\n> It's not that simple!\n> 99% of the opcodes work when you enter them as described in the Atmel documentation and for 1%\n> of opcodes you take the same order as described by Atmel you get an invalid.\n> Only this one percent Need a byteswap to be interpreted correctly?\n> \n> â€”\n> You are receiving this because you modified the open/close state.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-01-10T13:49:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9166#issuecomment-356607324","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NjcyODkxMg==","author":{"login":"rob2e"},"authorAssociation":"NONE","body":"It's not only one opcode.\r\nHere is a grep searching for \"invalid\" in one prog file. I found 27 opcodes disassembled as \"invalid\".\r\nI checked each of them, they are valid opcodes:\r\n0afa invalid\r\n0afd invalid\r\n0aff invalid\r\n0ef8 invalid\r\n2994 invalid\r\n2b92 invalid\r\n2bfa invalid\r\n2bfc invalid\r\n3df9 invalid\r\n3dfc invalid\r\n4af9 invalid\r\n4afa invalid\r\n4afc invalid\r\n4afd invalid\r\n4afe invalid\r\n4aff invalid\r\n4d00 invalid\r\n5ffa invalid\r\n6494 invalid\r\n68fe invalid\r\n6af9 invalid\r\n6df9 invalid\r\n6efb invalid\r\n6efd invalid\r\n78f8 invalid\r\n78f9 invalid\r\n78fb invalid\r\nSo there is something wrong for sure !!!\r\nThe definition in avr_instructionset.c is o.k. !!!\r\n","createdAt":"2018-01-10T20:37:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9166#issuecomment-356728912","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1Njc4Nzg5Ng==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Did you check changing the e asm.cpu value ? e asm.cpu=? to see the value","createdAt":"2018-01-11T00:49:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9166#issuecomment-356787896","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1Njc4ODEyOA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"I checked the first one i checked every asm.cpu doesn't change anything though","createdAt":"2018-01-11T00:51:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9166#issuecomment-356788128","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2NDQyNTIwNA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Can you please craft the tests for the testsuite? so it wont be broken next time after fixing?","createdAt":"2018-02-09T12:50:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9166#issuecomment-364425204","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3ODg3Mjk2Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping","createdAt":"2018-04-05T09:19:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9166#issuecomment-378872963","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3ODg3MzA0Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cc @killabytenow what do u know about those instructions?","createdAt":"2018-04-05T09:19:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9166#issuecomment-378873046","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3OTU1OTg1MQ==","author":{"login":"dukebarman"},"authorAssociation":"CONTRIBUTOR","body":"@rob2e where do you recheck valid opcodes? IDA / avr-objdump / atmel site / etc.","createdAt":"2018-04-08T15:43:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9166#issuecomment-379559851","viewerDidAuthor":false}],"number":9166,"title":"r2 / rasm2   valid AVR opcodes are disassembled and shown as \"invalid\""},{"body":"Trying to use r2 to debug a program under raspberry pi, these are some information:\r\n- Raspberry Pi 3 Model B ARM-Cortex-A53\r\n- /etc/os-release\r\nPRETTY_NAME=\"Raspbian GNU/Linux 8 (jessie)\"\r\nNAME=\"Raspbian GNU/Linux\"\r\nVERSION_ID=\"8\"\r\nVERSION=\"8 (jessie)\"\r\nID=raspbian\r\nID_LIKE=debian\r\nHOME_URL=\"http://www.raspbian.org/\"\r\nSUPPORT_URL=\"http://www.raspbian.org/RaspbianForums\"\r\nBUG_REPORT_URL=\"http://www.raspbian.org/RaspbianBugs\"\r\n- r2 -v \r\nradare2 2.2.0 16811 @ linux-arm-32 git.2.2.0-2-g9522ef3\r\ncommit: 9522ef3fd77a531c212a16a0c723ab561c6131cd build: 2017-12-26__14:23:38\r\n\r\nThis is the program (_test.c_) \r\n\r\n```\r\nvoid func1()\r\n{\r\n  printf(\"func1!\\n\");\r\n}\r\n \r\nint main()\r\n{\r\n  printf(\"hello!\\n\");\r\n  func1();\r\n \r\n  return 0;\r\n}\r\n```\r\nI compile it\r\n`gcc -o test test.c`\r\n\r\nThen run it with r2:\r\n```\r\nr2 -d ./test\r\nProcess with PID 30278 started...\r\n= attach 30278 30278\r\nbin.baddr 0x00010000\r\nUsing 0x10000\r\nasm.bits 32\r\n[0x76f859e0]> pd 2 @ 0x10454\r\n            ;-- main:\r\n            ;-- $a:\r\n            ;-- main:\r\n            0x00010454      00482de9       push {fp, lr}\r\n            0x00010458      04b08de2       add fp, sp, 4\r\n[0x76f859e0]> db 0x10454\r\n[0x76f859e0]> dc\r\nhello!\r\nfunc1!\r\nchild stopped with signal 11\r\n[+] SIGNAL 11 errno=0 addr=0x7e9027f4 code=2 ret=0\r\n\r\n```\r\nI have the same problem also with other binaries.\r\n\r\nPlease let me know if you need more info.\r\n\r\n[test.zip](https://github.com/radare/radare2/files/1589843/test.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM1NDI4MDI4Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cant reproduce, works fine in my rpi32\n\n> On 27 Dec 2017, at 21:30, Andrea Sindoni <notifications@github.com> wrote:\n> \n> Trying to use r2 to debug a program under raspberry pi, these are some information:\n> \n> Raspberry Pi 3 Model B ARM-Cortex-A53\n> /etc/os-release\n> PRETTY_NAME=\"Raspbian GNU/Linux 8 (jessie)\"\n> NAME=\"Raspbian GNU/Linux\"\n> VERSION_ID=\"8\"\n> VERSION=\"8 (jessie)\"\n> ID=raspbian\n> ID_LIKE=debian\n> HOME_URL=\"http://www.raspbian.org/ <http://www.raspbian.org/>\"\n> SUPPORT_URL=\"http://www.raspbian.org/RaspbianForums <http://www.raspbian.org/RaspbianForums>\"\n> BUG_REPORT_URL=\"http://www.raspbian.org/RaspbianBugs <http://www.raspbian.org/RaspbianBugs>\"\n> r2 -v\n> radare2 2.2.0 16811 @ linux-arm-32 git.2.2.0-2-g9522ef3\n> commit: 9522ef3 <https://github.com/radare/radare2/commit/9522ef3fd77a531c212a16a0c723ab561c6131cd> build: 2017-12-26__14:23:38\n> This is the program (test.c)\n> \n> void func1()\n> {\n>   printf(\"func1!\\n\");\n> }\n>  \n> int main()\n> {\n>   printf(\"hello!\\n\");\n>   func1();\n>  \n>   return 0;\n> }\n> I compile it\n> gcc -o test test.c\n> \n> Then run it with r2:\n> \n> r2 -d ./test\n> Process with PID 30278 started...\n> = attach 30278 30278\n> bin.baddr 0x00010000\n> Using 0x10000\n> asm.bits 32\n> [0x76f859e0]> pd 2 @ 0x10454\n>             ;-- main:\n>             ;-- $a:\n>             ;-- main:\n>             0x00010454      00482de9       push {fp, lr}\n>             0x00010458      04b08de2       add fp, sp, 4\n> [0x76f859e0]> db 0x10454\n> [0x76f859e0]> dc\n> hello!\n> func1!\n> child stopped with signal 11\n> [+] SIGNAL 11 errno=0 addr=0x7e9027f4 code=2 ret=0\n> \n> I have the same problem also with other binaries.\n> \n> Please let me know if you need more info.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/9082>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lhThRbXkkLwmks7o62YpXhB_7cvLks5tEqjmgaJpZM4RNyiL>.\n> \n\n","createdAt":"2017-12-28T12:22:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9082#issuecomment-354280287","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDI5MDQwMw==","author":{"login":"invictus1306"},"authorAssociation":"CONTRIBUTOR","body":"Have you tried with a rpi 3? Please could you give me these information:\r\n- /etc/os-release\r\n- with gdb \"info proc mapping\"\r\n\r\nThank you","createdAt":"2017-12-28T13:43:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9082#issuecomment-354290403","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDMwMzgyOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"```\r\n[pancake@rpi ~]$ cat /etc/os-release\r\nNAME=\"Void\"\r\nID=\"void\"\r\nPRETTY_NAME=\"Void Linux\"\r\nANSI_COLOR=\"1;34\"\r\n```","createdAt":"2017-12-28T15:16:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9082#issuecomment-354303829","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDMwMzg5Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"```\r\nBreakpoint 1, 0x00008434 in main ()\r\n(gdb) info proc mappings\r\nprocess 2501\r\nMapped address spaces:\r\n\r\n\tStart Addr   End Addr       Size     Offset objfile\r\n\t    0x8000     0x9000     0x1000        0x0 /home/pancake/a.out\r\n\t   0x10000    0x11000     0x1000        0x0 /home/pancake/a.out\r\n\t0xb6e9c000 0xb6fc1000   0x125000        0x0 /usr/lib/libc-2.19.so\r\n\t0xb6fc1000 0xb6fc9000     0x8000   0x125000 /usr/lib/libc-2.19.so\r\n\t0xb6fc9000 0xb6fcb000     0x2000   0x125000 /usr/lib/libc-2.19.so\r\n\t0xb6fcb000 0xb6fcc000     0x1000   0x127000 /usr/lib/libc-2.19.so\r\n\t0xb6fcc000 0xb6fcf000     0x3000        0x0\r\n\t0xb6fd8000 0xb6ff7000    0x1f000        0x0 /usr/lib/ld-2.19.so\r\n\t0xb6ffb000 0xb6ffd000     0x2000        0x0\r\n\t0xb6ffd000 0xb6ffe000     0x1000        0x0 [sigpage]\r\n\t0xb6ffe000 0xb6fff000     0x1000    0x1e000 /usr/lib/ld-2.19.so\r\n\t0xb6fff000 0xb7000000     0x1000    0x1f000 /usr/lib/ld-2.19.so\r\n\t0xbefdf000 0xbf000000    0x21000        0x0 [stack]\r\n\t0xffff0000 0xffff1000     0x1000        0x0 [vectors]\r\n(gdb)\r\n```","createdAt":"2017-12-28T15:17:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9082#issuecomment-354303893","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDMwNDA3Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"this is an rpi1 running voidlinux, the other rpi i have is running archlinux in arm64 mode","createdAt":"2017-12-28T15:18:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9082#issuecomment-354304076","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDMwNDEwNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"<img width=\"606\" alt=\"screen shot 2017-12-28 at 16 18 08\" src=\"https://user-images.githubusercontent.com/917142/34414640-ba84cd06-ebea-11e7-9ead-51956d523ddf.png\">\r\n","createdAt":"2017-12-28T15:18:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9082#issuecomment-354304105","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDUwMDIwNg==","author":{"login":"invictus1306"},"authorAssociation":"CONTRIBUTOR","body":"Some updates, I have tested it with a rpi 2 with the same Raspbian image and it work fine, but with the rpi 3 I have the same problem, in details:\r\nI set a breakpoint here:\r\n\r\nhttps://github.com/radare/radare2/blob/24aa0bbb83498038773dddb0e420f6bb74c863e0/libr/debug/p/debug_native.c#L276\r\n\r\nThen I run the program\r\n\r\n```\r\n$ r2 -d ./test\r\n[0x76f4f9e0]> dcu main\r\nContinue until 0x00010454 using 4 bpsize\r\n```\r\nand after this instruction\r\n\r\n`int ret = ptrace (PTRACE_CONT, pid, NULL, contsig);`\r\n\r\nthis output is printed\r\n\r\n```\r\nhello!\r\nfunc1!\r\n```\r\nIf I go on, after this instruction\r\n\r\nhttps://github.com/radare/radare2/blob/6f0de4913e78706c4b2d9ef3bd37f182783cba6b/libr/debug/debug.c#L611\r\n\r\nreason = _R_DEBUG_REASON_SEGFAULT_\r\n\r\nand it should be _R_DEBUG_REASON_BREAKPOINT_\r\n\r\nAny idea?","createdAt":"2017-12-29T21:03:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9082#issuecomment-354500206","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDUwMjAyMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"One of the reasons that make me think it could be is a bug when detecting the base address of the binary, so symbols are loaded in a bad place. Maybe debian have some changes in procpidmaps. Can you check if pd@main works in the debugger? The baddr is shown when you start the debugger\n\n> On 29 Dec 2017, at 22:03, Andrea Sindoni <notifications@github.com> wrote:\n> \n> Some updates, I have tested it with a rpi 2 with the same Raspbian image and it work fine, but with the rpi 3 I have the same problem, in details:\n> I set a breakpoint here:\n> \n> https://github.com/radare/radare2/blob/24aa0bbb83498038773dddb0e420f6bb74c863e0/libr/debug/p/debug_native.c#L276\n> \n> Then I run the program\n> \n> $ r2 -d ./test\n> [0x76f4f9e0]> dcu main\n> Continue until 0x00010454 using 4 bpsize\n> and after this instruction\n> \n> int ret = ptrace (PTRACE_CONT, pid, NULL, contsig);\n> \n> this output is printed\n> \n> hello!\n> func1!\n> If I go on, after this instruction\n> \n> https://github.com/radare/radare2/blob/6f0de4913e78706c4b2d9ef3bd37f182783cba6b/libr/debug/debug.c#L611\n> \n> reason = R_DEBUG_REASON_SEGFAULT\n> \n> and it should be R_DEBUG_REASON_BREAKPOINT\n> \n> Any idea?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-12-29T21:23:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9082#issuecomment-354502021","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDUwNDI4MA==","author":{"login":"invictus1306"},"authorAssociation":"CONTRIBUTOR","body":"To note the presence of _libarmmem.so_ in procpidmaps\r\n\r\n```\r\n0x00010000 0x00011000 0x00000000 r-x /home/pi/flags/test\r\n0x00020000 0x00021000 0x00000000 r-- /home/pi/flags/test\r\n0x00021000 0x00022000 0x00001000 rw- /home/pi/flags/test\r\n0x76e79000 0x76fa3000 0x00000000 r-x /lib/arm-linux-gnueabihf/libc-2.24.so\r\n0x76fa3000 0x76fb2000 0x0012a000 --- /lib/arm-linux-gnueabihf/libc-2.24.so\r\n0x76fb2000 0x76fb4000 0x00129000 r-- /lib/arm-linux-gnueabihf/libc-2.24.so\r\n0x76fb4000 0x76fb5000 0x0012b000 rw- /lib/arm-linux-gnueabihf/libc-2.24.so\r\n0x76fb5000 0x76fb8000 0x00000000 rw- \r\n0x76fb8000 0x76fbd000 0x00000000 r-x /usr/lib/arm-linux-gnueabihf/libarmmem.so\r\n0x76fbd000 0x76fcc000 0x00005000 --- /usr/lib/arm-linux-gnueabihf/libarmmem.so\r\n0x76fcc000 0x76fcd000 0x00004000 r-- /usr/lib/arm-linux-gnueabihf/libarmmem.so\r\n0x76fcd000 0x76fce000 0x00005000 rw- /usr/lib/arm-linux-gnueabihf/libarmmem.so\r\n0x76fce000 0x76fef000 0x00000000 r-x /lib/arm-linux-gnueabihf/ld-2.24.so\r\n0x76fef000 0x76ff1000 0x00000000 rw- \r\n0x76ff8000 0x76ffb000 0x00000000 rw- \r\n0x76ffb000 0x76ffc000 0x00000000 r-x [sigpage]\r\n0x76ffc000 0x76ffd000 0x00000000 r-- [vvar]\r\n0x76ffd000 0x76ffe000 0x00000000 r-x [vdso]\r\n0x76ffe000 0x76fff000 0x00020000 r-- /lib/arm-linux-gnueabihf/ld-2.24.so\r\n0x76fff000 0x77000000 0x00021000 rw- /lib/arm-linux-gnueabihf/ld-2.24.so\r\n0x7efdf000 0x7f000000 0x00000000 rw- [stack]\r\n0xffff0000 0xffff1000 0x00000000 r-x [vectors]\r\n```\r\n_pd@main_ seems to work properly\r\n\r\n```\r\nr2 -d ./test\r\nProcess with PID 8225 started...\r\n= attach 8225 8225\r\nbin.baddr 0x00010000\r\nUsing 0x10000\r\nasm.bits 32\r\n -- Seek at relative offsets with 's +<offset>' or 's -<offset>'\r\n[0x76f7d9e0]> pd 10 @ main\r\n            ;-- main:\r\n            ;-- $a:\r\n            ;-- main:\r\n            0x00010454      00482de9       push {fp, lr}\r\n            0x00010458      04b08de2       add fp, sp, 4\r\n            0x0001045c      10009fe5       ldr r0, loc._d_16           ; [0x10474:4]=0x104f0 str.hello_\r\n            0x00010460      9fffffeb       bl sym.imp.puts\r\n            0x00010464      f4ffffeb       bl sym.func1\r\n            0x00010468      0030a0e3       mov r3, 0\r\n            0x0001046c      0300a0e1       mov r0, r3\r\n            0x00010470      0088bde8       pop {fp, pc}\r\n            ;-- $d:\r\n            0x00010474      f0040100       strdeq r0, r1, [r1], -r0\r\n            ;-- $a:\r\n            ;-- __libc_csu_init:\r\n            0x00010478      f0472de9       push {r4, r5, r6, r7, r8, sb, sl, lr\r\n```\r\n","createdAt":"2017-12-29T21:47:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9082#issuecomment-354504280","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2MDgyNTEyOQ==","author":{"login":"giuscri"},"authorAssociation":"CONTRIBUTOR","body":"I _can_ reproduce the bug in the OP, but on Raspberry Pi Zero W.\r\n\r\n```\r\npi@raspberrypi:~ $ r2 -v\r\nradare2 2.3.0-git 17105 @ linux-arm-32 git.2.2.0-298-g893b896ca\r\ncommit: 893b896ca0bd54a402f5f916870b1c731d1489d1 build: 2018-01-26__12:53:55\r\n```\r\n\r\n```\r\npi@raspberrypi:~ $ uname -a\r\nLinux raspberrypi 4.9.59+ #1047 Sun Oct 29 11:47:10 GMT 2017 armv6l GNU/Linux\r\n```\r\n\r\n```\r\npi@raspberrypi:~ $ lscpu \r\nArchitecture:          armv6l\r\nByte Order:            Little Endian\r\nCPU(s):                1\r\nOn-line CPU(s) list:   0\r\nThread(s) per core:    1\r\nCore(s) per socket:    1\r\nSocket(s):             1\r\nModel:                 7\r\nModel name:            ARMv6-compatible processor rev 7 (v6l)\r\nCPU max MHz:           1000.0000\r\nCPU min MHz:           700.0000\r\nBogoMIPS:              697.95\r\nFlags:                 half thumb fastmult vfp edsp java tls\r\n```\r\n\r\n```\r\npi@raspberrypi:~ $ cat test.c \r\nvoid func1()\r\n{\r\n  printf(\"func1!\\n\");\r\n}\r\n \r\nint main()\r\n{\r\n  printf(\"hello!\\n\");\r\n  func1();\r\n \r\n  return 0;\r\n}\r\n```\r\n\r\n```\r\npi@raspberrypi:~ $ r2 -Ad ./test\r\nProcess with PID 15335 started...\r\n= attach 15335 15335\r\nbin.baddr 0x00010000\r\nUsing 0x10000\r\nasm.bits 32\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\nTODO: esil-vm not initialized\r\n[ ] \r\n[aav: from 0xb6f73000 to 0xb6f94000\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Analyze function calls (aac)\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\n[x] Constructing a function name for fcn.* and sym.func.* functions (aan)\r\n= attach 15335 15335\r\n15335\r\n -- I'm in your source securing your bits.\r\n[0xb6f739e0]> db sym.main \r\n[0xb6f739e0]> dc\r\nhello!\r\nfunc1!\r\nchild stopped with signal 11\r\n[+] SIGNAL 11 errno=0 addr=0xffffffffbe931754 code=2 ret=0\r\n```","createdAt":"2018-01-26T16:01:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9082#issuecomment-360825129","viewerDidAuthor":false}],"number":9082,"title":"ARM rpi32 debugging - child stopped with signal 11"},{"body":"I did this:\r\n````\r\n[0x0041c040]> aa\r\n[0x00599234]> s 0x00598f1c\r\n[0x00598f1c]> pdc >/home/kb/01_dummy/02b_libgame/ZN7cocos2d16FileUtilsAndroid7getData_c.txt\r\n[0x00598f1c]> pdf >/home/kb/01_dummy/02b_libgame/ZN7cocos2d16FileUtilsAndroid7getData_asm.txt\r\n````\r\n\r\n04_issue_libgame.zip contains:\r\n````\r\nObjdump dissassemble:\tlibgame_so_asm_all_getData_FNC_ONLY.txt\r\npdf debug output:\t\tZN7cocos2d16FileUtilsAndroid7getData_asm_asmop.txt\r\npdc debug output:\t\tZN7cocos2d16FileUtilsAndroid7getData_c_asmop_s.txt\r\n````\r\n\r\n[libgame.so.zip](https://github.com/radare/radare2/files/1589718/libgame.so.zip)\r\n[04_issue_libgame.zip](https://github.com/radare/radare2/files/1589719/04_issue_libgame.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM1NDE2NjM4MA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"pdc is huge work in progress and is expected to miss a LOT of stuff, if you want to contribute please do. But there is not really need of an issue without more description or additional info. You can also use the retdec plugin for radare2 that you can find in the r2pm tool.","createdAt":"2017-12-27T19:35:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354166380","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDE2NzA0MA==","author":{"login":"beaumontk"},"authorAssociation":"NONE","body":"\"But there is not really need of an issue without more description or additional info.\"\r\n\r\nPlease see the debug output in the zip file. It should be self-explanatory.\r\n\r\nThere are plenty of issues about PDC!\r\n\r\nPlease re-open!","createdAt":"2017-12-27T19:40:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354167040","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDE2Nzc0NQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"There are a lot of issues but there is too much there that can be exploitable...  Can you please detail everything in small output and not a big file with tons of disassembly and pseudo-code.","createdAt":"2017-12-27T19:45:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354167745","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDE2ODYxNg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"This is what I have in pdf:\r\n\r\n![image](https://user-images.githubusercontent.com/1408600/34391701-c57c29e6-eb47-11e7-815f-56bb5d549b4b.png)\r\n\r\nThis is what you provided:\r\n\r\n![image](https://user-images.githubusercontent.com/1408600/34391767-1655714c-eb48-11e7-9ba9-e965ec5a6883.png)\r\n\r\n\r\n","createdAt":"2017-12-27T19:52:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354168616","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDE2OTMwNA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Could you provide with what in the pdc output is wrong ? Because from your pdc output it's not clear at all...\r\n\r\n![image](https://user-images.githubusercontent.com/1408600/34391845-99b9f530-eb48-11e7-83ab-d6c8afef2edc.png)\r\n","createdAt":"2017-12-27T19:57:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354169304","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDE2OTMzMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"pdc must be improved. And its known to be far from perfect. But having proper testcases can help us to improve it. Do you want to try fixing that issue?\n\n> On 27 Dec 2017, at 20:52, Maijin <notifications@github.com> wrote:\n> \n> This is what I have in pdf:\n> \n> \n> \n> This is what you provided:\n> \n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-12-27T19:58:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354169333","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDE3MDU5Nw==","author":{"login":"beaumontk"},"authorAssociation":"NONE","body":"Compare the PDF debug output with that of PDC.PDC is missing HUGE chunks of code.I numbered the output from PDC 1-5. You will find these numbers in the PDF output, but the rest of the PDF output is missing from PDC.\nIn each case,Â ds_print_ptr_0 shows the index in use.Â ds_disassemble ds->asmop.buf_asm shows the asm code for that index.\nI can provide the printf statements in the code if that will help.\n \n\n    On Wednesday, 27 December 2017, 17:58, Maijin <notifications@github.com> wrote:\n \n\n Could you provide with what in the pdc output is wrong ? Because from your pdc output it's not clear at all...â€”\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub, or mute the thread.  \n\n   ","createdAt":"2017-12-27T20:07:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354170597","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDE3Mjk3Nw==","author":{"login":"beaumontk"},"authorAssociation":"NONE","body":"Here are the printf statements:\r\n\r\n/home/kb/01_dummy/radare2/libr/core/disasm.c\r\nline 2834 in MY_CODE\r\n````\r\n/* convert numeric value in opcode to ascii char or number */\r\nstatic void ds_print_ptr(RDisasmState *ds, int len, int idx) {\r\n\tRCore *core = ds->core;\r\n\tut64 p = ds->analop.ptr;\r\n\tut64 v = ds->analop.val;\r\n\tut64 refaddr = p;\r\n\tint refptr = ds->analop.refptr;\r\n\tRFlagItem *f;\r\n\tchar *nl = ds->show_comment_right? \"\" : \"\\n\";\r\n\r\n//KB\r\nprintf(\"ds_print_ptr_0: idx %x\\n\", idx);\r\n//KB\r\n````\r\n/home/kb/01_dummy/radare2/libr/core/disasm.c\r\nline 1664 in MY_CODE\r\n````\r\nstatic int ds_disassemble(RDisasmState *ds, ut8 *buf, int len) {\r\n\tRCore *core = ds->core;\r\n\tint ret;\r\n\tconst char *info;\r\n\tSdb *s = core->anal->sdb_meta;\r\n\tchar key[100];\r\n\tut64 mt_sz = UT64_MAX;\r\n\r\n\t//handle meta info to fix ds->oplen\r\n\tsnprintf (key, sizeof (key) - 1, \"meta.0x%\"PFMT64x, ds->at);\r\n\tinfo = sdb_const_get (s, key, 0);\r\n\tif (info) {\r\n\t\tfor (;*info; info++) {\r\n\t\t\tswitch (*info) {\r\n\t\t\tcase R_META_TYPE_DATA:\r\n\t\t\tcase R_META_TYPE_STRING:\r\n\t\t\tcase R_META_TYPE_FORMAT:\r\n\t\t\tcase R_META_TYPE_MAGIC:\r\n\t\t\tcase R_META_TYPE_HIDE:\r\n\t\t\t\tsnprintf (key, sizeof (key) - 1,\r\n\t\t\t\t\t\t\"meta.%c.0x%\"PFMT64x, *info, ds->at);\r\n\t\t\t\tsdb_const_get (s, key, 0);\r\n\t\t\t\tmt_sz = sdb_array_get_num (s, key, 0, 0);\r\n\t\t\t\t//if (mt_sz) { break; }\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (ds->hint && ds->hint->size) {\r\n\t\tds->oplen = ds->hint->size;\r\n\t}\r\n\tif (ds->hint && ds->hint->opcode) {\r\n\t\tfree (ds->opstr);\r\n\t\tds->opstr = strdup (ds->hint->opcode);\r\n\t\treturn true;\r\n\t}\r\n\tret = r_asm_disassemble (core->assembler, &ds->asmop, buf, len);\r\n//KB\r\nprintf(\"\\nds_disassemble ds->asmop.buf_asm: %s\\t\", ds->asmop.buf_asm);\r\n//KB\r\n````\r\n\r\n","createdAt":"2017-12-27T20:26:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354172977","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDE3NDEwNA==","author":{"login":"beaumontk"},"authorAssociation":"NONE","body":"PDC output:\r\n````\r\nfunction method.cocos2d::FileUtilsAndroid.getData(std::stringconst&,bool) () {\r\n    loc_0x598f1c:\r\n\r\n       push (r4, r5, r6, r7, r8, sb, sl, lr) \r\n       r7 = sp + 0xc            //\"274\" \r\n       sp -= 0x20               \r\n       r8 = r0                  \r\n       r0 = [pc + 0x230]        //[0x599158:4]=0x39391c \r\n       sb = r2                  \r\n       r6 = r3                  \r\n       r0 += pc                 //reloc.__stack_chk_guard_76\r\n       r0 = [r0]                \r\n       r0 = [r0]                \r\n       [sp + 0x1c] = r0         \r\n       r0 = [sb]                \r\n       r0 = [r0 - 0xc]          \r\n       if !r0 jmp 0x598fb0      //unlikely\r\n       {\r\n        loc_0x598fb0:\r\n\r\n           r0 = [pc + 0x1e0]        //[0x599194:4]=0x39793a ; \";\" \r\n           r0 += pc                 //reloc._ZN7cocos2d4Data4NullE_240\r\n           r1 = [r0]                \r\n           r0 = r8                  \r\n           0x403608()               //CALL: 0x9694c248, 0xbf9f41fc, 0xb6051031, 0xb707a000\r\n           r0 = [pc + 0x1d8]        //[0x599198:4]=0x39388a ; \"/\" \r\n           r0 += pc                 //reloc.__stack_chk_guard_76\r\n           jmp 0x59910c             \r\n       do\r\n       {\r\n            loc_0x59910c:\r\n\r\n             //JMP XREF from 0x00598fc0 (method.cocos2d::FileUtilsAndroid.getData(std::stringconst&,bool))\r\n               r0 = [r0]                \r\n               r1 = [sp + 0x1c]         \r\n               r0 = [r0]                \r\n               r0 = r0 - r1             \r\n               itt eq                   //unlikely\r\n           } while (?);\r\n       } while (?);\r\n      }\r\n      return;\r\n\r\n}\r\n````\r\n","createdAt":"2017-12-27T20:35:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354174104","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDE3NDI0NA==","author":{"login":"beaumontk"},"authorAssociation":"NONE","body":"PDF output:\r\n````\r\n            ;-- cocos2d::FileUtilsAndroid::getData(std::stringconst&,bool):\r\n            ;-- method.cocos2d::FileUtilsAndroid.getData_std::stringconst__bool_:\r\n            ;-- method.cocos2d::FileUtilsAndroid.getData_std::stringconst__bool_:\r\n/ (fcn) method.cocos2d::FileUtilsAndroid.getData(std::stringconst&,bool) 512\r\n|   method.cocos2d::FileUtilsAndroid.getData(std::stringconst&,bool) ();\r\n|           ; var int local_14h @ sp+0x14\r\n|           ; var int local_1ch @ sp+0x1c\r\n|           0x00598f1c      2de9f047       push.w {r4, r5, r6, r7, r8, sb, sl, lr}\r\n|           0x00598f20      03af           add r7, sp, 0xc\r\n|           0x00598f22      88b0           sub sp, 0x20\r\n|           0x00598f24      8046           mov r8, r0\r\n|           0x00598f26      8c48           ldr r0, [0x0059915a]        ; [0x599158:4]=0x39391c\r\n|           0x00598f28      9146           mov sb, r2\r\n|           0x00598f2a      1e46           mov r6, r3\r\n|           0x00598f2c      7844           add r0, pc\r\n|           0x00598f2e      0068           ldr r0, [r0]\r\n|           0x00598f30      0068           ldr r0, [r0]\r\n|           0x00598f32      0790           str r0, [sp + local_1ch]\r\n|           0x00598f34      d9f80000       ldr.w r0, [sb]\r\n|           0x00598f38      50f80c0c       ldr r0, [r0, -0xc]\r\n|       ,=< 0x00598f3c      c0b3           cbz r0, 0x598fb0\r\n|       |   0x00598f3e      0868           ldr r0, [r1]\r\n|       |   0x00598f40      06ac           add r4, sp, 0x18\r\n|       |   0x00598f42      4a46           mov r2, sb\r\n|       |   0x00598f44      c369           ldr r3, [r0, 0x1c]\r\n|       |   0x00598f46      2046           mov r0, r4\r\n|       |   0x00598f48      9847           blx r3\r\n|       |   0x00598f4a      2046           mov r0, r4\r\n|       |   0x00598f4c      6af64aeb       blx 0x4035e4\r\n|       |   0x00598f50      0698           ldr r0, [sp, 0x18]\r\n|       |   0x00598f52      50f8041c       ldr r1, [r0, -0x4]\r\n|       |   0x00598f56      0029           cmp r1, 0\r\n|      ,==< 0x00598f58      03db           blt 0x598f62\r\n|      ||   0x00598f5a      06a8           add r0, sp, 0x18\r\n|      ||   0x00598f5c      12f266f8       bl fcn.007ab02c\r\n|      ||   0x00598f60      0698           ldr r0, [sp, 0x18]\r\n|      `--> 0x00598f62      0178           ldrb r1, [r0]\r\n|       |   0x00598f64      2f29           cmp r1, 0x2f                ; '/'\r\n|      ,==< 0x00598f66      2cd1           bne 0x598fc2\r\n|      ||   0x00598f68      854a           ldr r2, [0x00599180]        ; [0x599180:4]=0x2f771a\r\n|      ||   0x00598f6a      002e           cmp r6, 0\r\n|      ||   0x00598f6c      8549           ldr r1, [0x00599184]        ; [0x599184:4]=0x305e39\r\n|      ||   0x00598f6e      7a44           add r2, pc\r\n|      ||   0x00598f70      7944           add r1, pc\r\n|     ,===< 0x00598f72      08bf           it eq\r\n|     `---> 0x00598f74      1146           mov r1, r2\r\n|      ||   0x00598f76      6af600eb       blx sym.imp.fopen           ; file*fopen(const char *filename,\r\n|      ||   0x00598f7a      0446           mov r4, r0\r\n|     ,===< 0x00598f7c      9cb3           cbz r4, 0x598fe6\r\n|     |||   0x00598f7e      2046           mov r0, r4\r\n|     |||   0x00598f80      0021           movs r1, 0\r\n|     |||   0x00598f82      0222           movs r2, 2\r\n|     |||   0x00598f84      4ff0000a       mov.w sl, 0\r\n|     |||   0x00598f88      6af632eb       blx sym.imp.fseek           ; int fseek(FILE *stream,\r\n|     |||   0x00598f8c      2046           mov r0, r4\r\n|     |||   0x00598f8e      6af636eb       blx sym.imp.ftell           ; long ftell(FILE *stream)\r\n|     |||   0x00598f92      0546           mov r5, r0\r\n|     |||   0x00598f94      2046           mov r0, r4\r\n|     |||   0x00598f96      0021           movs r1, 0\r\n|     |||   0x00598f98      0022           movs r2, 0\r\n|     |||   0x00598f9a      6af62aeb       blx sym.imp.fseek           ; int fseek(FILE *stream,\r\n|     |||   0x00598f9e      012e           cmp r6, 1\r\n|    ,====< 0x00598fa0      58d1           bne 0x599054\r\n|    ||||   0x00598fa2      681c           adds r0, r5, 1\r\n|    ||||   0x00598fa4      44f69eed       blx sym.imp.malloc          ;  void *malloc(size_t size)\r\n|    ||||   0x00598fa8      0646           mov r6, r0\r\n|    ||||   0x00598faa      06f805a0       strb.w sl, [r6, r5]\r\n|   ,=====< 0x00598fae      55e0           b 0x59905c\r\n|   ||||`-> 0x00598fb0      7848           ldr r0, [0x00599194]        ; [0x599194:4]=0x39793a\r\n|   ||||    0x00598fb2      7844           add r0, pc\r\n|   ||||    0x00598fb4      0168           ldr r1, [r0]\r\n|   ||||    0x00598fb6      4046           mov r0, r8\r\n|   ||||    0x00598fb8      6af626eb       blx 0x403608\r\n|   ||||    0x00598fbc      7648           ldr r0, [0x00599198]        ; [0x599198:4]=0x39388a\r\n|   ||||    0x00598fbe      7844           add r0, pc\r\n|   ||||,=< 0x00598fc0      a4e0           b 0x59910c\r\n|   |||`--> 0x00598fc2      6648           ldr r0, [0x0059915e]        ; [0x59915c:4]=0x3938c2\r\n|   ||| |   0x00598fc4      6649           ldr r1, [0x00599160]        ; [0x599160:4]=0x305d01\r\n|   ||| |   0x00598fc6      7844           add r0, pc\r\n|   ||| |   0x00598fc8      7944           add r1, pc\r\n|   ||| |   0x00598fca      0068           ldr r0, [r0]\r\n|   ||| |   0x00598fcc      0c30           adds r0, 0xc\r\n|   ||| |   0x00598fce      0590           str r0, [sp + local_14h]\r\n|   ||| |   0x00598fd0      06a8           add r0, sp, 0x18\r\n|   ||| |   0x00598fd2      0022           movs r2, 0\r\n|   ||| |   0x00598fd4      0723           movs r3, 7\r\n|   ||| |   0x00598fd6      11f271fb       bl fcn.007aa6bc\r\n|   |||,==< 0x00598fda      38b1           cbz r0, 0x598fec\r\n|   |||||   0x00598fdc      05a8           add r0, sp, 0x14\r\n|   |||||   0x00598fde      06a9           add r1, sp, 0x18\r\n|   |||||   0x00598fe0      11f294f9       bl fcn.007aa30c\r\n|  ,======< 0x00598fe4      10e0           b 0x599008\r\n|  |||`---> 0x00598fe6      0025           movs r5, 0\r\n|  ||| ||   0x00598fe8      0026           movs r6, 0\r\n|  |||,===< 0x00598fea      63e0           b 0x5990b4\r\n|  ||||`--> 0x00598fec      04a8           add r0, sp, 0x10\r\n|  |||| |   0x00598fee      06a9           add r1, sp, 0x18\r\n|  |||| |   0x00598ff0      0722           movs r2, 7\r\n|  |||| |   0x00598ff2      4ff0ff33       mov.w r3, -1                ; 0xffffffff ; -1\r\n|  |||| |   0x00598ff6      12f223ff       bl fcn.007abe40\r\n|  |||| |   0x00598ffa      05a8           add r0, sp, 0x14\r\n|  |||| |   0x00598ffc      04a9           add r1, sp, 0x10\r\n|  |||| |   0x00598ffe      11f285f9       bl fcn.007aa30c\r\n|  |||| |   0x00599002      04a8           add r0, sp, 0x10\r\n|  |||| |   0x00599004      10f278ff       bl fcn.007a9ef8\r\n|  |||| |      ; JMP XREF from 0x00598fe4 (method.cocos2d::FileUtilsAndroid.getData(std::stringconst&,bool))\r\n|  `------> 0x00599008      5648           ldr r0, [0x00599164]        ; [0x599164:4]=0x3978d6\r\n|   ||| |   0x0059900a      7844           add r0, pc\r\n|   ||| |   0x0059900c      0068           ldr r0, [r0]\r\n|   ||| |   0x0059900e      0068           ldr r0, [r0]\r\n|   |||,==< 0x00599010      90b1           cbz r0, 0x599038\r\n|   |||||   0x00599012      0599           ldr r1, [sp + local_14h]\r\n|   |||||   0x00599014      0022           movs r2, 0\r\n|   |||||   0x00599016      6af6bcea       blx sym.imp.AAssetManager_open ; int open(const char *path, int oflag)\r\n|   |||||   0x0059901a      0446           mov r4, r0\r\n|  ,======< 0x0059901c      4cb3           cbz r4, 0x599072\r\n|  ||||||   0x0059901e      2046           mov r0, r4\r\n|  ||||||   0x00599020      6af6f8ea       blx sym.imp.AAsset_getLength\r\n|  ||||||   0x00599024      0546           mov r5, r0\r\n|  ||||||   0x00599026      012e           cmp r6, 1\r\n| ,=======< 0x00599028      34d1           bne 0x599094\r\n| |||||||   0x0059902a      681c           adds r0, r5, 1\r\n| |||||||   0x0059902c      44f65aed       blx sym.imp.malloc          ;  void *malloc(size_t size)\r\n| |||||||   0x00599030      0646           mov r6, r0\r\n| |||||||   0x00599032      0020           movs r0, 0\r\n| |||||||   0x00599034      7055           strb r0, [r6, r5]\r\n| ========< 0x00599036      31e0           b 0x59909c\r\n| |||||`--> 0x00599038      4e49           ldr r1, [0x00599174]        ; [0x599174:4]=0x305cd7\r\n| ||||| |   0x0059903a      4f4a           ldr r2, [0x0059917a]        ; [0x599178:4]=0x305d2c\r\n| ||||| |   0x0059903c      7944           add r1, pc\r\n| ||||| |   0x0059903e      7a44           add r2, pc\r\n| ||||| |   0x00599040      0320           movs r0, 3\r\n| ||||| |   0x00599042      44f676e8       blx sym.imp.__android_log_print\r\n| ||||| |   0x00599046      4d48           ldr r0, [0x0059917e]        ; [0x59917c:4]=0x3978a4\r\n| ||||| |   0x00599048      7844           add r0, pc\r\n| ||||| |   0x0059904a      0168           ldr r1, [r0]\r\n| ||||| |   0x0059904c      4046           mov r0, r8\r\n| ||||| |   0x0059904e      6af6dcea       blx 0x403608\r\n| |||||,==< 0x00599052      1be0           b 0x59908c\r\n| |||`----> 0x00599054      2846           mov r0, r5\r\n| ||| |||   0x00599056      44f646ed       blx sym.imp.malloc          ;  void *malloc(size_t size)\r\n| ||| |||   0x0059905a      0646           mov r6, r0\r\n| ||| |||      ; JMP XREF from 0x00598fae (method.cocos2d::FileUtilsAndroid.getData(std::stringconst&,bool))\r\n| ||`-----> 0x0059905c      3046           mov r0, r6\r\n| ||  |||   0x0059905e      0121           movs r1, 1\r\n| ||  |||   0x00599060      2a46           mov r2, r5\r\n| ||  |||   0x00599062      2346           mov r3, r4\r\n| ||  |||   0x00599064      6af6dcea       blx sym.imp.fread           ; size_t fread(void *ptr, FILE *stream)\r\n| ||  |||   0x00599068      0546           mov r5, r0\r\n| ||  |||   0x0059906a      2046           mov r0, r4\r\n| ||  |||   0x0059906c      6af68aea       blx sym.imp.fclose          ; int fclose(FILE *stream)\r\n| || ,====< 0x00599070      20e0           b 0x5990b4\r\n| |`------> 0x00599072      3d49           ldr r1, [0x0059916a]        ; [0x599168:4]=0x305c9d\r\n| |  ||||   0x00599074      3d4a           ldr r2, [0x0059916c]        ; [0x59916c:4]=0x305d20\r\n| |  ||||   0x00599076      7944           add r1, pc\r\n| |  ||||   0x00599078      7a44           add r2, pc\r\n| |  ||||   0x0059907a      0320           movs r0, 3\r\n| |  ||||   0x0059907c      44f658e8       blx sym.imp.__android_log_print\r\n| |  ||||   0x00599080      3b48           ldr r0, [0x00599170]        ; [0x599170:4]=0x39786a\r\n| |  ||||   0x00599082      7844           add r0, pc\r\n| |  ||||   0x00599084      0168           ldr r1, [r0]\r\n| |  ||||   0x00599086      4046           mov r0, r8\r\n| |  ||||   0x00599088      6af6beea       blx 0x403608\r\n| |  ||||      ; JMP XREF from 0x00599052 (method.cocos2d::FileUtilsAndroid.getData(std::stringconst&,bool))\r\n| |  ||`--> 0x0059908c      05a8           add r0, sp, 0x14\r\n| |  || |   0x0059908e      10f233ff       bl fcn.007a9ef8\r\n| |  ||,==< 0x00599092      36e0           b 0x599102\r\n| `-------> 0x00599094      2846           mov r0, r5\r\n|    ||||   0x00599096      44f626ed       blx sym.imp.malloc          ;  void *malloc(size_t size)\r\n|    ||||   0x0059909a      0646           mov r6, r0\r\n|    ||||      ; JMP XREF from 0x00599036 (method.cocos2d::FileUtilsAndroid.getData(std::stringconst&,bool))\r\n| --------> 0x0059909c      2046           mov r0, r4\r\n|    ||||   0x0059909e      3146           mov r1, r6\r\n|    ||||   0x005990a0      2a46           mov r2, r5\r\n|    ||||   0x005990a2      6af6c4ea       blx sym.imp.AAsset_read     ; ssize_t read(int fildes, void *buf, size_t nbyte)\r\n|    ||||   0x005990a6      0546           mov r5, r0\r\n|    ||||   0x005990a8      2046           mov r0, r4\r\n|    ||||   0x005990aa      6af678ea       blx sym.imp.AAsset_close    ; int close(int fildes)\r\n|    ||||   0x005990ae      05a8           add r0, sp, 0x14\r\n|    ||||   0x005990b0      10f222ff       bl fcn.007a9ef8\r\n|    ||||      ; JMP XREF from 0x00598fea (method.cocos2d::FileUtilsAndroid.getData(std::stringconst&,bool))\r\n|    ||||      ; JMP XREF from 0x00599070 (method.cocos2d::FileUtilsAndroid.getData(std::stringconst&,bool))\r\n|    ``---> 0x005990b4      02a8           add r0, sp, 8\r\n|      ||   0x005990b6      6af610e9       blx fcn.004032d8\r\n|     ,===< 0x005990ba      4db1           cbz r5, 0x5990d0\r\n|    ,====< 0x005990bc      46b1           cbz r6, 0x5990d0\r\n|    ||||   0x005990be      02a8           add r0, sp, 8\r\n|    ||||   0x005990c0      3146           mov r1, r6\r\n|    ||||   0x005990c2      2a46           mov r2, r5\r\n|    ||||   0x005990c4      6af614e9       blx fcn.004032f0\r\n|    ||||   0x005990c8      06a8           add r0, sp, 0x18\r\n|    ||||   0x005990ca      6af6b6ea       blx 0x403638\r\n|   ,=====< 0x005990ce      11e0           b 0x5990f4\r\n|   |``---> 0x005990d0      2d49           ldr r1, [0x00599188]        ; [0x599188:4]=0x305cda\r\n|   |  ||   0x005990d2      7944           add r1, pc\r\n|   |  ||   0x005990d4      01a8           add r0, sp, 4\r\n|   |  ||   0x005990d6      6a46           mov r2, sp\r\n|   |  ||   0x005990d8      13f260f8       bl fcn.007ac19c\r\n|   |  ||   0x005990dc      01a8           add r0, sp, 4\r\n|   |  ||   0x005990de      4946           mov r1, sb\r\n|   |  ||   0x005990e0      11f214f9       bl fcn.007aa30c\r\n|   |  ||   0x005990e4      2949           ldr r1, [0x0059918c]        ; [0x59918c:4]=0x305cda\r\n|   |  ||   0x005990e6      7944           add r1, pc\r\n|   |  ||   0x005990e8      0922           movs r2, 9\r\n|   |  ||   0x005990ea      11f29bf9       bl fcn.007aa424\r\n|   |  ||   0x005990ee      01a8           add r0, sp, 4\r\n|   |  ||   0x005990f0      10f202ff       bl fcn.007a9ef8\r\n|   |  ||      ; JMP XREF from 0x005990ce (method.cocos2d::FileUtilsAndroid.getData(std::stringconst&,bool))\r\n|   `-----> 0x005990f4      02a9           add r1, sp, 8\r\n|      ||   0x005990f6      4046           mov r0, r8\r\n|      ||   0x005990f8      6af6a4ea       blx 0x403644\r\n|      ||   0x005990fc      02a8           add r0, sp, 8\r\n|      ||   0x005990fe      50f644ec       blx 0x3e9988\r\n|      ||      ; JMP XREF from 0x00599092 (method.cocos2d::FileUtilsAndroid.getData(std::stringconst&,bool))\r\n|      `--> 0x00599102      06a8           add r0, sp, 0x18\r\n|       |   0x00599104      10f2f8fe       bl fcn.007a9ef8\r\n|       |   0x00599108      2148           ldr r0, [0x00599190]        ; [0x599190:4]=0x39373e\r\n|       |   0x0059910a      7844           add r0, pc\r\n|       |      ; JMP XREF from 0x00598fc0 (method.cocos2d::FileUtilsAndroid.getData(std::stringconst&,bool))\r\n|       `-> 0x0059910c      0068           ldr r0, [r0]\r\n|           0x0059910e      0799           ldr r1, [sp + local_1ch]\r\n|           0x00599110      0068           ldr r0, [r0]\r\n|           0x00599112      401a           subs r0, r0, r1\r\n|       ,=< 0x00599114      04bf           itt eq\r\n|       `-> 0x00599116      08b0           add sp, 0x20\r\n\\           0x00599118      bde8f087       pop.w {r4, r5, r6, r7, r8, sb, sl, pc}\r\n````\r\n","createdAt":"2017-12-27T20:37:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354174244","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDE3NDMxNQ==","author":{"login":"beaumontk"},"authorAssociation":"NONE","body":"I can try to find the reason for this problem, but I'm VERY slow. Anybody who knows the code should be able to solve the problem quickly. If nobody is willing to look at it, then I will have no choice but to go it alone.","createdAt":"2017-12-27T20:37:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354174315","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDE4MDAwOA==","author":{"login":"beaumontk"},"authorAssociation":"NONE","body":"https://github.com/Maijin\r\n How did you produce the PDF output SOOOO quickly? Do you have VERY fast kit? Did you use aa?\r\n\r\nI was thinking that maybe a better idea would be a NEW function: PDE\r\nThis would be PDF enhanced with ESIL. It could then show all the text strings that PDC attempts to show.\r\n\r\nI do NOT yet have the expertise to do this!","createdAt":"2017-12-27T21:26:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354180008","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDE4ODc4Ng==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@beaumontk What you can do instead of running aa is run only a partial analysis on the function: `af @ 0x00598f1c` then do a `pdf @ 0x00598f1c` ; `pdc @ 0x00598f1c` ðŸ˜‰ ","createdAt":"2017-12-27T22:43:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354188786","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDE5MTY2NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"try now\n\n> On 27 Dec 2017, at 20:57, Pancake Nopcode <pancake@nopcode.org> wrote:\n> \n> pdc must be improved. And its known to be far from perfect. But having proper testcases can help us to improve it. Do you want to try fixing that issue?\n> \n> On 27 Dec 2017, at 20:52, Maijin <notifications@github.com <mailto:notifications@github.com>> wrote:\n> \n>> This is what I have in pdf:\n>> \n>>  <https://user-images.githubusercontent.com/1408600/34391701-c57c29e6-eb47-11e7-815f-56bb5d549b4b.png>\n>> This is what you provided:\n>>  <https://user-images.githubusercontent.com/1408600/34391712-d960a6da-eb47-11e7-916f-c856f1c73a81.png>\n>> â€”\n>> You are receiving this because you are subscribed to this thread.\n>> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/9080#issuecomment-354168616>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lhGsDTA21W0OE3bxNNr5x6VLhUsoks5tEqAMgaJpZM4RNwFq>.\n>> \n\n","createdAt":"2017-12-27T22:58:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354191664","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDIzOTQ2Nw==","author":{"login":"beaumontk"},"authorAssociation":"NONE","body":"\r\nr_core_pseudo_code seems to be using the address from a branch instruction\r\nto process the next block. But then fails to process the skipped blocks.\r\nIt also processes the block at 0x59910c twice?\r\n\r\nGDB output\r\n\r\n```\r\n[0x0041c040]> af @ 0x00598f1c\r\n[0x0041c040]> s 0x00598f1c\r\n[0x00598f1c]> pdc >/home/kb/01_dummy/02b_libgame/ZN7cocos2d16FileUtilsAndroid7getData_c.txt\r\n```\r\n\r\n```\r\nBreakpoint 2, r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869340, \r\n    buf=0x80071f28 \"-\\351\\360G\\003\\257\\210\\260\\200F\\214H\\221F\\036FxD\", len=34, l=34, invbreak=0, cbytes=1) at disasm.c:3696\r\n3696\tR_API int r_core_print_disasm(RPrint *p, RCore *core, ut64 addr, ut8 *buf, int len, int l, int invbreak, int cbytes) {\r\n(gdb) p/x addr\r\n$1 = 0x598f1c\r\n(gdb) bt\r\n#0  r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869340, buf=0x80071f28 \"-\\351\\360G\\003\\257\\210\\260\\200F\\214H\\221F\\036FxD\", \r\n    len=34, l=34, invbreak=0, cbytes=1) at disasm.c:3696\r\n#1  0xb7eaffd9 in cmd_print (data=0x8000a3c0 <r>, input=0x8c233d91 \"D 34\") at cmd_print.c:4288\r\n#2  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8c233d90 \"pD 34\") at cmd_api.c:227\r\n#3  0xb7ecb767 in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8c233d90 \"pD 34\", colon=0x0) at cmd.c:2384\r\n#4  0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8c233d90 \"pD 34\") at cmd.c:1591\r\n#5  0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, cstr=0xb6aef7c0 <Key.3810> \"pD 34 @ 0x00598f1c\\n\", log=0) at cmd.c:3058\r\n#6  0xb7ece51c in r_core_cmd_str (core=0x8000a3c0 <r>, cmd=0xb6aef7c0 <Key.3810> \"pD 34 @ 0x00598f1c\\n\") at cmd.c:3310\r\n#7  0xb7f46770 in r_core_pseudo_code (core=0x8000a3c0 <r>, input=0x8008a913 \"\") at pseudo.c:231\r\n\r\n#8  0xb7eaee2e in cmd_print (data=0x8000a3c0 <r>, input=0x8008a911 \"dc\") at cmd_print.c:3998\r\n#9  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8008a910 \"pdc\") at cmd_api.c:227\r\n#10 0xb7ecb9ab in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\", colon=0x0) at cmd.c:2426\r\n#11 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\") at cmd.c:1591\r\n#12 0xb7eca1bf in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \", colon=0x0) at cmd.c:2026\r\n#13 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \") at cmd.c:1591\r\n#14 0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, \r\n    cstr=0x8e349808 \"pdc >/home/kb/01_dummy/02b_libgame/ZN7cocos2d16FileUtilsAndroid7getData_c.txt\", log=1) at cmd.c:3058\r\n#15 0xb7e47c07 in r_core_prompt_exec (r=0x8000a3c0 <r>) at core.c:2044\r\n#16 0x800064c5 in main (argc=2, argv=0xbfffeda4, envp=0xbfffedb0) at radare2.c:1312\r\n(gdb) c\r\nContinuing.\r\n```\r\n\r\n```\r\nBreakpoint 2, r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869488, \r\n    buf=0x8d41eec0 \"xHxD\\001h@Fj\\366&\\353vHxD\\244\", <incomplete sequence \\340>, len=18, l=18, invbreak=0, cbytes=1) at disasm.c:3696\r\n3696\tR_API int r_core_print_disasm(RPrint *p, RCore *core, ut64 addr, ut8 *buf, int len, int l, int invbreak, int cbytes) {\r\n(gdb) p/x addr\r\n$2 = 0x598fb0\r\n(gdb) bt\r\n#0  r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869488, \r\n    buf=0x8d41eec0 \"xHxD\\001h@Fj\\366&\\353vHxD\\244\", <incomplete sequence \\340>, len=18, l=18, invbreak=0, cbytes=1) at disasm.c:3696\r\n#1  0xb7eaffd9 in cmd_print (data=0x8000a3c0 <r>, input=0x8c377ef1 \"D 18\") at cmd_print.c:4288\r\n#2  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8c377ef0 \"pD 18\") at cmd_api.c:227\r\n#3  0xb7ecb767 in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8c377ef0 \"pD 18\", colon=0x0) at cmd.c:2384\r\n#4  0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8c377ef0 \"pD 18\") at cmd.c:1591\r\n#5  0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, cstr=0xb6aef7c0 <Key.3810> \"pD 18 @ 0x00598fb0\\n\", log=0) at cmd.c:3058\r\n#6  0xb7ece51c in r_core_cmd_str (core=0x8000a3c0 <r>, cmd=0xb6aef7c0 <Key.3810> \"pD 18 @ 0x00598fb0\\n\") at cmd.c:3310\r\n#7  0xb7f46770 in r_core_pseudo_code (core=0x8000a3c0 <r>, input=0x8008a913 \"\") at pseudo.c:231\r\n\r\n#8  0xb7eaee2e in cmd_print (data=0x8000a3c0 <r>, input=0x8008a911 \"dc\") at cmd_print.c:3998\r\n#9  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8008a910 \"pdc\") at cmd_api.c:227\r\n#10 0xb7ecb9ab in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\", colon=0x0) at cmd.c:2426\r\n#11 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\") at cmd.c:1591\r\n#12 0xb7eca1bf in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \", colon=0x0) at cmd.c:2026\r\n#13 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \") at cmd.c:1591\r\n#14 0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, \r\n    cstr=0x8e349808 \"pdc >/home/kb/01_dummy/02b_libgame/ZN7cocos2d16FileUtilsAndroid7getData_c.txt\", log=1) at cmd.c:3058\r\n#15 0xb7e47c07 in r_core_prompt_exec (r=0x8000a3c0 <r>) at core.c:2044\r\n#16 0x800064c5 in main (argc=2, argv=0xbfffeda4, envp=0xbfffedb0) at radare2.c:1312\r\n(gdb) c\r\nContinuing.\r\n```\r\n\r\n```\r\nBreakpoint 2, r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869836, buf=0x8c3711b0 \"\", len=10, l=10, invbreak=0, cbytes=1)\r\n    at disasm.c:3696\r\n3696\tR_API int r_core_print_disasm(RPrint *p, RCore *core, ut64 addr, ut8 *buf, int len, int l, int invbreak, int cbytes) {\r\n(gdb) p/x addr\r\n$3 = 0x59910c\r\n(gdb) bt\r\n#0  r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869836, buf=0x8c3711b0 \"\", len=10, l=10, invbreak=0, cbytes=1)\r\n    at disasm.c:3696\r\n#1  0xb7eaffd9 in cmd_print (data=0x8000a3c0 <r>, input=0x8c8277b9 \"D 10\") at cmd_print.c:4288\r\n#2  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8c8277b8 \"pD 10\") at cmd_api.c:227\r\n#3  0xb7ecb767 in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8c8277b8 \"pD 10\", colon=0x0) at cmd.c:2384\r\n#4  0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8c8277b8 \"pD 10\") at cmd.c:1591\r\n#5  0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, cstr=0xb6aef7c0 <Key.3810> \"pD 10 @ 0x0059910c\\n\", log=0) at cmd.c:3058\r\n#6  0xb7ece51c in r_core_cmd_str (core=0x8000a3c0 <r>, cmd=0xb6aef7c0 <Key.3810> \"pD 10 @ 0x0059910c\\n\") at cmd.c:3310\r\n#7  0xb7f46770 in r_core_pseudo_code (core=0x8000a3c0 <r>, input=0x8008a913 \"\") at pseudo.c:231\r\n\r\n#8  0xb7eaee2e in cmd_print (data=0x8000a3c0 <r>, input=0x8008a911 \"dc\") at cmd_print.c:3998\r\n#9  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8008a910 \"pdc\") at cmd_api.c:227\r\n#10 0xb7ecb9ab in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\", colon=0x0) at cmd.c:2426\r\n#11 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\") at cmd.c:1591\r\n#12 0xb7eca1bf in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \", colon=0x0) at cmd.c:2026\r\n#13 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \") at cmd.c:1591\r\n#14 0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, \r\n    cstr=0x8e349808 \"pdc >/home/kb/01_dummy/02b_libgame/ZN7cocos2d16FileUtilsAndroid7getData_c.txt\", log=1) at cmd.c:3058\r\n#15 0xb7e47c07 in r_core_prompt_exec (r=0x8000a3c0 <r>) at core.c:2044\r\n#16 0x800064c5 in main (argc=2, argv=0xbfffeda4, envp=0xbfffedb0) at radare2.c:1312\r\n(gdb) c\r\nContinuing.\r\n```\r\n\r\n```\r\nBreakpoint 2, r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869836, buf=0x8c98b170 \"\", len=10, l=10, invbreak=0, cbytes=1)\r\n    at disasm.c:3696\r\n3696\tR_API int r_core_print_disasm(RPrint *p, RCore *core, ut64 addr, ut8 *buf, int len, int l, int invbreak, int cbytes) {\r\n(gdb) p/x addr\r\n$4 = 0x59910c\r\n(gdb) bt\r\n#0  r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869836, buf=0x8c98b170 \"\", len=10, l=10, invbreak=0, cbytes=1)\r\n    at disasm.c:3696\r\n#1  0xb7eaffd9 in cmd_print (data=0x8000a3c0 <r>, input=0x8c3154c1 \"D 10\") at cmd_print.c:4288\r\n#2  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8c3154c0 \"pD 10\") at cmd_api.c:227\r\n#3  0xb7ecb767 in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8c3154c0 \"pD 10\", colon=0x0) at cmd.c:2384\r\n#4  0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8c3154c0 \"pD 10\") at cmd.c:1591\r\n#5  0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, cstr=0xb6aef7c0 <Key.3810> \"pD 10 @ 0x0059910c\\n\", log=0) at cmd.c:3058\r\n#6  0xb7ece51c in r_core_cmd_str (core=0x8000a3c0 <r>, cmd=0xb6aef7c0 <Key.3810> \"pD 10 @ 0x0059910c\\n\") at cmd.c:3310\r\n#7  0xb7f46770 in r_core_pseudo_code (core=0x8000a3c0 <r>, input=0x8008a913 \"\") at pseudo.c:231\r\n\r\n#8  0xb7eaee2e in cmd_print (data=0x8000a3c0 <r>, input=0x8008a911 \"dc\") at cmd_print.c:3998\r\n#9  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8008a910 \"pdc\") at cmd_api.c:227\r\n#10 0xb7ecb9ab in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\", colon=0x0) at cmd.c:2426\r\n#11 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\") at cmd.c:1591\r\n#12 0xb7eca1bf in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \", colon=0x0) at cmd.c:2026\r\n#13 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \") at cmd.c:1591\r\n#14 0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, \r\n    cstr=0x8e349808 \"pdc >/home/kb/01_dummy/02b_libgame/ZN7cocos2d16FileUtilsAndroid7getData_c.txt\", log=1) at cmd.c:3058\r\n#15 0xb7e47c07 in r_core_prompt_exec (r=0x8000a3c0 <r>) at core.c:2044\r\n#16 0x800064c5 in main (argc=2, argv=0xbfffeda4, envp=0xbfffedb0) at radare2.c:1312\r\n(gdb) c\r\nContinuing.\r\n```\r\n\r\n```\r\nBreakpoint 2, r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869374, \r\n    buf=0x8e33db50 \"\\bh\\006\\254JF\\303i F\\230G Fj\\366J\\353\\006\\230P\\370\\004\\034\", len=28, l=28, invbreak=0, cbytes=1) at disasm.c:3696\r\n3696\tR_API int r_core_print_disasm(RPrint *p, RCore *core, ut64 addr, ut8 *buf, int len, int l, int invbreak, int cbytes) {\r\n(gdb) p/x addr\r\n$5 = 0x598f3e\r\n(gdb) bt\r\n#0  r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869374, \r\n    buf=0x8e33db50 \"\\bh\\006\\254JF\\303i F\\230G Fj\\366J\\353\\006\\230P\\370\\004\\034\", len=28, l=28, invbreak=0, cbytes=1) at disasm.c:3696\r\n#1  0xb7eaffd9 in cmd_print (data=0x8000a3c0 <r>, input=0x8ca8e7e9 \"D 28\") at cmd_print.c:4288\r\n#2  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8ca8e7e8 \"pD 28\") at cmd_api.c:227\r\n#3  0xb7ecb767 in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8ca8e7e8 \"pD 28\", colon=0x0) at cmd.c:2384\r\n#4  0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8ca8e7e8 \"pD 28\") at cmd.c:1591\r\n#5  0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, cstr=0xb6aef7c0 <Key.3810> \"pD 28 @ 0x00598f3e\\n\", log=0) at cmd.c:3058\r\n#6  0xb7ece51c in r_core_cmd_str (core=0x8000a3c0 <r>, cmd=0xb6aef7c0 <Key.3810> \"pD 28 @ 0x00598f3e\\n\") at cmd.c:3310\r\n#7  0xb7f46770 in r_core_pseudo_code (core=0x8000a3c0 <r>, input=0x8008a913 \"\") at pseudo.c:231\r\n\r\n#8  0xb7eaee2e in cmd_print (data=0x8000a3c0 <r>, input=0x8008a911 \"dc\") at cmd_print.c:3998\r\n#9  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8008a910 \"pdc\") at cmd_api.c:227\r\n#10 0xb7ecb9ab in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\", colon=0x0) at cmd.c:2426\r\n#11 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\") at cmd.c:1591\r\n#12 0xb7eca1bf in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \", colon=0x0) at cmd.c:2026\r\n#13 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \") at cmd.c:1591\r\n#14 0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, \r\n    cstr=0x8e349808 \"pdc >/home/kb/01_dummy/02b_libgame/ZN7cocos2d16FileUtilsAndroid7getData_c.txt\", log=1) at cmd.c:3058\r\n#15 0xb7e47c07 in r_core_prompt_exec (r=0x8000a3c0 <r>) at core.c:2044\r\n#16 0x800064c5 in main (argc=2, argv=0xbfffeda4, envp=0xbfffedb0) at radare2.c:1312\r\n(gdb) c\r\nContinuing.\r\n```\r\n","createdAt":"2017-12-28T06:54:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354239467","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDI4MDE4Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"yes, the pdc loop must be rewritten, its not good as it is, no need to debug it, just reading the code makes that obvious. i did a workaround to get more coverage but must be rewritten, didnt had time for this. also, you can use eprintf, works way better than any gdb :P\n\n> On 28 Dec 2017, at 07:54, beaumontk <notifications@github.com> wrote:\n> \n> r_core_pseudo_code seems to be using the address from a branch instruction\n> to process the next block. But then fails to process the skipped blocks.\n> It also processes the block at 0x59910c twice?\n> \n> GDB output\n> \n> [0x0041c040]> af @ 0x00598f1c\n> [0x0041c040]> s 0x00598f1c\n> [0x00598f1c]> pdc >/home/kb/01_dummy/02b_libgame/ZN7cocos2d16FileUtilsAndroid7getData_c.txt\n> Breakpoint 2, r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869340, \n>     buf=0x80071f28 \"-\\351\\360G\\003\\257\\210\\260\\200F\\214H\\221F\\036FxD\", len=34, l=34, invbreak=0, cbytes=1) at disasm.c:3696\n> 3696\tR_API int r_core_print_disasm(RPrint *p, RCore *core, ut64 addr, ut8 *buf, int len, int l, int invbreak, int cbytes) {\n> (gdb) p/x addr\n> $1 = 0x598f1c\n> (gdb) bt\n> #0  r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869340, buf=0x80071f28 \"-\\351\\360G\\003\\257\\210\\260\\200F\\214H\\221F\\036FxD\", \n>     len=34, l=34, invbreak=0, cbytes=1) at disasm.c:3696\n> #1  0xb7eaffd9 in cmd_print (data=0x8000a3c0 <r>, input=0x8c233d91 \"D 34\") at cmd_print.c:4288\n> #2  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8c233d90 \"pD 34\") at cmd_api.c:227\n> #3  0xb7ecb767 in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8c233d90 \"pD 34\", colon=0x0) at cmd.c:2384\n> #4  0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8c233d90 \"pD 34\") at cmd.c:1591\n> #5  0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, cstr=0xb6aef7c0 <Key.3810> \"pD 34 @ 0x00598f1c\\n\", log=0) at cmd.c:3058\n> #6  0xb7ece51c in r_core_cmd_str (core=0x8000a3c0 <r>, cmd=0xb6aef7c0 <Key.3810> \"pD 34 @ 0x00598f1c\\n\") at cmd.c:3310\n> #7  0xb7f46770 in r_core_pseudo_code (core=0x8000a3c0 <r>, input=0x8008a913 \"\") at pseudo.c:231\n> \n> #8  0xb7eaee2e in cmd_print (data=0x8000a3c0 <r>, input=0x8008a911 \"dc\") at cmd_print.c:3998\n> #9  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8008a910 \"pdc\") at cmd_api.c:227\n> #10 0xb7ecb9ab in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\", colon=0x0) at cmd.c:2426\n> #11 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\") at cmd.c:1591\n> #12 0xb7eca1bf in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \", colon=0x0) at cmd.c:2026\n> #13 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \") at cmd.c:1591\n> #14 0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, \n>     cstr=0x8e349808 \"pdc >/home/kb/01_dummy/02b_libgame/ZN7cocos2d16FileUtilsAndroid7getData_c.txt\", log=1) at cmd.c:3058\n> #15 0xb7e47c07 in r_core_prompt_exec (r=0x8000a3c0 <r>) at core.c:2044\n> #16 0x800064c5 in main (argc=2, argv=0xbfffeda4, envp=0xbfffedb0) at radare2.c:1312\n> (gdb) c\n> Continuing.\n> Breakpoint 2, r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869488, \n>     buf=0x8d41eec0 \"xHxD\\001h@Fj\\366&\\353vHxD\\244\", <incomplete sequence \\340>, len=18, l=18, invbreak=0, cbytes=1) at disasm.c:3696\n> 3696\tR_API int r_core_print_disasm(RPrint *p, RCore *core, ut64 addr, ut8 *buf, int len, int l, int invbreak, int cbytes) {\n> (gdb) p/x addr\n> $2 = 0x598fb0\n> (gdb) bt\n> #0  r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869488, \n>     buf=0x8d41eec0 \"xHxD\\001h@Fj\\366&\\353vHxD\\244\", <incomplete sequence \\340>, len=18, l=18, invbreak=0, cbytes=1) at disasm.c:3696\n> #1  0xb7eaffd9 in cmd_print (data=0x8000a3c0 <r>, input=0x8c377ef1 \"D 18\") at cmd_print.c:4288\n> #2  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8c377ef0 \"pD 18\") at cmd_api.c:227\n> #3  0xb7ecb767 in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8c377ef0 \"pD 18\", colon=0x0) at cmd.c:2384\n> #4  0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8c377ef0 \"pD 18\") at cmd.c:1591\n> #5  0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, cstr=0xb6aef7c0 <Key.3810> \"pD 18 @ 0x00598fb0\\n\", log=0) at cmd.c:3058\n> #6  0xb7ece51c in r_core_cmd_str (core=0x8000a3c0 <r>, cmd=0xb6aef7c0 <Key.3810> \"pD 18 @ 0x00598fb0\\n\") at cmd.c:3310\n> #7  0xb7f46770 in r_core_pseudo_code (core=0x8000a3c0 <r>, input=0x8008a913 \"\") at pseudo.c:231\n> \n> #8  0xb7eaee2e in cmd_print (data=0x8000a3c0 <r>, input=0x8008a911 \"dc\") at cmd_print.c:3998\n> #9  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8008a910 \"pdc\") at cmd_api.c:227\n> #10 0xb7ecb9ab in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\", colon=0x0) at cmd.c:2426\n> #11 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\") at cmd.c:1591\n> #12 0xb7eca1bf in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \", colon=0x0) at cmd.c:2026\n> #13 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \") at cmd.c:1591\n> #14 0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, \n>     cstr=0x8e349808 \"pdc >/home/kb/01_dummy/02b_libgame/ZN7cocos2d16FileUtilsAndroid7getData_c.txt\", log=1) at cmd.c:3058\n> #15 0xb7e47c07 in r_core_prompt_exec (r=0x8000a3c0 <r>) at core.c:2044\n> #16 0x800064c5 in main (argc=2, argv=0xbfffeda4, envp=0xbfffedb0) at radare2.c:1312\n> (gdb) c\n> Continuing.\n> Breakpoint 2, r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869836, buf=0x8c3711b0 \"\", len=10, l=10, invbreak=0, cbytes=1)\n>     at disasm.c:3696\n> 3696\tR_API int r_core_print_disasm(RPrint *p, RCore *core, ut64 addr, ut8 *buf, int len, int l, int invbreak, int cbytes) {\n> (gdb) p/x addr\n> $3 = 0x59910c\n> (gdb) bt\n> #0  r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869836, buf=0x8c3711b0 \"\", len=10, l=10, invbreak=0, cbytes=1)\n>     at disasm.c:3696\n> #1  0xb7eaffd9 in cmd_print (data=0x8000a3c0 <r>, input=0x8c8277b9 \"D 10\") at cmd_print.c:4288\n> #2  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8c8277b8 \"pD 10\") at cmd_api.c:227\n> #3  0xb7ecb767 in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8c8277b8 \"pD 10\", colon=0x0) at cmd.c:2384\n> #4  0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8c8277b8 \"pD 10\") at cmd.c:1591\n> #5  0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, cstr=0xb6aef7c0 <Key.3810> \"pD 10 @ 0x0059910c\\n\", log=0) at cmd.c:3058\n> #6  0xb7ece51c in r_core_cmd_str (core=0x8000a3c0 <r>, cmd=0xb6aef7c0 <Key.3810> \"pD 10 @ 0x0059910c\\n\") at cmd.c:3310\n> #7  0xb7f46770 in r_core_pseudo_code (core=0x8000a3c0 <r>, input=0x8008a913 \"\") at pseudo.c:231\n> \n> #8  0xb7eaee2e in cmd_print (data=0x8000a3c0 <r>, input=0x8008a911 \"dc\") at cmd_print.c:3998\n> #9  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8008a910 \"pdc\") at cmd_api.c:227\n> #10 0xb7ecb9ab in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\", colon=0x0) at cmd.c:2426\n> #11 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\") at cmd.c:1591\n> #12 0xb7eca1bf in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \", colon=0x0) at cmd.c:2026\n> #13 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \") at cmd.c:1591\n> #14 0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, \n>     cstr=0x8e349808 \"pdc >/home/kb/01_dummy/02b_libgame/ZN7cocos2d16FileUtilsAndroid7getData_c.txt\", log=1) at cmd.c:3058\n> #15 0xb7e47c07 in r_core_prompt_exec (r=0x8000a3c0 <r>) at core.c:2044\n> #16 0x800064c5 in main (argc=2, argv=0xbfffeda4, envp=0xbfffedb0) at radare2.c:1312\n> (gdb) c\n> Continuing.\n> Breakpoint 2, r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869836, buf=0x8c98b170 \"\", len=10, l=10, invbreak=0, cbytes=1)\n>     at disasm.c:3696\n> 3696\tR_API int r_core_print_disasm(RPrint *p, RCore *core, ut64 addr, ut8 *buf, int len, int l, int invbreak, int cbytes) {\n> (gdb) p/x addr\n> $4 = 0x59910c\n> (gdb) bt\n> #0  r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869836, buf=0x8c98b170 \"\", len=10, l=10, invbreak=0, cbytes=1)\n>     at disasm.c:3696\n> #1  0xb7eaffd9 in cmd_print (data=0x8000a3c0 <r>, input=0x8c3154c1 \"D 10\") at cmd_print.c:4288\n> #2  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8c3154c0 \"pD 10\") at cmd_api.c:227\n> #3  0xb7ecb767 in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8c3154c0 \"pD 10\", colon=0x0) at cmd.c:2384\n> #4  0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8c3154c0 \"pD 10\") at cmd.c:1591\n> #5  0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, cstr=0xb6aef7c0 <Key.3810> \"pD 10 @ 0x0059910c\\n\", log=0) at cmd.c:3058\n> #6  0xb7ece51c in r_core_cmd_str (core=0x8000a3c0 <r>, cmd=0xb6aef7c0 <Key.3810> \"pD 10 @ 0x0059910c\\n\") at cmd.c:3310\n> #7  0xb7f46770 in r_core_pseudo_code (core=0x8000a3c0 <r>, input=0x8008a913 \"\") at pseudo.c:231\n> \n> #8  0xb7eaee2e in cmd_print (data=0x8000a3c0 <r>, input=0x8008a911 \"dc\") at cmd_print.c:3998\n> #9  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8008a910 \"pdc\") at cmd_api.c:227\n> #10 0xb7ecb9ab in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\", colon=0x0) at cmd.c:2426\n> #11 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\") at cmd.c:1591\n> #12 0xb7eca1bf in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \", colon=0x0) at cmd.c:2026\n> #13 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \") at cmd.c:1591\n> #14 0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, \n>     cstr=0x8e349808 \"pdc >/home/kb/01_dummy/02b_libgame/ZN7cocos2d16FileUtilsAndroid7getData_c.txt\", log=1) at cmd.c:3058\n> #15 0xb7e47c07 in r_core_prompt_exec (r=0x8000a3c0 <r>) at core.c:2044\n> #16 0x800064c5 in main (argc=2, argv=0xbfffeda4, envp=0xbfffedb0) at radare2.c:1312\n> (gdb) c\n> Continuing.\n> Breakpoint 2, r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869374, \n>     buf=0x8e33db50 \"\\bh\\006\\254JF\\303i F\\230G Fj\\366J\\353\\006\\230P\\370\\004\\034\", len=28, l=28, invbreak=0, cbytes=1) at disasm.c:3696\n> 3696\tR_API int r_core_print_disasm(RPrint *p, RCore *core, ut64 addr, ut8 *buf, int len, int l, int invbreak, int cbytes) {\n> (gdb) p/x addr\n> $5 = 0x598f3e\n> (gdb) bt\n> #0  r_core_print_disasm (p=0x800720c0, core=0x8000a3c0 <r>, addr=5869374, \n>     buf=0x8e33db50 \"\\bh\\006\\254JF\\303i F\\230G Fj\\366J\\353\\006\\230P\\370\\004\\034\", len=28, l=28, invbreak=0, cbytes=1) at disasm.c:3696\n> #1  0xb7eaffd9 in cmd_print (data=0x8000a3c0 <r>, input=0x8ca8e7e9 \"D 28\") at cmd_print.c:4288\n> #2  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8ca8e7e8 \"pD 28\") at cmd_api.c:227\n> #3  0xb7ecb767 in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8ca8e7e8 \"pD 28\", colon=0x0) at cmd.c:2384\n> #4  0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8ca8e7e8 \"pD 28\") at cmd.c:1591\n> #5  0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, cstr=0xb6aef7c0 <Key.3810> \"pD 28 @ 0x00598f3e\\n\", log=0) at cmd.c:3058\n> #6  0xb7ece51c in r_core_cmd_str (core=0x8000a3c0 <r>, cmd=0xb6aef7c0 <Key.3810> \"pD 28 @ 0x00598f3e\\n\") at cmd.c:3310\n> #7  0xb7f46770 in r_core_pseudo_code (core=0x8000a3c0 <r>, input=0x8008a913 \"\") at pseudo.c:231\n> \n> #8  0xb7eaee2e in cmd_print (data=0x8000a3c0 <r>, input=0x8008a911 \"dc\") at cmd_print.c:3998\n> #9  0xb7f0e95a in r_cmd_call (cmd=0x800e3178, input=0x8008a910 \"pdc\") at cmd_api.c:227\n> #10 0xb7ecb9ab in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\", colon=0x0) at cmd.c:2426\n> #11 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8008a910 \"pdc\") at cmd.c:1591\n> #12 0xb7eca1bf in r_core_cmd_subst_i (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \", colon=0x0) at cmd.c:2026\n> #13 0xb7ec8e53 in r_core_cmd_subst (core=0x8000a3c0 <r>, cmd=0x8e349fd0 \"pdc \") at cmd.c:1591\n> #14 0xb7ecd9b6 in r_core_cmd (core=0x8000a3c0 <r>, \n>     cstr=0x8e349808 \"pdc >/home/kb/01_dummy/02b_libgame/ZN7cocos2d16FileUtilsAndroid7getData_c.txt\", log=1) at cmd.c:3058\n> #15 0xb7e47c07 in r_core_prompt_exec (r=0x8000a3c0 <r>) at core.c:2044\n> #16 0x800064c5 in main (argc=2, argv=0xbfffeda4, envp=0xbfffedb0) at radare2.c:1312\n> (gdb) c\n> Continuing.\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/9080#issuecomment-354239467>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lnsOEBod10WC6XK981wNAn4AyPI5ks5tEzsTgaJpZM4RNwFq>.\n> \n\n","createdAt":"2017-12-28T12:21:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354280182","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDMyODIzNQ==","author":{"login":"beaumontk"},"authorAssociation":"NONE","body":"Thanks Pancake, an improvement but still missing stuff. Maybe I'll have a look at the code tomorrow.\r\nSvenito, any idea how long it might take to fix? My .so above will be a good testing option. The function should show fopen, fclose, fread, etc and message strings.","createdAt":"2017-12-28T17:55:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354328235","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDM1NTE4Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"All this code is in libr/core/pseudo.c\n\nSvenito said that he will take a look. He did a pdc in js as a plugin for r2. So i bet he have some ideas to improve that code too.\n\n> On 28 Dec 2017, at 18:55, beaumontk <notifications@github.com> wrote:\n> \n> Thanks Pancake, an improvement but still missing stuff. Maybe I'll have a look at the code tomorrow.\n> Svenito, any idea how long it might take to fix? My .so above will be a good testing option. The function should show fopen, fclose, fread, etc and message strings.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-12-28T20:44:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354355182","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDQ1MjAyOQ==","author":{"login":"beaumontk"},"authorAssociation":"NONE","body":"[02b_libgame.zip](https://github.com/radare/radare2/files/1593251/02b_libgame.zip)\r\n\r\nhttps://github.com/radare\r\nHope you have time to look at my latest debug output after your changes. I'm finding it VERY hard to follow what's going on. Line 41 in PDC is very strange. Let me know if you need the code with the printf statements.\r\n\r\n","createdAt":"2017-12-29T14:22:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354452029","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDQ1MjE2OQ==","author":{"login":"beaumontk"},"authorAssociation":"NONE","body":"How do I use the js PDC plugin of Svenito?","createdAt":"2017-12-29T14:23:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-354452169","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NTM4MTQzMQ==","author":{"login":"beaumontk"},"authorAssociation":"NONE","body":"Pancake,\r\nI used your latest version of psuedo.c and found a VERY INELEGANT way to fix it.\r\nIt is best called a FRIG!\r\n\r\nEach time the loop breaks with nbb==NULL or fail==UT64_MAX, loop through all the blocks and check for the next NOT visited.\r\nOnly exit when ALL blocks have been visited.\r\n\r\nThe order of blocks visited is probably incorrect this way. I haven't checked yet.\r\nAlso, I had a problem with indents going negative!\r\n\r\nAt last, I can see text strings in the code!\r\n\r\nBUT ...\r\n\r\n-------------------------------\r\nA NEW ERROR now comes to light.\r\n-------------------------------\r\n\r\n```\r\n@ address x00598f76 we get this messagefrom my printf:\r\nds_disassemble ds->at: 598f76\t ds->asmop.buf_asm: invalid\tds_disassemble: call r_parse_parse\treplace2: 0 \r\n\r\n|      ||   0x00598f68      854a           ldr r2, [0x00599180]        ; [0x599180:4]=0x2f771a\t\t\t;# kb_data 10 599180 0x598f68 0x002f771a       - 89068a - 89068b r (or rb?)\r\n|      ||   0x00598f6a      002e           cmp r6, 0\r\n|      ||   0x00598f6c      8549           ldr r1, [0x00599184]        ; [0x599184:4]=0x305e39\t\t\t;# kb_data 11 599184 0x598f6c 0x00305e39       - 89edad - 89edad Get data from file(\r\n|      ||   0x00598f6e      7a44           add r2, pc\r\n|      ||   0x00598f70      7944           add r1, pc\r\n|     ,===< 0x00598f72      08bf           it eq\r\n-----------------------------------------------------------------------------------------------------------------------\t\t#KB it done\r\n\r\n|     `---> 0x00598f74      1146           mov r1, r2\r\n|      ||   0x00598f76      6af600eb       blx sym.imp.fopen\r\n|      ||   0x00598f7a      0446           mov r4, r0\r\n|     ,===< 0x00598f7c      9cb3           cbz r4, 0x598fe6\r\n```\r\n\r\n```\r\nalso invalid @ address 599118\r\nds_disassemble ds->at: 599118\t ds->asmop.buf_asm: invalid\tds_disassemble: call r_parse_parse\treplace2: 0 \r\n\r\n|       |   0x0059910a      7844           add r0, pc\r\n|       |      ; JMP XREF from 0x00598fc0 (method.cocos2d::FileUtilsAndroid.getData(std::stringconst&,bool))\r\n\r\n-----------------------------------------------------------------------------------------------------------------------\t\t#KB from b\r\n|       `-> 0x0059910c      0068           ldr r0, [r0]\r\n|           0x0059910e      0799           ldr r1, [sp + local_1ch]\r\n|           0x00599110      0068           ldr r0, [r0]\r\n|           0x00599112      401a           subs r0, r0, r1\r\n|       ,=< 0x00599114      04bf           itt eq\r\n-----------------------------------------------------------------------------------------------------------------------\t\t#KB itt done\r\n\r\n|       `-> 0x00599116      08b0           add sp, 0x20\r\n\\           0x00599118      bde8f087       pop.w {r4, r5, r6, r7, r8, sb, sl, pc}\r\n```\r\n[pseudo_c_fix_notes.txt](https://github.com/radare/radare2/files/1604513/pseudo_c_fix_notes.txt)\r\n\r\n[pseudo_with_many_printfs_c.txt](https://github.com/radare/radare2/files/1604515/pseudo_with_many_printfs_c.txt)\r\n[ZN7cocos2d16FileUtilsAndroid7getData_c_04_fixed.txt](https://github.com/radare/radare2/files/1604518/ZN7cocos2d16FileUtilsAndroid7getData_c_04_fixed.txt)\r\n\r\n","createdAt":"2018-01-04T19:51:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-355381431","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NzA5NDgzMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can you send a pr?","createdAt":"2018-01-11T23:25:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-357094832","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NzI3MTE1OQ==","author":{"login":"beaumontk"},"authorAssociation":"NONE","body":"I think it better if you fix it from my mods.\r\nZip contains your version from repository, my new version and a diff.\r\n\r\n[01_mods_fix_psuedo_c.zip](https://github.com/radare/radare2/files/1626542/01_mods_fix_psuedo_c.zip)\r\n","createdAt":"2018-01-12T15:38:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-357271159","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2Mjg1MzY4MA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Can you send a PR @beaumontk ; ZIP with diff is really not adapted for reviewing code","createdAt":"2018-02-03T20:56:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-362853680","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2MjkxMjczMQ==","author":{"login":"beaumontk"},"authorAssociation":"NONE","body":"But I really don't want to change the source. It's best that someone who knows the code checks the mods and applies them. Pancake already started the fix, I just tried to improve it. I'm certain that he is the best person to do this.","createdAt":"2018-02-04T15:00:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-362912731","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2MjkxODIyMw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"It won't change the source...the repository doesn't allow anyone to push stuff like that, that's why Pull-requests exists. They allow us to review the code in proper manner... \r\n\r\nSo please use Pull-Request  https://help.github.com/articles/about-pull-requests/","createdAt":"2018-02-04T16:08:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-362918223","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NDU3Njk5Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"thats known issue, you may use r2dec or r2ghidra for a proper decompiler output, at some point i would like pdc in native r2 to work in a more reliable way but this requires a full rewrite","createdAt":"2020-01-15T09:39:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9080#issuecomment-574576992","viewerDidAuthor":false}],"number":9080,"title":"PDC misses chunks of assembler code"},{"body":"```\r\nradare2 2.2.0-git 16757 @ linux-x86-64 git.2.1.0-173-gf06a360\r\ncommit: f06a36097e7a310dbbc2ccd08f790119c31e100b build: 2017-12-19__18:44:21\r\n```\r\n\r\nWhile setting the base address with the `-B` switch in r2, it loads the base address fine. \r\n```\r\nâ””â”€â–ª radare2 -B 0x40000000 funmail \r\n -- The '?' command can be used to evaluate math expressions. Like this: '? (0x34+22)*4'\r\n[0x40000540]> ij~{bin.pic}\r\ntrue\r\n[0x40000540]> \r\n```\r\n\r\nBut not when the e flag is being set even after reloading the binary. \r\n```\r\nâ””â”€â–ª radare2 -e \"bin.baddr=0x40000000\" funmail \r\n -- Setup dbg.fpregs to true to visualize the fpu registers in the debugger view.\r\n[0x00000540]> ij~{bin.pic}\r\ntrue\r\n[0x00000540]> oo\r\n[0x00000540]>\r\n```\r\n\r\nThe same applies to setting `bin.baddr` from the console:\r\n```\r\nâ””â”€â–ª radare2 funmail \r\n -- Use scr.accel to browse the file faster!\r\n[0x00000540]> e bin.baddr = 0x40000000\r\n[0x00000540]> oo\r\n[0x00000540]>\r\n```\r\n\r\n**Additionally:** after the binary is loaded with `-B` and debugged, the base address gets thrown off. \r\n```\r\nâ””â”€â–ª radare2 -B 0x40000000 funmail \r\n -- The more 'a' you add after 'aa' the more analysis steps are executed.\r\n[0x40000540]> doo\r\nProcess with PID 11052 started...\r\nFile dbg:///vagrant/tuctf/rev/funmail  reopened in read-write mode\r\n= attach 11052 11052\r\nWARNING: bin_strings buffer is too big (0xffffffffa99de26c). Use -zzz or set bin.maxstrbuf (RABIN2_MAXSTRBUF) in r2 (rabin2)\r\nWARNING: bin_strings buffer is too big (0xffffffffa99dcf44). Use -zzz or set bin.maxstrbuf (RABIN2_MAXSTRBUF) in r2 (rabin2)\r\n11052\r\n[0xf77d1a20]> dcu main\r\nContinue until 0x56624b27 using 1 bpsize\r\nhit breakpoint at: 56624b27\r\n[0x56624b27]> s main\r\n[0x56624b27]> pd 4\r\n            ;-- main:\r\n            ;-- main:\r\n            ;-- eip:\r\n            0x56624b27      8d4c2404       lea ecx, esp + 4            ; 4\r\n            0x56624b2b      83e4f0         and esp, 0xfffffff0\r\n            0x56624b2e      ff71fc         push dword [ecx - 4]\r\n            0x56624b31      55             push ebp\r\n[0x56624b27]> ij~{bin.pic}\r\ntrue\r\n[0x56624b27]>\r\n```\r\n\r\nThe above is consistent with setting base address with `bin.baddr` also","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM1Mjg5ODU1Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I think bin.baddr should be deprecated. Theres a workteam on rbin, so iâ€™ll discuss that with them and see what we do with it\n\n> On 19 Dec 2017, at 19:54, securisec <notifications@github.com> wrote:\n> \n> radare2 2.2.0-git 16757 @ linux-x86-64 git.2.1.0-173-gf06a360\n> commit: f06a36097e7a310dbbc2ccd08f790119c31e100b build: 2017-12-19__18:44:21\n> While setting the base address with the -B switch in r2, it loads the base address fine.\n> \n> â””â”€â–ª radare2 -B 0x40000000 funmail \n>  -- The '?' command can be used to evaluate math expressions. Like this: '? (0x34+22)*4'\n> [0x40000540]> ij~{bin.pic}\n> true\n> [0x40000540]> \n> But not when the e flag is being set even after reloading the binary.\n> \n> â””â”€â–ª radare2 -e \"bin.baddr=0x40000000\" funmail \n>  -- Setup dbg.fpregs to true to visualize the fpu registers in the debugger view.\n> [0x00000540]> ij~{bin.pic}\n> true\n> [0x00000540]> oo\n> [0x00000540]>\n> The same applies to setting bin.baddr from the console:\n> \n> â””â”€â–ª radare2 funmail \n>  -- Use scr.accel to browse the file faster!\n> [0x00000540]> e bin.baddr = 0x40000000\n> [0x00000540]> oo\n> [0x00000540]>\n> Additionally: after the binary is loaded with -B and debugged, the base address gets thrown off.\n> \n> â””â”€â–ª radare2 -B 0x40000000 funmail \n>  -- The more 'a' you add after 'aa' the more analysis steps are executed.\n> [0x40000540]> doo\n> Process with PID 11052 started...\n> File dbg:///vagrant/tuctf/rev/funmail  reopened in read-write mode\n> = attach 11052 11052\n> WARNING: bin_strings buffer is too big (0xffffffffa99de26c). Use -zzz or set bin.maxstrbuf (RABIN2_MAXSTRBUF) in r2 (rabin2)\n> WARNING: bin_strings buffer is too big (0xffffffffa99dcf44). Use -zzz or set bin.maxstrbuf (RABIN2_MAXSTRBUF) in r2 (rabin2)\n> 11052\n> [0xf77d1a20]> dcu main\n> Continue until 0x56624b27 using 1 bpsize\n> hit breakpoint at: 56624b27\n> [0x56624b27]> s main\n> [0x56624b27]> pd 4\n>             ;-- main:\n>             ;-- main:\n>             ;-- eip:\n>             0x56624b27      8d4c2404       lea ecx, esp + 4            ; 4\n>             0x56624b2b      83e4f0         and esp, 0xfffffff0\n>             0x56624b2e      ff71fc         push dword [ecx - 4]\n>             0x56624b31      55             push ebp\n> [0x56624b27]> ij~{bin.pic}\n> true\n> [0x56624b27]>\n> The above is consistent with setting base address with bin.baddr also\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-12-19T21:57:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/9051#issuecomment-352898552","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDUyNjczNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"but showing the baddr somewhere is useful, any idea where we can make this info available if we remove the dummy eval var?","createdAt":"2017-12-30T04:31:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9051#issuecomment-354526734","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2MDk5MjIxMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I think we should put baddr in the output of `i`. and remove the eval var. therefor readonly","createdAt":"2018-01-27T15:29:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9051#issuecomment-360992213","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MjU5MDQyMQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@trufae I think bin.baddr is already sort of read-only, right? It seems to me it is always ignored. Can we close this? Or, is this to track the effective making of `bin.baddr` readonly (with some sort of error message if someone tries to write into a read-only env var)?","createdAt":"2020-07-01T18:55:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9051#issuecomment-652590421","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MjY3Njg3Mg==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"No, the base address can be defined at loading time with -B or with -e bin.baddr, if you reopen the binary after changint e bin.baddr, the bininfo shuold be rebased, dont know if there's any test, but it will be worth to have","createdAt":"2020-07-01T22:27:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9051#issuecomment-652676872","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY1MjY3NzE3MA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"it's not readonly because its used to specify the base address to use when loading the next bin file.\r\n\r\nThis can be problematic when opening multiple files","createdAt":"2020-07-01T22:28:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9051#issuecomment-652677170","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY1MjgxODk4Ng==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Right. Then this is not working yet :(\r\n\r\n```\r\n$ radare2 -e bin.baddr=0x4000000 /bin/ls\r\n[0x000068a0]> oob\r\nFile /bin/ls reopened in read-only mode\r\n[0x040068a0]> \r\n```","createdAt":"2020-07-02T06:50:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/9051#issuecomment-652818986","viewerDidAuthor":false}],"number":9051,"title":"Base addresses not setting properly on PIE enabled binaries"},{"body":"I'm trying to save/reload project for the same binary `libmedia.so` I mentioned at #8969.\r\n\r\nWhen I try to reload the saved project I get a lot of output with repetitions of the following strings:\r\n```\r\nUnknown calling convention 'arm32'\r\nSee afcl for available types\r\n```\r\n\r\nAt the same time running `afcl` gives me:\r\n```\r\n[0x00024470]> afcl\r\narm32\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU1NzY3Nw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T06:24:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8978#issuecomment-644557677","viewerDidAuthor":false}],"number":8978,"title":"Can't reload a project for ARM binary"},{"body":"```\r\nmikhail@fall /tmp $ cat hi.c\r\nint main() {\r\n        write (1, \"Hello World\\n\", 12);\r\n        exit (0);\r\n}\r\n\r\nmikhail@fall /tmp $ ragg2-cc hi.c\r\ngcc -fPIC -fPIE -pie -fpic -m64 -nostdinc -include /usr/include/libr/sflib/linux-x86-64/sflib.h -z execstack -fomit-frame-pointer -finline-functions -fno-zero-initialized-in-bss -o hi.c.tmp -S -Os hi.c\r\nIn file included from /usr/include/libr/sflib/linux-x86-64/sflib.h:28:0,\r\n                 from <command-line>:31:\r\n/usr/include/libr/sflib/linux-x86-64/sflib.h:92:32: warning: conflicting types for built-in function â€˜exitâ€™\r\n static inline _sfsyscall1(int, exit, int, status)\r\n                                ^\r\n/usr/include/libr/sflib/linux-x86-64/sfsyscall.h:67:6: note: in definition of macro â€˜_sfsyscall1â€™\r\n type name(type1 arg1) {      \\\r\n      ^~~~\r\n==============================\r\ngcc -fPIC -fPIE -pie -fpic -m64 -nostdlib -Os -o hi.c.o hi.c.s\r\n/usr/lib/gcc/x86_64-pc-linux-gnu/6.4.0/../../../../x86_64-pc-linux-gnu/bin/ld: warning: cannot find entry symbol _start; defaulting to 0000000000000230\r\n/tmp/ccS0MRco.o: In function `main':\r\nhi.c:(.text+0x64): undefined reference to `__stack_chk_fail'\r\ncollect2: error: ld returned 1 exit status\r\nERROR: compile object\r\n```\r\nShould be added \"-fno-stack-protector\" and \"-lssp\" on those systems. Question is how to determine if there is a need for that automatically.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjk3Mg==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8976#issuecomment-644522972","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MjU5MzEyOA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@XVilka could you provide a working reproducer? This issue seems quite old. If you can't reproduce, please close.","createdAt":"2020-07-01T19:01:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8976#issuecomment-652593128","viewerDidAuthor":false}],"number":8976,"title":"ragg2 - link with SSP for hardened systems"},{"body":"```\r\nvagrant@vagrant:~$ r2 -D gdb gdb://127.0.0.1:4444 `which curl`\r\n= attach 6371 1\r\n= attach 6371 0\r\n -- Get a free shell with 'ragg2 -i exec -x'\r\n[0x00006dc0]> dc\r\n= attach 6371 0\r\n[+] signal 9 aka SIGKILL received 0\r\n[0x70000002]> dcb\r\ncannot continue back\r\n[0x70000002]>\r\n```\r\n```\r\nvagrant@vagrant:~$ r2 -D gdb gdb://127.0.0.1:4444 `which curl`\r\n= attach 6371 1\r\n= attach 6371 0\r\n -- Run .dmm* to load the flags of the symbols of all modules loaded in the debugger\r\n[0x00006dc0]> ds 16\r\n= attach 6371 6371\r\n[0x7f4c386849d6]> dsb\r\ncannot step back\r\n```\r\n\r\nExample session with gdb:\r\n\r\n```\r\nvagrant@vagrant:~$ gdb -q `which curl`\r\nReading symbols from /usr/bin/curl...(no debugging symbols found)...done.\r\n(gdb) target remote localhost:4444\r\nRemote debugging using localhost:4444\r\n0x00007f4c38683c30 in ?? ()\r\n(gdb) c\r\nContinuing.\r\n\r\nProgram received signal SIGKILL, Killed.\r\n0x0000000070000002 in ?? ()\r\n(gdb) rc\r\nContinuing.\r\n\r\nProgram stopped.\r\n0x00007f4c38683c30 in ?? ()\r\n(gdb) c\r\nContinuing.\r\n\r\nProgram received signal SIGKILL, Killed.\r\n0x0000000070000002 in ?? ()\r\n(gdb) rsi 1\r\n0x00007f4c3845a3ed in ?? ()\r\n(gdb) si\r\n0x0000000070000000 in ?? ()\r\n(gdb) rsi 16\r\n0x00007f4c38456be3 in ?? ()\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM0OTQ4MDkyMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"The gdb thing doesnt works like that but the crash must be fixed\n\n> On 6 Dec 2017, at 00:46, David Manouchehri <notifications@github.com> wrote:\n> \n> vagrant@vagrant:~$ r2 -D gdb gdb://127.0.0.1:4444 `which curl`\n> = attach 6371 1\n> = attach 6371 0\n>  -- Get a free shell with 'ragg2 -i exec -x'\n> [0x00006dc0]> dc\n> = attach 6371 0\n> [+] signal 9 aka SIGKILL received 0\n> [0x70000002]> dcb\n> cannot continue back\n> [0x70000002]>\n> vagrant@vagrant:~$ r2 -D gdb gdb://127.0.0.1:4444 `which curl`\n> = attach 6371 1\n> = attach 6371 0\n>  -- Run .dmm* to load the flags of the symbols of all modules loaded in the debugger\n> [0x00006dc0]> ds 16\n> = attach 6371 6371\n> [0x7f4c386849d6]> dsb\n> cannot step back\n> Example session with gdb:\n> \n> vagrant@vagrant:~$ gdb -q `which curl`\n> Reading symbols from /usr/bin/curl...(no debugging symbols found)...done.\n> (gdb) target remote localhost:4444\n> Remote debugging using localhost:4444\n> 0x00007f4c38683c30 in ?? ()\n> (gdb) c\n> Continuing.\n> \n> Program received signal SIGKILL, Killed.\n> 0x0000000070000002 in ?? ()\n> (gdb) rc\n> Continuing.\n> \n> Program stopped.\n> 0x00007f4c38683c30 in ?? ()\n> (gdb) c\n> Continuing.\n> \n> Program received signal SIGKILL, Killed.\n> 0x0000000070000002 in ?? ()\n> (gdb) rsi 1\n> 0x00007f4c3845a3ed in ?? ()\n> (gdb) si\n> 0x0000000070000000 in ?? ()\n> (gdb) rsi 16\n> 0x00007f4c38456be3 in ?? ()\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-12-05T23:51:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8966#issuecomment-349480920","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0OTQ4MjI1OQ==","author":{"login":"Manouchehri"},"authorAssociation":"CONTRIBUTOR","body":"The SIGKILL is expected. The remote gdb-server target is being provided by mozilla/rr.","createdAt":"2017-12-05T23:57:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8966#issuecomment-349482259","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0OTUwODM3Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@radare no, it's just a matter of supporting reverse debugging in gdb protocol, and connecting it with reverse step/continue commands.","createdAt":"2017-12-06T02:15:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/radareorg/radare2/issues/8966#issuecomment-349508376","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU1Mjk0MjA0NQ==","author":{"login":"yossizap"},"authorAssociation":"CONTRIBUTOR","body":">no, it's just a matter of supporting reverse debugging in gdb protocol, and connecting it with reverse step/continue commands\r\n\r\n@XVilka why should r2 depend on gdbserver's `record` implementation, which isn't always available, when it's possible to simply set the state from r2's history as in any other debugger?\r\n\r\nIt seems that a wrong implementation/usage of gdbserver's '[G](https://sourceware.org/gdb/onlinedocs/gdb/Packets.html#write-registers-packet)' (write registers) is the issue. Currently looking into this.\r\n\r\nFor reference, gdbserver's output after r_debug_session_set:\r\n`gdbserver: Wrong sized register packet (expected 1792 bytes, got 4)`\r\nPrinted by [registers_from_string](https://github.com/bminor/binutils-gdb/blob/master/gdb/gdbserver/regcache.c#L233) which is called by [gdb/gdbserver/server.c](https://github.com/bminor/binutils-gdb/blob/master/gdb/gdbserver/server.c#L4132)'s command parsing loop.","createdAt":"2019-11-12T15:26:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8966#issuecomment-552942045","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU1Mjk0NDcwNg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@yossizap it's not a requirement. Whatever works best. Thanks for working on this! ðŸ’¯ ","createdAt":"2019-11-12T15:31:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8966#issuecomment-552944706","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU1Mzg2NTYyMQ==","author":{"login":"yossizap"},"authorAssociation":"CONTRIBUTOR","body":"Solved the reg writing protocol issue in #15455 but it still doesn't work since [`r_reg_next_diff`](https://github.com/radareorg/radare2/blob/master/libr/reg/reg.c#L353) which is iterated on by [`r_debug_write_reg`](https://github.com/radareorg/radare2/blob/master/libr/debug/p/debug_gdb.c#L273) only returns rax and orig_rax, other registers can't be found in [`r_reg_get_at`](https://github.com/radareorg/radare2/blob/master/libr/reg/reg.c#L337) due to size and offset mismatches. \r\nTried simply writing `buf` with [`gdbr_write_bin_registers`](https://github.com/radareorg/radare2/blob/master/shlr/gdb/src/gdbclient/core.c#L959)(changed args to receive buf and len instead of taking it from `g->data`), as other debuggers do, but it wrote lots of wrong values instead. This seems very weird to me since afaik, that buf should be the same buf that read_regs returned, which is exactly how [`gdbr_write_reg` does it](https://github.com/radareorg/radare2/blob/master/shlr/gdb/src/gdbclient/core.c#L1070).\r\n\r\nI am probably missing something so I would appreciate some clues. Also seems that gdbr and qnx are the only ones using `r_reg_next_diff`, could be outdated? `dr` doesn't seem to have an issue finding the delta between commands but it compares two reg lists while dreg.c still uses bufs.","createdAt":"2019-11-14T12:26:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8966#issuecomment-553865621","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU1NTIzMjM5MQ==","author":{"login":"yossizap"},"authorAssociation":"CONTRIBUTOR","body":"Solved the previous issue but `dsb` is partially broken and `dcb` has issues when stepping back multiple times in a row, could be a limit on session size?","createdAt":"2019-11-18T22:09:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8966#issuecomment-555232391","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NDU3NTg5NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"fixed in master","createdAt":"2020-01-15T09:37:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8966#issuecomment-574575894","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NDU4NjQzMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Not completely - see the PR description, it supports only RR, but not the rest.","createdAt":"2020-01-15T10:02:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8966#issuecomment-574586431","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NDU4NzM4NA==","author":{"login":"yossizap"},"authorAssociation":"CONTRIBUTOR","body":"*RR and any other gdbserver with ReverseContinue and ReverseStep, could also work with r2 gdbserver etc.\r\n\r\nFor proper reverse debug with regular gdbserver we'll need to do it on r2's side by fixing dsb/dcb.","createdAt":"2020-01-15T10:04:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8966#issuecomment-574587384","viewerDidAuthor":false}],"number":8966,"title":"gdbserver reverse continue/step support"},{"body":"When I connect using ``gdb://`` debug handler to a network listening ``gdbserver`` instance, I cannot get the binary symbols using `is`. Perhaps related, I cannot locate any functions with ``afl``. There is simply no output for those commands.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM0ODY4MjIzMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"to get symbols you must load a binary and to list functions you need to analyze code. None of those things happen when you gdb:// for obvious reasons.\n\nYou can tell r2 to analyze code or load the symbols info from a local file\n\n> On 2 Dec 2017, at 04:49, bannsec <notifications@github.com> wrote:\n> \n> When I connect using gdb:// debug handler to a network listening gdbserver instance, I cannot get the binary symbols using is. Perhaps related, I cannot locate any functions with afl. There is simply no output for those commands.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-12-02T10:14:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8931#issuecomment-348682230","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0ODcwOTA5Nw==","author":{"login":"bannsec"},"authorAssociation":"CONTRIBUTOR","body":"Is there a way to tell r2 what the file you want to open from the command line, similar to gdb? For instance:\r\n\r\n```\r\nr2 -d gdb://<connection>:<port> <my_file>\r\n```\r\n\r\nFor the manual opening of the file after the fact, I'm assuming that's `o <filename>`? If so, how do you do that with PIC so that the symbols are actually at their load addresses?","createdAt":"2017-12-02T18:04:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8931#issuecomment-348709097","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0ODcwOTI2Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"The problem is that each can be mapped in different addresses on each run and there can be multiple files loaded. So you cant do this from there. But will work from the r2 shell using .!rabin2 -r or using the ob subcommands. Sorry im not in laptop to give you proper commands right now\n\n> On 2 Dec 2017, at 19:04, bannsec <notifications@github.com> wrote:\n> \n> Is there a way to tell r2 what the file you want to open from the command line, similar to gdb? For instance:\n> \n> r2 -d gdb://<connection>:<port> <my_file>\n> For the manual opening of the file after the fact, I'm assuming that's o <filename>? If so, how do you do that with PIC so that the symbols are actually at their load addresses?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-12-02T18:06:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8931#issuecomment-348709263","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0ODcxMTg1NA==","author":{"login":"bannsec"},"authorAssociation":"CONTRIBUTOR","body":"It would look like `dmm` would provide the needed loading commands, but it doesn't seem to load as expected:\r\n\r\n```\r\n[0xf77a7c60]> dmm*\r\nf mod._home_r2_radare_work_app17unix = 0x08048000\r\n.!rabin2 -rsB 0x08048000 '/home/r2/radare_work/app17unix'\r\nf mod._lib_i386_linux_gnu_ld_2.19.so = 0xf77a7000\r\n.!rabin2 -rsB 0xf77a7000 '/lib/i386-linux-gnu/ld-2.19.so'\r\n[0xf77a7c60]> .dmm*\r\n[0xf77a7c60]> is\r\n\r\n[0xf77a7c60]> f\r\n0x0804a11c 4 sym._IO_stdin_used\r\n0x08048548 16 sym.operatordelete_void__\r\n0x080485b8 16 sym.operatornew___unsignedint_\r\n0xf77a7000 0 sym.GLIBC_2.1\r\n0xf77b8760 30 sym._dl_get_tls_static_info\r\n0xf77a7000 0 sym.GLIBC_PRIVATE\r\n0xf77a7000 0 sym.GLIBC_2.3\r\n0xf77a7000 0 sym.GLIBC_2.4\r\n0xf77bc900 80 sym.free\r\n0xf77bc9d0 144 sym.realloc\r\n0xf77b8aa0 37 sym._dl_allocate_tls\r\n0xf77c8918 20 sym._r_debug\r\n0xf77c7f28 4 sym.__libc_stack_end\r\n0xf77bc770 268 sym.__libc_memalign\r\n0xf77b8ad0 133 sym._dl_deallocate_tls\r\n0xf77b9cb0 177 sym._dl_find_dso_for_object\r\n0xf77bc8b0 74 sym.calloc\r\n0xf77c7efc 4 sym._dl_argv\r\n0xf77b7fc0 550 sym._dl_mcount\r\n0xf77b8690 203 sym._dl_tls_setup\r\n0xf77b6750 2 sym._dl_debug_state\r\n0xf77b8e90 75 sym.___tls_get_addr\r\n0xf77c8040 2104 sym._rtld_global\r\n0xf77b8ee0 9 sym.__tls_get_addr\r\n0xf77b9280 150 sym._dl_make_stack_executable\r\n0xf77bc880 40 sym.malloc\r\n0xf77b8860 571 sym._dl_allocate_tls_init\r\n0xf77c7d20 468 sym._rtld_global_ro\r\n0xf77c7f2c 4 sym.__libc_enable_secure\r\n0xf77a7000 0 sym.GLIBC_2.0\r\n0xf77afcc0 473 sym._dl_rtld_di_serinfo\r\n[0xf77a7c60]> iR\r\n\r\n[0xf77a7c60]> il\r\n\r\n\r\n```\r\n\r\nWhen I load the binary directly with `r2`, i get the following results:\r\n\r\n```\r\n[0x08048600]> is\r\n[Symbols]\r\nvaddr=0x0804a11c paddr=0x0000211c ord=016 fwd=NONE sz=4 bind=GLOBAL type=OBJECT name=_IO_stdin_used\r\nvaddr=0x08048518 paddr=0x00000518 ord=001 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.sprintf\r\nvaddr=0x08048528 paddr=0x00000528 ord=002 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.getchar\r\nvaddr=0x08048538 paddr=0x00000538 ord=003 fwd=NONE sz=16 bind=WEAK type=NOTYPE name=imp.__gmon_start__\r\nvaddr=0x00000000 paddr=0x00000000 ord=004 fwd=NONE sz=16 bind=WEAK type=NOTYPE name=imp._Jv_RegisterClasses\r\nvaddr=0x08048548 paddr=0x00000548 ord=005 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=operatordelete(void*)\r\nvaddr=0x08048558 paddr=0x00000558 ord=006 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.putchar\r\nvaddr=0x08048568 paddr=0x00000568 ord=007 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.memset\r\nvaddr=0x08048578 paddr=0x00000578 ord=008 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.__libc_start_main\r\nvaddr=0x08048588 paddr=0x00000588 ord=009 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.tcgetattr\r\nvaddr=0x08048598 paddr=0x00000598 ord=010 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.strlen\r\nvaddr=0x080485a8 paddr=0x000005a8 ord=011 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.printf\r\nvaddr=0x080485b8 paddr=0x000005b8 ord=012 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=operatornew[](unsignedint)\r\nvaddr=0x080485c8 paddr=0x000005c8 ord=013 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.tcsetattr\r\nvaddr=0x080485d8 paddr=0x000005d8 ord=014 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.sscanf\r\nvaddr=0x080485e8 paddr=0x000005e8 ord=015 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.__gxx_personality_v0\r\n\r\n16 symbols\r\n\r\n[0x08048600]> il\r\n[Linked libraries]\r\nlibstdc++.so.6\r\nlibm.so.6\r\nlibgcc_s.so.1\r\nlibc.so.6\r\n\r\n4 libraries\r\n```","createdAt":"2017-12-02T18:49:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8931#issuecomment-348711854","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0ODcxNjAyMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":".dmm* loads the info as flags. Is will not show anything because it didnt loaded the bin inside r2. Just the flags\n\n> On 2 Dec 2017, at 19:49, bannsec <notifications@github.com> wrote:\n> \n> It would look like dmm would provide the needed loading commands, but it doesn't seem to load as expected:\n> \n> [0xf77a7c60]> dmm*\n> f mod._home_r2_radare_work_app17unix = 0x08048000\n> .!rabin2 -rsB 0x08048000 '/home/r2/radare_work/app17unix'\n> f mod._lib_i386_linux_gnu_ld_2.19.so = 0xf77a7000\n> .!rabin2 -rsB 0xf77a7000 '/lib/i386-linux-gnu/ld-2.19.so'\n> [0xf77a7c60]> .dmm*\n> [0xf77a7c60]> is\n> \n> [0xf77a7c60]> f\n> 0x0804a11c 4 sym._IO_stdin_used\n> 0x08048548 16 sym.operatordelete_void__\n> 0x080485b8 16 sym.operatornew___unsignedint_\n> 0xf77a7000 0 sym.GLIBC_2.1\n> 0xf77b8760 30 sym._dl_get_tls_static_info\n> 0xf77a7000 0 sym.GLIBC_PRIVATE\n> 0xf77a7000 0 sym.GLIBC_2.3\n> 0xf77a7000 0 sym.GLIBC_2.4\n> 0xf77bc900 80 sym.free\n> 0xf77bc9d0 144 sym.realloc\n> 0xf77b8aa0 37 sym._dl_allocate_tls\n> 0xf77c8918 20 sym._r_debug\n> 0xf77c7f28 4 sym.__libc_stack_end\n> 0xf77bc770 268 sym.__libc_memalign\n> 0xf77b8ad0 133 sym._dl_deallocate_tls\n> 0xf77b9cb0 177 sym._dl_find_dso_for_object\n> 0xf77bc8b0 74 sym.calloc\n> 0xf77c7efc 4 sym._dl_argv\n> 0xf77b7fc0 550 sym._dl_mcount\n> 0xf77b8690 203 sym._dl_tls_setup\n> 0xf77b6750 2 sym._dl_debug_state\n> 0xf77b8e90 75 sym.___tls_get_addr\n> 0xf77c8040 2104 sym._rtld_global\n> 0xf77b8ee0 9 sym.__tls_get_addr\n> 0xf77b9280 150 sym._dl_make_stack_executable\n> 0xf77bc880 40 sym.malloc\n> 0xf77b8860 571 sym._dl_allocate_tls_init\n> 0xf77c7d20 468 sym._rtld_global_ro\n> 0xf77c7f2c 4 sym.__libc_enable_secure\n> 0xf77a7000 0 sym.GLIBC_2.0\n> 0xf77afcc0 473 sym._dl_rtld_di_serinfo\n> [0xf77a7c60]> iR\n> \n> [0xf77a7c60]> il\n> \n> \n> When I load the binary directly with r2, i get the following results:\n> \n> [0x08048600]> is\n> [Symbols]\n> vaddr=0x0804a11c paddr=0x0000211c ord=016 fwd=NONE sz=4 bind=GLOBAL type=OBJECT name=_IO_stdin_used\n> vaddr=0x08048518 paddr=0x00000518 ord=001 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.sprintf\n> vaddr=0x08048528 paddr=0x00000528 ord=002 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.getchar\n> vaddr=0x08048538 paddr=0x00000538 ord=003 fwd=NONE sz=16 bind=WEAK type=NOTYPE name=imp.__gmon_start__\n> vaddr=0x00000000 paddr=0x00000000 ord=004 fwd=NONE sz=16 bind=WEAK type=NOTYPE name=imp._Jv_RegisterClasses\n> vaddr=0x08048548 paddr=0x00000548 ord=005 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=operatordelete(void*)\n> vaddr=0x08048558 paddr=0x00000558 ord=006 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.putchar\n> vaddr=0x08048568 paddr=0x00000568 ord=007 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.memset\n> vaddr=0x08048578 paddr=0x00000578 ord=008 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.__libc_start_main\n> vaddr=0x08048588 paddr=0x00000588 ord=009 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.tcgetattr\n> vaddr=0x08048598 paddr=0x00000598 ord=010 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.strlen\n> vaddr=0x080485a8 paddr=0x000005a8 ord=011 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.printf\n> vaddr=0x080485b8 paddr=0x000005b8 ord=012 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=operatornew[](unsignedint)\n> vaddr=0x080485c8 paddr=0x000005c8 ord=013 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.tcsetattr\n> vaddr=0x080485d8 paddr=0x000005d8 ord=014 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.sscanf\n> vaddr=0x080485e8 paddr=0x000005e8 ord=015 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.__gxx_personality_v0\n> \n> 16 symbols\n> \n> [0x08048600]> il\n> [Linked libraries]\n> libstdc++.so.6\n> libm.so.6\n> libgcc_s.so.1\n> libc.so.6\n> \n> 4 libraries\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-12-02T19:58:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8931#issuecomment-348716022","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0ODcyMTYyMg==","author":{"login":"bannsec"},"authorAssociation":"CONTRIBUTOR","body":"So I have created a python function to load up all files after attaching to gdbserver:\r\n\r\n```python\r\ndef load_modules():\r\n    modules = r2.cmdj(\"dmmj\")\r\n    for module in modules:\r\n        r2.cmd(\"oba {addr:d} {file_name:s}\".format(file_name=module['file'], addr=module['address']))\r\n```\r\n\r\nManually running this after opening r2 using `#!python2 <script_file>.py` seems to work. However, attempting to run this on load does not:\r\n\r\n```\r\n$ r2 -d -c \"#!python2 /tmp/pwnyQHp7g.gdb.py\" gdb://127.0.0.1:33529\r\n= attach 9210 0\r\nTraceback (most recent call last):\r\n  File \"/tmp/pwnyQHp7g.gdb.py\", line 8, in <module>\r\n    load_modules()\r\n  File \"/tmp/pwnyQHp7g.gdb.py\", line 4, in load_modules\r\n    modules = r2.cmdj(\"dmmj\")\r\nNameError: global name 'r2' is not defined\r\n -- Execute a command on the visual prompt with cmd.vprompt\r\n[0xf778cc60]> \r\n```\r\n\r\nIt appears that the `r2pipe` instance is not being created in time for my script to use it.","createdAt":"2017-12-02T21:31:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8931#issuecomment-348721622","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0ODcyNTE0OQ==","author":{"login":"bannsec"},"authorAssociation":"CONTRIBUTOR","body":"So I've found out that if I run `#!python2` first, to get an interactive prompt, exit that prompt, then run my script again it works. However, that breaks the purpose of trying to run this right off the bat.\r\n\r\nExample:\r\n\r\n```\r\n= attach 10153 0\r\nTraceback (most recent call last):\r\n  File \"/tmp/pwnHrcGmy.gdb.py\", line 12, in <module>\r\n    load_modules()\r\n  File \"/tmp/pwnHrcGmy.gdb.py\", line 6, in load_modules\r\n    modules = r2.cmdj(\"dmmj\")\r\nNameError: global name 'r2' is not defined\r\n -- Use 'e' and 't' in Visual mode to edit configuration and track flags.\r\n[0x7f4a77039130]> #!python2 /tmp/pwnHrcGmy.gdb.py\r\nTraceback (most recent call last):\r\n  File \"/tmp/pwnHrcGmy.gdb.py\", line 12, in <module>\r\n    load_modules()\r\n  File \"/tmp/pwnHrcGmy.gdb.py\", line 6, in load_modules\r\n    modules = r2.cmdj(\"dmmj\")\r\nNameError: global name 'r2' is not defined\r\n[0x7f4a77039130]> #!python2\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 9, in <module>\r\nException: Cannot find IPython\r\n^D\r\n\r\n[0x7f4a77039130]> #!python2 /tmp/pwnHrcGmy.gdb.py\r\n[0x7f4a77039130]> is\r\n[Symbols]\r\nvaddr=0x56339a36c010 paddr=0x00002010 ord=016 fwd=NONE sz=8 bind=GLOBAL type=OBJECT name=stdout\r\nvaddr=0x56339a36b7fa paddr=0x002017fa ord=001 fwd=NONE sz=16 bind=WEAK type=NOTYPE name=imp._ITM_deregisterTMCloneTable\r\nvaddr=0x56339a16a7b0 paddr=0x000007b0 ord=002 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.puts\r\nvaddr=0x56339a16a7b8 paddr=0x000007b8 ord=003 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.__stack_chk_fail\r\nvaddr=0x56339a16a7c0 paddr=0x000007c0 ord=004 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.printf\r\nvaddr=0x56339a16a7c8 paddr=0x000007c8 ord=005 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.alarm\r\nvaddr=0x56339a36b7fa paddr=0x002017fa ord=006 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.__libc_start_main\r\nvaddr=0x56339a36b7fa paddr=0x002017fa ord=007 fwd=NONE sz=16 bind=WEAK type=NOTYPE name=imp.__gmon_start__\r\nvaddr=0x56339a16a7d0 paddr=0x000007d0 ord=008 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.prctl\r\nvaddr=0x56339a16a7d8 paddr=0x000007d8 ord=009 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.setvbuf\r\nvaddr=0x56339a16a7e0 paddr=0x000007e0 ord=010 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.perror\r\nvaddr=0x56339a36b7fa paddr=0x002017fa ord=011 fwd=NONE sz=16 bind=WEAK type=NOTYPE name=imp._Jv_RegisterClasses\r\nvaddr=0x56339a16a7e8 paddr=0x000007e8 ord=012 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.__isoc99_scanf\r\nvaddr=0x56339a16a7f0 paddr=0x000007f0 ord=013 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.exit\r\nvaddr=0x56339a36b7fa paddr=0x002017fa ord=014 fwd=NONE sz=16 bind=WEAK type=NOTYPE name=imp._ITM_registerTMCloneTable\r\nvaddr=0x56339a16a7f8 paddr=0x000007f8 ord=015 fwd=NONE sz=16 bind=WEAK type=FUNC name=imp.__cxa_finalize\r\n\r\n16 symbols\r\n\r\n[0x7f4a77039130]> \r\n```","createdAt":"2017-12-02T22:35:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8931#issuecomment-348725149","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0ODczMDY3Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Use -i instead of -c#!py...\n\nAlso wheres the r2=r2pipe.open() line in your script?\n\n> On 2 Dec 2017, at 23:35, bannsec <notifications@github.com> wrote:\n> \n> So I've found out that if I run #!python2 first, to get an interactive prompt, exit that prompt, then run my script again it works. However, that breaks the purpose of trying to run this right off the bat.\n> \n> Example:\n> \n> = attach 10153 0\n> Traceback (most recent call last):\n>   File \"/tmp/pwnHrcGmy.gdb.py\", line 12, in <module>\n>     load_modules()\n>   File \"/tmp/pwnHrcGmy.gdb.py\", line 6, in load_modules\n>     modules = r2.cmdj(\"dmmj\")\n> NameError: global name 'r2' is not defined\n>  -- Use 'e' and 't' in Visual mode to edit configuration and track flags.\n> [0x7f4a77039130]> #!python2 /tmp/pwnHrcGmy.gdb.py\n> Traceback (most recent call last):\n>   File \"/tmp/pwnHrcGmy.gdb.py\", line 12, in <module>\n>     load_modules()\n>   File \"/tmp/pwnHrcGmy.gdb.py\", line 6, in load_modules\n>     modules = r2.cmdj(\"dmmj\")\n> NameError: global name 'r2' is not defined\n> [0x7f4a77039130]> #!python2\n> Traceback (most recent call last):\n>   File \"<string>\", line 9, in <module>\n> Exception: Cannot find IPython\n> ^D\n> \n> [0x7f4a77039130]> #!python2 /tmp/pwnHrcGmy.gdb.py\n> [0x7f4a77039130]> is\n> [Symbols]\n> vaddr=0x56339a36c010 paddr=0x00002010 ord=016 fwd=NONE sz=8 bind=GLOBAL type=OBJECT name=stdout\n> vaddr=0x56339a36b7fa paddr=0x002017fa ord=001 fwd=NONE sz=16 bind=WEAK type=NOTYPE name=imp._ITM_deregisterTMCloneTable\n> vaddr=0x56339a16a7b0 paddr=0x000007b0 ord=002 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.puts\n> vaddr=0x56339a16a7b8 paddr=0x000007b8 ord=003 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.__stack_chk_fail\n> vaddr=0x56339a16a7c0 paddr=0x000007c0 ord=004 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.printf\n> vaddr=0x56339a16a7c8 paddr=0x000007c8 ord=005 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.alarm\n> vaddr=0x56339a36b7fa paddr=0x002017fa ord=006 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.__libc_start_main\n> vaddr=0x56339a36b7fa paddr=0x002017fa ord=007 fwd=NONE sz=16 bind=WEAK type=NOTYPE name=imp.__gmon_start__\n> vaddr=0x56339a16a7d0 paddr=0x000007d0 ord=008 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.prctl\n> vaddr=0x56339a16a7d8 paddr=0x000007d8 ord=009 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.setvbuf\n> vaddr=0x56339a16a7e0 paddr=0x000007e0 ord=010 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.perror\n> vaddr=0x56339a36b7fa paddr=0x002017fa ord=011 fwd=NONE sz=16 bind=WEAK type=NOTYPE name=imp._Jv_RegisterClasses\n> vaddr=0x56339a16a7e8 paddr=0x000007e8 ord=012 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.__isoc99_scanf\n> vaddr=0x56339a16a7f0 paddr=0x000007f0 ord=013 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.exit\n> vaddr=0x56339a36b7fa paddr=0x002017fa ord=014 fwd=NONE sz=16 bind=WEAK type=NOTYPE name=imp._ITM_registerTMCloneTable\n> vaddr=0x56339a16a7f8 paddr=0x000007f8 ord=015 fwd=NONE sz=16 bind=WEAK type=FUNC name=imp.__cxa_finalize\n> \n> 16 symbols\n> \n> [0x7f4a77039130]> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-12-03T00:24:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8931#issuecomment-348730676","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0ODczMDg3Ng==","author":{"login":"bannsec"},"authorAssociation":"CONTRIBUTOR","body":"I'm using the `r2` that is implicitly available from running the script with `#!python2`. My assumption was that was intentional functionality to allow you to talk to the application you're currently using.\r\n\r\nExplicitly adding that instantiation fixed the error.","createdAt":"2017-12-03T00:29:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8931#issuecomment-348730876","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0OTI1Njg2MQ==","author":{"login":"SrimantaBarua"},"authorAssociation":"CONTRIBUTOR","body":"1. Are you using the standard gdbserver or maybe something like lldb's debugserver?\r\n2. What is the target platform?\r\n3. If you're using `gdbserver` and the target is Linux, try `r2 -e dbg.exe.path=</path/to/local/file> -d gdb://host:port`","createdAt":"2017-12-05T10:08:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8931#issuecomment-349256861","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyNjYzMTk5Nw==","author":{"login":"abcSup"},"authorAssociation":"CONTRIBUTOR","body":"Hello @bannsec. Thank you for reporting the issue and I am here to check again if the issue is still ongoing. I appreciate that if you can help me to confirm it again with the latest `r2` or you can provide me with more details (steps, files, platforms) on how to reproduce the issue.\r\n\r\n`r2` has changed a lot since you reported the issue. I can confirm that doing `is` after connecting to a remote gdb will definitely output some symbols. Symbols are loaded from the binary via the gdb connection when connecting.\r\n\r\n```\r\n$ gdbserver host:4444 /bin/ls\r\n```\r\n```\r\n$ r2 -d gdb://localhost:4444\r\n= attach 4300 1\r\n= attach 4300 0\r\n -- How about a nice game of chess?\r\n[0x7ffff7dd6090]> is\r\n[Symbols]\r\nnth paddr       vaddr          bind   type   size lib name\r\nâ€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•\r\n119  ---------- 0x00220280     GLOBAL OBJ    8        __progname\r\n120  0x000201e0 0x5555557741e0 GLOBAL OBJ    4        ls_mode\r\n121  0x0001636c 0x55555556a36c GLOBAL FUNC   0        _fini\r\n122  ---------- 0x00220290     GLOBAL OBJ    4        optind\r\n123  0x00003758 0x555555557758 GLOBAL FUNC   0        _init\r\n124  ---------- 0x002202a8     WEAK   OBJ    8        program_invocation_name\r\n125  ---------- 0x00220268     GLOBAL NOTYPE 0        __bss_start\r\n------------------------------snipped------------------------------\r\n[0x7ffff7dd6090]> \r\n```","createdAt":"2020-05-11T10:58:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8931#issuecomment-626631997","viewerDidAuthor":false}],"number":8931,"title":"gdbserver symbols?"},{"body":"**TODO:**\r\nWrite a r2r test for https://github.com/radare/radare2/issues/8679\r\nWill try to do it asap.\r\n\r\n\r\ncc @h4ng3r ","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMzNzIwNjI3MA==","author":{"login":"h4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"thank you ;)\r\n","createdAt":"2017-10-17T11:49:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15580#issuecomment-337206270","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2MzMwNjUzNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Cc @enovella can u provide a test?\n\n> On 9 Dec 2019, at 14:28, Eduardo Novella <notifications@github.com> wrote:\n> \n> ï»¿\n> TODO:\n> Write a r2r test for #8679\n> Will try to do it asap.\n> \n> cc @h4ng3r\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2019-12-09T16:01:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/15580#issuecomment-563306535","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2MzMyNzE0Mg==","author":{"login":"enovella"},"authorAssociation":"CONTRIBUTOR","body":"Sure! Let me find some time this week","createdAt":"2019-12-09T16:46:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15580#issuecomment-563327142","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2MzM4NzY2Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"thanks!\n\nOn Mon, 9 Dec 2019 at 17:46, Eduardo Novella <notifications@github.com>\nwrote:\n\n> Sure! Let me find some time this week\n>\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/radareorg/radare2/issues/15580?email_source=notifications&email_token=AAG75FUVYTA3FLBWCDL3ANLQXZY6FA5CNFSM4JYJFMM2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEGJ3BJQ#issuecomment-563327142>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AAG75FVHS5BJTZP2ON7XOY3QXZY6FANCNFSM4JYJFMMQ>\n> .\n>\n\n\n-- \n--pancake\n","createdAt":"2019-12-09T19:13:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15580#issuecomment-563387662","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MjYxMDgyNQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@enovella was this done? If you can provide it, please do so but if you don't have time no problem, though I would say we can close this issue as it doesn't really track anything.","createdAt":"2020-07-01T19:42:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15580#issuecomment-652610825","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MjY3NTYzMA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I think it will be intersting to have the ability to rename symbols and class/methods and other info from RBin, and update the flags accordingly, in dalvik, the rbin info is used by the disassembler to show the right strings and resolve the pointers for references.\r\n\r\nOn obfuscated binaries it will be interesting to have the ability to rename packages, class, method and fielkd names, so it makes it easier for grepping and such. I guess this can be also interesting for decompilers like r2dec or maybe r2ghidra, but ghidra's dalvik decompiler is not good","createdAt":"2020-07-01T22:24:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15580#issuecomment-652675630","viewerDidAuthor":true}],"number":15580,"title":"[DEX] Add test for non-ASCII characters on obfuscated APKs"},{"body":"**Description of issue:**\r\nAfter opening a previously saved project, I cannot re-name flags from visual mode (using key combo d-n) until the analysis is re-run (which in turns erases previously re-named flags). The difference being:\r\n\r\n* On a new project (or after re-running analysis either through \"aaa\" or \"afva\") using \"d-n\" while at a local variable\r\n`New variable name for 'local_78h:`\r\n* After re-opening a project, \"d-n\" at the same offset\r\n`Create flag at 0xffffffffffffff88 named:`\r\n\r\nRe-naming local vars using afvn works properly - vars can be re-named and saved without re-running analysis. Re-naming functions (in visual mode) works properly as well.\r\n\r\n**r2 versions and OS versions used:**\r\nI am using the latest (at this time) version of r2\r\n`radare2 2.1.0-git 16311 @ darwin-x86-64 git.2.0.1-22-g3b2b59250\r\ncommit: 3b2b592506809d4dcfed7c7cff29dd8fa2c2e9d1 build: 2017-10-16__17:20:42` \r\n\r\nThe issue happened to me on macOS 10.13, Fedora 26 x64 and Xubuntu 16.04 x64.\r\n\r\nI am including the project dir (taken from the macOS machine). The binary in use is IOLI crackme0x05, downloaded from RPISEC \"Modern Binary Exploitation\" course at http://security.cs.rpi.edu/courses/binexp-spring2015/lectures/2/challenges.zip\r\n\r\n[crackme0x05.zip](https://github.com/radare/radare2/files/1388128/crackme0x05.zip)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMzOTYzODMzNQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"I reproduce, this happen when the function is defined with afb+ which is what used in project files","createdAt":"2017-10-26T11:39:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8697#issuecomment-339638335","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2Mjg5OTc3MQ==","author":{"login":"Kerat"},"authorAssociation":"NONE","body":"Still relevant","createdAt":"2019-02-12T19:27:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8697#issuecomment-462899771","viewerDidAuthor":false}],"number":8697,"title":"Renaming flags after re-opening a project does not work in visual mode, works with \"afvn\" "},{"body":"See https://github.com/radare/radare2/issues/4888 for context.\r\n\r\nSeveral linux systems split debug symbols from executables and installs them under `/usr/lib/debug/` e.g. `/usr/path/to/bin/cmd` has symbols at `/usr/lib/debug/usr/path/to/bin/cmd`. radare2 1.6.0 doesn't appear to load these symbols. The symbols for calls are missing, attemping to seek, `s`, to a function fails, etc. On the other hand, gdb automatically loads the symbols from these files.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMzNTA2NzEyMg==","author":{"login":"lucianposton"},"authorAssociation":"NONE","body":"Also, `ob /usr/lib/debug/usr/path/to/bin/cmd` doesn't appear to manually load the symbols either.","createdAt":"2017-10-09T05:01:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8666#issuecomment-335067122","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzNTExMjY1OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Code from https://github.com/radare/radare2/blob/master/libr/core/linux_heap_glibc.c#L213 should be generalized for using anywhere in RBin.","createdAt":"2017-10-09T09:55:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8666#issuecomment-335112659","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzNTExODAxNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"same goes for jemalloc\n> On 9 Oct 2017, at 11:55, Anton Kochkov <notifications@github.com> wrote:\n> \n> Code from https://github.com/radare/radare2/blob/master/libr/core/linux_heap_glibc.c#L213 <https://github.com/radare/radare2/blob/master/libr/core/linux_heap_glibc.c#L213> should be generalized for using anywhere in RBin.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/8666#issuecomment-335112659>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-llQjNNx1umEoctrJh5SM4LFJ_A_Lks5sqe2OgaJpZM4Px_vA>.\n> \n\n","createdAt":"2017-10-09T10:21:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8666#issuecomment-335118015","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzNTI4NjIzNw==","author":{"login":"lucianposton"},"authorAssociation":"NONE","body":"In the meantime, is there a workaround to manually load symbols in version 2.0.0?\r\n\r\n`o /usr/lib/debug/usr/path/to/bin/cmd` doesn't work. After issuing the preceding command, there is no error output, no new files are listed by `o`, and no symbols appear to have been loaded.","createdAt":"2017-10-09T20:58:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8666#issuecomment-335286237","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzNzE1NTM2OQ==","author":{"login":"tbarabosch"},"authorAssociation":"NONE","body":"@lucianposton I care too know as well. Did you find a solution?","createdAt":"2017-10-17T08:21:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8666#issuecomment-337155369","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzNzE3MzczMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":".!rabin2 -r ....\r\n\r\nBut you can use the ob subcommands too","createdAt":"2017-10-17T09:28:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8666#issuecomment-337173733","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzNzQzNTYwMw==","author":{"login":"lucianposton"},"authorAssociation":"NONE","body":"> I care too know as well. Did you find a solution?\r\n\r\nNope. The `ob` command didn't load any symbols as far as I could tell.\r\n\r\nI haven't yet tried the `.!rabin2 -r ...` suggestion above.","createdAt":"2017-10-18T01:41:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8666#issuecomment-337435603","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzNzUxODI4OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Ob by itself doesnt do anything. Check the help message\n\n> On 18 Oct 2017, at 03:41, lucianposton <notifications@github.com> wrote:\n> \n> I care too know as well. Did you find a solution?\n> \n> Nope. The ob command didn't load any symbols as far as I could tell.\n> \n> I haven't yet tried the .!rabin2 -r ... suggestion above.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-10-18T09:14:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8666#issuecomment-337518289","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzNzYzNzg3OQ==","author":{"login":"lucianposton"},"authorAssociation":"NONE","body":"oops. I meant to say `o /usr/lib/debug/usr/path/to/bin/cmd` didn't load the symbols, and `ob`, which is supposed to list opened files, did lis anything new after `o`.","createdAt":"2017-10-18T15:52:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8666#issuecomment-337637879","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzNzcyNDExMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Nope, o opens a binary, replacing the current one, so nope\n\nOb doesnt lists the opened files. It lists the bin objects and u can use it to load the bin info of that bin on top of the current opened file\n\nAlso, historically this has been done via .!rabin2... since the very first versions of r1.\n\nWhich distro are u using to have test this?\n\n> On 18 Oct 2017, at 17:52, lucianposton <notifications@github.com> wrote:\n> \n> oops. I meant to say o /usr/lib/debug/usr/path/to/bin/cmd didn't load the symbol, and ob, which is supposed to list opened files, did lis anything new after o.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-10-18T20:51:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8666#issuecomment-337724110","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1Mzc5NTExMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"related to the dmi issue","createdAt":"2017-12-24T17:19:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8666#issuecomment-353795113","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5otIvg","author":{"login":"agausmann"},"authorAssociation":"NONE","body":"A workaround I've found is to recombine the executable and debug info into a single file.\r\n\r\nCan be done with `eu-unstrip` from elfutils:\r\n\r\n```\r\neu-unstrip /usr/bin/cmd /usr/lib/debug/usr/bin/cmd -o cmd.dbg\r\n```\r\n","createdAt":"2023-10-11T02:43:32Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8666#issuecomment-1756662752","viewerDidAuthor":false}],"number":8666,"title":"Symbols in /usr/lib/debug aren't automatically loaded"},{"body":"```\r\n% cat profile.rr2\r\n#!/usr/bin/rarun2\r\narg1=BBBB\r\n```\r\n\r\n```\r\n % cat test.c\r\n#include <stdio.h>\r\n#include <string.h>\r\n\r\nint main(int argc, char *argv[])\r\n{\r\n    printf(argv[1]);\r\n}\r\n```\r\n\r\n```\r\n% r2 -R ../return2libc/profile.rr2 -d test -c \"ood AAAA; \"\r\n....\r\nFile dbg:///.../test  AAAA reopened in read-write mode\r\n= attach 6918 6918\r\nAssuming filepath /home/chrysh/code/ctf/tools/radare/learning/debugging/test\r\nContinue until 0x562aee78564a using 1 bpsize\r\nBBBBPTRACE_EVENT_EXIT pid=6918, status=0x0\r\n```\r\n\r\n**Expected behavior:** Prints AAAA.\r\n**Seen behavior:** Prints BBBB.\r\n\r\nBBBB is printed (passed in as arg1 in profile) instead of AAAA, which I thought was the argument to the reopened binary (see: File dbg:///.../test  **AAAA reopened** in read-write mode)?","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU1Nzc2NA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T06:24:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8639#issuecomment-644557764","viewerDidAuthor":false}],"number":8639,"title":"Profile overwrites ood argument"},{"body":"Recently, I had a strange issue with Radare2. I wanted to print virtual addresses of symbols in an ARM Linux ELF binary (binary is attached at the end of this text). I used Radare2 on OSX, and I got the following output when displaying the address for system():\r\n\r\nFor OSX:\r\n```\r\n$ r2 -v\r\nradare2 1.7.0-git 16189 @ darwin-x86-64 git.1.6.0-965-g427fff4\r\ncommit: 427fff4f6029d78cdc281da41d280f97f17f3b26 build: 2017-09-30__01:22:51\r\n \r\n$ r2 file.bin\r\n[0x00009720]> is~system\r\nvaddr=0x00009330 paddr=0x00001330 ord=022 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.system\r\n[0x00009720]> \r\n```\r\nAs we can see, r2 on OSX reports the address of system() as 0x9330 and the ELF entry point as 0x9720.\r\n \r\nThese addresses were actually incorrect. Curiously, I tried to run the same commands on Radare2 v1.7.0 on Linux. The Linux version displays the correct addresses:\r\n \r\n```\r\n$ r2 -v\r\nradare2 1.7.0-git 0 @ linux-x86-32 git.1.6.0-964-g87dc54a\r\ncommit: 87dc54aa11e36d5f64cc602eb79caee5f1aef6a8 build: 2017-09-29__21:34:54\r\n \r\n$ r2 file.bin\r\n[0x0000974c]> is~system\r\nvaddr=0x00009350 paddr=0x00001350 ord=022 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.system\r\n[0x0000974c]> \r\n```\r\nComparing with actual addresses using `gdb`\r\n```\r\n(gdb)  print system\r\n$1 = {<text variable, no debug info>} 0x9350 <system>\r\n(gdb)  print _start\r\n$2 = {<text variable, no debug info>} 0x974c <_start>\r\n```\r\n\r\nAddress of system() is 0x9350 and the ELF entry point is 0x974c.\r\n\r\n[file.bin.zip](https://github.com/radare/radare2/files/1350287/file.bin.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMzMzg1MDAyOQ==","author":{"login":"therealsaumil"},"authorAssociation":"NONE","body":"Follow up update. This behaviour isn't exhibited on all ARM ELF binaries. For example, here is another binary, where the addresses are accurately displayed. I have been unable to pinpoint what the exact difference is between `file.bin` and `file2.bin` yet.\r\n\r\n```nasm\r\n$ r2 file2.bin \r\n[0x00009870]> is~system\r\nvaddr=0x00009438 paddr=0x00001438 ord=023 fwd=NONE sz=16 bind=GLOBAL type=FUNC name=imp.system\r\n[0x00009870]> \r\n```\r\n\r\nComparing with actual addresses using `gdb`\r\n\r\n```python\r\n(gdb)  print system\r\n$1 = {<text variable, no debug info>} 0x9438 <system>\r\n(gdb)  print _start\r\n$2 = {<text variable, no debug info>} 0x9870 <_start>\r\n```\r\n\r\nIn this case, r2's addresses match those from gdb.\r\n[file2.bin.zip](https://github.com/radare/radare2/files/1352512/file2.bin.zip)\r\n","createdAt":"2017-10-03T13:57:04Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8633#issuecomment-333850029","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzNDE0MTIxOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cant reproduce, i get ..330 on linux and mac","createdAt":"2017-10-04T12:36:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8633#issuecomment-334141218","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzNDI5OTE3MA==","author":{"login":"therealsaumil"},"authorAssociation":"NONE","body":"The correct address for `system()` is `0x9350` as reported by `gdb` . I notice that I had an older build of r2 on my linux environment:\r\n\r\ndarwin-x86-64 git.1.6.0-965-g427fff4\r\nlinux-x86-32 git.1.6.0-964-g87dc54a\r\n\r\nupgrading to linux-x86-32 git.1.6.0-965-g427fff4 also causes the same problem to appear on my linux environment. I conclude that the problem isn't with radare on mac vs. linux as I once suspected it to be, but overall it is incorrectly reporting RVAs in some ARM ELF binaries, not all.","createdAt":"2017-10-04T21:46:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8633#issuecomment-334299170","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzNjA4Mjk3MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@therealsaumil can you provide the affected binary?","createdAt":"2017-10-12T10:06:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8633#issuecomment-336082971","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzNjA4NjkzOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Its here https://github.com/radare/radare2/files/1350287/file.bin.zip\n\n> On 12 Oct 2017, at 12:06, Anton Kochkov <notifications@github.com> wrote:\n> \n> @therealsaumil can you provide the affected binary?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-10-12T10:22:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8633#issuecomment-336086938","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0MDY3MjQ4Ng==","author":{"login":"therealsaumil"},"authorAssociation":"NONE","body":"@XVilka I tested it with `radare2 2.1.0-git 16423`. The issue still persists.","createdAt":"2017-10-31T06:28:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8633#issuecomment-340672486","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyMjYyMTYxNg==","author":{"login":"therealsaumil"},"authorAssociation":"NONE","body":"Issue still persists on `radare2 3.0.0-git 19597`\r\n\r\n```nasm\r\n$ r2 file.bin\r\n -- Error: cannot yank negative sleep\r\n[0x00009720]> is~system\r\n022 0x00001330 0x00009330 GLOBAL   FUNC   16 imp.system\r\n[0x00009720]>\r\n```\r\nThe correct address for `system()` is `0x9350`, and the correct `_start` address is `0x974c`","createdAt":"2018-09-19T02:02:08Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8633#issuecomment-422621616","viewerDidAuthor":false}],"number":8633,"title":"Incorrect virtual addresses from ARM binaries in Radare2 v1.7.0 on OSX"},{"body":"I have a binary file - firmware of 16bit x86 intel microcontroller. I set map of file:\r\n```\r\n:> om 3 0x3000:0x0000 0xb7890 0x0\r\n```\r\nNext step - emulation:\r\n```\r\n:> aei\r\n:> aeim\r\n:> s 0x3000:0x0000\r\n:> aeip\r\n:> ar\r\nip = 0x00000000\r\nax = 0x00000000\r\nbx = 0x00000000\r\ncx = 0x00000000\r\ndx = 0x00000000\r\nsp = 0x00008000\r\nbp = 0x00008000\r\nsi = 0x00000000\r\ndi = 0x00000000\r\nflags = 0x00000000\r\n:> ? cs\r\n0 0x0 00 0 0000:0000 0 \"\\0\" 00000000 0.0 0.000000f 0.000000\r\n```\r\nBut `cs` register setup in 0x0 and `ip` register setup 0x0 too instead `cs` = 0x3000, `ip` = 0x0000. I tried to setup registers manually, but nothing.\r\n\r\nSecond problem is wrong interpretation of `lcall` instruction, for example `lcall 0x3000:0x1d6` will jump to 0x0000:0x1d6 instead 0x3000:0x1d6.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMzMjcxODA5Mg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"For the latter problem - it's a regression, happening from time to time, thank you.\r\n\r\nPlease provide the sample file for debugging.","createdAt":"2017-09-28T03:32:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8600#issuecomment-332718092","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzMjc0ODc4NA==","author":{"login":"saruman9"},"authorAssociation":"NONE","body":"I can't provide file, which shown for example, but I found another file with the same issues.\r\n[ami_bios.zip](https://github.com/radare/radare2/files/1339789/ami_bios.zip)\r\n\r\nEmulation:\r\n```\r\n[f000:fff0]> om*\r\nom 3 0xf0000 0x10000 0x70000\r\n[f000:fff0]> aei\r\n[f000:fff0]> aeim\r\n[f000:fff0]> aeip\r\n[f000:fff0]> ar\r\nip = 0x0000fff0\r\nax = 0x00000000\r\nbx = 0x00000000\r\ncx = 0x00000000\r\ndx = 0x00000000\r\nsp = 0x00008000\r\nbp = 0x00008000\r\nsi = 0x00000000\r\ndi = 0x00000000\r\nflags = 0x00000000\r\n[f000:fff0]> ? cs\r\n0 0x0 00 0 0000:0000 0 \"\\0\" 00000000 0.0 0.000000f 0.000000\r\n```\r\nLong call:\r\n```\r\n        |   f000:5c42      9a5b040080     lcall 0x8000:0x45b           ;[1]\r\n\r\n```\r\nAfter pressing `1`:\r\n```\r\n            0000:8000      ff             invalid\r\n            0000:8001      ff             invalid\r\n            0000:8002      ff             invalid\r\n```","createdAt":"2017-09-28T07:12:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8600#issuecomment-332748784","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0ODExNDQ3Ng==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Hi! A lot has changed since you opened this issue. Could you please double-check whether the problem is still there? If not, please close this issues, otherwise just leave a comment here. Thanks again for opening this.","createdAt":"2020-06-23T12:30:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8600#issuecomment-648114476","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0ODE1NjU5NQ==","author":{"login":"saruman9"},"authorAssociation":"NONE","body":"The issue is still taking place:\r\n```\r\n[f000:fff0]> aei; aeim; aeip; ar; ?v cs\r\nip = 0x0000fff0\r\nax = 0x00000000\r\nbx = 0x00000000\r\ncx = 0x00000000\r\ndx = 0x00000000\r\nsp = 0x00008000\r\nbp = 0x00008000\r\nsi = 0x00000000\r\ndi = 0x00000000\r\nflags = 0x00000000\r\n0x0\r\n```\r\n\r\nBut second issue (wrong interpretation of `lcall` instruction) was resolved.\r\n\r\nVersion of r2: 7575d05252d051adbb0a62134ad7c21bbb9311ef","createdAt":"2020-06-23T13:42:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/8600#issuecomment-648156595","viewerDidAuthor":false}],"number":8600,"title":"Wrong 'aeip' result on 16bit x86"},{"body":"When I open a project r2 -p mypoject I get a bunch of errors with some numbers:\r\n\r\n> 0\r\n> 0\r\n> Cannot add reference to non-function\r\n> Cannot add reference to non-function\r\n> 1482\r\n\r\nI use latest version of radare2 from git repository on Arch Linux. This is list of steps to reproduce this bug.\r\n\r\n> r2 /bin/ls\r\n> aaa\r\n> Ps myproject\r\n> q\r\n> r2 -p myproject","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMzMTgzNTQ3Ng==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Hello,\r\n\r\nEnsure you are using radare2 from git, if you're unsure paste output of `r2 -v` here.\r\nTo install radare2 from git, first uninstall your version of radare2 and clean your distro. Then use `git clone https://github.com/radare/radare2 && cd radare2 && ./sys/install.sh`, verify your version and check if there is no error using `r2 -v`.","createdAt":"2017-09-25T10:02:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8582#issuecomment-331835476","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzMTg0MDA3MA==","author":{"login":""},"authorAssociation":"NONE","body":"Output of r2 -v\r\n>radare2 1.7.0-git 16152 @ linux-x86-64 git.1.6.0-928-gfa21d5702\r\n>commit: fa21d5702935cb733e900154d0a15e48ad8391d9 build: 2017-09-25__11:34:41\r\n\r\nI also modified line 2388 of libr/core/cmd_anal.c for debugging.\r\n> eprintf (\"Cannot add reference to non-function: %s\\n\", input);\r\n\r\nAnd I tried running some of commands manually (on file and on project). For example:\r\n>afxC 0x1471b 0x21fd50\r\n\r\nIt executes normally.\r\n\r\n","createdAt":"2017-09-25T10:23:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8582#issuecomment-331840070","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzMjkzODYzNg==","author":{"login":"saruman9"},"authorAssociation":"NONE","body":"It opens project with the same errors, even when not used `aaa`.","createdAt":"2017-09-28T19:24:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8582#issuecomment-332938636","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzOTYzOTEyMg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Single char fix https://github.com/radare/radare2/commit/7e9a97279ec69ddf4e6c98536c2d326f483950a2","createdAt":"2017-10-26T11:42:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8582#issuecomment-339639122","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0MjA3NzE3OQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"```\r\n0\r\n0\r\n```\r\n\r\nIs fixed the:\r\n\r\n```\r\nCannot add reference to non-function\r\n```\r\n\r\nStill here","createdAt":"2017-11-06T08:24:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8582#issuecomment-342077179","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1Mzc1NTk4Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"and now?","createdAt":"2017-12-24T00:15:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8582#issuecomment-353755983","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1Mzc3NzkyMg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"\"The Cannot add reference to non-function\" is still there","createdAt":"2017-12-24T10:54:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8582#issuecomment-353777922","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1Mzc3ODM2MQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"r2 /bin/ls\r\naaa\r\nPs proj\r\nq\r\nr2 -p proj","createdAt":"2017-12-24T11:07:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8582#issuecomment-353778361","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1Mzc3ODUxMA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Basically it says \"No file selected\" when typing `i`","createdAt":"2017-12-24T11:10:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8582#issuecomment-353778510","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2MTAyMjc1NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"this?\r\n\r\n<img width=\"612\" alt=\"screen shot 2018-01-28 at 00 02 48\" src=\"https://user-images.githubusercontent.com/917142/35477198-9adf92e2-03be-11e8-8459-bce0431df064.png\">\r\n","createdAt":"2018-01-27T23:03:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8582#issuecomment-361022754","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2MTAyMzA4NA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Try i","createdAt":"2018-01-27T23:09:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8582#issuecomment-361023084","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2MTAyMzQwNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"yeah because projects are broken and the bin info is not reloaded from the bin, but from the flags and sections info. We should add r_bin_obj_dump/restore to keep the state of all the rbinobjects loaded in a session and then loading them from the project. not a small task and needs rbin to be refactored (condret is working on that)","createdAt":"2018-01-27T23:16:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/radareorg/radare2/issues/8582#issuecomment-361023404","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUzODEzMA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T05:24:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8582#issuecomment-644538130","viewerDidAuthor":false}],"number":8582,"title":"Error messages when opening project (after using aaa)"},{"body":"Many data structures and protocols are actually bitstreams. While keeping current IO stack it make sense to provide bitstream-like access. We can take ideas from cLEMENCy plugin.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU1Nzc0Nw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T06:24:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8576#issuecomment-644557747","viewerDidAuthor":false}],"number":8576,"title":"Working with bitstreams - API, commands"},{"body":"- [ ] Support for the global variables https://github.com/radareorg/radare2/issues/11871\r\n- [ ] Support of applying \"tp\"/\"pf\" to the variable value directly by the name\r\n- [x] Integrate the stack/bp/register arguments into one command?\r\n- [x] Move to a separate namespace ( 'v' maybe?)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMzMDU0MTk1Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"global variables are flags or symbols\n\n\n> On 19 Sep 2017, at 06:33, Anton Kochkov <notifications@github.com> wrote:\n> \n>  Integrate the stack/bp/register arguments into one command?\n>  Support for the global variables\n>  Move to a separate namespace ( 'v' maybe?)\n>  Support of applying \"tp\"/\"pf\" to the variable value directly by the name\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/8565>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lkYlEZa4BOmFNhtwNRlFaOV7Ndmbks5sj0QxgaJpZM4Pb2C9>.\n> \n\n","createdAt":"2017-09-19T13:39:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8565#issuecomment-330541952","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM4OTQyMDIxOA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@sivaramaaa check also this one.","createdAt":"2018-05-16T07:19:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8565#issuecomment-389420218","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxNjk0ODM2MQ==","author":{"login":"oddcoder"},"authorAssociation":"CONTRIBUTOR","body":"I would like to add this one\r\n\r\n- [ ] detecting compound variables during the analysis like this one \r\n`mov byte [rbp + rax - 0x110], dl`\r\ncould be processes by analysis `aa` as:\r\n`mov byte [local_110h + rax], dl` ","createdAt":"2018-08-29T13:15:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8565#issuecomment-416948361","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxNjk1NTY4Mg==","author":{"login":"sivaramaaa"},"authorAssociation":"CONTRIBUTOR","body":"> detecting compound variables during the analysis like this one\r\n\r\n@oddcoder yes ,  i will try to solve this issue, shouldn't be difficult !\r\n\r\nThis is similar to this issue [#11117](https://github.com/radare/radare2/issues/11117)","createdAt":"2018-08-29T13:35:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8565#issuecomment-416955682","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyMjg3NTg2Mw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@radare I think global variables can be flags within a special namespace, same for constants, and when doing `afta` or similar analysis we should use that information too (if the type is attached). I suggest also to add a `tg` command which will add global entities: `tgc` will add a global constant, `tgv` will add a global variable. They also should support linking types to them. @sivaramaaa what do you think?","createdAt":"2018-09-19T16:48:52Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8565#issuecomment-422875863","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyMjg3OTY5OQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"+1 for this, make sure you add an alias under `afv` or at least a reference in `afv?` and the same under `tg?` for `afv` just to ease location of the commands.","createdAt":"2018-09-19T16:59:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8565#issuecomment-422879699","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyMzExNjg2Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"We csn do the same for local and global flags? Just different namespaces instead of name prefix change?\n\n> On 19 Sep 2018, at 18:48, Anton Kochkov <notifications@github.com> wrote:\n> \n> @radare I think global variables can be a flags within a special namespace, same for constants, and when doing afta or similar analysis we should use that information too (if the type is attached). I suggest also to add a tg command which will add global entities: tgc will add a global constant, tgv will add a global variable. They also should support linking types to them. @sivaramaaa what do you think?\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-09-20T09:45:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8565#issuecomment-423116863","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3Mzg3OTg0MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"moving to 3.5, @sivaramaaa have enough issues assigned for 3.4","createdAt":"2019-03-18T11:54:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8565#issuecomment-473879841","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzA3MDEyNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i think this issue needs to be rephrased and cleaned up. @XVilka can you do that? describe how to achieve each of the points to be done","createdAt":"2019-04-15T00:01:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8565#issuecomment-483070124","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyODg2NDY1OA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Required for retdec","createdAt":"2019-09-06T13:55:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8565#issuecomment-528864658","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY2NDM5NjgxMQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@trufae @XVilka which part do you expect @HoundThe / @oxcabe to work on exactly?\r\n@HoundThe @oxcabe which priority is it this for you? Right now this is marked for 4.6.0 (we don't know *exactly* when that is, but let's say in roughly 2 months?). Do you think it is possible by then? Do you have all the info required to perform the task?\r\n\r\n@XVilka Also, it would be really great if these kind of issues gets a bit more detail, otherwise they are as useful as \"let's improve radare2\". ","createdAt":"2020-07-27T13:28:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8565#issuecomment-664396811","viewerDidAuthor":false}],"number":8565,"title":" Better variables support"},{"body":"I'm working on a plugin for volatility that presents the memory image it opens as a FUSE volume where each directory is a view of a different process.  What I'm trying to do is then open one of these virtual memory file representations and be able to analyze PE files mapped at various locations in memory with r2.  Essentially, I'd like the same analysis performed on the file at a given memory location as if I had just loaded the PE file itself in r2.  I'm not sure if this is currently possible.  Some more details are below.  I will attach the zipped \"memory\" file referenced below or post it somewhere and link to it if it's too big.\r\n\r\nHere is the memory sample:\r\n\r\n<pre>$ ls -lh ~/mem_samples/cridex.vmem\r\n-rw-------@ 1 user  staff   512M Aug  1  2012 /Users/user/mem_samples/cridex.vmem</pre>\r\n\r\nAnd here is a volatility list of a process and its loaded DLLs: \r\n\r\n<pre>$ vol.py --plugins=. -f ~/mem_samples/cridex.vmem dlllist -p 1640\r\nVolatility Foundation Volatility Framework 2.6\r\n************************************************************************\r\nreader_sl.exe pid:   1640\r\nCommand line : \"C:\\Program Files\\Adobe\\Reader 9.0\\Reader\\Reader_sl.exe\"\r\nService Pack 3\r\n\r\nBase             Size  LoadCount LoadTime                       Path\r\n---------- ---------- ---------- ------------------------------ ----\r\n0x00400000     0xa000     0xffff                                C:\\Program Files\\Adobe\\Reader 9.0\\Reader\\Reader_sl.exe\r\n0x7c900000    0xaf000     0xffff                                C:\\WINDOWS\\system32\\ntdll.dll\r\n0x7c800000    0xf6000     0xffff                                C:\\WINDOWS\\system32\\kernel32.dll\r\n0x7e410000    0x91000     0xffff                                C:\\WINDOWS\\system32\\USER32.dll\r\n0x77f10000    0x49000     0xffff                                C:\\WINDOWS\\system32\\GDI32.dll\r\n...snip...</pre>\r\n\r\nRun the plugin to create a FUSE volume from the memory image:\r\n\r\n<pre>$ vol.py --plugins=. -f ~/mem_samples/cridex.vmem volfuse -m mount\r\nVolatility Foundation Volatility Framework 2.6\r\nCurrent context: System @ 0x823c89c8, pid=4, ppid=0 DTB=0x2fe000\r\nFUSE Volume is ready</pre>\r\n\r\nMount directory now contains a subdir for each process:\r\n\r\n<pre>$ ls -l mount\r\ntotal 0\r\n...snip...\r\ndrwxr-xr-x  2 root  wheel  0 Jul 21  2012 1220_svchost.exe\r\ndrwxr-xr-x  2 root  wheel  0 Jul 21  2012 1484_explorer.exe\r\ndrwxr-xr-x  2 root  wheel  0 Jul 21  2012 1512_spoolsv.exe\r\ndrwxr-xr-x  2 root  wheel  0 Jul 21  2012 1588_wuauclt.exe\r\ndrwxr-xr-x  2 root  wheel  0 Jul 21  2012 1640_reader_sl.exe\r\ndrwxr-xr-x  2 root  wheel  0 Jul 21  2012 368_smss.exe\r\ndrwxr-xr-x  2 root  wheel  0 Dec 31  1969 4_System\r\n...snip...</pre>\r\n\r\nChange into the process shown above and show the dlls and vads directory and the \"memory\" file which is the full 4GB virtual memory address space for this process.\r\n\r\n<pre>$ cd mount/1640_reader_sl.exe/\r\n$ ls -l\r\ntotal 8388608\r\ndrwxr-xr-x  2 root  wheel     0B Dec 31  1969 dlls\r\n-r--r--r--  0 root  wheel   4.0G Dec 31  1969 memory\r\ndrwxr-xr-x  2 root  wheel     0B Dec 31  1969 vads</pre>\r\n\r\nOpen the memory file with r2:\r\n\r\n<pre>$ r2 -n memory\r\n -- Use hasher to calculate hashes of portion blocks of a file\r\n[0x00000000]> oba 0x400000\r\n[0x00000000]> ie\r\n[Entrypoints]\r\n\r\n0 entrypoints</pre>\r\n\r\nTried doing this to load the PE file at 0x400000, but it doesn't seem to be working.  The file is there, however, along with other DLLs shown in the volatility pslist output at the top:\r\n\r\n<pre>[0x00000000]> px @ 0x400000\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x00400000  4d5a 9000 0300 0000 0400 0000 ffff 0000  MZ..............\r\n0x00400010  b800 0000 0000 0000 4000 0000 0000 0000  ........@.......\r\n0x00400020  0000 0000 0000 0000 0000 0000 0000 0000  ................\r\n0x00400030  0000 0000 0000 0000 0000 0000 f000 0000  ................\r\n0x00400040  0e1f ba0e 00b4 09cd 21b8 014c cd21 5468  ........!..L.!Th\r\n0x00400050  6973 2070 726f 6772 616d 2063 616e 6e6f  is program canno\r\n0x00400060  7420 6265 2072 756e 2069 6e20 444f 5320  t be run in DOS\r\n...snip...\r\n[0x00000000]> px @0x7c900000\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x7c900000  4d5a 9000 0300 0000 0400 0000 ffff 0000  MZ..............\r\n0x7c900010  b800 0000 0000 0000 4000 0000 0000 0000  ........@.......\r\n0x7c900020  0000 0000 0000 0000 0000 0000 0000 0000  ................\r\n0x7c900030  0000 0000 0000 0000 0000 0000 e000 0000  ................\r\n0x7c900040  0e1f ba0e 00b4 09cd 21b8 014c cd21 5468  ........!..L.!Th\r\n0x7c900050  6973 2070 726f 6772 616d 2063 616e 6e6f  is program canno\r\n0x7c900060  7420 6265 2072 756e 2069 6e20 444f 5320  t be run in DOS\r\n...snip...\r\n[0x00000000]> px @0x7c800000\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x7c800000  4d5a 9000 0300 0000 0400 0000 ffff 0000  MZ..............\r\n0x7c800010  b800 0000 0000 0000 4000 0000 0000 0000  ........@.......\r\n0x7c800020  0000 0000 0000 0000 0000 0000 0000 0000  ................\r\n0x7c800030  0000 0000 0000 0000 0000 0000 f000 0000  ................\r\n0x7c800040  0e1f ba0e 00b4 09cd 21b8 014c cd21 5468  ........!..L.!Th\r\n0x7c800050  6973 2070 726f 6772 616d 2063 616e 6e6f  is program canno\r\n0x7c800060  7420 6265 2072 756e 2069 6e20 444f 5320  t be run in DOS\r\n...snip...</pre>","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMzMDQxNDg5Nw==","author":{"login":"superponible"},"authorAssociation":"NONE","body":"[reader_sl_mem.zip](https://github.com/radare/radare2/files/1312914/reader_sl_mem.zip)\r\n\r\nAttached zip file is ~20M but will unzip to 4G.  It is the 1640_reader_sl.exe/memory file from the description above.","createdAt":"2017-09-19T03:03:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8563#issuecomment-330414897","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NTMwMDU2Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cc @skuater ","createdAt":"2018-01-04T14:47:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8563#issuecomment-355300567","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NTM4NjA5Nw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Check https://github.com/countercept/radare2-scripts","createdAt":"2018-01-04T20:10:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/8563#issuecomment-355386097","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY2NDQxNTcyNA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@GustavoLCR I see this is assigned to you. Do you think you'll be able to complete this for next release? I'm asking not to put pressure, just to try cleaning up a bit the issues that are assigned for the next milestone.","createdAt":"2020-07-27T14:03:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8563#issuecomment-664415724","viewerDidAuthor":false}],"number":8563,"title":"Analyzing mapped PE files in a process memory image"},{"body":"Is it possible to switch to write mode in the project?\r\n\r\nSave the project and restore it again (Ps [MyProject]; Po [MyProject])\r\n\r\n$ r2 -w MyFile\r\n....\r\n$ wx  ...                         ; Edit binaries\r\n$ Ps MyProject\r\n\r\n...\r\n$ r2 -p MyProject         ; Restore Project\r\n$ wx  ....                         ; Can be binary modified ?\r\n\r\nIs it only readable ?\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMyOTk2NDczOA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Try with oo+ to reopen in write mode","createdAt":"2017-09-16T12:10:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8535#issuecomment-329964738","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyOTk2OTU1Mg==","author":{"login":"snowKtTy"},"authorAssociation":"NONE","body":"Failed to write.\r\n\r\nIs there something wrong with it ?\r\n\r\nbeginner :~/Downloads/bin-linux/tmp$ r2 -v\r\nradare2 1.7.0-git 16080 @ linux-x86-32 git.1.6.0-856-gdeb7c07\r\ncommit: deb7c07c6327cb376b2e994ab024af0ff23d05cd build: 2017-09-16__09:28:42\r\n\r\n\r\n---------------------------------------------------------------------------------\r\n**beginner :~/Downloads/bin-linux/tmp$ r2 -w crackme0x01** \r\n\r\n[0x08048330]> px\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x08048330  31ed 5e89 e183 e4f0 5054 5268 d084 0408  1.^.....PTRh....\r\n[0x08048330]> Ps MyProject\r\nMyProject\r\n[0x08048330]> q\r\nDo you want to save the 'MyProject' project? (Y/n)\r\n\r\n----------------------------------------------------------------------------------\r\n**beginner :~/Downloads/bin-linux/tmp$ r2 -p MyProject**\r\n\r\n[0x08048330]> i ~mode\r\nmode     -r-x\r\n\r\n[0x08048330]> wx 9090909090\r\n[0x08048330]> px\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x08048330  31ed 5e89 e183 e4f0 5054 5268 d084 0408  1.^.....PTRh....\r\n\r\n**[0x08048330]> oo+**\r\n\r\n[0x08048330]> wx 9090909090\r\n[0x08048330]> px\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x08048330  31ed 5e89 e183 e4f0 5054 5268 d084 0408  1.^.....PTRh....\r\n\r\n[0x08048330]> i ~mode\r\nmode     -r-x\r\n[0x08048330]> e prj.name\r\nMyProject\r\n\r\n--------------------------------------------------------------------------------------\r\n\r\n\r\n\r\n","createdAt":"2017-09-16T13:51:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8535#issuecomment-329969552","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU1Nzc4Mw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T06:24:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8535#issuecomment-644557783","viewerDidAuthor":false}],"number":8535,"title":"Project Management questions "},{"body":"rep:\r\n   beq t0,zero,rep\r\n   bne t0,zero,rep\r\n\r\n \r\nAssembling with rasm2 -a mips|mips.gnu -b 32 the assembled is erroneous. Label 'rep' is not referenced correctly in both cases.\r\nLoading this source code with r2, the result is not the same code. I  think 'rep' label is not well referenced.\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMyNjI2ODA2Mw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Greetings,\r\nYou can also try keystone(http://keystone-engine.org) within radare2/rasm2 by installing the radare2 plugin via r2pm : \r\n\r\n```\r\n\tr2pm -i keystone-lib\r\n\tr2pm -i keystone\r\nthen\r\n\trasm2 -a mips.ksâ€¦\r\nor in radare2 session\r\n\te asm.assembler = mips.ks\r\n```","createdAt":"2017-08-31T11:30:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8389#issuecomment-326268063","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyNjM4NDkxMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I doubt keystone can fix this. Its an issue about replacing labels. Unlogic will chk it asap\n\n> On 31 Aug 2017, at 13:30, Maijin <notifications@github.com> wrote:\n> \n> Greetings,\n> You can also try keystone(http://keystone-engine.org) within radare2/rasm2 by installing the radare2 plugin via r2pm :\n> \n> \tr2pm -i keystone-lib\n> \tr2pm -i keystone\n> then\n> \trasm2 -a mips.ksâ€¦\n> or in radare2 session\n> \te asm.assembler = mips.ks\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-08-31T18:37:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8389#issuecomment-326384911","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyNjUzMDkxMA==","author":{"login":"Goyo2600"},"authorAssociation":"NONE","body":"using mips.ks don't fix the problem. I've checked it. When you load  in r2 the code assembled with mips.ks plugin  the result is the same","createdAt":"2017-09-01T09:09:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8389#issuecomment-326530910","viewerDidAuthor":false}],"number":8389,"title":"mips|mips.gnu plugin assembler error in branch labels?"},{"body":"Select **att** assembler syntax, and opcode is parsed in intel format.\r\n\r\n```\r\n$ rasm2 -s att -a x86 -b 64 -\r\nmov $0x4050,%eax         ----> at&t assembler syntax\r\nCannot assemble 'mov $0x4050,%eax' at line 3\r\n```\r\n\r\n```\r\n$ rasm2 -s att -a x86 -b 64 -\r\nmov eax,0x4050         ----> intel assembler syntax\r\nb850400000\r\n^C\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMyNDU3NzIzNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Theres no att assembler support yet\n\n> On 24 Aug 2017, at 08:20, Vex Woo <notifications@github.com> wrote:\n> \n> Select att assembler syntax, and opcode is parsed in intel format.\n> \n> $ rasm2 -s att -a x86 -b 64 -\n> mov $0x4050,%eax         ----> at&t assembler syntax\n> Cannot assemble 'mov $0x4050,%eax' at line 3\n> $ rasm2 -s att -a x86 -b 64 -\n> mov eax,0x4050         ----> intel assembler syntax\n> b850400000\n> ^C\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-08-24T09:01:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8291#issuecomment-324577235","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyNDU4MzYyMQ==","author":{"login":"nixawk"},"authorAssociation":"NONE","body":"Thanks @radare . ","createdAt":"2017-08-24T09:28:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8291#issuecomment-324583621","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMzA0MTQwMQ==","author":{"login":"imyxh"},"authorAssociation":"CONTRIBUTOR","body":"Curious: what would it take to add AT&T support? Is there guidance on what sort of functions should be modified/implemented?","createdAt":"2020-03-24T06:23:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8291#issuecomment-603041401","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxNTU0MTI0NA==","author":{"login":"imyxh"},"authorAssociation":"CONTRIBUTOR","body":"I'm no expert at C, but enough of a fan of att syntax that I'm trying to parse the source code myself. It looks like [r_asm_assemble()](https://github.com/radareorg/radare2/blob/35290dd51d815ed0e36623b1fba63c6f8a93bd84/libr/asm/asm.c#L570) doesn't check `a->syntax` before selecting an assembler. So I assume an assembler like x86.nasm or x86.nz is being selected.\r\n\r\nHowever, the x86.as plugin *does* [correctly check the syntax](https://github.com/radareorg/radare2/blob/d856b609a50262b29a3647acf5d8afcf2480c728/libr/asm/p/asm_x86_as.c#L29) when run:\r\n\r\n```\r\n$ rasm2 -a x86.as -s att \"movl %eax, %ebx\"\r\n89c3\r\n```\r\n\r\nIn fact, r_asm_plugin_x86_as.desc should probably be changed from \"Intel X86 GNU Assembler\" to \"X86 GNU Assembler,\" seeing that both Intel and GAS syntaxes are supported.\r\n\r\nPerhaps there should be a way for assembler plugins to advertise which syntaxes they support, so that r_asm_assemble() can correctly select one? In the `RAsmPlugin` struct, maybe?","createdAt":"2020-04-18T02:26:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8291#issuecomment-615541244","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxNTY5Mzc5OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Thats exactly what im doing in the r_arch PR\n\n> On 18 Apr 2020, at 04:27, Ian Huang <notifications@github.com> wrote:\n> \n> ï»¿\n> I'm no expert at C, but enough of a fan of att syntax that I'm trying to parse the source code myself. It looks like r_asm_assemble() doesn't check a->syntax before selecting an assembler. So I assume an assembler like x86.nasm or x86.nz is being selected.\n> \n> However, the x86.as plugin does correctly check the syntax when run:\n> \n> $ rasm2 -a x86.as -s att \"movl %eax, %ebx\"\n> 89c3\n> In fact, r_asm_plugin_x86_as.desc should probably be changed from \"Intel X86 GNU Assembler\" to \"X86 GNU Assembler,\" seeing that both Intel and GAS syntaxes are supported.\n> \n> Perhaps there should be a way for assembler plugins to advertise which syntaxes they support, so that r_asm_assemble() can correctly select one? In the RAsmPlugin struct, maybe?\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-04-18T07:43:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/8291#issuecomment-615693799","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs5Q5DF5","author":{"login":"createyourpersonalaccount"},"authorAssociation":"CONTRIBUTOR","body":"Is there interest in fixing this and what would one have to do?","createdAt":"2022-12-19T05:51:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8291#issuecomment-1357132153","viewerDidAuthor":false}],"number":8291,"title":"rasm2 - (att syntax mode) opcode is parsed by intel format."},{"body":"Hi,\r\n\r\n## Problem\r\nApparently, after analysis  some MIPS binaries do not contain xrefs to strings.\r\n\r\n## Radare2 pulled from Git\r\n```\r\n[22:54  tmp] > r2 -v\r\nradare2 1.7.0-git 15624 @ linux-x86-64 git.1.6.0-385-g622df1f\r\ncommit: 622df1fdce6877d214826388cbaa419241031d8f build: 2017-08-19__18:21:31\r\n```\r\n\r\n## Analysis\r\n```\r\n[22:54  tmp] > r2 libminiupnpd.so \r\n -- r2 talks to you. tries to make you feel well.\r\n[0x000017b0]> aaaa\r\n[read errro all flags starting with sym. and entry0 (aa)\r\nCannot find function 'entry0' at 0x000017b0\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\nread errro\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[ ] \r\n[aav: using from to 0x0 0x9a28\r\nUsing vmin 0xf4 and vmax 0x18d40\r\naav: using from to 0x0 0x9a28\r\nUsing vmin 0xf4 and vmax 0x18d40\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[x] Analyze function calls (aac)\r\n[x] Emulate code to find computed references (aae)\r\n[read errro consecutive function (aat)\r\n[x] Analyze consecutive function (aat)\r\n[x] Constructing a function name for fcn.* and sym.func.* functions (aan)\r\n[x] Type matching analysis for all functions (afta)\r\n[0x000017b0]> \r\n```\r\n\r\n## Missing xrefs to strings\r\n```\r\n[0x000075d0]> izq\r\n0x75d0 50 49 Failed to open socket for receiving SSDP. EXITING\r\n0x7604 17 16 socket(http): %m\r\n0x7618 35 34 setsockopt(http, SO_REUSEADDR): \r\n[0x000017b0]> s 0x75d0\r\n[0x000075d0]> pd 5\r\n            ;-- str.Failed_to_open_socket_for_receiving_SSDP._EXITING:\r\n            ;-- section_end..fini:\r\n            ;-- section..rodata:\r\n            0x000075d0     .string \"Failed to open socket for receiving SSDP. EXITING\" ; len=50 ; section 13 va=0x000075d0 pa=0x000075d0 sz=5152 vsz=5152 rwx=--r-- .rodata\r\n            0x00007602      0000           unaligned\r\n            0x00007603      00             unaligned\r\n            ;-- str.socket_http_:__m:\r\n            0x00007604     .string \"socket(http): %m\" ; len=17\r\n            0x00007615      353135         unaligned\r\n[0x000075d0]> \r\n```\r\n\r\n\r\n## MIPS binary to reproduce\r\n[libminiupnpd.so.zip](https://github.com/radare/radare2/files/1236655/libminiupnpd.so.zip)\r\n\r\nCheers","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMyMzU0NzQ0MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Hi! It's a known bug caused by migrating to siol. Currently ESIL is broken. ","createdAt":"2017-08-19T21:00:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-323547441","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyMzU0NzU2Mg==","author":{"login":"enovella"},"authorAssociation":"CONTRIBUTOR","body":"Hi @XVilka ,\r\n\r\nit is not only the `read errro `message but the missing xrefs to strings on MIPS binaries.This problem was found a month ago already. \r\n\r\nBest,\r\n enovella","createdAt":"2017-08-19T21:02:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-323547562","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyMzU0OTExMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"We are doing tons of breaking changes because there is no tomorrow.\n\nRollback some commits ago and if it was happening its an issue if not just keep calm and wait a bit. \n\n> On 19 Aug 2017, at 22:58, Eduardo Novella <notifications@github.com> wrote:\n> \n> Hi,\n> \n> Problem\n> \n> Apparently, after analysis some MIPS binaries do not contain xrefs to strings.\n> \n> Radare2 pulled from Git\n> \n> [22:54 dudu@azucaar tmp] > r2 -v\n> radare2 1.7.0-git 15624 @ linux-x86-64 git.1.6.0-385-g622df1f\n> commit: 622df1fdce6877d214826388cbaa419241031d8f build: 2017-08-19__18:21:31\n> Analysis\n> \n> [22:54 dudu@azucaar tmp] > r2 libminiupnpd.so \n>  -- r2 talks to you. tries to make you feel well.\n> [0x000017b0]> aaaa\n> [read errro all flags starting with sym. and entry0 (aa)\n> Cannot find function 'entry0' at 0x000017b0\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> read errro\n> [x] Analyze all flags starting with sym. and entry0 (aa)\n> [ ] \n> [aav: using from to 0x0 0x9a28\n> Using vmin 0xf4 and vmax 0x18d40\n> aav: using from to 0x0 0x9a28\n> Using vmin 0xf4 and vmax 0x18d40\n> [x] Analyze len bytes of instructions for references (aar)\n> [x] Analyze function calls (aac)\n> [x] Emulate code to find computed references (aae)\n> [read errro consecutive function (aat)\n> [x] Analyze consecutive function (aat)\n> [x] Constructing a function name for fcn.* and sym.func.* functions (aan)\n> [x] Type matching analysis for all functions (afta)\n> [0x000017b0]> \n> MIPS binary to reproduce\n> \n> libminiupnpd.so.zip\n> \n> Cheers\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-08-19T21:36:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-323549110","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyMzU3ODU0NQ==","author":{"login":"enovella"},"authorAssociation":"CONTRIBUTOR","body":"Hi @radare,\r\n\r\nthe issue was indeed happening a while ago. Also, totally understandable other priorities to be fixed first. :)\r\n\r\nCheers,\r\n   enovella","createdAt":"2017-08-20T11:14:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-323578545","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyMzYwODcwMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Did you tried just with aav?\n\n> On 20 Aug 2017, at 13:14, Eduardo Novella <notifications@github.com> wrote:\n> \n> Hi @radare,\n> \n> the issue was indeed happening a while ago. Also, totally understandable other priorities to be fixed first. :)\n> \n> Cheers,\n> enovella\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-08-20T20:09:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-323608701","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyNDM2OTM3MA==","author":{"login":"enovella"},"authorAssociation":"CONTRIBUTOR","body":"Hi @radare ,\r\n\r\n`aav` was tried with no luck in an old r2 installation (some months). Xrefs to strings are still missing.\r\n\r\nCheers","createdAt":"2017-08-23T15:18:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-324369370","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyNDk3MDE4OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"thatâ€™s because anal.gp points to unallocated memory. this depends on the loc._gp symbol, which is wrong.. or needs to be modified somehow. any pointers here? can you check what others tool do in this case?\n\nif i adjust the anal.gp to be 0x18a40 (instead of 0x20a40), which is inside the allocated memory, i get a bunch of string references in the disasselbmy\n\n> On 23 Aug 2017, at 17:18, Eduardo Novella <notifications@github.com> wrote:\n> \n> Hi @radare <https://github.com/radare> ,\n> \n> aav was tried with no luck in an old r2 installation (some months). Xrefs to strings are still missing.\n> \n> Cheers\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/8245#issuecomment-324369370>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lgkebUMiKw6iOoLHUYb3xZhCHxkpks5sbEK-gaJpZM4O8cP5>.\n> \n\n","createdAt":"2017-08-25T16:26:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-324970189","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyNDk3MDIzNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"![screen shot 2017-08-25 at 18 26 27](https://user-images.githubusercontent.com/917142/29722928-f62c7a28-89c2-11e7-95a7-79d8f2270b05.png)\r\n","createdAt":"2017-08-25T16:26:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-324970237","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyNTU3MTMwNA==","author":{"login":"enovella"},"authorAssociation":"CONTRIBUTOR","body":"Hi @radare,\r\n\r\nSorry for my little delay :). There's odd behaviour when printing xrefs in the binary. For instance;\r\n\r\nWe try to obtain xrefs in the first string, however we do not appreciate XREF in the string below.\r\n```\r\nFlags in flagspace 'strings'. Press '?' for help.\r\n\r\n >  000 0x000075d0   50 str.Failed_to_open_socket_for_receiving_SSDP._EXITING\r\n    001 0x00007604   17 str.socket_http_:__m\r\n    002 0x00007618   35 str.setsockopt_http__SO_REUSEADDR_:__m\r\n    003 0x0000763c   15 str.bind_http_:__m\r\n    004 0x0000764c   17 str.listen_http_:__m\r\n    005 0x00007660   40 str.Failed_to_open_socket_for_HTTP._EXITING\r\n    006 0x00007688   64 str.Failed_to_open_socket_for_sending_SSDP_notify_messages._EXITING\r\n    007 0x000076c8   19 str.gettimeofday__:__m\r\n    008 0x000076dc   16 str.select_all_:__m\r\n    009 0x000076ec   32 str.Failed_to_select_open_sockets.\r\n    010 0x0000770c   17 str.accept_http_:__m\r\n    011 0x00007720   27 str.HTTP_connection_from__s:_d\r\n    012 0x0000773c   22 str.New_upnphttp___failed\r\n    013 0x00007754   43 str.Failed_to_broadcast_good_bye_notifications\r\n\r\n Selected: str.Failed_to_open_socket_for_receiving_SSDP._EXITING\r\n\r\n            ;-- str.Failed_to_open_socket_for_receiving_SSDP._EXITING:\r\n            ;-- section_end..fini:\r\n            ;-- section..rodata:\r\n            0x000075d0     .string \"Failed to open socket for receiving SSDP. EXITING\" ; len=50 ; section 13 va=0x000075d0 pa=0x000075d0 sz=5152 vsz=5152 rwx=--r-- .rodata\r\n            0x00007602      0000           unaligned\r\n            0x00007603      00             unaligned\r\n            ;-- str.socket_http_:__m:\r\n            0x00007604     .string \"socket(http): %m\" ; len=17\r\n            0x00007615      000000         unaligned\r\n            0x00007616      0000           unaligned\r\n            0x00007617      00             unaligned\r\n```\r\n\r\nHowever, when **manually** jumping into the code that should have the xref, we see the xref in there:\r\n```\r\n[0x000075d0]> s 0x000022f8\r\n[0x000022f8]> pd 5\r\n|           0x000022f8      24a575d0       addiu a1, a1, str.Failed_to_open_socket_for_receiving_SSDP._EXITING\r\n|           0x000022fc      24020001       addiu v0, zero, 1\r\n|           0x00002300      8fbf01ac       lw ra, 0x1ac(sp)\r\n|           0x00002304      8fbe01a8       lw fp, 0x1a8(sp)\r\n|           0x00002308      8fb701a4       lw s7, 0x1a4(sp)\r\n```\r\n\r\nRegarding the global pointer pointing to unallocated memory, I need more time to analyze it. But I can confirm you that the strings you were showing me in the screenshot, they appear without adjusting the `$gp` and they are shown just analyzing the binary with `aa`.\r\n\r\nWill try to find some time to clearly spot the issue. Also, checking other binaries (attached goahead.zip) prove that xrefs are missing.\r\n\r\nCheers.\r\n\r\n\r\n[goahead.zip](https://github.com/radare/radare2/files/1259322/goahead.zip)\r\n","createdAt":"2017-08-29T06:49:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-325571304","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyNTYxMTQxMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"then its just a matter to solve the refs, but if they are shown in the disasm its just 50% of the issue :P\n\nim quite busy right now, but that shuold be easy to fix, maybe it gets fixed with other regressions in io. \n\n> On 29 Aug 2017, at 08:49, Eduardo Novella <notifications@github.com> wrote:\n> \n> Hi @radare <https://github.com/radare>,\n> \n> Sorry for my little delay :). There's odd behaviour when printing xrefs in the binary. For instance;\n> \n> We try to obtain xrefs in the first string, however we do not appreciate XREF in the string below.\n> \n> Flags in flagspace 'strings'. Press '?' for help.\n> \n>  >  000 0x000075d0   50 str.Failed_to_open_socket_for_receiving_SSDP._EXITING\n>     001 0x00007604   17 str.socket_http_:__m\n>     002 0x00007618   35 str.setsockopt_http__SO_REUSEADDR_:__m\n>     003 0x0000763c   15 str.bind_http_:__m\n>     004 0x0000764c   17 str.listen_http_:__m\n>     005 0x00007660   40 str.Failed_to_open_socket_for_HTTP._EXITING\n>     006 0x00007688   64 str.Failed_to_open_socket_for_sending_SSDP_notify_messages._EXITING\n>     007 0x000076c8   19 str.gettimeofday__:__m\n>     008 0x000076dc   16 str.select_all_:__m\n>     009 0x000076ec   32 str.Failed_to_select_open_sockets.\n>     010 0x0000770c   17 str.accept_http_:__m\n>     011 0x00007720   27 str.HTTP_connection_from__s:_d\n>     012 0x0000773c   22 str.New_upnphttp___failed\n>     013 0x00007754   43 str.Failed_to_broadcast_good_bye_notifications\n> \n>  Selected: str.Failed_to_open_socket_for_receiving_SSDP._EXITING\n> \n>             ;-- str.Failed_to_open_socket_for_receiving_SSDP._EXITING:\n>             ;-- section_end..fini:\n>             ;-- section..rodata:\n>             0x000075d0     .string \"Failed to open socket for receiving SSDP. EXITING\" ; len=50 ; section 13 va=0x000075d0 pa=0x000075d0 sz=5152 vsz=5152 rwx=--r-- .rodata\n>             0x00007602      0000           unaligned\n>             0x00007603      00             unaligned\n>             ;-- str.socket_http_:__m:\n>             0x00007604     .string \"socket(http): %m\" ; len=17\n>             0x00007615      000000         unaligned\n>             0x00007616      0000           unaligned\n>             0x00007617      00             unaligned\n> However, when jumping into the code that should have the xref, we see the xref in there:\n> \n> [0x000075d0]> s 0x000022f8\n> [0x000022f8]> pd 5\n> |           0x000022f8      24a575d0       addiu a1, a1, str.Failed_to_open_socket_for_receiving_SSDP._EXITING\n> |           0x000022fc      24020001       addiu v0, zero, 1\n> |           0x00002300      8fbf01ac       lw ra, 0x1ac(sp)\n> |           0x00002304      8fbe01a8       lw fp, 0x1a8(sp)\n> |           0x00002308      8fb701a4       lw s7, 0x1a4(sp)\n> Regarding the global pointer pointing to unallocated memory, I need more time to analyze it. But I can confirm you that the strings you were showing me in the screenshot, they appear without adjusting the $gp and they are shown just analyzing the binary with aa.\n> \n> Will try to find some time to clearly spot the issue. Also, checking other binaries (attached goahead.zip) prove that xrefs are missing.\n> \n> Cheers.\n> \n> goahead.zip <https://github.com/radare/radare2/files/1259322/goahead.zip>\n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/8245#issuecomment-325571304>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lmJILEJuVOMgJYKmImMpMXc89OWvks5sc7RzgaJpZM4O8cP5>.\n> \n\n","createdAt":"2017-08-29T09:40:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-325611413","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyODYwMzIzMg==","author":{"login":"enovella"},"authorAssociation":"CONTRIBUTOR","body":"I realized that the same issue occurs on ARM32 binaries. At least, when r2-ing the crackme \"validate\" of the OWASP crackmes.\r\n\r\n_Binary_: **validate**  https://github.com/OWASP/owasp-mstg/tree/master/Crackmes/Android/License_01","createdAt":"2017-09-11T17:39:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-328603232","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0NzYxNDkwOA==","author":{"login":"enovella"},"authorAssociation":"CONTRIBUTOR","body":"Any progress so far on this topic?  I see similar issue at https://github.com/radare/radare2/issues/8795","createdAt":"2017-11-28T18:17:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-347614908","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0NzYxNTk3NA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"https://github.com/radare/radare2-regressions/blob/master/t.anal/mips/mips-ref#L31 Creating test would speed-up process and ensure no regression @enovella ","createdAt":"2017-11-28T18:21:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-347615974","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0Nzk1MjE1NA==","author":{"login":"SrimantaBarua"},"authorAssociation":"CONTRIBUTOR","body":"`aa`, `aar` etc don't handle R_ANAL_OP_TYPE_ADD and so on for refs. So `addui` etc aren't resolved correctly, if at all.\r\niirc disasm checks refs, then falls back to checking the immediate value for a null-terminated string. That's why strings are seen in disasm.\r\n\r\nShould this be added to `aa`? Problem with adding this is that lots of incorrect refs will be generated for all add-type ops.","createdAt":"2017-11-29T18:29:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-347952154","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0ODExMzEzOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Add by itself is useless. You need more context to do so, and this context is provided by esil emulation. Aka aae, /re, and others\n\n> On 29 Nov 2017, at 19:29, Srimanta Barua <notifications@github.com> wrote:\n> \n> aa, aar etc don't handle R_ANAL_OP_TYPE_ADD and so on for refs. So addui etc aren't resolved correctly, if at all.\n> iirc disasm checks refs, then falls back to checking the immediate value for a null-terminated string.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-11-30T08:10:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-348113138","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0ODE4MTY3OQ==","author":{"login":"SrimantaBarua"},"authorAssociation":"CONTRIBUTOR","body":"In this case, the immediate value in the `addui` points to the string. Esil emulation helps with indirect references, but I don't see why it's needed here.","createdAt":"2017-11-30T13:01:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-348181679","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0ODE4NjI5NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Wat? Addui sums a delta to a base address. If u dont know that base address computed in previous instructions it will not work\n\n> On 30 Nov 2017, at 14:01, Srimanta Barua <notifications@github.com> wrote:\n> \n> In this case, the immediate value in the addui points to the string. Esil emulation helps with indirect references, but I don't see why it's needed here.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-11-30T13:22:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-348186295","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0ODIwMzk1Nw==","author":{"login":"SrimantaBarua"},"authorAssociation":"CONTRIBUTOR","body":"Yep. I was talking about the examples by @enovella \r\n\r\nAt 0x2ff8, the instruction is `addiu a1, a1, 0x75d0`. 0x75d0 points to the string \"Failed to open ... \". The disassembly resolves it to `addiu a1, a1, str.Failed..`. But doesn't generate a ref.\r\n\r\nAgreed that it makes more sense to generate a ref if the result of the add points to a string. But should this generate a ref too? If yes, then this case doesn't need emulation since it's in the immediate value.","createdAt":"2017-11-30T14:30:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-348203957","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0ODExNTQyMw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Hi! A lot has changed since you opened this issue. Could you please double-check whether the problem is still there? If not, please close this issues, otherwise just leave a comment here. Thanks again for opening this.","createdAt":"2020-06-23T12:33:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-648115423","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MjYyNTk4Mg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I'm closing this as this is the current output:\r\n```\r\n[0x000075d0]> pd 5\r\n            ; DATA XREF from sym.miniupnp_deamon @ 0x22f8\r\n            ;-- str.Failed_to_open_socket_for_receiving_SSDP._EXITING:\r\n            ;-- section..rodata:\r\n            ;-- pc:\r\n            0x000075d0     .string \"Failed to open socket for receiving SSDP. EXITING\" ; len=50 ; [13] -r-- section size 5152 named .rodata\r\n            0x00007602                    unaligned\r\n            0x00007603                    unaligned\r\n            ; DATA XREF from sym.miniupnp_deamon @ 0x23e4\r\n            ; CODE XREF from str.Failed_to_open_socket_for_receiving_SSDP._EXITING @ +0x30\r\n            ;-- str.socket_http_:__m:\r\n            0x00007604     .string \"socket(http): %m\" ; len=17\r\n            0x00007615                    unaligned\r\n```\r\n\r\nPlease re-open if you feel this is not fixed yet or open a new issue if something else is happening now. Thanks for reporting this!","createdAt":"2020-07-01T20:18:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-652625982","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MjY2MTY3Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@ret2libc can you add a test with the output you are showing here?","createdAt":"2020-07-01T21:44:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-652661673","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1Mjg0NzA4NQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"> @ret2libc can you add a test with the output you are showing here?\r\n\r\nActually no, sorry. I'm reading, reviewing, moving, reproducing a lot of issues lately. Issues that have been accumulated in the last ~7 years and I don't intend to spend 2 months just to read, review, add reproducers for each one of them. If we were in a manageable state with regard to issues I'd be more than happy to add test cases for each one of them, but with so many that were forgotten here honestly I have no will/time to create test cases (with prs and such) for each one of them. Of course if the reporter (cc @enovella ) would like to help with this and create a PR with the given test case we can happily merge it, but 1/2 persons can't be the single point of failure. We should try to distribute a bit more the work by asking reporters to help us.","createdAt":"2020-07-02T07:51:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-652847085","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MjkwNjUxMg==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I'm not asking you to do that for every single issue, but for the few that matter we should, and this one is important because we don't like analysis regressions and despite it's tedious, boring and such is necessary if we want issues to not come back again, otherwise i would read, review, write fixes and tests for the 1200 mails i got in my inbox last weeks.\r\n\r\nIdeally @enovella should make that PR, but as long as you tested it you are probably more in context than him right now, and probably you have more time than he or me have right now. Anyway, ill do that PR in case edu can't make it.\r\n\r\nSo keeping this issue open until we have a test is the way to go, though having tests and reproducers was also important for you","createdAt":"2020-07-02T09:46:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-652906512","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY1MjkwNjYxMA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Also the issue is assigned to me","createdAt":"2020-07-02T09:47:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8245#issuecomment-652906610","viewerDidAuthor":true}],"number":8245,"title":"Analysis: missing xrefs on MIPS binaries"},{"body":"With synchronized scrolling and highlight, like in [dhex](http://www.dettus.net/dhex/):\r\n\r\n- [x] Split view\r\n- [ ] Ability to synchronise the scroll between splits\r\n- [x] Highlight the differences\r\n   -  [x] In hex view\r\n   -  [ ] In asm view\r\n\r\n![a05compare2](https://user-images.githubusercontent.com/203261/28919790-9622b4aa-7881-11e7-850f-558c18380fb4.png)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMyMDE2OTI4NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Not yet completely fixed. Reworded bug.","createdAt":"2017-08-04T06:37:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17133#issuecomment-320169285","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM4Nzk0MjczNg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@cyanpencil please take a look at this one too.","createdAt":"2018-05-10T03:40:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17133#issuecomment-387942736","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzODY2OTUxNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"you mean radiff2 -x ?","createdAt":"2018-11-14T13:55:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17133#issuecomment-438669517","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzODg3MjkxNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"isn't V\\  what you are looking for?","createdAt":"2018-11-15T00:44:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17133#issuecomment-438872914","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzODg3MzA0Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"No support to sync offset or colorize diffs yet","createdAt":"2018-11-15T00:44:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17133#issuecomment-438873043","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzODg3NDExMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Also, VD should jump into V\\ mode ,, because VD is the same but in columns (but is not really visual to see it in small screens, so a rows mode would be nice","createdAt":"2018-11-15T00:49:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17133#issuecomment-438874112","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzODkyNDQ1OA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"`V\\` is similar, but the whole mode should be 1) for radiff2 2) sync scrolling 3) highlight of the differences like in `radiff2 -x`","createdAt":"2018-11-15T05:40:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17133#issuecomment-438924458","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4NDAzMjY0Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Bindiffing visualizations and usability in r2 can be improved a lot, +1 for improving the overall state of this","createdAt":"2019-04-17T10:43:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17133#issuecomment-484032643","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwOTY4ODAyOQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@Vane11ope you might want to consider adding this mode in the panels, just FYI.","createdAt":"2019-07-09T15:22:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17133#issuecomment-509688029","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0ODcyMjU1OA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Cc @Vane11ope maybe you can share some ideas or thoughts on this for panels","createdAt":"2020-06-24T09:57:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17133#issuecomment-648722558","viewerDidAuthor":true}],"number":17133,"title":"Split-view visual hex diff mode for radiff2."},{"body":"* [ ] Â ADRP\r\n            wrongly assembled\r\n* [ ] CBZ -conditional branch if zero bit set\r\n            0x1000344a0      852c2b94       bl   sym.imp.sqlite3_config ;[2]\r\n* [ ] CSEL\r\n           0x10003a980      2801889a       csel x8,  x9,  x8,  eq\r\n* [ ] TBZ\r\n        â”Œâ”€< 0x100034b4c      40020036       tbz  w0,  0,   0x100034b94 ;[3]","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMxOTM1ODkxMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"fmi https://github.com/Siguza/ios-resources/blob/master/bits/arm64.md","createdAt":"2017-08-01T12:42:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8087#issuecomment-319358913","viewerDidAuthor":false}],"number":8087,"title":"ARM64 instructions for rasm2"},{"body":"If we preload r2 inside the target process we want to debug we can use that to interact from the native debugger in r2.\r\n\r\nWith this we should be able to run commands from inside the target process, this will be very handy to dlopen libs in target process, dump memory faster, etc.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU2MTM5MTMxNQ==","author":{"login":"yossizap"},"authorAssociation":"CONTRIBUTOR","body":"Got a POC to work but it seems kind of irrelevant for most people due to https://github.com/radareorg/radare2/commit/c816dc7e663d6df4942e31856fcef515a681de71\r\nIt seems to work without PIC, can I just bring it back?","createdAt":"2019-12-03T22:44:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8085#issuecomment-561391315","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2MTU2MzYwNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can you show the poc? pic code should be mandatory and disabling it will break support for modern systems","createdAt":"2019-12-04T09:55:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/8085#issuecomment-561563604","viewerDidAuthor":false}],"number":8085,"title":"Integrate debugger with rarun2 preload"},{"body":"Appearing in android7\r\n\r\n/* The version for android O, encoded in 4 bytes of ASCII. This differentiates dex files that may\r\n * contain invoke-custom, invoke-polymorphic, call-sites, and method handles.\r\n */\r\n![2017-07-19 15 53 58](https://user-images.githubusercontent.com/917142/28370462-a49023da-6c9a-11e7-9283-ecce9fa673bc.jpg)\r\n![2017-07-19 15 54 10](https://user-images.githubusercontent.com/917142/28370466-a4b31ce6-6c9a-11e7-8db2-88adaa4484d4.jpg)\r\n![2017-07-19 15 54 14](https://user-images.githubusercontent.com/917142/28370465-a4b1d98a-6c9a-11e7-8a9a-2b1c0be47fb3.jpg)\r\n![2017-07-19 15 54 18](https://user-images.githubusercontent.com/917142/28370468-a4b701ee-6c9a-11e7-899e-40fd3a0c17b2.jpg)\r\n![2017-07-19 15 54 21](https://user-images.githubusercontent.com/917142/28370469-a4b8a0ee-6c9a-11e7-8c80-a1ab20c1345c.jpg)\r\n![2017-07-19 15 54 25](https://user-images.githubusercontent.com/917142/28370464-a4afe3b4-6c9a-11e7-815d-ed9504544dab.jpg)\r\n![2017-07-19 15 54 29](https://user-images.githubusercontent.com/917142/28370463-a4a8f6f8-6c9a-11e7-8c58-559716a4a749.jpg)\r\n![2017-07-19 15 54 33](https://user-images.githubusercontent.com/917142/28370470-a4c139c0-6c9a-11e7-8876-911accac39fd.jpg)\r\n![2017-07-19 15 54 37](https://user-images.githubusercontent.com/917142/28370471-a4d31474-6c9a-11e7-87e1-2f933d7093d6.jpg)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMzMDEyMzkxNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping @h4ng3r ","createdAt":"2017-09-18T03:36:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7960#issuecomment-330123914","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzMDIyOTg2OQ==","author":{"login":"h4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"pong @radare. It's half implemented. We have custom and polymorphic disasamble, but I need a sample with the call_site struct because I dont understand it and I dont have any sample with it. Do you have one?","createdAt":"2017-09-18T13:57:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7960#issuecomment-330229869","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzMDI0NDE2OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i guess we will need to find those by downloading last android8 images and disassemble the system apks\n\n> On 18 Sep 2017, at 15:57, Marc <notifications@github.com> wrote:\n> \n> pong @radare <https://github.com/radare>. It's half implemented. We have custom and polymorphic disasamble, but I need a sample with the call_site struct because I dont understand it and I dont have any sample with it. Do you have one?\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/7960#issuecomment-330229869>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-llIzU3yLNfojoxuBevzDGJQtJJiZks5sjnaxgaJpZM4Ocw_b>.\n> \n\n","createdAt":"2017-09-18T14:38:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7960#issuecomment-330244169","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzMzUwMDQ5Mw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@h4ng3r any update on this? Would be nice for this release.","createdAt":"2017-10-02T10:46:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7960#issuecomment-333500493","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzMzUwMDc4Mg==","author":{"login":"h4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"@radare checked some android8 apks and he didn't find the structures needed to finish the code. So for now we have to wait because the documentation is not enough clear.","createdAt":"2017-10-02T10:48:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7960#issuecomment-333500782","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzMzc1NzU4NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ðŸ‘\n\n> On 2 Oct 2017, at 12:48, Marc <notifications@github.com> wrote:\n> \n> @radare checked some android8 apks and he didn't find the structures needed to finish the code. So for now we have to wait because the documentation is not enough clear.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-10-03T07:02:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7960#issuecomment-333757585","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUzODA1MQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T05:24:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7960#issuecomment-644538051","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MDU4NTUxMw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"ill take that","createdAt":"2020-06-27T16:53:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7960#issuecomment-650585513","viewerDidAuthor":true}],"number":7960,"title":"Add new instructions for dalvik"},{"body":"umf, we need to merge those commands and help messages. same happens with other debug/emulation commands, like the trace thing is wip in the gsoc\r\n\r\n<img width=\"716\" alt=\"screen shot 2017-07-17 at 13 36 13\" src=\"https://user-images.githubusercontent.com/917142/28266422-069a06f6-6af5-11e7-83c6-6c6494dd2f24.png\">\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU1Nzg1Ng==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T06:24:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7944#issuecomment-644557856","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NjcxMTgwOQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"That's still the same, and should be discussed and fixed","createdAt":"2020-06-19T15:59:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7944#issuecomment-646711809","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY0Njk3NjA5Mg==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"ideally ar and dr shold do the same but using dbg->regs or anal->regs. how would u handle this in the new cmdline parser @ret2libc ?","createdAt":"2020-06-20T10:45:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7944#issuecomment-646976092","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY0NzM4MTEyMQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I don't think the parser is relevant at all in this case. What exactly do you want to achieve? Do you want to remove all the `ar` commands and just keep the `dr` ones? Or what?","createdAt":"2020-06-22T08:54:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7944#issuecomment-647381121","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NzQwODg5Nw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"As long as ar and dr work with registers, but for emulation/analysis and debugging i would expect the same subcommands to be available in both. but here i drop a bunch of questions so we can discuss to see what we see in here:\r\n\r\n* d can be used for emulation and debug, and a for analysis, so ar can be references insmtead of registers\r\n* there's no clear separation/transition between a debug and emulation session, ideally we want to \"transplant\" (see RDebug.transplant) to omve from different debugging backends. for environments like: we debug until a point. transplant the session to emulate the current state, go back to debugging, retoring regs and stack.\r\n* we have ax for xrefs, not sure what else ar could be, and also, we have ds and aes for stepping in debug and emulation environments, so its not in sync 100%\r\n* there's ar, aer and dr to handle registers (debug, static, emulation?) this line is kind of blurry and dupplicated/confusing, as long as most of the time all those commands call the same underlaying functions just depending on cfg.debug\r\n\r\nYes its not really related to the parser, but if you see the dr and ar commands they end up calling the same function and the help message replaces 'a' with 'd', which is imho a hack that should be addressed after clarifying the above questions","createdAt":"2020-06-22T09:46:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7944#issuecomment-647408897","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY0NzQ0NDkxMA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"If those things are really that similar the first step would be to make sure the code is reused as much as possible. From a commands perspective I don't have a clear way to handle these kind of situations for now. We could come up with something ad-hoc, but probably it wouldn't be reused in other places.","createdAt":"2020-06-22T11:00:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7944#issuecomment-647444910","viewerDidAuthor":false}],"number":7944,"title":"ar != dr"},{"body":"Can't find json output for `dmsd` memory snapshot compare. Would also be neat if there were a `dmsdj all` or something that would compare for any changes in memory across all known snapshots.\r\n\r\nThe first part is likely the more important for automating what happened within a given time of execution. The second would just be convenience.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMxMzM3MDc1NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"yep sounds useful and easy to do\n\n> On 6 Jul 2017, at 05:50, Owlz <notifications@github.com> wrote:\n> \n> Can't find json output for dmsd memory snapshot compare. Would also be neat if there were a dmsdj all or something that would compare for any changes in memory across all known snapshots.\n> \n> The first part is likely the more important for automating what happened within a given time of execution. The second would just be convenience.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/7867>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lhdWDc5sY663YDhV4vuwRlyIu0AXks5sLFmZgaJpZM4OPIRg>.\n> \n\n","createdAt":"2017-07-06T11:32:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7867#issuecomment-313370754","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxMzg1OTk1Nw==","author":{"login":"alvarofe"},"authorAssociation":"CONTRIBUTOR","body":"@RKX1209 this might be worth it that you take a look since it seems related with your task","createdAt":"2017-07-08T14:46:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7867#issuecomment-313859957","viewerDidAuthor":false}],"number":7867,"title":"dmsdj and dmsdj all?"},{"body":"# DWARF\r\nRadare2 does not output variable/attribute names (DW_AT_name). As a result, local function variables in binaries with debuginfo aren't named and still use \"local_XX\".\r\n\r\nFor example:\r\n\r\n1) Compile a binary with \"-g3\"\r\n2) Compare the output of `objdump -g a.out`, `readelf --debug-dump=info a.out` and `rabin2 -d a.out`\r\n\r\nIt would be fantastic if we could automatically rename \"local_XX\" by thier DW_AT_name for binaries with debuginfo.\r\n\r\n# PDB\r\nSame applies here","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY1NTI5MTk5MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@HoundThe apart from types - please be sure to add tests for variable and function names as well.","createdAt":"2020-07-08T05:19:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/7863#issuecomment-655291991","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY3Nzc3OTEwNw==","author":{"login":"HoundThe"},"authorAssociation":"CONTRIBUTOR","body":"^ The DWARF PR added integration of the DWARF variable info into functions, but it's still far from perfect as DWARF is very complex format (So I wouldn't close it)\r\n\r\nI'll just specify some things that are still in my head for future reference of what's missing to DWARF variables.\r\n\r\n- Very often, especially unoptimized binaries are using location in Call frame information (CFA stored in .debug_frame section, for some binaries it's in the .eh_frame), but we don't even parse this section yet.\r\n- There are sometimes multiple scopes (lexical_block in DWARF) that we ignore and take all variables from a function (not sure if there is even ability to show scope information in the disassembly), so we can have a name collision so the last one added in the function scope wins, so some cache to keep track of existing variables and creating some unique name (maybe just checking if it can be successfully added, if not -> append maybe an offset or smth should work too).\r\n- There is even some problem of variable existing on multiple locations based on the place of the function, DWARF has a location lists for this, right now we take a longest range the variable lives in and show that, I couldn't think of better solution to this, when variables can exists on different places at different times. Maybe this isn't possible to show in disassembly but might be good in future for decompiler?\r\n- I've added parsing for .debug_loc (where the location lists are) but GCC has a GNU extension to those with location views. maybe adding support for those? But this is probably just a detail","createdAt":"2020-08-20T16:48:34Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7863#issuecomment-677779107","viewerDidAuthor":false}],"number":7863,"title":"Loading variable names from DWARF and PDB"},{"body":"```\r\nr2 -\r\n -- This is an unacceptable milion year dungeon.\r\n[0x00000000]> #!python3\r\nPython 3.5.3 (default, May 10 2017, 15:05:55) \r\nType \"copyright\", \"credits\" or \"license\" for more information.\r\n\r\nIPython 5.2.2 -- An enhanced Interactive Python.\r\n?         -> Introduction and overview of IPython's features.\r\n%quickref -> Quick reference.\r\nhelp      -> Python's own help system.\r\nobject?   -> Details about 'object', use 'object??' for extra details.\r\n\r\nIn [1]: r = r2pipe.open()\r\n\r\nIn [2]: r?\r\nType:           open\r\nString form:    <r2pipe.open object at 0x7fb086e27eb8>\r\nFile:           /usr/lib/python3.5/site-packages/r2pipe/__init__.py\r\nDocstring:     \r\nClass representing an r2pipe connection with a running radare2 instance\r\n        \r\nInit docstring:\r\nOpen a new r2 pipe\r\nThe 'filename' can be one of the following:\r\n\r\n* absolute or relative path to file\r\n* http://<host>:<port>/cmd to connect to an r2 webserver\r\n* tcp://<host>:<port> to connect to an r2 tcp server\r\n* #!pipe when launching it from r2 via RLang.pipe\r\n\r\nArgs:\r\n        filename (str): path to filename or uri\r\n        flags (list of str): arguments, either in comapct form\r\n                (\"-wdn\") or sepparated by commas (\"-w\",\"-d\",\"-n\")\r\nReturns:\r\n        Returns an object with methods to interact with r2 via commands\r\n\r\nIn [3]: print(r.cmd(\"pd 10\"))\r\n          0x00000000      0000           add byte [rax], al\r\n            0x00000002      0000           add byte [rax], al\r\n            0x00000004      0000           add byte [rax], al\r\n            0x00000006      0000           add byte [rax], al\r\n            0x00000008      0000           add byte [rax], al\r\n            0x0000000a      0000           add byte [rax], al\r\n            0x0000000c      0000           add byte [rax], al\r\n            0x0000000e      0000           add byte [rax], al\r\n            0x00000010      0000           add byte [rax], al\r\n            0x00000012      0000           add byte [rax], al\r\n\r\nIn [4]: \r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMxMjQ0MzEzMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"the python api trims the output of commands to avoid some noise when parsing json and such, maybe its related","createdAt":"2017-07-01T16:55:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7831#issuecomment-312443132","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU3NzQ5Nw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T07:10:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7831#issuecomment-644577497","viewerDidAuthor":false}],"number":7831,"title":"Misalignment when using `pd` command from ipython cmd in r2lang python."},{"body":" - [ ] Set the registers and IP when loading Linux coredump\r\n - [ ] Set the registers and memory state when loading Windows minidump (MDMP)\r\n\r\nBoth coredump file and original executable are attached (from Fedora 25 64bit)\r\n[core.zip](https://github.com/radare/radare2/files/1076900/core.zip)\r\n\r\n```\r\nr2 core.24527 \r\nWarning: Cannot initialize section headers\r\nWarning: Cannot initialize strings table\r\nWarning: Cannot initialize dynamic strings\r\narw 000000000000000000000000000000000000000000000000050000005001000001000000434f5245000000000500000000000000000000000500000000000000000000000000000000000000cf5f0000ce5f0000ce5f0000ce5f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\r\n -- Deltify your life with radare2\r\n[0x00000000]> dr=\r\n rax 0x00000000           rbx 0x00000000           rcx 0x00000000\r\n rdx 0x00000000           rsi 0x00000000           rdi 0x00000000\r\n  r8 0x00000000            r9 0x00000000           r10 0x00000000\r\n r11 0x00000000           r12 0x00000000           r13 0x00000000\r\n r14 0x00000000           r15 0x00000000           rip 0x00000000\r\n rbp 0x00000000           rflags              rsp 0x00000000\r\n[0x00000000]> \r\n```\r\nThis is what gdb gives us:\r\n```\r\ngdb /bin/ls core.24527\r\nGNU gdb (GDB) Fedora 7.12.1-48.fc25\r\nCopyright (C) 2017 Free Software Foundation, Inc.\r\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\r\nThis is free software: you are free to change and redistribute it.\r\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\r\nand \"show warranty\" for details.\r\nThis GDB was configured as \"x86_64-redhat-linux-gnu\".\r\nType \"show configuration\" for configuration details.\r\nFor bug reporting instructions, please see:\r\n<http://www.gnu.org/software/gdb/bugs/>.\r\nFind the GDB manual and other documentation resources online at:\r\n<http://www.gnu.org/software/gdb/documentation/>.\r\nFor help, type \"help\".\r\nType \"apropos word\" to search for commands related to \"word\"...\r\nReading symbols from /bin/ls...Reading symbols from /bin/ls...(no debugging symbols found)...done.\r\n(no debugging symbols found)...done.\r\n[New LWP 24527]\r\nCannot access memory at address 0x7\r\nCannot access memory at address 0xffffffffffffffff\r\nCore was generated by `/bin/ls'.\r\nProgram terminated with signal SIGTRAP, Trace/breakpoint trap.\r\n#0  0x0000565204c81620 in ?? ()\r\nMissing separate debuginfos, use: dnf debuginfo-install coreutils-8.25-17.fc25.x86_64\r\ngdb$ i r\r\nrax            0x49     0x49\r\nrbx            0x31     0x31\r\nrcx            0x7f60eb730f07   0x7f60eb730f07\r\nrdx            0x7f60eba29b38   0x7f60eba29b38\r\nrsi            0x0      0x0\r\nrdi            0x0      0x0\r\nrbp            0x0      0x0\r\nrsp            0x7ffe5b129c58   0x7ffe5b129c58\r\nr8             0xfa40   0xfa40\r\nr9             0x1      0x1\r\nr10            0x5652063a7300   0x5652063a7300\r\nr11            0x202    0x202\r\nr12            0x7f60ec0456b0   0x7f60ec0456b0\r\nr13            0x56520639ecc0   0x56520639ecc0\r\nr14            0x56520639eca0   0x56520639eca0\r\nr15            0x0      0x0\r\nrip            0x565204c81620   0x565204c81620\r\neflags         0x202    [ IF ]\r\ncs             0x33     0x33\r\nss             0x2b     0x2b\r\nds             0x0      0x0\r\nes             0x0      0x0\r\nfs             0x0      0x0\r\ngs             0x0      0x0\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMwODY2MjEyOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"you have to run the arw line that is shown to set the register state\n\n> On 15 Jun 2017, at 09:39, Anton Kochkov <notifications@github.com> wrote:\n> \n> arw 000000000000000000000000000000000000000000000000050000005001000001000000434f5245000000000500000000000000000000000500000000000000000000000000000000000000cf5f0000ce5f0000ce5f0000ce5f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\n\n","createdAt":"2017-06-15T08:15:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-308662128","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwODY3MzI0Mg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"But why it wasn't done automatically?","createdAt":"2017-06-15T09:03:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-308673242","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwODY3NzgxOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"because rbin doesnt have a way to talk to rreg thru rcore and i wanted to have a way to do that and had no time to think a proper design strategy. last time i used a core was more than 15 years ago\n\n> On 15 Jun 2017, at 11:03, Anton Kochkov <notifications@github.com> wrote:\n> \n> But why it wasn't done automatically?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/7750#issuecomment-308673242>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-li5ODZtJ7sr3sgUH6jfLQtCQyDBfks5sEPNagaJpZM4N61y3>.\n> \n\n","createdAt":"2017-06-15T09:22:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-308677819","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwODY5MTEzMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Would be nice to have tbh. @SrimantaBarua @RKX1209 - may be you have an ideas?","createdAt":"2017-06-15T10:20:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-308691131","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxMTA2NTgyNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can you update the title? the thing is that rbin needs a way to schedule commands to be run in rcore.. maybe we can think in something similar of what i did in ranal recently, but needs more polishment. more ideas are welcome","createdAt":"2017-06-26T13:53:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-311065826","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxMzg0NzEwMg==","author":{"login":"alvarofe"},"authorAssociation":"CONTRIBUTOR","body":"It would be great to have a way as radare did with ranal to send back to rcore commands to execute, a kind of deferred tasks.  Maybe a share queue where different parts can write into it? ","createdAt":"2017-07-08T10:12:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-313847102","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxMzg0Nzg5NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"we can just add a callback in the bin plugins to output an r2 script to run, this script can be generated when parsing the bin, so we can just call that from core and run the script. this shuold be quick and easy to do. fits for 1.6 perfectly. wanna do it?\n\n> On 8 Jul 2017, at 12:12, Ãlvaro Felipe Melchor <notifications@github.com> wrote:\n> \n> It would be great to have a way as radare did with ranal to send back to rcore commands to execute, a kind of deferred tasks. Maybe a share queue where different parts can write into it?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/7750#issuecomment-313847102>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-ltXUSaKGGdZIHFI-vJM9wOgStSoXks5sL1X-gaJpZM4N61y3>.\n> \n\n","createdAt":"2017-07-08T10:30:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-313847894","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxMzg0ODE2Ng==","author":{"login":"alvarofe"},"authorAssociation":"CONTRIBUTOR","body":"But this should be something more general instead to specific callback for each plugin, what do you think?","createdAt":"2017-07-08T10:36:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-313848166","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxMzg0ODM0NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"getting the regstate is something specific, but we may probably need this for other use cases, so letting this exposed as a script doesnt limits the design. the thing is what do we want?\n\n* a function to get buf+size of reg arena state?\n* a function that returns an r2 script to wx that state\n* which other info can we set from bin to make sense for anal/core/â€¦ ?\n\nif this is just for the regstate we can just add a callback to read the reg-arena buffer.\n\n> On 8 Jul 2017, at 12:36, Ãlvaro Felipe Melchor <notifications@github.com> wrote:\n> \n> But this should be something more general instead to specific callback for each plugin, what do you think?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/7750#issuecomment-313848166>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lrjOpSvOnI_ONmdDu0GyOSAEbUnRks5sL1u-gaJpZM4N61y3>.\n> \n\n","createdAt":"2017-07-08T10:40:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-313848345","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxMzg0OTE4NQ==","author":{"login":"alvarofe"},"authorAssociation":"CONTRIBUTOR","body":"The thing is that adding a specific callback when the necessity arises seems a bad idea in the long term imho. However, having a queue or whatever where r2script are written is easy to extend for more use cases that we are not contemplating yet but will be in the future.\r\n\r\nI don't remember what it was the use case for rnal to send info back to rcore","createdAt":"2017-07-08T11:00:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-313849185","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxMzg1MDQyNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"fromt he API POV is better to have an api that returns that buffer directly. we can do that for now and keep rbin away from core logic. sounds good to you?\n\n> On 8 Jul 2017, at 13:00, Ãlvaro Felipe Melchor <notifications@github.com> wrote:\n> \n> The thing is that adding a specific callback when the necessity arises seems a bad idea in the long term imho. However, having a queue or whatever where r2script are written is easy to extend for more use cases that we are not contemplating yet but will be in the future.\n> \n> I don't remember what it was the use case for rnal to send info back to rcore\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/7750#issuecomment-313849185>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-ljnqI333ayJs5JqoVzLzbT6TF1WSks5sL2FBgaJpZM4N61y3>.\n> \n\n","createdAt":"2017-07-08T11:27:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-313850425","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyMjAwMTUwNA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"I updated the title, this issue is also important for opening different kind of dumps - Windows process dumps and kernel minidumps. And probably other stuff in the future.","createdAt":"2017-08-12T19:38:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-322001504","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMDMyMTk4Nw==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"### Coredump:\r\nrip - wrong\r\nno threads info\r\n### Minidump:\r\nno registers\r\nno threads info","createdAt":"2019-08-12T07:25:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-520321987","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMDM0MzkxOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"The commands dumped before the promot must be copypasted to get what u want\n\n> On 12 Aug 2019, at 09:25, s0i37 <notifications@github.com> wrote:\n> \n> Coredump:\n> \n> rip - wrong\n> no threads info\n> \n> Minidump:\n> \n> no registers\n> no threads info\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-08-12T08:48:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-520343919","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMDM5NjI1OQ==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"> The commands dumped before the promot must be copypasted to get what u want\r\n> [â€¦](#)\r\n> On 12 Aug 2019, at 09:25, s0i37 ***@***.***> wrote: Coredump: rip - wrong no threads info Minidump: no registers no threads info â€” You are receiving this because you commented. Reply to this email directly, view it on GitHub, or mute the thread.\r\n\r\nI didn't understand. May you please explain a bit more detail what do you mean?","createdAt":"2019-08-12T12:00:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-520396259","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMDQ4ODk2OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Open a core file and show what you see in a screenshot or whatever in here\n\n> On 12 Aug 2019, at 14:00, s0i37 <notifications@github.com> wrote:\n> \n> The commands dumped before the promot must be copypasted to get what u want\n> â€¦\n> On 12 Aug 2019, at 09:25, s0i37 @.***> wrote: Coredump: rip - wrong no threads info Minidump: no registers no threads info â€” You are receiving this because you commented. Reply to this email directly, view it on GitHub, or mute the thread.\n> \n> I didn't understand. May you please explain a bit more detail what do you mean?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-08-12T16:06:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-520488968","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMDc0NTQ4NQ==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"### gdb> i reg\r\n```\r\nrax            0xfffffffffffffdfe\t0xfffffffffffffdfe\r\nrbx            0x7ffecd9c7480\t0x7ffecd9c7480\r\nrcx            0x7f02e14894a9\t0x7f02e14894a9\r\nrdx            0x0\t0x0\r\nrsi            0x7ffecd9c7500\t0x7ffecd9c7500\r\nrdi            0x1\t0x1\r\nrbp            0x55ce785c37f0\t0x55ce785c37f0\r\nrsp            0x7ffecd9c7450\t0x7ffecd9c7450\r\nr8             0x7ffecd9c7480\t0x7ffecd9c7480\r\nr9             0x7ffecd9c7490\t0x7ffecd9c7490\r\nr10            0x0\t0x0\r\nr11            0x246\t0x246\r\nr12            0x7ffecd9c7500\t0x7ffecd9c7500\r\nr13            0x7ffecd9c74f0\t0x7ffecd9c74f0\r\nr14            0x0\t0x0\r\nr15            0x0\t0x0\r\nrip            0x7f02e14894a9\t0x7f02e14894a9\r\neflags         0x246\t[ PF ZF IF ]\r\ncs             0x33\t0x33\r\nss             0x2b\t0x2b\r\nds             0x0\t0x0\r\nes             0x0\t0x0\r\nfs             0x0\t0x0\r\ngs             0x0\t0x0\r\n```\r\n### r2> ar\r\n```\r\nrax = 0xfffffffffffffdfe\r\nrbx = 0x7ffecd9c7480\r\nrcx = 0x7f02e14894a9\r\nrdx = 0x00000000\r\nrsi = 0x7ffecd9c7500\r\nrdi = 0x00000001\r\nr8 = 0x7ffecd9c7480\r\nr9 = 0x7ffecd9c7490\r\nr10 = 0x00000000\r\nr11 = 0x00000246\r\nr12 = 0x7ffecd9c7500\r\nr13 = 0x7ffecd9c74f0\r\nr14 = 0x00000000\r\nr15 = 0x00000000\r\nrip = 0x55ce785b1000\r\nrbp = 0x55ce785c37f0\r\nrflags = 0x00000246\r\nrsp = 0x7ffecd9c7450\r\n```","createdAt":"2019-08-13T08:43:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-520745485","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMDgwODYyMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"So its just to fix the reg profile. Type drp and fix the profile. You can load custom reg profiles without recompiling anything on the fly. Adjust the offsets until u get the right values\n\n> On 13 Aug 2019, at 10:43, s0i37 <notifications@github.com> wrote:\n> \n> gdb> i reg\n> \n> rax            0xfffffffffffffdfe\t0xfffffffffffffdfe\n> rbx            0x7ffecd9c7480\t0x7ffecd9c7480\n> rcx            0x7f02e14894a9\t0x7f02e14894a9\n> rdx            0x0\t0x0\n> rsi            0x7ffecd9c7500\t0x7ffecd9c7500\n> rdi            0x1\t0x1\n> rbp            0x55ce785c37f0\t0x55ce785c37f0\n> rsp            0x7ffecd9c7450\t0x7ffecd9c7450\n> r8             0x7ffecd9c7480\t0x7ffecd9c7480\n> r9             0x7ffecd9c7490\t0x7ffecd9c7490\n> r10            0x0\t0x0\n> r11            0x246\t0x246\n> r12            0x7ffecd9c7500\t0x7ffecd9c7500\n> r13            0x7ffecd9c74f0\t0x7ffecd9c74f0\n> r14            0x0\t0x0\n> r15            0x0\t0x0\n> rip            0x7f02e14894a9\t0x7f02e14894a9\n> eflags         0x246\t[ PF ZF IF ]\n> cs             0x33\t0x33\n> ss             0x2b\t0x2b\n> ds             0x0\t0x0\n> es             0x0\t0x0\n> fs             0x0\t0x0\n> gs             0x0\t0x0\n> r2> ar\n> \n> rax = 0xfffffffffffffdfe\n> rbx = 0x7ffecd9c7480\n> rcx = 0x7f02e14894a9\n> rdx = 0x00000000\n> rsi = 0x7ffecd9c7500\n> rdi = 0x00000001\n> r8 = 0x7ffecd9c7480\n> r9 = 0x7ffecd9c7490\n> r10 = 0x00000000\n> r11 = 0x00000246\n> r12 = 0x7ffecd9c7500\n> r13 = 0x7ffecd9c74f0\n> r14 = 0x00000000\n> r15 = 0x00000000\n> rip = 0x55ce785b1000\n> rbp = 0x55ce785c37f0\n> rflags = 0x00000246\n> rsp = 0x7ffecd9c7450\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-08-13T12:10:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-520808623","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMTE5NzM2Ng==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"```\r\narp > current_reg_profile.txt\r\narp current_reg_profile.txt\r\n```\r\nAfter that `ar` shows zeroes","createdAt":"2019-08-14T10:49:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-521197366","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMTIwMDI0Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Run the arw line again and it should refill the reg buffer. You can probably dump the current state withb drw or dr* which should be a single long line of hex\n\n> On 14 Aug 2019, at 12:49, s0i37 <notifications@github.com> wrote:\n> \n> arp > current_reg_profile.txt\n> arp current_reg_profile.txt\n> After that ar shows zeroes\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-08-14T10:59:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-521200246","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMTIwMDI3Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"But thisbis a bug indeed\n\n> On 14 Aug 2019, at 12:49, s0i37 <notifications@github.com> wrote:\n> \n> arp > current_reg_profile.txt\n> arp current_reg_profile.txt\n> After that ar shows zeroes\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-08-14T10:59:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-521200276","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMTIxNDMzNw==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"`arw` requires a some offset. Is it require to execute `arw hexnum` for every register? And also I need to know offset for every registers?","createdAt":"2019-08-14T11:51:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-521214337","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMTI1Nzc1MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"No. Arw requires no offset. Just thw whole buffer\n\n> On 14 Aug 2019, at 13:51, s0i37 <notifications@github.com> wrote:\n> \n> arw requires a some offset. Is it require to execute arw hexnum for every register? And also I need to know offset for every registers?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-08-14T13:59:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-521257750","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMTM2NzE4Ng==","author":{"login":"s0i37"},"authorAssociation":"CONTRIBUTOR","body":"How can I know address of this buffer?","createdAt":"2019-08-14T18:38:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-521367186","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMTU3MzQ4NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Theres no address for this buffer. Its the regstate in hex form and shoukd be displayed when loading the core file but u didnt pasted it and im in vacations so wont be able to try and give you a proper answer/fix until i come back on sunday\n\n> On 14 Aug 2019, at 20:38, s0i37 <notifications@github.com> wrote:\n> \n> How can I know address of this buffer?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-08-15T09:16:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-521573484","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMjMzODYzNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can anyone share a core file to test and explain here?","createdAt":"2019-08-18T17:08:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-522338635","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MjY1NjE3NA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@XVilka I think this works now, at least for linux coredump. Could you check it for windows? If you can't find the reproducer, please just close the issue and someone will open a new one when he will meet the problem. Thanks","createdAt":"2020-07-01T21:29:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7750#issuecomment-652656174","viewerDidAuthor":false}],"number":7750,"title":"R2 - define the debugger state from RBin when openening a coredump/minidump"},{"body":" - [x] Add support for bitfields\r\n - [ ] Add support for alignment property of the type\r\n - [ ] Support for C++ objects","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMwNzQwMzUwOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"C++?\n\n> On 9 Jun 2017, at 14:22, Anton Kochkov <notifications@github.com> wrote:\n> \n>  Add support for bitfields\n>  Add support for alignment property of the type\n>  Support for C++ objects\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-06-09T14:26:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7710#issuecomment-307403509","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxMjc3OTgyMw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@radare yes, not sure how to do that, but I think we need to support more complex types, for languages like C++/D, Rust and Go, Haskell, etc.","createdAt":"2017-07-04T04:51:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7710#issuecomment-312779823","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM4NDE1NzMxMw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"For this we need to think/discuss first how it should be done exactly @sivaramaaa ","createdAt":"2018-04-25T04:28:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7710#issuecomment-384157313","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM4Njk0NDkxNw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@sivaramaaa for your information - in tcc parser and SDB database some metainformation about type stored in \"meta\" field, which can be enhanced, e.g. used as a bitfield to store more different properties (you can grep `shlr/tcc/tccgen.c` for \"meta\" keyword to see the code creating it).","createdAt":"2018-05-07T03:04:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7710#issuecomment-386944917","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0OTg1MzU4Ng==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"About C++ types, currently I am implementing the anal classes completely separate from types to be saved in sdb under the `anal/classes` namespace. The reason is that classes are quite independent of actual types in many cases (static methods, vtables, rtti, etc.).\r\nThe idea would be to later add references between types (structs) and classes to for example describe the memory layout of a class.\r\nHowever I am open for suggestions if anybody has a better idea.","createdAt":"2018-12-25T14:15:34Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/7710#issuecomment-449853586","viewerDidAuthor":false}],"number":7710,"title":"C types - SDB properties"},{"body":"I am using [bicon](https://github.com/behdad/bicon) on linux, bicon is a console that displays right-to-left text correctly.\r\nradare2 opens and works correctly, except when I hit backspace/left arrow when there no more characters to delete/move left the cursor moves far to the left and the radare2 and terminal are unresponsive it can neither move the cursor nor kill radare2 (with Ctrl-c).\r\n```\r\n> r2 bin\r\n -- No such file or directory.\r\nâ†“ cursor moves here after pressing backspace/left-arrow.\r\nâš[0x08048074]>\r\n```\r\nI used many repls with bicon and never had any issues, only with radare2.\r\n\r\n### Version info:\r\n__bicon__: v0.5 commit g5858585\r\n__radare2__:\r\n```\r\n> r2 -v\r\nradare2 1.4.0 0 @ linux-x86-32 git.1.4.0\r\ncommit: HEAD build: 2017-05-02__20:36:04\r\n```\r\n```\r\n> r2 -V\r\n1.4.0  r2\r\n1.4.0  r_anal\r\n1.4.0  r_lib\r\n1.4.0  r_egg\r\n1.4.0  r_asm\r\n1.4.0  r_bin\r\n1.4.0  r_cons\r\n1.4.0  r_flag\r\n1.4.0  r_core\r\n1.4.0  r_crypto\r\n1.4.0  r_bp\r\n1.4.0  r_debug\r\n1.4.0  r_hash\r\n1.4.0  r_fs\r\n1.4.0  r_io\r\n1.4.0  r_magic\r\n1.4.0  r_parse\r\n1.4.0  r_reg\r\n1.4.0  r_sign\r\n1.4.0  r_search\r\n1.4.0  r_syscall\r\n1.4.0  r_util\r\n```\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMwNDA3NDMyNA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Hello,\r\n\r\nEnsure you are using radare2 from git, if you're unsure paste output of `r2 -v` here.\r\nTo install radare2 from git, first uninstall your version of radare2 and clean your distro. Then use `git clone https://github.com/radare/radare2 && cd radare2 && ./sys/install.sh`, verify your version and check if there is no error using `r2 -v`.","createdAt":"2017-05-25T17:42:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7594#issuecomment-304074324","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwNDA3NDQ3MA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Related to https://github.com/radare/radare2/issues/2032","createdAt":"2017-05-25T17:42:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7594#issuecomment-304074470","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwNDIzODM5OQ==","author":{"login":"SSoulaimane"},"authorAssociation":"NONE","body":"@Maijin I just rebuilt radare2 from git. The problem is persistent.\r\n```\r\n> r2 -v\r\nradare2 1.5.0-git 0 @ linux-x86-32 git.1.5.0-git\r\ncommit: HEAD build: 2017-05-26__09:24:55\r\n```\r\n(no commit info, I didn't clone, it seemed too big, I downloaded the zip)","createdAt":"2017-05-26T09:39:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7594#issuecomment-304238399","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwNDI0MzI0NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"How is this handled in readline? Which escape codes are used?\n\n> On 26 May 2017, at 11:39, Ø³Ù„ÙŠÙ…Ø§Ù† Ø§Ù„Ø³Ù‡Ù…ÙŠ (SoulaÃ¯mane Sahmi) <notifications@github.com> wrote:\n> \n> @Maijin I just rebuilt radare2 from git. The problem is persistent.\n> \n> > r2 -v\n> radare2 1.5.0-git 0 @ linux-x86-32 git.1.5.0-git\n> commit: HEAD build: 2017-05-26__09:24:55\n> (no commit info, I didn't clone, it seemed too big, I downloaded the zip)\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-05-26T10:03:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7594#issuecomment-304243244","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwNDI0MzQwNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Are there vertical terminals for japanese too?\n\n> On 26 May 2017, at 11:39, Ø³Ù„ÙŠÙ…Ø§Ù† Ø§Ù„Ø³Ù‡Ù…ÙŠ (SoulaÃ¯mane Sahmi) <notifications@github.com> wrote:\n> \n> @Maijin I just rebuilt radare2 from git. The problem is persistent.\n> \n> > r2 -v\n> radare2 1.5.0-git 0 @ linux-x86-32 git.1.5.0-git\n> commit: HEAD build: 2017-05-26__09:24:55\n> (no commit info, I didn't clone, it seemed too big, I downloaded the zip)\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-05-26T10:04:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7594#issuecomment-304243404","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDM5NjM3OA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@SSoulaimane is it still a problem?","createdAt":"2017-12-29T04:27:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7594#issuecomment-354396378","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzOTM0NTM5MA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"1. @SSoulaimane ping, is this still a problem?\r\n2. FYI here is the list tracking native BiDirectional text support in various terminal emulators: https://gist.github.com/XVilka/a0e49e1c65370ba11c17","createdAt":"2018-11-16T10:09:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7594#issuecomment-439345390","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzOTk3MzQ2MQ==","author":{"login":"SSoulaimane"},"authorAssociation":"NONE","body":"Hello, the situation didn't change unfortunately, still the same behavior.\r\n```\r\n> r2 -v\r\nradare2 3.1.0-git 20115 @ linux-x86-64 git.3.0.1-287-g23fb5bc19\r\ncommit: 23fb5bc197ded5a9179f54cf502945332932c38e build: 2018-11-19__16:07:24\r\n```","createdAt":"2018-11-19T17:22:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7594#issuecomment-439973461","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzOTk3Mzk4MA==","author":{"login":"SSoulaimane"},"authorAssociation":"NONE","body":"Oops closed by mistake.","createdAt":"2018-11-19T17:24:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7594#issuecomment-439973980","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0Nzc0NDAxOQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Is it still reproduceable? ","createdAt":"2020-06-22T20:08:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7594#issuecomment-647744019","viewerDidAuthor":false}],"number":7594,"title":"issues with bicon console"},{"body":"Since a while Android applications for newer Android devices are ELF files, with the payload in one or more ELF sections, such as oat_patches (older Android) or .text.oat_patches:\r\n\r\nhttps://android.googlesource.com/platform/art/+/f898087\r\n\r\nWhen running rabin2 on an application extracted from one of the more recent Pixel firmwares, then rabin2 does not give the right information. This is what readelf says:\r\n\r\n```\r\n$ readelf -W --dyn-syms DCMO.odex \r\n\r\nSymbol table '.dynsym' contains 6 entries:\r\n   Num:    Value          Size Type    Bind   Vis      Ndx Name\r\n     0: 0000000000000000     0 NOTYPE  LOCAL  DEFAULT  UND \r\n     1: 0000000000001000 0x43000 OBJECT  GLOBAL DEFAULT    1 oatdata\r\n     2: 0000000000044000 0x35a38 OBJECT  GLOBAL DEFAULT    2 oatexec\r\n     3: 0000000000079a34     4 OBJECT  GLOBAL DEFAULT    2 oatlastword\r\n     4: 000000000007a000 23728 OBJECT  GLOBAL DEFAULT    3 oatbss\r\n     5: 000000000007fcac     4 OBJECT  GLOBAL DEFAULT    3 oatbsslastword\r\n\r\n```\r\n\r\nand this is what rabin2 says:\r\n\r\n```\r\n$ rabin2 -s DCMO.odex \r\n[Symbols]\r\nvaddr=0x0007b000 paddr=0x00001000 ord=001 fwd=NONE sz=274432 bind=GLOBAL   type=OBJECT name=oatdata\r\nvaddr=0x00044000 paddr=0x00044000 ord=002 fwd=NONE sz=219704 bind=GLOBAL type=OBJECT name=oatexec\r\nvaddr=0x00079a34 paddr=0x00079a34 ord=003 fwd=NONE sz=4 bind=GLOBAL type=OBJECT name=oatlastword\r\nvaddr=0x0007a000 paddr=0x00000000 ord=004 fwd=NONE sz=23728 bind=GLOBAL type=OBJECT name=oatbss\r\nvaddr=0x0007fcac paddr=0x00005cac ord=005 fwd=NONE sz=4 bind=GLOBAL type=OBJECT name=oatbsslastword\r\nvaddr=0x0007a001 paddr=0x00000001 ord=006 fwd=NONE sz=16 bind=LOCAL type=TLS name=imp.oatdata\r\nvaddr=0x0007a000 paddr=0x00000000 ord=007 fwd=NONE sz=16 bind=LOCAL type=COMMON name=imp.data\r\nvaddr=0x0007a000 paddr=0x00000000 ord=008 fwd=NONE sz=16 bind=LOCAL type=NOTYPE name=imp.\r\nvaddr=0x0007a000 paddr=0x00000000 ord=009 fwd=NONE sz=16 bind=LOCAL type=NOTYPE name=imp.\r\nvaddr=0x0007a000 paddr=0x00000000 ord=010 fwd=NONE sz=16 bind=LOCAL type=NOTYPE name=imp.\r\n```\r\n\r\n[BIGSNIP]\r\n\r\n```\r\nvaddr=0x0007a000 paddr=0x00000000 ord=165 fwd=NONE sz=16 bind=LOCAL type=NOTYPE name=imp.\r\nvaddr=0x0007a000 paddr=0x00000000 ord=166 fwd=NONE sz=16 bind=LOCAL type=NOTYPE name=imp.\r\nvaddr=0x0007a000 paddr=0x00000000 ord=167 fwd=NONE sz=16 bind=LOCAL type=NOTYPE name=imp.\r\nvaddr=0x000800d0 paddr=0x0007a0d0 ord=168 fwd=NONE sz=16 bind=LOCAL type=NOTYPE name=imp.data\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMwMzA0NDU2NA==","author":{"login":"armijnhemel"},"authorAssociation":"CONTRIBUTOR","body":"Some more info about the file (readelf -Wa):\r\n\r\n```\r\nELF Header:\r\n  Magic:   7f 45 4c 46 02 01 01 03 00 00 00 00 00 00 00 00 \r\n  Class:                             ELF64\r\n  Data:                              2's complement, little endian\r\n  Version:                           1 (current)\r\n  OS/ABI:                            UNIX - GNU\r\n  ABI Version:                       0\r\n  Type:                              DYN (Shared object file)\r\n  Machine:                           AArch64\r\n  Version:                           0x1\r\n  Entry point address:               0x0\r\n  Start of program headers:          64 (bytes into file)\r\n  Start of section headers:          507984 (bytes into file)\r\n  Flags:                             0x0\r\n  Size of this header:               64 (bytes)\r\n  Size of program headers:           56 (bytes)\r\n  Number of program headers:         7\r\n  Size of section headers:           64 (bytes)\r\n  Number of section headers:         10\r\n  Section header string table index: 9\r\n\r\nSection Headers:\r\n  [Nr] Name              Type            Address          Off    Size   ES Flg Lk Inf Al\r\n  [ 0]                   NULL            0000000000000000 000000 000000 00      0   0  0\r\n  [ 1] .rodata           PROGBITS        0000000000001000 001000 043000 00   A  0   0 4096\r\n  [ 2] .text             PROGBITS        0000000000044000 044000 035a38 00  AX  0   0 4096\r\n  [ 3] .bss              NOBITS          000000000007a000 000000 005cb0 00   A  0   0 4096\r\n  [ 4] .dynstr           STRTAB          0000000000080000 07a000 000040 00   A  0   0 4096\r\n  [ 5] .dynsym           DYNSYM          0000000000080040 07a040 000090 18   A  4   0  8\r\n  [ 6] .hash             HASH            00000000000800d0 07a0d0 000024 04   A  5   0  4\r\n  [ 7] .dynamic          DYNAMIC         0000000000081000 07b000 000070 10   A  4   0 4096\r\n  [ 8] .text.oat_patches LOUSER+0        0000000000000000 07c000 000000 00      0   0 4096\r\n  [ 9] .shstrtab         STRTAB          0000000000000000 07c000 00004f 00      0   0  1\r\nKey to Flags:\r\n  W (write), A (alloc), X (execute), M (merge), S (strings)\r\n  I (info), L (link order), G (group), T (TLS), E (exclude), x (unknown)\r\n  O (extra OS processing required) o (OS specific), p (processor specific)\r\n\r\nThere are no section groups in this file.\r\n\r\nProgram Headers:\r\n  Type           Offset   VirtAddr           PhysAddr           FileSiz  MemSiz   Flg Align\r\n  PHDR           0x000040 0x0000000000000040 0x0000000000000040 0x000188 0x000188 R   0x8\r\n  LOAD           0x000000 0x0000000000000000 0x0000000000000000 0x044000 0x044000 R   0x1000\r\n  LOAD           0x044000 0x0000000000044000 0x0000000000044000 0x035a38 0x035a38 R E 0x1000\r\n  LOAD           0x000000 0x000000000007a000 0x000000000007a000 0x000000 0x005cb0 RW  0x1000\r\n  LOAD           0x07a000 0x0000000000080000 0x0000000000080000 0x0000f4 0x0000f4 R   0x1000\r\n  LOAD           0x07b000 0x0000000000081000 0x0000000000081000 0x000070 0x000070 RW  0x1000\r\n  DYNAMIC        0x07b000 0x0000000000081000 0x0000000000081000 0x000070 0x000070 RW  0x1000\r\n\r\n Section to Segment mapping:\r\n  Segment Sections...\r\n   00     \r\n   01     .rodata \r\n   02     .text \r\n   03     .bss \r\n   04     .dynstr .dynsym .hash \r\n   05     .dynamic \r\n   06     .dynamic \r\n\r\nDynamic section at offset 0x7b000 contains 7 entries:\r\n  Tag        Type                         Name/Value\r\n 0x0000000000000004 (HASH)               0x800d0\r\n 0x0000000000000005 (STRTAB)             0x80000\r\n 0x0000000000000006 (SYMTAB)             0x80040\r\n 0x000000000000000b (SYMENT)             24 (bytes)\r\n 0x000000000000000a (STRSZ)              64 (bytes)\r\n 0x000000000000000e (SONAME)             Library soname: [package.odex]\r\n 0x0000000000000000 (NULL)               0x0\r\n\r\nThere are no relocations in this file.\r\n\r\nThe decoding of unwind sections for machine type AArch64 is not currently supported.\r\n\r\nSymbol table '.dynsym' contains 6 entries:\r\n   Num:    Value          Size Type    Bind   Vis      Ndx Name\r\n     0: 0000000000000000     0 NOTYPE  LOCAL  DEFAULT  UND \r\n     1: 0000000000001000 0x43000 OBJECT  GLOBAL DEFAULT    1 oatdata\r\n     2: 0000000000044000 0x35a38 OBJECT  GLOBAL DEFAULT    2 oatexec\r\n     3: 0000000000079a34     4 OBJECT  GLOBAL DEFAULT    2 oatlastword\r\n     4: 000000000007a000 23728 OBJECT  GLOBAL DEFAULT    3 oatbss\r\n     5: 000000000007fcac     4 OBJECT  GLOBAL DEFAULT    3 oatbsslastword\r\n\r\nHistogram for bucket list length (total of 1 buckets):\r\n Length  Number     % of total  Coverage\r\n      0  1          (100.0%)\r\n\r\nNo version information found in this file.\r\n```","createdAt":"2017-05-22T09:13:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7567#issuecomment-303044564","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMzA0NjU2Mw==","author":{"login":"armijnhemel"},"authorAssociation":"CONTRIBUTOR","body":"Of course, the ELF file only serves as a container for the actual program or programs, which in this case are in the .text.oat_patches section. Android bytecode is a completely different beast that changes very frequently: https://android.googlesource.com/platform/art/+log/master/runtime/oat.h","createdAt":"2017-05-22T09:21:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7567#issuecomment-303046563","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMzA2OTE1NA==","author":{"login":"armijnhemel"},"authorAssociation":"CONTRIBUTOR","body":"Noticed I had forgotten to give version info for rabin2, apologies:\r\n\r\n$ rabin2 -v\r\nrabin2 1.5.0-git 14813 @ linux-x86-64 git.1.4.0-268-g0c6cd8c\r\ncommit: 0c6cd8cbc8307e599f5fee6f9dd8967327c930e8 build: 2017-05-21__12:49:29\r\n","createdAt":"2017-05-22T11:04:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7567#issuecomment-303069154","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMzA3Mjk3Nw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Use code markdown like:\r\n\r\n```\r\nThis is code\r\nThis is raw-data\r\n```\r\n\r\nThis way it increases lisibility","createdAt":"2017-05-22T11:24:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7567#issuecomment-303072977","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMzA3NTMzOA==","author":{"login":"armijnhemel"},"authorAssociation":"CONTRIBUTOR","body":"Apologies, hope it's better now.","createdAt":"2017-05-22T11:36:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7567#issuecomment-303075338","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMzEyMzY2NQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Ping @h4ng3r ","createdAt":"2017-05-22T14:52:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7567#issuecomment-303123665","viewerDidAuthor":false}],"number":7567,"title":"rabin2: wrong information for OAT ELF binaries"},{"body":"&lt;pancake&gt; i have implemented the RTable api so we just need to have a command like the agn/age/agg but for tables.\r\n\r\n* [ ] Create a new table\r\n* [ ] Add a row\r\n* [ ] Import CSV or JSON (see https://github.com/radareorg/radare2/issues/3222, https://github.com/radareorg/radare2/issues/13763)\r\n* [ ] Display/query the custom table\r\n\r\n[libr/util/table.c](https://github.com/radareorg/radare2/blob/master/libr/util/table.c):\r\n```c\r\n// TODO: to be implemented\r\nR_API RTable *r_table_clone(RTable *t) {\r\n\t// TODO: implement\r\n\treturn NULL;\r\n}\r\n\r\nR_API RTable *r_table_push(RTable *t) {\r\n\t// TODO: implement\r\n\treturn NULL;\r\n}\r\n\r\nR_API RTable *r_table_pop(RTable *t) {\r\n\t// TODO: implement\r\n\treturn NULL;\r\n}\r\n\r\nR_API void r_table_fromjson(RTable *t, const char *csv) {\r\n\t//  TODO\r\n}\r\n\r\nR_API void r_table_fromcsv(RTable *t, const char *csv) {\r\n\t//  TODO\r\n}\r\n\r\nR_API char *r_table_tohtml(RTable *t) {\r\n\t// TODO\r\n\treturn NULL;\r\n}\r\n\r\nR_API void r_table_transpose(RTable *t) {\r\n\t// When the music stops rows will be cols and cols... rows!\r\n}\r\n\r\nR_API void r_table_format(RTable *t, int nth, RTableColumnType *type) {\r\n\t// change the format of a specific column\r\n\t// change imm base, decimal precission, ...\r\n}\r\n\r\n// to compute sum result of all the elements in a column\r\nR_API ut64 r_table_reduce(RTable *t, int nth) {\r\n\t// When the music stops rows will be cols and cols... rows!\r\n\treturn 0;\r\n}\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMwMjM3Mzc3MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"wat\n> On 18 May 2017, at 12:21, Anton Kochkov <notifications@github.com> wrote:\n> \n> Like for graphs, but for making ASCII/UTF-8 tables instead.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/7519>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lmx5gFHRK-4lzFhxT4NdK1SztI7Dks5r7BvDgaJpZM4NfBL6>.\n> \n\n","createdAt":"2017-05-18T11:08:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7519#issuecomment-302373770","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMjM4NTI2MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"For example you'll want to make some table in r2 output, something like that:\r\n```\r\n   31  30       26 25                                  0\r\n +----+-----------+-------------------------------------+\r\n | op | 0 0 1 0 1 |                 imm26               |\r\n +----+-----------+-------------------------------------+\r\n```\r\nBut having a generic API to do that, like graph API/commands will make it easier to improve some r2 commands output. E.g. some commands can have this table output.","createdAt":"2017-05-18T12:08:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7519#issuecomment-302385261","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMjM4NTgxMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Ah you want an api to do ascii art tables? Ok\n\n> On 18 May 2017, at 14:08, Anton Kochkov <notifications@github.com> wrote:\n> \n> For example you'll want to make some table in r2 output, something like that:\n> \n>  *   31  30       26 25                                  0\n>  * +----+-----------+-------------------------------------+\n>  * | op | 0 0 1 0 1 |                 imm26               |\n>  * +----+-----------+-------------------------------------+\n> But having a generic API to do that, like graph API/commands will make it easier to improve some r2 commands output. E.g. some commands can have this table output.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-05-18T12:11:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7519#issuecomment-302385810","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwNjY3MzkyNw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"This seems useful for prettifying also \"dbta\" command.","createdAt":"2017-06-07T03:10:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7519#issuecomment-306673927","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU1MDE2MDE1NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@ret2libc @radare for the table API syntax ideas/changes for the tree-sitter parser.","createdAt":"2019-11-06T06:08:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7519#issuecomment-550160154","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU1MDIxMTgzMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"uhm we just need to define commands, but the api is there, suggestions?","createdAt":"2019-11-06T08:58:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7519#issuecomment-550211833","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2MTQ4MzM5NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Postponing to 4.2.0","createdAt":"2019-12-04T05:27:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7519#issuecomment-561483395","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTk4MTY1OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@ret2libc since you mentioned the table API in the another PR - here the feedback/proposals are welcome.","createdAt":"2020-01-19T08:55:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7519#issuecomment-575981659","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTk5MDY3NA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@XVilka isn't it already implemented? Why is the issue still open?","createdAt":"2020-01-19T10:35:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7519#issuecomment-575990674","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTk5MTM0Nw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@ret2libc API is implemented, but not the commands, like we have the generic commands for graphs for example.","createdAt":"2020-01-19T10:42:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7519#issuecomment-575991347","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTk5MjczMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Some API functions are not implemented yet too: https://github.com/radareorg/radare2/blob/master/libr/util/table.c#L858","createdAt":"2020-01-19T10:59:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7519#issuecomment-575992731","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyNzMxMzA0Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@XVilka i have updated the issue text and title to be in sync with the current situation","createdAt":"2020-05-12T12:31:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7519#issuecomment-627313043","viewerDidAuthor":false}],"number":7519,"title":"Add commands to create, display and process an RTable"},{"body":"With the latest git version, I'm seeing a lot of cases where code is being flagged as data when analysing a MIPS or MIPSel binary. For example, see the four places where this has happened in this small function:\r\n\r\n```\r\n[0x00413aa0]> pdf @ 0x0060b6e8\r\n/ (fcn) fcn.0060b6e8 180\r\n|   fcn.0060b6e8 ();\r\n|           ; var int local_18h @ sp+0x18\r\n|           ; var int local_1ch @ sp+0x1c\r\n|           ; var int local_20h @ sp+0x20\r\n|           0x0060b6e8      d8ffbd27       addiu sp, sp, -0x28\r\n|           0x0060b6ec      1800b0af       sw s0, 0x18(sp)\r\n|           0x0060b6f0      2000bfaf       sw ra, 0x20(sp)\r\n|           0x0060b6f4      1c00b1af       sw s1, 0x1c(sp)\r\n|           0x0060b6f8      14008290       lbu v0, 0x14(a0)\r\n|           0x0060b6fc      21808000       move s0, a0\r\n|       ,=< 0x0060b700      09004510       beq v0, a1, 0x60b728\r\n|       |   0x0060b704      1c00848c       lw a0, 0x1c(a0)\r\n|       |   0x0060b708      01000224       addiu v0, zero, 1\r\n|      ,==< 0x0060b70c      0d00a210       beq a1, v0, 0x60b744\r\n|      ||   0x0060b710      21180000       move v1, zero\r\n|      ||   0x0060b714      e845100c       jal sym.imp.unlink          ; int unlink(const char *path)\r\n|      ||   0x0060b718      00000000       nop\r\n|     ,===< 0x0060b71c      10004014       bnez v0, 0x60b760\r\n|     |||   0x0060b720      00000000       nop\r\n|     |||   0x0060b724      140000a2       sb zero, 0x14(s0)\r\n|    .--`-> 0x0060b728      21180000       move v1, zero\r\n|   .---.-> 0x0060b72c      2000bf8f       lw ra, 0x20(sp)\r\n|  .------> 0x0060b730      1c00b18f       lw s1, 0x1c(sp)\r\n|  ||||||   0x0060b734      1800b08f       lw s0, 0x18(sp)\r\n|  ||||||   0x0060b738      21106000       move v0, v1\r\n|  ||||||   0x0060b73c      0800e003       jr ra\r\n|  ||||||   0x0060b740      2800bd27       addiu sp, sp, 0x28          ; '('\r\n|  ||||`--> 0x0060b744      140005a2       sb a1, 0x14(s0)\r\n|  |||| |   0x0060b748      2000bf8f       lw ra, 0x20(sp)\r\n|  |||| |   0x0060b74c      1c00b18f       lw s1, 0x1c(sp)\r\n|  |||| |   0x0060b750      1800b08f       lw s0, 0x18(sp)\r\n|  |||| |   0x0060b754      21106000       move v0, v1\r\n|  |||| |   0x0060b758      0800e003       jr ra\r\n|  |||| |   0x0060b75c      2800bd27       addiu sp, sp, 0x28          ; '('\r\n|  |||`---> 0x0060b760      a04a100c       jal sym.imp.__errno_location\r\n|  |||  |   0x0060b764      00000000       nop\r\n|  |||  |   0x0060b768      0000518c       lw s1, (v0)\r\n|  |||  |   0x0060b76c      02000224       addiu v0, zero, 2\r\n|  ||`====< 0x0060b770      edff2212       beq s1, v0, 0x60b728\r\n|  ||   |   0x0060b774      21202002       move a0, s1\r\n|  ||   |   0x0060b778      10cf160c       jal fcn.005b3c40\r\n|  ||   |   0x0060b77c      0a080524       addiu a1, zero, 0x80a\r\n|  |`=====< 0x0060b780      eaff4010       beqz v0, 0x60b72c\r\n|  |    |   0x0060b784      21184000       move v1, v0\r\n|  |    |   0x0060b788      05000224       addiu v0, zero, 5\r\n|  `======< 0x0060b78c      e8ff6210       beq v1, v0, 0x60b730\r\n|       |   0x0060b790      2000bf8f       lw ra, 0x20(sp)\r\n|       `=< 0x0060b794      cb2d1808       j 0x60b72c\r\n\\           0x0060b798      180011ae       sw s1, 0x18(s0)\r\n\r\n[0x00413aa0]> aav @ 0x0060b6e8\r\naav: using from to 0x400000 0xa9b990\r\nUsing vmin 0x400000 and vmax 0xdcbe3c\r\n[0x00413aa0]> pdf @ 0x0060b6e8\r\n\r\n/ (fcn) fcn.0060b6e8 180\r\n|   fcn.0060b6e8 ();\r\n|           ; var int local_18h @ sp+0x18\r\n|           ; var int local_1ch @ sp+0x1c\r\n|           ; var int local_20h @ sp+0x20\r\n|           0x0060b6e8      d8ffbd27       addiu sp, sp, -0x28\r\n|           0x0060b6ec      1800b0af       sw s0, 0x18(sp)\r\n|           0x0060b6f0      2000bfaf       sw ra, 0x20(sp)\r\n|           0x0060b6f4      1c00b1af       sw s1, 0x1c(sp)\r\n|           0x0060b6f8      14008290       lbu v0, 0x14(a0)\r\n|           0x0060b6fc      .dword 0x00808021 ; sym.0x00808021\r\n|           0x0060b700      09004510       beq v0, a1, 0x60b728\r\n|           0x0060b704      1c00848c       lw a0, 0x1c(a0)\r\n|           0x0060b708      01000224       addiu v0, zero, 1\r\n|       ,=< 0x0060b70c      0d00a210       beq a1, v0, 0x60b744\r\n|       |   0x0060b710      21180000       move v1, zero\r\n|       |   0x0060b714      e845100c       jal sym.imp.unlink          ; int unlink(const char *path)\r\n|       |   0x0060b718      00000000       nop\r\n|      ,==< 0x0060b71c      10004014       bnez v0, 0x60b760\r\n|      ||   0x0060b720      00000000       nop\r\n|      ||   0x0060b724      140000a2       sb zero, 0x14(s0)\r\n|     .---> 0x0060b728      21180000       move v1, zero\r\n|   ..----> 0x0060b72c      2000bf8f       lw ra, 0x20(sp)\r\n|  .------> 0x0060b730      1c00b18f       lw s1, 0x1c(sp)\r\n|  ||||||   0x0060b734      1800b08f       lw s0, 0x18(sp)\r\n|  ||||||   0x0060b738      .dword 0x00601021 ; sym.0x00601021\r\n|  ||||||   0x0060b73c      0800e003       jr ra\r\n|  ||||||   0x0060b740      2800bd27       addiu sp, sp, 0x28          ; '('\r\n|  |||||`-> 0x0060b744      140005a2       sb a1, 0x14(s0)\r\n|  |||||    0x0060b748      2000bf8f       lw ra, 0x20(sp)\r\n|  |||||    0x0060b74c      1c00b18f       lw s1, 0x1c(sp)\r\n|  |||||    0x0060b750      1800b08f       lw s0, 0x18(sp)\r\n|  |||||    0x0060b754      .dword 0x00601021 ; sym.0x00601021\r\n|  |||||    0x0060b758      0800e003       jr ra\r\n|  |||||    0x0060b75c      2800bd27       addiu sp, sp, 0x28          ; '('\r\n|  ||||`--> 0x0060b760      a04a100c       jal sym.imp.__errno_location\r\n|  ||||     0x0060b764      00000000       nop\r\n|  ||||     0x0060b768      0000518c       lw s1, (v0)\r\n|  ||||     0x0060b76c      02000224       addiu v0, zero, 2\r\n|  |||`===< 0x0060b770      edff2212       beq s1, v0, 0x60b728\r\n|  |||      0x0060b774      21202002       move a0, s1\r\n|  |||      0x0060b778      10cf160c       jal fcn.005b3c40\r\n|  |||      0x0060b77c      0a080524       addiu a1, zero, 0x80a\r\n|  |`=====< 0x0060b780      eaff4010       beqz v0, 0x60b72c\r\n|  | |      0x0060b784      .dword 0x00401821 ; sym.0x00401821\r\n|  | |      0x0060b788      05000224       addiu v0, zero, 5\r\n|  `======< 0x0060b78c      e8ff6210       beq v1, v0, 0x60b730\r\n|    |      0x0060b790      2000bf8f       lw ra, 0x20(sp)\r\n|    `====< 0x0060b794      cb2d1808       j 0x60b72c\r\n\\           0x0060b798      180011ae       sw s1, 0x18(s0)\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMwMDQzMjgzMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"yep thats â€œexpectedâ€. because mips compilers mix code and data pointers in the same section. soâ€¦ what do you think it would be the best way to remove those false positives of aav?\n\n\n> On 10 May 2017, at 11:06, hummypkg <notifications@github.com> wrote:\n> \n> With the latest git version, I'm seeing a lot of cases where code is being flagged as data when analysing a MIPS or MIPSel binary. For example, see the four places where this has happened in this small function:\n> \n> [0x00413aa0]> pdf @ 0x0060b6e8\n> / (fcn) fcn.0060b6e8 180\n> |   fcn.0060b6e8 ();\n> |           ; var int local_18h @ sp+0x18\n> |           ; var int local_1ch @ sp+0x1c\n> |           ; var int local_20h @ sp+0x20\n> |           0x0060b6e8      d8ffbd27       addiu sp, sp, -0x28\n> |           0x0060b6ec      1800b0af       sw s0, 0x18(sp)\n> |           0x0060b6f0      2000bfaf       sw ra, 0x20(sp)\n> |           0x0060b6f4      1c00b1af       sw s1, 0x1c(sp)\n> |           0x0060b6f8      14008290       lbu v0, 0x14(a0)\n> |           0x0060b6fc      21808000       move s0, a0\n> |       ,=< 0x0060b700      09004510       beq v0, a1, 0x60b728\n> |       |   0x0060b704      1c00848c       lw a0, 0x1c(a0)\n> |       |   0x0060b708      01000224       addiu v0, zero, 1\n> |      ,==< 0x0060b70c      0d00a210       beq a1, v0, 0x60b744\n> |      ||   0x0060b710      21180000       move v1, zero\n> |      ||   0x0060b714      e845100c       jal sym.imp.unlink          ; int unlink(const char *path)\n> |      ||   0x0060b718      00000000       nop\n> |     ,===< 0x0060b71c      10004014       bnez v0, 0x60b760\n> |     |||   0x0060b720      00000000       nop\n> |     |||   0x0060b724      140000a2       sb zero, 0x14(s0)\n> |    .--`-> 0x0060b728      21180000       move v1, zero\n> |   .---.-> 0x0060b72c      2000bf8f       lw ra, 0x20(sp)\n> |  .------> 0x0060b730      1c00b18f       lw s1, 0x1c(sp)\n> |  ||||||   0x0060b734      1800b08f       lw s0, 0x18(sp)\n> |  ||||||   0x0060b738      21106000       move v0, v1\n> |  ||||||   0x0060b73c      0800e003       jr ra\n> |  ||||||   0x0060b740      2800bd27       addiu sp, sp, 0x28          ; '('\n> |  ||||`--> 0x0060b744      140005a2       sb a1, 0x14(s0)\n> |  |||| |   0x0060b748      2000bf8f       lw ra, 0x20(sp)\n> |  |||| |   0x0060b74c      1c00b18f       lw s1, 0x1c(sp)\n> |  |||| |   0x0060b750      1800b08f       lw s0, 0x18(sp)\n> |  |||| |   0x0060b754      21106000       move v0, v1\n> |  |||| |   0x0060b758      0800e003       jr ra\n> |  |||| |   0x0060b75c      2800bd27       addiu sp, sp, 0x28          ; '('\n> |  |||`---> 0x0060b760      a04a100c       jal sym.imp.__errno_location\n> |  |||  |   0x0060b764      00000000       nop\n> |  |||  |   0x0060b768      0000518c       lw s1, (v0)\n> |  |||  |   0x0060b76c      02000224       addiu v0, zero, 2\n> |  ||`====< 0x0060b770      edff2212       beq s1, v0, 0x60b728\n> |  ||   |   0x0060b774      21202002       move a0, s1\n> |  ||   |   0x0060b778      10cf160c       jal fcn.005b3c40\n> |  ||   |   0x0060b77c      0a080524       addiu a1, zero, 0x80a\n> |  |`=====< 0x0060b780      eaff4010       beqz v0, 0x60b72c\n> |  |    |   0x0060b784      21184000       move v1, v0\n> |  |    |   0x0060b788      05000224       addiu v0, zero, 5\n> |  `======< 0x0060b78c      e8ff6210       beq v1, v0, 0x60b730\n> |       |   0x0060b790      2000bf8f       lw ra, 0x20(sp)\n> |       `=< 0x0060b794      cb2d1808       j 0x60b72c\n> \\           0x0060b798      180011ae       sw s1, 0x18(s0)\n> \n> [0x00413aa0]> aav @ 0x0060b6e8\n> aav: using from to 0x400000 0xa9b990\n> Using vmin 0x400000 and vmax 0xdcbe3c\n> [0x00413aa0]> pdf @ 0x0060b6e8\n> \n> / (fcn) fcn.0060b6e8 180\n> |   fcn.0060b6e8 ();\n> |           ; var int local_18h @ sp+0x18\n> |           ; var int local_1ch @ sp+0x1c\n> |           ; var int local_20h @ sp+0x20\n> |           0x0060b6e8      d8ffbd27       addiu sp, sp, -0x28\n> |           0x0060b6ec      1800b0af       sw s0, 0x18(sp)\n> |           0x0060b6f0      2000bfaf       sw ra, 0x20(sp)\n> |           0x0060b6f4      1c00b1af       sw s1, 0x1c(sp)\n> |           0x0060b6f8      14008290       lbu v0, 0x14(a0)\n> |           0x0060b6fc      .dword 0x00808021 ; sym.0x00808021\n> |           0x0060b700      09004510       beq v0, a1, 0x60b728\n> |           0x0060b704      1c00848c       lw a0, 0x1c(a0)\n> |           0x0060b708      01000224       addiu v0, zero, 1\n> |       ,=< 0x0060b70c      0d00a210       beq a1, v0, 0x60b744\n> |       |   0x0060b710      21180000       move v1, zero\n> |       |   0x0060b714      e845100c       jal sym.imp.unlink          ; int unlink(const char *path)\n> |       |   0x0060b718      00000000       nop\n> |      ,==< 0x0060b71c      10004014       bnez v0, 0x60b760\n> |      ||   0x0060b720      00000000       nop\n> |      ||   0x0060b724      140000a2       sb zero, 0x14(s0)\n> |     .---> 0x0060b728      21180000       move v1, zero\n> |   ..----> 0x0060b72c      2000bf8f       lw ra, 0x20(sp)\n> |  .------> 0x0060b730      1c00b18f       lw s1, 0x1c(sp)\n> |  ||||||   0x0060b734      1800b08f       lw s0, 0x18(sp)\n> |  ||||||   0x0060b738      .dword 0x00601021 ; sym.0x00601021\n> |  ||||||   0x0060b73c      0800e003       jr ra\n> |  ||||||   0x0060b740      2800bd27       addiu sp, sp, 0x28          ; '('\n> |  |||||`-> 0x0060b744      140005a2       sb a1, 0x14(s0)\n> |  |||||    0x0060b748      2000bf8f       lw ra, 0x20(sp)\n> |  |||||    0x0060b74c      1c00b18f       lw s1, 0x1c(sp)\n> |  |||||    0x0060b750      1800b08f       lw s0, 0x18(sp)\n> |  |||||    0x0060b754      .dword 0x00601021 ; sym.0x00601021\n> |  |||||    0x0060b758      0800e003       jr ra\n> |  |||||    0x0060b75c      2800bd27       addiu sp, sp, 0x28          ; '('\n> |  ||||`--> 0x0060b760      a04a100c       jal sym.imp.__errno_location\n> |  ||||     0x0060b764      00000000       nop\n> |  ||||     0x0060b768      0000518c       lw s1, (v0)\n> |  ||||     0x0060b76c      02000224       addiu v0, zero, 2\n> |  |||`===< 0x0060b770      edff2212       beq s1, v0, 0x60b728\n> |  |||      0x0060b774      21202002       move a0, s1\n> |  |||      0x0060b778      10cf160c       jal fcn.005b3c40\n> |  |||      0x0060b77c      0a080524       addiu a1, zero, 0x80a\n> |  |`=====< 0x0060b780      eaff4010       beqz v0, 0x60b72c\n> |  | |      0x0060b784      .dword 0x00401821 ; sym.0x00401821\n> |  | |      0x0060b788      05000224       addiu v0, zero, 5\n> |  `======< 0x0060b78c      e8ff6210       beq v1, v0, 0x60b730\n> |    |      0x0060b790      2000bf8f       lw ra, 0x20(sp)\n> |    `====< 0x0060b794      cb2d1808       j 0x60b72c\n> \\           0x0060b798      180011ae       sw s1, 0x18(s0)\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/7466>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lu7BvyoA2mvN4BVKU75_elX7E7Tdks5r4X4hgaJpZM4NWYFl>.\n> \n\n","createdAt":"2017-05-10T09:49:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7466#issuecomment-300432831","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMDUwMTU3NQ==","author":{"login":"hummypkg"},"authorAssociation":"CONTRIBUTOR","body":"I think that would take heuristics to see if it's just one reference in the middle of a function that isn't jumped over.\r\nanal.vinfun=false will do me for now though, thanks for the response.","createdAt":"2017-05-10T14:34:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7466#issuecomment-300501575","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMDUwNTEyMg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Can you share the binary","createdAt":"2017-05-10T14:45:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7466#issuecomment-300505122","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMDUwNTE0MA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"at least","createdAt":"2017-05-10T14:45:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7466#issuecomment-300505140","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMDUwNjk5OA==","author":{"login":"hummypkg"},"authorAssociation":"CONTRIBUTOR","body":"http://hpkg.tv/misc/7466.gz","createdAt":"2017-05-10T14:50:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7466#issuecomment-300506998","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMDUyMTE3MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Dont close it. Its a false positive that must be fixed\n\n> On 10 May 2017, at 16:45, Maijin <notifications@github.com> wrote:\n> \n> Closed #7466.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-05-10T15:34:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7466#issuecomment-300521170","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMDUyOTA0Ng==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Use github to upload next time\r\n[7466.gz](https://github.com/radare/radare2/files/990406/7466.gz)\r\n","createdAt":"2017-05-10T15:58:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7466#issuecomment-300529046","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMTMyMTgzNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping? any idea?","createdAt":"2017-05-14T15:57:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7466#issuecomment-301321837","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMTYwNjExNw==","author":{"login":"alvarofe"},"authorAssociation":"CONTRIBUTOR","body":"This is similar to https://github.com/radare/radare2/issues/6653 where in that case `vinfun=true` was the solution. I would say is not that easy to fix, but would be great to have a binary to test.","createdAt":"2017-05-15T21:11:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7466#issuecomment-301606117","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMTYxNTYyNg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@alvarofe the binary is in the issue","createdAt":"2017-05-15T21:52:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7466#issuecomment-301615626","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU3NzUzMA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T07:10:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7466#issuecomment-644577530","viewerDidAuthor":false}],"number":7466,"title":"Code being interpreted as data in MIPS(el) after 'aav'"},{"body":"https://code.google.com/archive/p/miniz/","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI5OTg1NDkyOQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"for what","createdAt":"2017-05-08T12:36:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7451#issuecomment-299854929","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI5OTg5ODE0Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"To replace zlib/libz? (Less code to maintain)\n\n> On 8 May 2017, at 14:36, Maijin <notifications@github.com> wrote:\n> \n> for what\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-05-08T15:21:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7451#issuecomment-299898146","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU3NzU1Ng==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T07:10:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7451#issuecomment-644577556","viewerDidAuthor":false}],"number":7451,"title":"Evaluate the use of miniz instead of zlib/libz"},{"body":"For splwow64.exe, after analyzing with jmptable and hasnext parameters set to true:\r\n\r\nFunctions at the beginning of the code are not detected. Code starts at 0x140003b00, function detection picks up at 0x140003c48, functions at 0x140003b00, 0x140003b90 and 0x140003bc0 are not found. I think these are member functions in vtables and/or exception handlers, nothing directly referenced.\r\n\r\nThe last function detected, 0x14000eeb0 is an exception handling structure, and mistakenly interpreted as function. \r\n\r\npassword infected\r\n[splwow64.zip](https://github.com/radare/radare2/files/981859/splwow64.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY1MTc1MzQyMQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-30T12:14:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7443#issuecomment-651753421","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MTg1MzYzMg==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"It is only happening when running with anal.hasnext, without this option (which is not enabled by default) and it is known to analyze data in some situations.\r\n\r\nAlso it will be good to have a test, but probably we can't distribute this executable, do we? :D","createdAt":"2020-06-30T15:05:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7443#issuecomment-651853632","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY1MTg2MzEzMA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"It should be checked if `anal.hasnext` is really necessary. In last 3 years analysis has changed a lot, so maybe that var is not necessary to identify functions in this bin. Just guessing though. ","createdAt":"2020-06-30T15:21:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7443#issuecomment-651863130","viewerDidAuthor":false}],"number":7443,"title":"functions missed in splwow64.exe"},{"body":"When analyzing twain_32.dll with the config anal.hasnext = true, a lot more legitimate functions are detected than without; however also a jumptable is analyzed as a function. See below, 0x66204a6d is the jumptable offset.\r\n\r\nHave seen this happen with a number of binaries & jumptables more.\r\n\r\n```\r\n[0x6620b550]> pd 10 @ 0x66204a6d\r\n/ (fcn) fcn.66204a6d 80\r\n|   fcn.66204a6d ();\r\n|              ; JMP XREF from 0x66204971 (fcn.6620494d)\r\n|              ; DATA XREF from 0x66204971 (fcn.6620494d)\r\n|       ,=< 0x66204a6d      7849           js 0x66204ab8\r\n|       |   0x66204a6f      206697         and byte [esi - 0x69], ah\r\n|       |   0x66204a72      49             dec ecx\r\n|       |   0x66204a73      20669e         and byte [esi - 0x62], ah\r\n|       |   0x66204a76      49             dec ecx\r\n|       |   0x66204a77      2066a5         and byte [esi - 0x5b], ah\r\n|       |   0x66204a7a      49             dec ecx\r\n|       |   0x66204a7b      2066ac         and byte [esi - 0x54], ah\r\n|       |   0x66204a7e      49             dec ecx\r\n|       |   0x66204a7f      2066b3         and byte [esi - 0x4d], ah\r\n[0x6620b550]> axt @ 0x66204a6d\r\ncode 0x66204971 jmp dword [eax*4 + fcn.66204a6d] in fcn.6620494d\r\ndata 0x66204971 jmp dword [eax*4 + fcn.66204a6d] in fcn.6620494d\r\n```\r\n\r\npassword infected\r\n[twain_32.dll.zip](https://github.com/radare/radare2/files/981158/twain_32.dll.zip)\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI5OTY2Njk2Ng==","author":{"login":"pinkflawd"},"authorAssociation":"CONTRIBUTOR","body":"Same case at 0x66203e5d ","createdAt":"2017-05-06T21:28:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7435#issuecomment-299666966","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI5OTY2ODQwMg==","author":{"login":"alvarofe"},"authorAssociation":"CONTRIBUTOR","body":"Try with `e anal.jmptbl=true` is gonna spit r2 commands. This was an experiment by pancake that must be improved. I will try to take a look in the following days since I need this as well for other stuff. However, 0x66204a6d is still a function.\r\n\r\n![image](https://cloud.githubusercontent.com/assets/3474042/25776165/6d860c78-32b7-11e7-9e7a-d7d05acf102e.png)\r\n","createdAt":"2017-05-06T21:58:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7435#issuecomment-299668402","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI5OTY5MjY0MA==","author":{"login":"pinkflawd"},"authorAssociation":"CONTRIBUTOR","body":"Yup, tried jmptbl, doesn't change the issue, ```e anal.hasnext = true``` is the troublemaker in this case :)","createdAt":"2017-05-07T09:21:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7435#issuecomment-299692640","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MTc1MzQzMQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-30T12:14:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7435#issuecomment-651753431","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MTg0OTA0MA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"The analysis issue for this binary has been fixed already, i have tried with hasnext enabled and disabled, and in both cases the control flow is correct. We will need to add 2 tests for this (with and without hasnext), but i have some questions here:\r\n\r\n* Why a 56KB binary takes so much time to load? \r\n  * @pinkflawd would you like to submit a PR adding those tests? I can help you on any question if needed\r\n* I understand this binary comes from Windows and we can't distribute it in the testsuite, so which is the right solution?\r\n\r\nThanks for reporting!!\r\n\r\nAlso i have the idea that if we submit and associate tests to specific issues it will be possible to automatically add feedback to the issues when the specific test is fixed. because like in this case, the analysis bug was fixed by fixing another problem","createdAt":"2020-06-30T14:58:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7435#issuecomment-651849040","viewerDidAuthor":true}],"number":7435,"title":"Jumptables detected as functions in twain_32.dll"},{"body":"see https://asciinema.org/a/4tmrkkktjr5u8nvgh3vec14e0\r\n\r\nthe widestrings seems to screw escape sequences.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU3NzYwNg==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T07:10:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7431#issuecomment-644577606","viewerDidAuthor":false}],"number":7431,"title":"widestring and e scr.color"},{"body":"","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI5OTM0ODM5Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"we can do that without touching io.. just making r2 query the filesystem to retrieve all possible timestamps from it. this may be  handy for forensics.","createdAt":"2017-05-05T01:03:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7420#issuecomment-299348396","viewerDidAuthor":false}],"number":7420,"title":"Show timestamp of opened file in `i` #opsiol"},{"body":"radare2 1.5.0-git 14625 @ linux-x86-64 git.1.4.0-74-gd2fd4c6\r\ncommit: d2fd4c6727bafadeb480955e073e8ad9fa412570 build: 2017-04-30__13:31:00\r\n\r\n[BINARY.EXE.zip](https://github.com/radare/radare2/files/977188/BINARY.EXE.zip) - compiled binary\r\n[radarebug_valgrind.txt](https://github.com/radare/radare2/files/977195/radarebug_valgrind.txt) - valgrind error\r\n[SOURCE.TXT](https://github.com/radare/radare2/files/977211/SOURCE.TXT) - asm source code\r\n![screenshot](https://cloud.githubusercontent.com/assets/4210789/25719459/40ac9074-3112-11e7-97f2-ed21658ab031.jpg)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI5OTQwNTE4MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"e asm.midflags=0\n\nThats why i have been asking for a month for feedback on the midflags change..\n\n> On 4 May 2017, at 20:41, szt <notifications@github.com> wrote:\n> \n> radare2 1.5.0-git 14625 @ linux-x86-64 git.1.4.0-74-gd2fd4c6\n> commit: d2fd4c6 build: 2017-04-30__13:31:00\n> \n> BINARY.EXE.zip - compiled binary\n> radarebug_valgrind.txt - valgrind error\n> SOURCE.TXT - asm source code\n> \n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-05-05T07:59:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7418#issuecomment-299405181","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU3NzU5Mg==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T07:10:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7418#issuecomment-644577592","viewerDidAuthor":false}],"number":7418,"title":"MZ aaaa bug (some memory error)"},{"body":"Hi, please check this challenge:\r\nhttps://github.com/bluec0re/reversing-radare2/tree/master/sources/challenge03\r\nThe link to the object seems to change behavior in last few releases.\r\n\r\nAfter using aaaa:\r\n![image](https://cloud.githubusercontent.com/assets/6576335/25712459/05db73a4-30f2-11e7-8ac4-9fe9b6b571e1.png)\r\n\r\nAfter using dx on the string:\r\n![image](https://cloud.githubusercontent.com/assets/6576335/25712281/80b30e9e-30f1-11e7-9aa9-2b98c7a18f2e.png)\r\n\r\nAlso, is it possible to make the reference traceable from the functions?","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI5OTQzMDM4Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"aaaa is experimental so its expected to have changes.\r\n\r\ni dont know which object are you talking about, what do you mean by the reference traceable from all functions. Vdx basically runs './r $$' depending on the case you will need to use /re instead.. and this is very inneficient.thats why its not executed from aaaa, but one option would be to add ./r $$ @@ str* in aaaaa. what do you think @Maijin ? ","createdAt":"2017-05-05T10:17:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7415#issuecomment-299430387","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI5OTQzMDQ1Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can you try running aar and see if it catches those refs?","createdAt":"2017-05-05T10:18:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7415#issuecomment-299430456","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI5OTQzODM4NQ==","author":{"login":"MariasStory"},"authorAssociation":"NONE","body":"Hi @radare,\r\n\r\nI did try aar and it did not help. The \"./r $$ @@ str*\" on another hand did find the refs.\r\n\r\nLet me be more specific about this challenge. The code used:\r\n```\r\ntypedef struct CONTEXT {    /*pointer to a tructure used to pass args to func.*/ \r\n    int tries;\r\n    char inputPassword[256];\r\n    const char** pwdList;\r\n    const char** currentPassword;\r\n} CONTEXT, *PCONTEXT;\r\n\r\nconst const char* passwords[] = {    /*pointer to an object*/ \r\n    \"shad7Pe\",\r\n    \"miTho7i\",\r\n    \"Wa3suac\",\r\n    \"ohGhah7\",\r\n    \"Aibah1a\",\r\n    NULL\r\n};\r\n\r\nctxt.currentPassword = passwords    /*this association is not showing the ref. to the strings*/ \r\n\r\ncheckPassword(&ctxt)   /*pointer to a struct. send to a func.*/ \r\n\r\nBOOL checkPassword(PCONTEXT context) {\r\n    for(context->currentPassword = context->pwdList;  /*pointer to astruct. is not seen in r2*/ \r\n\r\n```\r\n\r\nI would like to have the context passed to the function also be recognised in r2. In this case rcx is passed to the func. as a ref.\r\n\r\n![image](https://cloud.githubusercontent.com/assets/6576335/25743139/3b181828-3193-11e7-8e5e-833e45a2936c.png)\r\n\r\n![image](https://cloud.githubusercontent.com/assets/6576335/25743210/869b42ac-3193-11e7-982e-bd425ced467f.png)\r\n\r\nThis would be nice to save the manual work of finding the references to the func. args manually. Although, I do know that it is a part of a bigger effort.\r\n\r\nThanks,\r\nTolik","createdAt":"2017-05-05T11:09:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7415#issuecomment-299438385","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI5OTQ0MDMyMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"you have to initialize the stack to get thos refs correctly working. use aeim","createdAt":"2017-05-05T11:21:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7415#issuecomment-299440323","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI5OTQ1NTAzNQ==","author":{"login":"MariasStory"},"authorAssociation":"NONE","body":"I did it the first time. Do you have a specific way to get the solution to this challenge?\r\n\r\nMaybe you can show your way to solve it?\r\n\r\nThe solution in https://insinuator.net/2016/10/reverse-engineering-with-radare2-part-3/\r\nis way too specific and I don't see a generic solution to solve such challenge.","createdAt":"2017-05-05T12:45:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7415#issuecomment-299455035","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI5OTQ3MTI1MA==","author":{"login":"kazarmy"},"authorAssociation":"CONTRIBUTOR","body":"I find the following to be strange:\r\n```\r\n$ r2 challenge03.exe \r\n -- I love gradients.\r\n[0x00401510]> s 0x00401754\r\n[0x00401754]> pd 1\r\n            0x00401754      488d05c51800.  lea rax, str.shad7Pe        ; \"0@@\" ; 0x403020 ; \"0@@\" 0x00403020 \r\n[0x00401754]> aa\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[0x00401754]> pd 1\r\n|           0x00401754      488d05c51800.  lea rax, 0x00403020         ; \"0@@\" ; \"0@@\" 0x00403020 \r\n[0x00401754]> f~str.shad7Pe\r\n0x00404030 8 str.shad7Pe\r\n```\r\nClearly `0x00404030 != 0x00403020` so what on earth happened there?","createdAt":"2017-05-05T13:56:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7415#issuecomment-299471250","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI5OTY4MTQxNw==","author":{"login":"kazarmy"},"authorAssociation":"CONTRIBUTOR","body":"> Clearly 0x00404030 != 0x00403020 so what on earth happened there?\r\n\r\nOh `passwords` is an array of `char` pointers. Ah silly me.","createdAt":"2017-05-07T04:17:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7415#issuecomment-299681417","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxMzYyNjYwMQ==","author":{"login":"MariasStory"},"authorAssociation":"NONE","body":"Hi,\r\nDid someone check / fix / improve detection of such objects?\r\nI did not see improvements so far :-(","createdAt":"2017-07-07T08:55:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7415#issuecomment-313626601","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxMzYzMzE0MA==","author":{"login":"MariasStory"},"authorAssociation":"NONE","body":"BZW: There is a wrong parameter identification, see \"size_t\":\r\n![image](https://user-images.githubusercontent.com/6576335/27951730-2ddefc86-6306-11e7-873f-f64489b43ff9.png)\r\n\r\nI like this representation from x64dbg much better, and it is correct:\r\n![image](https://user-images.githubusercontent.com/6576335/27951766-49199fce-6306-11e7-93e6-b2dc57875a70.png)\r\n\r\nPlease, fix this bug ASAP.","createdAt":"2017-07-07T09:25:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7415#issuecomment-313633140","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxMzg0ODkzNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Can u add a testcase? oddcoder was in charge of this but there are no news from him for a long while, so having a test may help to improve the situation. im too busy right now for this, but yeah it should be done asap :)\n\n> On 7 Jul 2017, at 10:55, MariasStory <notifications@github.com> wrote:\n> \n> Hi,\n> Did someone check / fix / improve detection of such objects?\n> I did not see improvements so far :-(\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/7415#issuecomment-313626601>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lsmpdg1Ex0qR1cP76pIDLI4Zmp1Fks5sLfJ2gaJpZM4NQ3Zl>.\n> \n\n","createdAt":"2017-07-08T10:54:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7415#issuecomment-313848936","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxNjI2OTE1MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@MariasStory can you please craft a test case for https://github.com/radare/radare2-regressions ?","createdAt":"2017-07-19T04:26:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7415#issuecomment-316269151","viewerDidAuthor":false}],"number":7415,"title":"The pointer to an object is not reference."},{"body":"When trying to get the REIL form of the following ESIL line : `2,0x34,rbp,-,[4],==,$z,zf,=,$b32,cf,=,$p,pf,=,$s,sf,=,$o,of,= `, it seems there is some kind of leftover at the end of the representation. (ASM : `cmp dword [local_xh] , x` where x is any integer you want) \r\n\r\n```\r\n[0x00400510]> \"aetr 2,0x34,rbp,-,[4],==,$z,zf,=,$b32,cf,=,$p,pf,=,$s,sf,=,$o,of,=\"\r\n0000.00:      SUB     R_rbp:64 ,      0x34:64 ,      V_00:64\r\n0001.00:      LDM      V_00:64 ,              ,      V_01:64\r\n0001.01:       OR      V_01:64 ,         0:32 ,      V_03:32\r\n0002.00:       EQ      V_03:32 ,         2:64 ,      V_04:01\r\n0003.00:      STR      V_04:01 ,              ,      R_zf:01\r\n0004.00:      AND      0x3f:64 ,      0x20:64 ,      V_05:64\r\n0004.01:      ADD      0x3f:64 ,      V_05:64 ,      V_06:64\r\n0004.02:      AND      0x3f:64 ,      V_06:64 ,      V_07:64\r\n0004.03:      SHL       0x2:64 ,      V_07:64 ,      V_08:64\r\n0004.04:      SUB      V_08:64 ,       0x1:64 ,      V_09:64\r\n0004.05:      AND      V_09:64 ,      V_03:32 ,      V_10:64\r\n0004.06:      AND      V_09:64 ,      V_04:01 ,      V_11:64\r\n0004.07:       LT      V_10:64 ,      V_11:64 ,      V_12:01\r\n0004.08:      STR      V_12:01 ,              ,      R_cf:01\r\n0005.00:      AND      0xff:64 ,      V_04:01 ,      V_13:64\r\n0005.01:      SHR      V_13:64 ,       0x7:64 ,      V_14:64\r\n0005.02:      SHR      V_13:64 ,       0x6:64 ,      V_15:64\r\n0005.03:      XOR      V_15:64 ,      V_14:64 ,      V_16:64\r\n0005.04:      SHR      V_13:64 ,       0x5:64 ,      V_17:64\r\n0005.05:      SHR      V_13:64 ,       0x4:64 ,      V_18:64\r\n0005.06:      XOR      V_18:64 ,      V_17:64 ,      V_19:64\r\n0005.07:      XOR      V_19:64 ,      V_16:64 ,      V_20:64\r\n0005.08:      SHR      V_13:64 ,       0x3:64 ,      V_21:64\r\n0005.09:      SHR      V_13:64 ,       0x2:64 ,      V_22:64\r\n0005.0a:      XOR      V_22:64 ,      V_21:64 ,      V_23:64\r\n0005.0b:      SHR      V_13:64 ,       0x1:64 ,      V_24:64\r\n0005.0c:      XOR      V_13:64 ,      V_24:64 ,      V_25:64\r\n0005.0d:      XOR      V_25:64 ,      V_23:64 ,      V_26:64\r\n0005.0e:      XOR      V_26:64 ,      V_20:64 ,      V_27:64\r\n0005.0f:      AND       0x1:64 ,      V_27:64 ,      V_28:64\r\n0005.10:      NOT      V_28:64 ,              ,      V_29:64\r\n0005.11:       OR      V_29:64 ,         0:01 ,      V_30:01\r\n0005.12:      STR      V_30:01 ,              ,      R_pf:01\r\n0006.00:      SHL       0x1:64 ,      0x1f:64 ,      V_31:64\r\n0006.01:      AND      V_04:01 ,      V_31:64 ,      V_32:64\r\n0006.02:      SHR      V_32:64 ,      0x1f:64 ,      V_33:64\r\n0006.03:       OR      V_33:64 ,         0:01 ,      V_34:01\r\n0006.04:      STR      V_34:01 ,              ,      R_sf:01\r\n0007.00:      AND      0x3f:64 ,      0x20:64 ,      V_35:64\r\n0007.01:      ADD      0x3f:64 ,      V_35:64 ,      V_36:64\r\n0007.02:      AND      0x3f:64 ,      V_36:64 ,      V_37:64\r\n0007.03:      SHL       0x2:64 ,      V_37:64 ,      V_38:64\r\n0007.04:      SUB      V_38:64 ,       0x1:64 ,      V_39:64\r\n0007.05:      AND      V_39:64 ,      V_03:32 ,      V_40:64\r\n0007.06:      AND      V_39:64 ,      V_04:01 ,      V_41:64\r\n0007.07:       LT      V_40:64 ,      V_41:64 ,      V_42:01\r\n0007.08:      AND      0x3f:64 ,      0x1e:64 ,      V_43:64\r\n0007.09:      SHL       0x2:64 ,      V_43:64 ,      V_44:64\r\n0007.0a:      SUB      V_44:64 ,       0x1:64 ,      V_45:64\r\n0007.0b:      AND      V_45:64 ,      V_03:32 ,      V_46:64\r\n0007.0c:      AND      V_45:64 ,      V_04:01 ,      V_47:64\r\n0007.0d:       LT      V_47:64 ,      V_46:64 ,      V_48:01\r\n0007.0e:      XOR      V_48:01 ,      V_42:01 ,      V_49:01\r\n0007.0f:      STR      V_49:01 ,              ,      R_of:01\r\nV_04:1\r\n```\r\nIn the example above, you can see `V_04:1` alone on the last line. I think it shouldn't be here unless I got something wrong about REIL formatting.\r\n\r\nAnother example : in this one there is a trailing `cf` and `$0` at the end\r\n```\r\n[0x00400510]> \"aetr rax,eax,^=,$z,zf,=,$p,pf,=,$s,sf,=,$0,cf,=0xffffffff,rax,&=\"\r\n0000.00:      XOR     R_eax:32 ,     R_rax:64 ,      V_00:64\r\n0000.01:      STR     R_eax:32 ,              ,      V_01:32\r\n0000.02:       OR      V_00:64 ,         0:32 ,      V_02:32\r\n0000.03:      STR      V_02:32 ,              ,     R_eax:32\r\n0001.00:       OR     R_eax:32 ,         0:01 ,      V_03:01\r\n0001.01:      STR      V_03:01 ,              ,      R_zf:01\r\n0002.00:      AND      0xff:64 ,     R_eax:32 ,      V_04:64\r\n0002.01:      SHR      V_04:64 ,       0x7:64 ,      V_05:64\r\n0002.02:      SHR      V_04:64 ,       0x6:64 ,      V_06:64\r\n0002.03:      XOR      V_06:64 ,      V_05:64 ,      V_07:64\r\n0002.04:      SHR      V_04:64 ,       0x5:64 ,      V_08:64\r\n0002.05:      SHR      V_04:64 ,       0x4:64 ,      V_09:64\r\n0002.06:      XOR      V_09:64 ,      V_08:64 ,      V_10:64\r\n0002.07:      XOR      V_10:64 ,      V_07:64 ,      V_11:64\r\n0002.08:      SHR      V_04:64 ,       0x3:64 ,      V_12:64\r\n0002.09:      SHR      V_04:64 ,       0x2:64 ,      V_13:64\r\n0002.0a:      XOR      V_13:64 ,      V_12:64 ,      V_14:64\r\n0002.0b:      SHR      V_04:64 ,       0x1:64 ,      V_15:64\r\n0002.0c:      XOR      V_04:64 ,      V_15:64 ,      V_16:64\r\n0002.0d:      XOR      V_16:64 ,      V_14:64 ,      V_17:64\r\n0002.0e:      XOR      V_17:64 ,      V_11:64 ,      V_18:64\r\n0002.0f:      AND       0x1:64 ,      V_18:64 ,      V_19:64\r\n0002.10:      NOT      V_19:64 ,              ,      V_20:64\r\n0002.11:       OR      V_20:64 ,         0:01 ,      V_21:01\r\n0002.12:      STR      V_21:01 ,              ,      R_pf:01\r\n0003.00:      SHL       0x1:64 ,      0x1f:64 ,      V_22:64\r\n0003.01:      AND     R_eax:32 ,      V_22:64 ,      V_23:64\r\n0003.02:      SHR      V_23:64 ,      0x1f:64 ,      V_24:64\r\n0003.03:       OR      V_24:64 ,         0:01 ,      V_25:01\r\n0003.04:      STR      V_25:01 ,              ,      R_sf:01\r\n0004.00:      AND     R_rax:64 ,=0xffffffff    ,      V_26:64\r\n0004.01:      STR     R_rax:64 ,              ,      V_27:64\r\n0004.02:      STR      V_26:64 ,              ,     R_rax:64\r\ncf\r\n$0\r\n```\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU3NzYxOA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T07:10:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7395#issuecomment-644577618","viewerDidAuthor":false}],"number":7395,"title":"aetr extra lines"},{"body":"| File Format Name                           | Issue Number | Docs                                                                                                                                                    | Binaries in radare2-regressions |\r\n|--------------------------------------------|--------------|---------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\r\n| AtariST                                    | #3517        | http://www.reverse-engineering.info/IDA/atari.txt                                                                                                       | ðŸš«                              |\r\n| Cisco IOS BIN                              | #3442        | http://grid32.com/bb095447484a76e5c74d10f604b716f8/cisco_ios_rootkits.pdf ; http://certs4u.info/ciscoios/c2600/c2600-bino3s3-mz.123-22.bin              | ðŸš«                              |\r\n| GOFF (z/OS) format                         | #3417        | See Issue                                                                                                                                               | ðŸš«                              |\r\n| LLVM's BitCode                             | #2778        |                                                                                                            | ðŸš«                              |\r\n 'newc' file format                         | #2332        | https://www.kernel.org/doc/Documentation/early-userspace/buffer-format.txt                                                                              | ðŸš«                              |\r\n| IMG3 fileformat                            | #2178        | https://theiphonewiki.com/wiki/IMG3_File_Format                                                                                                         | ðŸš«                              |\r\n| CortexM3 bios images                       | #1602        | See Issue                                                                                                                                               | ðŸš«                              |\r\n| Preferred Executable Format : Joy!peff     | #5079        | See Issue                                                                                                                                               | ðŸš«                              |\r\n| SOM binaries                               | #7238        | https://parisc.wiki.kernel.org/images-parisc/2/29/Pa-runtime-32-SOM.pdfhttps://opensource.apple.com/source/binutils/binutils-40/src/bfd/som.h.auto.html | ðŸš«                              |\r\n| NeXT ROM images                            | #7246        |                                                                                                                                                         | ðŸš«                              |\r\n| XEX file format                            | #8604        |  https://free60.org/wiki/XEX                                                                                                                                                       | ðŸš«                              |\r\n| .sym format symbols file                            | #8967        |  http://problemkaputt.de/gmb.htm see also issues for more reference                                                                                                                                                       | ðŸš«                              |","comments":[],"number":7390,"title":"META - New File-Formats"},{"body":"already supported by capstone and keystone\r\n\r\n```\r\nprop:keystone pancake$ rasm2 -a x86.ks 'sarx eax,eax,eax'\r\nc4e27af7c0\r\nprop:keystone pancake$ rasm2 -a x86.ks 'sarx eax,ebx,ebx'\r\nc4e262f7c3\r\nprop:keystone pancake$ rasm2 -a x86.ks 'sarx eax,ebx,ecx'\r\nc4e272f7c3\r\n```","comments":[],"number":7366,"title":"Support assembling -X extensions of SAR/SHL/..."},{"body":"From https://github.com/sushant94/esil-tests","comments":[],"number":15577,"title":"Merge ESIL testing scripts"},{"body":"* [ ] Retrieve all the .lib from all the VS versions available and for all architectures (i.e `C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\lib\\amd64\\*`)\r\n* [ ] Iterates over .lib content (only the *.obj) and do a `aaa ; zaF ; zos *.sig`\r\n* [ ] Kill the duplicates over the files and potentially merge those *.sig into a single one per version of MSVC and per Architectures (to be defined)\r\n* [ ] Create R2PM packages for those","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI5NDk3MjgzNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"move this to extras\n> On 18 Apr 2017, at 21:58, Maijin <notifications@github.com> wrote:\n> \n>  Retrieve all the .lib from all the VS versions available and for all architectures (i.e C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\lib\\amd64\\*)\n>  Support ar:// to load archive files like .lib .a #6104 <https://github.com/radare/radare2/issues/6104> OR use 7z x *.lib\n>  Iterates over .lib content (only the *.obj) and do a aaa ; zaF ; zos *.sig\n>  Kill the duplicates over the files and potentially merge those *.sig into a single one per version of MSVC and per Architectures (to be defined)\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/7310>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-llx1215V0UrST3ady7eOyb_IbiTeks5rxRXggaJpZM4NA0ar>.\n> \n\n","createdAt":"2017-04-18T20:33:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-294972835","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI5NzIzMjIwNQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Can be part of GSoC.","createdAt":"2017-04-26T04:06:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-297232205","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMDQ1NzY3MQ==","author":{"login":"malware-kitten"},"authorAssociation":"CONTRIBUTOR","body":"Hello, \r\n\r\nAs part of some testing, I've generated all zignatures for the following directories\r\n```\r\nC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\lib\\amd64\\ \r\nC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\lib\\arm\\\r\n```\r\nI found this issue and thought that it could help.\r\n\r\nI've uploaded them into this repo. \r\nhttps://github.com/securitykitten/r2_windows_zignatures\r\n\r\nThe zignatures are uniq'd per .lib file and I didn't consolidate them all into a single JSON file.\r\n","createdAt":"2018-06-26T20:50:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-400457671","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMDU1Mjc0OQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Would you be able to create similar repository like https://github.com/radareorg/radare2-sigs where travis.yml contains the routine that autogenerate those zignature file?","createdAt":"2018-06-27T06:03:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-400552749","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMDY5MDI5NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"What about having 1 repo to store them all instead of just a repo with one useless script?\n\n> On 27 Jun 2018, at 08:03, Maijin <notifications@github.com> wrote:\n> \n> Would you be able to create similar repository like https://github.com/radareorg/radare2-sigs where travis.yml contains the routine that autogenerate those zignature file?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-06-27T14:23:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-400690295","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMDY5MDMyMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"And then r2pm packages for them\n\n> On 27 Jun 2018, at 08:03, Maijin <notifications@github.com> wrote:\n> \n> Would you be able to create similar repository like https://github.com/radareorg/radare2-sigs where travis.yml contains the routine that autogenerate those zignature file?\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-06-27T14:23:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-400690323","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMDY5OTgyOA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"We can also merge them sure","createdAt":"2018-06-27T14:47:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-400699828","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzE4Njk4Nw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"ping @securitykitten ","createdAt":"2018-07-07T04:10:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-403186987","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzE5Njk3Nw==","author":{"login":"xarkes"},"authorAssociation":"CONTRIBUTOR","body":"> What about having 1 repo to store them all instead of just a repo with one useless script?\r\n\r\nAgreed\r\n\r\n\r\n","createdAt":"2018-07-07T07:54:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-403196977","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzIwMTYxOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Yes. We said this over 9900 times and maijin have the repo already but empty\n\n> On 7 Jul 2018, at 09:55, xarkes <notifications@github.com> wrote:\n> \n> What about having 1 repo to store them all instead of just a repo with one useless script?\n> \n> Agreed\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-07-07T09:13:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-403201619","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzI1MzIyMA==","author":{"login":"malware-kitten"},"authorAssociation":"CONTRIBUTOR","body":"Happy to assist on this issue.  \r\n\r\nIt seems like there is conflicting ideas on the best way to solve this.  What's the best method for me to move forward and help?  \r\n\r\nI can create a travis.yml file to generate these, but that would require uploading all the LIB's, methods to extract the .obj's etc... \r\n\r\nI also have access to more copies of Visual Studio (and historical copies) for different versions, builds, etc... if there is a need for bigger zignature set.  I can keep a set of zignatures for each version & build and if you'd like to pull them into a larger repo that'd work out great.","createdAt":"2018-07-08T00:54:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-403253220","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzI1NTU2NQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@securitykitten update this repository https://github.com/radareorg/radare2-sigs with what is needed to generate the zignature, we can host all the files required on http://junk.rada.re/ and yeah if we can have all the versions that'd be great.","createdAt":"2018-07-08T01:50:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-403255565","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzMxMTQxNA==","author":{"login":"malware-kitten"},"authorAssociation":"CONTRIBUTOR","body":"Sounds good.  I'm going to get started downloading/installing/extracting lib's from previous LIB's, which may take a while to generate.  I'll ping back in either this issue or in the telegram channel for further guidance once I've made more progress.","createdAt":"2018-07-08T19:38:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-403311414","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzMyMjU0MA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"The more you can automatize it the better ðŸ‘, we will eventually consolidate the `zaF` to include more stuff like types, function definition for example etc.","createdAt":"2018-07-08T22:33:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-403322540","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzg1NTkwNQ==","author":{"login":"malware-kitten"},"authorAssociation":"CONTRIBUTOR","body":"I've gone through the back catalog of Visual Studio releases and collected the lib files.\r\n\r\nI have a couple small questions before I generate the zignatures for each file.\r\n\r\nA lib contains a bunch of .obj files.  I'm unpacking each lib, generating zignatures for each obj and then combining/deduplicating the zignatures together for each lib. \r\n\r\nUsing msvcrt.lib as an example, I have several different versions across distribution.  \r\n```\r\n./Microsoft Visual Studio 9.0/lib/msvcrt.lib\r\n./Microsoft Visual Studio 9.0/lib/amd64/msvcrt.lib\r\n./Microsoft Visual Studio 10.0/msvcrt.lib\r\n./Microsoft Visual Studio 10.0/amd64/msvcrt.lib\r\n./Microsoft Visual Studio 11.0/lib/msvcrt.lib\r\n./Microsoft Visual Studio 11.0/lib/amd64/msvcrt.lib\r\n./Microsoft Visual Studio 11.0/lib/arm/msvcrt.lib\r\n./Microsoft Visual Studio 14.0/lib/msvcrt.lib\r\n./Microsoft Visual Studio 14.0/lib/store/msvcrt.lib\r\n./Microsoft Visual Studio 14.0/lib/store/amd64/msvcrt.lib\r\n./Microsoft Visual Studio 14.0/lib/store/arm/msvcrt.lib\r\n./Microsoft Visual Studio 14.0/lib/amd64/msvcrt.lib\r\n./Microsoft Visual Studio 14.0/lib/arm/msvcrt.lib\r\n./Microsoft Visual Studio 8/lib/msvcrt.lib\r\n./Microsoft Visual Studio 8/lib/amd64/msvcrt.lib\r\n./Microsoft Visual Studio 12.0/lib/msvcrt.lib\r\n./Microsoft Visual Studio 12.0/lib/store/msvcrt.lib\r\n./Microsoft Visual Studio 12.0/lib/store/amd64/msvcrt.lib\r\n./Microsoft Visual Studio 12.0/lib/store/arm/msvcrt.lib\r\n./Microsoft Visual Studio 12.0/lib/amd64/msvcrt.lib\r\n./Microsoft Visual Studio 12.0/lib/arm/msvcrt.lib\r\n```\r\nIs the goal to have 1 main zignature covering all versions of msvcrt (different copies for each arch) or to have a zignature for each Visual Studio version for each lib?\r\n\r\nIn the final repo do you want something like \r\n```\r\nVisualStudio12_ARM_msvcrt.zig\r\nVisualStudio8_x86_msvcrt.zig\r\nVisualStudio10_AMD64_msvcrt.zig\r\n...etc.....\r\n```\r\nor just 3 final copies containing everything from all versions of VS?\r\n```\r\nx86_msvcrt.zig\r\nARM_msvcrt.zig\r\nAMD64_msvcrt.zig\r\n```\r\n\r\nI appreciate the guidance.","createdAt":"2018-07-10T15:04:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-403855905","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzg2MTkxNQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Please don't remove original binaries just yet. The biggest problem of current signatures format - they don't store function metainformation - prototype, arguments and their types: https://github.com/radare/radare2/issues/6947\r\nIdeally, the best results of signatures search will not only find exact matches but also will improve analysis in the other places by types and variables inference.","createdAt":"2018-07-10T15:20:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-403861915","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMzk4NDExNg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"VisualStudio12_ARM_msvcrt.zig\r\nVisualStudio8_x86_msvcrt.zig\r\nVisualStudio10_AMD64_msvcrt.zig\r\n\r\nThis format is good^, yeah @XVilka that's why needs to ensure it's automated so then everytime we improve Zignature it will improve this automatically ^_^","createdAt":"2018-07-10T22:18:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-403984116","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNTQyMjE0OQ==","author":{"login":"malware-kitten"},"authorAssociation":"CONTRIBUTOR","body":"I wanted to send an update to let everyone know the status.\r\n\r\nWrapping up work on the final script, doing some final testing now.  The final size of the libraries are roughly 650MB compressed.  When decompressed there is about 3GB of data to iterate through.  On my last run it took about 15-20 hours to process the full set of zignatures.  Each lib can have hundreds of .obj files to disassemble.\r\n\r\nHere's the metrics from the last run\r\n```\r\nreal\t1241m28.977s\r\nuser\t2144m51.030s\r\nsys\t133m21.364s\r\n```\r\nOne small issue is travis compatibility.   The Microsoft implementation of AR is slightly different than the unix/bsd implementation, which causes breakage.  I'll explain.\r\n\r\nIt seems that travis is running on Ubuntu 14.04 and the version of 7zip (used for extracting obj's from libs) is 9.x on the builds, which is out of date. Newer versions of 7zip (I'm testing with 16.x) extract these perfectly.\r\n\r\nI've tested pure python implementations (to avoid making a syscall) and none of the libraries cover the Windows case.  I've tried `libarchive`, `unix_ar`, `libarchive-c` & `arpy`, I've also looked at some of the ruby libraries, but they didn't work either.  It seems as if 7zip is the best current solution.\r\n\r\nSo with that said. The script that I have will extract, recurse, dedup and generate zignatures for all lib files.  I've got the last batch of processed zignatures in a zip if anyone would like to review them for testing purposes.  The zip can be found here -> https://github.com/securitykitten/r2_windows_zignatures/blob/master/visual_studio_zignatures.zip\r\n\r\nIf travis doesn't work for processing these files, I could set up a server that would cron nightly builds of the zignatures and push them to a zignature repository.  \r\n\r\nI'll keep testing with travis and trying to build 7zip compatibility, and I'll keep everyone up to date on the the progress.","createdAt":"2018-07-17T00:33:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-405422149","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNTQzNzgxOQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"You can force the installation of a recent 7z on the machine ? Can find the bin here https://www.7-zip.org/download.html","createdAt":"2018-07-17T02:17:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-405437819","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNTQzNzk1OA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"I don't think having a third parties server is a good idea, if travis doesn't work we can try appveyor, but we can also setup a run on jenkins or one of our servers too ","createdAt":"2018-07-17T02:18:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-405437958","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNTQ0OTU3OQ==","author":{"login":"malware-kitten"},"authorAssociation":"CONTRIBUTOR","body":"Thanks for the guidance.  I'll work on getting 7zip and travis working together and see if I can run some benchmarks. \r\n","createdAt":"2018-07-17T03:37:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-405449579","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNTQ2NDcxMw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@securitykitten probably also need to see what's the blocker for the time too, may need to profile this at some point. maybe @jroimartin wants to take a look to see if there are ways to improve the autogeneration time without compromising the results. \r\n\r\nI will check the zip you provided.","createdAt":"2018-07-17T05:34:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-405464713","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNTQ2NTAwOA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Also I would merge the zig into bigger consolidated one, no need to make one zig file per dll, just group them per version and archs like, sorry I misread when you propose your format:\r\n\r\n- VisualStudio12_ARM.zig\r\n- VisualStudio8_x86.zig\r\n- VisualStudio10_AMD64.zig\r\n\r\nThat should also reduce the amount of dups","createdAt":"2018-07-17T05:36:10Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-405465008","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNTU5OTAxMA==","author":{"login":"malware-kitten"},"authorAssociation":"CONTRIBUTOR","body":"Yep, making them into a single pack is easy.  I'll make that change today.  \r\n\r\nI've also been working with multiprocessing vs single threaded to disassemble the objects and doing benchmarks to see where the best performance is.  This may require a bit of testing once I get travis working.","createdAt":"2018-07-17T14:20:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-405599010","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjQ1OTAwMA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See also these:\r\n- https://github.com/Maktm/FLIRTDB\r\n- https://github.com/push0ebp/sig-database\r\n- https://github.com/push0ebp/ALLirt","createdAt":"2020-03-23T08:43:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-602459000","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyOTE5MDM2MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@pelijah please open a separate issues for these.","createdAt":"2020-05-15T11:47:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-629190361","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyOTE5OTAyMw==","author":{"login":"pelijah"},"authorAssociation":"CONTRIBUTOR","body":"I would prefer to send PR. One issue has already been fixed by me. Just let me some time.","createdAt":"2020-05-15T12:09:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-629199023","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDczODU0Njk1Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@pelijah is there anything left here?","createdAt":"2020-12-04T03:45:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7310#issuecomment-738546956","viewerDidAuthor":false}],"number":7310,"title":"Create zignatures pack for windows"},{"body":"Here's a few that I noticed quickly:\r\n- Basic:\r\n  - [ ] umull\r\n  - [ ] umlal\r\n  - [ ] msr\r\n  - [ ] mrs\r\n- Memory:\r\n  - [ ] pld\r\n  - [ ] ldm (all forms)\r\n  - [ ] stm (all forms)\r\n- Saturating arithmetic\r\n  - All of it\r\n- Misc\r\n  - [ ] rev (all forms)\r\n\r\nAnd a bunch of stuff from ARMv6 and ARMv7 that I haven't bothered checking yet","comments":[],"number":7250,"title":"rasm2/armass missing many opcodes (some of v4, most of v5+)"},{"body":"Steps to reproduce:\r\n\r\n- Clone radare2-webui\r\n- Build one `make material`\r\n- Run it: `make runm`\r\n- Go to the UI: http://localhost:9090/m/\r\n\r\nCurrent output:\r\n```\r\nStarting http server...\r\nopen http://localhost:9090/\r\nr2 -C http://localhost:9090/cmd/\r\n[HTTP] 127.0.0.1:2135 /m\r\n[HTTP] 127.0.0.1:2136 /m/\r\nhttp: Cannot open '<MY_PATH>/radare2-webui/dev//m/index.html'\r\n[HTTP] 127.0.0.1:2137 /favicon.ico\r\n```\r\n\r\nThe path indicated is correct. I can reach it and has proper rights.\r\n\r\nIf `-e http.sandbox=false` is added to original command: `r2 -q -e http.homeroot=dev -e http.ui=m -c=H /bin/ls`, everything works as expected.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI5MDk2NzQxOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I think using absolute paths for homewww and such should work. Plz confirm\n\n> On 2 Apr 2017, at 00:15, Gautier Colajanni <notifications@github.com> wrote:\n> \n> Steps to reproduce:\n> \n> Clone radare2-webui\n> Build one make material\n> Run it: make runm\n> Go to the UI: http://localhost:9090/m/\n> Current output:\n> \n> Starting http server...\n> open http://localhost:9090/\n> r2 -C http://localhost:9090/cmd/\n> [HTTP] 127.0.0.1:2135 /m\n> [HTTP] 127.0.0.1:2136 /m/\n> http: Cannot open '<MY_PATH>/radare2-webui/dev//m/index.html'\n> [HTTP] 127.0.0.1:2137 /favicon.ico\n> The path indicated is correct. I can reach it and has proper rights.\n> \n> If -e http.sandbox=false is added to original command: r2 -q -e http.homeroot=dev -e http.ui=m -c=H /bin/ls, everything works as expected.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-04-02T06:19:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7199#issuecomment-290967418","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI5MDk5MjEwNA==","author":{"login":"gcolajan"},"authorAssociation":"CONTRIBUTOR","body":"Yes, it's working: `r2 -q -e http.homeroot=<MY_PATH>/radare2-webui/dev/m  -c=H /bin/ls`\r\n\r\nBut not if I add the http.ui: `r2 -q -e http.homeroot=<MY_PATH>/depots/radare2-webui/dev/ -e http.ui=m -c=H /bin/ls`","createdAt":"2017-04-02T15:05:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7199#issuecomment-290992104","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI5MTA5NzAyNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"we can fix that temporarly by just using $(shell pwd) in that line of the makefile. but i think we should avoid relative paths in those http vars\n\n> On 02 Apr 2017, at 17:05, Gautier Colajanni <notifications@github.com> wrote:\n> \n> Yes, it's working: r2 -q -e http.homeroot=<MY_PATH>/radare2-webui/dev/m -c=H /bin/ls\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/7199#issuecomment-290992104>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lvQ4yfgEc8uffaByu0v1wPeVPaMYks5rr7lJgaJpZM4MwoX_>.\n> \n\n","createdAt":"2017-04-03T09:47:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7199#issuecomment-291097026","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI5MTExMjQ4Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Then the solution would be to abspath before using those paths in r2. I will have a look at this later this week\n\n> On 2 Apr 2017, at 17:05, Gautier Colajanni <notifications@github.com> wrote:\n> \n> Yes, it's working: r2 -q -e http.homeroot=<MY_PATH>/radare2-webui/dev/m -c=H /bin/ls\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-04-03T11:05:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7199#issuecomment-291112483","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwNDYzMjQ3Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"all the webuis are broken, cant update at all for about 3 releases. so not gonna fix this until the webuis work again","createdAt":"2017-05-29T10:48:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7199#issuecomment-304632477","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxMzg4ODM0Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can you try again?","createdAt":"2017-07-09T00:01:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7199#issuecomment-313888342","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzMjcxOTIwMw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"It is a loooong try.","createdAt":"2017-09-28T03:42:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7199#issuecomment-332719203","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzMzM2MDE3Nw==","author":{"login":"novia713"},"authorAssociation":"NONE","body":"this thing is happening to me also :-(\r\ni can only force it to work with \r\n```\r\nr2 -q -e http.homeroot=/Users/leandro/git/radare2-webui/dev/m -c=H /usr/local/bin/exa\r\n```","createdAt":"2017-10-01T07:54:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7199#issuecomment-333360177","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzOTYwNzIxOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"disable the http.sandbox","createdAt":"2017-10-26T09:28:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7199#issuecomment-339607219","viewerDidAuthor":false}],"number":7199,"title":"Cannot open files for UI"},{"body":"E.g.\r\n```\r\n:> e asm.cpu = Atmega128\r\n```\r\nGives nothing if there is no such chip supported (in e asm.cpu=?), but it should at least warn. \r\n\r\nAlso it's strange that after this command, the CPU value is still set\r\n```\r\n:> e asm.cpu\r\nATmega128\r\n```\r\neven if it's not supported correctly:\r\n```\r\n:> e asm.cpu =?\r\nATmega8\r\nATmega168\r\nATmega328p\r\nATmega32u4\r\nATmega1280\r\nATmega2560\r\nATmega48\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI5MjY0NDQ2MQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"ok same for `asm.os`","createdAt":"2017-04-07T20:32:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7179#issuecomment-292644461","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI5MjgxMzU2MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"this will produce lot of errors because of the switches between different asm.bits in the startup process of r2 when loading a file. this requires more work than just adding an eprintf","createdAt":"2017-04-09T21:15:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7179#issuecomment-292813560","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU3NzY3NQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T07:11:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7179#issuecomment-644577675","viewerDidAuthor":false}],"number":7179,"title":"Warning/error message if there is no such asm.cpu"},{"body":"A basic block is a straight-line sequence of code with only one entry point and only one exit.\r\nSeems like Radare2 don't construct basic blocks correctly, it don't consider call opcodes. See below commands outputs. Maybe I'm missing something here. Thanks in advance.\r\n\r\n```\r\nfor i in p.cmdj('afbj @main'):\r\n    print i\r\n    \r\n{u'inputs': 0, u'addr': 4205056, u'ninstr': 35, u'outputs': 1, u'traced': False, u'fail': 4205243, u'size': 187}\r\n{u'inputs': 1, u'addr': 4205243, u'ninstr': 2, u'outputs': 2, u'traced': False, u'jump': 4205295, u'fail': 4205248, u'size': 5}\r\n{u'inputs': 1, u'addr': 4205248, u'ninstr': 2, u'outputs': 2, u'traced': False, u'jump': 4205258, u'fail': 4205253, u'size': 5}\r\n{u'inputs': 1, u'addr': 4205253, u'ninstr': 1, u'outputs': 0, u'traced': False, u'size': 5}\r\n{u'inputs': 1, u'addr': 4205258, u'ninstr': 4, u'outputs': 1, u'traced': False, u'fail': 4205276, u'size': 18}\r\n{u'inputs': 1, u'addr': 4205276, u'ninstr': 3, u'outputs': 0, u'traced': False, u'size': 19}\r\n{u'inputs': 1, u'addr': 4205295, u'ninstr': 4, u'outputs': 0, u'traced': False, u'size': 22}\r\nfor i in p.cmdj('pdrj @main'):\r\n    print i['offset'],\" \",i['opcode']\r\n    \r\n4205056   push r15\r\n4205058   push r14\r\n4205060   push r13\r\n4205062   push r12\r\n4205064   push rbp\r\n4205065   push rbx\r\n4205066   mov ebx, edi\r\n4205068   mov rbp, rsi\r\n4205071   sub rsp, 0x388\r\n4205078   mov rdi, qword [rsi]\r\n4205081   mov rax, qword fs:[0x28]\r\n4205090   mov qword [local_378h], rax\r\n4205098   xor eax, eax\r\n4205100   call 0x40db00\r\n4205105   mov esi, 0x419b21\r\n4205110   mov edi, 6\r\n4205115   call 0x402840\r\n4205120   mov esi, 0x416611\r\n4205125   mov edi, 0x4165fa\r\n4205130   call 0x4024b0\r\n4205135   mov edi, 0x4165fa\r\n4205140   call 0x402470\r\n4205145   mov edi, 0x40a320\r\n4205150   mov dword [0x0061e580], 2\r\n4205160   call 0x413c60\r\n4205165   movabs rax, 0x8000000000000000\r\n4205175   mov dword [0x0061f030], 0\r\n4205185   mov byte [0x0061f0d8], 1\r\n4205192   mov qword [0x0061f190], rax\r\n4205199   mov eax, dword [0x0061e56c]\r\n4205205   mov qword [0x0061f1a0], 0\r\n4205216   mov qword [0x0061f197], -1\r\n4205227   mov byte [0x0061f0f8], 0\r\n4205234   cmp eax, 2\r\n4205237   je 0x403328\r\n4205243   cmp eax, 3\r\n4205246   je 0x402aef\r\n4205248   sub eax, 1\r\n4205251   je 0x402aca\r\n4205253   call 0x402370\r\n4205258   mov edi, 1\r\n4205263   call 0x4023e0\r\n4205268   test eax, eax\r\n4205270   je 0x4035a6\r\n4205276   mov dword [0x0061f158], 2\r\n4205286   mov byte [0x0061f0f8], 1\r\n4205293   jmp 0x402b05\r\n4205295   mov esi, 7\r\n4205300   xor edi, edi\r\n4205302   mov dword [0x0061f158], 0\r\n4205312   call 0x40eca0\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI4OTc1NTAzMg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":" Use markdown for code","createdAt":"2017-03-28T12:33:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7170#issuecomment-289755032","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4OTg3NTg3OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"\n\n> On 28 Mar 2017, at 14:16, Luis Miguel Rojas Aguilera <notifications@github.com> wrote:\n> \n> A basic block is a straight-line sequence of code with only one entry point and only one exit.\n> \n\nFalse\n> Seems like Radare2 don't construct basic blocks correctly, it don't consider call opcodes. See below commands outputs. Maybe I'm missing something here. Thanks in advance.\n> \n\nYes it does. Call instructions dont break basic blocks.\n> for i in p.cmdj('afbj @main'):\n> print i\n> \n> {u'inputs': 0, u'addr': 4205056, u'ninstr': 35, u'outputs': 1, u'traced': False, u'fail': 4205243, u'size': 187}\n> {u'inputs': 1, u'addr': 4205243, u'ninstr': 2, u'outputs': 2, u'traced': False, u'jump': 4205295, u'fail': 4205248, u'size': 5}\n> {u'inputs': 1, u'addr': 4205248, u'ninstr': 2, u'outputs': 2, u'traced': False, u'jump': 4205258, u'fail': 4205253, u'size': 5}\n> {u'inputs': 1, u'addr': 4205253, u'ninstr': 1, u'outputs': 0, u'traced': False, u'size': 5}\n> {u'inputs': 1, u'addr': 4205258, u'ninstr': 4, u'outputs': 1, u'traced': False, u'fail': 4205276, u'size': 18}\n> {u'inputs': 1, u'addr': 4205276, u'ninstr': 3, u'outputs': 0, u'traced': False, u'size': 19}\n> {u'inputs': 1, u'addr': 4205295, u'ninstr': 4, u'outputs': 0, u'traced': False, u'size': 22}\n> for i in p.cmdj('pdrj @main'):\n> print i['offset'],\" \",i['opcode']\n> \n> 4205056 push r15\n> 4205058 push r14\n> 4205060 push r13\n> 4205062 push r12\n> 4205064 push rbp\n> 4205065 push rbx\n> 4205066 mov ebx, edi\n> 4205068 mov rbp, rsi\n> 4205071 sub rsp, 0x388\n> 4205078 mov rdi, qword [rsi]\n> 4205081 mov rax, qword fs:[0x28]\n> 4205090 mov qword [local_378h], rax\n> 4205098 xor eax, eax\n> 4205100 call 0x40db00\n> 4205105 mov esi, 0x419b21\n> 4205110 mov edi, 6\n> 4205115 call 0x402840\n> 4205120 mov esi, 0x416611\n> 4205125 mov edi, 0x4165fa\n> 4205130 call 0x4024b0\n> 4205135 mov edi, 0x4165fa\n> 4205140 call 0x402470\n> 4205145 mov edi, 0x40a320\n> 4205150 mov dword [0x0061e580], 2\n> 4205160 call 0x413c60\n> 4205165 movabs rax, 0x8000000000000000\n> 4205175 mov dword [0x0061f030], 0\n> 4205185 mov byte [0x0061f0d8], 1\n> 4205192 mov qword [0x0061f190], rax\n> 4205199 mov eax, dword [0x0061e56c]\n> 4205205 mov qword [0x0061f1a0], 0\n> 4205216 mov qword [0x0061f197], -1\n> 4205227 mov byte [0x0061f0f8], 0\n> 4205234 cmp eax, 2\n> 4205237 je 0x403328\n> 4205243 cmp eax, 3\n> 4205246 je 0x402aef\n> 4205248 sub eax, 1\n> 4205251 je 0x402aca\n> 4205253 call 0x402370\n> 4205258 mov edi, 1\n> 4205263 call 0x4023e0\n> 4205268 test eax, eax\n> 4205270 je 0x4035a6\n> 4205276 mov dword [0x0061f158], 2\n> 4205286 mov byte [0x0061f0f8], 1\n> 4205293 jmp 0x402b05\n> 4205295 mov esi, 7\n> 4205300 xor edi, edi\n> 4205302 mov dword [0x0061f158], 0\n> 4205312 call 0x40eca0\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-03-28T19:18:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7170#issuecomment-289875878","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4OTg4Nzc3Nw==","author":{"login":"roj4s"},"authorAssociation":"NONE","body":"So call instructions don't change execution flow? \r\nThere are also jumps and je not being considered ...\r\n Ok I'm not expert in this field ... I'm trying to construct a graph where nodes are instructions and edges connects nodes that act with the same data references (regs, memory ...) May I just follow the output of pdr command ... Thanks in advance ...","createdAt":"2017-03-28T20:04:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7170#issuecomment-289887777","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4OTkxOTI5OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"In r1 theres an option to do that but in the re field, calls are not considered a basic block break.\n\nIn fact there are callgraphs which do that and they use to be already quite big. So making those at basic block level will make that even more difficult to read\n\n> On 28 Mar 2017, at 14:16, Luis Miguel Rojas Aguilera <notifications@github.com> wrote:\n> \n> A basic block is a straight-line sequence of code with only one entry point and only one exit.\n> Seems like Radare2 don't construct basic blocks correctly, it don't consider call opcodes. See below commands outputs. Maybe I'm missing something here. Thanks in advance.\n> \n> for i in p.cmdj('afbj @main'):\n> print i\n> \n> {u'inputs': 0, u'addr': 4205056, u'ninstr': 35, u'outputs': 1, u'traced': False, u'fail': 4205243, u'size': 187}\n> {u'inputs': 1, u'addr': 4205243, u'ninstr': 2, u'outputs': 2, u'traced': False, u'jump': 4205295, u'fail': 4205248, u'size': 5}\n> {u'inputs': 1, u'addr': 4205248, u'ninstr': 2, u'outputs': 2, u'traced': False, u'jump': 4205258, u'fail': 4205253, u'size': 5}\n> {u'inputs': 1, u'addr': 4205253, u'ninstr': 1, u'outputs': 0, u'traced': False, u'size': 5}\n> {u'inputs': 1, u'addr': 4205258, u'ninstr': 4, u'outputs': 1, u'traced': False, u'fail': 4205276, u'size': 18}\n> {u'inputs': 1, u'addr': 4205276, u'ninstr': 3, u'outputs': 0, u'traced': False, u'size': 19}\n> {u'inputs': 1, u'addr': 4205295, u'ninstr': 4, u'outputs': 0, u'traced': False, u'size': 22}\n> for i in p.cmdj('pdrj @main'):\n> print i['offset'],\" \",i['opcode']\n> \n> 4205056 push r15\n> 4205058 push r14\n> 4205060 push r13\n> 4205062 push r12\n> 4205064 push rbp\n> 4205065 push rbx\n> 4205066 mov ebx, edi\n> 4205068 mov rbp, rsi\n> 4205071 sub rsp, 0x388\n> 4205078 mov rdi, qword [rsi]\n> 4205081 mov rax, qword fs:[0x28]\n> 4205090 mov qword [local_378h], rax\n> 4205098 xor eax, eax\n> 4205100 call 0x40db00\n> 4205105 mov esi, 0x419b21\n> 4205110 mov edi, 6\n> 4205115 call 0x402840\n> 4205120 mov esi, 0x416611\n> 4205125 mov edi, 0x4165fa\n> 4205130 call 0x4024b0\n> 4205135 mov edi, 0x4165fa\n> 4205140 call 0x402470\n> 4205145 mov edi, 0x40a320\n> 4205150 mov dword [0x0061e580], 2\n> 4205160 call 0x413c60\n> 4205165 movabs rax, 0x8000000000000000\n> 4205175 mov dword [0x0061f030], 0\n> 4205185 mov byte [0x0061f0d8], 1\n> 4205192 mov qword [0x0061f190], rax\n> 4205199 mov eax, dword [0x0061e56c]\n> 4205205 mov qword [0x0061f1a0], 0\n> 4205216 mov qword [0x0061f197], -1\n> 4205227 mov byte [0x0061f0f8], 0\n> 4205234 cmp eax, 2\n> 4205237 je 0x403328\n> 4205243 cmp eax, 3\n> 4205246 je 0x402aef\n> 4205248 sub eax, 1\n> 4205251 je 0x402aca\n> 4205253 call 0x402370\n> 4205258 mov edi, 1\n> 4205263 call 0x4023e0\n> 4205268 test eax, eax\n> 4205270 je 0x4035a6\n> 4205276 mov dword [0x0061f158], 2\n> 4205286 mov byte [0x0061f0f8], 1\n> 4205293 jmp 0x402b05\n> 4205295 mov esi, 7\n> 4205300 xor edi, edi\n> 4205302 mov dword [0x0061f158], 0\n> 4205312 call 0x40eca0\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-03-28T22:04:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7170#issuecomment-289919298","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI5MDAyMDk0MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"question: do we really want the anal.callsplit back from r1? ","createdAt":"2017-03-29T08:31:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7170#issuecomment-290020940","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI5MDA5NzU0Mw==","author":{"login":"roj4s"},"authorAssociation":"NONE","body":"Maybe you can give me an advice. \r\n  I'm using the Worklist approach for data flow analysis for what a control-flow graph is necessary so the output of afb would do it.  My strategy is to iterate throug the outputs of pdr to get instructions' memory space writen and read drawing edges between instructions that uses the same memory references (regs etc...).  And then do that for each function.","createdAt":"2017-03-29T13:55:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7170#issuecomment-290097543","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMDk3Mjc0NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@radare callsplit option could be handy. There is even a function for that in LLVM,","createdAt":"2017-05-12T03:11:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7170#issuecomment-300972744","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMTYwNjYwMw==","author":{"login":"alvarofe"},"authorAssociation":"CONTRIBUTOR","body":"This is gonna produce long cfg per function and mess everything up imho. In which case would be handy?","createdAt":"2017-05-15T21:13:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7170#issuecomment-301606603","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYzMTU3OTExMA==","author":{"login":"Pamplemousse"},"authorAssociation":"CONTRIBUTOR","body":"TL;DR: Not breaking BB at callsites prevent some static analyses to be implemented in `radare2`.\r\n\r\n---\r\n\r\n@radare [your comment](#issuecomment-289875878-permalink) is very misleading...\r\n\r\n>  A basic block is a straight-line sequence of code with only one entry point and only one exit.\r\n\r\nActually, this definition [is correct](https://en.wikipedia.org/wiki/Basic_block).\r\nAnd it is the one textbook analyses will rely on: def-use, reaching definitions...\r\n\r\n> In r1 theres an option to do that but in the re field, calls are not considered a basic block break.\r\n\r\nWell, it depends what you are trying to do:\r\n  * True, it is clearer at display (see IDA or Ghidra) not to break on calls;\r\n  * But as mentioned, for certain analyses, you **need** to consider that `call` break basic blocks, because **they change the control flow** of a program (this is what angr does, [for this exact reason](https://docs.angr.io/introductory-errata/faq#why-is-angrs-cfg-different-from-idas)).","createdAt":"2020-05-20T16:19:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7170#issuecomment-631579110","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYzMTY1NTk5Mw==","author":{"login":"karliss"},"authorAssociation":"CONTRIBUTOR","body":"I agree with with @Pamplemousse  it all depends. From practical perspective is anyone currently planning to implement an analysis and is being blocked by r2 not splitting BB at callsites? Would doing that allow making better r2 or Cutter angr plugin?\r\n\r\nWould it be a significant problem to do the splitting during data preparation for the specific analysis, compared to the complexity of implementing the analysis itself?\r\n\r\nIf you want to split BB at callsites you probably also want the edges. Generating the edges for virtual function calls, return instruction -> BB after call instruction, considering the case where return instruction on stack is overwritten are non-trivial and depends on the needs of analysis. I would say it's better left as a task of code doing cross function analysis.\r\n\r\nTaking it to the extreme even a mov(ldr, str) instruction can be considered potential change in control flow due to it generating an interrupt. Any instruction generating an interrupt can. For the purpose of analyzing embedded firmware such control flow wouldn't be exceptional, and normal code flow might rely on certain changes in state to be done by interrupt handlers. If you wanted to properly analyze it for proving correctness or searching a race condition you would have take such jumps into account. Even worse a timer or external input interrupt could cause a control flow change at almost any instruction. This isn't exclusive to embedded systems, obfuscated malware can also rely on additional control flow changes through operating system by triggering interrupts to hinder static and dynamic analysis. All of that potentially prevents (not really) some static analysis to be implemented. I hope everyone agrees it's not really practical for r2 splitting BB after every mov instruction. Where is the line?\r\n\r\nOn the other end of extreme - call instruction can be considered a big fat instruction that pops arguments and pushes result, especially for platforms like JVM where call instruction effect on stack  is very limited and instructions can't access data across the stack frames.","createdAt":"2020-05-20T18:45:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7170#issuecomment-631655993","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYzMTY4MTQ0MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I dont think my opinion counts at all and also i think this has been solved already a while ago with florians blocks and defraggerâ€™s aab\n\n> On 20 May 2020, at 20:45, karliss <notifications@github.com> wrote:\n> \n> ï»¿\n> I agree with with @Pamplemousse it all depends. From practical perspective is anyone currently planning to implement an analysis and is being blocked by r2 not splitting BB at callsites? Would doing that allow making better r2 or Cutter angr plugin?\n> \n> Would it be a significant problem to do the splitting during data preparation for the specific analysis, compared to the complexity of implementing the analysis itself?\n> \n> If you want to split BB at callsites you probably also want the edges. Generating the edges for virtual function calls, return instruction -> BB after call instruction, considering the case where return instruction on stack is overwritten are non-trivial and depends on the needs of analysis. I would say it's better left as a task of code doing cross function analysis.\n> \n> Taking it to the extreme even a mov(ldr, str) instruction can be considered potential change in control flow due to it generating an interrupt. Any instruction generating an interrupt can. For the purpose of analyzing embedded firmware such control flow wouldn't be exceptional, and normal code flow might rely on certain changes in state to be done by interrupt handlers. If you wanted to properly analyze it for proving correctness or searching a race condition you would have take such jumps into account. Even worse a timer or external input interrupt could cause a control flow change at almost any instruction. This isn't exclusive to embedded systems, obfuscated malware can also rely on additional control flow changes through operating system by triggering interrupts to hinder static and dynamic analysis. All of that potentially prevents (not really) some static analysis to be implemented. I hope everyone agrees it's not really practical for r2 splitting BB after every mov instruction. Where is the line?\n> \n> On the other end of extreme - call instruction can be considered a big fat instruction that pops arguments and pushes result, especially for platforms like JVM where call instruction effect on stack is very limited and instructions can't access data across the stack frames.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-05-20T19:34:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7170#issuecomment-631681441","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYzMjIyNTI2Nw==","author":{"login":"Pamplemousse"},"authorAssociation":"CONTRIBUTOR","body":"I am very new to `radare2`, so I don't see what \"florians blocks\" or \"defragger's aab\" refer too...\r\n\r\nNot sure this is what you refer to:\r\n```\r\n[0x00401060]> aa?\r\n[...]\r\n| aab                 abb across bin.sections.rx\r\n\r\n[0x00401060]> ab?\r\n[...]\r\n| abb [length]         analyze N bytes and extract basic blocks\r\n```\r\n\r\nCould you provide links to the relevant part of the documentation please?\r\nOr guidance how to use say to recover BB from a given address?\r\n\r\nThanks for your help :)","createdAt":"2020-05-21T17:00:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7170#issuecomment-632225267","viewerDidAuthor":false}],"number":7170,"title":"Basic blocks not solved correctly"},{"body":"pro/con? discuss","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI4OTQyODA3Nw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Like what `e cmd.range=0x0,0xffff` ?\r\n\r\nI don't care much personally - All I know is that, this will just break tests and existing scripts and for update the update you will need to retype the whole range.","createdAt":"2017-03-27T11:36:28Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7126#issuecomment-289428077","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4OTUxOTA0Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Its just a matter of practicity. Setting one var is sometimes faster than two, but its sometimes anoying if you wanna query one value or another. The range strings support multiple expressions to be evaluated like this\n\nRange=0-100,400-1000\n\n> On 27 Mar 2017, at 13:36, Maijin <notifications@github.com> wrote:\n> \n> Like what e cmd.range=0x0,0xffff ?\n> \n> I don't care this will just break tests and existing scripts and for update the update you will need to retype the whole range.\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-03-27T17:09:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7126#issuecomment-289519047","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4OTUxOTQ0NA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"k","createdAt":"2017-03-27T17:10:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7126#issuecomment-289519444","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDYxNTQyOQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T08:25:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7126#issuecomment-644615429","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDY0OTI2NA==","author":{"login":"karliss"},"authorAssociation":"CONTRIBUTOR","body":"For the ease of  use instead of replacing it could be made an alias using getter/setter callbacks. So that modifying search.range updates search.from and search.to.","createdAt":"2020-06-16T09:27:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7126#issuecomment-644649264","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDc4MjM5NQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"search.range=1-100,300-500 cannot update from/to because it have more than 2 values. so it must be something like search.in=range and then use search.range instead of from/to.\r\n\r\neveryone is used to the from-to workflow now. but i do understand the benefits of having such  expressions to define multiple range searchs. Anyone else willing to comment here?","createdAt":"2020-06-16T13:56:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7126#issuecomment-644782395","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDc4NDUxOQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"IMHO we don't need it and this can be closed. I agree everyone is used to `*.from`/`*.to` and I personally don't feel the need for this.","createdAt":"2020-06-16T13:59:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7126#issuecomment-644784519","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDc5ODExOQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I think its useful, but i think it should be implemented in @@, so my proposal here is.. instead of making more confusing eval variables. We can do something like `/ foo @@[100-200,300-6000]` which will basically update search.in/from/to for each range defined with parenthesis, brackets, dashes and commas. there's something similar in @@s:","createdAt":"2020-06-16T14:22:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7126#issuecomment-644798119","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDgwMTA2NA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"There is also `| @{from to}          temporary set from and to for commands supporting ranges`, but that allows you to set just one range.","createdAt":"2020-06-16T14:27:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7126#issuecomment-644801064","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDgwMzE0MQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Yeah i would prefer to extend @{} to support multiple ranges instead of adding another modifier. Shouldn't be hard to implement","createdAt":"2020-06-16T14:31:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7126#issuecomment-644803141","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDgwNjk3OQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"There is just a semantic problem, which is that in general `@?` are used for a single temporary change. We usually use `@@?` for a kind of foreach statements, so it may be a bit confusing having `@{..}` support multiple ranges (I'm thinking about something like `... @{from1 to1}{from2 to2}`)","createdAt":"2020-06-16T14:37:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7126#issuecomment-644806979","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDg1NTg2Ng==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Yes, this seems like a reasonable syntax to me, but i like the comma-dash syntax to define ranges of things, but this is also fine. what do u think about chaining multiple @{}@{}@{} like this?","createdAt":"2020-06-16T15:59:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7126#issuecomment-644855866","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDg3MTIxMQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I think `@{}@{}@{}` is not that good, because it is ambiguous. Usually `@` starts a new \"temporary change command\" (the `@?`).","createdAt":"2020-06-16T16:27:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7126#issuecomment-644871211","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDkxMjcyOQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Agree, so i'm fine with your proposal. i can do it for the current command parser, but im not fluent enough with treesitter to go for the newshell, do you want to implement it?","createdAt":"2020-06-16T17:45:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7126#issuecomment-644912729","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY0NTIwOTA3MQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I can extend your PR with the tree-sitter changes.","createdAt":"2020-06-17T07:40:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7126#issuecomment-645209071","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NTIwOTMzMA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Though I don't consider this high priority as it is just syntax sugar.","createdAt":"2020-06-17T07:41:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7126#issuecomment-645209330","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NTI2ODYxMg==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Yeah not a priority/rush, i also have a long list of things to take care before caring about this issue, but yeah, i appreciate if you could extend my pr when i get it there","createdAt":"2020-06-17T09:39:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7126#issuecomment-645268612","viewerDidAuthor":true}],"number":7126,"title":"replace search.from and search.to with search.range?"},{"body":"radare2 from commit 321e51fa6a011ec9944b2926100f6073731f8aa7 can't correctly disassemble some parts of the arm(thumb2) linker from android.\r\n\r\nThis is example from objdump:\r\n```\r\n    69ee:       3801            subs    r0, #1\r\n    69f0:       2820            cmp     r0, #32\r\n    69f2:       f200 8237       bhi.w   6e64 <__dl_+0x4> (File Offset: 0x6e64)\r\n    69f6:       e8df f010       tbh     [pc, r0, lsl #1]\r\n```\r\nThis is the same disassembly from radare2:\r\n```\r\n[0x000069ee]> pd 10\r\n            0x000069ee      0138           unaligned\r\n            0x000069ef      38             unaligned\r\n            0x000069f0      202800f2       vadd.i8 d2, d0, d16\r\n            0x000069f4      3782dfe8       ldm pc, {r0, r1, r2, r4, r5, sb, pc} ^\r\n            ;-- __dl_$d.284:\r\n            0x000069f8  ~   10f02100       eoreq pc, r1, r0, lsl r0\r\n            0x000069fc      f0008202       addeq r0, r2, 0xf0\r\n```\r\nRadare was started with following command line:\r\n`radare2 -b16 linker`\r\nto force thumb disassembly. The applcation appears to force itself to disassemble in arm mode instead of thumb mode. I could not figure out how to coerce it to disassemble thumb instructions.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI4OTE3NDgxNw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Can you please share the bin, drag and drop zip archive with the bin here please, and use markdown code syntax to ident your issue ðŸ‘ ","createdAt":"2017-03-25T00:44:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7122#issuecomment-289174817","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4OTE4NTk0Mw==","author":{"login":"xwin"},"authorAssociation":"NONE","body":"I tried to upload the file but the file is rejected. I put it in a zip file with 7zip.\r\n(https://drive.google.com/open?id=0B1-7nySEwKfVc0ZXYlNzRjNQQTg)  This is link from google drive. The binary is android 7 linker. I found the same problem with other binaries.  The thumb is correctly disassembled unless one tries to jump around with s or o commands. \r\n\r\n\r\n\r\n\r\n\r\n","createdAt":"2017-03-25T03:38:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7122#issuecomment-289185943","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4OTIwMzI2Nw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"[linker.zip](https://github.com/radare/radare2/files/869923/linker.zip) as said you needed to zip then drag and drop here.","createdAt":"2017-03-25T10:31:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7122#issuecomment-289203267","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjg5Nw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/7122#issuecomment-644522897","viewerDidAuthor":false}],"number":7122,"title":"When disassembling linker from android \"unaligned\" is shown "},{"body":"| Architecture Name             | Issue Number                                  | Docs                                                                                                                                                                                                                            |\r\n|-------------------------------|-----------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\r\n| Fujitsu FR, FR-V architecture | https://github.com/radare/radare2/issues/671  | https://github.com/simeonpilgrim/nikon-firmware-tools/tree/master/GNU%20Patches; http://en.wikipedia.org/wiki/FR-V_%28microprocessor%29                                                                                           |\r\n| LLVM's BitCode                | https://github.com/radare/radare2/issues/2778 | https://github.com/llvm-mirror/llvm/blob/master/lib/Bitcode/Reader/BitcodeReader.cpp                                                                                                                                            |\r\n| sm5                           | https://github.com/radare/radare2/issues/2816 | https://github.com/mikeryan/sm5emu                                                                                                                                                                                              |\r\n| tms320LF240                   | https://github.com/radare/radare2/issues/3204 | http://www.ti.com/lit/ug/spru160c/spru160c.pdf                                                                                                                                                                                  |\r\n| Dalvik disassembler for OAT   | https://github.com/radare/radare2/issues/3765 | https://github.com/anestisb/oatdump_plus/blob/master/README.md                                                                                                                                                                  |\r\n| TMS34010                      | https://github.com/radare/radare2/issues/4037 | [Wiki](https://en.wikipedia.org/wiki/TMS34010) [User's guide](http://www.transputer.net/mtw/rg-750/doc/tms34010/t34010ug.pdf) [Instruction set](bit.ly/1nxD7Ex) [Tech Datasheet](http://www.ti.com/lit/ds/symlink/tms34010.pdf) |\r\n| 8089                          | https://github.com/radare/radare2/issues/6014 | https://github.com/brouhaha/i89/blob/master/disi89                                                                                                                                                                              |\r\n| hcs12                          | https://github.com/radare/radare2/issues/6787 | http://www.nxp.com/assets/documents/data/en/reference-manuals/CPU12RM.pdf                                                                                                                                                                              |\r\n| OpenRISC                          | https://github.com/radare/radare2/issues/7118  | https://github.com/openrisc/binutils-gdb                                                                                                                                                                              |\r\n| Support S2E Bytecodes                           | https://github.com/radare/radare2/issues/8137 |  https://github.com/S2E/s2e-linux-kernel/blob/master/include/s2e/opcodes.h https://github.com/S2E/libs2ecore/blob/master/include/s2e/S2E.h                                                                                                                                                                              |\r\n| Alpha                           | https://github.com/radare/radare2/issues/8959 | https://download.majix.org/dec/alpha_arch_ref.pdf  |\r\n| Duktape bytecode disassembler                           |  https://github.com/radare/radare2/issues/4249 |  |\r\n| Sonix sn8 MCU architecture                          | https://github.com/radare/radare2/issues/9427 |  [Datasheets](http://www.sonix.com.tw/list-en-2515) ; [Simple python disassembler](https://github.com/Marisa-Chan/sn8dis)        \r\n| RH850                          | https://github.com/radare/radare2/issues/10747 |  See issue   \r\n| SupportSynopsys ARC HS44/HS46/HS4                          | https://github.com/radareorg/ideas/issues/10775 |  See issue   \r\n| PDP10                          | https://github.com/radare/radare2-extras/issues/164 |  See issue \r\n| TILE-Gx                          | https://github.com/radare/radare2/issues/11289   |  See issue \r\n| TriMedia CPU               | https://github.com/radare/radare2/issues/12893 | See issue\r\n| Intel i960                     | https://github.com/radare/radare2/issues/13010  | See issue\r\n| Intel IA-64 (Itanium)                | https://github.com/radareorg/ideas/issues/284  | See issue\r\n| HP PA-RISC              | https://github.com/radareorg/ideas/issues/285  | See issue\r\n| nanoMIPS             | https://github.com/radareorg/ideas/issues/286  | See issue\r\n| MIL-STD-1862B            | https://github.com/radareorg/ideas/issues/287  | See issue\r\n| MIL-STD-1750A            | https://github.com/radareorg/ideas/issues/288  | See issue","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYxNjI0NjM2MA==","author":{"login":"selmen2004"},"authorAssociation":"NONE","body":"c-sky , wish is based on motorolla mcore has new open source toolset that can be explored here : https://github.com/c-sky , it is used on set-top boxes and other things \r\nhope that helps ","createdAt":"2020-04-19T23:52:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6996#issuecomment-616246360","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxNjY3NDg3OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Cool!\n\n> On 20 Apr 2020, at 01:52, Selmen Arous <notifications@github.com> wrote:\n> \n> ï»¿\n> c-sky , wish is based on motorolla mcore has new open source toolset that can be explored here : https://github.com/c-sky , it is used on set-top boxes and other things\n> hope that helps\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-04-20T16:44:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6996#issuecomment-616674879","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1NjUyMTY1Mw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"C-SKY is already supported by radare2, was added by @wargio, see `-a mcore`","createdAt":"2020-07-10T07:08:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6996#issuecomment-656521653","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1NjYyMjkyOQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Can you close this issue then @XVilka  https://github.com/radareorg/ideas/issues/223 ? I have removed it from here","createdAt":"2020-07-10T11:17:11Z","includesCreatedEdit":true,"isMinimized":true,"minimizedReason":"resolved","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6996#issuecomment-656622929","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcyNzU4NDEyNg==","author":{"login":"officialcjunior"},"authorAssociation":"CONTRIBUTOR","body":"Hello. Can someone share a link to the latest commit where something like this, particularly adding an architecture, is being done?\r\nIs it still similar to what the radare2book is talking about? I think I read somewhere that architectures like this are not added the same way as it used to.\r\n","createdAt":"2020-11-15T15:05:48Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6996#issuecomment-727584126","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcyNzU5MDMwNQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"This one for example https://github.com/radareorg/radare2/pull/17763","createdAt":"2020-11-15T15:43:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6996#issuecomment-727590305","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDcyNzU5MDUyMg==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"About implmenetnig an asm plugin based on binutils take a look at this 6f1655c49160fe9a287020537afe0fb8049085d7","createdAt":"2020-11-15T15:44:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6996#issuecomment-727590522","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDczMTAyOTk4Mw==","author":{"login":"officialcjunior"},"authorAssociation":"CONTRIBUTOR","body":"Thank you for the reply. I'll try to see if I can learn some of what's happening. The procedure is kind of the same if someone wants to add a GPU architecture too, isn't it?","createdAt":"2020-11-20T08:44:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6996#issuecomment-731029983","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDczMTA5NzQwNA==","author":{"login":"wargio"},"authorAssociation":"CONTRIBUTOR","body":"yes for any arch.","createdAt":"2020-11-20T10:53:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/6996#issuecomment-731097404","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDczMTU2NTk3NA==","author":{"login":"officialcjunior"},"authorAssociation":"CONTRIBUTOR","body":"But here, trufae has said: \r\n>new architectures should be added into radare2-extras and packaged in radare2-pm\r\n\r\nIs that for a really obscure arch?\r\nhttps://github.com/radareorg/ideas/issues/231#issuecomment-224553634","createdAt":"2020-11-21T11:27:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6996#issuecomment-731565974","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDczMTU4MzkwOA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"What arch you want to add? If it's common it belongs to the main repository.\n\nOn Sat, Nov 21, 2020, 19:27 Aswin C <notifications@github.com> wrote:\n\n> But here, trufae has said:\n>\n> new architectures should be added into radare2-extras and packaged in\n> radare2-pm\n>\n> Is that for a really obscure arch?\n> radareorg/ideas#231 (comment)\n> <https://github.com/radareorg/ideas/issues/231#issuecomment-224553634>\n>\n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/radareorg/radare2/issues/6996#issuecomment-731565974>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AABRT7MDIKQNMXRNHQYNBIDSQ6PZ7ANCNFSM4DDJKTIA>\n> .\n>\n","createdAt":"2020-11-21T14:03:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6996#issuecomment-731583908","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDczMTU5MzUwMA==","author":{"login":"officialcjunior"},"authorAssociation":"CONTRIBUTOR","body":">  If it's common it belongs to the main repository.\r\n\r\nThe issue with the GPU arch is what I came across initially. Since, only the common ones belong to the master repository, everything's clear, as of now. ðŸ‘ðŸ»\r\n\r\nI was just curious. Firstly, I'll just browse around first and see whether I can really do this.\r\n\r\nSorry to waste your time, now.\r\nThanks.","createdAt":"2020-11-21T15:23:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6996#issuecomment-731593500","viewerDidAuthor":false}],"number":6996,"title":"META - New Architectures"},{"body":"# Related\r\n\r\n* DOC: TBD\r\n* BLOG: http://radare.today/posts/binary-diffing/\r\n* Tests : https://github.com/radare/radare2-regressions/blob/master/t.tools/radiff2/radiff2\r\n* .c involved:\r\n    * https://github.com/radare/radare2/blob/master/libr/core/cmd_cmp.c\r\n    * https://github.com/radare/radare2/blob/master/binr/radiff2/radiff2.c\r\n\r\n# Fixes\r\n\r\n* [ ] radiff2 malware diffing bad results https://github.com/radare/radare2/issues/5362\r\n* [ ] radiff2 \"No functions found, try running with -A or load a project\" for ihex inputs https://github.com/radare/radare2/issues/5993\r\n* [ ] radiff2 -D doesnt aligns or adds context to the disasm (so in most situations it just shows `invalid`)\r\n\r\n# Enhancement\r\n\r\n* [ ] Do not autoname when radiff2 -C\r\n* [ ] Cross-comparison functions with different names in Radiff2 https://github.com/radare/radare2/issues/6346\r\n* [ ] Add command to diff current function with others\r\n* [ ] radiff2: support comparing files larger than available memory https://github.com/radare/radare2/issues/5993\r\n* [ ] radiff2 -jC - JSON output for the graphdiff\r\n* [ ] radiff2 -x binary1 binary2 should print diff in readable hex output https://github.com/radare/radare2/issues/561\r\n* [x] Obey colourscheme in diff graphs https://github.com/radare/radare2/issues/2141\r\n* [ ] Implement -r mode for radiff2 -C\r\n* [x] radiff2 -g should output in ascii art too https://github.com/radare/radare2/issues/3508\r\n* [x] Colours radiff2 graphdiff output https://github.com/radare/radare2/issues/6021\r\n* [ ] radiff2 -u should support buffers of different size ; it is currently chopping the buffers to R_MIN(lenA, lenB)\r\n* [ ] Graphdiff two functions from the same executable #1894\r\n\r\n# Compatibility with other software\r\n\r\n* [ ] Output for BinNavi https://github.com/radare/radare2/issues/3873\r\n* [ ] Support binary diff format too #9128\r\n","comments":[{"id":"IC_kwDOAEpMrs6XBIGU","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"take ideas to diff assembly https://github.com/simonlindholm/asm-differ","createdAt":"2024-12-11T05:13:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6971#issuecomment-2533654932","viewerDidAuthor":true}],"number":6971,"title":"META - RADIFF2"},{"body":"# Related\r\n\r\n* DOC: TBD\r\n* BLOG: TBD\r\n* Tests : https://github.com/radare/radare2-regressions/blob/master/t/cmd_graph\r\n* .c involved:\r\n    * https://github.com/radare/radare2/blob/master/libr/core/graph.c\r\n\r\n# Fixes\r\n\r\n* [x] `VV >` and `VV <` are broken #8063\r\n* [ ] Goto shortcuts are not shown in Graph Mode Summary view https://github.com/radare/radare2/issues/6018\r\n\r\n# Enhancements\r\n\r\n## Graph Debugger\r\n\r\n* [ ] Show stack\r\n* [ ] Show registry\r\n* [ ] Relocate analysis data automatically (configurable via eval variable)\r\n\r\n## Graph Cursor\r\n\r\n* [ ] Ability to have a cursor in this mode - to follow calls https://github.com/radare/radare2/issues/1566\r\n* [ ] Ability to have a cursor in this mode - to escape calls https://github.com/radare/radare2/issues/1566\r\n* [ ] Graphdiff two functions from the same executable #1894\r\n\r\n## Graph Diffing\r\n\r\n* [x] radiff2 -g should output in ascii art too https://github.com/radare/radare2/issues/3508\r\n* [x] radiff2 -g color issues https://github.com/radare/radare2/issues/3614\r\n\r\n## Interactivity\r\n\r\n* [ ] Focus node with mouse click in ascii-art graph\r\n* [ ] Grouping nodes https://github.com/radare/radare2/issues/2952\r\n\r\n## New commands\r\n\r\n* [ ] Add a ag sub-command that should return all functions in graphviz \r\n https://github.com/radare/radare2/issues/4627\r\n* [ ] Add \"agc $$\" option or subcommand to graph recursively\r\n* [ ] Add x,y position in agj\r\n* [ ] Output Graph structure to graphviz dot format\r\nWe can already dump function graphs and callgraphs to dot format, but not using the graph API used for ascii art rendering. The graph API should be exposed to bindings and r2 commandline, so anyone can create a graph with its contents and render it.. this way we can also do code graphdiffing in ascii art. and enable python/js to use that\r\n\r\n## Colorization\r\n\r\n* [ ] Colorize head and tails basic blocks in function graph (graphviz) https://github.com/radare/radare2/issues/4463\r\n* [ ] Colourize nodes that has been traced (like in the webui)\r\n\r\n## Switch Statements\r\n\r\n* [ ] Enable switch statements by default\r\n\r\n## Optimization/Refactoring\r\n\r\n* [ ] RAGraph as a field of RAnalFunction https://github.com/radare/radare2/issues/2976\r\n* [ ] Optimize graph by removing single instruction jmp basic blocks #5744","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUzODE1Mw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T05:24:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6967#issuecomment-644538153","viewerDidAuthor":false}],"number":6967,"title":"META - GRAPH"},{"body":"# Related\r\n\r\n* Tests : https://github.com/radare/radare2-regressions/tree/master/t.anal/arm ; https://github.com/radare/radare2-regressions/tree/master/t.asm/arm\r\n* .c involved:\r\n    * https://github.com/radare/radare2/blob/master/libr/anal/p/anal_arm_cs.c\r\n    * https://github.com/radare/radare2/blob/master/libr/asm/p/asm_arm_cs.c\r\n\r\n## Regprofile \r\n* [ ] Add CPSR bits for ARM32 & ARM64 See https://quequero.org/2014/04/introduction-to-arm-architecture/\r\n* [ ] Improve ARM regprofile https://github.com/radare/radare2/issues/6500\r\n* [ ] ARM Register in Thumb mode https://github.com/radare/radare2/issues/2557\r\n* [ ] \"ar flg\" doesn't work for ARM64 #7396\r\n\r\n## ARM vs Thumb\r\n* [ ] Seemingly inconsistent disassembly of a Thumb instruction https://github.com/radare/radare2/issues/6741 \r\n* [ ] Convention say arm64 when is arm/thumb\r\n\r\n```\r\nair:Downloads alvaro$ r2 -b 16 -a arm -m 0x81dffe00 uboot\r\n -- I thought we were friends. :_\r\n[0x81dffe00]> s 0x81e20814\r\n[0x81e20814]> afr\r\n[0x81e20814]> pd 4\r\nâ”Œ (fcn) fcn.81e20814 458\r\nâ”‚              ; CALL XREF from 0x81e20814 (fcn.81e20814)\r\nâ”‚              ; [0x81e209e0:4]=0x15a74\r\nâ”‚           0x81e20814      724b           ldr r3, [0x81e209e0]\r\nâ”‚           0x81e20816      2de9f04f       push.w {r4, r5, r6, r7, r8, sb, sl, fp, lr}\r\nâ”‚           0x81e2081a      f7b0           sub sp, 0x1dc\r\nâ”‚              ; [0x81e209e4:4]=0x15a4a\r\nâ”‚           0x81e2081c      7148           ldr r0, [0x81e209e4]\r\n[0x81e20814]> afCl\r\narm64\r\n```\r\n## ARM ESIL\r\n* [ ] Complete ARM64 ESIL `0x1000181f0      3c7f4093       TODO,Sxtw x28, w25`\r\n* [ ] stm/ldm should be post, not pre increment https://github.com/radare/radare2/issues/6389\r\n\r\n## ARM Assembler\r\n\r\n* [ ] ARM64 instructions for rasm2 #8087\r\n\r\n## ARM Analysis\r\n\r\n* [ ] Comments are off with ARM's SP https://github.com/radare/radare2/issues/4957\r\n* [ ] Analyze [mov,add,sub,..] pc as JMP instructions in ARM (ESIL and RAnalOP)\r\n\t`add pc, pc, 4` -> `jmp $$ + 8`. \r\n* [ ] ARM debugger defines endian and cpu mode depending on CPSR. CPSR JT flags allow to know if the cpu is in thumb, normal or jazelle mode. The 'dr*' output should reflect that and set asm.bits and asm.endian accordingly.\r\n* [ ] Mach-o arm strings xref doesn't account for pc-relative addressed strings #1746","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU1NzY4Mw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T06:24:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6953#issuecomment-644557683","viewerDidAuthor":false}],"number":6953,"title":"META - ARM"},{"body":"# META - ZIGNATURE\r\n\r\n## Docs\r\n\r\n* Documentation (r2book) * https://radare.gitbooks.io/radare2book/content/signatures/zignatures.html\r\n* Tests * https://github.com/radare/radare2-regressions/blob/master/t/cmd_zignature\r\n* Command * `z?`\r\n* BlogPost * http://radare.today/posts/zignatures/\r\n* .c involved:\r\n    * https://github.com/radare/radare2/blob/master/libr/core/cmd_zign.c\r\n\r\n## Fixes\r\n\r\n* [ ] zos if rules name/content exist should raise warnings\r\n* [ ] zg shuold walk the basic blocks, but the function length (otherwise we will be comparing with data inside the function, mixed functions can share basic blocks huge functions, when in fact they are just small ones with far nodes)\r\n\r\n## Enhancements\r\n\r\n* [ ] Split the info inside the signatures with the one that makes sense for matching and the one that must be imported (comments, local flags etc.)\r\n* [ ]  Zignatures, creating function doesn't use the name from the zig #13140\r\n* [ ] Fix `rasign2` tool https://github.com/radare/radare2/issues/9336\r\n* [ ] Decompilation of the function to metric zigns \r\n* [ ] DFG of prime numbers to metric zigns \r\n* [ ] Add types info in zignaturez\r\n* [ ] Add function size (or multiple blocks, in case of function split in chunks) to metric zigns\r\n* [ ] Add fcn signature\r\n* [ ] Add fcn calling convention\r\n* [ ] Add comments\r\n* [ ] Add local flags\r\n* [ ] Add Warning when the name is too long\r\n* [ ] Make command `z` parsing friendly\r\n* [ ] Do not hardcode preludes in https://github.com/radare/radare2/blob/master/libr/core/cmd_search.c#L213 add zignature equivalent: \r\n\r\n```\r\nza prelude_ppc_A a 7c0802a6\r\nza prelude_arm_16_A a f0b5\r\nza prelude_arm_32_A a 00482de9\r\nza prelude_arm_64_A a f657bda9\r\nza prelude_arm_64_B a fd7bbfa9\r\nza prelude_arm_64_C a fc6fbea9\r\nza prelude_arm_64_D a 27bd00\r\nza prelude_x86_32_A a 8bff558bec\r\nza prelude_x86_32_B a 5589e5\r\nza prelude_x86_32_C a 558bec\r\nza prelude_x86_64_A a 554889e5\r\nza prelude_x86_64_B a 55488bec\r\n```\r\n\r\n* [ ] Add remaining preludes from  https://github.com/vivisect/vivisect/blob/master/vivisect/analysis/i386/__init__.py\r\n* [ ] Use Zignature for WinMain detection [#832](https://github.com/radare/radare2/issues/832)\r\n* [ ] Use Zignature for ELF Main detection #7472\r\n* [ ] Flirt to Zignature converter (`zfz flirt_file > zignatures.sig`)\r\n* [ ] Automatic loading decision of Zignature Databases #16084","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM4NzMxMTM5NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@sivaramaaa here you can have an interest in the part of the zignature that will allow to save/load the function arguments and their types. I think it is heavily related to your task.","createdAt":"2018-05-08T07:29:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6947#issuecomment-387311394","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMDgwNTM3OQ==","author":{"login":"malware-kitten"},"authorAssociation":"CONTRIBUTOR","body":"Reading through this list of zignature ideas and I think I can help with the function preludes.\r\n\r\nIn CSE's assemblyline tool they have a Binary Ninja script that will do a linear sweep based upon a pretty comprehensive list of preludes.  Highlighted here -> https://bitbucket.org/cse-assemblyline/alsvc_binja/src/31f03aec9afde2e9a610381ed8f1e6164a25e647/binja.py?at=master&fileviewer=file-view-default#binja.py-391\r\n\r\nThese could probably be used to create a zignature list for functions.  ","createdAt":"2018-06-27T19:42:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6947#issuecomment-400805379","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0Njg4MDM2OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"many of those things are done, soeone should update the ticks","createdAt":"2019-10-28T10:15:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6947#issuecomment-546880369","viewerDidAuthor":false}],"number":6947,"title":"META - Signatures"},{"body":"# META - PROJECT\r\n\r\n## Related\r\n\r\n* [ ] Doc - TBD\r\n* Tests - https://github.com/radare/radare2-regressions/blob/master/t/cmd_project\r\n* Commands involved - `P?`\r\n* [x] BlogPost - http://radare.today/posts/project-files/\r\n* .c involved:\r\n    * https://github.com/radare/radare2/blob/master/libr/core/cmd_project.c\r\n\r\n## Various Fix\r\n\r\n* [ ] Loading projects not working when ihex:// is used #8504\r\n* [ ] Multiple files loaded via `o [file] [offset]` are not restored properly from project [#6037](https://github.com/radare/radare2/issues/6037)\r\n* [ ] Save blobs in project file - Dump all the opened files in malloc:// into files to be opened for later when restoring the project.\r\n* [ ] Metadata Format not correctly loaded from project with field names #6248\r\n* [ ] Deleted comments reappear on project open and automatic comments not deleted by CC- [#5445](https://github.com/radare/radare2/issues/5445)\r\n* [ ] Flags of a project created in RW mode does not load upon opening the project in debug mode [#4955](https://github.com/radare/radare2/issues/4955)\r\n* [x] Project functionality broken if aeim is used - binary not reloaded #6596\r\n* [x] Save project lost asm.bits from ahb \r\n* [x] Projects that were saved when using 'aaaa' do not work (with 'aaa' they work) [#6943](https://github.com/radare/radare2/issues/6943)\r\n\r\n### Information saved/loaded\r\n\r\nHere are the current informations that are missing from the project files:\r\n* [ ] Save the Rarun2 profile in the directory\r\n* [ ] Graph layout once modified (to be stored in SDB) (Also add x,y position in agj, ag*)\r\n* [x] call-refs\r\n* [x] data-refs\r\n\r\n## Enhancement\r\n\r\n* [x] Autocompletion of `Po`\r\n* [ ] Change working directory when opening a project - CWD should change to the project file when doing `prj.cwd` or so.. this way we can dump or open files from that directory using `wtf` or `om`...\r\n\r\n## Low Priority Enhancement\r\n\r\n* [ ] Encrypt projects\r\n* [ ] Sign projects\r\n    \r\nIdea is to test of presence of  gpg/gpg2 and spawn them at runtime.\r\n\r\n**INPUT**:\r\n`e prj.gpg=true`\r\n\r\n**EXPECTED_OUTPUT**:\r\n`Project encrypted/signed`\r\nor\r\n`gpg2 or gpg is not found`","comments":[],"number":6945,"title":"META - Project files"},{"body":"It appears that `cfg.bigendian` isn't propagated to the new arch when the architecture is changed and must be set again after switching `asm.arch`.\r\n\r\nAs an example, set `e cfg.bigendian=true` then `e asm.arch=mips` and write a MIPS assembly instruction `addiu sp, sp, -24` which should be `27bdffe8` in big-endian. The first `wa` and `pd` commands appear to both be operating under little-endian mode, despite `e cfg.bigendian` confirmed to be `true`\r\n```\r\n$ radare2 malloc://16\r\n[0x00000000]> e cfg.bigendian=true\r\n[0x00000000]> e asm.arch=mips\r\n[0x00000000]> e asm.bits=32\r\n[0x00000000]> e cfg.bigendian\r\ntrue\r\n[0x00000000]> wa addiu sp, sp, -24\r\nWritten 4 bytes (addiu sp, sp, -24) = wx e8ffbd27\r\n[0x00000000]> pd 1\r\n            0x00000000      e8ffbd27       addiu sp, sp, -0x18\r\n[0x00000000]> e cfg.bigendian=true\r\n[0x00000000]> pd 1\r\n            0x00000000      e8ffbd27       swc2 31, -0x42d9(a3)\r\n[0x00000000]> wa addiu sp, sp, -24\r\nWritten 4 bytes (addiu sp, sp, -24) = wx 27bdffe8\r\n[0x00000000]> pd 1\r\n            0x00000000      27bdffe8       addiu sp, sp, -0x18\r\n```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI4MzE1ODQ2OA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Hello,\r\n\r\nEnsure you are using radare2 from git, if you're unsure paste output of `r2 -v` here.\r\nTo install radare2 from git, first uninstall your version of radare2 and clean your distro. Then use `git clone https://github.com/radare/radare2 && cd radare2 && ./sys/install.sh`, verify your version and check if there is no error using `r2 -v`.","createdAt":"2017-02-28T20:59:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6867#issuecomment-283158468","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4MzE1ODc2OA==","author":{"login":"queueRAM"},"authorAssociation":"CONTRIBUTOR","body":"As requested:\r\n```\r\n$ radare2 -v\r\nradare2 1.3.0-git 13931 @ linux-x86-64 git.1.2.0-260-g0744e3344\r\ncommit: 0744e334429cc00cef937a87f89b8c3429152d11 build: 2017-02-28__13:34:49\r\n```","createdAt":"2017-02-28T21:00:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6867#issuecomment-283158768","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4MzI5MzkzMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Can we have a bunch of tests for this? Mark them as broken. And try with different archs\n\n> On 28 Feb 2017, at 22:00, Q <notifications@github.com> wrote:\n> \n> As requested:\n> \n> $ radare2 -v\n> radare2 1.3.0-git 13931 @ linux-x86-64 git.1.2.0-260-g0744e3344\n> commit: 0744e334429cc00cef937a87f89b8c3429152d11 build: 2017-02-28__13:34:49\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-03-01T09:48:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6867#issuecomment-283293930","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4MzM4Njk5Nw==","author":{"login":"queueRAM"},"authorAssociation":"CONTRIBUTOR","body":"I tracked it down the discrepancy in the code and it affects all archs. Setting `asm.arch` sets `r_asm_set_big_endian()` to default `r_bin_is_big_endian()` instead of `cfg.bigendian`. I am unsure of the expected result since I could see use cases for defaulting to the binary's endianness instead of cfg.bigendian.\r\n\r\nFrom [lines 342-354 of libr/core/cconfig.c](https://github.com/radare/radare2/blob/master/libr/core/cconfig.c#L342-L354)\r\n```\r\n // set a default endianness\r\n   int bigbin = r_bin_is_big_endian (core->bin);\r\n   if (bigbin == -1 /* error: no endianness detected in binary */) {\r\n      // try to set RAsm to LE\r\n      r_asm_set_big_endian (core->assembler, false);\r\n      // set endian of display to LE\r\n      core->print->big_endian = false;\r\n   } else {\r\n      // try to set endian of RAsm to match binary\r\n      r_asm_set_big_endian (core->assembler, bigbin);\r\n      // set endian of display to match binary\r\n      core->print->big_endian = bigbin;\r\n   }\r\n```\r\nI've also noticed this affects saving and opening in projects as I will always have to manually set `cfg.bigendian` after opening a project.\r\n```\r\n$ radare2 -w /tmp/test.bin\r\n[0x00000000]> e asm.arch=mips\r\n[0x00000000]> e asm.bits=32\r\n[0x00000000]> e cfg.bigendian=true\r\n[0x00000000]> wa addiu sp, sp, -24\r\nWritten 4 bytes (addiu sp, sp, -24) = wx 27bdffe8\r\n[0x00000000]> Ps test\r\ntest\r\n[0x00000000]> pd 1@0\r\n            0x00000000      27bdffe8       addiu sp, sp, -0x18\r\n[0x00000000]> q\r\n$ radare2 -p test\r\n[0x00000000]> pd 1@0\r\n            0x00000000      27bdffe8       swc2 31, -0x42d9(a3)\r\n[0x00000000]> e cfg.bigendian\r\ntrue\r\n[0x00000000]> e cfg.bigendian=true\r\n[0x00000000]> pd 1@0\r\n            0x00000000      27bdffe8       addiu sp, sp, -0x18 \r\n```\r\nI looked into radare2-regressions and the tests all seem to set `cfg.bigendian` after `asm.arch` or after `-a [arch]` command line argument so this issue isn't exposed. Can I get some guidance on what your expectations are for defaulting to binary's endianness vs. cfg.bigendian?","createdAt":"2017-03-01T16:16:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6867#issuecomment-283386997","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDYxNTUzOA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T08:26:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6867#issuecomment-644615538","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MDgzNDU4OQ==","author":{"login":"queueRAM"},"authorAssociation":"CONTRIBUTOR","body":"This is still an issue. Please remove `stale` tag. Same test case from above is failing demonstrating discrepancy between `cfg.bigendian=true` and `pd`:\r\n```\r\n# create MIPS 32-bit big endian file and save to project\r\n$ radare2 -w /tmp/test.bin\r\n[0x00000000]> e asm.arch=mips\r\n[0x00000000]> e asm.bits=32\r\n[0x00000000]> e cfg.bigendian=true\r\n[0x00000000]> wa addiu sp, sp, -24\r\nWritten 4 byte(s) (addiu sp, sp, -24) = wx 27bdffe8\r\n[0x00000000]> pd 1@0\r\n            0x00000000      27bdffe8       addiu sp, sp, -0x18\r\n[0x00000000]> Ps test\r\ntest\r\n[0x00000000]> q\r\n\r\n# reload project, confirm correct cfg.bigendian setting but wrong disassembly. re-set bigendian to current value and disassembly is correct\r\n$ radare2 -p test\r\n[0x00000000]> pd 1@0\r\n            0x00000000      27bdffe8       swc2 31, -0x42d9(a3)\r\n[0x00000000]> e cfg.bigendian\r\ntrue\r\n[0x00000000]> e cfg.bigendian=true\r\n[0x00000000]> pd 1@0\r\n            0x00000000      27bdffe8       addiu sp, sp, -0x18\r\n```\r\n\r\nVersion from git today:\r\n```\r\n$ radare2 -v\r\nradare2 4.5.0-git 24827 @ linux-x86-64 git.4.4.0-340-g765f2b6bd4\r\ncommit: 765f2b6bd4098b8e90e46a45c174a71099bc0d56 build: 2020-06-28__22:42:22\r\n```","createdAt":"2020-06-28T23:06:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6867#issuecomment-650834589","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MDk2NzMwNg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"It seems in your original issue you were not using projects. Projects, unfortunately, are known to be very buggy for a while and a complete rewrite is ongoing. Can you reproduce without using projects?","createdAt":"2020-06-29T06:49:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6867#issuecomment-650967306","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MTAxMzAxOA==","author":{"login":"queueRAM"},"authorAssociation":"CONTRIBUTOR","body":"Yes, the original test case fails as well without using projects. Please find below the log from that test with additional commentary.\r\n```sh\r\n$ radare2 malloc://16\r\n[0x00000000]> e cfg.bigendian=true # set bigendian\r\n[0x00000000]> e asm.arch=mips\r\n[0x00000000]> e asm.bits=32\r\n[0x00000000]> e cfg.bigendian      # confirm bigendian is still true!\r\ntrue\r\n[0x00000000]> wa addiu sp, sp, -24 # in big endian should be 27bdffe8!\r\nWritten 4 byte(s) (addiu sp, sp, -24) = wx e8ffbd27\r\n[0x00000000]> pd 1                 # pd also still using little endian\r\n            0x00000000      e8ffbd27       addiu sp, sp, -0x18\r\n[0x00000000]> e cfg.bigendian=true # set it again?\r\n[0x00000000]> pd 1\r\n            0x00000000      e8ffbd27       swc2 31, -0x42d9(a3)\r\n[0x00000000]> wa addiu sp, sp, -24 # this time it works\r\nWritten 4 byte(s) (addiu sp, sp, -24) = wx 27bdffe8\r\n[0x00000000]> pd 1\r\n            0x00000000      27bdffe8       addiu sp, sp, -0x18\r\n[0x00000000]>\r\n```\r\n\r\n```\r\n$ radare2 -v\r\nradare2 4.5.0-git 24827 @ linux-x86-64 git.4.4.0-340-g765f2b6bd4\r\ncommit: 765f2b6bd4098b8e90e46a45c174a71099bc0d56 build: 2020-06-28__22:42:22\r\n```","createdAt":"2020-06-29T08:28:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6867#issuecomment-651013018","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MTAyMTMwNA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Thanks @queueRAM ! It seems your original analysis at https://github.com/radareorg/radare2/issues/6867#issuecomment-283386997 still holds. I think the issue is that there is duplicated code in `cb_bigendian` and `cb_asmarch`. If changing `asm.arch` automagically changes `cfg.bigendian` as well, that change should be *at least* reflected everywhere, so that you don't end up with `e cfg.bigendian` showing a value while the assembler plugin considering another one.\r\n\r\nWould you be willing to send a PR for this? I guess a good solution could be to refactor the code in `cb_asmarch` and `cb_bigendian` and ensuring that when `cb_asmarch` changes the bigendian value it changes so properly, by using the common function that also sets the value of the env var `cfg.bigendian`.\r\n\r\nOnce we have that we can discuss in the future whether we want cfg.bigendian to be preferred or the binary endianess to be preferred.","createdAt":"2020-06-29T08:43:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6867#issuecomment-651021304","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MTAyMTM2OQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"cc @trufae ","createdAt":"2020-06-29T08:43:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6867#issuecomment-651021369","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MTY0NTEyNg==","author":{"login":"queueRAM"},"authorAssociation":"CONTRIBUTOR","body":"> Would you be willing to send a PR for this?\r\n\r\nThank you for your guidance. I have a commit ready for this in my `bigendian_asmarch` branch. I'm still going through the PR checklist and looks like I have to remove some C99 variable declarations and add tests for this issue. I'll likely have this worked out within a few days.","createdAt":"2020-06-30T08:35:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6867#issuecomment-651645126","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MTY2MzI5OA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"> > Would you be willing to send a PR for this?\r\n> \r\n> Thank you for your guidance. I have a commit ready for this in my `bigendian_asmarch` branch. I'm still going through the PR checklist and looks like I have to remove some C99 variable declarations and add tests for this issue. I'll likely have this worked out within a few days.\r\n\r\nThanks a lot! If you need help with anything, please don't hesitate to ask here on IRC/Telegram.","createdAt":"2020-06-30T09:04:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6867#issuecomment-651663298","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1OTUxNjQzMg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@queueRAM hey! How are things going? Can I help with anything?","createdAt":"2020-07-16T16:14:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6867#issuecomment-659516432","viewerDidAuthor":false}],"number":6867,"title":"cfg.bigendian not honored if set before asm.arch"},{"body":"- [ ] C++ structures parsing for VC++ generated binaries https://github.com/REhints/HexRaysCodeXplorer & http://www.openrce.org/articles/full_view/23\r\n- [ ] C++ structures parsing for OS X clang C++ generated binaries https://github.com/cocoahuke/maclook4ref\r\n- [ ] C++ structures parsing for *nix GCC C++ generated binaries\r\n- [ ] COM classes parsing for Windows binaries https://github.com/nektra/vtbl-ida-pro-plugin + http://blog.nektra.com/main/2013/03/27/how-to-identify-virtual-table-functions-with-the-vtbl-ida-pro-plugin/\r\n\r\nWhat should be done (in C, as part of radare2):\r\n\r\n- [x] Parsing vtables\r\n- [x] Parsing RTTI\r\n- [x] `av` commands to view that data\r\n- [x] Parsing SEH\r\n- [x] Parsing .eh_frame\r\n- [ ] Connecting classes with their methods\r\n- [ ] Class inheritance - nesting data structs\r\n- [ ] Constructors and destructors autorecognition\r\n- [ ] try/catch/finally recognition and marking\r\n- [ ] arguments recognition\r\n- [x] ASCII/graphviz graph of class inheritance/structure inheritance\r\n- [ ] Tests with sources for C++, ObjC and Swift, for radare2-regressions\r\n\r\nSee code at\r\n\r\n-  [libr/anal/vtable.c](https://github.com/radare/radare2/blob/master/libr/anal/vtable.c)\r\n-  [libr/anal/rtti.c](https://github.com/radare/radare2/blob/master/libr/anal/rtti.c)\r\n-  [libr/anal/rtti_msvc.c](https://github.com/radare/radare2/blob/master/libr/anal/rtti_msvc.c)\r\n\r\nExamples of similar features in another programs:\r\n- https://github.com/astrelsky/Ghidra-Cpp-Class-Analyzer\r\n\r\n-----\r\n\r\nAttached binary is malware written in C++, lots of vtables, not detected with av command.\r\npassword is infected \r\n\r\n[banito.zip](https://github.com/radare/radare2/files/802015/banito.zip) password: \"infected\"\r\n[2018-asplos.pdf](https://github.com/radare/radare2/files/2208556/2018-asplos.pdf)\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI4MjU1ODcwMg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Current code is here https://github.com/radare/radare2/blob/master/libr/anal/vtable.c","createdAt":"2017-02-26T14:14:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-282558702","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4MzM1MDMyNg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"See implementation here https://github.com/REhints/HexRaysCodeXplorer\r\n\r\n![image](https://cloud.githubusercontent.com/assets/1408600/23463396/969154c4-fe91-11e6-8c33-cd3b2d73e26a.png)\r\n","createdAt":"2017-03-01T14:13:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-283350326","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4MzM4NDg5Ng==","author":{"login":"pinkflawd"},"authorAssociation":"CONTRIBUTOR","body":"This blog describes how MS VC++ works quite well http://www.openrce.org/articles/full_view/23\r\n\r\nThe problem with MS VC++ binaries is, that they don't necessarily come with information on their class structure, there is just something called RTTI, which, at least for malware, is almost always stripped. Finding vtables within the binary is done either sweeping the code section for .. well things that look like vtable structures, or, as done by CodeExplorer, starting from the code and searching for constructors and hoping to find a vtable offset within the arguments.\r\nNeat would be, trying to recover not only vtables, but entire object structures. This would require lots of constructor detection, parsing, and I think guessing, though. \r\n\r\nI'm sure there are more thorough ways of doing this, will think about it and update this thread. ","createdAt":"2017-03-01T16:10:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-283384896","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4MzUzNzgzMA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"I'm renaming this issue in the [META] for all vtables and C++ metainformation.","createdAt":"2017-03-02T02:31:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-283537830","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4MzUzODQzOQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@codeuchiha for your reference","createdAt":"2017-03-02T02:35:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-283538439","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4MzU4ODA1MA==","author":{"login":"PankajKataria"},"authorAssociation":"CONTRIBUTOR","body":"Thank you @XVilka @pinkflawd @Maijin for providing resources, however I am stuck at parsing RTTI for GCC it will very helpful if some one can point out resources for that too. @pinkflawd  yes RTTI (runtime type infromations) structures are present in both cases(MVSC or GCC), it's a way of storing class information and it's inheritance hierarchy by the compiler. I have described the approach we used to find virtual tables for elf files here : https://goo.gl/CDDEI5","createdAt":"2017-03-02T08:25:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-283588050","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4MzYyNzkzNg==","author":{"login":"pinkflawd"},"authorAssociation":"CONTRIBUTOR","body":"Cool, thanks for the link! \r\nAs for GCC RTTI or RTTI in general I know this presentation http://www.hexblog.com/wp-content/uploads/2012/06/Recon-2012-Skochinsky-Compiler-Internals.pdf - contains some info. A note though, not sure how it is with benign binaries, but malware doesn't usually come with RTTI information.","createdAt":"2017-03-02T11:23:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-283627936","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4Mzc2MTc4Nw==","author":{"login":"PankajKataria"},"authorAssociation":"CONTRIBUTOR","body":"@pinkflawd I totally agree that the binary doesn't always comes with RTTI structures, but we are first aiming to develop for the case where RTTI is present and then will keep improving including different scenarios and Thank you for the link.","createdAt":"2017-03-02T19:56:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-283761787","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4MzkxMDgxMQ==","author":{"login":"pinkflawd"},"authorAssociation":"CONTRIBUTOR","body":"sure sure :)","createdAt":"2017-03-03T09:45:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-283910811","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxOTYyODQ5MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Also a scripts from our lovely Binary Ninja https://github.com/trailofbits/binjascripts/tree/master/vtable-navigator","createdAt":"2017-08-02T10:04:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-319628491","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyOTQxNDI2NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Adding one more for vtables/C++ metainfo parsing - https://github.com/igogo-x86/HexRaysPyTools","createdAt":"2017-09-14T08:38:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-329414265","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzMTYwNDE1MQ==","author":{"login":"awhawks"},"authorAssociation":"NONE","body":"This from REcon 2011 look useful as well - [Practical C++ Decompilation](http://www.hexblog.com/wp-content/uploads/2011/08/Recon-2011-Skochinsky.pdf)\r\n","createdAt":"2017-09-23T02:19:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-331604151","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzNDA2NDA2MA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See also https://llvm.org/docs/HowToSetUpLLVMStyleRTTI.html","createdAt":"2017-10-04T06:44:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-334064060","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzNDY1MjIxMA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Those are for Swift:\r\n\r\n*  https://mikeash.com/pyblog/friday-qa-2014-07-18-exploring-swift-memory-layout.html\r\n* https://www.raizlabs.com/dev/2016/12/swift-method-dispatch/","createdAt":"2017-10-06T04:00:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-334652210","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzNDY1MjI2OA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"This one is for ObjectiveC http://cocoasamurai.blogspot.com/2010/01/understanding-objective-c-runtime.html","createdAt":"2017-10-06T04:01:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-334652268","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzNDcwOTM1OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"New plugin by NCC Group https://github.com/nccgroup/PythonClassInformer\r\n https://www.nccgroup.trust/us/about-us/newsroom-and-events/blog/2017/october/python-class-informer-an-idapython-plugin-for-viewing-run-time-type-information-rtti/","createdAt":"2017-10-06T09:45:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-334709359","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1MTI5NDYyNw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See also vtables/RTTI parsing from RetDec https://github.com/avast-tl/retdec/tree/master/src/bin2llvmir/optimizations/vtable","createdAt":"2017-12-13T06:18:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-351294627","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1MjE3NzY1Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"See https://github.com/bazad/memctl","createdAt":"2017-12-16T11:29:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-352177656","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1MzUxMzUwMg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Also https://github.com/cocoahuke/maclook4ref","createdAt":"2017-12-22T03:24:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-353513502","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDM5NTM4Mg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See also https://github.com/RUB-SysSec/Marx thanks to @radare \r\nPaper is here https://www.syssec.rub.de/media/emma/veroeffentlichungen/2016/12/22/marx_ndss2017.pdf","createdAt":"2017-12-29T04:09:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-354395382","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NzQ3NDIyOQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"https://github.com/whitequark/binja_itanium_cxx_abi","createdAt":"2018-01-13T22:59:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-357474229","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2NTE0OTU0Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Future implementers - note, that current code in libr/core/anal_vt.c is flawed since it targets x86 only. The detection should be crossplatform.","createdAt":"2018-02-13T04:44:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-365149546","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2OTIwMjQxOA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See also https://alschwalm.com/blog/static/2016/12/17/reversing-c-virtual-functions/ + https://alschwalm.com/blog/static/2017/01/24/reversing-c-virtual-functions-part-2-2/","createdAt":"2018-02-28T10:51:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-369202418","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2OTIwMjg4OA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See also more in https://www.blackhat.com/presentations/bh-dc-07/Sabanal_Yason/Paper/bh-dc-07-Sabanal_Yason-WP.pdf","createdAt":"2018-02-28T10:53:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-369202888","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2OTIwMzI1OA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"And also http://blog.httrack.com/blog/2014/05/09/a-basic-glance-at-the-virtual-table/ for GCC","createdAt":"2018-02-28T10:55:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-369203258","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM2OTIwNzQzNg==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"I will try to do msvc soon.","createdAt":"2018-02-28T11:12:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-369207436","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM4Njg2NTMyMg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@thestr4ng3r @XVilka @r00tus3r can you check the boxes in the initial post of the issue so we know what is remaining to do here?","createdAt":"2018-05-06T09:12:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-386865322","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM4Njk0NjUzNw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@sivaramaaa I think along with types information loading from PDB and DWARF we can load C++ classes as structures at first. Assigning you to think about how it can be done the fastest/easiest way.\r\n\r\n@Maijin done, we need to add more tests into r2r for this.","createdAt":"2018-05-07T03:16:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-386946537","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNjE2OTQ3NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Added this paper https://www.cs.tau.ac.il/~maon/pubs/2018-asplos.pdf","createdAt":"2018-07-19T06:32:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-406169474","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1NDI5MTg2MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See also https://github.com/0xgalz/Virtuailor tool for creating automatic C++ virtual tables in IDA Pro based on the runtime information.","createdAt":"2019-01-15T07:24:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-454291861","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ1OTYxMTA4NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See also (Pharos) https://edmcman.github.io/papers/ccs18.pdf + https://edmcman.github.io/pres/ccs18.pdf\r\n\r\nhttps://github.com/cmu-sei/pharos","createdAt":"2019-02-01T05:30:42Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-459611084","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2MTA2NjExMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"DeClassifier: Class-Inheritance InferenceEngine for Optimized C++ Binaries\r\n[1901.10073.pdf](https://github.com/radare/radare2/files/2836979/1901.10073.pdf)\r\n","createdAt":"2019-02-06T15:32:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-461066111","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0NzI2MzM3Mw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"One more implementation: https://github.com/astrelsky/Ghidra-Cpp-Class-Analyzer","createdAt":"2019-10-29T05:31:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-547263373","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY4MjUwMTk5NQ==","author":{"login":"HoundThe"},"authorAssociation":"CONTRIBUTOR","body":"I guess I can tick, ASCII inheritance graph with this PR https://github.com/radareorg/radare2/pull/17362","createdAt":"2020-08-28T12:38:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-682501995","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcwMDQ3NjExNQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See also these for extracting C++ classes information from kernelcache:\r\n- https://github.com/0x36/ghidra_kernelcache\r\n- https://github.com/bazad/ida_kernelcache","createdAt":"2020-09-29T06:20:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17134#issuecomment-700476115","viewerDidAuthor":false}],"number":17134,"title":"META - vtable detection for C++, ObjectiveC, Dlang and Swift binaries"},{"body":"Dalvik is register-based and each method uses a different number of registers, so we need to adapt the arena in order to support this behaviour for both anal and ESIL.\r\n\r\nMore info from Google/Android [:](https://source.android.com/devices/tech/dalvik/dalvik-bytecode.html)\r\n```The machine is register-based, and frames are fixed in size upon creation. Each frame consists of a particular number of registers (specified by the method) as well as any adjunct data needed to execute the method, such as (but not limited to) the program counter and a reference to the .dex file that contains the method.```","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI4ODA1Nzc1Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"From what we understood in https://hackmd.io/EYQwpgDALGbAtBArBAHPKqDsBmewA2ARjyIBMAzECg7TJAoA?edit \r\n\r\nwe should just have an arena of a specific size.. and implement `...` in r_reg to allow resizing if needed, by expanding the last register following the same name pattern.\r\n\r\ni did a quick test with dexdump and i found some that some dex have like 659 registers in a single function xDDDD so yep we need to implement `...` in r_reg :) to make arenas resizables","createdAt":"2017-03-21T12:02:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6838#issuecomment-288057752","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4ODA1ODQzNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"The thing is... when entering/quiting function we shouldnt shrink down the arena, we should just shrink what the user sees in the arena.. this is .. faking down the arena size, but not removing the data in the original arena. but in fact in dalvik unused registers will not be reusable between function executions, because every time you enter a function you start with a clean state, right?","createdAt":"2017-03-21T12:05:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6838#issuecomment-288058436","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4ODA1ODQ2OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"we need toimplement the dalvik debugger in r2 to understand this :P","createdAt":"2017-03-21T12:05:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6838#issuecomment-288058469","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4ODA2MDEwOA==","author":{"login":"h4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"@radare Yep you start with a clean state. Each function define the amount of registers needed using .register or .locals. This includes the arguments (1 or 2 register per argument) and this if the invoke is not static. This information is being parsed by Dex RBIn we just need to save it, but I dont know which is the right place.","createdAt":"2017-03-21T12:12:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6838#issuecomment-288060108","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4ODE3ODQ5Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i guess that its starting with cleanedup register values.. or it is inherting some values from previoues calls, etc?\nmaybe we should add a new esil primitive to do this without having to push N regs by hand in every esil expression etc\n\n\n> On 21 Mar 2017, at 13:12, Marc <notifications@github.com> wrote:\n> \n> @radare <https://github.com/radare> Yep you start with a clean state. Each function define the amount of registers needed using .register or .locals. This includes the arguments (1 or 2 register per argument) and this if the invoke is not static. This information is being parsed by Dex RBIn we just need to save it, but I dont know which is the right place.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/6838#issuecomment-288060108>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lvp67-TVyR4HgFLRDaxa1lT1yaQvks5rn77CgaJpZM4MKaUG>.\n> \n\n","createdAt":"2017-03-21T18:40:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6838#issuecomment-288178497","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI5MTYzMzY4MA==","author":{"login":"alvarofe"},"authorAssociation":"CONTRIBUTOR","body":"600 registers omg and @h4ng3r said in private the arch support until 65535. So yes, defining `...` in r_reg sounds the way to fix this","createdAt":"2017-04-04T21:13:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6838#issuecomment-291633680","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMjg3MjMwMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"DUUUUUUUUDES","createdAt":"2017-05-20T13:09:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6838#issuecomment-302872302","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMjg3NjYyMQ==","author":{"login":"h4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"@radare I'll try to have a first version for this release.","createdAt":"2017-05-20T14:29:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6838#issuecomment-302876621","viewerDidAuthor":false}],"number":6838,"title":"Adapt Arena for Dalvik"},{"body":"which can result in a problem when trying to switch between different overlapped files ","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI3MTcwNTE2OQ==","author":{"login":"alvarofe"},"authorAssociation":"CONTRIBUTOR","body":"Is this a problem for IO? I would say RAnal <-> RBin. IO should limit itself to read and write don't mess up with anal info","createdAt":"2017-01-10T21:35:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6468#issuecomment-271705169","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI3MjY0NzQyNw==","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"IO should at least know, what BinFile the RIOSections belong to.\r\n@radare the problem get partially solved in siol, because siol allows priorizing every mapped section that belongs to a specific binfile.","createdAt":"2017-01-14T19:34:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6468#issuecomment-272647427","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI3MjY0OTkzMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Only if those bins are overlapped. And yes. Analysis and bininfo should depend on iofd imho\n\n> On 14 Jan 2017, at 20:35, condret <notifications@github.com> wrote:\n> \n> IO should at least know, what BinFile the RIOSections belong to.\n> @radare the problem get partially solved in siol, because siol allows priorizing every mapped section that belongs to a specific binfile.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-01-14T20:14:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6468#issuecomment-272649932","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI3MjY2MTA0Mw==","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"their mapping usually does overlap","createdAt":"2017-01-14T23:24:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6468#issuecomment-272661043","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDYxNTY3Nw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T08:26:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6468#issuecomment-644615677","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0OTAyMzE3NQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"This issue still matters. The current analysis doesnt binds to the opened files or maps. So if you switch between diffetent maps or files, the analysis info should swap that info. This also relies on the issue of having multiple overlapping memory maps","createdAt":"2020-06-24T19:32:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6468#issuecomment-649023175","viewerDidAuthor":true}],"number":6468,"title":"Analysis info not tied to any specific file"},{"body":"the io.gdb plugin must provide more debugger commands via =! or \\.. this is what the debugger will use in case of `dh io` (instead of the dh gdb), both methods should be implemented imho, the io one is lower level","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI3MDY0OTYxNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"https://sourceware.org/gdb/onlinedocs/gdb/Packets.html#vCont%20packet","createdAt":"2017-01-05T13:57:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6431#issuecomment-270649614","viewerDidAuthor":false}],"number":6431,"title":"Implement dh io for gdb://"},{"body":"","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU3NzY5NA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T07:11:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6429#issuecomment-644577694","viewerDidAuthor":false}],"number":6429,"title":"r2 -nnn fatmach0 loads flags of subbin, not the ones of the fatmach0"},{"body":"I have most things figured out but I can't figure out how to do a couple of things\r\n\r\nI have a shared library, I can (and have)  added comments, arguments etc. When I'm debugging code which uses this shared library, I can't find a method of opening the shared library during the run or importing the information about it from the project file (or anywhere else) to the location it ends up in memory so I get all my annotations an code analysis. I've managed to use rabin2 to generate labels at the right offset and import them, manually, but it's nowhere near the full experience. \r\n\r\nCan you define argument types for functions in code? I see arguments are defined for some C library built-ins, I'd like to do that for code I'm working on. Arguments only seem to be recognised when they are on the stack and not in registers. \r\n\r\nAnd finally when I have the debugging console up, how do I get the memory window at the top to point to somewhere different, eg memory pointed to by rax or rsi? I've only been able to scroll it manually. \r\n\r\nThanks for any pointers, I'm getting along quite well with r2 but it's vast enough I need a little help. ","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI3MDEwMTE2Mg==","author":{"login":"rolandking"},"authorAssociation":"NONE","body":".. and I can't figure out how to label this as a question .. can someone do it for me please. ","createdAt":"2017-01-03T12:07:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6417#issuecomment-270101162","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI3MTA3OTIzNw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"That's a question for @oddcoder ","createdAt":"2017-01-07T11:52:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6417#issuecomment-271079237","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI3MTA3OTMwNg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Please read https://github.com/radare/radare2/blob/master/doc/types.md","createdAt":"2017-01-07T11:54:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6417#issuecomment-271079306","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI3MTEyNTE2NA==","author":{"login":"rolandking"},"authorAssociation":"NONE","body":"I had read that piece about functions, and I just read it again. However unless I've misunderstood it, that's to compile definitions of system/well-known functions directly into r2 for general use, what I was looking for was a way, when annotating decompiled code, to annotate the parameters of the functions in that executable. eg if I'm working on piece of code and find function foo() in there and deduce it takes an int* and a char* and returns a double, I wanted to put that information in the radare project file for that project. \r\n\r\nI've been getting away with just using comments to capture this, which works ok. I still haven't found a good way to import the annotations of shared libraries when debugging when they are loaded at a random address, that would be most helpful. ","createdAt":"2017-01-08T02:39:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6417#issuecomment-271125164","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI3MjUxNzMzMg==","author":{"login":"oddcoder"},"authorAssociation":"CONTRIBUTOR","body":"you can change the type of variable/argument with `afvt` \r\nfor example\r\n```\r\nafvt local_ch int *\r\n```\r\nfor all possible options that you can change check `afv?`","createdAt":"2017-01-13T18:54:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6417#issuecomment-272517332","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI3MjcyNTkyOQ==","author":{"login":"rolandking"},"authorAssociation":"NONE","body":"I use the afv series commands for renaming and re-typing stack-based local variables already, however that's not the same as specifying the basic signature for a block of code. I'd like to annotate function blocks so they show up the same way known system functions like malloc() and strlen() do. ","createdAt":"2017-01-15T21:40:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6417#issuecomment-272725929","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI3MjcyNjUzNA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"As said in the doc the function def are defined in libr/anal/d https://github.com/radare/radare2/blob/master/libr/anal/d/types","createdAt":"2017-01-15T21:50:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6417#issuecomment-272726534","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI3MzE0NTgyMA==","author":{"login":"rolandking"},"authorAssociation":"NONE","body":"I seem not be making myself very clear. Yes I know that the function signatures of system functions which are compiled into r2 are in the d/types directory. But I'm not talking about well-known system functions here, I'm talking about functions just in the piece of code I'm disassembling. If I find a function foo() in the code I'm working on and deduce its type signature I was looking for a way to define what foo()s function signature is on the fly and save it in the project file.\r\n\r\nThe net effect, for that particular project, would be similar to the system functions which are compiled in, it would show the parameters at the call, however the method of adding them would be via commands which define the function. \r\n\r\nPerhaps an example would be clearer. if I have a symbol for a block of code, and the symbol is foobar and I know that foobar is a function which takes two int*s and returns a char, what commands can I type to add that information to foobar? I have such a function now, 'afi' tells me it has 8 locals and no args, I know how to use afvn to rename the locals, and do, I want to specify that it actually has 2 args and tell it what type they are. \r\n\r\n","createdAt":"2017-01-17T13:02:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6417#issuecomment-273145820","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4NTkwMjU2NQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@oddcoder ","createdAt":"2017-03-11T21:45:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6417#issuecomment-285902565","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUzNzk3NA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T05:24:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6417#issuecomment-644537974","viewerDidAuthor":false}],"number":6417,"title":"shared library and debugging questions"},{"body":"Hello,\r\n\r\nI am thinking to use `radiff2` for some malware sample similarity analysis, and by reading its source code, I figured out that `radiff2` only compares functions **with the same name** (am I understanding it correctly here?) As shown in function [r_anal_diff_fcn](https://github.com/radare/radare2/blob/5e00b6118f01a88cef308e1255ae639e1d4b158f/libr/anal/diff.c#L184)\r\n\r\nThat is, for example I have two malware sample `M1` and `M2`, each of which has two functions `func1` and `func2`. Then it seems to me that `radiff2` will compare the similarity of two `func1` and decide the `match/unmatch`, then do the same thing to `func2`.\r\n\r\nHowever, IMHO, don't you think it would be more reasonable to do a cross-comparison, ignoring the function name?  That is, first use `func1` in `M1` to compare with `func1` and `func2` in `M2`, decide the similarity rate regarding each one, then compare `func2` in `M1` towards `func1` and `func2` in `M2`. \r\n\r\nIsn't it more reasonable? Am I missed anything here? Any advice and suggestion would be appreciated, thank you!\r\n\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI4NTYyMDk3OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"yep makes sense to ignore names, in fact that's what it's done when function have no name iirc","createdAt":"2017-03-10T09:30:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6346#issuecomment-285620978","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU4OTc1NDI5NA==","author":{"login":"kuqadk3"},"authorAssociation":"CONTRIBUTOR","body":"IDK but I just take a look at the code and from what I saw, it just ignores when two functions have the same name and do the comparison later \r\n\r\nhttps://github.com/radareorg/radare2/blob/5e00b6118f01a88cef308e1255ae639e1d4b158f/libr/anal/diff.c#L224-L225\r\n\r\nand only do the comparison when two functions have a different name.\r\n\r\nhttps://github.com/radareorg/radare2/blob/5e00b6118f01a88cef308e1255ae639e1d4b158f/libr/anal/diff.c#L194-L195\r\n\r\nWhy not just ignore the name, though I understand that some tools used function's name as a factor combined with other factors to do partial match (like diaphora)\r\n\r\nhttps://github.com/joxeankoret/diaphora/blob/44dfc7d31401f94764f1f62f2de626527c7fb29c/doc/heuristics.html#L27","createdAt":"2020-02-21T17:31:26Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6346#issuecomment-589754294","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5MzA2MTE0Nw==","author":{"login":"kuqadk3"},"authorAssociation":"CONTRIBUTOR","body":"Is this still a problem @DIV-submission , @radare ?\r\nIf it's still a problem, should we implement a new option where user provides two function name then we do the diff as suggested in https://github.com/radareorg/radare2/issues/6448 or should we fix the old code?","createdAt":"2020-03-01T06:14:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6346#issuecomment-593061147","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5MzM4NTYxNg==","author":{"login":"kuqadk3"},"authorAssociation":"CONTRIBUTOR","body":"@XVilka can you take a look?","createdAt":"2020-03-02T12:49:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6346#issuecomment-593385616","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5Mzc2MDI1Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@kuqadk3 we can introduce an option to switch between these modes. @radare what do you think?\r\n\r\nAnother approach would be introduce confidence/probability levels, similar to https://github.com/radareorg/radare2/issues/14594","createdAt":"2020-03-03T04:21:12Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6346#issuecomment-593760256","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5Mzg4NTI2MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i dont think this is a mode, maybe better to name those different diffing algorithms and allow to pass opptions to them, like weights and such. some kind of -D zign,opt=1,opt2=2,...\n\n> On 3 Mar 2020, at 05:21, Anton Kochkov <notifications@github.com> wrote:\n> \n> @kuqadk3 <https://github.com/kuqadk3> we can introduce an option to switch between these modes. @radare <https://github.com/radare> what do you think?\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/6346?email_source=notifications&email_token=AAG75FTGNU6I6C5DRCI27VTRFSATTA5CNFSM4C2DRZ42YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOENSBAAA#issuecomment-593760256>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FXIUUHTASZ77FDKC5TRFSATTANCNFSM4C2DRZ4Q>.\n> \n\n","createdAt":"2020-03-03T10:46:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6346#issuecomment-593885261","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwNDc5NDYxMg==","author":{"login":"kuqadk3"},"authorAssociation":"CONTRIBUTOR","body":"Hi,\r\nI have checked and figured out that `r_anal_diff_fcn()` is called from `r_core_gdiff_fcn()` which was called from `cmd_anal` and `cmd_cmp`\r\n![image](https://user-images.githubusercontent.com/12135974/77718120-a8b03b00-7014-11ea-8f10-920a5b6e1193.png)\r\n\r\nThe problem of that function (and this issue) does not have anything to do with radiff2.\r\n\r\nBut able to diff two functions with different name is a good feature for radifff2, so I checked and find out there is the only option 'g' in radiff2 took in function's name as an argument, we can modify 'g' mode in radiff2 to accept two function's name instead of one and only diff function with the same one name like now...or maybe I missed an option in radiff2 that also take in function's name as an argument to diff","createdAt":"2020-03-27T03:23:01Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6346#issuecomment-604794612","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwNDg2NTg5NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@kuqadk3 good idea, go for it.","createdAt":"2020-03-27T07:56:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6346#issuecomment-604865894","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwNjQ3NTM2OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"What do you mean\n\n> On 31 Mar 2020, at 01:20, kuqadk3 <notifications@github.com> wrote:\n> \n> ï»¿\n> Is there a way to pass two args into one option? @radare @XVilka\n> \n> For ex :\n> \n> radiff2 -g main1 main2\n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-03-31T08:22:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6346#issuecomment-606475369","viewerDidAuthor":false}],"number":6346,"title":"Cross-comparison functions with different names in Radiff2"},{"body":"For example, lets take something like `ao~jump[1] @@i`\r\nIt should first evaluate grep and column extraction, then iterate.\r\nSame applies to backticks as well.","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI2NzgzOTA0OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Use macros for this\n\n> On 18 Dec 2016, at 19:24, Anton Kochkov <notifications@github.com> wrote:\n> \n> For example, lets take something like ao~jump[1] @@i\n> It should first evaluate grep and column extraction, then iterate.\n> Same applies to backticks as well.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2016-12-18T18:58:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6340#issuecomment-267839048","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyMDQ4MTQ2OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@ret2libc for your new parser.","createdAt":"2018-09-12T01:33:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6340#issuecomment-420481469","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxNzc3MTY2MQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"The new parser correctly supports this, but RGrep does not work well in this case. I still need to investigate exactly, but it complains with \"too many grep string\".\r\n\r\nIn any case, the new parser correctly prioritize the \"parts\" of the command:\r\nCommand: `ao~jump[1] @@i`\r\nParsed as:\r\n```\r\n(iter_instrs_command\r\n  (grep_command command:\r\n    (arged_command command: (cmd_identifier))\r\n    specifier: (grep_specifier (grep_specifier_identifier))))\r\n```","createdAt":"2020-04-22T13:14:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6340#issuecomment-617771661","viewerDidAuthor":false}],"number":6340,"title":"Backticks and grep expansion before evaluating iterations"},{"body":"Short version of this bug: take a shared library not compiled for x86_64 and radare2 is unable to find references to strings.\r\n\r\nLong version:\r\nTake this piece of c code:\r\n```\r\n#include <stdio.h>\r\nvoid test()\r\n{\r\n    printf(\"Hello World!\\n\");\r\n}\r\n```\r\n\r\nName the file as test.c and compile it as following:\r\n`gcc -shared -fPIC test.c -o libtest.so`\r\n\r\nThen open with radare:\r\n```\r\nr2 -AA -e io.cache=true libtest.so\r\n> iz\r\nvaddr=0x0000068d paddr=0x0000068d ordinal=000 sz=13 len=12 section=.rodata type=ascii string=Hello World!\r\n> axt 0x68d\r\n...\r\ndata 0x674 lea rdi, qword str.Hello_World_ in sym.test; const char * s\r\n>pdf@sym.test\r\n/ (fcn) sym.test 19\r\n|   sym.test ();\r\n|           ; UNKNOWN XREF from 0x00000340 (unk)\r\n|           ; UNKNOWN XREF from 0x00001590 (unk)\r\n|           0x00000670      55             push rbp\r\n|           0x00000671      4889e5         mov rbp, rsp\r\n|           0x00000674      488d3d120000.  lea rdi, qword str.Hello_World_ ; 0x68d ; rdi ; \"Hello World!\" @ 0x68d ; const char * s\r\n|           0x0000067b      e8d0feffff     call sym.imp.puts          ; int puts(const char *s);\r\n|           0x00000680      90             nop\r\n|           0x00000681      5d             pop rbp\r\n\\           0x00000682      c3             ret\r\n```\r\n\r\nFine! But now try with:\r\n`gcc -shared -fPIC test.c -m32 -o libtest.so`\r\nWhat we got is:\r\n```\r\nr2 -AA -e io.cache=true libtest.so\r\n...\r\n[can't find function prototype for sym.__x86.get_pc_thunk.dxnctions (aan)\r\ncan't find function prototype for sym.__x86.get_pc_thunk.dx\r\ncan't find function prototype for entry0\r\ncan't find function prototype for sym.__x86.get_pc_thunk.dx\r\ncan't find function prototype for entry0\r\ncan't find function prototype for entry0\r\ncan't find function prototype for fcn.000003e8\r\ncan't find function prototype for sym.__x86.get_pc_thunk.ax\r\n...\r\n> iz\r\nvaddr=0x00000564 paddr=0x00000564 ordinal=000 sz=13 len=12 section=.rodata type=ascii string=Hello World!\r\n> axt 0x564\r\nnull 0x1114 add eax, 0 in unknown function\r\nnull 0x1924 add eax, 0x5640000 in unknown function\r\nnull 0x1928 add eax, 0xd0000 in unknown function\r\n> pdf @sym.test\r\n/ (fcn) sym.test 43\r\n|   sym.test ();\r\n|           ; var int local_4h @ ebp-0x4\r\n|           ; UNKNOWN XREF from 0x00000228 (unk)\r\n|           ; UNKNOWN XREF from 0x000013e4 (unk)\r\n|           0x00000520      55             push ebp\r\n|           0x00000521      89e5           mov ebp, esp\r\n|           0x00000523      53             push ebx\r\n|           0x00000524      83ec04         sub esp, 4\r\n|           0x00000527      e81f000000     call sym.__x86.get_pc_thunk.ax\r\n|           0x0000052c      05d41a0000     add eax, 0x1ad4\r\n|           0x00000531      83ec0c         sub esp, 0xc\r\n|           0x00000534      8d9064e5ffff   lea edx, dword [eax - 0x1a9c]\r\n|           0x0000053a      52             push edx                    ; const char * s\r\n|           0x0000053b      89c3           mov ebx, eax\r\n|           0x0000053d      e88efeffff     call sym.imp.puts          ; int puts(const char *s);\r\n|           0x00000542      83c410         add esp, 0x10\r\n|           0x00000545      90             nop\r\n|           0x00000546      8b5dfc         mov ebx, dword [ebp - local_4h]\r\n|           0x00000549      c9             leave\r\n\\           0x0000054a      c3             ret\r\n```\r\nAs you can see, the string reference is not found.\r\n\r\nr2 -v\r\nradare2 1.1.0-git 13141 @ linux-x86-64 git.1.0.2-197-g0251197\r\ncommit: 025119779f90a9ac3b0235142b6a2bb0a3f07973 build: 2016-12-02","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI2NDczNjY2MA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Here is the lib - [libtest.zip](https://github.com/radare/radare2/files/629876/libtest.zip)\r\n","createdAt":"2016-12-04T22:27:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6283#issuecomment-264736660","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2NDgxMzg2Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Because of the relocs?\n\n> On 4 Dec 2016, at 23:27, Maijin <notifications@github.com> wrote:\n> \n> Here is the lib - libtest.zip\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2016-12-05T10:06:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6283#issuecomment-264813862","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2NjI2MzIzNw==","author":{"login":"unixfreaxjp"},"authorAssociation":"NONE","body":"Anyone tested this yet? A good issue actually.","createdAt":"2016-12-11T04:48:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6283#issuecomment-266263237","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2NjMxMzc4MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"so looks like this compiler generates \"call next;next:;pop eax\" and then computes the relative pointer to the string from here. you can fix this with `asm.emuwrite=true`. but this can be dangerous in some situations. remember to run `aeim` first to initialize the stack.\r\n\r\nthe string itself is not recognized because it priorizes the section symbol in here. we can do better here with the new apis i added that are used in the disasm\r\n\r\n<img width=\"1292\" alt=\"screen shot 2016-12-11 at 23 36 55\" src=\"https://cloud.githubusercontent.com/assets/917142/21083918/c083c63e-bffa-11e6-9e79-797a65be52e6.png\">\r\n","createdAt":"2016-12-11T22:39:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6283#issuecomment-266313781","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2NjMxOTc1MA==","author":{"login":"dodomorandi"},"authorAssociation":"NONE","body":"This is very nice. However I am still having some troubles. [This file](https://drive.google.com/file/d/0B88Q0Bv2HTxxSW9jWUQtNEZpd2c/view?usp=sharing) contains a compiled lib from the source I posted.\r\nI am not able to obtain the same results with this library, even if everything seems to work flawlessly with the one given by @Maijin.\r\n\r\nHere it is what I get using this lib:\r\n![schermata da 2016-12-12 01-17-55](https://cloud.githubusercontent.com/assets/350168/21084773/e16405ae-c008-11e6-860b-380db0a85bfc.png)","createdAt":"2016-12-12T00:21:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6283#issuecomment-266319750","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2NjM5MjIyMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I think we should allow asmemu to emulate part of the stack without requiring asm.emuwrite. That would be the best way to handle all those cases because compilers can get really funky here and identifying patterns to resolve references seems like a bad idea to me\n\n> On 12 Dec 2016, at 01:21, Edoardo Morandi <notifications@github.com> wrote:\n> \n> This is very nice. However I am still having some troubles. This file contains a compiled lib from the source I posted.\n> I am not able to obtain the same results with this library, even if everything seems to work flawlessly with the one given by @Maijin.\n> \n> Here it is what I get using this lib:\n> \n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2016-12-12T10:22:56Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6283#issuecomment-266392222","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2NjQwNDE1OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"thats the same, but calling a helper function to set eax=ret address\n\nwhat about other archs? is this also an issue for arm or mips?\n\n\n> On 12 Dec 2016, at 01:21, Edoardo Morandi <notifications@github.com> wrote:\n> \n> This is very nice. However I am still having some troubles. This file <https://drive.google.com/file/d/0B88Q0Bv2HTxxSW9jWUQtNEZpd2c/view?usp=sharing> contains a compiled lib from the source I posted.\n> I am not able to obtain the same results with this library, even if everything seems to work flawlessly with the one given by @Maijin <https://github.com/Maijin>.\n> \n> Here it is what I get using this lib:\n>  <https://cloud.githubusercontent.com/assets/350168/21084773/e16405ae-c008-11e6-860b-380db0a85bfc.png>\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/6283#issuecomment-266319750>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lsLKLfL0kqXSd0vVEf-69IIEakXcks5rHJOmgaJpZM4LDuDB>.\n> \n\n","createdAt":"2016-12-12T11:21:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6283#issuecomment-266404159","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2NjQzMTAxNQ==","author":{"login":"dodomorandi"},"authorAssociation":"NONE","body":"I am able to cross-compile for ARM, and things seem to work correctly. asm.emuwrite does not seem to be necessary, but I just tried to compile against armv7-a.\r\n\r\nUnfortunately I do not have a gcc binary to compile against MIPS. Anyone can do this? Otherwise I will leave my laptop compile the mips64-elf-gcc overnight.","createdAt":"2016-12-12T13:29:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6283#issuecomment-266431015","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2NjQ0NzcyNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"you can use the ndk.. well i could do this too but im a bit busy. just trying to get feedback and ideas for different problems that may affect this issue. thanks!\n\n> On 12 Dec 2016, at 14:29, Edoardo Morandi <notifications@github.com> wrote:\n> \n> I am able to cross-compile for ARM, and things seem to work correctly. asm.emuwrite does not seem to be necessary, but I just tried to compile against armv7-a.\n> \n> Unfortunately I do not have a gcc binary to compile against MIPS. Anyone can do this? Otherwise I will leave my laptop compile the mips64-elf-gcc overnight.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/6283#issuecomment-266431015>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-ls8AibD4Rf2RDL6FrFiyhZOYmOqJks5rHUw6gaJpZM4LDuDB>.\n> \n\n","createdAt":"2016-12-12T14:42:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6283#issuecomment-266447727","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2NjcxNjEyNg==","author":{"login":"dodomorandi"},"authorAssociation":"NONE","body":"\r\nI performed some tests, and I am not completely sure of the results I get:\r\n![screenshot radare on mips32r6 test lib](https://cloud.githubusercontent.com/assets/350168/21138308/b80b6c1c-c12d-11e6-82c1-7286d897ae8f.png)\r\n\r\nThis is what I get if I compile the test lib with the ndk prebuilts. Specifically, the file has been built with the mipsel-linux-android-gcc 4.9.x (20150123), using arch mips32r6.\r\nIt is my very first time I see a MIPS assembly, and it is almost obscure to me. However I can see that the str.Hello_World_ ref is seen used in the addition operation (but not sure if it is easy to detect that it will be passed to sym.imp.puts -- probably related to my ignorance ;-) ).\r\n\r\nI also tried to use the x86 gcc compiler from ndk, and the issue seems to persist even with this old gcc version.\r\n![screenshot radare on x86 test lib](https://cloud.githubusercontent.com/assets/350168/21139147/d16c3f66-c131-11e6-9252-6dce12e42ffc.png)\r\n\r\nIf you thing I can perform some other test, just let me know. I am happy if I am able to help you with this problem!\r\n\r\n**EDIT:** fixed x86 screenshot","createdAt":"2016-12-13T11:34:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6283#issuecomment-266716126","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2NjcxNjY0Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"without aeim i dont think the emulation of mips will work at all also asm.emuwrite is needed\n\n\n> On 13 Dec 2016, at 12:34, Edoardo Morandi <notifications@github.com> wrote:\n> \n> I performed some tests, and I am not completely sure of the results I get:\n>  <https://cloud.githubusercontent.com/assets/350168/21138308/b80b6c1c-c12d-11e6-82c1-7286d897ae8f.png>\n> This is what I get if I compile the test lib with the ndk prebuilts. Specifically, the file has been built with the mipsel-linux-android-gcc 4.9.x (20150123), using arch mips32r6.\n> It is my very first time I see a MIPS assembly, and it is almost obscure to me. However I can see that the str.Hello_World_ ref is seen used in the addition operation (but not sure if it is easy to detect that it will be passed to sym.imp.puts -- probably related to my ignorance ;-) ).\n> \n> I also tried to use the x86 gcc compiler from ndk, and the issue seems to persist even with this old gcc version.\n>  <https://cloud.githubusercontent.com/assets/350168/21138829/3177d4a8-c130-11e6-8b8d-80699bced315.png>\n> If you thing I can perform some other test, just let me know. I am happy if I am able to help you with this problem!\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/6283#issuecomment-266716126>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-luyDfHEFw2KfeT8JCkYnmH7-mhjKks5rHoLPgaJpZM4LDuDB>.\n> \n\n","createdAt":"2016-12-13T11:37:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/6283#issuecomment-266716646","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2NjcxNzc5NQ==","author":{"login":"dodomorandi"},"authorAssociation":"NONE","body":"Whoops, sorry!\r\nI just forgot to run aeim before making the screenshot for x86. I will edit the previous post in a couple of minutes. However the MIPS screenshot have been correctly taken, setting asm.emu, asm.emuwrite and running aaa. Maybe I am still missing something?","createdAt":"2016-12-13T11:43:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6283#issuecomment-266717795","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2NjcxOTQ5MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"the string ref is fine in mips sorry :D\n\n> On 13 Dec 2016, at 12:37, pancake@nopcode.org wrote:\n> \n> without aeim i dont think the emulation of mips will work at all also asm.emuwrite is needed\n> \n> \n>> On 13 Dec 2016, at 12:34, Edoardo Morandi <notifications@github.com <mailto:notifications@github.com>> wrote:\n>> \n>> I performed some tests, and I am not completely sure of the results I get:\n>>  <https://cloud.githubusercontent.com/assets/350168/21138308/b80b6c1c-c12d-11e6-82c1-7286d897ae8f.png>\n>> This is what I get if I compile the test lib with the ndk prebuilts. Specifically, the file has been built with the mipsel-linux-android-gcc 4.9.x (20150123), using arch mips32r6.\n>> It is my very first time I see a MIPS assembly, and it is almost obscure to me. However I can see that the str.Hello_World_ ref is seen used in the addition operation (but not sure if it is easy to detect that it will be passed to sym.imp.puts -- probably related to my ignorance ;-) ).\n>> \n>> I also tried to use the x86 gcc compiler from ndk, and the issue seems to persist even with this old gcc version.\n>>  <https://cloud.githubusercontent.com/assets/350168/21138829/3177d4a8-c130-11e6-8b8d-80699bced315.png>\n>> If you thing I can perform some other test, just let me know. I am happy if I am able to help you with this problem!\n>> \n>> â€”\n>> You are receiving this because you commented.\n>> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/6283#issuecomment-266716126>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-luyDfHEFw2KfeT8JCkYnmH7-mhjKks5rHoLPgaJpZM4LDuDB>.\n>> \n> \n\n","createdAt":"2016-12-13T11:52:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6283#issuecomment-266719490","viewerDidAuthor":false},{"id":"IC_kwDOAEpMrs56Mclu","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"this is the output from latest r2, so i would say the thing is  working now. the problem is that ghidra and r2dec fail to show that string. but pdc works as expected. so i would close this ticket in r2, but the problem should be fixed in r 2g/r2dec. \r\n\r\n<img width=\"1565\" alt=\"Screenshot 2024-04-11 at 17 16 10\" src=\"https://github.com/radareorg/radare2/assets/6431515/918d8ddc-a179-458b-b6d4-9e0adecea131\">\r\n<img width=\"898\" alt=\"Screenshot 2024-04-11 at 17 18 33\" src=\"https://github.com/radareorg/radare2/assets/6431515/c4ca8b87-6e03-428f-9fb3-53f7d0b85e03\">\r\n<img width=\"975\" alt=\"Screenshot 2024-04-11 at 17 18 59\" src=\"https://github.com/radareorg/radare2/assets/6431515/463c0f42-ae86-4af6-98a3-fbc8478289e5\">\r\n","createdAt":"2024-04-11T16:34:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/6283#issuecomment-2050083182","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs56RgsU","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"related pr adding aaef to aaa fixing the missing string ref breaks the type analysis https://github.com/radareorg/radare2/pull/22825 will look carefully again when i have time","createdAt":"2024-04-12T09:39:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6283#issuecomment-2051410708","viewerDidAuthor":true},{"id":"IC_kwDOAEpMrs56RhRR","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"its possible to fix r2dec by patching the instruction, but only using meta or anal hints should be enough imho so i want to look into that too","createdAt":"2024-04-12T09:39:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6283#issuecomment-2051413073","viewerDidAuthor":true}],"number":6283,"title":"Unable to find string xrefs for shared libraries"},{"body":"The entered Cf command is stored with spaces replaced by underscores, which isn't replaced again when loaded from the project file. This leads to the problem, that the fieldnames are considered as part of the format description. (Also I got this \"Likely a heap buffer overflow\" when constructing the sample, but this msg doesn't appear with real files?)\r\n\r\n```nasm\r\n[0x00000000]> w ABCDE\r\n[0x00000000]> px 5\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x00000000  4142 4344 45                             ABCDE\r\n[0x00000000]> \"Cf 5 bbbbb A B C D\"\r\nr_print_format: Likely a heap buffer overflow\r\n[0x00000000]> C*\r\nCf 5 bbbbb_A_B_C_D @ 0x00000000\r\n[0x00000000]> pd 1\r\n            0x00000000 format bbbbb A B C D {\r\n A : 0x00000000 = 0x41\r\n B : 0x00000001 = 0x42\r\n C : 0x00000002 = 0x43\r\n D : 0x00000003 = 0x44\r\n0x00000004 = 0x45\r\n} 5\r\n[0x00000000]> k anal/meta/*\r\nmeta.f.0x0=5,-1,YmJiYmIgQSBCIEMgRA==\r\nmeta.0x0=f\r\n\r\n[0x00000000]> Ps test\r\ntest\r\n[0x00000000]> Pc test~Cf\r\nCf 5 bbbbb_A_B_C_D @ 0x00000000\r\n[0x00000000]> Po test\r\nFormat strings is too big for this buffer\r\n[0x00000000]> C*\r\nCf 5 bbbbb_A_B_C_D @ 0x00000000\r\n[0x00000000]> pd 1\r\nThis is not an enum\r\nFormat strings is too big for this buffer\r\n            0x00000000 format bbbbb_A_B_C_D {\r\n0x00000000 = 0x00\r\n0x00000001 = 0x00\r\n0x00000002 = 0x00\r\n0x00000003 = 0x00\r\n0x00000004 = 0x00\r\n0x00000005 =  (null) (bitfield) = `tb (null) 0x0`\r\n\r\n0x00000006 = 0\r\n} 5\r\n[0x00000000]> k anal/meta/*\r\nmeta.f.0x0=5,-1,YmJiYmJfQV9CX0NfRA==\r\nmeta.0x0=f\r\n\r\n[0x00000000]> \r\n```\r\n\r\n> radare2 1.1.0-git 13090 @ linux-x86-64 git.1.0.2-127-g2dca265\r\n> commit: 2dca265e15be294bc151c6cde7bb13a6a797a0df build: 2016-11-23","comments":[],"number":6248,"title":"Metadata Format not correctly loaded from project with field names"},{"body":"- [ ]  Plenty of functions are detected, but not disassembled correctly, the end too early or show invalid instructions in the end\r\n\r\nSome examples are the functions:\r\n- [ ] 0x0040856d\r\n- [ ] 0x00404490\r\n- [x] 0x0040734b\r\n\r\n- [ ]  The binary has data and strings located at the beginning of the code section, radare interprets these as functions (functions located between 0x401000 and 0x401975)\r\n\r\npassword: infected\r\n[0bfbda37af78a9d0318b0d0e3024d831c271e6d42f0da41372c8785425a864aa.zip](https://github.com/radare/radare2/files/592517/0bfbda37af78a9d0318b0d0e3024d831c271e6d42f0da41372c8785425a864aa.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI2MDcxMTg1NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Use pdr instead of pdf\n\n> On 15 Nov 2016, at 17:18, pinkflawd notifications@github.com wrote:\n> \n>  Plenty of functions are detected, but not disassembled correctly, the end too early or show invalid instructions in the end\n> Some examples are the functions:\n> 0x0040856d\n> 0x00404490\n> 0x0040734b\n> \n>  The binary has data and strings located at the beginning of the code section, radare interprets these as functions (functions located between 0x401000 and 0x401975)\n> password: infected\n> 0bfbda37af78a9d0318b0d0e3024d831c271e6d42f0da41372c8785425a864aa.zip\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2016-11-15T17:40:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6195#issuecomment-260711854","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2MDc1MTA0NA==","author":{"login":"pinkflawd"},"authorAssociation":"CONTRIBUTOR","body":"My issue is that `?v $FB @ [addr]` in the respective cases doesn't get me the function containing [addr], for all the [addr] in the not-disassembled area :) \r\n","createdAt":"2016-11-15T20:02:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6195#issuecomment-260751044","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2MDc1MTQ0MQ==","author":{"login":"pinkflawd"},"authorAssociation":"CONTRIBUTOR","body":"but also, somewhere in the back of my head I remember that could have something to do with jmp instructions at the (incorrect) end of the function? played with the jmptbl flag, but didnt change anything obvious\n","createdAt":"2016-11-15T20:04:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6195#issuecomment-260751441","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2MDk2Mjk2Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"There are many jump table implementations and several varians depending on how its computed the destination pointer. So its nothing easy or simple to solve. We shoyld implement this for each use case. But i would like to rework the standard anal loop, so this can probably go for 1.2\n\n> On 15 Nov 2016, at 21:04, pinkflawd notifications@github.com wrote:\n> \n> but also, somewhere in the back of my head I remember that could have something to do with jmp instructions at the (incorrect) end of the function? played with the jmptbl flag, but didnt change anything obvious\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2016-11-16T14:37:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6195#issuecomment-260962962","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4MjU1NjgwOA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Related to https://github.com/radare/radare2/issues/5833","createdAt":"2017-02-26T13:43:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6195#issuecomment-282556808","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1NTk3MDY0Nw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"It seems some of the basic blocks of those half-complete functions are coming only from references inside the data section. Probably some function pointers in static structures or something like that and r2 fails to identify those.","createdAt":"2020-07-09T07:57:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6195#issuecomment-655970647","viewerDidAuthor":false}],"number":6195,"title":"Functions analysis errors (some end too early, some data recognized as function)"},{"body":"When I open multiple files via either `o [file] [offset]` or `on [file] [offset]` then save the project and load the project again only the last opened file is loaded.\n\nWhat is the supposed behavior here? I would expect the files to get loaded like I opened them before saving the project. I also attached a longer report that also outlines some issues I found while trying to \"fix\" this myself.\n\nAny comment would be helpful. Thank you!\n## Longer version:\n\n```\n$ echo -n \"aaaaaaaa\" > a\n$ echo -n \"bbbbbbbb\" > b\n$ r2 a\n -- This code was intentionally left blank, try 'e asm.arch = ws'\n[0x00000000]> pd 8\n            0x00000000      61             invalid\n            0x00000001      61             invalid\n            0x00000002      61             invalid\n            0x00000003      61             invalid\n            0x00000004      61             invalid\n            0x00000005      61             invalid\n            0x00000006      61             invalid\n            0x00000007      61             invalid\n[0x00000000]> o b 0x8\n10\n[0x00000008]> s 0\n[0x00000000]> pd 16\n            0x00000000      61             invalid\n            0x00000001      61             invalid\n            0x00000002      61             invalid\n            0x00000003      61             invalid\n            0x00000004      61             invalid\n            0x00000005      61             invalid\n            0x00000006      61             invalid\n            0x00000007      61             invalid\n            0x00000008      62             invalid\n            0x00000009      62             invalid\n            0x0000000a      62             invalid\n            0x0000000b      62             invalid\n            0x0000000c      62             invalid\n            0x0000000d      62             invalid\n            0x0000000e      62             invalid\n            0x0000000f      62             invalid\n[0x00000000]> o\n- 8 a @ 0x0 ; r size=8 \n- 10 b @ 0x8 ; r size=8 \n[0x00000000]> Ps test\ntest\n[0x00000000]> q\nDo you want to save the 'test' project? (Y/n)\n$ r2 -p test\nWARNING: file.sha1 change: b480c074d6b75947c02681f31c90c668c46bf6b8 => 614e00a6cf5e0a27838ec055ff89e945f681054f\n -- Greetings, human.\n[0x00000000]> o\n- 8 /home/user/test/b @ 0x8 ; r size=8 \n```\n\nHere I would expect: same output as when saving the project\n\n```\n$ cat /home/user/.config/radare2/projects/test/rc\n# r2 rdb project file\n\"e file.location = \"\n\"e file.md5 = 3dbe00a167653a1aaee01d93e77e730e\"\n\"e file.nowarn = true\"\n\"e file.openmany = 1\"\n\"e file.path = /home/user/test/b\"\n\"e file.sha1 = b480c074d6b75947c02681f31c90c668c46bf6b8\"\n[...]\n\"e zoom.to = 16\"\nomr 0x0 0x8\n[...]\n```\n\nHere I would expect: \"o /home/user/test/a 0x8\"\n\nI tried a patch that would simply dump 'o*' into the project:\n\n```\ndiff --git a/libr/core/project.c b/libr/core/project.c\nindex 1eed33e..00dfe6e 100644\n--- a/libr/core/project.c\n+++ b/libr/core/project.c\n@@ -447,6 +447,10 @@ R_API bool r_core_project_save_rdb(RCore *core, const char *file, int opts) {\n                r_cons_flush ();\n        }\n        {\n+               r_core_cmd (core, \"o*\", 0);\n+               r_cons_flush();\n+       }\n+       {\n                r_core_cmd (core, \"fz*\", 0);\n                r_cons_flush ();\n        }\n```\n\nBut that does not seem to work either but results in many more maps:\n\n```\n$  /home/user/repos/radare2/binr/radare2/radare2 -p test\nCannot find any map here\n12233760\n10\n12\nCannot find any map here\n12233120\n14\n16\n -- I'm in your source securing your bits.\n[0x00000016]> o\n- 8 /home/user/test/b @ 0x0 ; r size=8 overlaps\n- 10 /home/user/test/a @ 0x8 ; r size=8 overlaps\n- 12 /home/user/test/b @ 0x16 ; r size=8 overlaps\n- 8 /home/user/test/b @ 0x16 ; r size=8 overlaps\n- 12233120 malloc://512 @ 0x0 ; rw size=512 \n- 14 /home/user/test/a @ 0x8 ; r size=8 overlaps\n- 16 /home/user/test/b @ 0x16 ; r size=8 overlaps\n[0x00000016]> om\n8 +0x0 0x16 - 0x1e ; ----\n16 +0x0 0x16 - 0x1e ; -r--\n14 +0x0 0x8 - 0x10 ; -r--\n12233120 +0x0 0x0 - 0x200 ; -r--\n[0x00000016]> \n```\n\nThe project stored with that patch contains:\n\n```\n[...]\n\"e zoom.to = 30\"\nomr 0x0 0x16\nomr 0x0 0x8\no malloc://512 0x0\no /home/mich/test/a 0x8\no /home/mich/test/b 0x16\n[...]\n```\n\nWhen changing this to:\n\n```\n[...]\n\"e zoom.to = 30\"\no malloc://512 0x0\no /home/mich/test/a 0x8\no /home/mich/test/b 0x16\n[...]\n```\n\nit actually still results in more maps as originally stored (and possibly breaking everything depending on `omr`):\n\n```\n[0x00000016]> o\n- 8 /home/mich/test/b @ 0x0 ; r size=8 overlaps\n- 10 /home/mich/test/a @ 0x8 ; r size=8 overlaps\n- 12 /home/mich/test/b @ 0x16 ; r size=8 overlaps\n- 8 /home/mich/test/b @ 0x0 ; r size=8 overlaps\n- 5643088 malloc://512 @ 0x0 ; rw size=512 overlaps\n- 14 /home/mich/test/a @ 0x8 ; r size=8 overlaps\n- 16 /home/mich/test/b @ 0x16 ; r size=8 overlaps\n```\n\nI assume the `e file.path` in the project is responsible for loading the file then the via `o` opend files are added afterwards ... but I would need to look deeper into it.\nI think someone actually knowing more of r2's internals may be more qualified to fix this, because I don't want to break such an important feature such as project saving and loading.\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI3MjQzMTY1Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cc @condret ","createdAt":"2017-01-13T12:24:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6037#issuecomment-272431657","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI3MjQzMTcyNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"moving to 1.3, probably makes sense to take care of this after merging siol","createdAt":"2017-01-13T12:24:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6037#issuecomment-272431727","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI3NTk0MDg0Mg==","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"definitely something that should be easier to fix with siol","createdAt":"2017-01-29T19:51:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6037#issuecomment-275940842","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzMjY0MDMxMQ==","author":{"login":"lambdafu"},"authorAssociation":"NONE","body":"With the latest version, it also doesn't work, but the saved project file contains a different output:\r\n\r\n```\r\no files/boot/ea1.prg 0xbffe;\r\no files/boot/ea2.prg 0x3ffe;\r\no files/boot/ea3.prg 0x07fe;\r\n```\r\n\r\nleads to:\r\n\r\n``\r\nom 3 0x0 0x1800 0x0\r\nom 3 0xbffe 0x7f2 0x0\r\n```\r\n\r\nWith 3 being the fd of the first file opened.  So only the second om line is valid, the other is bogus, and there is no indication of opening the files first.","createdAt":"2017-09-27T20:08:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6037#issuecomment-332640311","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzMjcyMTExOQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@condret mentioning also here, apart from Telegram.","createdAt":"2017-09-28T03:58:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6037#issuecomment-332721119","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0NjgyMzA2Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@rlaemmert wasnt this fixed already? or never commited?","createdAt":"2017-11-24T12:56:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6037#issuecomment-346823062","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2OTk2NzE2Mw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"This feature was introduced in GHIDRA","createdAt":"2019-03-06T04:48:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6037#issuecomment-469967163","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3MDAxMzUwMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"?\n\n> On 6 Mar 2019, at 05:48, Anton Kochkov <notifications@github.com> wrote:\n> \n> This feature was introduced in GHIDRA\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-03-06T08:23:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6037#issuecomment-470013503","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3MjIxMjYzOA==","author":{"login":"greg5678"},"authorAssociation":"NONE","body":"@radare Ghidra is a reverse engineering tool developed by the NSA. https://ghidra-sre.org/","createdAt":"2019-03-12T22:56:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/6037#issuecomment-472212638","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3MjM2MDIzOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"![thanks-captain-obvious](https://user-images.githubusercontent.com/917142/54271001-ea448400-4580-11e9-9b92-bc56a127fc3c.jpg)\r\n","createdAt":"2019-03-13T10:12:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"LAUGH","users":{"totalCount":3}}],"url":"https://github.com/radareorg/radare2/issues/6037#issuecomment-472360238","viewerDidAuthor":false}],"number":6037,"title":"Multiple files loaded via `o [file] [offset]` are not restored properly from project"},{"body":"I'm trying to diff two versions of the same firmware, to see the difference between them. I thought I could use radiff2 to do this. Both are ihex format.\n\nThey are provided. [report.zip](https://github.com/radare/radare2/files/538308/report.zip)\n\nSpecifically, running this command,\n\n```\nradiff2 -A -a mips -b 32 -C ihex://v0.hex ihex://v2.hex\n```\n\nI get this output:\n\n```\nWARNING: bin_strings buffer is too big (0x1fc03000). Use -zzz or set bin.maxstrbuf (RABIN2_MAXSTRBUF) in r2 (rabin2)\n[x] Analyze all flags starting with sym. and entry0 (aa)\n[x] Analyze len bytes of instructions for references (aar)\n[x] Analyze function calls (aac)\n[ ] [*] Use -AA or aaaa to perform additional experimental analysis.\n[x] Constructing a function name for fcn.* and sym.func.* functions (aan))\nWARNING: bin_strings buffer is too big (0x1fc03000). Use -zzz or set bin.maxstrbuf (RABIN2_MAXSTRBUF) in r2 (rabin2)\n[x] Analyze all flags starting with sym. and entry0 (aa)\n[x] Analyze len bytes of instructions for references (aar)\n[x] Analyze function calls (aac)\n[ ] [*] Use -AA or aaaa to perform additional experimental analysis.\n[x] Constructing a function name for fcn.* and sym.func.* functions (aan))\nNo functions found, try running with -A or load a project\n```\n\nNote the final line.\n\nMeanwhile, when I run this command on either file, \n\n```\nradare2 -a mips -b 32 -A ihex://v0.hex\n```\n\nI see that multiple functions are successfully discovered (and these are correct. Based on looking at the code, there are function prologues there.) I grepped for the \"no functions found\" string in the source, and it is far away from any radiff2.c. So it seems the \"no functions found\" message is incorrect, but I'm not entirely sure what could be causing it from looking at the source code, and I'm also not sure why this problem would only show up with diffing, as opposed to normal radare usage.\n\nDiffing these two hex files would be very useful to me. Please let me know if I can provide more detail. Also, I am using most recent version from github.\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI1NDc2MTY0MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"use -AA\n","createdAt":"2016-10-19T09:28:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5993#issuecomment-254761641","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1NDg3ODAxOA==","author":{"login":"galv"},"authorAssociation":"NONE","body":"Tried -AA:\n\n```\nradiff2 -AA -a mips -b 32 -C ihex://v0.hex ihex://v2.hex\nWARNING: bin_strings buffer is too big (0x1fc03000). Use -zzz or set bin.maxstrbuf (RABIN2_MAXSTRBUF) in r2 (rabin2)\n[x] Analyze all flags starting with sym. and entry0 (aa)\n[x] Analyze len bytes of instructions for references (aar)\n[x] Analyze function calls (aac)\n[x] Emulate code to find computed references (aae)\n[Cannot find section boundaries in here\n[x] Analyze consecutive function (aat)\n[aav: Cannot find section at this address\naav: Cannot find section at this address\n[x] Analyze value pointers (aav)\n[x] Constructing a function name for fcn.* and sym.func.* functions (aan)\nWARNING: bin_strings buffer is too big (0x1fc03000). Use -zzz or set bin.maxstrbuf (RABIN2_MAXSTRBUF) in r2 (rabin2)\n[x] Analyze all flags starting with sym. and entry0 (aa)\n[x] Analyze len bytes of instructions for references (aar)\n[x] Analyze function calls (aac)\n[x] Emulate code to find computed references (aae)\n[Cannot find section boundaries in here\n[x] Analyze consecutive function (aat)\n[aav: Cannot find section at this address\naav: Cannot find section at this address\n[x] Analyze value pointers (aav)\n[x] Constructing a function name for fcn.* and sym.func.* functions (aan)\nNo functions found, try running with -A or load a project\n```\n\nOf course I understand ihex does not contain sections. (It's essentially one big .text section with some .rodata interspersed.) I can manually add section information obviously, within r2, but radiff2 provides no way to do this as far as I can tell, and I'm not sure adding section information will help the no functions found problem. Since when I do\n\n```\nradare2 -AA -a mips -b 32 ihex://v0.hex\n```\n\nI get the same output:\n\n```\nWARNING: bin_strings buffer is too big (0x1fc03000). Use -zzz or set bin.maxstrbuf (RABIN2_MAXSTRBUF) in r2 (rabin2)\n[x] Analyze all flags starting with sym. and entry0 (aa)\n[x] Analyze len bytes of instructions for references (aar)\n[x] Analyze function calls (aac)\n[x] Emulate code to find computed references (aae)\n[Cannot find section boundaries in here\n[x] Analyze consecutive function (aat)\n[aav: Cannot find section at this address\naav: Cannot find section at this address\n[x] Analyze value pointers (aav)\n[x] Constructing a function name for fcn.* and sym.func.* functions (aan)\n```\n\nHere is afl's output in r2. Functions are there:\n\n```\n0x1d007e00   16 320          fcn.1d007e00\n0x1d007f40    4 108          fcn.1d007f40\n0x1d007fac    6 484          fcn.1d007fac\n0x1d008190    8 344          fcn.1d008190\n0x1d0082e8    6 316          fcn.1d0082e8\n0x1d009ad0    3 108          fcn.1d009ad0\n0x1d009c3c    8 296          fcn.1d009c3c\n0x1d009f54    6 208          fcn.1d009f54\n0x1d00a024    4 80           fcn.1d00a024\n0x1d00a07c   41 644          fcn.1d00a07c\n0x1d00a300   36 644  -> 628  fcn.1d00a300\n0x1d00a584   43 552          fcn.1d00a584\n0x1d00a7ac   30 432          fcn.1d00a7ac\n0x1d00ab84    5 164  -> 296  fcn.1d00ab84\n0x1d00ac54    3 44   -> 68   loc.1d00ac54\n0x1d00ac80    3 44   -> 68   loc.1d00ac80\n0x1d00acac    3 44   -> 68   loc.1d00acac\n0x1d00acf0    1 24           loc.1d00acf0\n0x1d00ad0c    1 24           loc.1d00ad0c\n0x1d00ad28    1 24           loc.1d00ad28\n0x1d00ad40   22 484          fcn.1d00ad40\n0x1d00af24   40 744  -> 728  fcn.1d00af24\n0x1d00b20c   50 972  -> 884  fcn.1d00b20c\n0x1d00b5d8    1 44           fcn.1d00b5d8\n0x1d00b604    1 96           fcn.1d00b604\n0x1d00b664    6 152          fcn.1d00b664\n0x1d00b6fc    6 148          fcn.1d00b6fc\n0x1d00b790   16 964  -> 800  fcn.1d00b790\n0x1d00bb54   10 388  -> 308  fcn.1d00bb54\n0x1d00bf10    6 132          fcn.1d00bf10\n0x1d00bf94   25 488          fcn.1d00bf94\n0x1d00c1b4   10 164          fcn.1d00c1b4\n0x1d00c258   12 260          fcn.1d00c258\n0x1d00c37c    5 100          fcn.1d00c37c\n0x1d00c3e0    1 220          fcn.1d00c3e0\n0x1d00c4ec    1 92           fcn.1d00c4ec\n0x1d00c548    1 220          fcn.1d00c548\n0x1d00c624    1 48           fcn.1d00c624\n0x1d00c654   24 1452 -> 888  fcn.1d00c654\n0x1d00cc00    3 72           fcn.1d00cc00\n0x1d00cc50    3 72           fcn.1d00cc50\n0x1d00cca0   18 320          fcn.1d00cca0\n0x1d00ce70    3 60           fcn.1d00ce70\n0x1d00ceac   17 232          fcn.1d00ceac\n0x1d00cf94    3 52           fcn.1d00cf94\n0x1d00cfc8    3 88           fcn.1d00cfc8\n0x1d00d020    5 96           fcn.1d00d020\n0x1d00d080   16 204          fcn.1d00d080\n0x1d00d14c    1 56           fcn.1d00d14c\n0x1d00d184    4 112          fcn.1d00d184\n0x1d00d1f4    1 112          fcn.1d00d1f4\n0x1d00d264    4 112          fcn.1d00d264\n0x1d00d2d4    1 124          fcn.1d00d2d4\n0x1d00d350    4 112          fcn.1d00d350\n0x1d00d3c0    3 40           fcn.1d00d3c0\n0x1d00d3e8   22 464          fcn.1d00d3e8\n0x1d00d5b8    8 192          fcn.1d00d5b8\n0x1d00d678    3 92           fcn.1d00d678\n0x1d00d794    5 100          fcn.1d00d794\n0x1d00d7f8   15 172          fcn.1d00d7f8\n0x1d00d8a4    3 172          fcn.1d00d8a4\n0x1d00d950    6 124          fcn.1d00d950\n0x1d00d9cc    8 108  -> 104  fcn.1d00d9cc\n0x1d00da38    5 340          fcn.1d00da38\n0x1d00dbdc    3 116          fcn.1d00dbdc\n0x1d00dc50    3 104          fcn.1d00dc50\n0x1d00dcb8    5 340          fcn.1d00dcb8\n0x1d00de5c    3 116          fcn.1d00de5c\n0x1d00ded0    3 104          fcn.1d00ded0\n0x1d00df38    1 44           fcn.1d00df38\n0x1d00df84    4 140          fcn.1d00df84\n0x1d00e010    9 220          fcn.1d00e010\n0x1d00e0ec    1 44           fcn.1d00e0ec\n0x1d00e138    4 140          fcn.1d00e138\n0x1d00e1c4    9 220          fcn.1d00e1c4\n0x1d00edd4    1 44           fcn.1d00edd4\n0x1d00ee14    8 168          fcn.1d00ee14\n0x1d00eebc    1 60           fcn.1d00eebc\n0x1d00ef18    1 28           fcn.1d00ef18\n0x1d00ef3c    6 76           fcn.1d00ef3c\n0x1d00ef88   24 420          fcn.1d00ef88\n0x1d00f12c    9 416          fcn.1d00f12c\n0x1d00f44c    9 336          fcn.1d00f44c\n0x1d00f59c    1 80           fcn.1d00f59c\n0x1d00f5ec    5 252          fcn.1d00f5ec\n0x1d00f7fc    1 116          fcn.1d00f7fc\n0x1d00f908    6 224          fcn.1d00f908\n0x1d00fb8c    9 184          fcn.1d00fb8c\n0x1d00fc44   13 168          fcn.1d00fc44\n0x1d00fcec    5 164          fcn.1d00fcec\n0x1d00fe30    5 136          fcn.1d00fe30\n0x1d00ff9c    3 100          fcn.1d00ff9c\n0x1d010000    5 96           fcn.1d010000\n0x1d010060    1 80           fcn.1d010060\n0x1d0100b0    3 80           fcn.1d0100b0\n0x1d0101dc    3 72           fcn.1d0101dc\n0x1d01026c    3 68           fcn.1d01026c\n0x1d010378    3 60           fcn.1d010378\n0x1d0103b4    3 60           fcn.1d0103b4\n0x1d0103f0    3 60           fcn.1d0103f0\n0x1d01042c    3 56           fcn.1d01042c\n0x1d01050c    1 52           fcn.1d01050c\n0x1d010540    3 48           fcn.1d010540\n0x1d0105c8    1 44           fcn.1d0105c8\n0x1d0105f4    1 44           fcn.1d0105f4\n0x1d0106a0    1 40           fcn.1d0106a0\n0x1d010740    1 40           fcn.1d010740\n0x1d0107e0    1 36           fcn.1d0107e0\n0x1d010864    1 32           fcn.1d010864\n0x1d010964    3 28           fcn.1d010964\n0x1d010998    1 24           fcn.1d010998\n0x1d0109e8    1 8            fcn.1d0109e8\n0x1d0109f0    1 8            fcn.1d0109f0\n```\n","createdAt":"2016-10-19T17:09:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5993#issuecomment-254878018","viewerDidAuthor":false}],"number":5993,"title":"radiff2 \"No functions found, try running with -A or load a project\" for ihex inputs."},{"body":"```\r\n$> r2 challenge1.exe\r\n[]>aaa\r\n[]>iz ~pass                                                                                                                                                   \r\nvaddr=0x0040d198 paddr=0x0000bf98 ordinal=001 sz=18 len=17 section=.rdata type=ascii string=Enter password:\\r\\n                                                      \r\nvaddr=0x0040d1b8 paddr=0x0000bfb8 ordinal=003 sz=17 len=16 section=.rdata type=ascii string=Wrong password\\r\\n  \r\n[]>axt 0x0040d198                                                                                                                                              \r\ndata 0x40144e push str.Enter_password:_r_n in sub.KERNEL32.dll_GetStdHandle_420  \r\n\r\n$ r2 -B 0xfd0000 challenge1.exe\r\n[]>aaa\r\n[]>iz ~pass                                                                                                                                                   \r\nvaddr=0x00fdd198 paddr=0x0000bf98 ordinal=001 sz=18 len=17 section=.rdata type=ascii string=Enter password:\\r\\n                                                           \r\nvaddr=0x00fdd1b8 paddr=0x0000bfb8 ordinal=003 sz=17 len=16 section=.rdata type=ascii string=Wrong password\\r\\n \r\n[]>axt 0x00fdd198\r\n```\r\nthis is the used binary \r\n[challenge1.exe.zip](https://github.com/radare/radare2/files/507246/challenge1.exe.zip)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQ3Mzg2OTY5OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i think @ret2libc fixed this, can you confirm?","createdAt":"2019-03-18T11:17:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5905#issuecomment-473869698","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3MzkxOTUxOQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I'm honestly not sure I did... or when. But please re-test the reproducer :)","createdAt":"2019-03-18T13:55:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5905#issuecomment-473919519","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3Mzk3OTk2Ng==","author":{"login":"oddcoder"},"authorAssociation":"CONTRIBUTOR","body":"nope, not fixed, actually addresses failed to relocate and triggered an issue in afta as well\r\n```\r\nâžœ  Downloads r2 -B 0xfd0000 challenge1.exe\r\n[0x00fd170d]> aaa\r\n[x] Analyze all flags starting with sym. and entry0 (aa)\r\n[x] Analyze function calls (aac)\r\n[x] Analyze len bytes of instructions for references (aar)\r\n[Stack isn't initialized.s for all functions (aaft)\r\nTry running aei and aeim commands before aft for default stack initialization\r\nStack isn't initialized.\r\n[.. bunch of failing to initialize stacks ...]\r\nTry running aei and aeim commands before aft for default stack initialization\r\nStack isn't initialized.\r\n[x] Type matching analysis for all functions (aaft)\r\n[x] Use -AA or aaaa to perform additional experimental analysis.\r\n[0x00fd170d]> iz~pass\r\n001 0x0000bf98 0x0040d198  17  18 (.rdata) ascii Enter password:\\r\\n\r\n003 0x0000bfb8 0x0040d1b8  16  17 (.rdata) ascii Wrong password\\r\\n\r\n[0x00fd170d]> axt 0x0040d1b8\r\n[0x00fd170d]> axt 0x00fdd198\r\n```","createdAt":"2019-03-18T16:07:54Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5905#issuecomment-473979966","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3NDI2ODg1MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"is this bini relocatable? anyway, -B doesnt seems to work fine with strings, so the strings flags are not relocated at all\n\n> On 18 Mar 2019, at 17:07, Ahmed Abd El Mawgood <notifications@github.com> wrote:\n> \n> nope, not fixed, actually addresses failed to relocate and triggered an issue in afta as well\n> \n> âžœ  Downloads r2 -B 0xfd0000 /bin/ls\n> [0x00fd5310]> aaa\n> [x] Analyze all flags starting with sym. and entry0 (aa)\n> [x] Analyze function calls (aac)\n> [x] Analyze len bytes of instructions for references (aar)\n> [x] Type matching analysis for all functions (aaft)\n> [x] Use -AA or aaaa to perform additional experimental analysis.\n> [0x00fd5310]> q\n> âžœ  Downloads r2 -B 0xfd0000 challenge1.exe\n> [0x00fd170d]> aaa\n> [x] Analyze all flags starting with sym. and entry0 (aa)\n> [x] Analyze function calls (aac)\n> [x] Analyze len bytes of instructions for references (aar)\n> [Stack isn't initialized.s for all functions (aaft)\n> Try running aei and aeim commands before aft for default stack initialization\n> Stack isn't initialized.\n> [.. bunch of failing to initialize stacks ...]\n> Try running aei and aeim commands before aft for default stack initialization\n> Stack isn't initialized.\n> [x] Type matching analysis for all functions (aaft)\n> [x] Use -AA or aaaa to perform additional experimental analysis.\n> [0x00fd170d]> iz~pass\n> 001 0x0000bf98 0x0040d198  17  18 (.rdata) ascii Enter password:\\r\\n\n> 003 0x0000bfb8 0x0040d1b8  16  17 (.rdata) ascii Wrong password\\r\\n\n> [0x00fd170d]> axt 0x0040d1b8\n> [0x00fd170d]> axt 0x00fdd198\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/5905#issuecomment-473979966>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lqdOgXlzO-glSDvzDzUevMmbjAe0ks5vX7nfgaJpZM4KNEpc>.\n> \n\n","createdAt":"2019-03-19T09:40:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5905#issuecomment-474268851","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzI0OTM5NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Will be fixed with https://github.com/radare/radare2/issues/13753. Do you wanna work on it? or at least write some tests when its implemented?","createdAt":"2019-04-15T13:23:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5905#issuecomment-483249395","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzMzMDYwMA==","author":{"login":"oddcoder"},"authorAssociation":"CONTRIBUTOR","body":"sure I can unit test it once it is implemented just mention me in the PR, right now I can't see a pr for it","createdAt":"2019-04-15T16:47:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5905#issuecomment-483330600","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ5MDgyNTUzMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"enotime for this rls","createdAt":"2019-05-09T09:15:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5905#issuecomment-490825530","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0NTQwODg4Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can you provide a test?","createdAt":"2019-10-23T11:58:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5905#issuecomment-545408887","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0NTQyNzQxMw==","author":{"login":"oddcoder"},"authorAssociation":"CONTRIBUTOR","body":"I have a trigger explained above ^ and the binary file as well","createdAt":"2019-10-23T12:49:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5905#issuecomment-545427413","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTU5OTAyOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cc @yossizap ","createdAt":"2020-01-17T12:00:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5905#issuecomment-575599029","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NTYwNjkxNg==","author":{"login":"yossizap"},"authorAssociation":"CONTRIBUTOR","body":"Will look into it","createdAt":"2020-01-17T12:28:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5905#issuecomment-575606916","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NjA1MzE2OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@yossizap 12h left for the release. any update on this?","createdAt":"2020-01-19T22:12:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5905#issuecomment-576053169","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NjA1NTM5OA==","author":{"login":"yossizap"},"authorAssociation":"CONTRIBUTOR","body":"Sorry, didn't have a ton of time. This is a PE specific issue.\r\n\r\nhttps://github.com/radareorg/radare2/blob/35b05d86972f32e8962758c336d4914a757bf1b9/libr/bin/format/pe/pe.c#L341-L348\r\n\r\nIt uses the baddr from the header instead of using the actual binaddr. Attempting to fix.","createdAt":"2020-01-19T22:38:27Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5905#issuecomment-576055398","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NjA1NjIzOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"thanks","createdAt":"2020-01-19T22:47:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5905#issuecomment-576056238","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3NjA2MTExMQ==","author":{"login":"yossizap"},"authorAssociation":"CONTRIBUTOR","body":"That was a separate issue that was misleading. Can't really find any other differences specific to PEs that deal with baddr. This will require more time, maybe I'll be able to find something tomorrow morning.\r\n\r\nNot an issue in debug rebase btw, just with this type of rebase.\r\n\r\nEDIT: Also, not an issue with other windows binaries. This seems to be specific to something in that binary.","createdAt":"2020-01-19T23:45:52Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5905#issuecomment-576061111","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5MzM5OTU0NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"see the new rb command (needs to  implement anal things)","createdAt":"2020-03-02T13:24:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5905#issuecomment-593399544","viewerDidAuthor":false}],"number":5905,"title":"Cross references are broken in rebased binaries"},{"body":"Function detection misses callback functions in Windows binaries, found to be true at least for CreateThread callback handlers and SetWindowsHookEx handlers. \n\nBelow, 0x1000282d should be a function address, but is handled as dword. \n\n```\n0x10002080      50             push eax\n0x10002081      53             push ebx\n0x10002082      ff75d4         push dword [ebp - local_2ch]\n0x10002085      682d280010     push 0x1000282d\n0x1000208a      53             push ebx\n0x1000208b      53             push ebx\n0x1000208c      ff1574400010   call dword [sym.imp.KERNEL32.dll_CreateThread] ; sym.imp.KERNEL32.dll_CreateThread\n```\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI1MTM0MzE4MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can you share a sample bin?\n","createdAt":"2016-10-04T09:45:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5890#issuecomment-251343180","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1MTM0OTQwNg==","author":{"login":"pinkflawd"},"authorAssociation":"CONTRIBUTOR","body":"[f1b203fc38f047010d7071cd5f106045.zip](https://github.com/radare/radare2/files/508165/f1b203fc38f047010d7071cd5f106045.zip)\n","createdAt":"2016-10-04T10:14:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5890#issuecomment-251349406","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1MTM3NzA4NA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i dont see the same disasm at that offset. i mostly find refs to data in pushes, not code\n","createdAt":"2016-10-04T12:44:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5890#issuecomment-251377084","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDI1MTQ0MTE1Nw==","author":{"login":"pinkflawd"},"authorAssociation":"CONTRIBUTOR","body":"oh right different binary. here a SetWindowsHookEx call is located in pdf @ 0x10012536, the callback thats not detected is 0x10013318:\n\n```\n0x10012550      50             push eax\n0x10012551      6818330110     push 0x10013318\n0x10012556      6a03           push 3\n0x10012558      ff15a4820110   call dword [sym.imp.USER32.dll_SetWindowsHookExW] ; sym.imp.USER32.dll_SetWindowsHookExW\n0x1001255e      eb13           jmp 0x10012573\n```\n\nalso CreateThread is present in 0x1000f974:\n\n```\n0x1000fb12      8b3d34810110   mov edi, dword [sym.imp.KERNEL32.dll_CreateThread] \n0x1000fb18      8d45f0         lea eax, [ebp - local_10h]\n0x1000fb1b      50             push eax\n0x1000fb1c      6a04           push 4\n0x1000fb1e      53             push ebx\n0x1000fb1f      688fff0010     push 0x1000ff8f\n0x1000fb24      53             push ebx\n0x1000fb25      53             push ebx\n0x1000fb26      ffd7           call edi\n```\n\nhope that helps\n","createdAt":"2016-10-04T16:33:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5890#issuecomment-251441157","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1MTQ4MzgwMw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"I Don't see changes:\n\n![image](https://cloud.githubusercontent.com/assets/1408600/19088589/158843f8-8a77-11e6-9cfa-268f55d92b5c.png)\n\n![image](https://cloud.githubusercontent.com/assets/1408600/19088553/f52b3dd6-8a76-11e6-91e5-41d7fbd516f1.png)\n","createdAt":"2016-10-04T19:11:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5890#issuecomment-251483803","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1MTUwNzE5OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Use afr or aa\n\n> On 04 Oct 2016, at 21:11, Maijin notifications@github.com wrote:\n> \n> I Don't see changes:\n> \n> â€”\n> You are receiving this because you modified the open/close state.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2016-10-04T20:42:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5890#issuecomment-251507199","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1MTUwNzI5Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"And u have to analize to get anything in the disasm\n\n> On 04 Oct 2016, at 21:11, Maijin notifications@github.com wrote:\n> \n> I Don't see changes:\n> \n> â€”\n> You are receiving this because you modified the open/close state.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2016-10-04T20:43:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5890#issuecomment-251507293","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1MTUxMjMyNg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"It's analysed\n","createdAt":"2016-10-04T21:01:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5890#issuecomment-251512326","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1MTUxMjU0Ng==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"![image](https://cloud.githubusercontent.com/assets/1408600/19092347/83b693ca-8a86-11e6-9ebe-0f114a550098.png)\n\n![image](https://cloud.githubusercontent.com/assets/1408600/19092355/8ec9ee2e-8a86-11e6-83b9-c3f3e2d1172a.png)\n","createdAt":"2016-10-04T21:02:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5890#issuecomment-251512546","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1MzQ3OTc4MA==","author":{"login":"pinkflawd"},"authorAssociation":"CONTRIBUTOR","body":"Works, in a sense, when I issue an 'afr' command for each function where I suspect indirectly referenced code. This way I go through my binaries, get all the functions that e.g. contain a CreateThread, then 'afr' these again to have radare generate functions for the thread handler function.\nThats cool.\nWould there be a way to add this analysis to e.g. aaa command, so callbacks are analyzed automatically? With my method, by definition, I always miss something.\n","createdAt":"2016-10-13T10:47:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5890#issuecomment-253479780","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1MzUzMDI2Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"aa should run afr but the problem is that its probably analizing in different order and overlapping some functions.\n\nyou can try to set `e anal.calls=true` before `aa` and see if that solves the problem if not you can also do this:\n\ne anal.hasnext=true\naac; afr;afr @@ sym*\n\nsorry i have not much time lately to look deeper on this issue\n\n> On 13 Oct 2016, at 12:47, pinkflawd notifications@github.com wrote:\n> \n> Works, in a sense, when I issue an 'afr' command for each function where I suspect indirectly referenced code. This way I go through my binaries, get all the functions that e.g. contain a CreateThread, then 'afr' these again to have radare generate functions for the thread handler function.\n> Thats cool.\n> Would there be a way to add this analysis to e.g. aaa command, so callbacks are analyzed automatically? With my method, by definition, I always miss something.\n> \n> â€”\n> You are receiving this because you modified the open/close state.\n> Reply to this email directly, view it on GitHub https://github.com/radare/radare2/issues/5890#issuecomment-253479780, or mute the thread https://github.com/notifications/unsubscribe-auth/AA3-lq21IS278VmOZDE60w8e6nuSfbXcks5qzgxfgaJpZM4KLDSd.\n","createdAt":"2016-10-13T14:30:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5890#issuecomment-253530267","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1MzgyMDkyMA==","author":{"login":"pinkflawd"},"authorAssociation":"CONTRIBUTOR","body":"Awesome :D Second option works like charm :) Thanks a lot!\nThe pic is on top before, bottom is after, works like graph face lift ^^ 8 more functions found \n\n![comparison](https://cloud.githubusercontent.com/assets/5487036/19391603/a3dc5794-922d-11e6-927d-327b676cae71.png)\n","createdAt":"2016-10-14T14:46:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5890#issuecomment-253820920","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1NDc4NzEyMQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"ðŸ˜ðŸ˜ðŸ˜\n\n> On 14 Oct 2016, at 16:46, pinkflawd notifications@github.com wrote:\n> \n> Awesome :D Second option works like charm :) Thanks a lot!\n> The pic is on top before, bottom is after, works like graph face lift ^^ 8 more functions found\n> \n>  https://cloud.githubusercontent.com/assets/5487036/19391603/a3dc5794-922d-11e6-927d-327b676cae71.png\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub https://github.com/radare/radare2/issues/5890#issuecomment-253820920, or mute the thread https://github.com/notifications/unsubscribe-auth/AGIjG8vaZTFBYu0ePJRen0ILf_MwkyHHks5qz5W3gaJpZM4KLDSd.\n","createdAt":"2016-10-19T11:33:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5890#issuecomment-254787121","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY0NzUyNDQ0NQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"This has not received any activity in the last years. Was the issue fixed? If not, could you share a reproducer (the one listed has a password)?","createdAt":"2020-06-22T13:37:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5890#issuecomment-647524445","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MDk4MzI4Mg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Always same password \"infected\".","createdAt":"2020-06-29T07:27:08Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5890#issuecomment-650983282","viewerDidAuthor":false}],"number":5890,"title":"function detection doesn't find callbacks f. eg. CreateThread, SetWindowsHookEx, etc."},{"body":"Hello,\n\nI've been comparing the output of radare2 with the DOSBox debugger.\nI'm working on `fire.exe` from the DOS video game **Fire & Ice** (Renegade, 1993).\n\n```\n% sha256sum FIRE.EXE \nca0e8e19074351bf3ba6ca69c537220ec4a75077b376ecd458a92e4e4255e469  FIRE.EXE\n```\n\nStarting at entry point, DOSBox, is going to display the following:\n\n```\n11A8:000E  0E                  push cs\n11A8:000F  1F                  pop  ds\n11A8:0010  06                  push es\n11A8:0011  8B0E0C00            mov  cx,[000C]              ds:[000C]=F000\n11A8:0015  8BF1                mov  si,cx\n11A8:0017  4E                  dec  si\n11A8:0018  89F7                mov  di,si\n11A8:001A  8CDB                mov  bx,ds\n11A8:001C  031E0A00            add  bx,[000A]              ds:[000A]=20C8\n11A8:0020  8EC3                mov  es,bx\n11A8:0022  FD                  std\n11A8:0023  F3A4                repe movsb\n11A8:0025  53                  push bx\n11A8:0026  B82B00              mov  ax,002B\n11A8:0029  50                  push ax\n11A8:002A  CB                  retf\n11A8:002B  2E8B2E0800          mov  bp,cs:[0008]           cs:[0008]=0FBB\n11A8:0030  8CDA                mov  dx,ds\n11A8:0032  89E8                mov  ax,bp\n11A8:0034  3D0010              cmp  ax,1000\n11A8:0037  7603                jbe  0000003C ($+3)         (down)\n11B9:0039  B80010              mov  ax,1000\n11B9:003C  29C5                sub  bp,ax\n11B9:003E  29C2                sub  dx,ax\n11B9:0040  29C3                sub  bx,ax\n11B9:0042  8EDA                mov  ds,dx\n11B9:0042  8EDA                mov  ds,dx\n11B9:0044  8EC3                mov  es,bx\n11B9:0046  B103                mov  cl,03\n11B9:0048  D3E0                shl  ax,cl\n11B9:004A  89C1                mov  cx,ax\n11B9:004C  D1E0                shl  ax,1\n11B9:004E  48                  dec  ax\n11B9:004F  48                  dec  ax\n11B9:0050  8BF0                mov  si,ax\n11B9:0052  8BF8                mov  di,ax\n11B9:0054  F3A5                repe movsw\n11B9:0056  09ED                or   bp,bp\n11B9:0058  75D8                jne  00000032 ($-28)        (no jmp)\n...\n```\n\nwhile, radare2 is going to display the following\n\n```\n/ (fcn) entry0 29\n|           0000:fdbe      0e             push cs\n|           0000:fdbf      1f             pop ds\n|           0000:fdc0      06             push es\n|           0000:fdc1      8b0e0c00       mov cx, word [0xc]           ; [0xc:2]=0xffff loc.0000ffff\n|           0000:fdc5      8bf1           mov si, cx\n|           ; DATA XREF from 0x0000230b (unk)\n|           0000:fdc7      4e             dec si\n|           0000:fdc8      89f7           mov di, si\n|           ; DATA XREF from 0x000210ce (unk)\n|           0000:fdca      8cdb           mov bx, ds\n|           ; DATA XREF from 0x000dc8a0 (int.000dc897)\n|           0000:fdcc      031e0a00       add bx, word [0xa]\n|           0000:fdd0      8ec3           mov es, bx\n|           0000:fdd2      fd             std\n|           0000:fdd3      f3a4           rep movsb byte es:[di], byte ptr [si]\n|           0000:fdd5      53             push bx\n|           0000:fdd6      b82b00         mov ax, 0x2b                 ; '+'\n|           0000:fdd9      50             push ax\n\\           0000:fdda      cb             retf\n            0000:fddb      2e8b2e0800     mov bp, word cs:[8]          ; [0x8:2]=32\n            0000:fde0      8cda           mov dx, ds\n|           ; JMP XREF from 0x0000665f (fcn.00006658)\n|       .-> 0000:fde2      89e8           mov ax, bp\n|       |   ; DATA XREF from 0x00015cd5 (fcn.00015c42)\n|       |   ; DATA XREF from 0x00009b8e (fcn.00009b8a)\n|       |   0000:fde4      3d0010         cmp ax, 0x1000\n|      ,==< 0000:fde7      7603           jbe 0xfdec\n|      ||   0000:fde9      b80010         mov ax, 0x1000\n|      `--> 0000:fdec      29c5           sub bp, ax\n|       |   0000:fdee      29c2           sub dx, ax\n|       |   0000:fdf0     .string \")\\x,3\\x(>\\x-:\\x(>\\x,3\\x+1\" ; len=8\n|       |   0000:fdf8      d3e0           shl ax, cl\n|       |   0000:fdfa      89c1           mov cx, ax\n|       |   0000:fdfc      d1e0           shl ax, 1\n|       |   0000:fdfe      48             dec ax\n|       |   ; DATA XREF from 0x00005a15 (unk)\n|       |   ; DATA XREF from 0x00007fd4 (fcn.00007fc5)\n|       |   0000:fdff      48             dec ax\n|       |   0000:fe00      8bf0           mov si, ax\n        |   0000:fe02      8bf8           mov di, ax\n        |   0000:fe04      f3a5           rep movsd dword es:[di], dword ptr [si]\n        |   0000:fe06      09ed           or bp, bp\n        `=< 0000:fe08      75d8           jne 0xfde2                   ; fcn.00006658+0x978a\n...\n```\n\nYou can see that, for DOSBox, at position `11B9:0040`, the bytes `29C38EDA8EDA8EC3B103` corresponds to the instructions `sub  bx,ax; mov  ds,dx; mov  ds,dx; mov  es,bx; mov  cl,03`, while radare2, at position `0000:fdf0`, interprets the same bytes as a string, which bothers me because theses instructions are being executed by DOSBox when the game is launched and analyzed by the debugger.\n\nI would like to know if it's a radare2 bug or if I made a mistake when analysing the binary.\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI0OTI1MjY3Nw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Hello,\n\nEnsure you are using radare2 from git, if you're unsure paste output of `r2 -v` here.\nTo install radare2 from git, first uninstall your version of radare2 and clean your distro. Then use `git clone https://github.com/radare/radare2 && cd radare2 && ./sys/install.sh`, verify your version and check if there is no error using `r2 -v`.\n","createdAt":"2016-09-23T17:25:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-249252677","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0OTI1MzE2MA==","author":{"login":""},"authorAssociation":"NONE","body":"Hello @Maijin,\n\nI'm using the following version:\n\n```\n% r2 -v\nradare2 0.10.5 9999999 @ linux-x86-64 git.0.10.5\ncommit: HEAD build: 2016-08-23\n```\n\nI'm installing radare2 from git right away.\n","createdAt":"2016-09-23T17:27:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-249253160","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0OTI1NjE1Nw==","author":{"login":""},"authorAssociation":"NONE","body":"@Maijin, I've tried with the latest version of radare2, but the result is still the same.\n\n```\n% r2 -v                               \nradare2 0.10.6-git 12465 @ linux-x86-64 git.0.10.5-343-g49cab15\ncommit: 49cab152000a2cf4c59eb58e5c41e6415d497529 build: 2016-09-23\n```\n","createdAt":"2016-09-23T17:40:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-249256157","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0OTI1ODAxMQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"I see it's an abandonware right, can you link the binary here (You can drop a .zip on github containing the executable)\n","createdAt":"2016-09-23T17:47:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-249258011","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0OTI2MDM0OQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"<3 Your avatar, I love Goblins <3\n","createdAt":"2016-09-23T17:56:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-249260349","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0OTI2MDM1Mw==","author":{"login":""},"authorAssociation":"NONE","body":"Here is the full game, zipped.\n[fire.zip](https://github.com/radare/radare2/files/490345/fire.zip)\n@Maijin Thank you for the nice comment. I know some of the people who worked at Coktel.\n","createdAt":"2016-09-23T17:56:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-249260353","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0OTI2MTA5MA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Goblins guys are true genius !\n","createdAt":"2016-09-23T18:00:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-249261090","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0OTI2MTI5Nw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@marespiaut  Found some easter eggs in Adibou using r2 :P but not yet found how to trigger them in the game :P \n","createdAt":"2016-09-23T18:01:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-249261297","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0OTI2MTg2NA==","author":{"login":""},"authorAssociation":"NONE","body":"@Maijin We need to talk via email, or IRC, I think we have some interest in common.\n","createdAt":"2016-09-23T18:03:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-249261864","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0OTI2MjAwNw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"You can join #radare on irc or use telegram https://telegram.me/joinchat/ACR-FgWyg1bbu9YUzT_5pg\n","createdAt":"2016-09-23T18:04:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-249262007","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0OTM1MjgzNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"-e bin.strings=false.\n\nTheres some code in rbin that defines the rules to consider something a string or not. We should make those checks more stricts for msdos binaries. Will check when i have some time\n\nThanks for reporting\n\n> On 23 Sep 2016, at 19:18, Marc-Alexandre Espiaut notifications@github.com wrote:\n> \n> Hello,\n> \n> I've been comparing the output of radare2 with the DOSBox debugger.\n> I'm working on fire.exe from the DOS video game Fire & Ice (Renegade, 1993).\n> \n> % sha256sum FIRE.EXE \n> ca0e8e19074351bf3ba6ca69c537220ec4a75077b376ecd458a92e4e4255e469  FIRE.EXE\n> Starting at entry point, DOSBox, is going to display the following:\n> \n> 11A8:000E  0E                  push cs\n> 11A8:000F  1F                  pop  ds\n> 11A8:0010  06                  push es\n> 11A8:0011  8B0E0C00            mov  cx,[000C]              ds:[000C]=F000\n> 11A8:0015  8BF1                mov  si,cx\n> 11A8:0017  4E                  dec  si\n> 11A8:0018  89F7                mov  di,si\n> 11A8:001A  8CDB                mov  bx,ds\n> 11A8:001C  031E0A00            add  bx,[000A]              ds:[000A]=20C8\n> 11A8:0020  8EC3                mov  es,bx\n> 11A8:0022  FD                  std\n> 11A8:0023  F3A4                repe movsb\n> 11A8:0025  53                  push bx\n> 11A8:0026  B82B00              mov  ax,002B\n> 11A8:0029  50                  push ax\n> 11A8:002A  CB                  retf\n> 11A8:002B  2E8B2E0800          mov  bp,cs:[0008]           cs:[0008]=0FBB\n> 11A8:0030  8CDA                mov  dx,ds\n> 11A8:0032  89E8                mov  ax,bp\n> 11A8:0034  3D0010              cmp  ax,1000\n> 11A8:0037  7603                jbe  0000003C ($+3)         (down)\n> 11B9:0039  B80010              mov  ax,1000\n> 11B9:003C  29C5                sub  bp,ax\n> 11B9:003E  29C2                sub  dx,ax\n> 11B9:0040  29C3                sub  bx,ax\n> 11B9:0042  8EDA                mov  ds,dx\n> 11B9:0042  8EDA                mov  ds,dx\n> 11B9:0044  8EC3                mov  es,bx\n> 11B9:0046  B103                mov  cl,03\n> 11B9:0048  D3E0                shl  ax,cl\n> 11B9:004A  89C1                mov  cx,ax\n> 11B9:004C  D1E0                shl  ax,1\n> 11B9:004E  48                  dec  ax\n> 11B9:004F  48                  dec  ax\n> 11B9:0050  8BF0                mov  si,ax\n> 11B9:0052  8BF8                mov  di,ax\n> 11B9:0054  F3A5                repe movsw\n> 11B9:0056  09ED                or   bp,bp\n> 11B9:0058  75D8                jne  00000032 ($-28)        (no jmp)\n> ...\n> while, radare2 is going to display the following\n> \n> / (fcn) entry0 29\n> |           0000:fdbe      0e             push cs\n> |           0000:fdbf      1f             pop ds\n> |           0000:fdc0      06             push es\n> |           0000:fdc1      8b0e0c00       mov cx, word [0xc]           ; [0xc:2]=0xffff loc.0000ffff\n> |           0000:fdc5      8bf1           mov si, cx\n> |           ; DATA XREF from 0x0000230b (unk)\n> |           0000:fdc7      4e             dec si\n> |           0000:fdc8      89f7           mov di, si\n> |           ; DATA XREF from 0x000210ce (unk)\n> |           0000:fdca      8cdb           mov bx, ds\n> |           ; DATA XREF from 0x000dc8a0 (int.000dc897)\n> |           0000:fdcc      031e0a00       add bx, word [0xa]\n> |           0000:fdd0      8ec3           mov es, bx\n> |           0000:fdd2      fd             std\n> |           0000:fdd3      f3a4           rep movsb byte es:[di], byte ptr [si]\n> |           0000:fdd5      53             push bx\n> |           0000:fdd6      b82b00         mov ax, 0x2b                 ; '+'\n> |           0000:fdd9      50             push ax\n> \\           0000:fdda      cb             retf\n>             0000:fddb      2e8b2e0800     mov bp, word cs:[8]          ; [0x8:2]=32\n>             0000:fde0      8cda           mov dx, ds\n> |           ; JMP XREF from 0x0000665f (fcn.00006658)\n> |       .-> 0000:fde2      89e8           mov ax, bp\n> |       |   ; DATA XREF from 0x00015cd5 (fcn.00015c42)\n> |       |   ; DATA XREF from 0x00009b8e (fcn.00009b8a)\n> |       |   0000:fde4      3d0010         cmp ax, 0x1000\n> |      ,==< 0000:fde7      7603           jbe 0xfdec\n> |      ||   0000:fde9      b80010         mov ax, 0x1000\n> |      `--> 0000:fdec      29c5           sub bp, ax\n> |       |   0000:fdee      29c2           sub dx, ax\n> |       |   0000:fdf0     .string \")\\x,3\\x(>\\x-:\\x(>\\x,3\\x+1\" ; len=8\n> |       |   0000:fdf8      d3e0           shl ax, cl\n> |       |   0000:fdfa      89c1           mov cx, ax\n> |       |   0000:fdfc      d1e0           shl ax, 1\n> |       |   0000:fdfe      48             dec ax\n> |       |   ; DATA XREF from 0x00005a15 (unk)\n> |       |   ; DATA XREF from 0x00007fd4 (fcn.00007fc5)\n> |       |   0000:fdff      48             dec ax\n> |       |   0000:fe00      8bf0           mov si, ax\n>         |   0000:fe02      8bf8           mov di, ax\n>         |   0000:fe04      f3a5           rep movsd dword es:[di], dword ptr [si]\n>         |   0000:fe06      09ed           or bp, bp\n> `=< 0000:fe08      75d8           jne 0xfde2                   ; fcn.00006658+0x978a\n> ...\n> You can see that, for DOSBox, at position 11B9:0040, the bytes 29C38EDA8EDA8EC3B103 corresponds to the instructions sub bx,ax; mov ds,dx; mov ds,dx; mov es,bx; mov cl,03, while radare2, at position 0000:fdf0, interprets the same bytes as a string, which bothers me because theses instructions are being executed by DOSBox when the game is launched and analyzed by the debugger.\n> \n> I would like to know if it's a radare2 bug or if I made a mistake when analysing the binary.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2016-09-24T08:26:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-249352836","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0OTU1NzE0Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"this happens because this binary contains 0 sections\n","createdAt":"2016-09-26T12:34:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-249557142","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0OTU1ODAyOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"just use -e bin.strings=false as a workaround, until i get a random idea to solve this problem\n","createdAt":"2016-09-26T12:39:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-249558029","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1MTM0Mzg3Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I think this bug affects bios images too, any other restriction to handle that?\n","createdAt":"2016-10-04T09:48:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-251343872","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1NzA4OTYxMA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"https://github.com/radare/radare2-regressions/pull/597\n","createdAt":"2016-10-29T12:42:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-257089610","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1NzE0MTkwNg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@marespiaut  Can you add tests for that ?\n","createdAt":"2016-10-30T09:54:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-257141906","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1NzE0ODM0Mg==","author":{"login":""},"authorAssociation":"NONE","body":"@Maijin I can't, because the binary isn't freeware.\n","createdAt":"2016-10-30T12:30:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-257148342","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1NzE0ODk1NA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"And you can't find a similar behavior in a freeware one?\n","createdAt":"2016-10-30T12:44:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-257148954","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1NzE1MTMxMw==","author":{"login":""},"authorAssociation":"NONE","body":"@Maijin Not yet.\n","createdAt":"2016-10-30T13:34:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-257151313","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1NzE1MjcyMw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"even by removing/stripping all the proprietary content of the dos binary and keeping only the faulty code somehow ?\n","createdAt":"2016-10-30T14:02:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-257152723","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1NzE1ODk5NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Until i get a reproducer to fix it you can just `-e bin.strings=false`\n","createdAt":"2016-10-30T15:51:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5836#issuecomment-257158995","viewerDidAuthor":false}],"number":5836,"title":"radare2 misinterpreting instructions as a string for a DOS binary"},{"body":"``` C\n$ r2 -nn ./r2r/bins/elf/main\n> pf {8}? (elf_phdr) @ 0x40\n  :\n                struct<elf_phdr>\n          type : 0x00000040 =  type (enum) = 0x6 ; PT_PHDR\n         flags : 0x00000044 =  flags (enum) = 0x5 ; PF_Read_Exec\n        offset : 0x00000048 = (qword)0x0000000000000040\n         vaddr : 0x00000050 = (qword)0x0000000000400040\n         paddr : 0x00000058 = (qword)0x0000000000400040\n        filesz : 0x00000060 = (qword)0x00000000000001c0\n         memsz : 0x00000068 = (qword)0x00000000000001c0\n         align : 0x00000070 = (qword)0x0000000000000008\n  :\n                struct<elf_phdr>\n          type : 0x00000078 =  type (enum) = 0x3 ; PT_INTERP\n         flags : 0x0000007c =  flags (enum) = 0x4 ; PF_Read\n        offset : 0x00000080 = (qword)0x0000000000000200\n         vaddr : 0x00000088 = (qword)0x0000000000400200\n         paddr : 0x00000090 = (qword)0x0000000000400200\n        filesz : 0x00000098 = (qword)0x000000000000001c\n         memsz : 0x000000a0 = (qword)0x000000000000001c\n         align : 0x000000a8 = (qword)0x0000000000000001\n  :\n                struct<elf_phdr>\n          type : 0x000000b0 =  type (enum) = 0x1 ; PT_LOAD\n         flags : 0x000000b4 =  flags (enum) = 0x5 ; PF_Read_Exec\n        offset : 0x000000b8 = (qword)0x0000000000000000\n         vaddr : 0x000000c0 = (qword)0x0000000000400000\n         paddr : 0x000000c8 = (qword)0x0000000000400000\n        filesz : 0x000000d0 = (qword)0x00000000000006dc\n         memsz : 0x000000d8 = (qword)0x00000000000006dc\n         align : 0x000000e0 = (qword)0x0000000000200000\n  :\n                struct<elf_phdr>\n          type : 0x000000e8 =  type (enum) = 0x1 ; PT_LOAD\n         flags : 0x000000ec =  flags (enum) = 0x6 ; PF_Read_Write\n        offset : 0x000000f0 = (qword)0x00000000000006e0\n         vaddr : 0x000000f8 = (qword)0x00000000006006e0\n         paddr : 0x00000100 = (qword)0x00000000006006e0\n        filesz : 0x00000108 = (qword)0x0000000000000230\n         memsz : 0x00000110 = (qword)0x0000000000000238\n         align : 0x00000118 = (qword)0x0000000000200000\n  :\n                struct<elf_phdr>\n          type : 0x00000120 =  type (enum) = 0x2 ; PT_DYNAMIC\n         flags : 0x00000124 =  flags (enum) = 0x6 ; PF_Read_Write\n        offset : 0x00000128 = (qword)0x00000000000006f8\n         vaddr : 0x00000130 = (qword)0x00000000006006f8\n         paddr : 0x00000138 = (qword)0x00000000006006f8\n```\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI0MzA5MjkzMA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@P4N74 see this ^\n","createdAt":"2016-08-29T10:51:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5641#issuecomment-243092930","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MzExMjcxOA==","author":{"login":"r-jenish"},"authorAssociation":"CONTRIBUTOR","body":"This is present from far long time (before 0.10.4 release and might be earlier too). The problem is with the way `r_print_format_struct_size` function returns the size value. For struct with format, `{8}? (elf_phdr)` it will return the size of `elf_phdr` and it won't multiply it by `8`. There are three possible solution for this:\n1) Update r_print_format_struct_size to return after multiplication with the `num` (can either be from `{num}?` or `num?`).\n2) update the `cmd_print_format` (/libr/core/cmd_print.c) to handle such multiplication internally.\n3) Update r_print_format to not care for block size.\n\nI think first one would be better. But the problem might be that in `{8}?` and `8?` here 8 is only used for specifying that the following struct should be printed this amount of time in either simple way or array form. So I am not sure if updating `r_print_format_struct_size` is a good option or not.\n","createdAt":"2016-08-29T12:41:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5641#issuecomment-243112718","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0NDQxNTA0NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@P4N74 are you working on the fix?\n","createdAt":"2016-09-02T15:56:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5641#issuecomment-244415045","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0NDQzMjI2MQ==","author":{"login":"r-jenish"},"authorAssociation":"CONTRIBUTOR","body":"I am spending most of my time on reading about kernel for kernel task. I won't be able to give enough time to this except for my free time.\n","createdAt":"2016-09-02T17:04:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5641#issuecomment-244432261","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NDM4NjYzNA==","author":{"login":"jb55"},"authorAssociation":"NONE","body":"for anyone else hitting this from google, here's a workaround:\r\n\r\nuse `[n]? (struct)` instead of `{n}? (struct)`","createdAt":"2019-02-16T21:19:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/5641#issuecomment-464386634","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ2NDQ0Njg1OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Can you suggest more examples for the pf help pr?\n\n> On 16 Feb 2019, at 22:19, William Casarin <notifications@github.com> wrote:\n> \n> for anyone else hitting this from google, here's a workaround:\n> \n> use [n]? (struct) instead of {n}? (struct)\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2019-02-17T11:48:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5641#issuecomment-464446859","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1NjIxMTYxOA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"This is still a bug. Right now it prints all 8 entries, but at some points it just reads 0.\r\n```\r\n[0x00000000]> pf [8]? (elf_phdr) @ 0x40\r\n  : \r\n[\r\n                struct<elf_phdr>\r\n          type : 0x00000040 = type (enum elf_p_type) = 0x6 ; PT_PHDR\r\n         flags : 0x00000044 = flags (enum elf_p_flags) = 0x5 ; PF_Read_Exec\r\n        offset : 0x00000048 = (qword)0x0000000000000040\r\n         vaddr : 0x00000050 = (qword)0x0000000000400040\r\n         paddr : 0x00000058 = (qword)0x0000000000400040\r\n        filesz : 0x00000060 = (qword)0x00000000000001c0\r\n         memsz : 0x00000068 = (qword)0x00000000000001c0\r\n         align : 0x00000070 = (qword)0x0000000000000008\r\n\r\n                struct<elf_phdr>\r\n          type : 0x00000078 = type (enum elf_p_type) = 0x3 ; PT_INTERP\r\n         flags : 0x0000007c = flags (enum elf_p_flags) = 0x4 ; PF_Read\r\n        offset : 0x00000080 = (qword)0x0000000000000200\r\n         vaddr : 0x00000088 = (qword)0x0000000000400200\r\n         paddr : 0x00000090 = (qword)0x0000000000400200\r\n        filesz : 0x00000098 = (qword)0x000000000000001c\r\n         memsz : 0x000000a0 = (qword)0x000000000000001c\r\n         align : 0x000000a8 = (qword)0x0000000000000001\r\n\r\n                struct<elf_phdr>\r\n          type : 0x000000b0 = type (enum elf_p_type) = 0x1 ; PT_LOAD\r\n         flags : 0x000000b4 = flags (enum elf_p_flags) = 0x5 ; PF_Read_Exec\r\n        offset : 0x000000b8 = (qword)0x0000000000000000\r\n         vaddr : 0x000000c0 = (qword)0x0000000000400000\r\n         paddr : 0x000000c8 = (qword)0x0000000000400000\r\n        filesz : 0x000000d0 = (qword)0x00000000000006dc\r\n         memsz : 0x000000d8 = (qword)0x00000000000006dc\r\n         align : 0x000000e0 = (qword)0x0000000000200000\r\n\r\n                struct<elf_phdr>\r\n          type : 0x000000e8 = type (enum elf_p_type) = 0x1 ; PT_LOAD\r\n         flags : 0x000000ec = flags (enum elf_p_flags) = 0x6 ; PF_Read_Write\r\n        offset : 0x000000f0 = (qword)0x00000000000006e0\r\n         vaddr : 0x000000f8 = (qword)0x00000000006006e0\r\n         paddr : 0x00000100 = (qword)0x00000000006006e0\r\n        filesz : 0x00000108 = (qword)0x0000000000000230\r\n         memsz : 0x00000110 = (qword)0x0000000000000238\r\n         align : 0x00000118 = (qword)0x0000000000200000\r\n\r\n                struct<elf_phdr>\r\n          type : 0x00000120 = type (enum elf_p_type) = 0x2 ; PT_DYNAMIC\r\n         flags : 0x00000124 = flags (enum elf_p_flags) = 0x6 ; PF_Read_Write\r\n        offset : 0x00000128 = (qword)0x00000000000006f8\r\n         vaddr : 0x00000130 = (qword)0x00000000006006f8\r\n         paddr : 0x00000138 = (qword)0x00000000006006f8\r\n        filesz : 0x00000140 = (qword)0x0000000000000000\r\n         memsz : 0x00000148 = (qword)0x0000000000000000\r\n         align : 0x00000150 = (qword)0x0000000000000000\r\n\r\n                struct<elf_phdr>\r\n          type : 0x00000158 = type (enum elf_p_type) = 0x0 ; PT_NULL\r\n         flags : 0x0000015c = flags (enum elf_p_flags) = 0x0 ; PF_None\r\n        offset : 0x00000160 = (qword)0x0000000000000000\r\n         vaddr : 0x00000168 = (qword)0x0000000000000000\r\n         paddr : 0x00000170 = (qword)0x0000000000000000\r\n        filesz : 0x00000178 = (qword)0x0000000000000000\r\n         memsz : 0x00000180 = (qword)0x0000000000000000\r\n         align : 0x00000188 = (qword)0x0000000000000000\r\n\r\n                struct<elf_phdr>\r\n          type : 0x00000190 = type (enum elf_p_type) = 0x0 ; PT_NULL\r\n         flags : 0x00000194 = flags (enum elf_p_flags) = 0x0 ; PF_None\r\n        offset : 0x00000198 = (qword)0x0000000000000000\r\n         vaddr : 0x000001a0 = (qword)0x0000000000000000\r\n         paddr : 0x000001a8 = (qword)0x0000000000000000\r\n        filesz : 0x000001b0 = (qword)0x0000000000000000\r\n         memsz : 0x000001b8 = (qword)0x0000000000000000\r\n         align : 0x000001c0 = (qword)0x0000000000000000\r\n\r\n                struct<elf_phdr>\r\n          type : 0x000001c8 = type (enum elf_p_type) = 0x0 ; PT_NULL\r\n         flags : 0x000001cc = flags (enum elf_p_flags) = 0x0 ; PF_None\r\n        offset : 0x000001d0 = (qword)0x0000000000000000\r\n         vaddr : 0x000001d8 = (qword)0x0000000000000000\r\n         paddr : 0x000001e0 = (qword)0x0000000000000000\r\n        filesz : 0x000001e8 = (qword)0x0000000000000000\r\n         memsz : 0x000001f0 = (qword)0x0000000000000000\r\n         align : 0x000001f8 = (qword)0x0000000000000000\r\n]\r\n```\r\nThe last 3 elf_phdr are not all 0 actually.","createdAt":"2020-07-09T15:59:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5641#issuecomment-656211618","viewerDidAuthor":false}],"number":5641,"title":"pf truncates the output"},{"body":"When debugging in visual disassembly with registers view  the color change of modified registers will stop updating / lose synch with the instructions being stepped through.  \n\nRegisters will retain their modified color and never return to their normal color state even when stepping over instructions that do not affect them.\n\nThis seems to occur after stepping through some instructions initially, continuing to a breakpoint and then stepping through some more instructions.\n\nColors updating normally\n![radare2-modified-registers](https://cloud.githubusercontent.com/assets/359095/17644591/e8773aaa-6158-11e6-8185-7421c6619f78.png)\n\nModified color has not been cleared after continuing to breakpoint.  Newly modified registers have the color added, but none appear to be reset to the normal color anymore\n![radare2-modified-registers-broken](https://cloud.githubusercontent.com/assets/359095/17644592/e89e428a-6158-11e6-9b8d-61c4530011d2.png)\n## Steps to Reproduce\n\n1 - Get source files for the Radare2 Explorations book here:  https://github.com/monosource/radare2-explorations-binaries\n2 - Build the patchme executable found in the director tut1-patchme directory\n3 - Debug the patchme in radare with the command:  r2 -Ad ./patchme\n4 - Switch to visual mode disassembly w/registers by typing: V, p, p\n5 - Step over first few instructions in /lib32/ld-2.23.so, note register coloration updating normally (on default color scheme changed registers are the blue-ish color, unchanged are the standard green terminal color)\n6 - Seek to main by pressing 'o' in visual mode and typing 'main' and then Enter\n7 - Press 'b' to set a breakpoint at start of main, then 'F9' to continue to break\n8 - Note register colors, many are in blue 'changed' color\n9 - Step over several instructions using 's'.  Note that the registers remain blue even though the previously stepped over instruction did not modify them.  Registers should lose their 'modified' coloration after instruction where they are not modified.\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDIzOTY1MzQ3Mg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Hello,\n\nEnsure you are using radare2 from git, if you're unsure paste output of `r2 -v` here.\nTo install radare2 from git, first uninstall your version of radare2 and clean your distro. Then use `git clone https://github.com/radare/radare2 && cd radare2 && ./sys/install.sh`, verify your version and check if there is no error using `r2 -v`.\n","createdAt":"2016-08-14T03:12:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5490#issuecomment-239653472","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzOTY1MzQ3NQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Can you also create an asciinema\n","createdAt":"2016-08-14T03:12:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5490#issuecomment-239653475","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzOTY1NjMyMw==","author":{"login":""},"authorAssociation":"NONE","body":"Hi,\n\nYup, got radare2 from git. Updated a couple of days ago. Version string is:\nradare2 0.10.5-git 12047 @ linux-x86-64 git.0.10.4-termux4-37-ga7da94b\ncommit: a7da94ba336aa954d4a85639cb7226c9eaf44984 build: 2016-08-11\n\nShall I update to latest and try or was there anything you wanted me to check in the current state?\n\nasciinema is here:\nhttps://asciinema.org/a/4b3k7bb5agd5emay766gepp27\n\nIn case it's relevant this is an Ubuntu GNOME 16.04 VM.  Terminal is GNOME Terminal 3.18.3 \n","createdAt":"2016-08-14T05:01:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5490#issuecomment-239656323","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzOTY2NjIxNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I think this happens because the regstate is reset when performing a dc. Can you confirm if this happens when using dcu?\n\n> On 13 Aug 2016, at 19:22, Philip Grohe notifications@github.com wrote:\n> \n> When debugging in visual disassembly with registers view the color change of modified registers will stop updating / lose synch with the instructions being stepped through.\n> \n> Registers will retain their modified color and never return to their normal color state even when stepping over instructions that do not affect them.\n> \n> This seems to occur after stepping through some instructions initially, continuing to a breakpoint and then stepping through some more instructions.\n> \n> Steps to Reproduce\n> \n> 1 - Get source files for the Radare2 Explorations book here: https://github.com/monosource/radare2-explorations-binaries\n> 2 - Build the patchme executable found in the director tut1-patchme directory\n> 3 - Debug the patchme in radare with the command: r2 -Ad ./patchme\n> 4 - Switch to visual mode disassembly w/registers by typing: V, p, p\n> 5 - Step over first few instructions in /lib32/ld-2.23.so, note register coloration updating normally (on default color scheme changed registers are the blue-ish color, unchanged are the standard green terminal color)\n> 6 - Seek to main by pressing 'o' in visual mode and typing 'main' and then Enter\n> 7 - Press 'b' to set a breakpoint at start of main, then 'F9' to continue to break\n> 8 - Note register colors, many are in blue 'changed' color\n> 9 - Step over several instructions using 's'. Note that the registers remain blue even though the previously stepped over instruction did not modify them. Registers should lose their 'modified' coloration after instruction where they are not modified.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2016-08-14T10:21:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5490#issuecomment-239666217","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzOTY3NzI4OA==","author":{"login":""},"authorAssociation":"NONE","body":"Still occurs with when doing 'dcu main'.  \n\nOnce you hit the break most of the registers are already the modified color.  They don't reset to normal color as you step.  Registers that weren't already in the modified color will still change to it if an instructions affects them though.\n","createdAt":"2016-08-14T14:44:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5490#issuecomment-239677288","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzOTY3NzM1MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"so its a problem with breakpoints?\n\n> On 14 Aug 2016, at 16:44, Philip Grohe notifications@github.com wrote:\n> \n> Still occurs with when doing 'dcu main'.\n> \n> Once you hit the break most of the registers are already the modified color. They don't reset to normal color as you step. Registers that weren't already in the modified color will still change to it if an instructions affects them though.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub https://github.com/radare/radare2/issues/5490#issuecomment-239677288, or mute the thread https://github.com/notifications/unsubscribe-auth/AA3-li7q1ptp7iQrrG-k-z-BNlRqjViGks5qfynSgaJpZM4JjuDA.\n","createdAt":"2016-08-14T14:45:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5490#issuecomment-239677351","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzOTY3ODU5Nw==","author":{"login":""},"authorAssociation":"NONE","body":"Yes.  Seems to be.  While looking into this I've never encountered it when single stepping right from the beginning of a debug session.  Always occurs after continuing to a break in one way or another.\n\nI also tried changing dbg.bep to 'main' instead of 'loader' and then reloading the file with 'oo'. The issue occurs in that case as well.  The moment execution is stopped at the start of main the registers are almost all already colored as modified and never reset color when stepping.\n","createdAt":"2016-08-14T15:08:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5490#issuecomment-239678597","viewerDidAuthor":false}],"number":5490,"title":"Visual Debug view w/registers - Color change of modified registers sometimes stops updating"},{"body":"I'm working with a PSX mips file and radare2 keeps marking sections of code as strings. So far, the only way I can disable this is to add \"f- ...\" and \"Cs- ...\" commands to my project file. Furthermore, if I type \"CC\", there is a huge list and typing \"CC- @address\" does not remove it from this list.\n\nI'm using version 0.10.5-git\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDIzNzgxODE4Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"What about CC-0x628633?\n\n> On 04 Aug 2016, at 06:44, Jaguar83 notifications@github.com wrote:\n> \n> I'm working with a PSX mips file and radare2 keeps marking sections of code as strings. So far, the only way I can disable this is to add \"f- ...\" and \"Cs- ...\" commands to my project file. Furthermore, if I type \"CC\", there is a huge list and typing \"CC- @address\" does not remove it from this list.\n> \n> I'm using version 0.10.5-git\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2016-08-05T10:32:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5445#issuecomment-237818183","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzNzk4Njg0Nw==","author":{"login":"Jaguar83"},"authorAssociation":"CONTRIBUTOR","body":"No, CC- doesn't work with or without a space and/or @.\n\nThe main problem is that radare seems to find and mark strings in the every time it starts up, and loading a project is the only way to remove them. After that, saving the project puts all of the strings into the saved project file, meaning they reappear.\n\nAn strace reveals that it is not reading a hidden config file, so it must be re-analysing the file for string on every startup.\n","createdAt":"2016-08-05T23:13:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5445#issuecomment-237986847","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzODQwODM1OQ==","author":{"login":"Jaguar83"},"authorAssociation":"CONTRIBUTOR","body":"Here's a trace to demonstrate.\nThere are no CC commands in the \"dc\" project and the section definitions are:\n\n```\nS 0x00000800 0x80010000 0x00003e4c 0x00003e4c DATA mrw-\nS 0x0000464c 0x80013e4c 0x00056a48 0x00056a48 TEXT m--x\nS 0x0005b094 0x8006a894 0x0000d76c 0x0000d76c DATA1 mrw-\n```\n\nAnd yet, the section comment \"_[0] va=0x80010000 pa=0x00000800 sz=425984 vsz=425984 rwx=m---x TEXT_\" reappears whenever the project is loaded. See the attachment.\n\n[CC issue.txt](https://github.com/radare/radare2/files/407923/CC.issue.txt)\n","createdAt":"2016-08-08T23:25:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5445#issuecomment-238408359","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzODc4NzU1OQ==","author":{"login":"Jaguar83"},"authorAssociation":"CONTRIBUTOR","body":"I've used gdb to trace the issue, and it appears to be here:\n\n```\n#0  r_meta_add (a=0x7fbef9d24a70, type=115, from=2147549184, to=2147549191, str=0x7fbef9f036c0 \".DRV;1\") at meta.c:249\n#1  0x00007fbef814c84b in bin_strings (r=0x7fbef8809640 <r>, mode=2, va=1) at bin.c:336\n#2  0x00007fbef8154400 in r_core_bin_info (core=0x7fbef8809640 <r>, action=20479, mode=2, va=1, filter=0x0, chksum=0x0) at bin.c:2183\n#3  0x00007fbef814bbfc in r_core_bin_set_env (r=0x7fbef8809640 <r>, binfile=0x7fbefa1e0270) at bin.c:107\n#4  0x00007fbef812997e in r_core_file_do_load_for_io_plugin (r=0x7fbef8809640 <r>, baseaddr=18446744073709551615, loadaddr=0) at file.c:397\n#5  0x00007fbef8129f45 in r_core_bin_load (r=0x7fbef8809640 <r>, filenameuri=0x7fbef9f27830 \"/mnt/disk/slus_013.28\", baddr=18446744073709551615) at file.c:512\n#6  0x00007fbef816958a in r_core_project_open (core=0x7fbef8809640 <r>, prjfile=0x7fbefa186303 \"dc\") at project.c:224\n#7  0x00007fbef80df2b9 in cmd_project (data=0x7fbef8809640 <r>, input=0x7fbefa186301 \"o dc\") at cmd_project.c:27\n#8  0x00007fbef815c0cd in r_cmd_call (cmd=0x7fbef9d56720, input=0x7fbefa186300 \"Po dc\") at cmd_api.c:210\n#9  0x00007fbef8125e54 in r_core_cmd_subst_i (core=0x7fbef8809640 <r>, cmd=0x7fbefa186300 \"Po dc\", colon=0x0) at cmd.c:1853\n#10 0x00007fbef81237e2 in r_core_cmd_subst (core=0x7fbef8809640 <r>, cmd=0x7fbefa186300 \"Po dc\") at cmd.c:1249\n#11 0x00007fbef812756c in r_core_cmd (core=0x7fbef8809640 <r>, cstr=0x7fbef9f80b00 \"Po dc\", log=1) at cmd.c:2260\n#12 0x00007fbef80c8a63 in r_core_prompt_exec (r=0x7fbef8809640 <r>) at core.c:1626\n#13 0x00007fbef8606fbe in main (argc=5, argv=0x7fff3dc58c28, envp=0x7fff3dc58c58) at radare2.c:943\n```\n\nIn /usr/src/radare2/libr/core/project.c:r_core_project_open, the sequence is as follows:\n\n```\n        r_core_bin_load (core, filepath, UT64_MAX);\n    }\n    // FIXME: If r_anal_project_load is not called before r_core_cmd_file, xrefs are not loaded correctly\n    r_anal_project_load (core->anal, prjfile);\n    ret = r_core_cmd_file (core, prj);\n\n```\n\nFrom the trace it appears that r_core_bin_info (called from `r_core_bin_load`) is filling in all of the extra data BEFORE the project script is executed. This means that there is no way to stop it from happening by putting commands in the project script.\n\nWith a further trace, it appears that r_core_bin_set_env (which calls r_core_bin_info), is run 4 times.\nFrom r_core_file_do_load_for_io_plugin, r_core_bin_set_arch_bits (within r_core_file_do_load_for_io_plugin), r_core_bin_load, r_core_bin_set_arch_bits (within r_core_bin_load).\n","createdAt":"2016-08-10T07:29:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5445#issuecomment-238787559","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzODkxODA0NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"a string data type is not a comment\n","createdAt":"2016-08-10T16:12:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5445#issuecomment-238918045","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU1NzgxMg==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T06:24:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5445#issuecomment-644557812","viewerDidAuthor":false}],"number":5445,"title":"Deleted comments reappear on project open and automatic comments not deleted by CC- and "},{"body":"Convert all unit legacy tests in the new minuet format https://github.com/radare/radare2/issues/5314\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU2MzMyNzA1Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Isnt this done already?\n\n> On 9 Dec 2019, at 14:26, Maijin <notifications@github.com> wrote:\n> \n> ï»¿\n> Convert all unit legacy tests in the new minuet format #5314\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2019-12-09T16:46:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15575#issuecomment-563327053","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2MzQ3NjU5OA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Far from done :/","createdAt":"2019-12-09T22:51:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15575#issuecomment-563476598","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMzgxMTA2Nw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@Maijin could you please write what is left then?","createdAt":"2020-04-15T04:35:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15575#issuecomment-613811067","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYxMzg5MTEzNw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@XVilka \r\n\r\nTests in unit/legacy_unit/ need to be converted especially the one's in util/ for example:  https://github.com/radareorg/radare2/blob/master/test/unit/legacy_unit/util/test_queue.c, https://github.com/radareorg/radare2/blob/master/test/unit/legacy_unit/util/test_str.c etc.","createdAt":"2020-04-15T08:17:18Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/15575#issuecomment-613891137","viewerDidAuthor":false}],"number":15575,"title":"Convert all unit legacy tests in the new minunit format"},{"body":"- [x] Linux glibc (ptmalloc) https://github.com/radare/radare2/pull/5335\r\n- [x] *BSD's jemalloc https://github.com/radare/radare2/pull/8099\r\n- [ ] OpenBSD's malloc\r\n- [ ] Google's [tcmalloc](https://github.com/google/tcmalloc)\r\n- [ ] jmalloc\r\n- [ ] Windows https://github.com/radare/radare2/issues/4318\r\n- [ ] OS X - see https://github.com/blankwall/MacHeap for ideas/examples\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI0MDA1MzQ2Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See also https://github.com/cloudburst/libheap\n","createdAt":"2016-08-16T09:34:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5390#issuecomment-240053466","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MDA1Mzk1Mg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"FYI @n4x0r , @javierprtd . @soez\n","createdAt":"2016-08-16T09:36:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5390#issuecomment-240053952","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MDExMDkyNg==","author":{"login":"ulexec"},"authorAssociation":"CONTRIBUTOR","body":"Currently `dmh` command family supports almost all the features that libheap gdb plugin does. we still have to work on concurrent heaps analysis support, however i believe that's about it. \n","createdAt":"2016-08-16T14:02:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5390#issuecomment-240110926","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyMjczMjYzNQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"For jmalloc - this one is interesting https://github.com/CENSUS/shadow","createdAt":"2017-08-16T10:42:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5390#issuecomment-322732635","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5OTEzMDA2NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@devnexen I see you are lately working on OpenBSD support - you might want to check this one too.","createdAt":"2018-06-21T14:47:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/5390#issuecomment-399130065","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxNjExNDY1OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@morbith-dqtz Saw your PR recently, you might want to check also this one","createdAt":"2018-08-27T04:59:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5390#issuecomment-416114659","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU4NjA3Mzk1Ng==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Google open sourced their tcmalloc recently - https://github.com/google/tcmalloc","createdAt":"2020-02-14T02:57:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5390#issuecomment-586073956","viewerDidAuthor":false}],"number":5390,"title":"META - Heap explorer/analysis"},{"body":"For many malware samples radiff2 fails to provide good results.\nI attached 2 samples as an example. Zynamics Bindiff would report for them 99% similarity.\n\nRadiff2 output: http://pastebin.com/iqKQk9EA\n\n```\nradiff2 -sV\nFile size differs 225280 vs 270336\nProcessing 225280 of 225279\nsimilarity: 0.335\ndistance: 179877\n```\n\n[malware_samples.zip (password infected)](https://github.com/radare/radare2/files/378969/malware_samples.zip)\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDIzNTc5ODE2Ng==","author":{"login":"NikolaiHampton"},"authorAssociation":"CONTRIBUTOR","body":"The 'statistical diff' in radiff2 is an edit distance calculation e.g:\nhats vs cats = 1 (distance) and 3/4 (similarity).\n\ni.e. The comparison shows at the binary level how many bytes differ from file A to B by either inserting, changing or deleting bytes.\n\nIf the filesize is different, the closest the edit distance can possibly be is the difference in filesize:\ne.g: \"hello\" vs \"hello12345\" has a distance of 5 (similarity is then 5/\"length of longest file\").\n\nYou can test this by doing: echo \"hello\" > a, echo \"helloXXXXX\" > b, then doing the statistical diff on those. You'll get a similarity of .545 because there's a 0x0a on the end, so 1-[distance of 5/11 bytes].\n\nIn your example, the radiff2 -s distance must be greater than 270336-225280... If as is common in malware, the file has any encryption or code obfuscation, the statistical diff is probably not a good comparison.\n","createdAt":"2016-07-28T04:30:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5362#issuecomment-235798166","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzNTg1MTcxNQ==","author":{"login":"VPaulV"},"authorAssociation":"CONTRIBUTOR","body":"NikolaiHampton, sure, this issue is about graphdiff. I put -sV output just in case.\n","createdAt":"2016-07-28T09:56:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5362#issuecomment-235851715","viewerDidAuthor":false}],"number":5362,"title":"radiff2 malware diffing bad results"},{"body":"Dead code is not detected in this case:\n\n```\n$ rasm2 -f antidism.asm\n557403750121b821000000cd80c3\n\n$ cat antidis.asm\n.arch x86\n.bits 64\n    push rbp\n    jz target\n    jnz target\n.byte 33\ntarget:\n    mov eax, 33\n    int 0x80\n    ret\n```\n\n<img width=\"558\" alt=\"screen shot 2016-06-15 at 13 15 31\" src=\"https://cloud.githubusercontent.com/assets/917142/16077791/43b8505c-32fb-11e6-94e5-06d021268872.png\">\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDIyNjE1ODI1OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"reference http://malwinator.com/anti-disassembly-used-in-malware-a-primer/\n","createdAt":"2016-06-15T11:15:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5136#issuecomment-226158258","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzNjA4NzI0NA==","author":{"login":"restcure"},"authorAssociation":"NONE","body":"reference URLs moved to: https://www.malwinator.com/2015/11/22/anti-disassembly-used-in-malware-a-primer/ (part 1)\r\nand\r\nhttps://www.malwinator.com/2015/11/27/anti-disassembly-techniques-used-by-malware-a-primer-part-2/ (Part 2 - what link says)","createdAt":"2018-11-06T00:29:57Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5136#issuecomment-436087244","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0MDU4NzcyMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Please add a test.","createdAt":"2020-06-08T13:00:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/5136#issuecomment-640587721","viewerDidAuthor":false}],"number":5136,"title":"Antidisasm tricks: dead code"},{"body":"The eval command ignore the endianess when parsing from binary format.\n\nSteps to reproduce:\n\n```\nCd 4[3]\npd 1~:3\nahi 1\n? `pd 1~:3[2]`\n```\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU3NzYzNA==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T07:10:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4974#issuecomment-644577634","viewerDidAuthor":false}],"number":4974,"title":"eval command ignoring endianess when converting from binary"},{"body":"This feature would be similar to GDB's \"up\" / \"down\" / \"frame XXX\" commands.\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMwMDA1NjY4MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Would be nice to support this with gdb backend too.","createdAt":"2017-05-09T04:13:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4887#issuecomment-300056681","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU3NzU4MQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T07:10:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4887#issuecomment-644577581","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MDU4MzY5MA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"This is a nice feature and should be supported, it is partially done in dbt, but requires more work to actually show the local vars from the analysis, fgrame information like it's done in ascii art, etc. it's easy to do, but not done yet","createdAt":"2020-06-27T16:37:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4887#issuecomment-650583690","viewerDidAuthor":true}],"number":4887,"title":"Implement frame navigation in the debugger"},{"body":"","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDY0ODM0Nw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T09:26:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4768#issuecomment-644648347","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1NjI0ODA3Mg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"This is still a bug.","createdAt":"2020-07-09T17:13:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4768#issuecomment-656248072","viewerDidAuthor":false}],"number":4768,"title":"^C in dtc stops the program instead of the tracing"},{"body":"To be able pass arguments too when script is called using \".\" command:\n\n```\n[0x0000000]> . some_script.py argument1 argument2\n```\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDIxNDg3NTY2Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"You dont want to run r2pipe scripts like this\n\nUse #!pipe python script.py args\n\n> On 26 Apr 2016, at 22:23, Anton Kochkov notifications@github.com wrote:\n> \n> To be able pass arguments too when script is called using \".\" command:\n> \n> [0x0000000]> . some_script.py argument1 argument2\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n","createdAt":"2016-04-26T20:27:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4721#issuecomment-214875666","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxNDg3NTc0NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Oh well this is a shortcut to do the same.. Should be done here too\n\n> On 26 Apr 2016, at 22:23, Anton Kochkov notifications@github.com wrote:\n> \n> To be able pass arguments too when script is called using \".\" command:\n> \n> [0x0000000]> . some_script.py argument1 argument2\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n","createdAt":"2016-04-26T20:27:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4721#issuecomment-214875744","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc1NzUxNzQ2OA==","author":{"login":"NishantPuri99"},"authorAssociation":"NONE","body":"I have a fair hold on Python, can I perhaps try this out? Thanks","createdAt":"2021-01-10T18:02:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4721#issuecomment-757517468","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc1NzU0NDM2OQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"I dont think it makes sense to pass arguments when using the . Command because its used to interpret a file.\r\n\r\nwhen using #!pipe python foo.py foo bar it is possible to pass arguments already.\r\n\r\nthe other way we can use the % command to set the environment for example","createdAt":"2021-01-10T21:08:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4721#issuecomment-757544369","viewerDidAuthor":true}],"number":4721,"title":"Ability to pass arguments to r2pipe script"},{"body":"to avoid having to use binfmt_misc :P\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDIxNDgyODkyMQ==","author":{"login":"unixfreaxjp"},"authorAssociation":"NONE","body":"works fine in arm,armel,mips,mipsel,x686,x64 here, except powerpc, opened issue #4720 (other matter/compilation) https://github.com/radare/radare2/issues/4720\nsparc is untested (in task)\n","createdAt":"2016-04-26T17:57:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4681#issuecomment-214828921","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5OTEyOTc1NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@unixfreaxjp should be fixed, no? Can you please confirm?","createdAt":"2018-06-21T14:46:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/4681#issuecomment-399129755","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM5OTUwMTQ2OQ==","author":{"login":"unixfreaxjp"},"authorAssociation":"NONE","body":"On it, will update info here.. (CPU: ppc & sparc / OS: linux only, freebsd/netbsd is request basis)\r\n\r\n1. CPU type PowerPC,750 / Linux Debian\r\n\r\n```asm\r\n\r\n>> =============================================================\r\n>> OpenBIOS 1.1 [Oct 19 2017 07:00]\r\n>> CPUs: 1\r\n>> Memory: 1024M\r\n>> UUID: 00000000-0000-0000-0000-000000000000\r\n>> CPU type PowerPC,750\r\nmilliseconds isn't unique.\r\nWelcome to OpenBIOS v1.1 built on Oct 19 2017 07:00\r\nTrying hd:,\\\\:tbxi...\r\nTrying hd:,\\ppc\\bootinfo.txt...\r\nTrying hd:,%BOOT...\r\nSecond-stage QUIK loader\r\nWelcome to quik. mate is good.\r\nDebian GNU/Linux PowerPCchosen/bootargs =\r\nboot:\r\nLinux\r\ninitrd imagename = /initrd.img, mem_size: 7233632\r\ninitrd_start:\r\nStarting at 510000, , 13070336\r\nOF stdout device is: /pci@80000000/mac-io@3/escc@13000/ch-a@13020\r\nPreparing to boot Linux version 3.2.0-4-powerpc (debian-kernel@lists.debian.org) \r\n  :\r\n  :\r\ncd .. && ln -fs \"/test/radare2/binr/r2pm/r2pm\" \"/usr/bin/r2pm\"\r\ncd .. && rm -rf \"/usr/share/radare2/2.7.0-git/r2pm\"\r\ncd .. && mkdir -p \"/usr/share/radare2/2.7.0-git/\"\r\n#ln -fs \"/test/radare2/binr/r2pm/d\" \"/usr/share/radare2/2.7.0-git/r2pm\"\r\ncd .. && ln -fs \"/usr/bin/radare2\" \"/usr/bin/r2\"\r\ncd .. && ln -fs \"/test/radare2/binr/preload/libr2.so\" \"/usr/lib/libr2.so\"\r\ncd .. && cd \"/usr/lib\" && \\\r\n                mv libr2.so libr2.so.2.7.0-git && \\\r\n                ln -fs libr2.so.2.7.0-git libr2.so\r\nmake[1]: Leaving directory `/test/radare2/binr'\r\ncd shlr && make install-symlink\r\nmake[1]: Entering directory `/test/radare2/shlr'\r\nmkdir -p \"/usr/lib\"\r\n#cd tcc ; for FILE in libr_tcc* ; do \\\r\n        #       ln -fs `pwd`/$FILE /usr/lib/$FILE ; done\r\nmake[1]: Leaving directory `/test/radare2/shlr'\r\nmkdir -p \"/usr/bin\"\r\nln -fs \"/test/radare2/sys/indent.sh\" \"/usr/bin/r2-indent\"\r\nln -fs \"/test/radare2/sys/r2-docker.sh\" \"/usr/bin/r2-docker\"\r\nmkdir -p \"/usr/share/radare2/2.7.0-git/hud\"\r\nln -fs \"/test/radare2/doc/hud\" \"/usr/share/radare2/2.7.0-git/hud/main\"\r\n#mkdir -p \"/usr/share/radare2/2.7.0-git/flag\"\r\n#ln -fs /test/radare2/libr/flag/d/tags.r2 \"/usr/share/radare2/2.7.0-git/flag/tags.r2\"\r\ncd \"/usr/lib/radare2/\" ;\\\r\n                rm -f last ; ln -fs 2.7.0-git last\r\ncd \"/usr/share/radare2/\" ;\\\r\n                rm -f last ; ln -fs 2.7.0-git last\r\nmkdir -p \"/usr/share/radare2/2.7.0-git/\"\r\n/bin/sh sys/ldconfig.sh\r\n/bin/sh ./configure-plugins --rm-static /usr/lib/radare2/last/\r\nconfigure-plugins: Loading ./plugins.cfg ..\r\nRemoved 70 shared plugins that are already static\r\n\r\n```\r\n\r\n2. CPU type SPARC (Ultra1-base) / Linux Debian (on request basis)\r\n\r\n```asm\r\n/* to be added after receiving request*/\r\n```","createdAt":"2018-06-22T16:28:25Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4681#issuecomment-399501469","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMTM2MDg4OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"So, does it work?","createdAt":"2018-06-29T13:52:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4681#issuecomment-401360889","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMTU4NDEwNg==","author":{"login":"unixfreaxjp"},"authorAssociation":"NONE","body":"Yes. PPC passed perfectly. rarun2 worked fine, added the compilation snips at https://github.com/radare/radare2/issues/4681#issuecomment-399501469\r\nI think sparc will have the same result, will check on request basis. I think we can close this. @XVilka @radare \r\n","createdAt":"2018-07-01T05:30:53Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4681#issuecomment-401584106","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMTk5NzM0Ng==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@radare ?","createdAt":"2018-07-03T02:52:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4681#issuecomment-401997346","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMjQ0MjQ3MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I dont think rarun2 have the ability to define a runtime program to execute programs from other architectures without depending on binfmt. Which is necessary on non-linux and non-root environments\n\nThat was my point for this issue\n\n> On 3 Jul 2018, at 04:52, Maijin <notifications@github.com> wrote:\n> \n> @radare ?\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2018-07-04T10:48:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4681#issuecomment-402442470","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwMjU4ODYxOA==","author":{"login":"unixfreaxjp"},"authorAssociation":"NONE","body":"@radare \r\nAllow me show you some PPC test result below, pls let me know if I miss a scheme. Especially see part number 7a) and 7b)\r\ncc: @XVilka @Maijin \r\n\r\n1. post built\r\n```asm\r\n$ r2 -v\r\nradare2 2.7.0-git 18715 @ linux-ppc-32 git.2.6.9-31-ga566e7a\r\ncommit: a566e7af99c4b5a0833615f16f0841aab2a342bb build: 2018-07-05__00:40:57\r\n```\r\n2. test on static malware analysis:\r\n```asm\r\n$ r2 samplePPC\r\n -- ï¾‚ï½º|<|<|  -( glu glu glu, im the r2 fish )\r\n[0x10000bc8]> af\r\n[0x10000bc8]> pdf\r\n|           ;-- entry0:\r\n|           ;-- pc:\r\n/ (fcn) sym._start 72\r\n|   sym._start ();\r\n|           0x10000bc8      7c290b78       mr r9, r1\r\n|           0x10000bcc      54210036       rlwinm r1, r1, 0, 0, 0x1b\r\n|           0x10000bd0      3da01002       lis r13, 0x1002\r\n|           0x10000bd4      39ad11e8       addi r13, r13, 0x11e8\r\n|           0x10000bd8      38000000       li r0, 0\r\n|           0x10000bdc      9421fff0       stwu r1, -0x10(r1)\r\n|           0x10000be0      7c0803a6       mtlr r0\r\n|           0x10000be4      90010000       stw r0, 0(r1)\r\n|           0x10000be8      80890000       lwz r4, 0(r9)\r\n|           0x10000bec      38a90004       addi r5, r9, 4\r\n|           0x10000bf0      7c681b78       mr r8, r3\r\n|           0x10000bf4      3cc01000       lis r6, 0x1000\r\n|           0x10000bf8      38c60a6c       addi r6, r6, 0xa6c\r\n|           0x10000bfc      3ce01000       lis r7, 0x1000\r\n|           0x10000c00      38e77e94       addi r7, r7, 0x7e94\r\n|           0x10000c04      3c601000       lis r3, 0x1000\r\n|           0x10000c08      386376e8       addi r3, r3, 0x76e8\r\n\\       ,=< 0x10000c0c      48018778       b sym.imp.__uClibc_main\r\n[0x10000bc8]>\r\n```\r\n3. test canvas (static)\r\n```asm\r\n[0x10000bc8]> VV @ sym._start (nodes 1 edges 0 zoom 100%) BB-OFF mouse:canvas-y\r\n\r\n           .---------------------------------------------------------.\r\n           | [0x10000bc8] ;[gb]                                      |\r\n           | ;-- entry0:                                             |\r\n           | ;-- pc:                                                 |\r\n           | (fcn) sym._start 72                                     |\r\n           |   sym._start ();                                        |\r\n           | 0x10000bc8 7c290b78       mr r9, r1                     |\r\n           | 0x10000bcc 54210036       rlwinm r1, r1, 0, 0, 0x1b     |\r\n           | 0x10000bd0 3da01002       lis r13, 0x1002               |\r\n           | 0x10000bd4 39ad11e8       addi r13, r13, 0x11e8         |\r\n           | 0x10000bd8 38000000       li r0, 0                      |\r\n           | 0x10000bdc 9421fff0       stwu r1, -0x10(r1)            |\r\n           | 0x10000be0 7c0803a6       mtlr r0                       |\r\n           | 0x10000be4 90010000       stw r0, 0(r1)                 |\r\n           | 0x10000be8 80890000       lwz r4, 0(r9)                 |\r\n           | 0x10000bec 38a90004       addi r5, r9, 4                |\r\n           | 0x10000bf0 7c681b78       mr r8, r3                     |\r\n           | 0x10000bf4 3cc01000       lis r6, 0x1000                |\r\n           | 0x10000bf8 38c60a6c       addi r6, r6, 0xa6c            |\r\n           | 0x10000bfc 3ce01000       lis r7, 0x1000                |\r\n\r\n\r\n[0x1000a1e8]> VV @ fcn.srr0 (nodes 137 edges 179 zoom 100%) BB-SUMM mouse:canvas-y mov-speed:5\r\n\r\n                         .---------------------------------------------------------.\r\n                         | [0x1000a1e8] ;[gl]                                      |\r\n                         | 0x1000a210 sym.getBuild                                 |\r\n                         | 0x1000a228 sym.printf                                   |\r\n                         | 0x1000a244 sym.strlen                                   |\r\n                         | 0x1000a25c sym.strncpy                                  |\r\n                         | 0x1000a28c sym.prctl                                    |\r\n                         | 0x1000a294 sym.__GI_time                                |\r\n                         | 0x1000a29c sym.getpid                                   |\r\n                         | 0x1000a2ac sym.srand                                    |\r\n                         | 0x1000a2b4 sym.__GI_time                                |\r\n                         | 0x1000a2bc sym.getpid                                   |\r\n                         | 0x1000a2cc sym.init_rand                                |\r\n                         | 0x1000a2dc str.etc_rc.d_rc.local str.etc_rc.d_rc.local  |\r\n                         | 0x1000a2f0 sym.__GI_fopen                               |\r\n                         `---------------------------------------------------------'\r\n                                 | |\r\n                                 | '--------------------------------.\r\n                          .------'                                  |\r\n                          |                                         |\r\n                          |                                         |\r\n                  .--------------------------------------------.    |\r\n                  |  0x1000a308 ;[gm]                          |    |\r\n                  | 0x1000a30c str.etc_rc.conf str.etc_rc.conf |    |\r\n                  | 0x1000a320 sym.__GI_fopen                  |    |\r\n                  `--------------------------------------------'    |\r\n                      |                                             |\r\n                      '------------------.                          |\r\n                                         | .------------------------'\r\n                                         | |\r\n\r\n```\r\n4. ESIL stepping (static)\r\n```asm\r\n[0x10000bec 7% 120 samplePPC]> pd $r @ entry0+36 # 0x10000bec\r\n|           0x10000bec      38a90004       addi r5, r9, 4\r\n|           0x10000bf0      7c681b78       mr r8, r3\r\n|           0x10000bf4      3cc01000       lis r6, 0x1000\r\n|           0x10000bf8      38c60a6c       addi r6, r6, 0xa6c\r\n|           ;-- pc:\r\n|           0x10000bfc      3ce01000       lis r7, 0x1000\r\n|           0x10000c00      38e77e94       addi r7, r7, 0x7e94\r\n|           0x10000c04      3c601000       lis r3, 0x1000\r\n|           0x10000c08      386376e8       addi r3, r3, 0x76e8\r\n\\       ,=< 0x10000c0c      48018778       b sym.imp.__uClibc_main     ;[1]\r\n\r\n[0x10000bec 7% 120 samplePPC]> ?0;f tmp;s.. @ entry0+36 # 0x10000bec\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0x00000000  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x00000010  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x00000020  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\n0x00000030  ffff ffff ffff ffff ffff ffff ffff ffff  ................\r\nsrr0 0x00000000     srr1 0x00000000       r0 0x00000000       r1 0x00000000\r\n  r2 0x00000000       r3 0x00000000       r4 0xffffffff       r5 0x00000004\r\n  r6 0x10000a6c       r7 0x00000000       r8 0x00000000       r9 0x00000000\r\n r10 0x00000000      r11 0x00000000      r12 0x00000000      r13 0x100211e8\r\n r14 0x00000000      r15 0x00000000      r16 0x00000000      r17 0x00000000\r\n r18 0x00000000      r19 0x00000000      r20 0x00000000      r21 0x00000000\r\n r22 0x00000000      r23 0x00000000      r24 0x00000000      r25 0x00000000\r\n r26 0x00000000      r27 0x00000000      r28 0x00000000      r29 0x00000000\r\n r30 0x00000000      r31 0x00000000       lr 0x00000000      ctr 0x00000000\r\n msr 0x00000000       pc 0x10000bfc      xer 0x00000000       mq 0x00000000\r\nfpscr 0x00000000    vrsave 0x00000000    pvr 0x00000000     dccr 0x00000000\r\niccr 0x00000000     dear 0x00000000     hid0 0x00000000     hid1 0x00000000\r\nhid2 0x00000000     hid3 0x00000000     hid4 0x00000000     hid5 0x00000000\r\nhid6 0x00000000     ibat0l 0x00000000   ibat1l 0x00000000   ibat2l 0x00000000\r\nibat3l 0x00000000   ibat0u 0x00000000   ibat1u 0x00000000   ibat2u 0x00000000\r\nibat3u 0x00000000   dbat0l 0x00000000   dbat1l 0x00000000   dbat2l 0x00000000\r\ndbat3l 0x00000000   dbat0u 0x00000000   dbat1u 0x00000000   dbat2u 0x00000000\r\ndbat3u 0x00000000   mask 0x00000000\r\n\r\n```\r\n5. HUD test (debug & rarun2 is off/unusued)\r\n```asm\r\n[File] Edit  View  Tools  Search  Debug  Analyze  Help              [0x10000bec]\r\n.-----------------------------------------------------.------------------------.\r\n|[x] Disassembly                                      |   Symbols              |\r\n| |           0x10000bec      38a90004       addi r5, | 0x100000f4 0           |\r\n| |           0x10000bf0      7c681b78       mr r8, r3| 0x10000108 0           |\r\n| |           0x10000bf4      3cc01000       lis r6, 0| 0x10000290 0           |\r\n| |           0x10000bf8      38c60a6c       addi r6, |------------------------.\r\n| |           ;-- pc:                                 |   Stack                |\r\n| |           0x10000bfc      3ce01000       lis r7, 0| - offset -   0 1  2 3  |\r\n| |           0x10000c00      38e77e94       addi r7, | 0x00000000  ffff ffff f|\r\n| |           0x10000c04      3c601000       lis r3, 0| 0x00000010  ffff ffff f|\r\n| |           0x10000c08      386376e8       addi r3, |------------------------.\r\n| \\       ,=< 0x10000c0c      48018778       b sym.imp|   Registers            |\r\n|         |   ;-- strwildmatch:                       | srr0 0x00000000     srr|\r\n|         |   0x10000c10      9421ffc0       stwu r1, |   r2 0x00000000       r|\r\n|         |   0x10000c14      7c0802a6       mflr r0  |   r6 0x10000a6c       r|\r\n|         |   0x10000c18      93a10034       stw r29, |------------------------.\r\n|         |   0x10000c1c      93e1003c       stw r31, |   RegisterRefs         |\r\n|         |   0x10000c20      90010044       stw r0, 0|   srr0 0x0         mask|\r\n|         |   0x10000c24      7c3f0b78       mr r31, r|   srr1 0x0         mask|\r\n|         |   0x10000c28      907f0008       stw r3, 8|     r0 0x0         mask|\r\n|         |   0x10000c2c      909f000c       stw r4, 0|     r1 0x0         mask|\r\n|         |   0x10000c30      813f0008       lwz r9, 8|     r2 0x0         mask|\r\n`-----------------------------------------------------'------------------------'\r\n```\r\n\r\n6. test dbg (without rarun2)\r\n```asm\r\nProcess with PID 7821 started...\r\n= attach 7821 7821\r\nbin.baddr 0x10000000\r\nUsing 0x10000000\r\nWarning: Cannot initialize dynamic strings\r\nasm.bits 32\r\n -- One does not simply write documentation.\r\n :\r\n[0x1000a1e4 190 /test/samplePPC]> ?0;f tmp;s.. @ main                                                                                                    - offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n0xbfe29040  0000 0001 bfe2 9770 0000 0000 bfe2 9777  .......p.......w                                                                                         0xbfe29050  bfe2 978b bfe2 97ac bfe2 97b6 bfe2 97be  ................\r\n0xbfe29060  bfe2 97f1 bfe2 9803 bfe2 9813 bfe2 9826  ...............&                                                                                         0xbfe29070  bfe2 985d bfe2 986d bfe2 987a bfe2 988e  ...]...m...z....\r\nsrr0 0x00000000     srr1 0xbfe29040       r0 0x00000000       r1 0x00000000                                                                                     r2 0x00000000       r3 0x00000000       r4 0x00000000       r5 0x00000000\r\n  r6 0x00000000       r7 0xbfe29040       r8 0x00000000       r9 0x00000000                                                                                    r10 0x00000000      r11 0x00000000      r12 0x00000000      r13 0x00000000\r\n r14 0x00000000      r15 0x00000000      r16 0x00000000      r17 0x00000000                                                                                    r18 0x00000000      r19 0x00000000      r20 0x00000000      r21 0x00000000\r\n r22 0x00000000      r23 0x00000000      r24 0x00000000      r25 0x00000000                                                                                    r26 0x00000000      r27 0x00000000      r28 0x00000000      r29 0x00000000\r\n r30 0x100001f4      r31 0x0000d932       cr 0x20cb4d98      xer 0x00000000                                                                                     lr 0x00000000      ctr 0x00000000       mq 0x00000000     vrsave 0x00000000\r\n            ;-- main:                                                                                                                                                     0x1000a1e4      9421e950       stwu r1, -0x16b0(r1)\r\n            0x1000a1e8      7c0802a6       mflr r0                                                                                                                        0x1000a1ec      93a116a4       stw r29, 0x16a4(r1)\r\n            0x1000a1f0      93e116ac       stw r31, 0x16ac(r1)                                                                                                            0x1000a1f4      900116b4       stw r0, 0x16b4(r1)\r\n            0x1000a1f8      7c3f0b78       mr r31, r1                                                                                                                     0x1000a1fc      907f1668       stw r3, 0x1668(r31)\r\n            0x1000a200      909f166c       stw r4, 0x166c(r31)                                                                                                            0x1000a204      3d201001       lis r9, 0x1001\r\n            0x1000a208      38095354       addi r0, r9, 0x5354                                                                                                            0x1000a20c      901f0058       stw r0, 0x58(r31)\r\n            0x1000a210      4bffffad       bl sym.getBuild             ;[1]                                                                                               0x1000a214      7c601b78       mr r0, r3\r\n            0x1000a218      3d201001       lis r9, 0x1001                                                                                                                 0x1000a21c      386955a8       addi r3, r9, 0x55a8\r\n            0x1000a220      7c040378       mr r4, r0                                                                                                                      0x1000a224      4cc63182       crclr 6\r\n            0x1000a228      480015d9       bl sym.printf               ;[2]                                                                                               0x1000a22c      813f166c       lwz r9, 0x166c(r31)\r\n            0x1000a230      80090000       lwz r0, 0(r9)                     \r\n```\r\n\r\n7a. test debug WITH rarun2, see the debug offset as PoC\r\n```asm\r\n$ r2 -d rarun2 program=./samplePPC arg0=fugahoge stdin=/bin/true\r\nProcess with PID 7909 started...\r\n= attach 7909 7909\r\nbin.baddr 0x206ce000\r\nUsing 0x206ce000\r\nasm.bits 32\r\n -- Using radare2 to generate intelligence ...\r\n[0x206ceb6c]> af;pdf\r\n/ (fcn) main 808\r\n|   main ();\r\n|           0x206ceb6c      9421ffc0       stwu r1, -0x40(r1)\r\n|           0x206ceb70      7c0802a6       mflr r0\r\n|           0x206ceb74      90010044       stw r0, 0x44(r1)\r\n|           0x206ceb78      93a10034       stw r29, 0x34(r1)\r\n|           0x206ceb7c      93c10038       stw r30, 0x38(r1)\r\n|           0x206ceb80      93e1003c       stw r31, 0x3c(r1)\r\n|           0x206ceb84      7c3f0b78       mr r31, r1\r\n|       ,=< 0x206ceb88      429f0005       bdnzl 0x206ceb8c\r\n|       `-> 0x206ceb8c      7fc802a6       mflr r30\r\n|           0x206ceb90      3fde0002       addis r30, r30, 2\r\n|           0x206ceb94      3bde87c4       addi r30, r30, -0x783c\r\n|           0x206ceb98      907f0028       stw r3, 0x28(r31)\r\n|           0x206ceb9c      909f002c       stw r4, 0x2c(r31)\r\n|           0x206ceba0      801f0028       lwz r0, 0x28(r31)\r\n|           0x206ceba4      2f800001       cmpwi cr7, r0, 1\r\n|       ,=< 0x206ceba8      419e002c       beq cr7, 0x206cebd4\r\n|       |   0x206cebac      801f002c       lwz r0, 0x2c(r31)\r\n|       |   0x206cebb0      30000004       addic r0, r0, 4\r\n|       |   0x206cebb4      7c090378       mr r9, r0\r\n|       |   0x206cebb8      80090000       lwz r0, 0(r9)\r\n|       |   0x206cebbc      7c030378       mr r3, r0\r\n|       |   0x206cebc0      809e8008       lwz r4, -0x7ff8(r30)\r\n|       |   0x206cebc4      4800043d       bl sym.imp.strcmp\r\n|       |   0x206cebc8      7c601b78       mr r0, r3\r\n|       |   0x206cebcc      2f800000       cmpwi cr7, r0, 0\r\n|      ,==< 0x206cebd0      409e004c       bne cr7, 0x206cec1c\r\n|      |`-> 0x206cebd4      813e800c       lwz r9, -0x7ff4(r30)\r\n|      |    0x206cebd8      801e8010       lwz r0, -0x7ff0(r30)\r\n|      |    0x206cebdc      7c0b0378       mr r11, r0\r\n|      |    0x206cebe0      800b0000       lwz r0, 0(r11)\r\n```\r\n\r\n7b. process tree as PoC I run it wirh rarun2\r\n```asm\r\n\r\n-sshd\r\n   `-sshd\r\n       `-sshd\r\n           `-sh\r\n               `-r2 /test/bin/r2 -d rarun2 program=./samplePPC arg0=foo stdin=/bin/true\r\n                   `-env.sh /test/radare2/env.sh ...\r\n                       `-radare2 -d rarun2 program=./samplePPC arg0=foo stdin=/bin/true\r\n                           `-rarun2 program=./testPPC arg0=foo stdin=/bin/true\r\n`-login --\r\n      `-bash\r\n          `-pstree\r\n```\r\n\r\n8. bp tests (with rarun2 runs)\r\n```asm\r\n[0x1000a1e4]> db 0x1000a1f8\r\n[0x1000a1e4]> db\r\n0x1000a1e4 - 0x1000a1e8 4 --x sw break enabled cmd=\"\" cond=\"\" name=\"/test/samplePPC+0xa1e4\" module=\"/test/samplePPC+0xa1e4\"\r\n0x1000a1f8 - 0x1000a1fc 4 --x sw break enabled cmd=\"\" cond=\"\" name=\"0x1000a1f8\" module=\"/test/samplePPC\"\r\n[0x1000a1e4]> db-0x1000a1f8\r\n[0x1000a1e4]> db\r\n0x1000a1e4 - 0x1000a1e8 4 --x sw break enabled cmd=\"\" cond=\"\" name=\"/test/samplePPC+0xa1e4+0xa1e4\" module=\"/test/samplePPC+0xa1e4\"\r\n[0x1000a1e4]> dc\r\n(and so on, all works).... \r\n```","createdAt":"2018-07-05T02:21:12Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4681#issuecomment-402588618","viewerDidAuthor":false}],"number":4681,"title":"rarun2 support for qemu"},{"body":"See if value passed to a function is computed or constant. Also, identify how it is used and all the calls to the given function so we can infer those constant values in a better form.\n\ncc @oddcoder \n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDIwNTE5OTYzMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"This can be useful because we should be able to enumerate all the calling parameters to a function and identify when those parameters are always the same, or if they differ and how.\n- arg value is always 0 or 1 -> probably bool\n- arg value is compared using signed-conditional operations (for example: jg vs ja) -> probably signed\n- arg value is always 0 -> probably null, or terminator, or constant number (we can then propagate that constant inside the function)\n- ...\n","createdAt":"2016-04-04T08:52:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4508#issuecomment-205199630","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4MjgyMzQ4OQ==","author":{"login":"sharad1126"},"authorAssociation":"NONE","body":"@Maijin @radare I would like to work on this issue. Please let me know any other information on the same if any. ","createdAt":"2017-02-27T19:23:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4508#issuecomment-282823489","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4MzA0NTQ2MQ==","author":{"login":"oddcoder"},"authorAssociation":"CONTRIBUTOR","body":"perhaps you can do that using esil... track each variable on his own ","createdAt":"2017-02-28T13:57:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4508#issuecomment-283045461","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4MzEwMzM3Nw==","author":{"login":"sharad1126"},"authorAssociation":"NONE","body":"@oddcoder I'll start doing that using esil.... thanks for the guidance.","createdAt":"2017-02-28T17:13:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4508#issuecomment-283103377","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxMzYyMzQ2Mw==","author":{"login":"MariasStory"},"authorAssociation":"NONE","body":"Hi, any progress on this one?","createdAt":"2017-07-07T08:40:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4508#issuecomment-313623463","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxMzY0MjE4MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cc @oddcoder \n> On 7 Jul 2017, at 10:40, MariasStory <notifications@github.com> wrote:\n> \n> Hi, any progress on this one?\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/4508#issuecomment-313623463>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lmfmmwwlkJk0s7JnL60MP-rEP43Cks5sLe8DgaJpZM4H-5d->.\n> \n\n","createdAt":"2017-07-07T10:07:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4508#issuecomment-313642181","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxMzY1MzE3MQ==","author":{"login":"oddcoder"},"authorAssociation":"CONTRIBUTOR","body":"not sure but I didn't do anything regarding this","createdAt":"2017-07-07T11:07:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4508#issuecomment-313653171","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM4NDE3MjAzNw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"This is related to https://github.com/radare/radeco-lib/issues/91","createdAt":"2018-04-25T06:14:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4508#issuecomment-384172037","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQxMjM1NzAxMg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Can be related to constrained types: https://github.com/radare/radare2/issues/10458","createdAt":"2018-08-12T17:08:11Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4508#issuecomment-412357012","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU0Njg3NDYyMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i think we can do this with your esildfg now","createdAt":"2019-10-28T10:00:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4508#issuecomment-546874623","viewerDidAuthor":false}],"number":4508,"title":"Identify if argument/variable is constant or variable"},{"body":"Benefits of having a unique file for help:\r\n1. No hackish code for every different help using one unique tree search\r\n2. `[dD][ajbrfils] [sz] [arch] [bits]`. This usage parameter could be auto-generated\r\n3. Easy to contribute since doesn't require touching code\r\n4. Unique error message when not existing self-doc : \"Help doesn't exist, please contribute by adding to help.db\"\r\n5. File could be consumed by the HUD therefore automagically adding tons of feature to it\r\n6. Complaining user will have all commands available stuff in only one file always updated\r\n7. Can help for test since we'll have list of all commands in one file\r\n8. Could be re-used for GUIs\r\n9. Could be used for Localisation/Translation\r\n10. Could be re-used in r3 :full_moon_with_face: :new_moon_with_face: \r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDIwMzUwNjk0Ng==","author":{"login":"Ristovski"},"authorAssociation":"NONE","body":"A good question is, would all this be autogenerated? If so, what kind of system would it use, would it just grab strings by id from a file (so we can have localization)?\nOtherwise seems like a great idea :smile: \n","createdAt":"2016-03-30T16:10:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/4459#issuecomment-203506946","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIwMzY1MzQ5Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Im against adding localization to r2. It would be harder to maintain and will be slower\n\n> On 30 Mar 2016, at 18:10, Rafael Ristovski notifications@github.com wrote:\n> \n> A good question is, would all this be autogenerated? If so, what kind of system would it use, would it just grab strings by id from a file (so we can have localization)?\n> Otherwise seems like a great idea \n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n","createdAt":"2016-03-30T21:55:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4459#issuecomment-203653496","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIwMzY1NDA1MA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Localisation is one between 10 benefits, can you comment on the whole idea ?\n","createdAt":"2016-03-30T21:56:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4459#issuecomment-203654050","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIwMzY2ODI4Nw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"To gain the power of radare2 wit,\nThe one should learn a little Brit.\n\n++ for no localisation.\n","createdAt":"2016-03-30T22:32:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4459#issuecomment-203668287","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIwNTUzOTkzMw==","author":{"login":"sushant94"},"authorAssociation":"CONTRIBUTOR","body":"@radare @XVilka @Maijin \nOk, I had an idea for this a while back. Feel free to comment / review the same.\n\nThe basic idea was to build a compile time [trie](https://en.wikipedia.org/wiki/Trie). So adding a new command to radare2 shell would look something like this (disregard the names of functions/macros):\n\n``` C\n// This is a macro that builds the trie from registered commands\nr2_add_command (\"pd\", <pointer to function that handles pd>, <help for this command as a string>)\n```\n\nSo, now when a user enters `p?`, it traverses the trie and prints help for all commands that `p` is a prefix of. This also solves another problem of sorting the commands manually. We can continue having the current separation of defining commands in a modular way or we can have all the commands registered in one central location (while still defining the functions that handle them modularly).\n\nIf this idea seems good, I can elaborate more on this later.\n","createdAt":"2016-04-04T23:28:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/4459#issuecomment-205539933","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIwNTczNTc4Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"another idea was to use sdb, but sdb is plain k=v, there are no trees that can resolve sub-commands without dupping info.\n\n> On 05 Apr 2016, at 01:28, Sushant Dinesh notifications@github.com wrote:\n> \n> @radare https://github.com/radare @XVilka https://github.com/XVilka @Maijin https://github.com/Maijin \n> Ok, I had an idea for this a while back. Feel free to comment / review the same.\n> \n> The basic idea was to build a compile time trie https://en.wikipedia.org/wiki/Trie. So adding a new command to radare2 shell would look something like this (disregard the names of functions/macros):\n> \n> // This is a macro that builds the trie from registered commands\n> r2_add_command (\"pd\", <pointer to function that handles pd>, <help for this command as a string>)\n> So, now when a user enters p?, it traverses the trie and prints help for all commands that p is a prefix of. This also solves another problem of sorting the commands manually. We can continue having the current separation of defining commands in a modular way.\n> \n> If this idea seems good, I can elaborate more on this later.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub https://github.com/radare/radare2/issues/4459#issuecomment-205539933\n","createdAt":"2016-04-05T09:57:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4459#issuecomment-205735782","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxNjk1NTE1Mg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@MaskRay  there was also some attempts and discussions here you may want to check","createdAt":"2017-07-21T09:36:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4459#issuecomment-316955152","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxNjk1NTIxMw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"see https://github.com/radare/radare2/issues/5383 ","createdAt":"2017-07-21T09:37:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4459#issuecomment-316955213","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU1Nzc5Nw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T06:24:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4459#issuecomment-644557797","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDcwNzcyOQ==","author":{"login":"karliss"},"authorAssociation":"CONTRIBUTOR","body":"Related to  #16782","createdAt":"2020-06-16T11:34:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4459#issuecomment-644707729","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDcxNzA5Nw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"> Related to #16782\r\n\r\nYeah, probably we should indeed define some \".db\" file or something where to store all the help messages and just load those from the file instead of hardcoding them in the code. Another random idea (not sure if it's good) could be to have a `.db` file that at compile time is converted into a `.c` file and just include that in the code, so it would become part of the binary anyway.","createdAt":"2020-06-16T11:57:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4459#issuecomment-644717097","viewerDidAuthor":false}],"number":4459,"title":"Improve command self-documentation"},{"body":"When opening this struct with `to /tmp/b.h` , the error reported is `/tmp/b.h:4: error: bracket expected` where instead it should also tell the user that the type `WORD` is not defined.\n\n```\nstruct VbHeader\n{\n    char  szVbMagic[4];\n    WORD  wRuntimeBuild;\n};\n```\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDE5OTA4NzU4NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Tell this to the tcc guys. This is not our code. Are you sure WORD is not defined?\n\n> On 20 Mar 2016, at 16:39, Maijin notifications@github.com wrote:\n> \n> When opening this struct with to, the error reported is /tmp/b.h:4: error: bracket expected where instead it should tell the user that the type WORD is not defined.\n> \n> struct VbHeader\n> {\n>     char  szVbMagic[4];\n>     WORD  wRuntimeBuild;\n> };\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n","createdAt":"2016-03-21T02:24:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4369#issuecomment-199087585","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE5OTEzODIyMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"WORD is not standart type, but we may want to add it as typedef with some\ndistributed header with our tcc.\nOn Mar 21, 2016 5:24 AM, \"radare\" notifications@github.com wrote:\n\n> Tell this to the tcc guys. This is not our code. Are you sure WORD is not\n> defined?\n> \n> > On 20 Mar 2016, at 16:39, Maijin notifications@github.com wrote:\n> > \n> > When opening this struct with to, the error reported is /tmp/b.h:4:\n> > error: bracket expected where instead it should tell the user that the type\n> > WORD is not defined.\n> > \n> > struct VbHeader\n> > {\n> > char szVbMagic[4];\n> > WORD wRuntimeBuild;\n> > };\n> > â€”\n> > You are receiving this because you are subscribed to this thread.\n> > Reply to this email directly or view it on GitHub\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/radare/radare2/issues/4369#issuecomment-199087585\n","createdAt":"2016-03-21T05:58:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4369#issuecomment-199138221","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE5OTMyODAwNw==","author":{"login":"crowell"},"authorAssociation":"COLLABORATOR","body":"ida ships with a header that defines WORD/DWORD/QWORD/etc. it may be nice\nto our own with typedefs of stuff.\n\nOn Mon, Mar 21, 2016 at 1:58 AM, Anton Kochkov notifications@github.com\nwrote:\n\n> WORD is not standart type, but we may want to add it as typedef with some\n> distributed header with our tcc.\n> On Mar 21, 2016 5:24 AM, \"radare\" notifications@github.com wrote:\n> \n> > Tell this to the tcc guys. This is not our code. Are you sure WORD is not\n> > defined?\n> > \n> > > On 20 Mar 2016, at 16:39, Maijin notifications@github.com wrote:\n> > > \n> > > When opening this struct with to, the error reported is /tmp/b.h:4:\n> > > error: bracket expected where instead it should tell the user that the\n> > > type\n> > > WORD is not defined.\n> > > \n> > > struct VbHeader\n> > > {\n> > > char szVbMagic[4];\n> > > WORD wRuntimeBuild;\n> > > };\n> > > â€”\n> > > You are receiving this because you are subscribed to this thread.\n> > > Reply to this email directly or view it on GitHub\n> > \n> > â€”\n> > You are receiving this because you are subscribed to this thread.\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/radare/radare2/issues/4369#issuecomment-199087585\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/radare/radare2/issues/4369#issuecomment-199138221\n\n## \n\nJeff Crowell\nhttps://github.com/crowell\n","createdAt":"2016-03-21T15:02:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4369#issuecomment-199328007","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE5OTMzNzMwOQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"https://github.com/radare/radare2/blob/master/libr/anal/d/windows-types\n","createdAt":"2016-03-21T15:23:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4369#issuecomment-199337309","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjkyMw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4369#issuecomment-644522923","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyNjM2MA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@HoundThe - just add WORD and DWORD as uint16_t, etc in shlr/tcc","createdAt":"2020-06-16T04:38:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4369#issuecomment-644526360","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1Mjk0OTU1Mg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"The purpose of the issue is to enhance the error messages, not about fixing tcc by adding WORD and DWORD.\r\n\r\nThe error message must be saying \"Missing type WORD please add it in XXX\" not \"/tmp/b.h:4: error: bracket expected\".","createdAt":"2020-07-02T11:25:12Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4369#issuecomment-652949552","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1Mjk4NzEzNg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"It's hard to do it due to the nature of Tcc parser. We are going to switch to tree-sitter for C structures and function prototypes, I hope it will allow more sensible error messages as well.","createdAt":"2020-07-02T12:52:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4369#issuecomment-652987136","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY1MzM4NjQzNw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"ok!","createdAt":"2020-07-03T06:58:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4369#issuecomment-653386437","viewerDidAuthor":false}],"number":4369,"title":"to b.h error not explicit"},{"body":"It appears function boundaries are a bit off when tail call optimization is used. For instance:\n\n```\ncat <<EOF > main.c\nvoid foo(void);\n\nint main()\n{\n    foo();\n    return 0;\n}\nEOF\n\ncat <<EOF > foo.c\nvoid bar(void);\n\nvoid foo()\n{\n    bar();\n}\nEOF\n\ncat <<EOF > bar.c\nvoid bar()\n{\n}\nEOF\n\ngcc -m32 -O2 main.c foo.c bar.c\nr2 -A a.out -qc \"pdf @sym.foo\"\n```\n\n...yields:\n\n```\nâ•’ (fcn) sym.foo 16\nâ”‚           ; CALL XREF from 0x08048301 (sym.foo)\nâ”‚       â”Œâ”€< 0x08048410      e90b000000     jmp sym.bar\nâ”‚       â”‚   0x08048415      6690           nop\nâ”‚       â”‚   0x08048417      6690           nop\nâ”‚       â”‚   0x08048419      6690           nop\nâ”‚       â”‚   0x0804841b      6690           nop\nâ”‚       â”‚   0x0804841d      6690           nop\nâ•˜       â”‚   0x0804841f      90             nop\n```\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDE5MzU2MjcyMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"e anal.eobjmp=true\n\n> On 08 Mar 2016, at 03:30, Ido Yariv notifications@github.com wrote:\n> \n> It appears function boundaries are a bit off when tail call optimization is used. For instance:\n> \n> cat <<EOF > main.c\n> void foo(void);\n> \n> int main()\n> {\n>     foo();\n>     return 0;\n> }\n> EOF\n> \n> cat <<EOF > foo.c\n> void bar(void);\n> \n> void foo()\n> {\n>     bar();\n> }\n> EOF\n> \n> cat <<EOF > bar.c\n> void bar()\n> {\n> }\n> EOF\n> \n> gcc -m32 -O2 main.c foo.c bar.c\n> r2 -A a.out -qc \"pdf @sym.foo\"\n> ...yields:\n> \n> â•’ (fcn) sym.foo 16\n> â”‚           ; CALL XREF from 0x08048301 (sym.foo)\n> â”‚       â”Œâ”€< 0x08048410      e90b000000     jmp sym.bar\n> â”‚       â”‚   0x08048415      6690           nop\n> â”‚       â”‚   0x08048417      6690           nop\n> â”‚       â”‚   0x08048419      6690           nop\n> â”‚       â”‚   0x0804841b      6690           nop\n> â”‚       â”‚   0x0804841d      6690           nop\n> â•˜       â”‚   0x0804841f      90             nop\n> â€”\n> Reply to this email directly or view it on GitHub https://github.com/radare/radare2/issues/4258.\n","createdAt":"2016-03-08T02:31:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-193562720","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE5MzU2Nzc5NQ==","author":{"login":"codido"},"authorAssociation":"CONTRIBUTOR","body":"This indeed seems to solve this, thanks!\nAny reason this shouldn't be true by default?\n","createdAt":"2016-03-08T02:41:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-193567795","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE5MzcwNTgyMg==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Because this is not probably the right solution. Indeed you will see that functions will now be terminated as soon as you meet a jmp... I don't think anal.eobjmp really fixes the issue, because it creates many more problems.\n","createdAt":"2016-03-08T10:17:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-193705822","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE5MzcwODY0NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"eobjmp doesnt exactly means that the funciton terminates on any jump. it must have some kind of conditions.. i know that this creates problems, because it is not easy to handle all sistuations in a generic way, did you spot any case where this is not working fine? we should have tests for this :3\n\n> On 08 Mar 2016, at 11:17, Riccardo Schirone notifications@github.com wrote:\n> \n> Because this is not probably the right solution. Indeed you will see that functions will now be terminated as soon as you meet a jmp... I don't think anal.eobjmp really fixes the issue, because it creates many more problems.\n> \n> â€”\n> Reply to this email directly or view it on GitHub https://github.com/radare/radare2/issues/4258#issuecomment-193705822.\n","createdAt":"2016-03-08T10:25:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-193708644","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE5NDIxOTAyMQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Yes, a lot. This is /bin/cat for example:\n\n```\nâ•’ (fcn) entry0 60\nâ”‚         0x100001540      55             push rbp\nâ”‚         0x100001541      4889e5         mov rbp, rsp\nâ”‚         0x100001544      4157           push r15\nâ”‚         0x100001546      4156           push r14\nâ”‚         0x100001548      4155           push r13\nâ”‚         0x10000154a      4154           push r12\nâ”‚         0x10000154c      53             push rbx\nâ”‚         0x10000154d      50             push rax\nâ”‚         0x10000154e      4889f3         mov rbx, rsi\nâ”‚         0x100001551      4189fe         mov r14d, edi\nâ”‚         0x100001554      488d35f50900.  lea rsi, section.4.__cstring\nâ”‚         0x10000155b      bf02000000     mov edi, 2\nâ”‚         0x100001560      e80b080000     call sym.imp.setlocale       ;[1]\nâ”‚         0x100001565      4c8d3de50900.  lea r15, str.benstuv\nâ”‚         0x10000156c      4c8d2d610100.  lea r13, 0x1000016d4\nâ”‚         0x100001573      4c8b25b60a00.  mov r12, qword [reloc.__stdoutp_48]\nâ•˜    â”Œâ”€â”€< 0x10000157a      eb14           jmp 0x100001590              ;[2]\n   â”Œâ”€â”€â”€â”€> 0x10000157c      c705ca0b0000.  mov dword [0x100002150], 1\n   â”‚ â”‚    0x100001586      c705b00b0000.  mov dword [section.11.__common], 1\n  â”€â”€â”€â””â”€â”€> 0x100001590      4489f7         mov edi, r14d\n   â”‚      0x100001593      4889de         mov rsi, rbx\n```\n\nI also found out some time ago that there are BasicBlocks that do not belong to any function.\nAs always, I think RAnal needs a lot of love!\n","createdAt":"2016-03-09T10:04:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-194219021","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE5NDIyODQ3OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"All yours if you are in the mood :D\n\n> On 09 Mar 2016, at 11:04, Riccardo Schirone notifications@github.com wrote:\n> \n> Yes, a lot. This is /bin/cat for example:\n> \n> â•’ (fcn) entry0 60\n> â”‚         0x100001540      55             push rbp\n> â”‚         0x100001541      4889e5         mov rbp, rsp\n> â”‚         0x100001544      4157           push r15\n> â”‚         0x100001546      4156           push r14\n> â”‚         0x100001548      4155           push r13\n> â”‚         0x10000154a      4154           push r12\n> â”‚         0x10000154c      53             push rbx\n> â”‚         0x10000154d      50             push rax\n> â”‚         0x10000154e      4889f3         mov rbx, rsi\n> â”‚         0x100001551      4189fe         mov r14d, edi\n> â”‚         0x100001554      488d35f50900.  lea rsi, section.4.__cstring\n> â”‚         0x10000155b      bf02000000     mov edi, 2\n> â”‚         0x100001560      e80b080000     call sym.imp.setlocale       ;[1]\n> â”‚         0x100001565      4c8d3de50900.  lea r15, str.benstuv\n> â”‚         0x10000156c      4c8d2d610100.  lea r13, 0x1000016d4\n> â”‚         0x100001573      4c8b25b60a00.  mov r12, qword [reloc.__stdoutp_48]\n> â•˜    â”Œâ”€â”€< 0x10000157a      eb14           jmp 0x100001590              ;[2]\n>    â”Œâ”€â”€â”€â”€> 0x10000157c      c705ca0b0000.  mov dword [0x100002150], 1\n>    â”‚ â”‚    0x100001586      c705b00b0000.  mov dword [section.11.__common], 1\n>   â”€â”€â”€â””â”€â”€> 0x100001590      4489f7         mov edi, r14d\n>    â”‚      0x100001593      4889de         mov rsi, rbx\n> I also found out some time ago that there are BasicBlocks that do not belong to any function.\n> As always, I think RAnal needs a lot of love!\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n","createdAt":"2016-03-09T10:28:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-194228479","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE5NTg1ODA5Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Which condition can we assume when considering a tail continuation or not? Do you have more examples?\n","createdAt":"2016-03-13T02:35:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-195858096","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIwMjA3MTc0MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"For the PLT we can asume that a JMP is EOB when it points to a UJMP. can someone work a PR on this to see how much tests are broken and how many fixed?\n","createdAt":"2016-03-27T14:21:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-202071740","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxNjk1MzY4Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cc @rlaemmert \n","createdAt":"2016-05-04T18:15:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-216953683","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxNjk2MjI0OQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I would assume that when there is a jump, the next block is always part of the current function (unless it is already part of another function). If during analysis you find out that one of those basic blocks is actually the start of another function, you could split the functions.\n","createdAt":"2016-05-04T18:45:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-216962249","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxNzY2NDg0OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"What if theres data? Or just analize a single function?\n\nImho the approach would be to see if any branch in the current analyzed part theres a jump after that jmpback if not just end the function there\n\n> On 04 May 2016, at 20:45, Riccardo Schirone notifications@github.com wrote:\n> \n> I would assume that when there is a jump, the next block is always part of the current function (unless it is already part of another function). If during analysis you find out that one of those basic blocks is actually the start of another function, you could split the functions.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly or view it on GitHub\n","createdAt":"2016-05-07T19:47:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-217664848","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxNzc0ODc4NA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"If there is a direct jump to an address, there can't be data there (unless of course we are talking about obfuscated binaries, but then if we assume that, we may fail in thousands of ways). An address reachable through a direct jump is always part of the current function IMO. You can say there is a tail recursion optimisation only when, later, you find out that there is a `call` to one of the basic block or there is a function symbol there or you have other strong assumptions that make you think there is a function there.\n\nFor example:\n\n```\n  â”Œâ”€â”€< 0x00000000      eb0a           jmp 0xc\n  â”‚    0x00000002      0000           add byte [rax], al\n  â”‚    0x00000004      0000           add byte [rax], al\n  â”‚    0x00000006      0000           add byte [rax], al\n  â”‚    0x00000008      0000           add byte [rax], al\n  â”‚    0x0000000a      0000           add byte [rax], al\n  â””â”€â”€> 0x0000000c      55             push rbp\n       0x0000000d      53             push rbx\n       0x0000000e      b800000000     mov eax, 0\n       0x00000013      5b             pop rbx\n       0x00000014      5d             pop rbp\n       0x00000015      c3             ret\n```\n\nIn this case there is nothing, IMO, that can make you think that @ 0 there is a tail-recursion optimisation. So there should be just one function starting at 0, with two basic blocks (one starting at 0 and one starting at 0xc).\n\nInstead, if we consider this code with a small change:\n\n```\n  â”Œâ”€â”€< 0x00000000      eb0a           jmp 0xc\n  â”‚    0x00000002      0000           add byte [rax], al\n  â”‚    0x00000004      0000           add byte [rax], al\n  â”‚    0x00000006      0000           add byte [rax], al\n  â”‚    0x00000008      0000           add byte [rax], al\n  â”‚    0x0000000a      0000           add byte [rax], al\n  â””â”€â”€> 0x0000000c      55             push rbp\n       0x0000000d      53             push rbx\n       0x0000000e      b800000000     mov eax, 0\n       0x00000013      5b             pop rbx\n       0x00000014      5d             pop rbp\n       0x00000015      c3             ret\n       0x00000016      0000           add byte [rax], al\n       ;-- myfunction:\n       0x00000018      55             push rbp\n       0x00000019      e8eeffffff     call 0xc\n       0x0000001e      5d             pop rbp\n       0x0000001f      c3             ret\n```\n\nWe have 3 functions: one at 0 with only one basic block that jumps outside the function, one at 0xc and another one at 0x18. When you start analysing the function @ 0, there isn't anything that tells you that the jump instruction is actually the result of a tail-call optimisation, so you have to consider the basic block @ 0xc as part of the function @ 0. Only later, when you analyse `myfunction` you find out that there is a call to a basic block that is not the entry point of the relative function and so, you can split the function @ 0 in two functions, one starting at 0 and one starting at 0xc.\n\nThis is how I see this problem.\n\nAbout the analysis of only one function... well, if you want to analyse only part of the binary you can't expect to gather every aspect of the binary :P you have to live with the fact that you'll have part of all the info.\n","createdAt":"2016-05-08T21:58:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-217748784","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxNzc1MDA5Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Many nonreturn calls are constructed with jumps nowadays, so you will end up having many imports as bb of other functions\n\n> On 08 May 2016, at 23:58, Riccardo Schirone notifications@github.com wrote:\n> \n> If there is a direct jump to an address, there can't be data there (unless of course we are talking about obfuscated binaries, but then if we assume that, we may fail in thousands of ways). An address reachable through a direct jump is always part of the current function IMO. You can say there is a tail recursion optimisation only when, later, you find out that there is a call to one of the basic block or there is a function symbol there or you have other strong assumptions that make you think there is a function there.\n> \n> For example:\n> \n>   â”Œâ”€â”€< 0x00000000      eb0a           jmp 0xc\n>   â”‚    0x00000002      0000           add byte [rax], al\n>   â”‚    0x00000004      0000           add byte [rax], al\n>   â”‚    0x00000006      0000           add byte [rax], al\n>   â”‚    0x00000008      0000           add byte [rax], al\n>   â”‚    0x0000000a      0000           add byte [rax], al\n>   â””â”€â”€> 0x0000000c      55             push rbp\n>        0x0000000d      53             push rbx\n>        0x0000000e      b800000000     mov eax, 0\n>        0x00000013      5b             pop rbx\n>        0x00000014      5d             pop rbp\n>        0x00000015      c3             ret\n> In this case there is nothing, IMO, that can make you think that @ 0 there is a tail-recursion optimisation. So there should be just one function starting at 0, with two basic blocks (one starting at 0 and one starting at 0xc).\n> \n> Instead, if we consider this code with a small change:\n> \n>   â”Œâ”€â”€< 0x00000000      eb0a           jmp 0xc\n>   â”‚    0x00000002      0000           add byte [rax], al\n>   â”‚    0x00000004      0000           add byte [rax], al\n>   â”‚    0x00000006      0000           add byte [rax], al\n>   â”‚    0x00000008      0000           add byte [rax], al\n>   â”‚    0x0000000a      0000           add byte [rax], al\n>   â””â”€â”€> 0x0000000c      55             push rbp\n>        0x0000000d      53             push rbx\n>        0x0000000e      b800000000     mov eax, 0\n>        0x00000013      5b             pop rbx\n>        0x00000014      5d             pop rbp\n>        0x00000015      c3             ret\n>        0x00000016      0000           add byte [rax], al\n>        ;-- myfunction:\n>        0x00000018      55             push rbp\n>        0x00000019      e8eeffffff     call 0xc\n>        0x0000001e      5d             pop rbp\n>        0x0000001f      c3             ret\n> We have 3 functions: one at 0 with only one basic block that jumps outside the function, one at 0xc and another one at 0x18. When you start analysing the function @ 0, there isn't anything that tells you that the jump instruction is actually the result of a tail-call optimisation, so you have to consider the basic block @ 0xc as part of the function @ 0. Only later, when you analyse myfunction you find out that there is a call to a basic block that is not the entry point of the relative function and so, you can split the function @ 0 in two functions, one starting at 0 and one starting at 0xc.\n> \n> This is how I see this problem.\n> \n> About the analysis of only one function... well, if you want to analyse only part of the binary you can't expect to gather every aspect of the binary :P you have to live with the fact that you'll have part of all the info.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly or view it on GitHub\n","createdAt":"2016-05-08T22:28:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-217750097","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxNzc1MDEwOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"And we cannot relay always on the sections\n\n> On 08 May 2016, at 23:58, Riccardo Schirone notifications@github.com wrote:\n> \n> If there is a direct jump to an address, there can't be data there (unless of course we are talking about obfuscated binaries, but then if we assume that, we may fail in thousands of ways). An address reachable through a direct jump is always part of the current function IMO. You can say there is a tail recursion optimisation only when, later, you find out that there is a call to one of the basic block or there is a function symbol there or you have other strong assumptions that make you think there is a function there.\n> \n> For example:\n> \n>   â”Œâ”€â”€< 0x00000000      eb0a           jmp 0xc\n>   â”‚    0x00000002      0000           add byte [rax], al\n>   â”‚    0x00000004      0000           add byte [rax], al\n>   â”‚    0x00000006      0000           add byte [rax], al\n>   â”‚    0x00000008      0000           add byte [rax], al\n>   â”‚    0x0000000a      0000           add byte [rax], al\n>   â””â”€â”€> 0x0000000c      55             push rbp\n>        0x0000000d      53             push rbx\n>        0x0000000e      b800000000     mov eax, 0\n>        0x00000013      5b             pop rbx\n>        0x00000014      5d             pop rbp\n>        0x00000015      c3             ret\n> In this case there is nothing, IMO, that can make you think that @ 0 there is a tail-recursion optimisation. So there should be just one function starting at 0, with two basic blocks (one starting at 0 and one starting at 0xc).\n> \n> Instead, if we consider this code with a small change:\n> \n>   â”Œâ”€â”€< 0x00000000      eb0a           jmp 0xc\n>   â”‚    0x00000002      0000           add byte [rax], al\n>   â”‚    0x00000004      0000           add byte [rax], al\n>   â”‚    0x00000006      0000           add byte [rax], al\n>   â”‚    0x00000008      0000           add byte [rax], al\n>   â”‚    0x0000000a      0000           add byte [rax], al\n>   â””â”€â”€> 0x0000000c      55             push rbp\n>        0x0000000d      53             push rbx\n>        0x0000000e      b800000000     mov eax, 0\n>        0x00000013      5b             pop rbx\n>        0x00000014      5d             pop rbp\n>        0x00000015      c3             ret\n>        0x00000016      0000           add byte [rax], al\n>        ;-- myfunction:\n>        0x00000018      55             push rbp\n>        0x00000019      e8eeffffff     call 0xc\n>        0x0000001e      5d             pop rbp\n>        0x0000001f      c3             ret\n> We have 3 functions: one at 0 with only one basic block that jumps outside the function, one at 0xc and another one at 0x18. When you start analysing the function @ 0, there isn't anything that tells you that the jump instruction is actually the result of a tail-call optimisation, so you have to consider the basic block @ 0xc as part of the function @ 0. Only later, when you analyse myfunction you find out that there is a call to a basic block that is not the entry point of the relative function and so, you can split the function @ 0 in two functions, one starting at 0 and one starting at 0xc.\n> \n> This is how I see this problem.\n> \n> About the analysis of only one function... well, if you want to analyse only part of the binary you can't expect to gather every aspect of the binary :P you have to live with the fact that you'll have part of all the info.\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly or view it on GitHub\n","createdAt":"2016-05-08T22:28:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-217750109","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxNzc4Njk5Nw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Why? If you have symbols you can also use them to know  when another function starts.. If you don't have them, then you can special handling the plt stubs. If you are really in worst case, at most you will consider some more bb as part of that function... \n\nBtw, my algorithm doesn't relay on section info\n","createdAt":"2016-05-09T06:40:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-217786997","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxNzgyMTI3Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"you cant relay on symbols always either\n\n> On 09 May 2016, at 08:40, Riccardo Schirone notifications@github.com wrote:\n> \n> Why? If you have symbols you can also use them to know when another function starts.. If you don't have them, then you can special handling the plt stubs. If you are really in worst case, at most you will consider some more bb as part of that function...\n> \n> Btw, my algorithm doesn't relay on section info\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly or view it on GitHub https://github.com/radare/radare2/issues/4258#issuecomment-217786997\n","createdAt":"2016-05-09T09:46:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-217821277","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxNzgzNjEwOQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"I know. If you don't have symbols you can detect plt stubs. If neither that is true, well, you are jumping simply somewhere else and there is nothing that can make you say that you are jumping to a different function :) \n","createdAt":"2016-05-09T11:03:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-217836109","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxNzg3NTAyNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"we dont supported functions with shared basic blocks.. so this approach will fuckup the whole thing\n\n> On 09 May 2016, at 13:03, Riccardo Schirone notifications@github.com wrote:\n> \n> I know. If you don't have symbols you can detect plt stubs. If neither that is true, well, you are jumping simply somewhere else and there is nothing that can make you say that you are jumping to a different function :)\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly or view it on GitHub https://github.com/radare/radare2/issues/4258#issuecomment-217836109\n","createdAt":"2016-05-09T14:10:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-217875026","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxNzkwNzk2MA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Yeah there are a lot of things where analysis is not good enough :) It's in the design of the analysis itself. So, just because the analysis currently sucks, it doesn't mean we should continue adding wrong algorithms on top of that\n","createdAt":"2016-05-09T16:01:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-217907960","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxODAxNzQ1MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Feel free to read a2f or write your own analysis loop, ehich can be done in a plugin too\n\n> On 09 May 2016, at 18:01, Riccardo Schirone notifications@github.com wrote:\n> \n> Yeah there are a lot of things where analysis is not good enough :) It's in the design of the analysis itself. So, just because the analysis currently sucks, it doesn't mean we should continue adding wrong algorithms on top of that\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly or view it on GitHub\n","createdAt":"2016-05-09T23:17:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-218017451","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1MjM5MzU1MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can we close this issue?\n","createdAt":"2016-10-08T01:21:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-252393550","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1MzUzMDIwNw==","author":{"login":"codido"},"authorAssociation":"CONTRIBUTOR","body":"@radare Sorry for the delayed response. Running the original example still seems a tad weird:\n\n```\nâ•’ (fcn) sym.foo 7\nâ”‚   sym.foo ();\nâ”‚           ; CALL XREF from 0x08048301 (sym.main)\nâ”‚       â”Œâ”€< 0x08048410      e90b000000     jmp sym.bar\n        â”‚   0x08048415      6690           nop\n```\n","createdAt":"2016-10-13T14:30:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-253530207","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2NjQ5NjQ5Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Moving to 1.2, dont wanna touch the anal much more for next week release. Focusing on stability now.","createdAt":"2016-12-12T17:34:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-266496497","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyNjg0NjI0NQ==","author":{"login":"MaskRay"},"authorAssociation":"CONTRIBUTOR","body":"Off-topic. DWARF 5 defines `DW_AT_call_tail_call`. There are also GNU extensions for tail calls.\r\n\r\nOff-topic. many ideas from DWARF could be incorporated.","createdAt":"2017-09-04T01:23:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-326846245","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1MjQ4MDEzNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"having some binaries and tests to check this will be good","createdAt":"2017-12-18T16:33:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-352480136","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNjE5MDc1Nw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@all please provide a test binaries @sivaramaaa please check this case for detecting variables/arguments.","createdAt":"2018-07-19T08:03:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-406190757","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMTcyMjc1MQ==","author":{"login":"bin2415"},"authorAssociation":"NONE","body":"Hi, It seems that `anal.eobjmp` or `anal.jmp.eobj` is disabled in the new version. Is there any other methods to detect tail call optimization now in radare2?","createdAt":"2020-03-20T14:15:32Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-601722751","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMTc0NTMyMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"tail call optimizations should work fine by default now, if theres any regression please fill an issue and i'll have a look\n\n> On 20 Mar 2020, at 15:15, bin2415 <notifications@github.com> wrote:\n> \n> \n> Hi, It seems that anal.eobjmp or anal.jmp.eobj is disabled on the new version. Is there any other methods to detect tail call optimization now in radare2?\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/4258#issuecomment-601722751>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FXGIAEQDB2ZVE7QRP3RIN3BJANCNFSM4B5NRVWQ>.\n> \n\n","createdAt":"2020-03-20T15:01:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-601745321","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMTc1NDA5Mg==","author":{"login":"bin2415"},"authorAssociation":"NONE","body":"Great!  \r\nRecently, I am learning the algorithm of detecting `tail call optimization`, could you please give any hint about where is the source code to handle `tail call optimization`?\r\n\r\nThanks!","createdAt":"2020-03-20T15:18:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-601754092","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjE5NTI5Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ther'es no formal definition for this and its a bit blurry by definition because it can be confused with obfuscated code so it ends up being a bit difficult to solve in a generic way, you can use metrics like lastr intruction of a function is a jump, but it can be a conditional jump too. and last instruction of a function can be inside the function because there can be more than one tailcall in the same function and this can be a jump forward or backward, so you can use some boundaries to determine this but it is always a bit fuzzy to solve.\n\nthe code is in libr/anal/fcn.c\n\n> On 20 Mar 2020, at 16:19, bin2415 <notifications@github.com> wrote:\n> \n> \n> Great!\n> Recently, I am learning the algorithm of detecting tail call optimization, could you please give any hint about where is the source code to handle tail call optimization?\n> \n> Thanks!\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub <https://github.com/radareorg/radare2/issues/4258#issuecomment-601754092>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAG75FVDIAU54OPLCCR3453RIOCOZANCNFSM4B5NRVWQ>.\n> \n\n","createdAt":"2020-03-22T12:49:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-602195297","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjIwMTYwNg==","author":{"login":"bin2415"},"authorAssociation":"NONE","body":"Great! Thanks! :)","createdAt":"2020-03-22T13:33:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-602201606","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjIyOTMyNQ==","author":{"login":"bin2415"},"authorAssociation":"NONE","body":"Hi, is [this](https://github.com/radareorg/radare2/blob/master/libr/anal/fcn.c#L841) the logic that detecting tail call optimization? If so, could you please give any advice to set the `anal.jmp.tailcall` value?","createdAt":"2020-03-22T15:48:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-602229325","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjIzOTUxOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"<img width=\"875\" alt=\"Screenshot 2020-03-22 at 17 57 02\" src=\"https://user-images.githubusercontent.com/917142/77255286-945fed00-6c66-11ea-9b37-4d299774ed87.png\">\r\n\r\n","createdAt":"2020-03-22T17:00:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-602239518","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYwMjI0MDU2Mg==","author":{"login":"bin2415"},"authorAssociation":"NONE","body":"Yeah, Thanks! \r\nA quick question, is there any advice to set the `anal.jmp.tailcall` value?","createdAt":"2020-03-22T17:07:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-602240562","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY4ODYzMjU2Mw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@trufae @ret2libc @bin2415 should we close this issue? Do we have tests for this feature?","createdAt":"2020-09-08T05:46:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-688632563","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY4ODk4NzE3MQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"We have some tests afaik, but there are a bunch of problems to solve for proper tailcall support. Right now it depends if the tailing function is being analyzed before and also if the distance is bigger than a specific value that is configurable by an eval var. but all those are just random assumptions that must be addressed properly","createdAt":"2020-09-08T16:18:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4258#issuecomment-688987171","viewerDidAuthor":true}],"number":4258,"title":"Handle tail call optimization"},{"body":"Looks like c64 disasm doesnt matches c64 analysis of branch instructions (anal is ok)\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDYyOTg0Njg4Mg==","author":{"login":"gitjeff2"},"authorAssociation":"NONE","body":"I can confirm the observations of @radare with respect to this issue.\r\n\r\nI am conducting disassembly and source code archaeology of a C64 game cartridge just to get a better grasp of 6502 assembly. After some massaging of the disassembly output of *radare2* with vim macros to make it valid input for my assembler &mdash; [64tass](http://tass64.sourceforge.net/) in my case &mdash; it appears that all branch instructions have jump targets that are completely wrong. \r\n\r\nAll of the jump targets are expressed as absolute addresses, which modern cross-development assemblers expect, but the addresses are just wrong.\r\n\r\nEDIT: Some corrections.","createdAt":"2020-05-17T19:19:39Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4174#issuecomment-629846882","viewerDidAuthor":false}],"number":4174,"title":"C64 (6502) jump destinations are wrong"},{"body":"- [x] Generate ELF coredumps on Linux\n- [ ] Generate ELF coredumps on BSD\n- [x] Load ELF coredumps\n- [x] Generate MACH0 coredumps (linux/bsd)\n- [x] Load mach0 coredumps\n- [ ] Support mach0 threads\n- [ ] load region names/filepaths\n\nrelated https://github.com/radare/radare2/issues/152\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDE4OTY3MTE4Nw==","author":{"login":"z03"},"authorAssociation":"NONE","body":"I'm interested to work on this but need to be pointed in the right direction, should the implementation to generate the core dumps depend on gathering information collectively from the os (aka /proc on linux for elf coredumps) in addition to the r2_debug api? or should the os be used to auto generat coredumps through signals such as SIGABRT/SIGHUP etc..? or should the implementation be left up to the backend debugger, for example use \"generate-core-file\" if gdb was specified as a backend? \n","createdAt":"2016-02-27T15:48:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-189671187","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE4OTY3NzM3Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"The implementation of this must follow different approaches, but focusing on a\ngeneric and portable way by default. This is:\n\nif the system provides a generic way to create a core file:\n- add a new callback on debug plugin\n\nif not, just go for the generic way:\n- add api in r_debug, like: r_debug_gcore(RDebug *dbg, const char *newcorefile);\n\nI think its safe to go this way, but maybe we can generate a core file in\nmemory and then\n\nI think windows and linux ( and haikuOS ) provide system primitives to\ngenerate a core file. so this will be implemented in the debug plugin like\nthis: `if (dbg-&gt;h &amp;&amp; dbg-&gt;h-&gt;gcore) return\ndbg-&gt;h-&gt;gcore(dbg, newcorefile);`\n\nafter this, the generic way to generate a core file depends on the file format\nand architecture. so this needs to be implemented for each architecture, and\ndelegeate the format-specific api in RBin.\n\nRight now RBin have support for creating tiny binaries, but this is not enough\nto create a core file. after understanding the needs of the CORE generation we\ncan create a new api in rbin for that, or just extend the current one.\n\nFor iOS, just download http://www.newosxbook.com/files/procexp.tgz?v099 and\ndisassemble the `sym._doCore` function which contains all the code that\niterates over all process segments, registers and creates a handcrafted MACH0\nbinary that holds all that information.\n\nActually r2 is able to dump and restore memory and registers using the\nsnapshots thing, but the dumps are stored in disk in separate files and such,\nnot using that CORE structure.\n\nSome related links:\n\nhttps://people.redhat.com/anderson/extensions/gcore.c  \n\nhttps://docs.oracle.com/cd/E19424-01/820-4814/gegxx/  \n\nhttp://osxbook.com/book/bonus/chapter8/core/\n\nhttp://osxbook.com/book/bonus/chapter8/core/download/gcore-1.3.tar.gz  \n\nOnce we are able to generate core files, it will be great if we can add\nsupport for loading them into r2.\n\n> On Feb 27 2016, at 4:48 pm, z03 &lt;notifications@github.com&gt; wrote:  \n> \n> I'm interested to work on this but need to be pointed in the right\n> direction, should the implementation to generate the core dumps depend on\n> gathering information collectively from the os (aka /proc on linux for elf\n> coredumps) in addition to the r2_debug api? or should the os be used to auto\n> generat coredumps through signals such as SIGABRT/SIGHUP etc..? or should the\n> implementation be left up to the backend debugger, for example use \"generate-\n> core-file\" if gdb was specified as a backend?\n> \n> â€”  \n> Reply to this email directly or [view it on GitHub](https://github.com/radare/\n> radare2/issues/4124#issuecomment-189671187).![](https://github.com/notificatio\n> ns/beacon/AA3-lpcPktW5aFoQo23hTuKpdxIGtfaRks5pobzOgaJpZM4Hc_qU.gif)\n","createdAt":"2016-02-27T16:20:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-189677376","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE5NzM4MzM5Mg==","author":{"login":"0xddom"},"authorAssociation":"CONTRIBUTOR","body":"I was reading this links\n\n> http://osxbook.com/book/bonus/chapter8/core/ \n> http://osxbook.com/book/bonus/chapter8/core/download/gcore-1.3.tar.gz\n\nAnd the code for generating the core files in OSX needs superuser privileges. Does the debug plugin has those privileges? I have never written a debugger before, so I can't tell for sure.\n","createdAt":"2016-03-16T15:29:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-197383392","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE5NzQ1OTA2OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"you need the same permissions than for debugging, aka signing the binary or be root on osx, or add entitlements and be root on ios\n\n> On 16 Mar 2016, at 16:29, Kur0 notifications@github.com wrote:\n> \n> I was reading this links\n> \n> http://osxbook.com/book/bonus/chapter8/core/ http://osxbook.com/book/bonus/chapter8/core/ \n> http://osxbook.com/book/bonus/chapter8/core/download/gcore-1.3.tar.gz http://osxbook.com/book/bonus/chapter8/core/download/gcore-1.3.tar.gz\n> And the code for generating the core files in OSX needs superuser privileges. Does the debug plugin has those privileges? I have never written a debugger before, so I can't tell for sure.\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub https://github.com/radare/radare2/issues/4124#issuecomment-197383392\n","createdAt":"2016-03-16T17:58:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-197459069","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE5ODc3NzYxMw==","author":{"login":"0xddom"},"authorAssociation":"CONTRIBUTOR","body":"A function for generating the core for mach0 binaries\n\n> host_get_host_priv_port (host_name_port_t host, host_priv_t host_priv)\n\nonly works if it's run with sudo privileges, even if the binary is signed.\n\nShould I add a check for superuser privileges and refuse to run in case of not superuser? I don't know what's the prefered way to handle this situations.\n\nI'm using El Capitan, maybe in older versions of OSX this function doesn't require superuser privileges. I don't know that either.\n","createdAt":"2016-03-19T20:01:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-198777613","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE5OTA3Mjc2OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"The important part is to make it work. Being root or not is something that can be solved later, and i dont get why do you need to use that api\n\n> On 19 Mar 2016, at 21:01, Kur0 notifications@github.com wrote:\n> \n> A function for generating the core for mach0 binaries\n> \n> host_get_host_priv_port (host_name_port_t host, host_priv_t host_priv)\n> only works if it's run with sudo privileges, even if the binary is signed.\n> \n> Should I add a check for superuser privileges and refuse to run in case of not superuser? I don't know what's the prefered way to handle this situations.\n> \n> I'm using El Capitan, maybe in older versions of OSX this function doesn't require superuser privileges.\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub\n","createdAt":"2016-03-21T00:58:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-199072768","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE5OTIxNzAzNg==","author":{"login":"0xddom"},"authorAssociation":"CONTRIBUTOR","body":"The header of the corefile (acording to http://osxbook.com/book/bonus/chapter8/core/) needs the cpu type and subtype. To obtain that info the function is needed.\n\nI could be wrong, but that's the conclusion I reach.\n","createdAt":"2016-03-21T10:30:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-199217036","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE5OTIxODM0Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"you can get this info by parsing the header in memory, to create the core file you just need to read memory and enumerate the maps which is already done.\n\n> On 21 Mar 2016, at 11:30, Kur0 notifications@github.com wrote:\n> \n> The header of the corefile (acording to http://osxbook.com/book/bonus/chapter8/core/ http://osxbook.com/book/bonus/chapter8/core/) needs the cpu type and subtype. To obtain that info the function is needed.\n> \n> I could be wrong, but that's the conclusion I reach.\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub https://github.com/radare/radare2/issues/4124#issuecomment-199217036\n","createdAt":"2016-03-21T10:32:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-199218342","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIwNTc1MjE0Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Support for mach0 is working (lacks thread support), so, let's move this issue for 0.10.3 and cleanup a bit to clarify whats missing..\n","createdAt":"2016-04-05T10:42:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-205752146","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIwOTAyNjcyMA==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"I'm working on \"Generate ELF coredumps on Linux/BSD\", hope to have something useful next week\n","createdAt":"2016-04-12T17:49:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-209026720","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIwOTA3NzcwOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Awesome! Looking forward your pr\n\n> On 12 Apr 2016, at 19:49, leberus notifications@github.com wrote:\n> \n> I'm working on \"Generate ELF coredumps on Linux/BSD\", hope to have something useful next week\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub\n","createdAt":"2016-04-12T19:54:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-209077709","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxMjUwMDA3NQ==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"Hi! I was quite busy this week, so I couldn't go much further, but I started to do some things:\n\nhttps://github.com/leberus/radare2/commit/037dd7240f4750c5e77644ae4b42a53d7005e4c5\n\nIt's still incomplete, but I hope the next days to do a long jump ;)\n","createdAt":"2016-04-20T16:23:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-212500075","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxMjUwOTk2NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Cool!\n\n> On 20 Apr 2016, at 18:23, leberus notifications@github.com wrote:\n> \n> Hi! I was quite busy this week, so I couldn't go much further, but I started to do some things:\n> \n> leberus@037dd72\n> \n> It's still incomplete, but I hope the next days to do a long jump ;)\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub\n","createdAt":"2016-04-20T16:48:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-212509964","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxNDgyNDI3OA==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"I'm still moving forward! I'm able to dump all the load sections(without\nthe content) together with the notes. I'm still missing the content,\nsupport for threads(that can be easily solved) and some checks to see if\nthe machine is x86 or x86_64, but I think that things are getting better\nand better. I hope have something to show before monday.\n\n2016-04-20 18:48 GMT+02:00 radare notifications@github.com:\n\n> Cool!\n> \n> > On 20 Apr 2016, at 18:23, leberus notifications@github.com wrote:\n> > \n> > Hi! I was quite busy this week, so I couldn't go much further, but I\n> > started to do some things:\n> > \n> > leberus@037dd72\n> > \n> > It's still incomplete, but I hope the next days to do a long jump ;)\n> > \n> > â€”\n> > You are receiving this because you authored the thread.\n> > Reply to this email directly or view it on GitHub\n> \n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly or view it on GitHub\n> https://github.com/radare/radare2/issues/4124#issuecomment-212509964\n","createdAt":"2016-04-26T17:43:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-214824278","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxNDg2MTMwOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"awesome! :D\n\n> On 26 Apr 2016, at 19:43, leberus notifications@github.com wrote:\n> \n> I'm still moving forward! I'm able to dump all the load sections(without\n> the content) together with the notes. I'm still missing the content,\n> support for threads(that can be easily solved) and some checks to see if\n> the machine is x86 or x86_64, but I think that things are getting better\n> and better. I hope have something to show before monday.\n> \n> 2016-04-20 18:48 GMT+02:00 radare notifications@github.com:\n> \n> > Cool!\n> > \n> > > On 20 Apr 2016, at 18:23, leberus notifications@github.com wrote:\n> > > \n> > > Hi! I was quite busy this week, so I couldn't go much further, but I\n> > > started to do some things:\n> > > \n> > > leberus@037dd72\n> > > \n> > > It's still incomplete, but I hope the next days to do a long jump ;)\n> > > \n> > > â€”\n> > > You are receiving this because you authored the thread.\n> > > Reply to this email directly or view it on GitHub\n> > \n> > â€”\n> > You are receiving this because you commented.\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/radare/radare2/issues/4124#issuecomment-212509964\n> > \n> > â€”\n> > You are receiving this because you authored the thread.\n> > Reply to this email directly or view it on GitHub https://github.com/radare/radare2/issues/4124#issuecomment-214824278\n","createdAt":"2016-04-26T19:35:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-214861309","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxODAxMzg4MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@leberus ping\n","createdAt":"2016-05-09T22:55:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-218013881","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxODI1MjQ1Mw==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"I did a pull request. I wrote there what is still missing too. I was half of the last week on holidays so I didn't have so much time. \nI'll continue to add what is missing from tomorrow on ;)\n","createdAt":"2016-05-10T18:46:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-218252453","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxODMwNTg4NQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Awesome !\n","createdAt":"2016-05-10T22:04:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-218305885","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIyMDc5Mzc1Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"code is merged, need to port to BSD and add support for threads\n","createdAt":"2016-05-21T18:40:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-220793752","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIyMDg0OTYzMA==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"Please see my comment: https://github.com/radare/radare2/issues/152#issuecomment-220783252\n","createdAt":"2016-05-22T19:02:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-220849630","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIyMDkzMDYzOA==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"I'm not sure if it's worth or not, but here https://github.com/radare/radare2/commit/876f3fd54727cf2e98ffadd1ab156e95928e6ae7 says that can dump Elf Header and Program header. Maybe would be also nice to put that it can dump the maps too? So, it's more or less a complete corefile (without thread support), and without X86STATE NOTE.\n","createdAt":"2016-05-23T09:26:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-220930638","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIyMDkzMjUyOA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"yeah why not\n\n> On 23 May 2016, at 11:26, leberus notifications@github.com wrote:\n> \n> I'm not sure if it's worth or not, but here 876f3fd https://github.com/radare/radare2/commit/876f3fd54727cf2e98ffadd1ab156e95928e6ae7 says that can dump Elf Header and Program header. Maybe would be also nice to put that it can dump the maps too? So, it's more or less a complete corefile (without thread support), and without X86STATE NOTE.\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub https://github.com/radare/radare2/issues/4124#issuecomment-220930638\n","createdAt":"2016-05-23T09:34:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-220932528","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIyMDk1MDc4OQ==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"Maybe you could change it later. It's just that I think that this\ndescription would fit a little bit better ;)\n\n2016-05-23 11:34 GMT+02:00 radare notifications@github.com:\n\n> yeah why not\n> \n> > On 23 May 2016, at 11:26, leberus notifications@github.com wrote:\n> > \n> > I'm not sure if it's worth or not, but here 876f3fd <\n> > https://github.com/radare/radare2/commit/876f3fd54727cf2e98ffadd1ab156e95928e6ae7>\n> > says that can dump Elf Header and Program header. Maybe would be also nice\n> > to put that it can dump the maps too? So, it's more or less a complete\n> > corefile (without thread support), and without X86STATE NOTE.\n> > \n> > â€”\n> > You are receiving this because you authored the thread.\n> > Reply to this email directly or view it on GitHub <\n> > https://github.com/radare/radare2/issues/4124#issuecomment-220930638>\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/radare/radare2/issues/4124#issuecomment-220932528\n","createdAt":"2016-05-23T11:05:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-220950789","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIyMDk1NTU2Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"send a pr\n","createdAt":"2016-05-23T11:31:38Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-220955562","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIyMTE4NzEwNg==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"I could handle to get some time this week, so my plan is to add thread support from now on. I'll take the advantage of that and on the way I'll clean up the code a little bit (debug stuff which is not longer needed, improve some functions and so son, i'd like to reduce the code as much as possible).\nI'll come back once I have something.\n","createdAt":"2016-05-24T07:23:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-221187106","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzOTg5NTUyMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping @leberus any will to continue working on this?\n","createdAt":"2016-08-15T19:02:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-239895523","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzOTkxNDY2OQ==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"Yep! Sorry for the lateness. I started today porting the code to ARM,\nactually it's almost done. The only thing left is compile it and try it.\nOnce this is done i'll do a PR. Tomorrow should be working (unless I find a\nspooky thing)\n\nEl dia 15/08/2016 21:02, \"radare\" notifications@github.com va escriure:\n\n> ping @leberus https://github.com/leberus any will to continue working\n> on this?\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/radare/radare2/issues/4124#issuecomment-239895523,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/AH3YFeaOkhgYcOaPFQDsYQZfwDu31qjTks5qgLe8gaJpZM4Hc_qU\n> .\n","createdAt":"2016-08-15T20:12:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-239914669","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MDA0Nzg0MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Awesome, thats probably a bit late for 0.10.5, but will fit perfectly in the next release with time for review and such.\n\nthatâ€™s great to hear that :)\n\nthanks, looking forward your PR!\n\n> On 15 Aug 2016, at 22:12, leberus notifications@github.com wrote:\n> \n> Yep! Sorry for the lateness. I started today porting the code to ARM,\n> actually it's almost done. The only thing left is compile it and try it.\n> Once this is done i'll do a PR. Tomorrow should be working (unless I find a\n> spooky thing)\n> \n> El dia 15/08/2016 21:02, \"radare\" notifications@github.com va escriure:\n> \n> > ping @leberus https://github.com/leberus any will to continue working\n> > on this?\n> > \n> > â€”\n> > You are receiving this because you were mentioned.\n> > Reply to this email directly, view it on GitHub\n> > https://github.com/radare/radare2/issues/4124#issuecomment-239895523,\n> > or mute the thread\n> > https://github.com/notifications/unsubscribe-auth/AH3YFeaOkhgYcOaPFQDsYQZfwDu31qjTks5qgLe8gaJpZM4Hc_qU\n> > .\n> > \n> > â€”\n> > You are receiving this because you authored the thread.\n> > Reply to this email directly, view it on GitHub https://github.com/radare/radare2/issues/4124#issuecomment-239914669, or mute the thread https://github.com/notifications/unsubscribe-auth/AA3-lhR_Y83eQyNZawuzDH4k5X51Rh9pks5qgMgvgaJpZM4Hc_qU.\n","createdAt":"2016-08-16T09:10:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-240047841","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MDEwODA1MQ==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"Hi :)\n\nSo far seems to work. The only thing I don't like is that every map is being dumped because /proc/[pid]/smaps on ARM platform doesn't provide VmFlags field, so I need to add another way to check if a map should be dumped or not.\n\nOnce this is done, I'll be ready for the PR :D\n\n```\noski@bananapi:~/lab$ readelf -n corearm\n\nDisplaying notes found at file offset 0x000001f4 with length 0x000005dc:\n  Owner                 Data size   Description\n  CORE                 0x0000007c   NT_PRPSINFO (prpsinfo structure)\n  CORE                 0x00000094   NT_PRSTATUS (prstatus structure)\n  CORE                 0x00000074   NT_FPREGSET (floating point registers)\n  CORE                 0x00000080   NT_SIGINFO (siginfo_t data)\n  LINUX                0x00000104   NT_ARM_VFP (arm VFP registers)\n  CORE                 0x00000090   NT_AUXV (auxiliary vector)\n  CORE                 0x000001b6   NT_FILE (mapped files)\n    Page size: 1\n         Start         End Page Offset\n    0x00010000  0x00011000  0x00000000\n        /home/oski/lab/test\n    0x00020000  0x00021000  0x00000000\n        /home/oski/lab/test\n    0xb6ebd000  0xb6f98000  0x00000000\n        /lib/arm-linux-gnueabihf/libc-2.19.so\n    0xb6f98000  0xb6fa7000  0x000db000\n        /lib/arm-linux-gnueabihf/libc-2.19.so\n    0xb6fa7000  0xb6fa9000  0x000da000\n        /lib/arm-linux-gnueabihf/libc-2.19.so\n    0xb6fa9000  0xb6faa000  0x000dc000\n        /lib/arm-linux-gnueabihf/libc-2.19.so\n    0xb6fad000  0xb6fc4000  0x00000000\n        /lib/arm-linux-gnueabihf/ld-2.19.so\n    0xb6fd4000  0xb6fd5000  0x00017000\n        /lib/arm-linux-gnueabihf/ld-2.19.so\n    0xb6fd5000  0xb6fd6000  0x00018000\n        /lib/arm-linux-gnueabihf/ld-2.19.so\noski@bananapi:~/lab$ readelf -h corearm\nELF Header:\n  Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 \n  Class:                             ELF32\n  Data:                              2's complement, little endian\n  Version:                           1 (current)\n  OS/ABI:                            UNIX - System V\n  ABI Version:                       0\n  Type:                              CORE (Core file)\n  Machine:                           ARM\n  Version:                           0x1\n  Entry point address:               0x0\n  Start of program headers:          52 (bytes into file)\n  Start of section headers:          0 (bytes into file)\n  Flags:                             0x0\n  Size of this header:               52 (bytes)\n  Size of program headers:           32 (bytes)\n  Number of program headers:         14\n  Size of section headers:           0 (bytes)\n  Number of section headers:         0\n  Section header string table index: 0\noski@bananapi:~/lab$\n```\n","createdAt":"2016-08-16T13:52:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-240108051","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MDEwODQ2OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"yay :D that looks good!\n\ngood luck finding those vmflags :)\n\n> On 16 Aug 2016, at 15:52, leberus notifications@github.com wrote:\n> \n> Hi :)\n> \n> So far seems to work. The only thing I don't like is that every map is being dumped because /proc/[pid]/smaps on ARM platform doesn't provide VmFlags field, so I need to add another way to check if a map should be dumped or not.\n> \n> Once this is done, I'll be ready for the PR :D\n> \n> oski@bananapi:~/lab$ readelf -n corearm\n> \n> Displaying notes found at file offset 0x000001f4 with length 0x000005dc:\n>   Owner                 Data size   Description\n>   CORE                 0x0000007c   NT_PRPSINFO (prpsinfo structure)\n>   CORE                 0x00000094   NT_PRSTATUS (prstatus structure)\n>   CORE                 0x00000074   NT_FPREGSET (floating point registers)\n>   CORE                 0x00000080   NT_SIGINFO (siginfo_t data)\n>   LINUX                0x00000104   NT_ARM_VFP (arm VFP registers)\n>   CORE                 0x00000090   NT_AUXV (auxiliary vector)\n>   CORE                 0x000001b6   NT_FILE (mapped files)\n>     Page size: 1\n>          Start         End Page Offset\n>     0x00010000  0x00011000  0x00000000\n>         /home/oski/lab/test\n>     0x00020000  0x00021000  0x00000000\n>         /home/oski/lab/test\n>     0xb6ebd000  0xb6f98000  0x00000000\n>         /lib/arm-linux-gnueabihf/libc-2.19.so\n>     0xb6f98000  0xb6fa7000  0x000db000\n>         /lib/arm-linux-gnueabihf/libc-2.19.so\n>     0xb6fa7000  0xb6fa9000  0x000da000\n>         /lib/arm-linux-gnueabihf/libc-2.19.so\n>     0xb6fa9000  0xb6faa000  0x000dc000\n>         /lib/arm-linux-gnueabihf/libc-2.19.so\n>     0xb6fad000  0xb6fc4000  0x00000000\n>         /lib/arm-linux-gnueabihf/ld-2.19.so\n>     0xb6fd4000  0xb6fd5000  0x00017000\n>         /lib/arm-linux-gnueabihf/ld-2.19.so\n>     0xb6fd5000  0xb6fd6000  0x00018000\n>         /lib/arm-linux-gnueabihf/ld-2.19.so\n> oski@bananapi:~/lab$ readelf -h corearm\n> ELF Header:\n>   Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 \n>   Class:                             ELF32\n>   Data:                              2's complement, little endian\n>   Version:                           1 (current)\n>   OS/ABI:                            UNIX - System V\n>   ABI Version:                       0\n>   Type:                              CORE (Core file)\n>   Machine:                           ARM\n>   Version:                           0x1\n>   Entry point address:               0x0\n>   Start of program headers:          52 (bytes into file)\n>   Start of section headers:          0 (bytes into file)\n>   Flags:                             0x0\n>   Size of this header:               52 (bytes)\n>   Size of program headers:           32 (bytes)\n>   Number of program headers:         14\n>   Size of section headers:           0 (bytes)\n>   Number of section headers:         0\n>   Section header string table index: 0\n> oski@bananapi:~/lab$\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub https://github.com/radare/radare2/issues/4124#issuecomment-240108051, or mute the thread https://github.com/notifications/unsubscribe-auth/AA3-lsqmaAL4qSHsjJjVNDjxsJSfx1ADks5qgcCbgaJpZM4Hc_qU.\n","createdAt":"2016-08-16T13:53:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-240108469","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MDM2ODY0Mw==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"I think it's ready for the PR. I will push my code and compile it and try it with my i386 and x86_64 to see that my changes didn't break anything.\n\nThen I'll go ahead and do the PR.\n\nPD: I've added a fix-up for issue #5540 because the commit there wouldn't be useful.\n","createdAt":"2016-08-17T10:02:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-240368643","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MDM3NzQ5NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cool! looking forward to review that pr\n","createdAt":"2016-08-17T10:48:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-240377495","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MDY0NDI2OA==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"So, finally here it is: https://github.com/radare/radare2/pull/5549 ;)\n\n2016-08-17 12:48 GMT+02:00 radare notifications@github.com:\n\n> cool! looking forward to review that pr\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/radare/radare2/issues/4124#issuecomment-240377495,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/AH3YFYjlJjEQQNNNrul_izy4SuHnsp0Yks5qgubugaJpZM4Hc_qU\n> .\n","createdAt":"2016-08-18T07:22:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-240644268","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MDY2MjM1MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Yay :) merged because it looks good and doesnt breaks anything. Just some questions:\n- will this work on android?\n- an arm64 build can dump an arm process?\n- this is elf/linux specific. Mach0/ios will be also great to have\n\nThanks!\n\n> On 18 Aug 2016, at 09:22, leberus notifications@github.com wrote:\n> \n> So, finally here it is: https://github.com/radare/radare2/pull/5549 ;)\n> \n> 2016-08-17 12:48 GMT+02:00 radare notifications@github.com:\n> \n> > cool! looking forward to review that pr\n> > \n> > â€”\n> > You are receiving this because you were mentioned.\n> > Reply to this email directly, view it on GitHub\n> > https://github.com/radare/radare2/issues/4124#issuecomment-240377495,\n> > or mute the thread\n> > https://github.com/notifications/unsubscribe-auth/AH3YFYjlJjEQQNNNrul_izy4SuHnsp0Yks5qgubugaJpZM4Hc_qU\n> > .\n> > \n> > â€”\n> > You are receiving this because you authored the thread.\n> > Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2016-08-18T08:49:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-240662351","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MDc1Nzg3MA==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":" Hey!\n- will this work on android?\n- I don't really know. It should, but I can't say for sure since android sometimes does the things in another way. Anyway I'll try it on my phone and I'll let you know. If not, I'll try to fix it.\n- an arm64 build can dump an arm process?\n- If you're asking if this is gonna work on arm64 systems, then yes, it should. Unfortunately I don't have such board, so I don't have any chance to try it.\n  But maybe in some weeks I have to chance to get an arm64 board.\n- this is elf/linux specific. Mach0/ios will be also great to have\n- I could give it a try, despite of I've never touched an ios system. \n\nI'm not sure if this is the place or not, but I'd like to talk about http://radare.org/gsoc/2016/ideas.html#title_10\n\nIt'd be of my interest, and I'd like to give it a try :)\n","createdAt":"2016-08-18T15:21:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-240757870","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MDc1ODk4MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@leberus come to telegram/irc and one of our RSoC students working on this task, so you both can cooperate: http://radare.today/posts/RSoC%202016%20progress/\n","createdAt":"2016-08-18T15:25:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-240758981","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MDc2MTA5Ng==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"@XVilka I'm not a student, may I work on it anyway? I'm already on irc. Should I talk with Rakholia Jenish directly? or do you have a procotol for this?\n\nThanks in advance\n","createdAt":"2016-08-18T15:31:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-240761096","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MDc2NDgxNQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@leberus we don't have a special protocol for that :) Of course you can talk to him directly. We have a dedicated group in telegram for this project though.\n","createdAt":"2016-08-18T15:42:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-240764815","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MDc2NTEyMQ==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"@XVilka  ah ok, then I'll try to join it! (soz, was a misunderstood)\n","createdAt":"2016-08-18T15:43:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-240765121","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MDc3MzYzNg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@leberus ping us in #radare telegram channel and someone will invite you into this radare2-kernel chat.\n","createdAt":"2016-08-18T16:10:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-240773636","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MDk2MTU1NA==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"Hi @XVilka I've pinged @pancake in #radare telegram channel because I didn't find you\n","createdAt":"2016-08-19T08:39:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-240961554","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MDk4NjgxNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"how do you ping? i got nothing :P anyway, im there\n\n> On 19 Aug 2016, at 10:39, leberus notifications@github.com wrote:\n> \n> Hi @XVilka https://github.com/XVilka I've pinged @pancake https://github.com/pancake in #radare telegram channel because I didn't find you\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub https://github.com/radare/radare2/issues/4124#issuecomment-240961554, or mute the thread https://github.com/notifications/unsubscribe-auth/AA3-lpB051hw7vV7K-2Q24E2NUp7u9oGks5qhWvGgaJpZM4Hc_qU.\n","createdAt":"2016-08-19T10:43:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-240986817","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1MjM5MzQ5Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"status of pendings ticks to be done here? any wip development?\n","createdAt":"2016-10-08T01:21:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-252393497","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1NzczNDA4Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping\n","createdAt":"2016-11-01T23:54:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-257734082","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2NzAxNjIzOA==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"after Christmas I'll try to make it work on BSD (got no time now)","createdAt":"2016-12-14T11:56:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-267016238","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2NzAxNzEwMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cool!\n> On 14 Dec 2016, at 12:56, leberus <notifications@github.com> wrote:\n> \n> after Christmas I'll try to make it work on BSD (got no time now)\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/4124#issuecomment-267016238>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-ljrs28tm2CsFwxfjyYo2gtR8eon9ks5rH9mDgaJpZM4Hc_qU>.\n> \n\n","createdAt":"2016-12-14T12:01:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-267017100","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM4Nzg4MTc2Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@leberus can you update the issue with the current state of the things?","createdAt":"2018-05-09T21:31:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-387881762","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUyMjkxMQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T04:24:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/4124#issuecomment-644522911","viewerDidAuthor":false}],"number":4124,"title":"Add command to generate coredump in MACH0 or ELF"},{"body":"Check out this log:\n\n```\n[0x7f0c3b34fcd0]> =h\nStarting http server...\nopen http://localhost:9090/\nr2 -C http://localhost:9090/cmd/\n[HTTP] 127.0.0.1:58752 /cmd/db%20main\n[HTTP] 127.0.0.1:58754 /cmd/dc;dcr\nhit breakpoint at: 400536\nDebugging pid = 25437, tid = 1 now\nTest...\nhit breakpoint at: 400544\n[HTTP] 127.0.0.1:58756 /cmd/do\nWait event received by different pid 25437\nProcess with PID 25443 started...\nFile dbg://./a.out reopened in read-write mode\nDebugging pid = 25443, tid = 25443 now\nAssuming filepath ./a.out\nAttached debugger to pid = 25443, tid = 25443\n[HTTP] 127.0.0.1:58758 /cmd/dc;dcr\nhit breakpoint at: 400536\nDebugging pid = 25443, tid = 1 now\nhit breakpoint at: 400544\n```\n\nThe debugged binary was just `puts(\"Test...\")` in main - so it should print it. In the first time, continuing until return from main did it, but when later I issued `do` (reopen binary) and requested same commands, no string was printed. This happens only in HTTP mode - this is equivalent log from radare2 usual console:\n\n```\n[0x7fef51610cd0]> db main\n[0x7fef51610cd0]> dc; dcr\nhit breakpoint at: 400536\nDebugging pid = 25495, tid = 1 now\nTest...\nhit breakpoint at: 400544\n[0x00400536]> do\nWait event received by different pid 25495\nProcess with PID 25496 started...\nFile dbg://./a.out reopened in read-write mode\nDebugging pid = 25496, tid = 25496 now\nAssuming filepath ./a.out\nAttached debugger to pid = 25496, tid = 25496\n[0x7f604f4becd0]> dc;dcr\nhit breakpoint at: 400536\nDebugging pid = 25496, tid = 1 now\nTest...\nhit breakpoint at: 400544\n```\n\nAs expected, \"Test...\" is printed twice, one time for each instance of binary ran.\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDE3MjgyOTQ2Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"confirmed. i can reproduce this issue\n\n> On 14 Jan 2016, at 21:02, akrasuski1 notifications@github.com wrote:\n> \n> Check out this log:\n> \n> [0x7f0c3b34fcd0]> =h\n> Starting http server...\n> open http://localhost:9090/\n> r2 -C http://localhost:9090/cmd/\n> [HTTP] 127.0.0.1:58752 /cmd/db%20main\n> [HTTP] 127.0.0.1:58754 /cmd/dc;dcr\n> hit breakpoint at: 400536\n> Debugging pid = 25437, tid = 1 now\n> Test...\n> hit breakpoint at: 400544\n> [HTTP] 127.0.0.1:58756 /cmd/do\n> Wait event received by different pid 25437\n> Process with PID 25443 started...\n> File dbg://./a.out reopened in read-write mode\n> Debugging pid = 25443, tid = 25443 now\n> Assuming filepath ./a.out\n> Attached debugger to pid = 25443, tid = 25443\n> [HTTP] 127.0.0.1:58758 /cmd/dc;dcr\n> hit breakpoint at: 400536\n> Debugging pid = 25443, tid = 1 now\n> hit breakpoint at: 400544\n> The debugged binary was just puts(\"Test...\") in main - so it should print it. In the first time, continuing until return from main did it, but when later I issued do (reopen binary) and requested same commands, no string was printed. This happens only in HTTP mode - this is equivalent log from radare2 usual console:\n> \n> [0x7fef51610cd0]> db main\n> [0x7fef51610cd0]> dc; dcr\n> hit breakpoint at: 400536\n> Debugging pid = 25495, tid = 1 now\n> Test...\n> hit breakpoint at: 400544\n> [0x00400536]> do\n> Wait event received by different pid 25495\n> Process with PID 25496 started...\n> File dbg://./a.out reopened in read-write mode\n> Debugging pid = 25496, tid = 25496 now\n> Assuming filepath ./a.out\n> Attached debugger to pid = 25496, tid = 25496\n> [0x7f604f4becd0]> dc;dcr\n> hit breakpoint at: 400536\n> Debugging pid = 25496, tid = 1 now\n> Test...\n> hit breakpoint at: 400544\n> As expected, \"Test...\" is printed twice, one time for each instance of binary ran.\n> \n> â€”\n> Reply to this email directly or view it on GitHub https://github.com/radare/radare2/issues/3956.\n","createdAt":"2016-01-19T11:59:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3956#issuecomment-172829466","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU3NzY0MQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T07:11:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3956#issuecomment-644577641","viewerDidAuthor":false}],"number":3956,"title":"Reopening binary using \"do\" via HTTP makes binary stdout lost."},{"body":"Not just the first one where the function starts\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI1Nzc1MzY5Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"we need a testcase for this . @Maijin ?\n","createdAt":"2016-11-02T02:14:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3942#issuecomment-257753697","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI3Mjc0NTQwNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@rlaemmert wanna check this issue?","createdAt":"2017-01-15T23:05:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3942#issuecomment-272745407","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwNDIzNTAzNw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"we need more time to do this properly, but may fit inside the aab optimizations i think","createdAt":"2017-05-26T09:22:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3942#issuecomment-304235037","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxMzg4OTExMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping","createdAt":"2017-07-09T00:22:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3942#issuecomment-313889111","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1MjQ4MzAxNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"\r\n[a.zip](https://github.com/radare/radare2/files/1568764/a.zip)\r\n\r\n\r\n<img width=\"719\" alt=\"screen shot 2017-12-18 at 17 38 39\" src=\"https://user-images.githubusercontent.com/917142/34117060-c41f4dd2-e41a-11e7-9d1c-f6bf9ab26040.png\">\r\n<img width=\"693\" alt=\"screen shot 2017-12-18 at 17 39 27\" src=\"https://user-images.githubusercontent.com/917142/34117061-c45c9b88-e41a-11e7-9321-392e384f7c64.png\">\r\n\r\n","createdAt":"2017-12-18T16:42:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3942#issuecomment-352483016","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1MjQ4MzY1MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@rlaemmert not sure if aab honors this var","createdAt":"2017-12-18T16:44:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3942#issuecomment-352483651","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3OTU0NDE1OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping @rlaemmert ","createdAt":"2018-04-08T11:49:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3942#issuecomment-379544158","viewerDidAuthor":false}],"number":3942,"title":"anal.nopskip should also skip nops in basic blocks"},{"body":"Normally, when we create a HTTP server using `=h` command, GET requests to `/cmd/stuff` should contain radare2's stdout response to `stuff`. However, _sometimes_, the output of that command is put into the console, instead of sent as a response. This has bad implications to some web applications - even a single malformed response may crash them.\n\nI can't create a reproducible scenario - it seems to happen randomly, maybe once in a several hundred requests. Here is an example of what I mean: http://pastebin.com/C4NTVr59. As you can see, one of the requests, `drj`, had its output printed to console.\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDE3MDQwMjg1NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Yep some commands are constructed by multiple calls of commands. This requires a console buffer push or a rewrite of the specific function to use the api instead of commands internally.\n\nI'll investigate on this. Please report other commands that behave like this if you find them\n\nThanks\n\n> On 10 Jan 2016, at 20:38, akrasuski1 notifications@github.com wrote:\n> \n> Normally, when we create a HTTP server using =h command, GET requests to /cmd/stuff should contain radare2's stdout response to stuff. However, sometimes, the output of that command is put into the console, instead of sent as a response.\n> I can't create a reproducible scenario - it seems to happen randomly, maybe once in a several hundred requests. Here is an example of what I mean: http://pastebin.com/C4NTVr59. As you can see, one of the requests, drj, had its output printed to console.\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n","createdAt":"2016-01-10T22:49:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3940#issuecomment-170402855","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE3MTU3MTU1NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Would be good to have a reproducer that make it happen 100% of the times.\n\n> On 10 Jan 2016, at 20:38, akrasuski1 notifications@github.com wrote:\n> \n> Normally, when we create a HTTP server using =h command, GET requests to /cmd/stuff should contain radare2's stdout response to stuff. However, sometimes, the output of that command is put into the console, instead of sent as a response.\n> I can't create a reproducible scenario - it seems to happen randomly, maybe once in a several hundred requests. Here is an example of what I mean: http://pastebin.com/C4NTVr59. As you can see, one of the requests, drj, had its output printed to console.\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n","createdAt":"2016-01-14T08:33:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3940#issuecomment-171571554","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU3NzcxNw==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T07:11:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3940#issuecomment-644577717","viewerDidAuthor":false}],"number":3940,"title":"HTTP command output in terminal."},{"body":"Tool to extract bitcode from mach0 binaries: https://github.com/AlexDenisov/bitcode_retriever\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDE5OTg5MDM0NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"This library can be reused https://github.com/andoma/vmir\n","createdAt":"2016-03-22T16:27:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3896#issuecomment-199890345","viewerDidAuthor":false}],"number":3896,"title":"Add support for LLVM bitcode (stored in Mach-O files along with native binary)"},{"body":"BinNavi was open-sourced recently. We should have a flag for radare2 to output a format compatible with the BinNavi format. Even though BinExport is not open sourced, there are multiple public implementations showing how to create the sql queries needed to load disassembly into the BinNavi DB, which is then converted to REIL internally for select architectures. Since radare2 has support for converting from ESIL to REIL (https://github.com/radare/radare2/commit/1d89f7d7996e67ea9275fc1318aeb9390def27cc) we could probably rework BinNavi later to also take REIL directly from radare2 instead of doing translation by its self. This would allow more architectures to be supported than the 3 architectures supported by BinNavi right now. \n\nI think first step would be to just replicate some of the known implementations (https://github.com/google/binnavi/issues/28) of disassembly -> BinNavi import and then working on replacing REIL import with radare2 can be step 2.\n\nP.S: Can maybe win conference tickets :)\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDE2Njk1OTAyMQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"+1 this was already discussed the day binnavi was opensauced. i just can't focus on this task right now, feel free to take it\n","createdAt":"2015-12-23T17:58:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3873#issuecomment-166959021","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE2NzQzNzMxNQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"@manizzle see https://github.com/radare/radare2-bindings/tree/master/r2pipe/java\n","createdAt":"2015-12-27T19:30:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3873#issuecomment-167437315","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE3NDk3NzY2Ng==","author":{"login":"dukebarman"},"authorAssociation":"CONTRIBUTOR","body":":+1: It will be a great!\n","createdAt":"2016-01-26T12:17:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3873#issuecomment-174977666","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE4NTY0ODA2MA==","author":{"login":"jvoisin"},"authorAssociation":"CONTRIBUTOR","body":"I think that crowell had a PoC in ruby for this.\n","createdAt":"2016-02-18T10:42:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3873#issuecomment-185648060","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIyMzgxNjU2NA==","author":{"login":"Manouchehri"},"authorAssociation":"CONTRIBUTOR","body":"Google recently open sourced their exporter plugin too.\n\nhttps://github.com/google/binexport\n","createdAt":"2016-06-05T14:36:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3873#issuecomment-223816564","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzMjgzMzA1Ng==","author":{"login":"bzz"},"authorAssociation":"NONE","body":"Would be great to be able to load radare2 disassembly to BinNavi. Do you guys know if there are there any updates on this beside https://github.com/google/binnavi/wiki/Replacing-IDA-as-Disassembler-Frontend ?\n","createdAt":"2016-07-15T00:51:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3873#issuecomment-232833056","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzMjgzNDQwNw==","author":{"login":"manizzle"},"authorAssociation":"NONE","body":"I wanted to work on this but I had a problem with creating the IL for BinNavi due to this issue.\nhttps://github.com/radare/radare2/issues/4456\n\nAny here on this thread have a solution to this? I could use capstone along side r2 but it seems hacky\n","createdAt":"2016-07-15T01:01:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3873#issuecomment-232834407","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzMjg0ODc1Mw==","author":{"login":"manizzle"},"authorAssociation":"NONE","body":"@Manouchehri I sent you a DM on Twitter. I am most curious how you exported expression nodes and expression tress for individual instructions. I have problems getting fine grained operand information from just radare right now. Only other way would be to use radare's https://github.com/radare/radare2/blob/master/libr/anal/esil2reil.c\n\nHere is the SQL schema we need to import into: https://www.zynamics.com/binnavi/manual/html/dbformat.htm\n","createdAt":"2016-07-15T03:02:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3873#issuecomment-232848753","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzMjkxMjU3NQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"I would advise you to give a look to RadecoIL and consider implementing diffing engine on top of it instead: https://github.com/radare/radeco-lib/tree/master/src/middle\n","createdAt":"2016-07-15T10:07:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3873#issuecomment-232912575","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzMzAxMDQ4NA==","author":{"login":"manizzle"},"authorAssociation":"NONE","body":"@XVilka Hey man. Would you consider https://github.com/radare/radeco-lib/blob/master/src/middle/ir.rs to be a better ESIL translator than https://github.com/radare/radare2/blob/master/libr/anal/esil2reil.c ? I am thinking of maybe lifting the radeco IL to REIL if the support is better. At this point, I think feeding REIL directly to BinNavi would be the best option for this particular radare->BinNavi task\n\nAlso, for BinDiff, if we were to use the radeco IL, BinDiff still requires that specific instructions supplied so when basic blocks are showed to be different, more detailed information like number of instructions/instruction types and arguments, can also be shown to the user. I like the idea of using radecoIL because the CFG would probably be much cleaner, but it then destroys the original instruction context. Is there a way to go from radeco IL back to native instructions easily?\n","createdAt":"2016-07-15T17:09:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/3873#issuecomment-233010484","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU5Nzk5NjM1MA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Also interesting and relevant tool:\r\n- https://github.com/ubfx/BinDiffHelper\r\n## Importing Table\r\n![image](https://user-images.githubusercontent.com/203261/76486356-1a578900-645a-11ea-83d3-bde63b72d4f3.png)\r\n## Successfully renamed functions\r\n![image](https://user-images.githubusercontent.com/203261/76486402-322f0d00-645a-11ea-9d79-edca40d498e8.png)\r\n","createdAt":"2020-03-12T04:09:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3873#issuecomment-597996350","viewerDidAuthor":false}],"number":3873,"title":"Output for BinNavi"},{"body":"`sh configure-plugins` instead of `./configure-plugins` and so on..\n\nubuntuphone is one of those targets, where $HOME is mounted without exec permissions\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDE4OTY3MzEyNg==","author":{"login":"dequis"},"authorAssociation":"CONTRIBUTOR","body":"I don't think this is possible, `libr/{anal,bin,syscall}/d/Makefile` have to execute the built sdb binary\n","createdAt":"2016-02-27T15:56:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3635#issuecomment-189673126","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE4OTY3MzU2MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"that's right, even mmap(PROT_EXEC) fails when trying to map a file in the\nnoexec mounted path. a solution for this would be to not generate those at\ncompile time. we can generate them in users's home from system global files.\nthis way system files will be text-only, portable and generic, and user\ndirectory will contain stuff that can be broken, removed or changed without\nmajor issues. This also complicates a bit the model.. but it can be an option\n\n> On Feb 27 2016, at 4:56 pm, dx &lt;notifications@github.com&gt; wrote:  \n> \n> I don't think this is possible, libr/{anal,bin,syscall}/d/Makefile have to\n> execute the built sdb binary\n> \n> â€”  \n> Reply to this email directly or [view it on GitHub](https://github.com/radare/\n> radare2/issues/3635#issuecomment-189673126).![](https://github.com/notificatio\n> ns/beacon/AA3-lsFhnC1Y2PwqshsLny8h08MQklZTks5pob6_gaJpZM4GZaRb.gif)\n","createdAt":"2016-02-27T16:01:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3635#issuecomment-189673560","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxNzY3MzQwNg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"This a related a bit with https://github.com/radare/radare2/issues/7989 - by generating SDB during the runtime rather than compilation.","createdAt":"2017-07-25T08:53:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3635#issuecomment-317673406","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxNzY3NDI4OA==","author":{"login":"dequis"},"authorAssociation":"CONTRIBUTOR","body":"Does this even matter anymore? Isn't ubuntuphone a dead platform?","createdAt":"2017-07-25T08:56:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3635#issuecomment-317674288","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxNzcwNTg0OQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Yeah its dead but it happens too on some androids and other restricted environments where the builddir is mounted as noexec\n\n> On 25 Jul 2017, at 10:56, dx <notifications@github.com> wrote:\n> \n> Does this even matter anymore? Isn't ubuntuphone a dead platform?\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-07-25T11:11:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3635#issuecomment-317705849","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NzY5NzkxMA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Should you build on those environment? IMHO you should cross-build on another platform and then just execute radare2 from there. Am I missing anything?","createdAt":"2020-06-22T18:27:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3635#issuecomment-647697910","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0ODkzMDAzOQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"this implies running shellscripts with 'sh ./foo' instead of './foo' and finding a way to generate the sdb files without executing sdb (maybe sdb can load the .txt if the .sdb is not found and autogenerate it on the first run if needed and it's fine for the permissions?)","createdAt":"2020-06-24T16:34:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3635#issuecomment-648930039","viewerDidAuthor":true}],"number":3635,"title":"Fix build on non-exec environments"},{"body":"There are some issues when esil computes flags. This bug is to consolidate these and work towards a fix.\r\n- [ ] ESIL never sets Adjust Flag (AF)\r\n- [ ] Set bit 1 of eflags to be 1 **always**\r\n- [x] #3233 \r\n- [ ] Fix other x86 related reg profiles too\r\n\r\n**Completed:**\r\n- [x] Carry flag for subtraction is set using `$c,cf,=` rather than using `$b,cf,=`\r\n- [x] Overflow flag is not computed correctly (for subtraction)\r\n- [x] x86 add (`+=`) does not set flags.\r\n- [x] x86 sub  does not set `pf`\r\n- [x] Parity flag is not computed correctly.\r\n- [x] Incorrect register profile for x86 (eflags is not set to correct value even when flags are set correctly)\r\n\r\nI'm working towards a fix (and respective tests). Will update this issue when I find more bugs.\r\n\r\n**TODO**(Additions):\r\n- [x] Implement ROL/ROR/RCR/RCL\r\n- [ ] Carry flag for SHL/SHR/SAL/SAR\r\n- [x] Instructions like ADC/SBB etc.\r\n\r\n---\r\n\r\n**EDIT:** Checked the ones that I fixed\r\n**EDIT2 (29.10.15):** Added more issues\r\n**EDIT2 (29.10.15):** Added TODO\r\n**EDIT3(30.10.15)**: Added more issues\r\n**EDIT4(27.3.16)**: Reordered for readability\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDE1MTkzOTExNw==","author":{"login":"sushant94"},"authorAssociation":"CONTRIBUTOR","body":"Some more points to consider:\n- How do we go about setting the CF for SHL/SHR (and other variants) [[See Link]](http://x86.renejeschke.de/html/file_module_x86_id_285.html)\n- Even though new operations `>>>` and `<<<` are in ESIL, these are not currently used to implement ROR/ROL of x86. It is possible to implement these using this, however, the other variants (RCL/RCR) include the carry flag in the shifts and hence we cannot use this directly. [[See Link]](http://x86.renejeschke.de/html/file_module_x86_id_273.html)\n","createdAt":"2015-10-28T18:15:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3607#issuecomment-151939117","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE1MTk4ODc2MA==","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"`$b,cf,=` will never work, it must be `$b63,cf,=` for example\n","createdAt":"2015-10-28T21:00:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3607#issuecomment-151988760","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE1MTk5MDU3Ng==","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"the shl/shr thing is easy. it works similiar in gb-land: srl a\n`1,a,&,C,=,1,a,>>=,$z,Z,=,0,N,=,0,H`\n","createdAt":"2015-10-28T21:08:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3607#issuecomment-151990576","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE1MTk5MTQ2MA==","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"i really don't like `>>>` and `<<<` because they need 3 args pushed on the stack, if i remember right \n","createdAt":"2015-10-28T21:12:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3607#issuecomment-151991460","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE1MjAxMDI1MA==","author":{"login":"sushant94"},"authorAssociation":"CONTRIBUTOR","body":"@condret\nWhy do you say just `$b` dies not work? Cause this seems to be working. Then again, I might be wrong and it might have just worked for this case.\n\n I don't know about gb, but for x86, the carry flag is not defined if the number of bits shifted out is more than the width of the destination. I'm not sure on how to account for this.\n\nAnd I don't know where `>>>` and `<<<` are used and who introduced it. It **could** be used here but we need to find a way around for RCL/RCR.\n","createdAt":"2015-10-28T22:01:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3607#issuecomment-152010250","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE1MjAxNTkxNw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Added the 0.10 milestone, since I think ESIL is now widely (more or less) used, so it is better to provide fixes in the release.\n","createdAt":"2015-10-28T22:23:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3607#issuecomment-152015917","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE1MjAyNTMwMA==","author":{"login":"condret"},"authorAssociation":"MEMBER","body":"@sushant94  $b means borrow-from-bit, if you just do $b, you do not define from what bit you want to check the borrow. So $b performs undefined behaviour, which may end up in analdeamons eating your pet/child/keyboard, or launching nethack.\nrlc/rcr can be done easily with DUP operation, or use $cx how i did it for gb: rlc a\n`1,a,<<=,$c7,C,=,C,a,|=,$z,Z,=,0,H,=,0,N,`\n","createdAt":"2015-10-28T23:13:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3607#issuecomment-152025300","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE1MjE1NzczNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Can we move this for 1.0, i dont think this is blocking for 0.10 release. it is \"only\" needed for radeco, which there's no release planed yet.\n","createdAt":"2015-10-29T12:01:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3607#issuecomment-152157736","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE1MjE1OTA1Mw==","author":{"login":"sushant94"},"authorAssociation":"CONTRIBUTOR","body":"In any case, this issue is almost fixed (atleast the points highlighted here).\n","createdAt":"2015-10-29T12:09:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3607#issuecomment-152159053","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxOTM0NTE3OA==","author":{"login":"safiire"},"authorAssociation":"NONE","body":" I've spent some time trying to track down why parity bit for asm sequence always becomes 1:\n\n```\nmov edi, 2 \nor edi, edi\n```\n\nWhen the ESIL for the `or` is evaluated we have:\n\n```\nrdi,rdi,|=,\n0,of,=,\n0,cf,=,\n$s,sf,=,\n$z,zf,=,\n$p,pf,=\n```\n\nParity is calculated on `esil->cur`, which is expected to still be 2, however by the time we get to `$p,pf,=`, `esil->cur` has been set to 0 by flag update instructions such as `0,of,=`.  This causes the parity function to always compute the parity(0) = 1 in this case.\n\nI seem to see an attempt to prevent the flag updates from altering `esil->cur` here, when `0,of,=` runs `esil_eq(...)` in `esil.c`.\n\n```\n if (ret && r_anal_esil_get_parm_type (esil, src) != R_ANAL_ESIL_PARM_INTERNAL) { //necessary for some flag-things\n  esil->cur = num2;\n  esil->old = num;\n }\n```\n\nWhat this is doing is checking if src is `R_ANAL_ESIL_PARM_INTERNAL`, ie begins with `$`, but doesn't work in the case of `0,of,=` as the type of `src` and `dst` are both R_ANAL_ESIL_PARM_NUM, and `R_ANAL_ESIL_PARM_REG` respectively.  So the conditional guard fails and `esil->cur` gets updated to `0`, and that is what we calculate the parity of afterwards.\n\nFlags such as `of` are considered `R_ANAL_ESIL_PARM_REG`, and I don't immediately see any code that can make a distinction between flags and registers.  It seems like we want flag updates to avoid updating `esil->cur` so my first idea was to decorate flag registers with some symbol, in the same way `$p` is, maybe something like `$of`, and then check if either `src` or `dst` is `R_ANAL_ESIL_PARM_INTERNAL` and skip updating `esil->cur`.\n\nWhat would that look like:\n\n```\nrdi,rdi,|=,\n0,$of,=,\n0,$cf,=,\n$s,$sf,=,\n$z,$zf,=,\n$p,$pf,=\n```\n\nAnd the guard around updating `esil->cur` would look like:\n\n```\nif (ret && (r_anal_esil_get_parm_type (esil, src) != R_ANAL_ESIL_PARM_INTERNAL ||\n           (r_anal_esil_get_parm_type (esil, dst) != R_ANAL_ESIL_PARM_INTERNAL)) {\n  esil->cur = num2;\n  esil->old = num;\n }\n```\n\nI've only been looking into radare2's source for about a week, so it's quite possible I am not seeing some bigger issue that altering flags like `of` to be `$of` so they are considered internal instead of regs.  In any case I'm really interested in contributing to this project, so I'd love to hear what you think.  I also assume this affects other flag updates, as the same `if()` guard is applied to many other `esil_{op}` functions.\n\nThe code I've been testing against is the following, that could go into a test.\n\n```\npush rbp\nmov rbp, rsp\nmov rdi, 2\nor rdi, rdi\npushfq\npop rax\nshr rax, 2\nxor rbx, rbx\ninc rbx\nand rax, rbx\npop rbp\nret\n```\n\nWhere parity of edi, 2 here, should return 0 in rax.\n","createdAt":"2016-05-16T04:13:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3607#issuecomment-219345178","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxOTM2MDQwMg==","author":{"login":"safiire"},"authorAssociation":"NONE","body":"One other fix I had made in `libr/anal/p/anal_x86_cs.c`, was in the ESIL generated for opcodes in the `pushf` family, which originally looks like this:\n\n```\ncase X86_INS_PUSH:\ncase X86_INS_PUSHF:\ncase X86_INS_PUSHFD:\ncase X86_INS_PUSHFQ:\n    {\n        char *dst = getarg (&gop, 0, 0, NULL);\n        esilprintf (op, \"%d,%s,-=,%s,%s,=[%d]\",\n            rs, sp, dst?dst:\"eax\", sp, rs);\n        free (dst);\n    }\n    break;\n```\n\nWhich I've updated to:\n\n```\ncase X86_INS_PUSH:\n{\n  char *dst = getarg (&gop, 0, 0, NULL);\n  esilprintf (op, \"%d,%s,-=,%s,%s,=[%d]\",\n  rs, sp, dst?dst:\"eax\", sp, rs);\n  free (dst);\n}\nbreak;\ncase X86_INS_PUSHF:\n{\n  esilprintf (op, \"%d,%s,-=,flags,%s,=[%d]\",\n  rs, sp, sp, rs);\n}\nbreak;\ncase X86_INS_PUSHFD:\ncase X86_INS_PUSHFQ:\n{\n  esilprintf (op, \"%d,%s,-=,%cflags,0xfcffff,&,rsp,=[%d]\",\n  rs, sp, rs==8?'r':'e', rs);\n}\nbreak;\n```\n\nWhich according to this page: http://x86.renejeschke.de/html/file_module_x86_id_271.html says: \n\nWhen copying the entire [R | E]FLAGS register to the stack, the VM and RF flags (bits 16 and 17) are not copied; instead, the values for these flags are cleared, so I & with 0xfcffff.\n\nI can make a pull request for this if you like.\n","createdAt":"2016-05-16T06:46:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3607#issuecomment-219360402","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIyMDI2MzI2Ng==","author":{"login":"sushant94"},"authorAssociation":"CONTRIBUTOR","body":"@safiire Your first issue of X86_INS_OR not correctly setting the flag due to `esil->cur` and `esil->old` being modified from clearing of `of` and `cf` can be fixed by simply modifying the order of operations to perform the clearing at the end. True that this maybe a hacky fix and we need a more permanent solution, but this works for now (I'll make a PR for this fix soon).\n\nPlease do not add '$' to the flag variables like you have done so. Sure it may work for emulation purposes, but some static analysis built around esil will break as '$' indicates an internal variable which has a fixed meaning :)\n","createdAt":"2016-05-19T08:43:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3607#issuecomment-220263266","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4NTcxNTU2NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"this issue is almost finished, could you guys test and check the pending things? thx","createdAt":"2017-03-10T16:29:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3607#issuecomment-285715565","viewerDidAuthor":false}],"number":3607,"title":"Issues with ESIL flag computation"},{"body":"Also, current approach uses Sdb with hardcoded values for the signal name - signal number which is wrong because that thing depends on the target platform.\n\nSo maybe we should do this in a similar way syscalls are handled in r2. making them available in a cross-platform way.\n\nfor example 17 is sigchld on linux but sigstop on darwin\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDU1NzY0Ng==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T06:24:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3345#issuecomment-644557646","viewerDidAuthor":false}],"number":3345,"title":"Move the debug/signals.c (name to number / number to name) into util"},{"body":"R2 already have a json tokenizer, writing an xml one should be simple, and we can also use a C one using shlr/tcc or ALT to parse the structured code and define flags for every opened bracked etc. This can be useful to find and analyze binary stuff inside structured text documents like XML or JSON. \r\n- Add RBin plugin to load XML/JSON \"symbols\"\r\n- Add commands for text files\r\n  - Seek to source line Nth\r\n  - Seek to column Nth\r\n  - Seek to token Nth\r\n  - Seek to the end of the current scope (like % in vim ?)\r\n  - Enumerate all start/end tokens\r\n\r\nThis way we can also replace `ed`.\r\n\r\nThis stuff can be implemented in RBin as a plugin that detects XML and JSON documents by checking the first bytes of the file.\r\n\r\n- [ ] [XML](https://github.com/radare/radare2/issues/13312) merging bug\r\n- [ ] [JSON](https://github.com/radare/radare2/issues/12870) merging bug\r\n- [ ] [CSV support request](https://github.com/radare/radare2/issues/13763)","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDEzNjk2MTYwMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Related https://github.com/radare/alt\n","createdAt":"2015-09-02T07:32:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3222#issuecomment-136961600","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzNjg2NTM5Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I have implemented this for JSON, we will need that for XML too","createdAt":"2017-10-16T11:59:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3222#issuecomment-336865392","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3MDgwMzU2Nw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See\r\n- [XML](https://github.com/radare/radare2/issues/13312) merging bug\r\n- [JSON](https://github.com/radare/radare2/issues/12870) merging bug","createdAt":"2019-03-08T04:46:48Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3222#issuecomment-470803567","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3MDgwNDQxNQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"There is even more - we can consider to reuse [Tree Sitter](https://github.com/tree-sitter/tree-sitter) library to generate parsers for all these languages:\r\n- [XML](https://github.com/tree-sitter/tree-sitter/issues/266)\r\n- [JSON](https://github.com/tree-sitter/tree-sitter-json)","createdAt":"2019-03-08T04:52:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3222#issuecomment-470804415","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4MzI0NzYxNA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"See also [CSV support request](https://github.com/radare/radare2/issues/13763)","createdAt":"2019-04-15T13:18:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3222#issuecomment-483247614","viewerDidAuthor":false}],"number":3222,"title":"Structured document helpers"},{"body":"radare2 compiled with mingw32 connecting to the VMWare with Windows XP 64bit image.\n\nAt first connection:\n![image1](https://leto36g.storage.yandex.net/rdisk/2607dd6d314865bf3b6e1271be8fe462a6cedacea6c7382f6f986d04db696f75/inf/xi2ezZpdmtSKKQVHp-wu2_E_Oz16crJEckdbIrm5fCp1JRvmetaxiNNktPXU_MgWzE0euWSDRqXlvvVVbsmSYw==?uid=0&filename=2015-08-25%2001-32-30%20Ð¡ÐºÑ€Ð¸Ð½ÑˆÐ¾Ñ‚%20ÑÐºÑ€Ð°Ð½Ð°.png&disposition=inline&hash=&limit=0&content_type=image%2Fpng&tknv=v2&rtoken=876553fcd08c3e4d9acc94b407c85688&force_default=no&ycrid=na-8b7ce4c269c47cea3bda57da8d7d0c13-downloader3g)\nThen after reconnection:\n![image2](https://leto1g.storage.yandex.net/rdisk/6bae6705d0ec01c649b2df7d64c2cf45f1587c4000b00491f8d6495557cd5bf9/inf/S4vsf0E2Wx1Ymcrx0WaT9kL_JCVZezK6j78kAHPndiqVo-4JIhLAe0FEBZIiM4dJ-rce9BnX3VatBNeuRceVRw==?uid=0&filename=2015-08-25%2001-36-18%20Ð¡ÐºÑ€Ð¸Ð½ÑˆÐ¾Ñ‚%20ÑÐºÑ€Ð°Ð½Ð°.png&disposition=inline&hash=&limit=0&content_type=image%2Fpng&tknv=v2&rtoken=876553fcd08c3e4d9acc94b407c85688&force_default=no&ycrid=na-997081f6f5c572fa21ddc97c126afe89-downloader12g)\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDE0ODA3NDQ5OQ==","author":{"login":"dukebarman"},"authorAssociation":"CONTRIBUTOR","body":"Update images:\n![2015-08-25 01-32-30](https://cloud.githubusercontent.com/assets/1186777/10487375/ba11bc2e-72a4-11e5-81f6-e51c9f75928a.png)\n![2015-08-25 01-36-18](https://cloud.githubusercontent.com/assets/1186777/10487376/ba142c5c-72a4-11e5-891d-b56fa532cb08.png)\n","createdAt":"2015-10-14T14:52:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3159#issuecomment-148074499","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE0ODM3Mzk4OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"I guess profile for 64bit XP should be added here https://github.com/radare/radare2/blob/master/shlr/wind/profiles.h\n","createdAt":"2015-10-15T12:43:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3159#issuecomment-148373989","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4NTUzNTg1OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"so? can you make a pr?","createdAt":"2017-03-10T00:44:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3159#issuecomment-285535858","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyODQ2NzIxNA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Isn't that fixed @xarkes ?","createdAt":"2017-09-11T09:05:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3159#issuecomment-328467214","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0MTMxNjMyNg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@dukebarman can you please check this one? Should be fixed, but we need a confirmation.","createdAt":"2017-11-02T04:43:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3159#issuecomment-341316326","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0NjgyODUzNg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cc @josediazfer ","createdAt":"2017-11-24T13:27:19Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3159#issuecomment-346828536","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0OTc1Mzg1MA==","author":{"login":"dukebarman"},"authorAssociation":"CONTRIBUTOR","body":"Try to check with Windows 8.1 x64\r\n\r\nVirtual Software: VMware Fusion Pro\r\nHost: OSX 10.14\r\n\r\n```\r\nr2 -a x86 -b 64 -D windbg windbg:///tmp/windbg.pipe\r\nOpened pipe /tmp/windbg.pipe with fd 0x6\r\nState64\r\nSync done! (1 cpus found)\r\nMajor : 15 Minor 9600\r\nProtocol version : 6.2\r\nFlags : 00000007\r\nMachine : 00008664\r\nModule list : fffff8023535c250\r\nDebug block : fffff80235373178\r\n_KDDEBUGGER_DATA64 at 0xfffff80235329530\r\nCould not find a suitable profile for the target OS\r\niob_pipe_write, send: Bad file descriptor\r\niob_pipe_write, send: Bad file descriptor\r\niob_pipe_write, send: Bad file descriptor\r\n[1]    39199 segmentation fault  r2 -a x86 -b 64 -D windbg windbg:///tmp/windbg.pipe\r\n```","createdAt":"2018-12-24T16:44:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3159#issuecomment-449753850","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2OTU4NjY1NA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@GustavoLCR @yossizap FYI","createdAt":"2019-12-30T05:17:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3159#issuecomment-569586654","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDYyMzQ4NTE3Mw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@dukebarman could you please try again?","createdAt":"2020-05-04T14:06:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/3159#issuecomment-623485173","viewerDidAuthor":false}],"number":3159,"title":"radare2 + windbg + windows xp 64bit"},{"body":"It's only using flags right now\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDEyMTQ0ODQ0Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"partially fixed with `.afl*`\n","createdAt":"2015-07-15T01:26:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2953#issuecomment-121448442","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NzQ5NDcyNw==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Closing this as it seems it is already working.\r\n```\r\n[0x00006c80]> pxa\r\n- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF\r\n             /fcn.00006c80                                          \r\n0x00006c80  4883 ec18 31d2 4c8d 05f4 2b01 0031 f664  H...1.L...+..1.d ; int64_t arg5\r\n0x00006c90  488b 0425 2800 0000 4889 4424 0831 c048  H..%(...H.D$.1.H\r\n0x00006ca0  89e1 e849 ff00 0085 c074 3583 f801 7528  ...I.....t5...u(\r\n0x00006cb0  48c7 0595 d501 00ff ffff ffb8 0100 0000  H...............\r\n0x00006cc0  488b 5424 0864 4833 1425 2800 0000 7522  H.T$.dH3.%(...u\"\r\n0x00006cd0  4883 c418 c30f 1f00 31c0 ebe4 0f1f 4000  H.......1.....@.\r\n0x00006ce0  488b 0424 4889 0565 d501 00b8 0100 0000  H..$H..e........\r\n0x00006cf0  ebce e829 dcff ff66 0f1f 8400 0000 0000  ...)...f........\r\n             /fcn.00006d00                                          \r\n0x00006d00  4157 31f6 4156 4155 4154 5553 4881 ec58  AW1.AVAUATUSH..X\r\n0x00006d10  0600 0064 488b 0425 2800 0000 4889 8424  ...dH..%(...H..$\r\n0x00006d20  4806 0000 31c0 488d 7c24 3048 897c 2418  H...1.H.|$0H.|$.\r\n0x00006d30  488d 05e9 c201 0048 8b04 300f b610 84d2  H......H..0.....\r\n0x00006d40  7419 660f 1f44 0000 0fb6 4801 80fa 2574  t.f..D....H...%t\r\n0x00006d50  0f89 ca48 83c0 0184 d275 ed31 c0eb 0f90  ...H.....u.1....\r\n0x00006d60  80f9 250f 84d7 0000 0080 f962 75e3 4889  ..%........bu.H.\r\n0x00006d70  0437 4883 c608 4883 fe10 75b4 4883 7c24  .7H...H...u.H.|$\r\n```\r\nIf there are specific bugs, please open new bugs with specific cases and reproducers.","createdAt":"2020-06-22T12:43:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2953#issuecomment-647494727","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0ODkxNzU2Mw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Nope its not working, what you see there are flags. not functions.\r\n\r\n<img width=\"693\" alt=\"Screenshot 2020-06-24 at 18 11 55\" src=\"https://user-images.githubusercontent.com/6431515/85592142-31f00180-b646-11ea-812c-23bff7a142e4.png\">\r\n","createdAt":"2020-06-24T16:12:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2953#issuecomment-648917563","viewerDidAuthor":true}],"number":2953,"title":"pxa doesn't honors functions"},{"body":"Aka `bpf`. The main idea is that continue operation will take care when a new library is loaded and try to set the breakpoint at that memory address or symbol name.\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0NDY3NzcxMg==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T10:26:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2903#issuecomment-644677712","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDc3ODQzOQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"This issue is not fixed, and must be implemented like lldb/gdb do and it's very useful feature","createdAt":"2020-06-16T13:49:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2903#issuecomment-644778439","viewerDidAuthor":true}],"number":2903,"title":"Add support for future breakpoints"},{"body":"+int lang; // R_BIN_NM_*;\n\nProbably rename R_BIN_NM_ to R_BIN_LANG_\n\nA program can be constructed in more than one language, RBinInfo only shows one type (cxx, objc, ..), but this is totally insufficient, because we can easily find programs in iOS written in cxx+objc+swift nowadays (for example)\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDExMTg3NzQxMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Maybe, also associated to RBinClass\n","createdAt":"2015-06-14T21:31:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2758#issuecomment-111877413","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1MTQ2NTk5OA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Currently lang is only found in RBinInfo, we should expose this info at RBinSymbol level too.\n\nThis is impotrant for demangling reasons.. and also for grouping, because an app can be done in several languages, but RBinInfo will only show the most promiment one (swift > objc > c), this kind of multi-lang can happen in different file formats. The same goes for android apps with c++ shared libraries and such\n\nRight now the kind of language in RBinInfo is identified by checking the existence of some specific imports or format in the symbol names.\n\nr2 should be able to list all the languages found in a binary, and group them, the class info should be merged, we dont really care if there's an objc class or a swift one as long as we can identify it.\n\nif you have any other question just let me know :)\n","createdAt":"2016-10-04T18:04:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2758#issuecomment-251465998","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4NTYyNzU1NQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping @h4ng3r ","createdAt":"2017-03-10T10:00:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2758#issuecomment-285627555","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDUzODExMg==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T05:24:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2758#issuecomment-644538112","viewerDidAuthor":false}],"number":2758,"title":"Add RBinSymbol.lang"},{"body":"```\n$ r2 -d ./a.out\nProcess with PID 7837 started...\nPID = 7837\npid = 7837 tid = 7837\nr_debug_select: 7837 7837\nUsing BADDR 0x400000\nAsuming filepath ./a.out\nbits 64\npid = 7837 tid = 7837\n -- Sharing your latest session in Facebook...\n[0x7f74e7925cd0]> aa\n[0x7f74e7925cd0]> dc\n[+] SIGNAL 11 errno=0 addr=(nil) code=1 ret=0\nr_debug_select: 7837 1\n[+] signal 11 aka SIGSEGV received 0\n[0x7f74e76041fd]> dbt\n0  0x7f74e757ba40  0\n1  0x41d589495541f689  0\n[0x7f74e76041fd]> \n```\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDE1ODI0NjE1Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"can you re-verify?\n","createdAt":"2015-11-20T00:52:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2685#issuecomment-158246152","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE1ODMzNjE0Nw==","author":{"login":""},"authorAssociation":"NONE","body":"$ r2 -d a.out\nProcess with PID 17499 started...\nAttached debugger to pid = 17499, tid = 17499\nDebugging pid = 17499, tid = 17499 now\nUsing BADDR 0x400000\nAssuming filepath ./a.out\nbits 64\nAttached debugger to pid = 17499, tid = 17499\n -- This is an unacceptable milion year dungeon.\n[0x7f8b4ee1caf0]> aaa\nCannot determine xref search boundaries\nOops invalid range\n[0x7f8b4ee1caf0]> dc\n[+] SIGNAL 11 errno=0 addr=(nil) code=128 ret=0\nDebugging pid = 17499, tid = 1 now\n[+] signal 11 aka SIGSEGV received 0\n[0x0040052b]> dbt\n0  0x0040052b sp: 0x0  0[sym.foo]  rip sym.foo+31\n[0x0040052b]> \n\nradare2 0.10.0-git 9762 @ linux-little-x86-64 git.0.9.9-1639-g4d4db25\ncommit: 4d4db2518171744fe41227ddb464e5b463b1965a build: 2015-11-20\n\nshouldn't it show the main -> bar -> foo stack trace?\n\nvoid\nfoo() {\n    char a[1];\n    memset(a, 'A', 1024);\n}\nvoid \nbar() {\n    foo();\n}\nint main() {\n    bar();\n}\n","createdAt":"2015-11-20T09:31:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2685#issuecomment-158336147","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE1ODM0MzUwNA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"no. you have fuckedup the stack, so thereâ€™s no way to recover the backtrace \n\n> On 20 Nov 2015, at 10:31, nvm notifications@github.com wrote:\n> \n> $ r2 -d a.out\n> Process with PID 17499 started...\n> Attached debugger to pid = 17499, tid = 17499\n> Debugging pid = 17499, tid = 17499 now\n> Using BADDR 0x400000\n> Assuming filepath ./a.out\n> bits 64\n> Attached debugger to pid = 17499, tid = 17499\n> -- This is an unacceptable milion year dungeon.\n> [0x7f8b4ee1caf0]> aaa\n> Cannot determine xref search boundaries\n> Oops invalid range\n> [0x7f8b4ee1caf0]> dc\n> [+] SIGNAL 11 errno=0 addr=(nil) code=128 ret=0\n> Debugging pid = 17499, tid = 1 now\n> [+] signal 11 aka SIGSEGV received 0\n> [0x0040052b]> dbt\n> 0 0x0040052b sp: 0x0 0[sym.foo] rip sym.foo+31\n> [0x0040052b]>\n> \n> radare2 0.10.0-git 9762 @ linux-little-x86-64 git.0.9.9-1639-g4d4db25\n> commit: 4d4db25 https://github.com/radare/radare2/commit/4d4db2518171744fe41227ddb464e5b463b1965a build: 2015-11-20\n> \n> shouldn't it show the main -> bar -> foo stack trace?\n> \n> void\n> foo() {\n> char a[1];\n> memset(a, 'A', 1024);\n> }\n> void \n> bar() {\n> foo();\n> }\n> int main() {\n> bar();\n> }\n> \n> â€”\n> Reply to this email directly or view it on GitHub https://github.com/radare/radare2/issues/2685#issuecomment-158336147.\n","createdAt":"2015-11-20T09:55:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2685#issuecomment-158343504","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE1ODM0NDUyNw==","author":{"login":""},"authorAssociation":"NONE","body":"$ r2 -d a.out\nProcess with PID 17660 started...\nAttached debugger to pid = 17660, tid = 17660\nDebugging pid = 17660, tid = 17660 now\nUsing BADDR 0x400000\nAssuming filepath ./a.out\nbits 64\nAttached debugger to pid = 17660, tid = 17660\n -- This is an unacceptable milion year dungeon.\n[0x7fa4b937daf0]> aaa\nCannot determine xref search boundaries\nOops invalid range\n[0x7fa4b937daf0]> dc\n[+] SIGNAL 11 errno=0 addr=0x7fff7b94cff8 code=1 ret=0\nDebugging pid = 17660, tid = 1 now\n[+] signal 11 aka SIGSEGV received 0\n[0x00400525]> dbt\n0  0x00400525 sp: 0x0  0[sym.foo]  rip sym.foo+25\n1  0x0040052a sp: 0x7fff7b94d008  8[sym.foo]  rip+5 \n2  0x0040053a sp: 0x7fff7b94d018  16[sym.bar]  sym.bar+14 \n3  0x0040054a sp: 0x7fff7b94d028  16[sym.main]  main+14 \n4  0x0040054a sp: 0x7fff7b94d038  16[sym.main]  main+14 \n5  0x0040054a sp: 0x7fff7b94d048  16[sym.main]  main+14 \n6  0x0040054a sp: 0x7fff7b94d058  16[sym.main]  main+14 \n7  0x0040054a sp: 0x7fff7b94d068  16[sym.main]  main+14 \n8  0x0040054a sp: 0x7fff7b94d078  16[sym.main]  main+14 \n9  0x0040054a sp: 0x7fff7b94d088  16[sym.main]  main+14 \n10  0x0040054a sp: 0x7fff7b94d098  16[sym.main]  main+14 \n11  0x0040054a sp: 0x7fff7b94d0a8  16[sym.main]  main+14 \n12  0x0040054a sp: 0x7fff7b94d0b8  16[sym.main]  main+14 \n13  0x0040054a sp: 0x7fff7b94d0c8  16[sym.main]  main+14 \n14  0x0040054a sp: 0x7fff7b94d0d8  16[sym.main]  main+14 \n15  0x0040054a sp: 0x7fff7b94d0e8  16[sym.main]  main+14 \n16  0x0040054a sp: 0x7fff7b94d0f8  16[sym.main]  main+14 \n17  0x0040054a sp: 0x7fff7b94d108  16[sym.main]  main+14 \n18  0x0040054a sp: 0x7fff7b94d118  16[sym.main]  main+14 \n19  0x0040054a sp: 0x7fff7b94d128  16[sym.main]  main+14 \n20  0x0040054a sp: 0x7fff7b94d138  16[sym.main]  main+14 \n21  0x0040054a sp: 0x7fff7b94d148  16[sym.main]  main+14 \n22  0x0040054a sp: 0x7fff7b94d158  16[sym.main]  main+14 \n23  0x0040054a sp: 0x7fff7b94d168  16[sym.main]  main+14 \n24  0x0040054a sp: 0x7fff7b94d178  16[sym.main]  main+14 \n25  0x0040054a sp: 0x7fff7b94d188  16[sym.main]  main+14 \n26  0x0040054a sp: 0x7fff7b94d198  16[sym.main]  main+14 \n27  0x0040054a sp: 0x7fff7b94d1a8  16[sym.main]  main+14 \n28  0x0040054a sp: 0x7fff7b94d1b8  16[sym.main]  main+14 \n29  0x0040054a sp: 0x7fff7b94d1c8  16[sym.main]  main+14 \n30  0x0040054a sp: 0x7fff7b94d1d8  16[sym.main]  main+14 \n31  0x0040054a sp: 0x7fff7b94d1e8  16[sym.main]  main+14 \n32  0x0040054a sp: 0x7fff7b94d1f8  16[sym.main]  main+14 \n33  0x0040054a sp: 0x7fff7b94d208  16[sym.main]  main+14 \n34  0x0040054a sp: 0x7fff7b94d218  16[sym.main]  main+14 \n35  0x0040054a sp: 0x7fff7b94d228  16[sym.main]  main+14 \n36  0x0040054a sp: 0x7fff7b94d238  16[sym.main]  main+14 \n37  0x0040054a sp: 0x7fff7b94d248  16[sym.main]  main+14 \n38  0x0040054a sp: 0x7fff7b94d258  16[sym.main]  main+14 \n39  0x0040054a sp: 0x7fff7b94d268  16[sym.main]  main+14 \n40  0x0040054a sp: 0x7fff7b94d278  16[sym.main]  main+14 \n41  0x0040054a sp: 0x7fff7b94d288  16[sym.main]  main+14 \n42  0x0040054a sp: 0x7fff7b94d298  16[sym.main]  main+14 \n43  0x0040054a sp: 0x7fff7b94d2a8  16[sym.main]  main+14 \n44  0x0040054a sp: 0x7fff7b94d2b8  16[sym.main]  main+14 \n45  0x0040054a sp: 0x7fff7b94d2c8  16[sym.main]  main+14 \n46  0x0040054a sp: 0x7fff7b94d2d8  16[sym.main]  main+14 \n47  0x0040054a sp: 0x7fff7b94d2e8  16[sym.main]  main+14 \n48  0x0040054a sp: 0x7fff7b94d2f8  16[sym.main]  main+14 \n49  0x0040054a sp: 0x7fff7b94d308  16[sym.main]  main+14 \n50  0x0040054a sp: 0x7fff7b94d318  16[sym.main]  main+14 \n51  0x0040054a sp: 0x7fff7b94d328  16[sym.main]  main+14 \n52  0x0040054a sp: 0x7fff7b94d338  16[sym.main]  main+14 \n53  0x0040054a sp: 0x7fff7b94d348  16[sym.main]  main+14 \n54  0x0040054a sp: 0x7fff7b94d358  16[sym.main]  main+14 \n55  0x0040054a sp: 0x7fff7b94d368  16[sym.main]  main+14 \n56  0x0040054a sp: 0x7fff7b94d378  16[sym.main]  main+14 \n57  0x0040054a sp: 0x7fff7b94d388  16[sym.main]  main+14 \n58  0x0040054a sp: 0x7fff7b94d398  16[sym.main]  main+14 \n59  0x0040054a sp: 0x7fff7b94d3a8  16[sym.main]  main+14 \n60  0x0040054a sp: 0x7fff7b94d3b8  16[sym.main]  main+14 \n61  0x0040054a sp: 0x7fff7b94d3c8  16[sym.main]  main+14 \n62  0x0040054a sp: 0x7fff7b94d3d8  16[sym.main]  main+14 \n63  0x0040054a sp: 0x7fff7b94d3e8  16[sym.main]  main+14 \n64  0x0040054a sp: 0x7fff7b94d3f8  16[sym.main]  main+14 \n\nthis happens with memset(a, 'A', 10)\n","createdAt":"2015-11-20T09:59:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2685#issuecomment-158344527","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE1ODM2MDg1NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"yeah, this seems like a bug, can you try with other backtrace engines?\n\n```\n[0x00000000]> e dbg.btalgo =?\ndefault\nfuzzy\nanal\n```\n\n> On 20 Nov 2015, at 10:59, nvm notifications@github.com wrote:\n> \n> $ r2 -d a.out\n> Process with PID 17660 started...\n> Attached debugger to pid = 17660, tid = 17660\n> Debugging pid = 17660, tid = 17660 now\n> Using BADDR 0x400000\n> Assuming filepath ./a.out\n> bits 64\n> Attached debugger to pid = 17660, tid = 17660\n> -- This is an unacceptable milion year dungeon.\n> [0x7fa4b937daf0]> aaa\n> Cannot determine xref search boundaries\n> Oops invalid range\n> [0x7fa4b937daf0]> dc\n> [+] SIGNAL 11 errno=0 addr=0x7fff7b94cff8 code=1 ret=0\n> Debugging pid = 17660, tid = 1 now\n> [+] signal 11 aka SIGSEGV received 0\n> [0x00400525]> dbt\n> 0 0x00400525 sp: 0x0 0[sym.foo] rip sym.foo+25\n> 1 0x0040052a sp: 0x7fff7b94d008 8[sym.foo] rip+5 \n> 2 0x0040053a sp: 0x7fff7b94d018 16[sym.bar] sym.bar+14 \n> 3 0x0040054a sp: 0x7fff7b94d028 16[sym.main] main+14 \n> 4 0x0040054a sp: 0x7fff7b94d038 16[sym.main] main+14 \n> 5 0x0040054a sp: 0x7fff7b94d048 16[sym.main] main+14 \n> 6 0x0040054a sp: 0x7fff7b94d058 16[sym.main] main+14 \n> 7 0x0040054a sp: 0x7fff7b94d068 16[sym.main] main+14 \n> 8 0x0040054a sp: 0x7fff7b94d078 16[sym.main] main+14 \n> 9 0x0040054a sp: 0x7fff7b94d088 16[sym.main] main+14 \n> 10 0x0040054a sp: 0x7fff7b94d098 16[sym.main] main+14 \n> 11 0x0040054a sp: 0x7fff7b94d0a8 16[sym.main] main+14 \n> 12 0x0040054a sp: 0x7fff7b94d0b8 16[sym.main] main+14 \n> 13 0x0040054a sp: 0x7fff7b94d0c8 16[sym.main] main+14 \n> 14 0x0040054a sp: 0x7fff7b94d0d8 16[sym.main] main+14 \n> 15 0x0040054a sp: 0x7fff7b94d0e8 16[sym.main] main+14 \n> 16 0x0040054a sp: 0x7fff7b94d0f8 16[sym.main] main+14 \n> 17 0x0040054a sp: 0x7fff7b94d108 16[sym.main] main+14 \n> 18 0x0040054a sp: 0x7fff7b94d118 16[sym.main] main+14 \n> 19 0x0040054a sp: 0x7fff7b94d128 16[sym.main] main+14 \n> 20 0x0040054a sp: 0x7fff7b94d138 16[sym.main] main+14 \n> 21 0x0040054a sp: 0x7fff7b94d148 16[sym.main] main+14 \n> 22 0x0040054a sp: 0x7fff7b94d158 16[sym.main] main+14 \n> 23 0x0040054a sp: 0x7fff7b94d168 16[sym.main] main+14 \n> 24 0x0040054a sp: 0x7fff7b94d178 16[sym.main] main+14 \n> 25 0x0040054a sp: 0x7fff7b94d188 16[sym.main] main+14 \n> 26 0x0040054a sp: 0x7fff7b94d198 16[sym.main] main+14 \n> 27 0x0040054a sp: 0x7fff7b94d1a8 16[sym.main] main+14 \n> 28 0x0040054a sp: 0x7fff7b94d1b8 16[sym.main] main+14 \n> 29 0x0040054a sp: 0x7fff7b94d1c8 16[sym.main] main+14 \n> 30 0x0040054a sp: 0x7fff7b94d1d8 16[sym.main] main+14 \n> 31 0x0040054a sp: 0x7fff7b94d1e8 16[sym.main] main+14 \n> 32 0x0040054a sp: 0x7fff7b94d1f8 16[sym.main] main+14 \n> 33 0x0040054a sp: 0x7fff7b94d208 16[sym.main] main+14 \n> 34 0x0040054a sp: 0x7fff7b94d218 16[sym.main] main+14 \n> 35 0x0040054a sp: 0x7fff7b94d228 16[sym.main] main+14 \n> 36 0x0040054a sp: 0x7fff7b94d238 16[sym.main] main+14 \n> 37 0x0040054a sp: 0x7fff7b94d248 16[sym.main] main+14 \n> 38 0x0040054a sp: 0x7fff7b94d258 16[sym.main] main+14 \n> 39 0x0040054a sp: 0x7fff7b94d268 16[sym.main] main+14 \n> 40 0x0040054a sp: 0x7fff7b94d278 16[sym.main] main+14 \n> 41 0x0040054a sp: 0x7fff7b94d288 16[sym.main] main+14 \n> 42 0x0040054a sp: 0x7fff7b94d298 16[sym.main] main+14 \n> 43 0x0040054a sp: 0x7fff7b94d2a8 16[sym.main] main+14 \n> 44 0x0040054a sp: 0x7fff7b94d2b8 16[sym.main] main+14 \n> 45 0x0040054a sp: 0x7fff7b94d2c8 16[sym.main] main+14 \n> 46 0x0040054a sp: 0x7fff7b94d2d8 16[sym.main] main+14 \n> 47 0x0040054a sp: 0x7fff7b94d2e8 16[sym.main] main+14 \n> 48 0x0040054a sp: 0x7fff7b94d2f8 16[sym.main] main+14 \n> 49 0x0040054a sp: 0x7fff7b94d308 16[sym.main] main+14 \n> 50 0x0040054a sp: 0x7fff7b94d318 16[sym.main] main+14 \n> 51 0x0040054a sp: 0x7fff7b94d328 16[sym.main] main+14 \n> 52 0x0040054a sp: 0x7fff7b94d338 16[sym.main] main+14 \n> 53 0x0040054a sp: 0x7fff7b94d348 16[sym.main] main+14 \n> 54 0x0040054a sp: 0x7fff7b94d358 16[sym.main] main+14 \n> 55 0x0040054a sp: 0x7fff7b94d368 16[sym.main] main+14 \n> 56 0x0040054a sp: 0x7fff7b94d378 16[sym.main] main+14 \n> 57 0x0040054a sp: 0x7fff7b94d388 16[sym.main] main+14 \n> 58 0x0040054a sp: 0x7fff7b94d398 16[sym.main] main+14 \n> 59 0x0040054a sp: 0x7fff7b94d3a8 16[sym.main] main+14 \n> 60 0x0040054a sp: 0x7fff7b94d3b8 16[sym.main] main+14 \n> 61 0x0040054a sp: 0x7fff7b94d3c8 16[sym.main] main+14 \n> 62 0x0040054a sp: 0x7fff7b94d3d8 16[sym.main] main+14 \n> 63 0x0040054a sp: 0x7fff7b94d3e8 16[sym.main] main+14 \n> 64 0x0040054a sp: 0x7fff7b94d3f8 16[sym.main] main+14\n> \n> this happens with memset(a, 'A', 10)\n> \n> â€”\n> Reply to this email directly or view it on GitHub https://github.com/radare/radare2/issues/2685#issuecomment-158344527.\n","createdAt":"2015-11-20T11:10:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2685#issuecomment-158360854","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE1ODM4MDgyMA==","author":{"login":""},"authorAssociation":"NONE","body":"yes, it works only with anal\n\n[0x7fde41affaf0]> e dbg.btalgo=anal\n[0x7fde41affaf0]> aaa\nCannot determine xref search boundaries\nOops invalid range\n[0x7fde41affaf0]> dc\n[+] SIGNAL 11 errno=0 addr=0x7fff70f42ff8 code=1 ret=0\nDebugging pid = 18112, tid = 1 now\n[+] signal 11 aka SIGSEGV received 0\n[0x00400525]> dbt\n0  0x00400525 sp: 0x0  0[sym.foo]  rip sym.foo+25\n1  0x00400525 sp: 0x7fff70f43010  0[sym.foo]  rip sym.foo+25\n2  0x0040053a sp: 0x7fff70f43010  0[sym.bar]  sym.bar+14 \n3  0x0040054a sp: 0x7fff70f43020  0[sym.main]  main+14 \n[0x00400525]> \n\nwith fuzzy there is the same behaviour of default.\n","createdAt":"2015-11-20T12:16:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/2685#issuecomment-158380820","viewerDidAuthor":false}],"number":2685,"title":"backtrace output seems to be wrong"},{"body":"- [ ] http://dso.thecoverofnight.com/posts/2014/04/radare-java-artifact-enumeration/\r\n- [ ] http://dso.thecoverofnight.com/posts/2014/04/radare-java-intro/ **(malware sample)**\r\n- [ ] http://homepages.inf.ed.ac.uk/kwxm/JVM/index.html OPCODE Java\r\n\r\n---\r\n- [x] help NONE\r\n- [x] prototypes\r\n- [x] resolve_cp\r\n- [x] m_info\r\n- [x] f_info\r\n- [x] summary\r\n- [ ] set_flags\r\n- [ ] calc_flags\r\n- [ ] flags_str_at\r\n- [ ] flags_str\r\n- [ ] find_cp_const\r\n- [ ] find_cp_value\r\n- [ ] replace_cp_value\r\n- [ ] replace_classname_value\r\n- [ ] reload_bin\r\n- [ ] lcr NONE\r\n- [ ] exc NONE\r\n- [ ] yc_w_refs\r\n- [ ] i_mref\r\n- [ ] calc_sz\r\n- [ ] is_valid\r\n","comments":[],"number":15568,"title":"Java tests"},{"body":"- [ ]  fc [name] [color]   set color for given flag\r\n- [ ]  fn                  list flags displaying the real name (demangled)\r\n- [ ]  fR [f] [t] [m]      relocate all flags matching f&~m 'f'rom, 't'o, 'm'ask\r\n- [ ]  fx[d]               show hexdump (or disasm) of flag:flagsize\r\n- [x] Usage: f [?] [flagname] # Manage offset-name flags\r\n- [x]  f                   list flags (will only list flags from selected flagspaces)\r\n- [x]  f. [_[_]]           list local per-function flags (*) as r2 commands\r\n- [x]  f.blah=$$+12        set local function label named 'blah'\r\n- [x]  f\\*                  list flags in r commands\r\n- [x]  f name 12 @ 33      set flag 'name' with length 12 at offset 33\r\n- [x]  f name = 33         alias for 'f name @ 33' or 'f name 1 33'\r\n- [x]  f name 12 33 [cmt]  same as above + optional comment\r\n- [x]  f-.blah@fcn.foo     delete local label from function at current seek (also f.-)\r\n- [x]  f--                 delete all flags and flagspaces (deinit)\r\n- [x]  f+name 12 @ 33      like above but creates new one if doesnt exist\r\n- [x]  f-name              remove flag 'name'\r\n- [x]  f-@addr             remove flag at address expression\r\n- [x]  f. fname            list all local labels for the given function\r\n- [x]  fa [name] [alias]   alias a flag to evaluate an expression\r\n- [x]  fb [addr]           set base address for new flags\r\n- [x]  fb [addr] [flag*]   move flags matching 'flag' to relative addr\r\n- [x]  fC [name] [cmt]     set comment for given flag\r\n- [x]  fd addr             return flag+delta\r\n- [x]  fe-                 resets the enumerator counter\r\n- [x]  fe [name]           create flag name.#num# enumerated flag. See fe?\r\n- [x]  fg                  bring visual mode to foreground\r\n- [x]  fj                  list flags in JSON format\r\n- [x]  fl [flagname]       show flag length (size)\r\n- [x]  fm addr             move flag at current offset to new address\r\n- [x]  fo                  show fortunes\r\n- [x]  fr [old] [[new]]    rename flag (if no new flag current seek one is used)\r\n- [x]  fs ?+-\\*             manage flagspaces\r\n- [x]  fS[on]              sort flags by offset or name\r\n","comments":[],"number":15566,"title":"Add testsuite for flags"},{"body":"Currently when you attempt to compare files larger than available memory you'll get _a very helpful_ error message\n\n```\n$ radiff2 bigfile1 bigfile2\nradiff2: Cannot open (null)\n```\n\nIt happens because `r_file_slurp` at [radiff2.c#286](https://github.com/radare/radare2/blob/master/binr/radiff2/radiff2.c#L286) tries to allocate memory for whole file which fails and so it returns NULL\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDkxMDczNzkz","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"how big are those files?\n\nOn 04/09/2015 02:01 AM, DÄvis wrote:\n\n> Currently when you attempt to compare files larger than available memory you'll get _a very helpful_ error message\n> \n> ```\n> $ radiff2 bigfile1 bigfile2\n> radiff2: Cannot open (null)\n> ```\n> \n> It happens because `r_file_slurp` at [radiff2.c#286](https://github.com/radare/radare2/blob/master/binr/radiff2/radiff2.c#L286) tries to allocate memory for whole file which fails and so it returns NULL\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/radare/radare2/issues/2338\n","createdAt":"2015-04-09T00:06:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2338#issuecomment-91073793","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDkxMDc1NzU0","author":{"login":"davispuh"},"authorAssociation":"CONTRIBUTOR","body":"~8 GiB for each file, but I've just 8 GiB RAM and 1 GiB swap, now I increased swap and seems it's working, no error yet.\nI would also suggest to improve that error as without looking at code it's not possible to tell what's wrong :P\n","createdAt":"2015-04-09T00:18:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2338#issuecomment-91075754","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDkxMjMyMzMx","author":{"login":"jvoisin"},"authorAssociation":"CONTRIBUTOR","body":"Fix it with hardware :)\n","createdAt":"2015-04-09T13:32:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2338#issuecomment-91232331","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDkxMjc1MzIy","author":{"login":"davispuh"},"authorAssociation":"CONTRIBUTOR","body":"this time yeah, but what about comparing 10 TiB files?\n","createdAt":"2015-04-09T16:05:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2338#issuecomment-91275322","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDkxMjc4ODQ5","author":{"login":"jvoisin"},"authorAssociation":"CONTRIBUTOR","body":"Ask [this](http://www.sisense.com/blog/how-to-analyze-10tb-on-a-10000-machine/) guy.\n\nMore seriously, I diffing file in anything else than non-trivial way will require a lot of thinking :)\n","createdAt":"2015-04-09T16:18:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2338#issuecomment-91278849","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDkxMzAwMTcz","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Plain byte diffing should not allocate the whole bin in memory. This can be fixed with a loop. But i didnt looked how its done now.\n\n> On 09 Apr 2015, at 15:32, jvoisin notifications@github.com wrote:\n> \n> Fix it with hardware :)\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n","createdAt":"2015-04-09T17:26:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2338#issuecomment-91300173","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDkxMzAxMDIz","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Iirc this was alreay done in r2 cmp command, so it should be a 5min fix, if no one does it for me i will take care of this when i have some time\n\n> On 09 Apr 2015, at 18:18, jvoisin notifications@github.com wrote:\n> \n> Ask this guy.\n> \n> More seriously, I diffing file in anything else than non-trivial way will require a lot of thinking :)\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n","createdAt":"2015-04-09T17:27:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2338#issuecomment-91301023","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU3ODI5Mzg2OA==","author":{"login":"igittigitthub"},"authorAssociation":"NONE","body":"I wanted to compare two files of 46G but my system only has 32G memory.\r\n\r\nMy output:\r\n```\r\nradiff2: Cannot open FILENAME\r\n```\r\n\r\nMy version:\r\n```\r\nradiff2 2.3.0 0 @ linux-x86-64 git.2.3.0\r\ncommit: HEAD build: 2018-02-23__17:22:33\r\n```\r\n\r\nA more detailed output would be nice. Maybe something like \"Not enough memory\" :)","createdAt":"2020-01-24T20:43:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2338#issuecomment-578293868","viewerDidAuthor":false}],"number":2338,"title":"radiff2: support comparing files larger than available memory"},{"body":"Add some options to specify how do we want to visualize the [dwarf](http://dwarfstd.org) addrline information in the disassembly. here there are some of the ideas:\n- Show only filename instead of full path\n- Show contents of file\n- Allow to override base directory for sourcecode\n- Add support for source code breakpoints (`dbl`?)\n\n```\n[0x00402a10]> CL*~668[1]\nradare2.c:668\n[0x00402a10]> CL*~668[2]\n0x40516d\n[0x00402a10]> db `CL*~668[2]`\n```\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDc0MDU1MjA3","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"We can add a `CL` subcommand to convert `file:line->addr` and `addr->file:line` to make that db `CL...` easier. But I think that breakpoints should keep or display the addrline info is available\n","createdAt":"2015-02-12T11:18:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2079#issuecomment-74055207","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyNjg4Njk2OA==","author":{"login":"MaskRay"},"authorAssociation":"CONTRIBUTOR","body":"I do not have a Mac OS X or Windows. Can you paste the output of `readelf -w $executable | grep DW_AT_dwo_name`. I guess the split dwo is stored there.","createdAt":"2017-09-04T07:31:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2079#issuecomment-326886968","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyNjg5OTU4Nw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"? The information is stored in sdb already","createdAt":"2017-09-04T08:29:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/2079#issuecomment-326899587","viewerDidAuthor":false}],"number":2079,"title":"Add more options for DWARF"},{"body":"When output is too big in `scr.interactive` there should be more options than just \"Yes\" or \"No\".\n\nI'm proposing the following:\n- p : use `scr.pager` (less, more, ..)\n- 10 : any numeric argument will assume that it must flush only the first 10 lines and drop the rest. \n\nWe can add `r_cons_head()` and `r_cons_tail()` functions to chop the non-flushed buffer.\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDcwMzUzNzE0","author":{"login":"jvoisin"},"authorAssociation":"CONTRIBUTOR","body":"What about `pager` instead of `p`, since it's not _that obvious_.\n","createdAt":"2015-01-17T04:05:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/1973#issuecomment-70353714","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcwMzYxMjIx","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"The yesno() expects only 1 char\n\n> On 17 Jan 2015, at 05:05, jvoisin notifications@github.com wrote:\n> \n> What about pager instead of p, since it's not that obvious.\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n","createdAt":"2015-01-17T09:54:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/1973#issuecomment-70361221","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDcxODE3NzA1","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"the value in scr.interactive can be pager perfectly. i was talking about the function itself\n","createdAt":"2015-01-28T11:15:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/1973#issuecomment-71817705","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg0OTE2Mjk1","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"instead of saying \"wanna dump 300KB of text\" just say: \"wanna see 200 lines of text?\"\n","createdAt":"2015-03-23T09:46:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/1973#issuecomment-84916295","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDY3Nzc3OQ==","author":{"login":"stale"},"authorAssociation":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. Considering a lot has changed since its creation, we kindly ask you to check again if the issue you reported is still relevant in the current version of radare2. If it is, update this issue with a comment, otherwise it will be automatically closed if no further activity occurs. Thank you for your contributions.\n","createdAt":"2020-06-16T10:26:07Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/1973#issuecomment-644677779","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NDc3NzUzMQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Still waiting for feedback or comments after 5 years. Personally i dont think we need any configuration overcomplications here. but maybe its worth to check when the output contains a very long line show in size instead of lines. to confirm the user, because a 100MB single line will just say: \"do you want to print 1 line?\" which makes not much sense to warn the user for that when the reality is another.\r\n\r\nSo yeah, this bug must be fixed still","createdAt":"2020-06-16T13:48:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/1973#issuecomment-644777531","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDc3ODY1MzU5OA==","author":{"login":"alex-bender"},"authorAssociation":"CONTRIBUTOR","body":"@trufae I'm going to check that","createdAt":"2021-02-13T17:56:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/1973#issuecomment-778653598","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc3ODY1MzYyNA==","author":{"login":"alex-bender"},"authorAssociation":"CONTRIBUTOR","body":"Any hints where to start?","createdAt":"2021-02-13T17:56:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/1973#issuecomment-778653624","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc4OTA2MTk3NA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"i would start like this:\r\n\r\n```\r\n[0x100001060]> cat /etc/services\r\nDo you want to print 13921 lines? (y/N)\r\n```\r\n\r\ngrep in the r2 source code to find this message. ( git grep 'Do you want to print')\r\n\r\nwhen found. youll see something like this:\r\n\r\n<img width=\"1430\" alt=\"Screenshot 2021-03-02 at 18 04 12\" src=\"https://user-images.githubusercontent.com/6431515/109685628-b99cf100-7b81-11eb-8a54-2b0f6f22efff.png\">\r\n\r\nso the steps to solve this problem would be:\r\n\r\n* Remove the COUNT_LINES ifdef, the else branch have not been used and its not that slow to count chars everytime we print something..\r\n* Move the count lines to a separate function\r\n* Make this function count an extra line every time there's a line with more than 80 chars","createdAt":"2021-03-02T17:05:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/1973#issuecomment-789061974","viewerDidAuthor":true}],"number":1973,"title":"Define number of lines when output is large"},{"body":"- [x] Plain WinDbg protocol support - when radare2 is running on the same machine as kernel debugging enabled\r\n- [ ] Working via Serial link (using [libserialport](http://sigrok.org/wiki/Libserialport) - crossplatform LGPLv3 library)\r\n  - [ ] Userspace programs debugging\r\n  - [ ] Kernel debugging\r\n- [ ] Working via ethernet connection (using r_socket, probably sharing some code with shlr/gdb) - https://github.com/radareorg/radare2/pull/17340\r\n- [ ] KVDM (Hyper-V) protocol support\r\n- [ ] Add reversible debugging support (time travel debug)\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0Mzc5Njg2","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ref https://github.com/radare/radare2/pull/1692\n","createdAt":"2014-11-25T10:31:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-64379686","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDEzNTIyMTM4MQ==","author":{"login":"Manouchehri"},"authorAssociation":"CONTRIBUTOR","body":"Aside from the lack of support in anything except for 8, 8.1 and 10, is there any reason to use a virtual serial device instead of Ethernet?\n","createdAt":"2015-08-27T00:45:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-135221381","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDEzNTM5Nzk5Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"A serial port requires much less code to work, so its usually less intrussive to debug kernels over serial port than ethernet. Networking requires a lot of logic and drivers to work. Serial port debugging is not supported on win>=8?\n","createdAt":"2015-08-27T11:47:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-135397997","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDEzNTM5ODEyMA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"At the end, the protocol is the same, so, it should be possible to use r2 with socat\n","createdAt":"2015-08-27T11:47:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-135398120","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDEzNTM5ODM0Nw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@Manouchehri @radare Ethernet is in TODO, but it much more complex. And it has some differences between windbg over serial and over ethernet.\n","createdAt":"2015-08-27T11:49:51Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-135398347","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDEzNTUyMjY5Mg==","author":{"login":"Manouchehri"},"authorAssociation":"CONTRIBUTOR","body":"@radare Sorry, serial debugging is included in Windows >= 8 as well. I meant that in addition to serial debugging, there's also network debugging (and is not included in < 8). My bad for wording that poorly.\n\nI've heard some [complaints](https://www.virtualbox.org/ticket/7074) about performance when using a 115.2 Kbps serial link; at the same time, I rarely see anyone using the kernel-mode debugger with Ethernet, so I wanted to double check to make sure I wasn't overlooking something.\n\n`bcdedit` seems to insist upon [creating a key](https://msdn.microsoft.com/en-us/library/windows/hardware/hh439346%28v=vs.85%29.aspx) for network debugging. I [don't see](https://msdn.microsoft.com/en-us/library/windows/hardware/ff542187%28v=vs.85%29.aspx) a flag for forcing it off, so slightly more than just piping traffic needs to be done.\n\n@JumpCallPop already has a lot of the work done with [libKDNET](https://github.com/JumpCallPop/libKDNET). I couldn't find any other work done on KDNET aside from this. If anyone else has more information, feel free to pipe in. =) \n\n@XVilka Thanks. Any suggestions on where I should start? If not, I'll just poke around.\n","createdAt":"2015-08-27T18:55:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-135522692","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDEzNTU2NTYwNA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@Manouchehri see the https://github.com/radare/radare2/tree/master/shlr/wind - this is the implementation of the WinDbg protocol and this is a radare2 part of WinDbg support https://github.com/radare/radare2/blob/master/libr/debug/p/debug_wind.c\n\nHere is the documentation how to work with it using radare2 https://github.com/radare/radare2/blob/master/doc/windbg\n\nI think you need to see shlr/wind/transport.[ch] and shlr/wind/iob_pipe.c\n\nPlease, notice that all WinDbg code should be under LGPLv3.\n","createdAt":"2015-08-27T21:50:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-135565604","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDEzNTU2NTkwMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@Manouchehri and a bit more links:\nYou can find Windbg protocol description in this BlackHat paper https://www.blackhat.com/presentations/bh-usa-07/Stewart/Presentation/bh-usa-07-stewart.pdf\n\nSee also VirtualKD program http://virtualkd.sysprogs.org/\nSources http://virtualkd.sysprogs.org/download_source/\n\nAnd KD protocol description http://articles.sysprogs.org/kdvmware/kdcom/\nPacket log http://virtualkd.sysprogs.org/kd_VMXPPRO/\n\nWinDbg protocol sniffer - https://code.google.com/p/windbgshark/\n\nhttp://www.msuiche.net/2014/01/12/extengcpp-part-1/\nhttp://www.msuiche.net/2014/01/15/developing-windbg-extengcpp-extension-in-c-com-interface/\nhttp://www.msuiche.net/2014/01/20/developing-windbg-extengcpp-extension-in-c-memory-debugger-markup-language-dml-part-3/\nhttp://www.msuiche.net/2014/04/28/developing-windbg-extengcpp-extension-in-c-symbols-part-4/\n","createdAt":"2015-08-27T21:52:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-135565901","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDEzNTU2NjA2MA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"And of course, see the famous PyKD sources too https://pykd.codeplex.com/\n","createdAt":"2015-08-27T21:53:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-135566060","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDEzNTU2NjI4Ng==","author":{"login":"Manouchehri"},"authorAssociation":"CONTRIBUTOR","body":"Perfect, thanks! Glad I asked, those links should keep me busy for awhile.\n","createdAt":"2015-08-27T21:54:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-135566286","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDEzNTU2NjM2Mg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@Manouchehri and a few more links \n\nhttp://standa-note.blogspot.ca/2015/06/reverse-engineering-winbg-for-profit.html\nhttps://github.com/tandasat/ListWorkItems\n","createdAt":"2015-08-27T21:55:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-135566362","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDEzNTU2Njg1MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@Manouchehri and one more thing:\nif you want to help - we have one very annoying thing for now too:\n\n```\nAt this point, we will get stuck here:\n\n    [0x828997b8]> pd 20\n           ;-- eip:\n           0x828997b8    cc           int3\n           0x828997b9    c20400       ret 4\n           0x828997bc    cc           int3\n           0x828997bd    90           nop\n           0x828997be    c3           ret\n           0x828997bf    90           nop\n\nIn order to skip that trap we will need to change eip and run 'dc' twice:\n\n    dr eip=eip+1\n    dc\n    dr eip=eip+1\n    dc\n\nNow the Windows VM will be interactive again. We will need to kill r2 and\nattach again to get back to control the kernel.\n```\n\nPreventing this somehow would be awesome.\nGood luck!\n","createdAt":"2015-08-27T21:57:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-135566851","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDEzNTU2Nzc3OA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@Manouchehri sorry for spamming you, but forgot also to mention that using RSocket (r_socket) will help you to forget about platform support, see https://github.com/radare/radare2/tree/master/libr/socket\n\nFor usage example see HTTP server sources https://github.com/radare/radare2/blob/master/libr/socket/http_server.c\n","createdAt":"2015-08-27T22:03:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-135567778","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDEzNTU2ODA0OQ==","author":{"login":"Manouchehri"},"authorAssociation":"CONTRIBUTOR","body":"No problem, it's my fault for not joining the IRC channel. I'll get around to that sometime.\n","createdAt":"2015-08-27T22:04:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-135568049","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIyMzA2NTE2Mw==","author":{"login":"Lekensteyn"},"authorAssociation":"NONE","body":"I wrote a Wireshark dissector for part of the Windbg/KD network protocol:\nhttps://github.com/Lekensteyn/kdnet\n\nIt is incomplete, but decryption works and most higher-level structures are dissected. Here is also a capture and the related Windbg output with a Windows 10 machine as debugger and Checked/Debug build of Windows 10 as debuggee:\nhttps://lekensteyn.nl/files/p651ra-acpi-debug/\n\nHope it helps in some way.\n","createdAt":"2016-06-01T17:26:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-223065163","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIyMzE3MzY5Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Cc @skuater @jroimartin @xvilka\n\n> On 01 Jun 2016, at 19:26, Peter Wu notifications@github.com wrote:\n> \n> I wrote a Wireshark dissector for part of the Windbg/KD network protocol:\n> https://github.com/Lekensteyn/kdnet\n> \n> It is incomplete, but decryption works and most higher-level structures are dissected. Here is also a capture and the related Windbg output with a Windows 10 machine as debugger and Checked/Debug build of Windows 10 as debuggee:\n> https://lekensteyn.nl/files/p651ra-acpi-debug/\n> \n> Hope it helps in some way.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n","createdAt":"2016-06-02T01:39:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-223173697","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIyMzI1ODA4Mw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@Lekensteyn thanks a lot! I'll check this\n","createdAt":"2016-06-02T10:49:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-223258083","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIyMzY0NTE2Mw==","author":{"login":""},"authorAssociation":"NONE","body":"Hello !\n\nThis will be usefull for you :\n\nhttps://github.com/Winbagility/Winbagility/tree/master/src/Winbagility\n\n2016-06-02 12:49 GMT+02:00 Anton Kochkov notifications@github.com:\n\n> @Lekensteyn https://github.com/Lekensteyn thanks a lot! I'll check this\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/radare/radare2/issues/1246#issuecomment-223258083,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AHFsulqnoXvy3mBvQQ_PN725Ajrv2a16ks5qHrUngaJpZM4CbXg4\n> .\n","createdAt":"2016-06-03T17:43:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-223645163","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0MTMxNjIzOA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@xarkes can you please write small summary here, what is still missing. what doesn't work as expected, what can/should be done, what are biggest challenges on improving WinDbg support, like a note for a future developer, who will want to continue it?","createdAt":"2017-11-02T04:42:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-341316238","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0MTMzMTQwNQ==","author":{"login":"xarkes"},"authorAssociation":"CONTRIBUTOR","body":"- [ ] Check that windbg:// still works after SIOL merge (could not check/fix it)\r\n- [ ] Make \"dc\" and \"dcu\" work (for now only single stepping)\r\n\r\nThis would allow anyone to work more fluently with it. Then comes:\r\n- [ ] Thread/Context switching\r\n- [ ] Implement network transport to allow faster connection\r\n\r\nThat's all I have in mind for now","createdAt":"2017-11-02T06:41:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-341331405","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM0MTYxMzgxMA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@josediazfer since you are on Windows debugging you may also want to check this one, if you are interested.","createdAt":"2017-11-03T03:10:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-341613810","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMTUwNzgyMQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@GustavoLCR @pelijah FYI","createdAt":"2019-08-15T04:18:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-521507821","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0MjU4MzY2NA==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"any update on this issue @XVilka ?","createdAt":"2020-06-11T11:30:19Z","includesCreatedEdit":false,"isMinimized":true,"minimizedReason":"outdated","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-642583664","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY0ODA1ODg5MA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"This issue has been moved from radareorg/radare2 to radareorg/ideas as we are trying to clean our backlog and this issue has probably been created a long while ago. This is an effort to help contributors understand what are the actionable items they can work on, prioritize issues better and help users find active/duplicated issues more easily. If this is not an enhancement/improvement/general idea but a bug, feel free to ask for re-transfer to main repo. Thanks for your understanding and contribution with this issue.","createdAt":"2020-06-23T10:36:09Z","includesCreatedEdit":false,"isMinimized":true,"minimizedReason":"outdated","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/17130#issuecomment-648058890","viewerDidAuthor":false}],"number":17130,"title":"WinDbg/KD protocol support"},{"body":"We can get some ideas from lldb:\n\n```\nThe following subcommands are supported:\n\n    clear   -- Clears a breakpoint or set of breakpoints in the executable.\n    command -- A set of commands for adding, removing and examining bits of code to be executed when the breakpoint is hit (breakpoint\n               'commmands').\n    delete  -- Delete the specified breakpoint(s).  If no breakpoints are specified, delete them all.\n    disable -- Disable the specified breakpoint(s) without removing it/them.  If no breakpoints are specified, disable them all.\n    enable  -- Enable the specified disabled breakpoint(s). If no breakpoints are specified, enable all of them.\n    list    -- List some or all breakpoints at configurable levels of detail.\n    modify  -- Modify the options on a breakpoint or set of breakpoints in the executable.  If no breakpoint is specified, acts on the\n               last created breakpoint.  With the exception of -e, -d and -i, passing an empty argument clears the modification.\n    set     -- Sets a breakpoint or set of breakpoints in the executable.\n\nFor more help on any particular subcommand, type 'help <command> <subcommand>'.\n(lldb) help breakpoint set\n   Sets a breakpoint or set of breakpoints in the executable.\n\nSyntax: breakpoint set <cmd-options>\n\nCommand Options Usage:\n  breakpoint set [-Ho] -l <linenum> [-s <shlib-name>] [-i <count>] [-c <expr>] [-x <thread-index>] [-t <thread-id>] [-T <thread-name>] [-q <queue-name>] [-f <filename>] [-K <boolean>]\n  breakpoint set [-Ho] -a <address-expression> [-s <shlib-name>] [-i <count>] [-c <expr>] [-x <thread-index>] [-t <thread-id>] [-T <thread-name>] [-q <queue-name>]\n  breakpoint set [-Ho] -n <function-name> [-s <shlib-name>] [-i <count>] [-c <expr>] [-x <thread-index>] [-t <thread-id>] [-T <thread-name>] [-q <queue-name>] [-f <filename>] [-K <boolean>]\n  breakpoint set [-Ho] -F <fullname> [-s <shlib-name>] [-i <count>] [-c <expr>] [-x <thread-index>] [-t <thread-id>] [-T <thread-name>] [-q <queue-name>] [-f <filename>] [-K <boolean>]\n  breakpoint set [-Ho] -S <selector> [-s <shlib-name>] [-i <count>] [-c <expr>] [-x <thread-index>] [-t <thread-id>] [-T <thread-name>] [-q <queue-name>] [-f <filename>] [-K <boolean>]\n  breakpoint set [-Ho] -M <method> [-s <shlib-name>] [-i <count>] [-c <expr>] [-x <thread-index>] [-t <thread-id>] [-T <thread-name>] [-q <queue-name>] [-f <filename>] [-K <boolean>]\n  breakpoint set [-Ho] -r <regular-expression> [-s <shlib-name>] [-i <count>] [-c <expr>] [-x <thread-index>] [-t <thread-id>] [-T <thread-name>] [-q <queue-name>] [-f <filename>] [-K <boolean>]\n  breakpoint set [-Ho] -b <function-name> [-s <shlib-name>] [-i <count>] [-c <expr>] [-x <thread-index>] [-t <thread-id>] [-T <thread-name>] [-q <queue-name>] [-f <filename>] [-K <boolean>]\n  breakpoint set [-Ho] -p <regular-expression> [-s <shlib-name>] [-i <count>] [-c <expr>] [-x <thread-index>] [-t <thread-id>] [-T <thread-name>] [-q <queue-name>] [-f <filename>]\n  breakpoint set [-Ho] -E <language> [-i <count>] [-c <expr>] [-x <thread-index>] [-t <thread-id>] [-T <thread-name>] [-q <queue-name>] [-w <boolean>] [-h <boolean>]\n\n       -E <language> ( --language-exception <language> )\n            Set the breakpoint on exceptions thrown by the specified language (without options, on throw but not catch.)\n\n       -F <fullname> ( --fullname <fullname> )\n            Set the breakpoint by fully qualified function names. For C++ this means namespaces and all arguments, and for Objective C\n            this means a full function prototype with class and selector.   Can be repeated multiple times to make one breakpoint for\n            multiple names.\n\n       -H ( --hardware )\n            Require the breakpoint to use hardware breakpoints.\n\n       -K <boolean> ( --skip-prologue <boolean> )\n            sKip the prologue if the breakpoint is at the beginning of a function.  If not set the target.skip-prologue setting is\n            used.\n\n       -M <method> ( --method <method> )\n            Set the breakpoint by C++ method names.  Can be repeated multiple times to make one breakpoint for multiple methods.\n\n       -S <selector> ( --selector <selector> )\n            Set the breakpoint by ObjC selector name. Can be repeated multiple times to make one breakpoint for multiple Selectors.\n\n       -T <thread-name> ( --thread-name <thread-name> )\n            The breakpoint stops only for the thread whose thread name matches this argument.\n\n       -a <address-expression> ( --address <address-expression> )\n            Set the breakpoint by address, at the specified address.\n\n       -b <function-name> ( --basename <function-name> )\n            Set the breakpoint by function basename (C++ namespaces and arguments will be ignored). Can be repeated multiple times to\n            make one breakpoint for multiple symbols.\n\n       -c <expr> ( --condition <expr> )\n            The breakpoint stops only if this condition expression evaluates to true.\n\n       -f <filename> ( --file <filename> )\n            Specifies the source file in which to set this breakpoint.  Note, by default lldb only looks for files that are #included\n            if they use the standard include file extensions.  To set breakpoints on .c/.cpp/.m/.mm files that are #included, set\n            target.inline-breakpoint-strategy to \"always\".\n\n       -h <boolean> ( --on-catch <boolean> )\n            Set the breakpoint on exception catcH.\n\n       -i <count> ( --ignore-count <count> )\n            Set the number of times this breakpoint is skipped before stopping.\n\n       -l <linenum> ( --line <linenum> )\n            Specifies the line number on which to set this breakpoint.\n\n       -n <function-name> ( --name <function-name> )\n            Set the breakpoint by function name.  Can be repeated multiple times to make one breakpoint for multiple names\n\n       -o ( --one-shot )\n            The breakpoint is deleted the first time it causes a stop.\n\n       -p <regular-expression> ( --source-pattern-regexp <regular-expression> )\n            Set the breakpoint by specifying a regular expression which is matched against the source text in a source file or files\n            specified with the -f option.  The -f option can be specified more than once.  If no source files are specified, uses the\n            current \"default source file\"\n\n       -q <queue-name> ( --queue-name <queue-name> )\n            The breakpoint stops only for threads in the queue whose name is given by this argument.\n\n       -r <regular-expression> ( --func-regex <regular-expression> )\n            Set the breakpoint by function name, evaluating a regular-expression to find the function name(s).\n\n       -s <shlib-name> ( --shlib <shlib-name> )\n            Set the breakpoint only in this shared library.  Can repeat this option multiple times to specify multiple shared\n            libraries.\n\n       -t <thread-id> ( --thread-id <thread-id> )\n            The breakpoint stops only for the thread whose TID matches this argument.\n\n       -w <boolean> ( --on-throw <boolean> )\n            Set the breakpoint on exception throW.\n\n       -x <thread-index> ( --thread-index <thread-index> )\n            The breakpoint stops only for the thread whose indeX matches this argument.\n```\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDI3MjQzMTQ5MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cc @leberus ","createdAt":"2017-01-13T12:23:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/1225#issuecomment-272431490","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI3MjQ0NzMyMA==","author":{"login":"leberus"},"authorAssociation":"CONTRIBUTOR","body":"i'll take a look ;)\r\n","createdAt":"2017-01-13T13:51:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/1225#issuecomment-272447320","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3ODE2NDE1NA==","author":{"login":"Synray"},"authorAssociation":"CONTRIBUTOR","body":"Is anyone working on these? I'll tackle some of these options.","createdAt":"2018-04-03T08:05:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/1225#issuecomment-378164154","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3ODIyMTQ3Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"No one afaik\n\n> On 3 Apr 2018, at 10:05, Abominas <notifications@github.com> wrote:\n> \n> Is anyone working on these? I'll tackle some of these options.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2018-04-03T11:44:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/1225#issuecomment-378221476","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3ODMyOTI2NA==","author":{"login":"Synray"},"authorAssociation":"CONTRIBUTOR","body":"Ok, I'll start working on -o and -i.","createdAt":"2018-04-03T17:21:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/1225#issuecomment-378329264","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3ODYyMTIwOQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"good\n\n> On 3 Apr 2018, at 19:21, Abominas <notifications@github.com> wrote:\n> \n> Ok, I'll start working on -o and -i.\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/radare/radare2/issues/1225#issuecomment-378329264>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AA3-lg3Xy5w_FaaOIz7lIVSICwR1ivxHks5tk6-pgaJpZM4CZJOA>.\n> \n\n","createdAt":"2018-04-04T14:32:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/1225#issuecomment-378621209","viewerDidAuthor":false}],"number":1225,"title":"Better breakpoints"},{"body":"This will be useful to extend the already existing asm/disasm plugins by just overriding some instructions. Also, we need a way to hook on the parser or the postprocessing stage in order to modify the resulting disassembled string.\n\nThis should be done at C and bindings level (duktape?)\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0MjU4NDI1Nw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"@thestr4ng3r any comments on this for RArch?","createdAt":"2020-06-11T11:31:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/1143#issuecomment-642584257","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY0Mjg5NjUzNw==","author":{"login":"thestr4ng3r"},"authorAssociation":"CONTRIBUTOR","body":"I was thinking about separating \"plugin name\" from \"arch name\". So one plugin can support multiple architectures and one architecture can be supported by multiple plugins. That way, the fallback would be easy to do by just using another plugin that supports the same arch. What do you think about this approach?","createdAt":"2020-06-11T19:55:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/1143#issuecomment-642896537","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0MzY0ODY0OQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"That's exactly how it works now, RAsmPlugin and RAnalPlugin have *name and *arch. this is how the assembler plugin is autoselected when the disasm plugin doesn't have an assembler callback","createdAt":"2020-06-13T16:49:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/1143#issuecomment-643648649","viewerDidAuthor":true}],"number":1143,"title":"Implement support for chained/fallback RAsm plugins"},{"body":"[fedora@localhost malware]$ winedbg --gdb --no-start shylock_d.exe \n003e:003f: create process 'Z:\\home\\fedora\\malware\\shylock_d.exe'/0x1106e8 @0x4044b0 (0<0>)\n003e:003f: create thread I @0x4044b0\ntarget remote localhost:44840\n003e:003f: loads DLL C:\\windows\\system32\\KERNEL32.dll @0x7b810000 (0<0>)\n003e:003f: loads DLL C:\\windows\\system32\\ntdll.dll @0x7bc10000 (0<0>)\n003e:003f: loads DLL C:\\windows\\system32\\advapi32.dll @0x7ec70000 (0<0>)\n003e:003f: loads DLL C:\\windows\\system32\\gdi32.dll @0x7ece0000 (0<0>)\n003e:003f: loads DLL C:\\windows\\system32\\version.dll @0x7eaf0000 (0<0>)\n003e:003f: loads DLL C:\\windows\\system32\\user32.dll @0x7eb10000 (0<0>)\n003e:003f: loads DLL C:\\windows\\system32\\rpcrt4.dll @0x7e880000 (0<0>)\n003e:003f: loads DLL C:\\windows\\system32\\ole32.dll @0x7e900000 (0<0>)\n003e:003f: loads DLL C:\\windows\\system32\\msacm32.dll @0x7e840000 (0<0>)\n003e:003f: loads DLL C:\\windows\\system32\\winmm.dll @0x7ea40000 (0<0>)\n003e:003f: loads DLL C:\\windows\\system32\\winscard.dll @0x7e830000 (0<0>)\n0000003e:0000003f: exception code=0x80000003\n\n[fedora@localhost malware]$ r2 gdb://localhost:44840\nr_debug_select: 6 6\np/debug_native.c:2382 debug_init_maps: /proc: No such file or directory\nr_debug_select: 146750248 6\nr_debug_reg: error reading registers pid=146750248\nr_debug_reg: error reading registers pid=146750248\n -- Use hasher to calculate hashes of portion blocks of a file\nr_debug_reg: error reading registers pid=146750248\n[0x00000000]> \n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQzODExNjEx","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@rlaemmert - that may be related to the libgdbr\n","createdAt":"2014-05-21T20:46:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/955#issuecomment-43811611","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzODQyMTc4","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Different register profile maybe?\n\n> On 21 May 2014, at 22:46, Anton Kochkov notifications@github.com wrote:\n> \n> @rlaemmert - that may be related to the libgdbr\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n","createdAt":"2014-05-22T02:19:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/955#issuecomment-43842178","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQzODQyNDU1","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Try adding -D gdb\n\n> On 21 May 2014, at 22:44, Anton Kochkov notifications@github.com wrote:\n> \n> [fedora@localhost malware]$ winedbg --gdb --no-start shylock_d.exe \n> 003e:003f: create process 'Z:\\home\\fedora\\malware\\shylock_d.exe'/0x1106e8 @0x4044b0 (0)\n> 003e:003f: create thread I @0x4044b0\n> target remote localhost:44840\n> 003e:003f: loads DLL C:\\windows\\system32\\KERNEL32.dll @0x7b810000 (0)\n> 003e:003f: loads DLL C:\\windows\\system32\\ntdll.dll @0x7bc10000 (0)\n> 003e:003f: loads DLL C:\\windows\\system32\\advapi32.dll @0x7ec70000 (0)\n> 003e:003f: loads DLL C:\\windows\\system32\\gdi32.dll @0x7ece0000 (0)\n> 003e:003f: loads DLL C:\\windows\\system32\\version.dll @0x7eaf0000 (0)\n> 003e:003f: loads DLL C:\\windows\\system32\\user32.dll @0x7eb10000 (0)\n> 003e:003f: loads DLL C:\\windows\\system32\\rpcrt4.dll @0x7e880000 (0)\n> 003e:003f: loads DLL C:\\windows\\system32\\ole32.dll @0x7e900000 (0)\n> 003e:003f: loads DLL C:\\windows\\system32\\msacm32.dll @0x7e840000 (0)\n> 003e:003f: loads DLL C:\\windows\\system32\\winmm.dll @0x7ea40000 (0)\n> 003e:003f: loads DLL C:\\windows\\system32\\winscard.dll @0x7e830000 (0)\n> 0000003e:0000003f: exception code=0x80000003\n> \n> [fedora@localhost malware]$ r2 gdb://localhost:44840\n> r_debug_select: 6 6\n> p/debug_native.c:2382 debug_init_maps: /proc: No such file or directory\n> r_debug_select: 146750248 6\n> r_debug_reg: error reading registers pid=146750248\n> r_debug_reg: error reading registers pid=146750248\n> -- Use hasher to calculate hashes of portion blocks of a file\n> r_debug_reg: error reading registers pid=146750248\n> [0x00000000]>\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n","createdAt":"2014-05-22T02:25:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/955#issuecomment-43842455","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0MDY2ODk2","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"It worksif run it as `r2 -a x86 -b 32 gdb://` but when loaded it shows only zeroes in p\\* output\n","createdAt":"2014-05-23T22:26:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/955#issuecomment-44066896","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0MDgwMjY5","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Rio is broken now for debuggers. Current issue is not gdb specific\n\n> On 24 May 2014, at 00:26, Anton Kochkov notifications@github.com wrote:\n> \n> It worksif run it as r2 -a x86 -b 32 gdb:// but when loaded it shows only zeroes in p\\* output\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n","createdAt":"2014-05-24T07:35:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/955#issuecomment-44080269","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0MTA5MDU0","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"The r_io should be fixed now. use -D too, this will enable the io.raw=true and cfg.debug=true\nPlease verify\n","createdAt":"2014-05-25T01:39:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/955#issuecomment-44109054","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0MjEwMzIy","author":{"login":"rlaemmert"},"authorAssociation":"CONTRIBUTOR","body":"Hm nothing gdb specific seems to work now. Just tested the connection to my qemu win8 x64 instance...\n","createdAt":"2014-05-26T18:44:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/955#issuecomment-44210322","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0Mjk4NzM3","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I cant manage to get --no-start or --gdb working beside iits listed in winedbg help.\n\nWe need a gdbserver implementation in r2. Anyone? :)\n\n> On 26 May 2014, at 20:44, Rene Laemmert notifications@github.com wrote:\n> \n> Hm nothing gdb specific seems to work now. Just tested the connection to my qemu win8 x64 instance...\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n","createdAt":"2014-05-27T16:19:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/955#issuecomment-44298737","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0Mjk5OTk0","author":{"login":"rlaemmert"},"authorAssociation":"CONTRIBUTOR","body":"We need a fully working debuggin facility first :P\nWrite registers would be nice\n\nOn Tue, May 27, 2014 at 6:19 PM, radare notifications@github.com wrote:\n\n> I cant manage to get --no-start or --gdb working beside iits listed in\n> winedbg help.\n> \n> We need a gdbserver implementation in r2. Anyone? :)\n> \n> > On 26 May 2014, at 20:44, Rene Laemmert notifications@github.com\n> > wrote:\n> > \n> > Hm nothing gdb specific seems to work now. Just tested the connection to\n> > my qemu win8 x64 instance...\n> > \n> > â€”\n> > Reply to this email directly or view it on GitHub.\n> \n> â€”\n> Reply to this email directly or view it on GitHubhttps://github.com/radare/radare2/issues/955#issuecomment-44298737\n> .\n","createdAt":"2014-05-27T16:28:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/955#issuecomment-44299994","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0MzAyMDMz","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"This was workinf in the previous implementation :p\n\n> On 27 May 2014, at 18:28, Rene Laemmert notifications@github.com wrote:\n> \n> We need a fully working debuggin facility first :P \n> Write registers would be nice \n> \n> On Tue, May 27, 2014 at 6:19 PM, radare notifications@github.com wrote: \n> \n> > I cant manage to get --no-start or --gdb working beside iits listed in \n> > winedbg help. \n> > \n> > We need a gdbserver implementation in r2. Anyone? :) \n> > \n> > > On 26 May 2014, at 20:44, Rene Laemmert notifications@github.com \n> > > wrote: \n> > > \n> > > Hm nothing gdb specific seems to work now. Just tested the connection to \n> > > my qemu win8 x64 instance... \n> > > \n> > > â€” \n> > > Reply to this email directly or view it on GitHub. \n> > \n> > â€” \n> > Reply to this email directly or view it on GitHubhttps://github.com/radare/radare2/issues/955#issuecomment-44298737 \n> > . \n> > \n> > â€”\n> > Reply to this email directly or view it on GitHub.\n","createdAt":"2014-05-27T16:43:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/955#issuecomment-44302033","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0MzAyMjM3","author":{"login":"rlaemmert"},"authorAssociation":"CONTRIBUTOR","body":"Dont think so :P\n\nOn Tue, May 27, 2014 at 6:43 PM, radare notifications@github.com wrote:\n\n> This was workinf in the previous implementation :p\n> \n> > On 27 May 2014, at 18:28, Rene Laemmert notifications@github.com\n> > wrote:\n> > \n> > We need a fully working debuggin facility first :P\n> > Write registers would be nice\n> > \n> > On Tue, May 27, 2014 at 6:19 PM, radare notifications@github.com\n> > wrote:\n> > \n> > > I cant manage to get --no-start or --gdb working beside iits listed in\n> > > winedbg help.\n> > > \n> > > We need a gdbserver implementation in r2. Anyone? :)\n> > > \n> > > > On 26 May 2014, at 20:44, Rene Laemmert notifications@github.com\n> > > > wrote:\n> > > > \n> > > > Hm nothing gdb specific seems to work now. Just tested the\n> > > > connection to\n> > > > my qemu win8 x64 instance...\n> > > > \n> > > > â€”\n> > > > Reply to this email directly or view it on GitHub.\n> > > \n> > > â€”\n> > > Reply to this email directly or view it on GitHub<\n> > > https://github.com/radare/radare2/issues/955#issuecomment-44298737>\n> > > .\n> > > \n> > > â€”\n> > > Reply to this email directly or view it on GitHub.\n> \n> â€”\n> Reply to this email directly or view it on GitHubhttps://github.com/radare/radare2/issues/955#issuecomment-44302033\n> .\n","createdAt":"2014-05-27T16:45:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/955#issuecomment-44302237","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ0Mzc1MjU0","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"All debuggrrs only work if loaded with -n. Will look at this bug later, but the io seems to work better now\n\n> On 27 May 2014, at 18:45, Rene Laemmert notifications@github.com wrote:\n> \n> Dont think so :P \n> \n> On Tue, May 27, 2014 at 6:43 PM, radare notifications@github.com wrote: \n> \n> > This was workinf in the previous implementation :p \n> > \n> > > On 27 May 2014, at 18:28, Rene Laemmert notifications@github.com \n> > > wrote: \n> > > \n> > > We need a fully working debuggin facility first :P \n> > > Write registers would be nice \n> > > \n> > > On Tue, May 27, 2014 at 6:19 PM, radare notifications@github.com \n> > > wrote: \n> > > \n> > > > I cant manage to get --no-start or --gdb working beside iits listed in \n> > > > winedbg help. \n> > > > \n> > > > We need a gdbserver implementation in r2. Anyone? :) \n> > > > \n> > > > > On 26 May 2014, at 20:44, Rene Laemmert notifications@github.com \n> > > > > wrote: \n> > > > > \n> > > > > Hm nothing gdb specific seems to work now. Just tested the \n> > > > > connection to \n> > > > > my qemu win8 x64 instance... \n> > > > > \n> > > > > â€” \n> > > > > Reply to this email directly or view it on GitHub. \n> > > > \n> > > > â€” \n> > > > Reply to this email directly or view it on GitHub< \n> > > > https://github.com/radare/radare2/issues/955#issuecomment-44298737> \n> > > > . \n> > > > \n> > > > â€” \n> > > > Reply to this email directly or view it on GitHub. \n> > \n> > â€” \n> > Reply to this email directly or view it on GitHubhttps://github.com/radare/radare2/issues/955#issuecomment-44302033 \n> > . \n> > \n> > â€”\n> > Reply to this email directly or view it on GitHub.\n","createdAt":"2014-05-28T07:48:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/955#issuecomment-44375254","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE1MTY0MTA5Mg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@crowell you said it is working for you, can you check please?\n","createdAt":"2015-10-27T20:56:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/955#issuecomment-151641092","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU1OTgxMTYzOQ==","author":{"login":"gtors"},"authorAssociation":"CONTRIBUTOR","body":"Faced with similar problem\r\n\r\n```\r\n> r2 -v\r\nradare2 4.1.0-git 23412 @ linux-x86-64 git.4.0.0-153-ge0b197766\r\ncommit: e0b197766811db0952d243b2df36969d34cee36e build: 2019-11-29__14:23:07\r\n```\r\n\r\n```\r\n> winedbg --gdb --no-start  ViPNet_CSP_RUS_4.2.8.51670.exe\r\n0038:0039: create process ''/0x110968 @0x42d3d5 (0<0>)\r\n0038:0039: create thread I @0x42d3d5\r\ntarget remote localhost:51607\r\n```\r\n\r\n```\r\nr2 -a x86 -b 32 -D gdb gdb://127.0.0.1:51607\r\ngdb.io.open: Cannot connect to host.\r\n[r] Cannot open 'gdb://127.0.0.1:51607'\r\n```\r\n[pcap.zip](https://github.com/radareorg/radare2/files/3905571/pcap.zip)\r\n","createdAt":"2019-11-29T14:44:00Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/955#issuecomment-559811639","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU1OTg3MDA4MA==","author":{"login":"yossizap"},"authorAssociation":"CONTRIBUTOR","body":"Thanks for providing the pcap file! Had a more indicative error in winedbg when I was looking into it recently so I'll take another look. Didn't think anyone uses it until now..\r\n\r\nAccording to Wine devs, the gdb implementation isn't really in use so there might also be some issues on their side. Have you tried debugging wine processes with regular gdb? It should be possible.","createdAt":"2019-11-29T19:38:49Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/955#issuecomment-559870080","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2MDAwODkxMg==","author":{"login":"gtors"},"authorAssociation":"CONTRIBUTOR","body":"> Have you tried debugging wine processes with regular gdb? It should be possible.\r\n\r\nYes, gdb works well. At least I can use breakpoints.","createdAt":"2019-11-30T18:25:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/955#issuecomment-560008912","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU2MDAxMzMxMA==","author":{"login":"yossizap"},"authorAssociation":"CONTRIBUTOR","body":"Great! Will still look into it but at least you have other options for now :) Just use gdbserver with r2 instead of gdb.","createdAt":"2019-11-30T19:15:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/955#issuecomment-560013310","viewerDidAuthor":false}],"number":955,"title":"r2 gdb:// doesn't work with winedbg --gdb --no-start"},{"body":"Used for tracing, breakpointing etc, and running code from inside the api. this will make the debugger loop async and we will require to add other callbacks to handle other exceptions instead of checking right after the `waitpid()` thing\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDIxODczMTQxMw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@jduck your thoughts?\n","createdAt":"2016-05-12T11:32:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/946#issuecomment-218731413","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxODc0MzM3Ng==","author":{"login":"jduck"},"authorAssociation":"CONTRIBUTOR","body":"I'll take this into consideration surely.\n","createdAt":"2016-05-12T12:34:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/radareorg/radare2/issues/946#issuecomment-218743376","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxOTUxMjUxNw==","author":{"login":"jduck"},"authorAssociation":"CONTRIBUTOR","body":"After thinking some more about the issue, I think it's quite doable to have a callback function that gets called whenever a breakpoint is hit. That said, such a thing is only useful when using the r_debug API directly via C or bindings, right? In all likelihood the code would be executed right before \"cmd.bp\" is executed, so it wouldn't exactly be async. If something bad happens during processing of this breakpoint all bets would be off. For example, the user could kill the child or detach the inferior. If they do that, things are going to get really ugly when we attempt to proceed processing the breakpoint handling...\n","createdAt":"2016-05-16T18:52:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/946#issuecomment-219512517","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxOTUxNTY3MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"yep. that callback will be only usable when using the api, but my idea was to use it interanlly because of those hairy corners\n\n> On 16 May 2016, at 20:52, Joshua J. Drake notifications@github.com wrote:\n> \n> After thinking some more about the issue, I think it's quite doable to have a callback function that gets called whenever a breakpoint is hit. That said, such a thing is only useful when using the r_debug API directly via C or bindings, right? In all likelihood the code would be executed right before \"cmd.bp\" is executed, so it wouldn't exactly be async. If something bad happens during processing of this breakpoint all bets would be off. For example, the user could kill the child or detach the inferior. If they do that, things are going to get really ugly when we attempt to proceed processing the breakpoint handling...\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub https://github.com/radare/radare2/issues/946#issuecomment-219512517\n","createdAt":"2016-05-16T19:03:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/946#issuecomment-219515671","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxOTUxOTIxMw==","author":{"login":"jduck"},"authorAssociation":"CONTRIBUTOR","body":"Luckily the handling of when breakpoints are hit is much simpler than continuing afterward. hehe.\n","createdAt":"2016-05-16T19:17:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/946#issuecomment-219519213","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIyODUwMDgzNQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping\n","createdAt":"2016-06-25T01:54:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/946#issuecomment-228500835","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIzODE5NTY5Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@jduck ping?\n","createdAt":"2016-08-08T10:12:59Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/946#issuecomment-238195697","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0MTI2ODA5Mg==","author":{"login":"jduck"},"authorAssociation":"CONTRIBUTOR","body":"Sorry, no time lately :-/\n","createdAt":"2016-08-21T16:46:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/946#issuecomment-241268092","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI3MjQzMDk1Ng==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"cc @leberus ","createdAt":"2017-01-13T12:20:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/946#issuecomment-272430956","viewerDidAuthor":false}],"number":946,"title":"Add C callback in r_bp"},{"body":"# All Portable Executables\r\n\r\n## Related\r\n\r\n* [ ] Doc - TBD\r\n* Tests - https://github.com/radare/radare2-regressions/tree/master/t.formats/pe\r\n* Commands involved - N/A\r\n* [ ] BlogPost - TBD\r\n* .c involved:\r\n    * https://github.com/radare/radare2/blob/master/libr/bin/p/bin_pe.c\r\n\r\n## General Information\r\n\r\n- [ ] Add DLL Characteristics in `iI`, `iIj` (Already parsed in SDB) #6785 Or in `iH` , `iHj` https://github.com/radare/radare2/issues/6759\r\n- [ ] VTABLE detection for MSVC https://github.com/radare/radare2/issues/6851\r\n- [x] Add authentihash and authentihash check in `it` and `itj`\r\n\r\n## R_BIN Enhancement\r\n\r\n radare2-regressions files that are not properly parsed by r2 currently:\r\n- [ ] d_resource.dll\r\n- [ ] d_tiny.dll\r\n- [ ] dosZMXP.exe\r\n- [ ] exe2pe.exe\r\n- [ ] no0code.exe\r\n\r\n## Analysis\r\n\r\n- [ ]  detect and rename the elements/structures accordingly. (See all the +ms_exc.registration.TryLevel etc...) see http://pastebin.com/aLrkiwuM\r\n[reversing-demo.zip](https://github.com/radare/radare2/files/801155/reversing-demo.zip)\r\n\r\n## Resources\r\n\r\n- [ ] Add/remove/modify/dump Resources `rabin2 -O` && `iO`\r\n\r\n## Import/Export Table\r\n\r\n- [ ] Ability to move the import table `rabin2 -O` && `iO`\r\n- [ ] Ability to add/remove import/export library (with prior checks to see if possible) `rabin2 -O` && `iO`\r\n- [ ] Ability to add/remove function to a library (with prior checks to see if possible) `rabin2 -O` && `iO`\r\n- [ ] Ability to dump a process and reconstruct/manipulate IAT (ollydump + IMPrec tool / x64dbg) (https://github.com/OALabs/PyIATRebuild/blob/master/pyiatrebuild.py)\r\n- [ ] Add PE unmapper https://github.com/hasherezade/malware_analysis/tree/master/pe_unmapper {as a r2e module}\r\n- [ ] Implement the Windows API import recovery functionality shown in the apiscout: https://github.com/danielplohmann/apiscout -- (API import recovery: http://byte-atlas.blogspot.de/2017/04/apiscout.html) (https://github.com/danielplohmann/apiscout/issues/1)\r\n- [ ] Add imphash https://github.com/Neo23x0/ImpHash-Generator  {As a r2e module}\r\n\r\n## Rich Header\r\n\r\n- [x] https://github.com/radare/radare2/issues/12889\r\n\r\n## Debug Informations\r\n\r\n- [ ] Display debug file info: age\r\n\r\n## Sections\r\n\r\n- [ ] Add sections headers into the `pf` output\r\n- [ ] Ability to add/resize/move/... sections\r\n\r\n## SEH/VEH\r\n\r\n- [ ] SEH Parser for PE 32 bits see http://blog.davidegrayson.com/2016/02/windows-32-bit-structured-exception.html\r\n- [ ] SEH Parser for PE 64bits see https://github.com/tandasat/scripts_for_RE/blob/master/parse_x64_SEH.py\r\n\r\n# Specific Language Portable Executables\r\n\r\n## .NET\r\n\r\n- [ ] Load and display .NET PE information in `iI,iIj` \r\n- http://www.ntcore.com/files/dotnetformat.htm\r\n- http://www.reddit.com/r/ReverseEngineering/comments/2cw2o2/pe_net_that_is_not_pe_net/\r\n- https://blog.cylance.com/you-me-and-.net-guids\r\nSee preliminary step - https://github.com/radare/radare2/issues/6771\r\n\r\n## Others\r\n\r\n- [ ] A way to handle [RFG](http://redplait.blogspot.ru/2017/03/ida-plugin-for-rfg-fixups-processing.html)\r\n- [ ] A way to handle [AutoIT](https://www.autoitscript.com/site/autoit/) PE\r\n- [ ] A way to handle [AutoHotKey](http://www.autohotkey.com/) PE\r\n- [ ] A way to handle Delphi  like it is done with this ida and associated plugins idr, idc scripts, https://github.com/nccgroup/pythia etc...\r\n- [x] A way to handle VB5/VB6  - fixed by @aaSSfxxx https://github.com/aaSSfxxx/r2_scripts/blob/master/vb_analysis.py\r\n- [ ] Add the VB helper script in Core - https://github.com/radare/radare2/issues/12311\r\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDMwODYyMzYzNw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"https://github.com/radare/radare2/commit/5c98293b20fd02288c724ee8b52ae2541f850716 - can be useful for implementing some of those.","createdAt":"2017-06-15T04:12:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/921#issuecomment-308623637","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM1NDQwMzI4OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"So now the biggest priority of improving Windows support is to fix all broken tests and enable depending on them on AppVeyor: ` OK 5345 BR  872 XX 1744 FX    0`","createdAt":"2017-12-29T06:14:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/921#issuecomment-354403289","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMTUwNzYzMw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@GustavoLCR @pelijah FYI","createdAt":"2019-08-15T04:17:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/921#issuecomment-521507633","viewerDidAuthor":false}],"number":921,"title":"META - Portable Executable"},{"body":"It would be nice to have a function to get some sections or parsed information from a different file. This will allow us to load DWARF info in OSX (which is stored in a different binary) and to merge symbol information from a non-stripped binary.\n\nThis is related to #772 \n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY0MjU4NTU2NQ==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"This is somewhat needed for projects too if we want bin info to be loaded from the project instead of the file","createdAt":"2020-06-11T11:35:16Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/812#issuecomment-642585565","viewerDidAuthor":true},{"id":"MDEyOklzc3VlQ29tbWVudDY0NzU2MjIyOA==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"Very important for me as well, it is used on some linux distros (e.g. Fedora and Gentoo, at least) to have split binaries, one with the actual code but stripped, and another with the debug sections but without the actual code.\r\n\r\nIt would be cool to be able to do this just with `ob`/`obf`. ","createdAt":"2020-06-22T14:41:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/812#issuecomment-647562228","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0Nzc2Mzc1MA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"You can use .!rabin2 right now. Also, if you do ob, the addrline info will be loaded too\n\n> On 22 Jun 2020, at 16:42, Riccardo Schirone <notifications@github.com> wrote:\n> \n> ï»¿\n> Very important for me as well, it is used on some linux distros (e.g. Fedora and Gentoo, at least) to have split binaries, one with the actual code but stripped, and another with the debug sections but without the actual code.\n> \n> It would be cool to be able to do this just with ob/obf.\n> \n> â€”\n> You are receiving this because you were assigned.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","createdAt":"2020-06-22T20:52:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/812#issuecomment-647763750","viewerDidAuthor":false}],"number":812,"title":"Merge RBin info from a different file"},{"body":"The DWARF type information must be loaded in the same sdb database used by cparse. both source formats (dwarf and .c/.h files) must provide the same (or almost the same) information so it can be merged in a single place to be used by structs parsing or variable types.\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQyMTc1MDY1","author":{"login":"montekki"},"authorAssociation":"CONTRIBUTOR","body":"ok, time to have a discussion about this. how is info stored now and how is it used?\ntypes in dwarf are tree-like structures, how do we store them in sdb? \n","createdAt":"2014-05-05T10:20:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/774#issuecomment-42175065","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQyMTc1OTU4","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"We should reuse and extend what's already done with cparse sdb storage. The idea is that cparse and dwarf (and future pdb) use the same database structure so you can use .h, or other kind of human readable forms to read or serialize type information.\n\nI guess dwarf have more type info than plain C, so we should check that\n\n> On 05 May 2014, at 12:20, Fedor Sakharov notifications@github.com wrote:\n> \n> ok, time to have a discussion about this. how is info stored now and how is it used?\n> types in dwarf are tree-like structures, how do we store them in sdb?\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n","createdAt":"2014-05-05T10:36:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/774#issuecomment-42175958","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDIxODcyOTQ2Mw==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Related to your task, @oddcoder \n","createdAt":"2016-05-12T11:21:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/774#issuecomment-218729463","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4NTczOTQ0MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@oddcoder pls","createdAt":"2017-03-10T17:58:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/774#issuecomment-285739441","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMjg3MjMzMg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"OMG THIS IS NOT GONNA HAPPEN EVER. UNASSIGNING ODDCODER AND MOVING FORWARD","createdAt":"2017-05-20T13:10:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/774#issuecomment-302872332","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMwMjg3MjM2NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"@jpenalbae you are the one intested on this here. maybe you can find some time to do it or push someone to do it","createdAt":"2017-05-20T13:10:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/774#issuecomment-302872364","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyNjg4Nzc2Mg==","author":{"login":"MaskRay"},"authorAssociation":"CONTRIBUTOR","body":"Oh DWARF is underappreciated... Any idea to make the current type system more DWARF-friendly and incorporate more information from DWARF?\r\n\r\nDWARF 5 introduces a bunch of tags and attributes for type support DW_TAG_formal_parameter DW_TAG_call_site ...\r\n![](https://upload.wikimedia.org/wikipedia/commons/f/f9/Schneewittchen2.jpg)","createdAt":"2017-09-04T07:35:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/774#issuecomment-326887762","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyNjg5ODU5MA==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"I think we need to better define our current format of the types storage.\r\nCurrently it's stored in types SDB namespace, but I think the exact format of SDB is not efficient for more metainformation. So parsing DWARF just should insert proper SDB records, thats it.","createdAt":"2017-09-04T08:25:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/774#issuecomment-326898590","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyNjg5ODY2NA==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Have you tried the dwarf r2-extras plugin?","createdAt":"2017-09-04T08:25:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/774#issuecomment-326898664","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyNjg5OTAyMg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@MaskRay my current plan (after r2con) is to port some useful changes from the mainstream tcc to our code, I already know what and how to port, to improve parsing of the C structs/types, then improve the SDB storage layout. We can discuss the exact layout in just couple days during the hackaton.","createdAt":"2017-09-04T08:27:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/774#issuecomment-326899022","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyNjk0NTg0Nw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"I think we should not import some information, just provide some getters. Dwarf format is complex as hell but provides a compressed and structured format to save this info. And importing results in lot of cpu usage for importing into sdb and then more memory used because of this\n\n> On 4 Sep 2017, at 10:27, Anton Kochkov <notifications@github.com> wrote:\n> \n> @MaskRay my current plan (after r2con) is to port some useful changes from the mainstream tcc to our code, I already know what and how to port, to improve parsing of the C structs/types, then improve the SDB storage layout. We can discuss the exact layout in just couple days during the hackaton.\n> \n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","createdAt":"2017-09-04T12:03:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/774#issuecomment-326945847","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMyNjk0NjE5OQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"dwarf-parser     \t [syslib] dwarf parser\r\nlibdwarf     \t [syspkg] libdwarf - git\r\n\r\nSee https://github.com/radare/radare2-regressions/blob/master/t.extras/dwarf/dwarf please before wanting reiventing what's already been done by @P4N74 ","createdAt":"2017-09-04T12:04:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/774#issuecomment-326946199","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMzMTc3OTUwNg==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Import should be done, otherwise the whole point of loading DWARF is worth nothing.","createdAt":"2017-09-25T05:19:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/774#issuecomment-331779506","viewerDidAuthor":false}],"number":774,"title":"DWARF types information"},{"body":"if a hexadecimal address has a suffix (say, \"0xbeef:16\") it won't be substituted with symbol name:\n\n![radare1](https://f.cloud.github.com/assets/56672/2307864/afcc733e-a2b3-11e3-92d7-2d002921ce3d.jpeg)\n![radare2](https://f.cloud.github.com/assets/56672/2307866/b2fd06e0-a2b3-11e3-8d61-c46e9d7af830.jpeg)\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDM2OTM3NzQ3","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"How to differentiate to segmented x86 addressing?\n","createdAt":"2014-03-06T21:14:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/680#issuecomment-36937747","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3MjY5NDI2","author":{"login":"montekki"},"authorAssociation":"CONTRIBUTOR","body":"look at the binary's arch?\n","createdAt":"2014-03-11T07:27:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/680#issuecomment-37269426","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDM3Mjc5NTU0","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i would prefer to be arch-independent, if a human can understand the disasm, a parser should too..\n\nOn 11 Mar 2014, at 08:27, Fedor Sakharov notifications@github.com wrote:\n\n> look at the binary's arch?\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n","createdAt":"2014-03-11T10:04:45Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/680#issuecomment-37279554","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0ODU1NjY5Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping @montekki can you send a pr for that? checking for arch can be a dirty but working solution, so having this done with a couple of tests would be good for me\n","createdAt":"2016-09-21T09:18:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/680#issuecomment-248556692","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0ODU1Njc3MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"also we can differentiate if the number starts with # instead of just 0x and if it contains : \n","createdAt":"2016-09-21T09:18:54Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/680#issuecomment-248556771","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI2MjY4MTQxMw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"anyone?","createdAt":"2016-11-24T03:19:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/680#issuecomment-262681413","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4MDkzOTM1OQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Can we have test-case or something to reproduce this 0xXXX:16 syntax ?","createdAt":"2017-02-19T18:49:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/680#issuecomment-280939359","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4MTA1ODQ0NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"from me?\n> On 19 Feb 2017, at 19:49, Maijin <notifications@github.com> wrote:\n> \n> Can we have test-case or something to reproduce this 0xXXX:16 syntax ?\n> \n> \n\n","createdAt":"2017-02-20T11:43:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/680#issuecomment-281058444","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI4MTA1OTU0Nw==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Whoever got something to reproduce","createdAt":"2017-02-20T11:49:04Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/680#issuecomment-281059547","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0MjU4NDg0Mw==","author":{"login":"trufae"},"authorAssociation":"MEMBER","body":"Without a test case this issue is quite difficult to handle/understand/fix. ","createdAt":"2020-06-11T11:33:20Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/680#issuecomment-642584843","viewerDidAuthor":true}],"number":680,"title":"Substitute symbol addrs more correctly"},{"body":"They can contain a DOS program, Windows one and .NET runtime. each code is located at different range. \r\n\r\n```\r\nr2 -A .net hello.exe  -> -a msil -b 32/64\r\nr2 -A pe hello.exe -> -a x86/arm -b 32/64\r\nr2 -A dos hello.exe -> -a x86 -b 16  # MZ\r\n```\r\n\r\nDefault loaded subbin should be the newest (.net > win > dos)\r\nhttps://github.com/VirusTotal/yara/blob/master/libyara/modules/dotnet.c","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDE1MTg1MDc0OQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@radare isn't this already done?\n","createdAt":"2015-10-28T13:52:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/662#issuecomment-151850749","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE1MTg1MzA1MQ==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"nope, this is not done yet.\n","createdAt":"2015-10-28T13:56:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/662#issuecomment-151853051","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE5NjA1NTc3NA==","author":{"login":"lionaneesh"},"authorAssociation":"CONTRIBUTOR","body":"I am working on this\n","createdAt":"2016-03-13T21:21:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/662#issuecomment-196055774","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDE5NjA2OTc4Mg==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ðŸ‘\n\n> On 13 Mar 2016, at 22:21, Aneesh Dogra notifications@github.com wrote:\n> \n> I am interested in working on this.\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n","createdAt":"2016-03-13T22:29:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/662#issuecomment-196069782","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1ODAwNzk4MQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Here is a good binary example for that here: (waiting end of CTF)\n","createdAt":"2016-11-02T21:42:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/662#issuecomment-258007981","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1ODgyNzk4MQ==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"Ok here is the bin:\n\n[CHIMERA.ZIP](https://github.com/radare/radare2/files/575358/CHIMERA.ZIP)\n","createdAt":"2016-11-07T12:53:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/662#issuecomment-258827981","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDMxMjc4MDM3MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@xarkes for you to think, what part can be done during GSoC, if possible, or not. Depending on how much changes are needed.","createdAt":"2017-07-04T04:57:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/662#issuecomment-312780371","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwOTUzMjYzMg==","author":{"login":"Maijin"},"authorAssociation":"CONTRIBUTOR","body":"See https://github.com/radare/radare2/pull/10835","createdAt":"2018-08-01T10:43:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/662#issuecomment-409532632","viewerDidAuthor":false}],"number":662,"title":"PE binaries should be handled as 'fat' binaries"},{"body":"For instructions like:\n\n``` nasm\nmov *(ar1+t0b) << t3, ac2 || mov ac1.l , *ar4\n```\n\ncurrently determined \"mov ac1.l, *ar4\" instruction as part of \"ac2\" operand\n\n``` nasm\nrptblocal #0x000011 || sfts ac0,  #-1\n```\n\ncurrently determined \"sfts\" as part of 0x000011 number\n\n``` nasm\ncmp t2 == t3, tc1\n```\n\ncurrently determined \"t2 ==\" as part of instruction keyword \"cmp\"\n\n``` nasm\nxccpart ac0 <=  #0 || mov #0x0, t0\n```\n\ncurrently determined \"ac0\" as part of \"xccpart\" instruction keyword, \"|| mov #0x0, t0\" as part of number #0\n\nProof:\n![rarjpeg](http://xvilka.me/r2-dsp-high.png) \n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDQwODgzNjIy","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@milabs - thats for you :)\n","createdAt":"2014-04-19T23:37:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/437#issuecomment-40883622","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwOTIxMzU3","author":{"login":"milabs"},"authorAssociation":"CONTRIBUTOR","body":"@XVilka Perfect! Didn't understand nothing :)\n","createdAt":"2014-04-21T07:38:33Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/437#issuecomment-40921357","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3MTE5Mzgy","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@milabs - can you please try to fix this before 0.9.8 release (two weeks from now)?\n","createdAt":"2014-06-25T15:43:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/437#issuecomment-47119382","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ3MTIxODQ0","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"There are some warnings that should be addressed too. The 'colors' depend on the op->type. Also, adding support for ESIL would be great\n","createdAt":"2014-06-25T16:00:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/437#issuecomment-47121844","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQ4ODA0MDc5","author":{"login":"milabs"},"authorAssociation":"CONTRIBUTOR","body":"@XVilka I'll try to do it tomorrow\n","createdAt":"2014-07-12T06:40:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/437#issuecomment-48804079","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUwNDY1MjA1","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@milabs it is in https://github.com/radare/radare2/blob/master/libr/core/disasm.c function\n`handle_build_op_str (RCore *core, RDisasmState *ds)`\n","createdAt":"2014-07-29T11:39:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/437#issuecomment-50465205","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxMTM1NDcy","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"Thanks @milabs\n","createdAt":"2014-08-05T00:22:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/437#issuecomment-51135472","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUxMjY3MDU3","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@milabs \nFixed, but still not completely - check the new screen:\n![c55x+ highlighting](http://xvilka.me/r2-c55x_hlfix.png)\n","createdAt":"2014-08-05T22:04:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/437#issuecomment-51267057","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDUyMjQyMzEy","author":{"login":"jvoisin"},"authorAssociation":"CONTRIBUTOR","body":"This is related to #1195\n","createdAt":"2014-08-14T20:49:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/437#issuecomment-52242312","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDk1MzUzMzE5","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping\n","createdAt":"2015-04-22T22:10:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/437#issuecomment-95353319","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDk1MzUzOTc0","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"@radare postpone this for 1.0.0 - it will require a huge refactoring of the highlighting code\n","createdAt":"2015-04-22T22:13:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/437#issuecomment-95353974","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI0OTkxNzc4NA==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"ping ? 1.0 is close, is anyone up for this? because imho its quite low prio and i'll put it for 9999\n","createdAt":"2016-09-27T16:23:23Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/437#issuecomment-249917784","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDI1NjY4NzQ0Mw==","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"i assume nobody is gonna do anything related to this in two weeks after waiting 3 years\n","createdAt":"2016-10-27T15:56:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/437#issuecomment-256687443","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDQwNzI2ODc3MQ==","author":{"login":"XVilka"},"authorAssociation":"CONTRIBUTOR","body":"Applies also on Hexagon (note that in lines `R2 = 0x21 ; R1:R0 = combine (#0, R23) ` and `R2 = 0x21 ; memw (Sp + 0x24) = R4 ` highlighting is wrong)\r\n![screenshot_20180724_112435](https://user-images.githubusercontent.com/203261/43114983-3feb0dc4-8f34-11e8-870b-64550d53cba7.png)\r\n![screenshot_20180724_112507](https://user-images.githubusercontent.com/203261/43114988-46d4deee-8f34-11e8-96a1-a5d470ceb2b2.png)\r\n\r\n","createdAt":"2018-07-24T03:27:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/437#issuecomment-407268771","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NzU1NDE3NQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"@XVilka still relevant?","createdAt":"2020-06-22T14:27:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/437#issuecomment-647554175","viewerDidAuthor":false}],"number":437,"title":"Fix disassembly highlighting for complex DSP instructions"},{"body":"RBin needs a way to generate unique names for symbols/sections. This way we will get rid of the issue of having two symbols having the same name or the same filter name to store the flag.\n\n```\nchar *r_bin_name_suggest(RList *list, char *); // one for symbols and other for sections?\n```\n\nWe can also use a r_offsetof() to compare the name using a single generic function stored in r_util. The function must ensure that there's no other element in the list using the same name.\n\nThe name suggestion should have an hex suffix containing the lower bits of the address and an optional counter in case of collision. (we can also xor the address bytes to get a single checksum byte to reduce collisions).\n\nWe need a way to know the following information from each symbol:\n- original symbol/section name\n- name string address\n- flag name\n- address\n- size\n","comments":[{"id":"MDEyOklzc3VlQ29tbWVudDk0MTQ3ODQ1","author":{"login":"radare"},"authorAssociation":"MEMBER","body":"This depends on the >0.9.9 sdbization of rbin\n","createdAt":"2015-04-18T09:29:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/426#issuecomment-94147845","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY0NzU1MzQ5OQ==","author":{"login":"ret2libc"},"authorAssociation":"CONTRIBUTOR","body":"This seems to overlap with https://github.com/radareorg/radare2/issues/347 (in particular https://github.com/radareorg/radare2/issues/347#issuecomment-35691160 ) . Please close if you agree.","createdAt":"2020-06-22T14:26:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/radareorg/radare2/issues/426#issuecomment-647553499","viewerDidAuthor":false}],"number":426,"title":"RBin symbol names must be unique"}]
