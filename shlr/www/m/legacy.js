function saveProject(){r2.cmd("Ps",function(){alert("Project saved")})}function deleteProject(){alert("Project deleted"),location.href="open.html"}function closeProject(){alert("Project closed"),location.href="open.html"}function write(){var e=prompt("hexpairs, quoted string or :assembly");if(""!=e)switch(e[0]){case":":e=e.substring(1),r2.cmd('"wa '+e+'"',update);break;case'"':e=e.replace(/"/g,""),r2.cmd("w "+e,update);break;default:r2.cmd("wx "+e,update)}}function comment(){var e=prompt("comment");e&&("-"===e?r2.cmd("CC-"):r2.cmd('"CC '+e+'"'),update())}function flag(){var e=prompt("flag");e&&("-"===e?r2.cmd("f"+e):r2.cmd("f "+e),update())}function block(){var e=prompt("block");e&&e.trim()&&(r2.cmd("b "+e),update())}function flagsize(){var e=prompt("size");e&&e.trim()&&(r2.cmd("fl $$ "+e),update())}function E(e){return document.getElementById(e)}function encode(e){return e.replace(/[\x26\x0A\<>'"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})}function clickableOffsets(e){return console.error("Using clickableOffsets(str) no longer work"),console.trace(),e=(e=(e=(e=e.replace(/0x([a-zA-Z0-9]*)/g,"<a href='javascript:seek(\"0x$1\")'>0x$1</a>")).replace(/sym\.([\.a-zA-Z0-9_]*)/g,"<a href='javascript:seek(\"sym.$1\")'>sym.$1</a>")).replace(/fcn\.([\.a-zA-Z0-9_]*)/g,"<a href='javascript:seek(\"fcn.$1\")'>fcn.$1</a>")).replace(/str\.([\.a-zA-Z0-9_]*)/g,"<a href='javascript:seek(\"str.$1\")'>str.$1</a>")}function uiButton(e,t,n){var a="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect ";return"active"===n?'&nbsp;<a href="'+e.replace(/"/g,"'")+'" class="'+a+'" style="background-color:#f04040 !important">'+t+"</a>":'&nbsp;<a href="'+e.replace(/"/g,"'")+'" class="'+a+'">'+t+"</a>"}function uiCheckList(e,t,n){var a="<li>";return a+('<label for="'+e+'" class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect">')+('<input type="checkbox" id="'+t+'" class="mdl-checkbox__input" />')+('<span class="mdl-checkbox__label">'+n+"</span>")+"</label></li>"}(()=>{var a=document.getElementById("networkerr"),s=!1,o=0;a.showModal||dialogPolyfill.registerDialog(a),a.querySelector(".retry").addEventListener("click",function(){a.close(),o++,r2.cmdj("?V",function(e){void 0!==e&&(o=0)}),s=!1}),a.querySelector(".close").addEventListener("click",function(){a.close(),s=!1}),a.querySelector(".ok").addEventListener("click",function(){a.close(),s=!1}),r2.err=function(){if(!s){if(0<o){for(var e=document.getElementsByClassName("first-attempt"),t=0;t<e.length;t++)e[t].style.display="none";for(var n=document.getElementsByClassName("next-attempt"),t=0;t<n.length;t++)n[t].style.display="block"}a.showModal()}}})();var comboId=0;function uiCombo(d){var funName="combo"+ ++comboId,fun=funName+" = function(e) {",a;for(a in fun+=' var sel = document.getElementById("opt_'+funName+'");',fun+=" var opt = sel.options[sel.selectedIndex].value;",fun+=" switch (opt) {",d)fun+='case "'+d[a].name+'": '+d[a].js+"("+d[a].name+");break;";fun+="}}",eval(fun);var out='<select id="opt_'+funName+'" onchange="'+funName+'()">',a;for(a in d){var def=d[a].default?" default":"";out+="<option"+def+">"+d[a].name+"</option>"}return out+="</select>",out}var idSwitch=0;function uiSwitch(e,t,n,a){var s="switch-"+ ++idSwitch,o=document.createElement("label"),e=(o.className="mdl-switch mdl-js-switch mdl-js-ripple-effect",o.for=s,e.appendChild(o),document.createElement("input")),n=(e.type="checkbox",e.className="mdl-switch__input",e.checked=n,e.id=s,o.appendChild(e),e.addEventListener("change",function(e){a(t,e.target.checked)}),document.createElement("span")),s=(n.className="mdl-switch__label",n.innerHTML=t,o.appendChild(n),document.createElement("br"));o.appendChild(s)}function uiActionButton(e,t,n){var a=document.createElement("a");a.href="#",a.innerHTML=n,a.addEventListener("click",t),e.appendChild(a);a.className="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-color--accent mdl-color-text--accent-contrast",a.style.margin="3px"}var selectId=0;function uiSelect(e,t,n,a,s){var o="select-"+ ++selectId,l=document.createElement("div"),r=(l.className="mdl-selectfield mdl-js-selectfield mdl-selectfield--floating-label",e.appendChild(l),document.createElement("select"));r.className="mdl-selectfield__select",r.id=o,r.name=o,l.appendChild(r);for(var c=0;c<n.length;c++){var d=document.createElement("option");d.innerHTML=n[c],d.value=n[c],r.appendChild(d),c===a&&(d.selected=!0)}r.addEventListener("change",function(e){s(e.target.value)});e=document.createElement("label");e.className="mdl-selectfield__label",e.for=o,e.innerHTML=t,l.appendChild(e)}function uiBlock(e){var t,n="";for(t in e.blocks)var a=e.blocks[t],n=(n+="<br />"+a.name+": ")+uiCombo(a.buttons);return n}function uiRoundButton(e,t,n){var a="";return(a+="<button onclick="+e+' class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect" '+n+">")+('<i class="material-icons" style="opacity:1">'+t+"</i>")+"</button>"}function uiTableBegin(e,t){console.warn("Usage is deprecated: migrate to Table");var n,a=(a="")+('<table id="'+(t||"").substr(1)+'" style="margin-left:10px" class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp">')+"  <thead> <tr>";for(n in e){var s=e[n];a+="<th"+("+"===s[0]?(s=s.substring(1),""):' class="mdl-data-table__cell--non-numeric"')+">"+s+"</th>"}return a+="</tr> </thead> <tbody>"}function uiTableRow(e){var t,n="",a="<tr>";for(t in e){var s=e[t];s&&("+"===s[0]?s=clickableOffsets(s.substring(1)):n=' class="mdl-data-table__cell--non-numeric"',a+="<td"+n+">"+s+"</td>")}return a+"</tr>"}function uiTableEnd(){return"</tbody> </table>"}var lastConsoleOutput="";function console_submit(t){document.getElementById("console_terminal");var n=document.getElementById("console_output"),a=document.getElementById("console_input"),e=widgetContainer.getWidget("Console");widgetContainer.getWidgetDOMWrapper(e);"clear"===t?(n.innerHTML="",a.value=""):r2.cmd(t,function(e){n.innerHTML+=" > "+t+"\n"+e,a.value="",setTimeout(function(){window.scrollTo("console_input")},1e3)})}function console_ready(){var t=document.getElementById("console_input");null!==t&&(t.focus(),t.onkeypress=function(e){13===e.keyCode&&console_submit(t.value)})}function consoleKey(e){var t=document.getElementById("console_input");e?13===e.keyCode&&(runCommand(t.value),t.value=""):t.onkeypress=consoleKey}function panelConsole(){var e=widgetContainer.getWidget("Console"),t=widgetContainer.getWidgetDOMWrapper(e);updates.registerMethod(e.getOffset(),panelConsole);t.innerHTML='<br /><div id="console_terminal" class="console_terminal"><div id="console_output" class=console_output></div><div id="console_prompt" class=console_prompt>&nbsp;&gt;&nbsp;<input name="console_input" class="console_input" id="console_input"></input></div></div><br /><br />',t.style.backgroundColor="#303030",t.style.height="100%",document.getElementById("console_output").innerHTML=lastConsoleOutput,console_ready()}function runCommand(e){e=e||document.getElementById("input").value,r2.cmd(e,function(e){lastConsoleOutput="\n"+e,document.getElementById("output").innerHTML=lastConsoleOutput})}var statusLog=[],Mode={LINE:0,HALF:1,FULL:2},Tab={LOGS:0,CONSOLE:1},statusMode=Mode.LINE,statusTimeout=null,statusTab=Tab.LOGS;function setStatusbarBody(){function e(e,t){e=document.createElement(e);return e.id=t,e.className=t,e}try{(a=document.getElementById("tab_terminal")).innerHTML="",a.parentNode.removeChild(a)}catch(e){}try{(a=document.getElementById("tab_logs")).innerHTML="",a.parentNode.removeChild(a)}catch(e){}switch(statusTab){case Tab.LOGS:var t=new DOMParser,n=((s=document.createElement("div")).id="tab_logs",statusLog.join("<br />")),a=(s.appendChild(t.parseFromString(n,"text/xml").documentElement),document.getElementById("statusbar_body"));try{a.parentNode.insertBefore(s,a)}catch(e){}return void console.log(a);case Tab.CONSOLE:(s=document.createElement("div")).id="tab_terminal",s.appendChild(e("div","terminal")),s.appendChild(e("div","terminal_output"));var s,t=e("div","terminal_prompt");t.appendChild(e("input","terminal_input")),s.appendChild(t)}void 0!==s&&(a=document.getElementById("statusbar"),document.getElementById("terminal")||(a.parentNode.insertBefore(s,a),statusTab===Tab.CONSOLE&&terminal_ready()))}function statusMessage(e,t){var n=document.getElementById("statusbar");e&&statusLog.push(e),statusMode===Mode.LINE?(n.innerHTML=e,null!==statusTimeout&&(clearTimeout(statusTimeout),statusTimeout=null),void 0!==t&&(statusTimeout=setTimeout(function(){statusMessage("&nbsp;")},1e3*t))):setStatusbarBody()}function statusToggle(){var e=document.getElementById("statusbar"),t=document.getElementById("container");if(statusMode===Mode.HALF){statusTab=Tab.LOGS,statusMode=Mode.LINE,e.innerHTML="&nbsp;";try{e.parentNode.classList.remove("half"),e.parentNode.classList.remove("full"),t.classList.remove("sbIsHalf"),t.classList.remove("sbIsFull")}catch(e){}setStatusbarBody()}else{statusMode=Mode.HALF;try{e.parentNode.classList.remove("full"),t.classList.remove("sbIsFull")}catch(e){}e.parentNode.classList.add("half"),t.classList.add("sbIsHalf")}}function statusNext(){var e=document.getElementById("statusbar"),t=document.getElementById("container");switch(statusMode){case Mode.LINE:statusMode=Mode.HALF;try{e.parentNode.classList.remove("full"),t.classList.remove("sbIsFull")}catch(e){}e.parentNode.classList.add("half"),t.classList.add("sbIsHalf");break;case Mode.HALF:return statusMode=Mode.FULL,e.parentNode.classList.add("full"),void t.classList.add("sbIsFull");case Mode.FULL:statusMode=Mode.LINE,statusTab=Tab.LOGS,e.innerHTML="";try{e=document.getElementById("statusbar"),t=document.getElementById("container");e.parentNode.classList.remove("half"),e.parentNode.classList.remove("full"),t.classList.remove("sbIsHalf"),t.classList.remove("sbIsFull")}catch(e){}}setStatusbarBody()}function statusConsole(){var e=document.getElementById("statusbar"),t=document.getElementById("container");if(statusTab===Tab.CONSOLE){if(statusMode!==Mode.LINE)return statusToggle(),void(statusMode=Mode.LINE);statusTab=Tab.CONSOLE}if(statusMode===Mode.HALF)statusMode=Mode.LINE;else if(statusMode===Mode.LINE){statusTab=Mode.CONSOLE,statusMode=Mode.HALF;try{e.parentNode.classList.remove("full"),t.classList.remove("sbIsFull")}catch(e){}try{e.parentNode.classList.add("half"),t.classList.add("sbIsHalf")}catch(e){}}statusTab=statusTab===Tab.CONSOLE?Tab.LOGS:Tab.CONSOLE,setStatusbarBody()}function statusFullscreen(){var e=document.getElementById("statusbar"),t=document.getElementById("container");if(statusMode===Mode.FULL){statusMode=Mode.HALF;try{e.parentNode.classList.remove("full"),t.classList.remove("sbIsFull")}catch(e){}e.parentNode.classList.add("half"),t.classList.add("sbIsHalf")}else{statusMode=Mode.FULL;try{e.parentNode.classList.remove("half"),t.classList.remove("sbIsHalf")}catch(e){}e.parentNode.classList.add("full"),t.classList.add("sbIsFull")}}function addButton(e,t){var n=document.createElement("a");return n.href="javascript:"+t+"()",n.innerHTML=e,n}function initializeStatusbarTitle(){}function statusInitialize(){initializeStatusbarTitle();var e=document.getElementById("statusbar");e.innerHTML="",e.parentNode.addEventListener("click",function(){statusMode===Mode.LINE&&(statusTab=Tab.CONSOLE,statusToggle())}),statusMessage("Loading webui...",2)}function submit(t){var n=document.getElementById("terminal_output"),a=document.getElementById("terminal_input");a&&n?"clear"===t?(n.innerHTML="",a.value=""):r2.cmd(t,function(e){n.innerHTML+=" > "+t+"\n"+(e+="\n"),a.value="";e=document.getElementById("statusbar_scroll");e.scrollTop=e.scrollHeight}):console.error("No terminal_{input|output} found")}function terminal_ready(){var t=document.getElementById("terminal_input");t?(t.focus(),t.onkeypress=function(e){13===e.keyCode&&submit(t.value)}):console.error("Cannot find terminal_input")}function hexPairToASCII(e){e=parseInt(e,16);return 33<=e&&e<=126?String.fromCharCode(e):"."}function ASCIIToHexpair(e){e=e.charCodeAt(0).toString(16);return e=e.length<2?"0"+e:e}function isAsciiVisible(e){return 33<=e&&e<=126}function basename(e){return e.split(/[\\/]/).pop()}function int2fixedHex(e,t){for(var n=e.toString(16);n.length<t;)n="0"+n;return"0x"+n}statusInitialize();