/*
   http://www.github.com/tapquo/lungo/blob/master/LICENSE.txt
 @version   2.0
 @link      https://github.com/TapQuo/Lungo.js

 @author   Javier Jimenez Villar <javi@tapquo.com> || @soyjavi
*/
var Lungo=Lungo||{};Lungo.VERSION="2.0";Lungo.Attributes||(Lungo.Attributes={});Lungo.Element||(Lungo.Element={});Lungo.Data||(Lungo.Data={});Lungo.Sugar||(Lungo.Sugar={});Lungo.View||(Lungo.View={});Lungo.Boot||(Lungo.Boot={});Lungo.Device||(Lungo.Device={});Lungo.ready||(Lungo.ready=Quo().ready);Lungo.init=function(b){b&&b.resources&&Lungo.Boot.Resources.init(b.resources);Lungo.Boot.Layout.init();Lungo.Boot.Events.init();Lungo.Boot.Data.init();Lungo.Boot.Section.init();Lungo.Boot.Article.init()};Lungo.Core=function(b,g){var a=Array.prototype,i=function(c,d){return g.isOwnProperty(c,d)},e=function(c){return g.toType(c)},h=function(c){return a.slice.call(c,0)};return{log:function(c,d){b.Core.isMobile()||console[c===1?"log":c===2?"warn":"error"](d)},execute:function(){var c=h(arguments),d=c.shift();e(d)==="function"&&d.apply(null,c)},bind:function(c,d){return function(){return d.apply(c,h(arguments))}},mix:function(){for(var c=c||{},d=0,j=arguments.length;d<j;d++){var f=arguments[d],k;for(k in f)if(i(f,
k))c[k]=f[k]}return c},isOwnProperty:i,toType:e,toArray:h,isMobile:function(){return g.isMobile()},environment:function(){return g.environment()},orderByProperty:function(c,d,j){var f=j==="desc"?-1:1;return c.sort(function(k,m){return k[d]<m[d]?-f:k[d]>m[d]?f:0})},parseUrl:function(c){var d=c.lastIndexOf("#");if(d>0)c=c.substring(d);else if(d===-1)c="#"+c;return c},findByProperty:function(c,d,j){for(var f=null,k=0,m=c.length;k<m;k++){var n=c[k];if(n[d]==j){f=n;break}}return f}}}(Lungo,Quo);Lungo.dom=function(b){return $$(b)};Lungo.Service=function(b,g){var a={MINUTE:"minute",HOUR:"hour",DAY:"day"},i=function(e,h){var c=false,d=b.Data.Storage.persistent("lungojs_service_cache");if(d){d=d[e];c=(new Date).getTime();d=(new Date(d)).getTime();var j=c-d;c=h.split(" ");d=c[1];j=j/1E3/60;if(d.indexOf(a.HOUR)>=0)j/=60;else if(d.indexOf(a.DAY)>=0)j=j/60/24;c=j<c[0]?true:false}return c};return{get:function(e,h,c,d){return g.get(e,h,c,d)},post:function(e,h,c,d){return g.post(e,h,c,d)},json:function(e,h,c){return g.json(e,h,c)},cache:function(e,
h,c,d,j){var f=e+g.serializeParameters(h);if(i(f,c)){if(e=b.Data.Storage.persistent(f))return d.call(d,e)}else return g.get(e,h,function(k){var m=b.Data.Storage.persistent("lungojs_service_cache")||{};m[f]=new Date;b.Data.Storage.persistent("lungojs_service_cache",m);b.Data.Storage.persistent(f,k);d.call(d,k)},j)},Settings:g.ajaxSettings}}(Lungo,Quo);Lungo.Constants={ELEMENT:{SECTION:"section",ARTICLE:"article",ASIDE:"aside",BODY:"body",DIV:"div",LIST:"<ul></ul>",LI:"li",SPAN:"<span>&nbsp;</span>"},CLASS:{ACTIVE:"active",ASIDE:"aside",SHOW:"show",HIDE:"hide",CURRENT:"current",RIGHT:"right",LEFT:"left",HORIZONTAL:"horizontal",SMALL:"small"},TRIGGER:{LOAD:"load",UNLOAD:"unload"},ATTRIBUTE:{ID:"id",HREF:"href",TITLE:"title",ARTICLE:"article",CLASS:"class",WIDTH:"width",HEIGHT:"height",PIXEL:"px",PERCENT:"%",ROUTER:"router",FIRST:"first",LAST:"last",
EMPTY:""},BINDING:{START:"{{",END:"}}",KEY:"value",SELECTOR:"{{value}}"},ERROR:{DATABASE:"ERROR: Connecting to Data.Sql.",DATABASE_TRANSACTION:"ERROR: Data.Sql >> ",ROUTER:"ERROR: The target does not exists >>",LOADING_RESOURCE:"ERROR: Loading resource: "}};Lungo.Events=function(b){return{init:function(g){for(event in g){var a=event.indexOf(" ");if(a>0){var i=event.substring(0,a);a=event.substring(a+1);b.dom(a).on(i,g[event])}}}}}(Lungo);Lungo.Notification=function(b,g){var a=[],i=null,e=null,h=b.Constants.BINDING,c={BODY:"body",NOTIFICATION:".notification",MODAL:".notification .window",MODAL_HREF:".notification .window a",WINDOW_CLOSABLE:".notification > .url .close",CONFIRM_BUTTONS:".notification .confirm a.button"},d={MODAL:"modal",VISIBLE:"visible",SHOW:"show",WORKING:"working",INPUT:"input"},j=function(){e.removeClass("show");setTimeout(function(){i.style("display","none").removeClass("url").removeClass("confirm").removeClass("modal")},
150)},f=function(l,o,r,s,t,u){k(false);e.addClass(s||"info").addClass("special notify");m(q(l,o,r));n(t,u)},k=function(l,o){i.style("display")==="none"&&i.show();l&&i.addClass(d.MODAL)||i.removeClass(d.MODAL);e.removeClass(d.SHOW).removeClass(d.WORKING);e.removeClass("url").removeClass("notify").removeClass("confirm").removeClass("special").removeClass("working");e.removeClass("error").removeClass("alert").removeClass("success");o&&e.addClass(d.WORKING)},m=function(l){e.html(l);setTimeout(function(){e.addClass(d.SHOW)},
1)},n=function(l,o){l!==g&&l!==0&&setTimeout(function(){j();o&&setTimeout(o,200)},l*1E3)},q=function(l,o,r){o=!o?"&nbsp;":o;return'<span class="icon '+r+'"></span><strong>'+l+"</strong><small>"+o+"</small>"},p=function(l,o){return'<a href="#" data-callback="'+o+'" class="button '+l.color+'" data-icon="'+l.icon+'">'+l.label+"</a>"};b.dom(c.BODY).append('<div class="notification"><div class="window"></div></div>');i=b.dom(c.NOTIFICATION);e=i.children(".window");(function(){e.tap(function(){e.hasClass("notify")&&
j()});b.dom(c.CONFIRM_BUTTONS).tap(function(){var l=b.dom(this);(l=a[l.data("callback")].callback)&&l.call(l);j()});b.dom(c.WINDOW_CLOSABLE).tap(j)})();return{show:function(l,o,r,s,t,u){k(true,s);m(q(l,o,r));n(t,u)},hide:j,error:function(l,o,r,s,t){f(l,o,r,"error",s,t)},alert:function(l,o,r,s,t){f(l,o,r,"alert",s,t)},success:function(l,o,r,s,t){f(l,o,r,"success",s,t)},confirm:function(l){a=l;k(true);var o="<p>"+q(l.title,l.description,l.icon)+"</p><hr/>";o+=p(l.accept,"accept");o+=p(l.cancel,"cancel");
e.addClass("special confirm");m(o)},html:function(l,o){k(true);e.addClass("url");l+=o?'<span class="icon close"></span>':"";m(l)},loading:function(){k(true);var l=b.Attributes.Data.Loading.html.replace(h.START+h.KEY+h.END,"icon loading white");m(l)}}}(Lungo);Lungo.Fallback=function(b){return{androidInputs:function(g,a){environment=b.Core.environment();if(environment.isMobile&&environment.os.name==="android"&&environment.os.version<"4")for(var i=b.dom(g+" input, "+g+" textarea, "+g+" select"),e=0,h=i.length;e<h;e++)a?i[e].removeAttribute("disabled"):i[e].setAttribute("disabled","disabled")},fixPositionInAndroid:function(){env=b.Core.environment();b.Element.Cache.sections.style("position",env.isMobile&&env.os.name==="Android"&&env.os.version<"3"?"absolute":
"fixed")}}}(Lungo);Lungo.Router=function(b){var g=b.Constants.CLASS,a=b.Constants.ELEMENT,i=b.Constants.TRIGGER,e=b.Constants.ATTRIBUTE,h=function(c){c=b.Core.parseUrl(c);var d=b.Element.Cache.section;if(c!=="#"+d.attr("id")?true:false){var j=d.siblings(a.SECTION+c);if(j.length>0){if(target_transition=j.data("transition")){d.data("transition-origin",d.data("transition"));d.data("transition",target_transition)}d.removeClass(g.SHOW).addClass(g.HIDE);j.addClass(g.SHOW);b.Element.Cache.section=j;b.Element.Cache.article=
j.find(a.ARTICLE+"."+g.CURRENT);b.Router.History.add(c);d.trigger(i.UNLOAD);j.trigger(i.LOAD)}}};return{section:h,article:function(c,d,j){d=b.Core.parseUrl(d);var f=b.Element.Cache.article;if(d!=="#"+f.attr("id")?true:false){h(c);c=b.Element.Cache.section.find(a.ARTICLE+d);if(c.length>0){if(f.parent("section").attr("id")!==c.parent("section").attr("id"))f=b.Element.Cache.section.children(a.ARTICLE);f.removeClass(g.CURRENT).trigger(i.UNLOAD);c.addClass(g.CURRENT).trigger(i.LOAD);b.Element.Cache.article=
c;b.View.Article.switchNavItems(d);b.View.Article.switchReferenceItems(d,b.Element.Cache.section);j&&b.View.Article.title(j.data(e.TITLE))}}},aside:function(c,d){d=b.Core.parseUrl(d);b.View.Aside.toggle(d)},back:function(){var c=b.Element.Cache.section;c.removeClass(g.SHOW);b.Router.History.removeLast();target=c.siblings(a.SECTION+b.Router.History.current());var d=target.data("transition-origin");target.data("transition",d);target.removeClass(g.HIDE).addClass(g.SHOW);d=b.Element.Cache.section=target;
c.trigger(i.UNLOAD);d.trigger(i.LOAD)}}}(Lungo);Lungo.Router.History=function(){var b=[],g=function(){return b[b.length-1]};return{add:function(a){a!==g()&&b.push(a)},current:g,removeLast:function(){b.length-=1}}}();Lungo.View.Article=function(b){var g=b.Constants.CLASS,a=b.Constants.ATTRIBUTE,i={NAVIGATION_ITEM:'a[href][data-router="article"]',REFERENCE_LINK:" a[href][data-article]",TITLE_OF_ARTICLE:"header .title, footer .title",ASIDE_REFERENCE_LIST:"li a.current, li.current"};return{title:function(e){e&&b.Element.Cache.section.find(i.TITLE_OF_ARTICLE).text(e)},switchReferenceItems:function(e,h){e=e.replace("#","");for(var c=h.find(i.REFERENCE_LINK),d=0,j=c.length;d<j;d++){var f=b.dom(c[d]);f.data(a.ARTICLE)===
e?f.show():f.hide()}},switchNavItems:function(e){b.Element.Cache.section.find(i.NAVIGATION_ITEM).removeClass(g.CURRENT);e='a[href="'+e+'"][data-router="article"]';b.Element.Cache.section.find(e).addClass(g.CURRENT);if(b.Element.Cache.aside){aside=b.Element.Cache.aside;aside.find(i.ASIDE_REFERENCE_LIST).removeClass(g.CURRENT);aside.find(e).addClass(g.CURRENT).parent().addClass(g.CURRENT)}}}}(Lungo);Lungo.View.Aside=function(b){var g=b.Constants.ELEMENT,a=b.Constants.CLASS,i=b.Constants.ATTRIBUTE,e=function(c){var d=null,j=b.Element.Cache.asides.length;if(j==1){if("#"+b.Element.Cache.asides[0].id==c)d=b.dom(b.Element.Cache.asides[0])}else if(j>1)d=b.Element.Cache.asides.siblings(g.ASIDE+c);return d},h=function(c){c=c.attr(i.CLASS);var d="";if(c){d+=c.indexOf(a.RIGHT)>-1?a.RIGHT+" ":"";d+=c.indexOf(a.SMALL)>-1?a.SMALL+" ":""}return d};return{toggle:function(c){if(aside=e(c))aside.hasClass(a.SHOW)?
b.View.Aside.hide():b.View.Aside.show(aside);aside=null},show:function(c){if(b.Core.toType(c)=="string")c=e(b.Core.parseUrl(c));if(c){b.Element.Cache.aside=c;var d=h(c);c.addClass(a.SHOW);b.Element.Cache.section.addClass(d).addClass(a.ASIDE)}},hide:function(){var c=b.Element.Cache.aside;if(c){b.Element.Cache.section.removeClass(a.ASIDE).removeClass(a.RIGHT).removeClass(a.SMALL);var d=h(c);d&&b.Element.Cache.section.removeClass(d);setTimeout(function(){c.removeClass(a.SHOW);b.Element.Cache.aside=null},
250)}}}}(Lungo);Lungo.Element.Cache={sections:null,section:null,article:null,asides:null,aside:null,navigation:null};Lungo.Element.Carousel=function(b,g){var a={index:0,speed:300,callback:g,container:b,element:b.children[0],slide:undefined,slides:[],slides_length:0,width:0,start:{},isScrolling:undefined,deltaX:0},i=function(){a.container.style.overflow="hidden";a.element.style.listStyle="none";a.element.style.margin=0;a.slides=a.element.children;a.slides_length=a.slides.length;if(a.slides_length<2)return null;a.width="getBoundingClientRect"in a.container?a.container.getBoundingClientRect().width:a.container.offsetWidth;
if(!a.width)return null;a.container.style.visibility="hidden";a.element.style.width=a.slides.length*a.width+"px";for(var c=a.slides.length;c--;){var d=a.slides[c];d.style.width=a.width+"px";d.style.display="table-cell";d.style.verticalAlign="top"}e(a.index,0);a.container.style.visibility="visible"},e=function(c,d){var j=a.element.style;if(d==undefined)d=a.speed;j.webkitTransitionDuration=j.MozTransitionDuration=j.msTransitionDuration=j.OTransitionDuration=j.transitionDuration=d+"ms";j.MozTransform=
j.webkitTransform="translate3d("+-(c*a.width)+"px,0,0)";j.msTransform=j.OTransform="translateX("+-(c*a.width)+"px)";a.index=c},h=function(){a.callback&&a.callback.apply(a.callback,[a.index,a.slides[a.index]])};i();a.element.addEventListener("touchstart",function(c){a.start={pageX:c.touches[0].pageX,pageY:c.touches[0].pageY,time:Number(new Date)};a.isScrolling=undefined;a.deltaX=0;a.element.style.MozTransitionDuration=a.element.style.webkitTransitionDuration=0;c.stopPropagation()},false);a.element.addEventListener("touchmove",
function(c){if(!(c.touches.length>1||c.scale&&c.scale!==1)){a.deltaX=c.touches[0].pageX-a.start.pageX;if(typeof a.isScrolling=="undefined")a.isScrolling=!!(a.isScrolling||Math.abs(a.deltaX)<Math.abs(c.touches[0].pageY-a.start.pageY));if(!a.isScrolling){c.preventDefault();a.deltaX/=!a.index&&a.deltaX>0||a.index==a.slides_length-1&&a.deltaX<0?Math.abs(a.deltaX)/a.width+1:1;a.element.style.MozTransform=a.element.style.webkitTransform="translate3d("+(a.deltaX-a.index*a.width)+"px,0,0)";c.stopPropagation()}}},
false);a.element.addEventListener("touchend",function(c){var d=Number(new Date)-a.start.time<250&&Math.abs(a.deltaX)>20||Math.abs(a.deltaX)>a.width/2,j=!a.index&&a.deltaX>0||a.index==a.slides_length-1&&a.deltaX<0;a.isScrolling||e(a.index+(d&&!j?a.deltaX<0?1:-1:0),a.speed);c.stopPropagation()},false);a.element.addEventListener("webkitTransitionEnd",h,false);a.element.addEventListener("msTransitionEnd",h,false);a.element.addEventListener("oTransitionEnd",h,false);a.element.addEventListener("transitionend",
h,false);window.addEventListener("resize",i,false);return{prev:function(){a.index&&e(a.index-1,a.speed)},next:function(){a.index<a.slides_length-1?e(a.index+1,a.speed):e(0,a.speed)},position:function(){return a.index}}};Lungo.Element.count=function(b,g){var a=Lungo.dom(b);a.children(".bubble.count").remove();if(a&&g){html=Lungo.Attributes.Data.Count.html.replace(Lungo.Constants.BINDING.SELECTOR,g);a.append(html)}};Lungo.Element.loading=function(b,g){var a=Lungo.dom(b);if(a){var i=null;if(g)i=Lungo.Attributes.Data.Loading.html.replace(Lungo.Constants.BINDING.SELECTOR,g);a.html(i)}};Lungo.Element.progress=function(b,g){var a=Lungo.dom(b);if(a){g+=Lungo.Constants.ATTRIBUTE.PERCENT;a.find(".value").style(Lungo.Constants.ATTRIBUTE.WIDTH,g)}};Lungo.Element.Pull=function(b,g){var a=0,i=false,e=$$(b),h=e.siblings('div[data-control="pull"]'),c;c=Lungo.Core.mix({onPull:"Pull down to refresh",onRelease:"Release to...",onRefresh:"Loading...",callback:undefined},g);var d=function(){j(0,true);setTimeout(function(){i=false;document.removeEventListener("touchmove",q,false)},300);a=0},j=function(p,l){var o=p>100?100:p;l&&e.addClass("pull");e.style("-webkit-transform","translate(0, "+o+"px)");l&&setTimeout(function(){e.removeClass("pull")},300)},
f=function(){i=true;document.addEventListener("touchmove",q,false);k(c.onRefresh);m(true);j(60,true);c.callback&&c.callback.apply(this)},k=function(p){h.find("strong").html(p)},m=function(p){p?h.addClass("refresh"):h.removeClass("refresh")},n=function(p){p?h.addClass("rotate"):h.removeClass("rotate")},q=function(p){p.preventDefault()};(function(){var p=false,l={};e.bind("touchstart",function(o){if(e[0].scrollTop<=1){p=true;l=$$.isMobile()?o.touches[0].pageY:o.pageY}}).bind("touchmove",function(o){if(!i&&
p){current_y=$$.isMobile()?o.touches[0].pageY:o.pageY;a=current_y-l;if(a>=0){e.style("overflow-y","hidden");j(a,false);m(false);if(a>60){k(c.onRelease);n(true)}else{k(c.onPull);n(false)}}}}).bind("touchend",function(){if(p){e.style("overflow-y","scroll");a>60?f():d()}INI_TOUCH={};p=false})})();return{hide:d}};Lungo.Data.Cache=function(b,g){var a={},i=function(h){return arguments.length===1?a[h]:a[arguments[0]]?a[arguments[0]][arguments[1]]:g},e=function(h){return a[h]?true:false};return{set:function(h,c){a[h]=e(h)?b.Core.mix(i(h),c):c},get:i,remove:function(h){if(arguments.length===1)delete a[h];else delete a[arguments[0]][arguments[1]]},exists:e}}(Lungo);Lungo.Data.Sql=function(b){var g=b.Constants.ERROR,a={name:"lungo_db",version:"1.0",size:65536,schema:[]},i=null,e=function(f,k){b.Core.log(1,"lng.Data.Sql >> "+f);i.transaction(function(m){m.executeSql(f,[],function(n,q){c(k,q)},function(n){n.executedQuery=f;j.apply(null,arguments)})})},h=function(f,k){var m="",n;for(n in f)if(b.Core.isOwnProperty(f,n)){var q=f[n];if(m)m+=" "+k+" ";m+=n+"=";m+=isNaN(q)?'"'+q+'"':q}return m},c=function(f,k){b.Core.toType(f)==="function"&&setTimeout(f,100,k)},d=function(f,
k){var m="",n="",q;for(q in k)if(b.Core.isOwnProperty(k,q)){var p=k[q];m+=m?", "+q:q;if(n)n+=", ";n+=isNaN(p)?'"'+p+'"':p}e("INSERT INTO "+f+" ("+m+") VALUES ("+n+")")},j=function(f,k){throw Error(g.DATABASE_TRANSACTION+k.code+": "+k.message+" \n Executed query: "+f.executedQuery);};return{init:function(f){a=b.Core.mix(a,f);if(i=openDatabase(a.name,a.version,a.name,a.size)){f=a.schema;var k=f.length;if(k)for(var m=0;m<k;m++){var n=f[m];n.drop===true&&e("DROP TABLE IF EXISTS "+n.name);var q=n.name;
n=n.fields;var p="",l=void 0;for(l in n)if(b.Core.isOwnProperty(n,l)){if(p)p+=", ";p+=l+" "+n[l]}e("CREATE TABLE IF NOT EXISTS "+q+" ("+p+");")}}else throw Error(g.DATABASE);},select:function(f,k,m){k=k?" WHERE "+h(k,"AND"):"";e("SELECT * FROM "+f+k,function(n){for(var q=[],p=0,l=n.rows.length;p<l;p++)q.push(n.rows.item(p));c(m,q)})},insert:function(f,k){if(b.Core.toType(k)==="object")d(f,k);else for(row in k)d(f,k[row])},update:function(f,k,m){f="UPDATE "+f+" SET "+h(k,",");if(m)f+=" WHERE "+h(m,
"AND");e(f)},drop:function(f,k){var m=k?" WHERE "+h(k,"AND"):"";e("DELETE FROM "+f+m+";")},execute:e}}(Lungo);Lungo.Data.Storage=function(){var b={PERSISTENT:"localStorage",SESSION:"sessionStorage"},g=function(a,i,e){a=window[a];if(e){a=a;e=e;e=JSON.stringify(e);a.setItem(i,e)}else if(e===null)a.removeItem(i);else{value=a.getItem(i);return JSON.parse(value)}};return{session:function(a,i){return g(b.SESSION,a,i)},persistent:function(a,i){return g(b.PERSISTENT,a,i)}}}(Lungo);Lungo.Attributes.Data={Search:{tag:"search",selector:"*",html:'<input type="search" placeholder="{{value}}"/><a href="#" class="button" data-icon="search"></a>'},Count:{tag:"count",selector:"*",html:'<span class="bubble count">{{value}}</span>'},Pull:{tag:"pull",selector:"section",html:'<div class="{{value}}" data-control="pull" data-icon="down" data-loading="black">                    <strong>title</strong>                </div>'},Progress:{tag:"progress",selector:"*",html:'<div class="progress">                    <span class="bar"><span class="value" style="width:{{value}};"></span></span>                </div>'},
Label:{tag:"label",selector:"a",html:"<abbr>{{value}}</abbr>"},Icon:{tag:"icon",selector:"*",html:'<span class="icon {{value}}"></span>'},Image:{tag:"image",selector:"*",html:'<img src="{{value}}" class="icon" />'},Title:{tag:"title",selector:"header, footer, article",html:'<span class="title centered">{{value}}</span>'},Loading:{tag:"loading",selector:"*",html:'<div class="loading {{value}}">                    <span class="top"></span>                    <span class="right"></span>                    <span class="bottom"></span>                    <span class="left"></span>                </div>'},
Back:{tag:"back",selector:"header, footer",html:'<nav class="left"><a href="#back" data-router="section" class="left"><span class="icon {{value}}"></span></a></nav>'}};Lungo.Boot.Resources=function(b,g){var a=b.Constants.ELEMENT,i=b.Constants.ERROR,e=function(h){return g.ajax({url:h,async:false,dataType:"html",error:function(){console.error(i.LOADING_RESOURCE+h)}})};return{init:function(h){for(var c=0,d=h.length;c<d;c++){resource=h[c];try{var j=e(resource);b.Core.toType(j)==="string"&&b.dom(a.BODY).append(j)}catch(f){b.Core.log(3,f.message)}}}}}(Lungo,Quo);Lungo.Boot.Stats=function(b){var g=function(){b.Service.post("http://www.lungojs.com/stats/",{name:b.App.get("name"),version:b.App.get("version"),icon:b.App.get("icon")},function(){})};return{init:function(){b.Core.isMobile()&&g()}}}(Lungo);Lungo.Boot.Layout=function(b){var g=null,a=null,i=b.Constants.ELEMENT,e=b.Constants.ATTRIBUTE,h=function(){if(!location.hash||!g.addEventListener){g.scrollTo(0,1);var c=1,d=setInterval(function(){if(a.body){clearInterval(d);c="scrollTop"in a.body?a.body.scrollTop:1;g.scrollTo(0,c===1?0:1)}},15);g.addEventListener("load",function(){setTimeout(function(){g.scrollTo(0,c===1?0:1)},0)},false)}};return{init:function(){if(b.Core.isMobile()){g=window;a=g.document;if(g.innerHeight==356){b.dom(i.BODY).style(e.HEIGHT,
416+e.PIXEL);h()}}}}}(Lungo);Lungo.Boot.Events=function(b){var g=b.Constants.ATTRIBUTE,a=b.Constants.CLASS,i=b.Constants.ELEMENT,e={HREF_TARGET:"a[href][data-router]",HREF_TARGET_FROM_ASIDE:"aside a[href][data-router]",INPUT_CHECKBOX:"input[type=range].checkbox"},h=function(f){f.preventDefault();f=b.dom(this);switch(f.data(g.ROUTER)){case i.SECTION:f=f.attr(g.HREF);j(f);break;case i.ARTICLE:var k=b.Router.History.current(),m=f.attr(g.HREF);b.Router.article(k,m,f);break;case i.ASIDE:k=b.Router.History.current();f=f.attr(g.HREF);
b.Router.aside(k,f)}},c=function(f){window.innerWidth<768&&b.View.Aside.hide();f&&f.preventDefault()},d=function(f){f.preventDefault();f=b.dom(this);var k=f.val()>0?0:1;f.toggleClass("active").attr("value",k)},j=function(f){c();f=b.Core.parseUrl(f);if(f==="#back")b.Router.back();else{var k=b.Element.Cache.aside;k&&k.hasClass(a.SHOW)?setTimeout(function(){b.Router.section(f)},250):b.Router.section(f)}};return{init:function(){b.dom(e.HREF_TARGET).tap(h);b.dom(e.HREF_TARGET_FROM_ASIDE).tap(c);b.dom(e.INPUT_CHECKBOX).touch(d)}}}(Lungo);Lungo.Boot.Data=function(b){var g=b.Constants.BINDING;return{init:function(){var a=b.Attributes.Data,i;for(i in a)if(b.Core.isOwnProperty(a,i))for(var e=a[i],h=b.dom(e.selector),c=0,d=h.length;c<d;c++){var j=b.dom(h[c]),f=e,k=j.data(f.tag);if(k){f=f.html.replace(g.START+g.KEY+g.END,k);j.prepend(f)}}}}}(Lungo);Lungo.Boot.Section=function(b){var g=b.Constants.ELEMENT,a=b.Constants.CLASS,i=b.Constants.ATTRIBUTE;return{init:function(){b.Element.Cache.sections=b.dom(g.SECTION);b.Element.Cache.asides=b.dom(g.ASIDE);b.Fallback.fixPositionInAndroid();var e=b.Element.Cache.sections.first();b.Element.Cache.section=e;b.Element.Cache.article=e.children(g.ARTICLE).first();var h="#"+e.attr(i.ID);e.addClass(a.CURRENT);b.Router.History.add(h);e=0;for(h=b.Element.Cache.sections.length;e<h;e++){var c=b.dom(b.Element.Cache.sections[e]),
d=c.children(g.ARTICLE).first();d.addClass(a.CURRENT);(d=d.attr(i.ID))&&b.View.Article.switchReferenceItems(d,c)}e=null;h=0;for(c=b.Element.Cache.asides.length;h<c;h++){e=b.dom(b.Element.Cache.asides[h]);e.children(g.ARTICLE).addClass(a.CURRENT)}}}}(Lungo);Lungo.Boot.Article=function(b){var g=b.Constants.ATTRIBUTE,a=b.Constants.ELEMENT,i={LIST_IN_ARTICLE:"article.list, aside.list",CHECKBOX_IN_ARTICLE:".checkbox",ARTICLE_SCROLLABLE:"article.scroll"},e=function(j,f){for(var k=b.dom(j),m=0,n=k.length;m<n;m++){var q=b.dom(k[m]);b.Core.execute(f,q)}},h=function(j){if(j.children().length===0){j.attr(g.ID);j.append(a.LIST)}},c=function(j){j.append(a.SPAN)},d=function(j){j[0].addEventListener("touchstart",function(){scrollTop=this.scrollTop;if(scrollTop<=1)this.scrollTop=
1;if(scrollTop+this.offsetHeight>=this.scrollHeight)this.scrollTop=this.scrollHeight-this.offsetHeight-1},false)};return{init:function(){e(i.LIST_IN_ARTICLE,h);e(i.CHECKBOX_IN_ARTICLE,c);e(i.ARTICLE_SCROLLABLE,d)}}}(Lungo);
