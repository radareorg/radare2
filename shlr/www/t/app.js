function _(e){return document.getElementById(e)}var html={text:function(e){var t=document.createElement("font");return e.innerHTML=e,t},input:function(e,t,r,i){var s=document.createElement("input");return s.id=e,s.value=t,s.focus(),s.onkeyup=function(e){13===e.keyCode?r(s.value):i&&i(s.value)},s},a:function(e,t){var r=document.createElement("a");return r.innerHTML=e,"string"==typeof t?r.href=t:(r.href="#",r.onclick=t),r},div:function(e,t,r){var i=document.createElement("div");if(e&&(i.id=e),t&&(i.className=t),r)for(var s in Object.keys(r))i.style[s]=r[s];return i}};function Tiled(e){var p=document.getElementById(e),h=this;this.modal=null,this.curframe=void 0,this.frames=[];var l=20,o=3,u=0;this.update_size=function(e,t){o=e||window.innerWidth,u=t||window.innerHeight},this.max_width=function(e){var t=this.curframe[1];for(t in this.frames)for(var r in this.frames[t])this.frames[t][r].mw=!1;this.curframe[0].mw=e},this.max_height=function(e){if(this.curframe){var t,r=this.curframe[1];for(t in this.frames[r]){this.frames[r][t].mh=!1}this.curframe[0].mh=e}},this.ctr2=0,this.tile=function(){if(this.modal){var e=0,t=o-o/20,r=u-(h=l);if((f=this.curframe[0])===this.modal)return f.obj.style.position="absolute",f.obj.style["z-index"]=1e3,f.obj.style.zIndex=100,f.style.zIndex=100,f.obj.style.top="10%",f.obj.style.bottom="20%",f.obj.style.left="20%",f.obj.style.right="20%",f.obj.style.backgroundColor="green",void(f.update&&f.update(f.obj));f.obj.style["z-index"]=0}if(this.maximize&&this.curframe){e=0,t=o,r=u-(h=l);return(f=this.curframe[0]).obj.style.position="absolute",f.obj.style.top=h,f.obj.style.left=e,f.obj.style.zIndex=99999+this.ctr2++,f.obj.style.width=t,f.obj.style.height=r,void(f.update&&f.update(f.obj))}var i,s=this.frames.length,e=0;for(i in this.frames){var a,n=this.frames[i].length,h=l,s=this.frames.length,m=function(e,t){if(e.frames[t])for(var r in e.frames[t]){var i=e.frames[t][r];if(i&&(i.mh||i.selected))return!0}return!1}(this,i),t=o/s,r=(u-l)/n;for(a in this.curframe&&1<this.frames.length&&(t=i===this.curframe[1]?o/2:o/2/(s-1)),this.frames[i]){var f=this.frames[i][a];r=m&&1<this.frames[i].length?f.selected?(u-l)/n*1.7:(u-1.7*(u-l)/n)/(n-1):(u-l)/n,r|=0,f.obj.style.position="absolute",f.obj.style.top=h,f.obj.style.left=e,f.obj.style.width=t,0===a&&(r-=22),f.obj.style.height=r,f.update&&f.update(f.obj),h+=r}e+=t}},this.num=0,this.defname=function(e){return e=e||"noname",this.num++,e+"_"+this.num},this.unselect_frames=function(){for(var e in this.frames)for(var t in this.frames[e]){this.frames[e][t].selected=!1}},this.move_frame=function(e){if(this.curframe){var t=this.curframe[1];switch(e){case"up":case"down":break;case"right":if(t===this.frames.length-1)return!1;var e=this.frames[t],t=this.frames.splice(t),r=t.splice(1).slice(1);e&&this.frames.push(e),0<t.length&&this.frames.push(t);for(var i=0;i<r.length;i++)this.frames.push(r[i]);this.tile()}}},this.other_frame=function(e){if(this.curframe)switch(e){case"up":var t=+this.curframe[1];0<(r=+this.curframe[2])&&(r--,i=this.frames[t][r],this.select_frame(i.name),this.curframe=[i,t,r],this.run());break;case"down":var r,t=+this.curframe[1];(r=+this.curframe[2])<=this.frames[t].length&&(r++,(i=this.frames[t][r])&&(this.select_frame(i.name),this.curframe=[i,t,r],this.run()));break;case"left":0<(t=+this.curframe[1])&&(t--,(i=this.frames[t][0])&&(this.select_frame(i.name),this.curframe=[i,t,0],this.run()));break;case"right":var i;(t=+this.curframe[1])>=this.frames.length-1&&(t=-1),t<this.frames.length&&(t++,(i=(i=this.frames[t])&&i[0])&&(this.select_frame(i.name),this.curframe=[i,t,0],this.run()))}},this.select_frame=function(e){var t,r=void 0;for(t in!e&&this.curframe&&(e=this.curframe[0].name),this.oldframe=this.curframe,this.frames)for(var i in this.frames[t]){var s=this.frames[t][i];s.name===e?(_("frame_"+s.name).style.backgroundColor="#2060b0",s.selected=!0,s.mw=!0,r=this.curframe=[s,t,i]):(_("frame_"+s.name).style.backgroundColor="#104080",s.mw=!1,s.selected=!1)}return this.tile(),r},this.new_modal=function(e,t,r,i){var s=html.div("modal_title","modal_title",{backgroundColor:"#c0c0c0",display:"inline",overflowX:"hidden"}),a=this;s.appendChild(html.a("[x] "+e,function(e){h.del_frame("modal"),p.removeChild(e),h.modal.style.visibility="hidden",a.modal=null,alert("nul")}));var n=html.div("modal","modal",{}),e=document.createElement("p");return"string"==typeof e?e.innerHTML=t:e.appendChild(t),n.appendChild(s),n.appendChild(e),p.appendChild(n),this.modal=n,this.modal=n,i&&i(h,n),n},this.new_frame=function(e,t,r,i,s){var a={};a.name=e=e||this.defname();var n=document.createElement("div");n.className="frame_title",n.id="frame_"+e;var h=document.createElement("div");h.style["overflow-x"]="hidden";var m=html.a("[x]",function(){f.del_frame(e)});h.appendChild(m);var f=this,l=html.a("[r]",function(){l.ival?(clearInterval(l.ival),l.ival=null,l.innerHTML="[r]"):(l.innerHTML="[R]",s&&(s(f,a),l.ival=setInterval(function(){s(f,a)},1e3)))});l.ival=null,h.appendChild(l);var o=html.a("[@]",function(){s&&s(f,a)});h.appendChild(o);var u=html.a(e);h.appendChild(u,function(){var e=prompt("title");u.innerHTML=e}),n.appendChild(h),"string"==typeof r&&(i=r,r=void 0),a.update=r,a.obj=document.createElement("div");var c,d;n.outerHTML;switch(a.obj.className="frame",a.obj.id=a.name,a.obj.appendChild(n),(m=document.createElement("p")).innerHTML=t,a.obj.appendChild(n),a.obj.appendChild(m),p.appendChild(a.obj),i){case"bottom":var v=this.curframe?this.curframe[1]:0;this.frames.push([a]),this.frames[v].push(this.frames.pop()[0]);break;case"right":i=this.curframe?this.curframe[1]:0,v=this.frames.slice(0,i+1),o=this.frames.slice(i+1);v.push([a]),this.frames=v.concat(o);break;default:this.frames.push([a])}return this.select_frame(e),s&&s(f,a),c=this,_("frame_"+(d=e)).onmouseup=function(){c.select_frame(d)||alert("Cant find frame for "+d)},a},this.update_all=function(){for(var e in this.frames)for(var t in this.frames[e])this.frames[e][t].refresh();this.modal&&(this.modal.tile(),this.modal.refresh()),this.run()},this.del_frame=function(e){var t=void 0;if(!e&&this.curframe&&(e=this.curframe[0].name),h.modal===this.curframe)return p.removeChild(h.modal),this.modal=null,void run();for(n in this.frames)for(var r in this.frames[n]){var i=this.frames[n][r];if(i.name===e){if(i!==this.curframe[0])return;if(this.curframe[0]!==this.oldframe[0])return;if(1<this.frames[n].length)for(var s=this.frames[n].splice(r).slice(1),a=0;a<s.length;a++)this.frames[n].push(s[a]);else for(s=this.frames.splice(n).slice(1),a=0;a<s.length;a++)this.frames.push(s[a]);if(p.removeChild(i.obj),!t)for(var n in this.frames)for(var r in this.frames[n]){t=this.frames[n][r];break}return this.select_frame(t),i}t=i.name}this.tile()},this.run=function(){this.update_size(),p.style.position="absolute",p.style.top=0,p.style.left=0,p.style.width=o,p.style.height=u,p.style.backgroundColor="#202020",this.tile()}}
function menuString(e,n){var i,r=[];for(i in e){var o=e[i].split(":")[0];0!=n.length&&-1==o.toLowerCase().indexOf(n.toLowerCase())||r.push(o)}return r}function menuCommand(e,n){for(var i in e){var r=e[i].split(":",2)[0];if(0==n.length||-1!=r.toLowerCase().indexOf(n.toLowerCase()))return e[i].split(":",2)[1]}return""}function menuRun(e){alert("MENURUN"),modalAssembler()}function modalMenu(){var n=["Analyze:aaa","Assembler:&Assembler","Classes:icc","Disassemble:pdf","Entropy:p=e 200","Flags:f","Flagspaces:fs","Eval:e","Summary:pds","Functions:afl","Graph:agf","Imports:ii","Info:iA;ie;im;i;o;it;iT","Libraries:il","Notes:&Notes","Packages:!r2pm -s","Installed:!r2pm -l","Raw Strings:izz","Relocs:ir","Sections:iS","Segments:iSS","Strings:iz","Symbols:is"],e=html.div("modal_body"),i=html.div("modal_output","",{overflow:"hidden",backgroundColor:"red",height:"100px",border:"10px solid red"}),r=html.input("input","",function(){var e=menuCommand(n,r.value);""==e||("&"===e[0]?menuRun(e):r2.cmd(e,function(e){e=e.replace(/\n/g,"<br/>"),i.innerHTML=r2.filter_asm(e,"pd")})),r.value=""},function(){var e=menuString(n,r.value);i.innerHTML=e.join("<br/>")});e.appendChild(r),i.style.overflow="scroll",i.style.height="100%",e.appendChild(i),e.input=r;var o=menuString(n,r.value);return i.innerHTML=o.join("<br/>"),e}function modalShell(){var e=html.div("modal_body"),i=html.div("modal_output","",{overflow:"hidden",backgroundColor:"red",height:"100px",border:"10px solid red"}),n=html.a("back",function(){r2.cmd("s-;s",function(e){r2ui.seek(e)})}),r=html.input("input","",function(){seekAction=function(e){r2.cmd(r.value,function(e){function n(e){e=r2.filter_asm(e,"pd");i.innerHTML=e}""===e?""!==promptCommand&&r2.cmd(promptCommand,n):(n(e),promptCommand=r.value),r.value=""})},seekAction()});return e.appendChild(n),e.appendChild(r),i.style.overflow="scroll",i.style.height="100%",e.appendChild(i),e.input=r,e}function modalAssembler(){var e=html.div("modal_body"),n=html.div("modal_output","",{overflow:"hidden",backgroundColor:"red",height:"100px",border:"10px solid red"}),i=html.input("input","",function(){r2.cmd('"pa '+i.value+'"',function(e){n.innerHTML=r2.filter_asm(e,"pd")})},function(){r2.cmd('"pa '+i.value+'"',function(e){n.innerHTML=r2.filter_asm(e,"pd")})});return e.appendChild(i),n.style.overflow="scroll",n.style.height="100%",e.appendChild(n),e.input=i,e}
var r2={},backward=!1,next_curoff=0,next_lastoff=0,prev_curoff=0,prev_lastoff=0,hascmd=!1,r2_root=self.location.pathname.split("/").slice(0,-2).join("/");function isFirefoxOS(){return"undefined"!=typeof locationbar&&!locationbar.visible&&-1<navigator.userAgent.indexOf("Firefox")&&-1<navigator.userAgent.indexOf("Mobile")&&"mozApps"in navigator}function asyncLoop(n,r,e){var t=0,o=!1,i={next:function(){o||(t<n?(t++,r(i)):(o=!0,e()))},iteration:function(){return t-1},break:function(){o=!0,e()}};return i.next(),i}r2.asyncMode="sync",r2.err=null,isFirefoxOS()?r2.root="http://cloud.radare.org":r2.root=r2_root,"undefined"!=typeof module&&(module.exports=function(n){return hascmd="function"==typeof n?n:n.cmd,r2}),r2.project_name="",r2.plugin=function(){console.error("r2.plugin is not available in this environment")};try{r2plugin&&(r2.plugin=r2plugin)}catch(n){}function dump(n){var r,e="";for(r in n)e+=r+"\n";alert(e)}function objtostr(n){var r,e="";for(r in n)e+=r+": "+n[r]+",\n";return e}r2.root=r2_root,r2.analAll=function(){r2.cmd("aa",function(){})},r2.analOp=function(n,e){r2.cmd("aoj 1 @ "+n,function(r){try{e(JSON.parse(r)[0])}catch(n){console.error(n),e(r)}})},r2.varMap=[];var ajax_in_process=!(r2.argMap=[]);function Ajax(n,r,e,t,o){if("undefined"==typeof XMLHttpRequest)return!1;if("fake"==r2.asyncMode)return t&&t("{}"),!0;if("sasync"==r2.asyncMode&&(console.log("async waiting"),ajax_in_process))return setTimeout(function(){Ajax(n,r,e,t)},100),!1;var i=void 0;if(!(i=isFirefoxOS()?new XMLHttpRequest({mozSystem:!0}):new XMLHttpRequest))return!1;ajax_in_process=!0,"sync"==r2.asyncMode?i.open(n,r,!1):i.open(n,r,!0),i.setRequestHeader("Accept","text/plain"),i.setRequestHeader("Content-Type","application/x-ww-form-urlencoded; charset=UTF-8"),i.onreadystatechange=function(){ajax_in_process=!1,200==i.status?t?t(i.responseText):console.error("missing ajax callback"):((o||r2.err)("connection refused"),console.error("ajax "+i.status))};try{i.send(e)}catch(n){"NetworkError"==n.name&&(o||r2.err)("connection error")}return!0}function _internal_cmd(n,r,e){if("undefined"!=typeof r2cmd&&(hascmd=r2cmd),hascmd)return"undefined"!=typeof r2plugin?r(r2cmd(n)):hascmd(n,r);Ajax("GET",r2.root+"/cmd/"+encodeURI(n),"",function(n){r&&r(n)},e)}r2.assemble=function(n,r,e){n=n?"@"+n:"";r2.cmd('"pa '+r+'"'+n,e)},r2.disassemble=function(n,r,e){n="pi @b:"+r+(n?"@"+n:"");r2.cmd(n,e)},r2.get_hexdump=function(n,r,e){r2.cmd("px "+r+"@"+n,e)},r2.get_disasm=function(n,r,e){r2.cmd("pD "+r+"@"+n,e)},r2.get_disasm_before=function(n,r,e){var t=[];r2.cmd("pdj -"+r+"@"+n+"|",function(n){t=JSON.parse(n)}),e(t)},r2.get_disasm_after=function(n,r,e){var t=[];r2.cmd("pdj "+r+"@"+n+"|",function(n){t=JSON.parse(n)}),e(t)},r2.get_disasm_before_after=function(n,r,e,t){var o=[],i=[];r2.cmd("pdj "+r+" @"+n+"|",function(n){o=JSON.parse(n)}),r2.cmd("pdj "+e+"@"+n+"|",function(n){i=JSON.parse(n)}),t(o.concat(i))},r2.Config=function(n,r,e){return"function"!=typeof r&&r?r2.cmd("e "+n+"="+r,e):r2.cmd("e "+n+"|",e||r),r2},r2.sections={},r2.load_mmap=function(){r2.cmdj("iSj|",function(n){null!=n&&(r2.sections=n)})},r2.get_address_type=function(n){var r,e=parseInt(n,16);for(r in r2.sections)if(e>=r2.sections[r].addr&&e<r2.sections[r].addr+r2.sections[r].size)return-1<r2.sections[r].flags.indexOf("x")?"instruction":"memory";return""},r2.settings={},r2.load_settings=function(){r2.cmd("e asm.arch",function(n){r2.settings["asm.arch"]=n.trim()}),r2.cmd("e asm.bits",function(n){r2.settings["asm.bits"]=n.trim()}),r2.cmd("e asm.bytes",function(n){r2.settings["asm.bytes"]=toBoolean(n.trim())}),r2.cmd("e asm.flags",function(n){r2.settings["asm.flags"]=toBoolean(n.trim())}),r2.cmd("e asm.offset",function(n){r2.settings["asm.offset"]=toBoolean(n.trim())}),r2.cmd("e asm.lines",function(n){r2.settings["asm.lines"]=toBoolean(n.trim())}),r2.cmd("e asm.xrefs",function(n){r2.settings["asm.xrefs"]=toBoolean(n.trim())}),r2.cmd("e asm.cmtright",function(n){r2.settings["asm.cmtright"]=toBoolean(n.trim())}),r2.cmd("e asm.pseudo",function(n){r2.settings["asm.pseudo"]=toBoolean(n.trim())})},r2.flags={},r2.update_flags=function(){r2.cmd("fs *;fj|",function(n){var r=JSON.parse(n);if(null!=r)for(var e in r2.flags={},r){var t,o="0x"+r[e].offset.toString(16);(o=address_canonicalize(o))in r2.flags?((t=r2.flags[o])[t.length]={name:r[e].name,size:r[e].size},r2.flags[o]=t):r2.flags[o]=[{name:r[e].name,size:r[e].size}]}})},r2.get_flag_address=function(n){for(var r in r2.flags)for(var e in r2.flags[r])if(n==r2.flags[r][e].name)return r;return null},r2.get_flag_names=function(n){var r,e=[];for(r in r2.flags[n])e[e.length]=r2.flags[n][r].name;return e},r2.set_flag_space=function(n,r){r2.cmd("fs "+n,r)},r2.get_flags=function(r){r2.cmd("fj|",function(n){r(n?JSON.parse(n):[])})},r2.get_opcodes=function(n,r,e){r2.cmd("pdj @"+n+"!"+r+"|",function(n){e(JSON.parse(n))})},r2.get_bytes=function(n,r,e){r2.cmd("pcj @"+n+"!"+r+"|",function(n){e(JSON.parse(n))})},r2.asm_config={},r2.store_asm_config=function(){config={},r2.cmd("e",function(n){for(var r in conf=n.split("\n"),conf){var e=conf[r].split(" ");3==e.length&&0==e[0].trim().indexOf("asm.")&&(config[e[0].trim()]=e[2].trim())}r2.asm_config=config})},r2.restore_asm_config=function(){for(var n in cmd="",r2.asm_config)cmd+="e "+n+"="+r2.asm_config[n]+";";r2.cmd(cmd,function(){})},r2.get_info=function(r){r2.cmd("ij|",function(n){r(JSON.parse(n))})},r2.bin_relocs=function(r){r2.cmd("irj|",function(n){r(JSON.parse(n))})},r2.bin_imports=function(r){r2.cmd("iij|",function(n){r(JSON.parse(n))})},r2.bin_symbols=function(r){r2.cmd("isj|",function(n){r(JSON.parse(n))})},r2.bin_sections=function(r){r2.cmd("iSj|",function(n){r(JSON.parse(n))})},r2.cmds=function(r,e){var t;0!=r.length&&(t=r[0],r=r.splice(1),r2.cmd(t,function n(){null!=t&&0!=r.length&&(t=r[0],r=r.splice(1),r2.cmd(t,n),e&&e())}))},r2.cmd=function(n,r,e){var t,o;Array.isArray(n)?(t=[],o=0,asyncLoop(n.length,function(r){_internal_cmd(n[o],function(n){o=r.iteration(),t[o]=n.replace(/\n$/,""),o++,r.next()},e)},function(){r(t)})):_internal_cmd(n,r,e)},r2.cmdj=function(n,r){r2.cmd(n,function(n){try{r(JSON.parse(n))}catch(n){r(null)}})},r2.alive=function(r){r2.cmd("b",function(n){n&&n.length(),r&&r(n)})},r2.getTextLogger=function(o){return"object"!=typeof o&&(o={}),o.last=0,o.events={},o.interval=null,r2.cmd("Tl",function(n){o.last=+n}),o.load=function(r){r2.cmd('"Tj '+(o.last+1)+'"',function(n){r&&r(JSON.parse(n))})},o.clear=function(n){r2.cmd("T-",n)},o.send=function(n,r){r2.cmd('"T '+n+'"',r)},o.refresh=function(t){o.load(function(n){for(var r=0;r<n.length;r++){var e=n[r];o.events.message({id:e[0],text:e[1]}),e[0]>o.last&&(o.last=e[0])}t&&t()})},o.autorefresh=function(r){r?o.interval=setTimeout(function n(){return o.refresh(function(){}),"Logs"===r2ui.selected_panel?setTimeout(n,1e3*r):console.log("Not in logs :("),!0},1e3*r):o.interval&&o.interval.stop()},o.on=function(n,r){return o.events[n]=r,o},o},r2.filter_asm=function(n,r){var e=backward?prev_curoff:next_curoff,t=backward?prev_lastoff:next_lastoff,o=n.split(/\n/g);r2.cmd("s",function(n){e=n});for(var i,a=o.length-1;0<a;a--){var c=o[a].match(/0x([a-fA-F0-9]+)/);if(c&&0<c.length){t=c[0].replace(/:/g,"");break}}if("afl"==r){for(var s="",a=0;a<o.length;a++){s+=(f=o[a].replace(/\ +/g," ").split(/ /g))[0]+"  "+f[3]+"\n"}n=s}else if("f"==r[0]){if("s"==r[1]){for(s="",a=0;a<o.length;a++){var f,u="*"==(f=o[a].replace(/\ +/g," ").split(/ /g))[1]?"*":" ",l=f[2]?f[2]:f[1];l&&(s+=f[0]+" "+u+" <a href=\"javascript:runcmd('fs "+l+"')\">"+l+"</a>\n")}n=s}}else if("i"==r[0]&&r[1]){for(s="",a=0;a<o.length;a++){for(var m=o[a].split(/ /g),d="",p="",g=0;g<m.length;g++){var _=m[g].split(/=/);"addr"==_[0]&&(p=_[1]),"name"==_[0]&&(d=_[1]),"string"==_[0]&&(d=_[1])}s+=p+"  "+d+"\n"}n=s}return("p"==(i=r)[0]&&"d"==i[1]||-1!=i.indexOf(";pd"))&&(n=n.replace(/(reloc|class|method|var|sym|fcn|str|imp|loc)\.([^:<(\\\/ \|)\->]+)/g,"<a href='javascript:r2ui.seek(\"$1.$2\")'>$1.$2</a>")),n=n.replace(/0x([a-zA-Z0-9]+)/g,"<a href='javascript:r2ui.seek(\"0x$1\")'>0x$1</a>"),backward?(prev_curoff=e,prev_lastoff=t):(next_curoff=e,next_lastoff=t,prev_curoff=prev_curoff||next_curoff),n};
function findPos(e){var t=0,n=0;if(e.offsetParent)for(n=e.offsetLeft,t=e.offsetTop;e.offsetParent;)n+=e.offsetLeft,t+=e.offsetTop,e=e.offsetParent;return[n,t]}var r2ui={},seekAction=function(e){return!1};r2ui.seek=function(e){r2.cmd("s "+e),seekAction&&seekAction(e)},window.onload=function(){var n="right",f=new Tiled("canvas"),o=0;function r(e){e=e||f,f.curframe&&(f.oldframe=f.curframe),e.del_frame(),e.run(),e.other_frame("right"),e.other_frame("left")}function e(){function e(){r2.cmdj("drj",function(c){r2.cmd("pxQ@rsp",function(i){r2.cmd("dbt",function(r){r2.cmd("dm",function(e){function n(e){return document.getElementById(e)}setTimeout(function(){function t(){f.update_all()}n("dbg-step").onclick=function(){r2.cmd("ds;.dr*",t())},n("dbg-over").onclick=function(){r2.cmd("dso;.dr*",t())},n("dbg-skip").onclick=function(){r2.cmd("dss;.dr*",t())},n("dbg-cont").onclick=function(){r2.cmd("dc;.dr*",t())},n("dbg-until").onclick=function(){var e=prompt("Until");e&&r2.cmd("dcu "+e+";.dr*",t())}},1);var t,o="";for(t in o+=" <a id='dbg-step' href='#'>[step]</a>",o+=" <a id='dbg-over' href='#'>[over]</a>",o+=" <a id='dbg-skip' href='#'>[skip]</a>",o+=" <a id='dbg-cont' href='#'>[cont]</a>",o+=" <a id='dbg-until' href='#'>[until]</a>",o+="<hr />Registers</hr>",o+="<table>",c){o+="<tr><td>"+t+"</td><td><a href=#>"+("0x"+(+c[t]).toString(16))+"</a></td></tr>"}o+="</table>",o+="<hr />Backtrace:<pre>"+r+"</pre>",o+="<hr />Stack:<pre>"+i+"</pre>",o+="<hr />Maps:<pre>"+e+"</pre>",document.getElementById(a+"_frame").innerHTML=o})})})})}var a="debug",o=f.defname(a);f.new_frame(o,"<h2>Debug</h2><div id='debug_frame' class='frame_body'></div>",function(e){var t,n=_(o+"_frame");n&&(n.style.offsetTop,t=findPos(n),n.style.height=e.offsetHeight-t[1]+20,n.style.width=e.style.width-t[0])},n,function(){try{e()}catch(e){}})}function t(){var c=f.defname("hexdump"),e="<div id='"+c+"_hexdump' class='frame_body'></div>";f.new_frame(c,e,function(e){var t,n=_(c+"code");n&&(n.style.offsetTop,t=findPos(n),n.style.height=e.offsetHeight-t[1]+20,n.style.width=e.style.width-t[0])},n,function(r,e){function i(e){e&&(r.offset=e);var t=r.offset||"0";r2.cmd("s=",function(e){e=r2.filter_asm(e,"pd"),seekbar=e,r2.cmd("pxa 1024+128 @ "+t,function(e){e=r2.filter_asm(e,"pd");var t=c+"_hexdump_hex_prev",n=c+"_hexdump_hex_next",o=c+"_hexdump_hex_goto";_(c+"_hexdump").innerHTML=seekbar+"<br /><center><a class=link href='#' id="+t+">[PREV]</a><a class=link href='#' id="+o+">[GOTO]</a><a class=link href='#' id="+n+">[NEXT]</a></center><pre>"+e+"</pre>",document.getElementById(t).onclick=function(){r2.cmd("s-512;s",function(e){r.offset=e.trim(),i(),r.refresh()})},document.getElementById(n).onclick=function(){r2.cmd("s+512;s",function(e){r.offset=e.trim(),i(),r.refresh()})},document.getElementById(o).onclick=function(){var e=prompt("Goto");e&&r2.cmd("?v "+e,function(e){r.offset=e||0,r.refresh()})}})})}(r=e).offset||r2.cmd("s",function(e){r.offset=e.trim()}),seekAction=i,r.offset?i():r2.cmd("?v entry0",function(e){r.offset=+e,i()})})}function i(){var c=f.defname("disas"),e="<div id='"+c+"_code' class='frame_body'></div>";f.new_frame(c,e,function(e){var t,n=_(c+"_code");n&&(n.style.offsetTop,t=findPos(n),n.style.height="100%",n.style.width=e.style.width-t[0])},n,function(r,e){r=r.curframe[0];var i="";(r=e).offset||r2.cmd("s",function(e){r.offset=e}),r2.cmd("s=",function(e){e=r2.filter_asm(e,"pd"),i=e});var t=r.offset||"entry0";seekAction=function(e){e&&(t=e,r.offset=t),r2.cmd("pd 200 @ "+t,function(e){e=r2.filter_asm(e,"pd");var t=c+"_code_prev",n=c+"_code_next",o=c+"_code_goto";_(c+"_code").innerHTML=i+"<br /><center><a class=link href='#' id="+t+">[PREV]</a><a class=link href='#' id="+o+">[GOTO]</a><a class=link href='#' id="+n+">[NEXT]</a></center><pre>"+e+"</pre>",document.getElementById(t).onclick=function(){r2.cmd("s-512;s",function(e){r.offset=e.trim(),r.refresh()})},document.getElementById(n).onclick=function(){r2.cmd("s+512;s",function(e){r.offset=e.trim(),r.refresh()})},document.getElementById(o).onclick=function(){var t=prompt("Goto");t&&r2.cmd("?v "+t,function(e){e&&(r.offset=t,r.refresh())})}})}}),seekAction(),r2.cmd("s",function(e){frame.offset=e.trim(),seekAction(),frame.refresh()})}function c(e){n=e;var t="<div id='div_"+ ++o+"'><a href='#' id='cmd_"+o+"'>cmd</a></div>";f.new_frame("window_"+o,t,e),f.run(),f.update=function(){r2.cmd(f.cmd,function(e){e=r2.filter_asm(e,"pd"),_(f.key).innerHTML="<div class='frame_body'><a href='#' id='cmd_"+o+"'>cmd</a><pre>"+e+"</pre></div>"})},_("cmd_"+o).onclick=function(){f.key="div_"+o,f.cmd=prompt(),f.update()}}r2.cmd("e scr.color=true;e scr.html=true",function(){f.update_all()}),document.onkeydown=function(e){if("key"in(e=e||window.event)?"Escape"===e.key||"Esc"===e.key:27===e.keyCode)f.modal?(f.modal.style.visibility="hidden",f.del_frame("modal"),delete f.modal,f.refresh(),f.run()):(t=modalMenu(),f.modal=f.new_modal("Menu",t,["items"]),t.input.focus());else if(!f.modal)switch(console.log(e.key),e.key){case"ArrowLeft":f.other_frame("left");break;case"ArrowDown":f.other_frame("down");break;case"ArrowUp":f.other_frame("up");break;case"ArrowRight":f.other_frame("right");break;case"h":f.other_frame("left");break;case"j":f.other_frame("down");break;case"k":f.other_frame("up");break;case"l":f.other_frame("right");break;case":":var t=modalShell();f.modal=f.new_modal("Shell",t,["items"]),t.input.focus();break;case"a":t=modalAssembler();f.modal=f.new_modal("Assembler",t,["items"]),t.input.focus();break;case 189:case"-":c("bottom");break;case 220:case 49:c("right");break;case"x":case 88:case 67:r(f)}},_("settings").onclick=function(){var o,e;o=f.defname("settings"),e="<div id='"+o+"_settings' class='frame_body'><input type=button value=RandomColors></div>",f.new_frame(o,e,function(e){var t,n=_(o+"_settings");n&&(n.style.offsetTop,t=findPos(n),n.style.height="100%",n.style.width=e.style.width-t[0])},n,function(){r2.cmd("e??",function(e){_(o+"_settings").innerHTML="<pre>"+e+"</pre>"})})},_("refresh").onclick=function(){f.update_all()},_("maximize").onclick=function(){f.maximize=!f.maximize,f.run()},_("open-hex").onclick=function(){t()},_("open-dis").onclick=function(){i()},_("open-fla").onclick=function(){var t,o;o=f.defname("flags"),f.new_frame(o,(t=o,setTimeout(function(){r2.cmd("fs *;f",function(e){document.getElementById(t+"_flags").innerHTML="<pre>"+e+"</pre>"})},1),"<h2>Flags</h2><div id='"+t+"_flags' class='frame_body'></div>"),function(e){var t,n=_(o+"_flags");n&&(n.style.offsetTop,t=findPos(n),n.style.height=e.offsetHeight-t[1]+20,n.style.width=e.style.width-t[0])},n)},_("open-dbg").onclick=function(){e()},_("open-hlp").onclick=function(){var e,o;o=f.defname("help"),f.new_frame(o,(e=o,setTimeout(function(){document.getElementById("randomcolors").onclick=function(){r2.cmd("ecr",function(){f.update_all()})}},1),"<h2>Help</h2><div id='"+e+"_help' style='background-color:#304050;overflow:scroll;height:100%'><pre>This is the new and experimental tiled webui for r2\n\nPress the 'alt' key and the following key:\n\n  hjkl - move left,down,up,right around\n  x    - spawn an hexdump\n  d    - spawn an disasfm\n  f    - spawn an flags panel\n  c    - close current frame\n  .    - toggle maximize mode\n  -    - horizontal split\n  |    - vertical split\n\n<input type='button' id='randomcolors' value='randomcolors'></input></div>"),function(e){var t,n=_(o+"_help");n&&(n.style.offsetTop,t=findPos(n),n.style.height=e.offsetHeight-t[1]+20,n.style.width=e.style.width-t[0])})},_("open-con").onclick=function(){var e,o;o=f.defname("console"),f.new_frame(o,'<div><input id="'+(e=o)+"_input\"></input></div><div id='"+e+"_output' class='frame_body'></div>",function(e){var t,n=_(o+"_console");n&&(n.style.offsetTop,t=findPos(n),n.style.height=e.offsetHeight-t[1]+20,n.style.width=e.style.width-t[0])},n,function(){var t=_(o+"_input");t.onkeyup=function(e){13===e.keyCode&&r2.cmd(t.value,function(e){_(o+"_output").innerHTML="<pre>"+e+"</pre>",t.value=""})}})},_("open-not").onclick=function(){var o,e;o=f.defname("notes"),e="<div id='"+o+"_notes' class='frame_body'><textarea style='width:100%;height:100%'></textarea></div>",f.new_frame(o,e,function(e){var t,n=_(o+"_notes");n&&(n.style.offsetTop,t=findPos(n),n.style.height=e.offsetHeight-t[1]+20,n.style.width=e.style.width-t[0])},n,function(){})},_("add-column").onclick=function(){c("right")},_("add-row").onclick=function(){o++,n="bottom",f.new_frame("window_"+o,"<div id='div_"+o+"'><a href='#' id='cmd_"+o+"'>cmd</a></div>","bottom"),f.run(),f.update=function(){r2.cmd(f.cmd,function(e){e=r2.filter_asm(e),_(f.key).innerHTML="<div class='frame_body'><pre>"+e+"</pre></div>"})},_("cmd_"+o).onclick=function(){f.key="div_"+o,f.cmd=prompt(),f.update()}},t(),i(),f.run(),window.onresize=function(){f.run()},document.t=f,_("body").onkeyup=function(e){if(!f.modal){String.fromCharCode(e.keyCode);if(e.altKey)switch(e.keyCode){case 67:r(f);break;case 189:case 173:c("bottom");break;case 220:case 49:c("right");break;case 190:f.maximize=!f.maximize,f.run();break;case 72:f.other_frame("left");break;case 74:f.other_frame("down");break;case 75:f.other_frame("up");break;case 76:f.other_frame("right");break;case":":promptCommand();break;case 88:case"X":t();break;case"x":r(f);break;case 68:case"d":i();break;case"i":r2.cmd("pi 2",function(e){alert(e)});break;case"!":r2.cmd(prompt("Command to execute"),function(e){alert(e)})}}}};