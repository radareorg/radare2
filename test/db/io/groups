NAME=omb banks
FILE=malloc://1024
CMDS=<<EOF
om
omg+ map 1
omg+ nomap
omg nomap
om
omg map
om
omg-*
omg -1
EOF
EXPECT=<<EOF
* 1 fd: 3 +0x00000000 0x00000000 - 0x000003ff rwx 
* 1 fd: 3 +0x00000000 0x00000000 - 0x000003ff rwx 
* 1 fd: 3 +0x00000000 0x00000000 - 0x000003ff rwx 
Usage: omg[jq,+] [fd]  Operate on map groups
| omg          list all memory banks
| omg [id]     switch to use a different bank
| omg+[name]   create a new bank with given name
| omga [id]    adds a map to the bank
| omgd [id]    deletes a map from the bank
| omg-*        delete all banks
| omg-[mapid]  delete the bank with given id
| omgg         associate all maps to the current bank
| omgq         show current bankid
EOF
RUN

NAME=omb+
FILE=malloc://1024
CMDS=<<EOF
omg+ one
omg+ two
omg
EOF
EXPECT=<<EOF
* 0 default [ 1 ]
- 1 one [ ]
- 2 two [ ]
EOF
RUN

NAME=omb name deletes them all (BUG)
BROKEN=1
FILE=malloc://1024
CMDS=<<EOF
omb+ one
omb
omb one
omb
EOF
EXPECT=<<EOF
1: one 

1: one 

EOF
RUN
