NAME=PEF entrypoint and libraries
FILE=bins/pef/vim-pef
CMDS=<<EOF
ie
?e ---
il
EOF
EXPECT=<<EOF
paddr      vaddr      phaddr     vhaddr     type
------------------------------------------------
0x00003400 0x00003400 0x00000084 0x00000084 program
---
InterfaceLib
MathLib
ContextualMenu
EOF
RUN

NAME=PEF imports
FILE=bins/pef/vim-pef
CMDS=<<EOF
ii
EOF
EXPECT=<<EOF
nth vaddr      bind type lib            name
--------------------------------------------
0   0x00000000 NONE NONE InterfaceLib   PenNormal
0   0x00000000 NONE NONE InterfaceLib   GetPort
0   0x00000000 NONE NONE InterfaceLib   GetAppFont
0   0x00000000 NONE NONE InterfaceLib   DisposeRoutineDescriptor
0   0x00000000 NONE NONE InterfaceLib   TEInsert
0   0x00000000 NONE NONE InterfaceLib   PBSetEOFSync
0   0x00000000 NONE NONE InterfaceLib   SizeWindow
0   0x00000000 NONE NONE InterfaceLib   TextFace
0   0x00000000 NONE NONE InterfaceLib   ZeroScrap
0   0x00000000 NONE NONE InterfaceLib   MoveWindow
0   0x00000000 NONE NONE InterfaceLib   DragWindow
0   0x00000000 NONE NONE InterfaceLib   PBHOpenRFSync
0   0x00000000 NONE NONE InterfaceLib   TETextBox
0   0x00000000 NONE NONE InterfaceLib   PBGetEOFSync
0   0x00000000 NONE NONE InterfaceLib   GetFNum
0   0x00000000 NONE NONE InterfaceLib   DisposeHandle
0   0x00000000 NONE NONE InterfaceLib   InsetRect
0   0x00000000 NONE NONE InterfaceLib   GetResInfo
0   0x00000000 NONE NONE InterfaceLib   DisableItem
0   0x00000000 NONE NONE InterfaceLib   InitGraf
0   0x00000000 NONE NONE InterfaceLib   GetControlReference
0   0x00000000 NONE NONE InterfaceLib   CloseWindow
0   0x00000000 NONE NONE InterfaceLib   LineTo
0   0x00000000 NONE NONE InterfaceLib   TextFont
0   0x00000000 NONE NONE InterfaceLib   SetItemCmd
0   0x00000000 NONE NONE InterfaceLib   EndUpdate
0   0x00000000 NONE NONE InterfaceLib   PBOpenRFSync
0   0x00000000 NONE NONE InterfaceLib   LMGetCurMap
0   0x00000000 NONE NONE InterfaceLib   MoveControl
0   0x00000000 NONE NONE InterfaceLib   DeleteMenuItem
0   0x00000000 NONE NONE InterfaceLib   AEPutParamPtr
0   0x00000000 NONE NONE InterfaceLib   ScrollRect
0   0x00000000 NONE NONE InterfaceLib   ModalDialog
0   0x00000000 NONE NONE InterfaceLib   HideControl
0   0x00000000 NONE NONE InterfaceLib   MaxApplZone
0   0x00000000 NONE NONE InterfaceLib   SystemClick
0   0x00000000 NONE NONE InterfaceLib   SetControlTitle
0   0x00000000 NONE NONE InterfaceLib   BeginUpdate
0   0x00000000 NONE NONE InterfaceLib   LMSetCurMap
0   0x00000000 NONE NONE InterfaceLib   DrawMenuBar
0   0x00000000 NONE NONE InterfaceLib   AppendDITL
0   0x00000000 NONE NONE InterfaceLib   InitFonts
0   0x00000000 NONE NONE InterfaceLib   PBSetFPosAsync
0   0x00000000 NONE NONE InterfaceLib   UpdateResFile
0   0x00000000 NONE NONE InterfaceLib   FindWindow
0   0x00000000 NONE NONE InterfaceLib   MenuSelect
0   0x00000000 NONE NONE InterfaceLib   ObscureCursor
0   0x00000000 NONE NONE InterfaceLib   GetDblTime
0   0x00000000 NONE NONE InterfaceLib   SysBeep
0   0x00000000 NONE NONE InterfaceLib   PenSize
0   0x00000000 NONE NONE InterfaceLib   InvalRect
0   0x00000000 NONE NONE InterfaceLib   TextMode
0   0x00000000 NONE NONE InterfaceLib   DisposeMenu
0   0x00000000 NONE NONE InterfaceLib   TENew
0   0x00000000 NONE NONE InterfaceLib   LMGetHiliteRGB
0   0x00000000 NONE NONE InterfaceLib   ShowControl
0   0x00000000 NONE NONE InterfaceLib   TEKey
0   0x00000000 NONE NONE InterfaceLib   TEClick
0   0x00000000 NONE NONE InterfaceLib   EventAvail
0   0x00000000 NONE NONE InterfaceLib   TEAutoView
0   0x00000000 NONE NONE InterfaceLib   WaitNextEvent
0   0x00000000 NONE NONE InterfaceLib   TECut
0   0x00000000 NONE NONE InterfaceLib   DrawText
0   0x00000000 NONE NONE InterfaceLib   SizeControl
0   0x00000000 NONE NONE InterfaceLib   KillControls
0   0x00000000 NONE NONE InterfaceLib   SFPutFile
0   0x00000000 NONE NONE InterfaceLib   AEGetParamPtr
0   0x00000000 NONE NONE InterfaceLib   PBOpenDFSync
0   0x00000000 NONE NONE InterfaceLib   TEInit
0   0x00000000 NONE NONE InterfaceLib   TEActivate
0   0x00000000 NONE NONE InterfaceLib   FlushEvents
0   0x00000000 NONE NONE InterfaceLib   GetDialogItem
0   0x00000000 NONE NONE InterfaceLib   NewMenu
0   0x00000000 NONE NONE InterfaceLib   FSpSetFInfo
0   0x00000000 NONE NONE InterfaceLib   InitDialogs
0   0x00000000 NONE NONE InterfaceLib   SetOutlinePreferred
0   0x00000000 NONE NONE InterfaceLib   PBHSetVolSync
0   0x00000000 NONE NONE InterfaceLib   PutScrap
0   0x00000000 NONE NONE InterfaceLib   FSpGetFInfo
0   0x00000000 NONE NONE InterfaceLib   StandardGetFile
0   0x00000000 NONE NONE InterfaceLib   PBReadSync
0   0x00000000 NONE NONE InterfaceLib   PBWriteSync
0   0x00000000 NONE NONE InterfaceLib   SetMenuItemText
0   0x00000000 NONE NONE InterfaceLib   ResError
0   0x00000000 NONE NONE InterfaceLib   PBHGetVolSync
0   0x00000000 NONE NONE InterfaceLib   CharWidth
0   0x00000000 NONE NONE InterfaceLib   AEPutParamDesc
0   0x00000000 NONE NONE InterfaceLib   PBHRenameSync
0   0x00000000 NONE NONE InterfaceLib   DeleteMenu
0   0x00000000 NONE NONE InterfaceLib   GetMouse
0   0x00000000 NONE NONE InterfaceLib   LoadScrap
0   0x00000000 NONE NONE InterfaceLib   GetClip
0   0x00000000 NONE NONE InterfaceLib   SetDialogItem
0   0x00000000 NONE NONE InterfaceLib   AppendResMenu
0   0x00000000 NONE NONE InterfaceLib   GetMenuItemText
0   0x00000000 NONE NONE InterfaceLib   InitMenus
0   0x00000000 NONE NONE InterfaceLib   TextSize
0   0x00000000 NONE NONE InterfaceLib   TEIdle
0   0x00000000 NONE NONE InterfaceLib   MoveTo
0   0x00000000 NONE NONE InterfaceLib   GetIndString
0   0x00000000 NONE NONE InterfaceLib   PBSetCatInfoSync
0   0x00000000 NONE NONE InterfaceLib   GetMenuHandle
0   0x00000000 NONE NONE InterfaceLib   ReleaseResource
0   0x00000000 NONE NONE InterfaceLib   MenuKey
0   0x00000000 NONE NONE InterfaceLib   NewHandle
0   0x00000000 NONE NONE InterfaceLib   PrClosePage
0   0x00000000 NONE NONE InterfaceLib   UseResFile
0   0x00000000 NONE NONE InterfaceLib   GetFontName
0   0x00000000 NONE NONE InterfaceLib   AESend
0   0x00000000 NONE NONE InterfaceLib   NewRgn
0   0x00000000 NONE NONE InterfaceLib   GetNextEvent
0   0x00000000 NONE NONE InterfaceLib   PlotIcon
0   0x00000000 NONE NONE InterfaceLib   GetMainDevice
0   0x00000000 NONE NONE InterfaceLib   LMSetTEScrpLength
0   0x00000000 NONE NONE InterfaceLib   HMGetHelpMenuHandle
0   0x00000000 NONE NONE InterfaceLib   PBGetFCBInfoSync
0   0x00000000 NONE NONE InterfaceLib   FSpCreateResFile
0   0x00000000 NONE NONE InterfaceLib   PBGetFPosSync
0   0x00000000 NONE NONE InterfaceLib   TEUpdate
0   0x00000000 NONE NONE InterfaceLib   Button
0   0x00000000 NONE NONE InterfaceLib   LMGetTEScrpLength
0   0x00000000 NONE NONE InterfaceLib   GetIcon
0   0x00000000 NONE NONE InterfaceLib   PBHOpenDFSync
0   0x00000000 NONE NONE InterfaceLib   GetFontInfo
0   0x00000000 NONE NONE InterfaceLib   InitWindows
0   0x00000000 NONE NONE InterfaceLib   ResolveAliasFile
0   0x00000000 NONE NONE InterfaceLib   FindControl
0   0x00000000 NONE NONE InterfaceLib   GetControlMinimum
0   0x00000000 NONE NONE InterfaceLib   MemError
0   0x00000000 NONE NONE InterfaceLib   Delay
0   0x00000000 NONE NONE InterfaceLib   AEGetParamDesc
0   0x00000000 NONE NONE InterfaceLib   PBCloseSync
0   0x00000000 NONE NONE InterfaceLib   AECountItems
0   0x00000000 NONE NONE InterfaceLib   GetDateTime
0   0x00000000 NONE NONE InterfaceLib   FrontWindow
0   0x00000000 NONE NONE InterfaceLib   TECopy
0   0x00000000 NONE NONE InterfaceLib   SetControlMaximum
0   0x00000000 NONE NONE InterfaceLib   NewPtr
0   0x00000000 NONE NONE InterfaceLib   AEPutPtr
0   0x00000000 NONE NONE InterfaceLib   PrOpenDoc
0   0x00000000 NONE NONE InterfaceLib   PrJobDialog
0   0x00000000 NONE NONE InterfaceLib   Alert
0   0x00000000 NONE NONE InterfaceLib   NewControl
0   0x00000000 NONE NONE InterfaceLib   AppendMenu
0   0x00000000 NONE NONE InterfaceLib   PBSetFPosSync
0   0x00000000 NONE NONE InterfaceLib   OffsetRect
0   0x00000000 NONE NONE InterfaceLib   SetDialogDefaultItem
0   0x00000000 NONE NONE InterfaceLib   GetControlMaximum
0   0x00000000 NONE NONE InterfaceLib   PBGetCatInfoSync
0   0x00000000 NONE NONE InterfaceLib   EqualString
0   0x00000000 NONE NONE InterfaceLib   SetPort
0   0x00000000 NONE NONE InterfaceLib   TEScrapHandle
0   0x00000000 NONE NONE InterfaceLib   PBHSetFInfoSync
0   0x00000000 NONE NONE InterfaceLib   GetScrap
0   0x00000000 NONE NONE InterfaceLib   ShowWindow
0   0x00000000 NONE NONE InterfaceLib   ClipRect
0   0x00000000 NONE NONE InterfaceLib   GrowWindow
0   0x00000000 NONE NONE InterfaceLib   AEDisposeDesc
0   0x00000000 NONE NONE InterfaceLib   Count1Types
0   0x00000000 NONE NONE InterfaceLib   NewCWindow
0   0x00000000 NONE NONE InterfaceLib   SetRect
0   0x00000000 NONE NONE InterfaceLib   NewRoutineDescriptor
0   0x00000000 NONE NONE InterfaceLib   GetResAttrs
0   0x00000000 NONE NONE InterfaceLib   PrOpenPage
0   0x00000000 NONE NONE InterfaceLib   SystemTask
0   0x00000000 NONE NONE InterfaceLib   AECreateList
0   0x00000000 NONE NONE InterfaceLib   TESetSelect
0   0x00000000 NONE NONE InterfaceLib   PBHCreateSync
0   0x00000000 NONE NONE InterfaceLib   GetCurrentProcess
0   0x00000000 NONE NONE InterfaceLib   InitCursor
0   0x00000000 NONE NONE InterfaceLib   AECreateAppleEvent
0   0x00000000 NONE NONE InterfaceLib   StringWidth
0   0x00000000 NONE NONE InterfaceLib   DetachResource
0   0x00000000 NONE NONE InterfaceLib   SetResAttrs
0   0x00000000 NONE NONE InterfaceLib   SetPreserveGlyph
0   0x00000000 NONE NONE InterfaceLib   InsertMenuItem
0   0x00000000 NONE NONE InterfaceLib   PrOpen
0   0x00000000 NONE NONE InterfaceLib   RGBBackColor
0   0x00000000 NONE NONE InterfaceLib   BlockMoveData
0   0x00000000 NONE NONE InterfaceLib   AECreateDesc
0   0x00000000 NONE NONE InterfaceLib   GetNewDialog
0   0x00000000 NONE NONE InterfaceLib   PBReadAsync
0   0x00000000 NONE NONE InterfaceLib   StandardPutFile
0   0x00000000 NONE NONE InterfaceLib   DisposeWindow
0   0x00000000 NONE NONE InterfaceLib   PaintRect
0   0x00000000 NONE NONE InterfaceLib   Get1IndType
0   0x00000000 NONE NONE InterfaceLib   PBHGetVInfoSync
0   0x00000000 NONE NONE InterfaceLib   GetToolTrapAddress
0   0x00000000 NONE NONE InterfaceLib   Gestalt
0   0x00000000 NONE NONE InterfaceLib   TEPaste
0   0x00000000 NONE NONE InterfaceLib   HiliteControl
0   0x00000000 NONE NONE InterfaceLib   ExitToShell
0   0x00000000 NONE NONE InterfaceLib   DisposeDialog
0   0x00000000 NONE NONE InterfaceLib   PrError
0   0x00000000 NONE NONE InterfaceLib   PtInRect
0   0x00000000 NONE NONE InterfaceLib   DIBadMount
0   0x00000000 NONE NONE InterfaceLib   CountMItems
0   0x00000000 NONE NONE InterfaceLib   AEGetNthPtr
0   0x00000000 NONE NONE InterfaceLib   PBDeleteSync
0   0x00000000 NONE NONE InterfaceLib   EraseRect
0   0x00000000 NONE NONE InterfaceLib   HLock
0   0x00000000 NONE NONE InterfaceLib   SetItemMark
0   0x00000000 NONE NONE InterfaceLib   DrawControls
0   0x00000000 NONE NONE InterfaceLib   HGetVol
0   0x00000000 NONE NONE InterfaceLib   PBFlushVolSync
0   0x00000000 NONE NONE InterfaceLib   FSpOpenResFile
0   0x00000000 NONE NONE InterfaceLib   Line
0   0x00000000 NONE NONE InterfaceLib   PrPicFile
0   0x00000000 NONE NONE InterfaceLib   DrawString
0   0x00000000 NONE NONE InterfaceLib   FrameRoundRect
0   0x00000000 NONE NONE InterfaceLib   MaxBlock
0   0x00000000 NONE NONE InterfaceLib   EnableItem
0   0x00000000 NONE NONE InterfaceLib   PBGetEOFAsync
0   0x00000000 NONE NONE InterfaceLib   TEScroll
0   0x00000000 NONE NONE InterfaceLib   LMGetCurDirStore
0   0x00000000 NONE NONE InterfaceLib   FSMakeFSSpec
0   0x00000000 NONE NONE InterfaceLib   TEDispose
0   0x00000000 NONE NONE InterfaceLib   Count1Resources
0   0x00000000 NONE NONE InterfaceLib   GetString
0   0x00000000 NONE NONE InterfaceLib   InvertRect
0   0x00000000 NONE NONE InterfaceLib   PrClose
0   0x00000000 NONE NONE InterfaceLib   StillDown
0   0x00000000 NONE NONE InterfaceLib   LMGetTime
0   0x00000000 NONE NONE InterfaceLib   OpenDeskAcc
0   0x00000000 NONE NONE InterfaceLib   SetDialogCancelItem
0   0x00000000 NONE NONE InterfaceLib   SetClip
0   0x00000000 NONE NONE InterfaceLib   PrCloseDoc
0   0x00000000 NONE NONE InterfaceLib   TECalText
0   0x00000000 NONE NONE InterfaceLib   CloseResFile
0   0x00000000 NONE NONE InterfaceLib   PBHDeleteSync
0   0x00000000 NONE NONE InterfaceLib   MoreMasters
0   0x00000000 NONE NONE InterfaceLib   HiliteMenu
0   0x00000000 NONE NONE InterfaceLib   TickCount
0   0x00000000 NONE NONE InterfaceLib   FrameRect
0   0x00000000 NONE NONE InterfaceLib   Get1IndResource
0   0x00000000 NONE NONE InterfaceLib   AEProcessAppleEvent
0   0x00000000 NONE NONE InterfaceLib   BitTst
0   0x00000000 NONE NONE InterfaceLib   GetProcessInformation
0   0x00000000 NONE NONE InterfaceLib   GetWTitle
0   0x00000000 NONE NONE InterfaceLib   PBSetEOFAsync
0   0x00000000 NONE NONE InterfaceLib   AEGetAttributePtr
0   0x00000000 NONE NONE InterfaceLib   SetWTitle
0   0x00000000 NONE NONE InterfaceLib   HUnlock
0   0x00000000 NONE NONE InterfaceLib   RGBForeColor
0   0x00000000 NONE NONE InterfaceLib   DisposePtr
0   0x00000000 NONE NONE InterfaceLib   SetControlValue
0   0x00000000 NONE NONE InterfaceLib   GetControlValue
0   0x00000000 NONE NONE InterfaceLib   WaitMouseUp
0   0x00000000 NONE NONE InterfaceLib   DisposeControl
0   0x00000000 NONE NONE InterfaceLib   NewWindow
0   0x00000000 NONE NONE InterfaceLib   TEDeactivate
0   0x00000000 NONE NONE InterfaceLib   DrawGrowIcon
0   0x00000000 NONE NONE InterfaceLib   SetControlMinimum
0   0x00000000 NONE NONE InterfaceLib   PBWriteAsync
0   0x00000000 NONE NONE InterfaceLib   GetGrayRgn
0   0x00000000 NONE NONE InterfaceLib   RectRgn
0   0x00000000 NONE NONE InterfaceLib   GetHandleSize
0   0x00000000 NONE NONE InterfaceLib   AddResource
0   0x00000000 NONE NONE InterfaceLib   GetResource
0   0x00000000 NONE NONE InterfaceLib   PrintDefault
0   0x00000000 NONE NONE InterfaceLib   GetNextProcess
0   0x00000000 NONE NONE InterfaceLib   TrackControl
0   0x00000000 NONE NONE InterfaceLib   AEInstallEventHandler
0   0x00000000 NONE NONE InterfaceLib   ValidRect
0   0x00000000 NONE NONE InterfaceLib   SelectWindow
0   0x00000000 NONE NONE InterfaceLib   SetDialogItemText
0   0x00000000 NONE NONE InterfaceLib   TEDelete
0   0x00000000 NONE NONE InterfaceLib   GetCursor
0   0x00000000 NONE NONE InterfaceLib   LMGetMBarHeight
0   0x00000000 NONE NONE InterfaceLib   DisposeRgn
0   0x00000000 NONE NONE InterfaceLib   SetHandleSize
0   0x00000000 NONE NONE InterfaceLib   GlobalToLocal
0   0x00000000 NONE NONE InterfaceLib   SetCursor
0   0x00000000 NONE NONE InterfaceLib   ParamText
0   0x00000000 NONE NONE InterfaceLib   PrStlDialog
0   0x00000000 NONE NONE InterfaceLib   WriteResource
0   0x00000000 NONE NONE InterfaceLib   InsertMenu
0   0x00000000 NONE NONE MathLib        PenNormal
0   0x00000000 NONE NONE MathLib        GetPort
0   0x00000000 NONE NONE ContextualMenu PenNormal
0   0x00000000 NONE NONE ContextualMenu GetPort
0   0x00000000 NONE NONE ContextualMenu GetAppFont
EOF
RUN

