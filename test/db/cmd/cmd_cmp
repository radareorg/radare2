NAME=cmp obj
FILE=bins/elf/ls
CMDS=<<EOF
pwd
o bins/elf/crackme
ob
cil
?e --
cis
?e --
cii
?e --
ob 0
cii 0
ob 1
cii 1
EOF
EXPECT=<<EOF
/Users/pancake/prg/radare2/test
- 0 3 x86-64 ba:0x00000000 sz:136038 bins/elf/ls
* 1 5 x86-64 ba:0x00400000 sz:7441 bins/elf/crackme
 libc.so.6
+libcap.so.2
--
 stdout
-stdin
-.interp
-.note.ABI-tag
-.note.gnu.build-id
-.hash
-.gnu.hash
-.dynsym
-.dynstr
-.gnu.version
-.gnu.version_r
-.rela.dyn
-.rela.plt
-.init
-.plt
-.text
-.fini
-.rodata
-.eh_frame_hdr
-.eh_frame
-.ctors
-.dtors
-.jcr
-.dynamic
-.got
-.got.plt
-.data
-.bss
-.comment
-call_gmon_start
-crtstuff.c
-__CTOR_LIST__
-__DTOR_LIST__
-__JCR_LIST__
-__do_global_dtors_aux
-completed.6341
-dtor_idx.6343
-frame_dummy
-crtstuff.c
-__CTOR_END__
-__FRAME_END__
-__JCR_END__
-__do_global_ctors_aux
-crackme.c
-_GLOBAL_OFFSET_TABLE_
-__init_array_end
-__init_array_start
-_DYNAMIC
-data_start
-__libc_csu_fini
-_start
-_fini
-_IO_stdin_used
-__data_start
-stdin@@GLIBC_2.2.5
-__dso_handle
-__DTOR_END__
-__libc_csu_init
 __bss_start
 _end
 _edata
-stdout@@GLIBC_2.2.5
-main
-_init
-printf
 __gmon_start__
-puts
 __libc_start_main
-fgets
 strcmp
 fflush
+stderr
+optarg
+__progname
+_obstack_begin
+optind
+program_invocation_short_name
+obstack_alloc_failed_handler
+_obstack_begin_1
+_obstack_allocated_p
+_obstack_memory_used
+_obstack_free
+_obstack_newchunk
+program_invocation_name
+__progname_full
+__ctype_toupper_loc
+getenv
+cap_to_text
+sigprocmask
+__snprintf_chk
+raise
+free
+abort
+__errno_location
+strncmp
+_ITM_deregisterTMCloneTable
+localtime_r
+_exit
+strcpy
+__fpending
+isatty
+sigaction
+iswcntrl
+wcswidth
+localeconv
+mbstowcs
+readlink
+clock_gettime
+setenv
+textdomain
+fclose
+opendir
+getpwuid
+bindtextdomain
+dcgettext
+__ctype_get_mb_cur_max
+strlen
+__lxstat
+__stack_chk_fail
+getopt_long
+mbrtowc
+strchr
+getgrgid
+__fxstatat
+snprintf
+__overflow
+strrchr
+gmtime_r
+lseek
+gettimeofday
+__assert_fail
+__strtoul_internal
+fnmatch
+memset
+ioctl
+getcwd
+strspn
+closedir
+memcmp
+_setjmp
+fputs_unlocked
+calloc
+signal
+dirfd
+getpwnam
+__memcpy_chk
+sigemptyset
+memcpy
+getgrnam
+tzset
+fileno
+tcgetpgrp
+__xstat
+readdir
+wcwidth
+malloc
+nl_langinfo
+__fxstat
+strcoll
+mktime
+__freading
+fwrite_unlocked
+realloc
+stpncpy
+setlocale
+__printf_chk
+timegm
+strftime
+mempcpy
+memmove
+error
+fseeko
+cap_get_file
+unsetenv
+cap_free
+strtoul
+__cxa_atexit
+wcstombs
+getxattr
+gethostname
+sigismember
+exit
+fwrite
+__fprintf_chk
+_ITM_registerTMCloneTable
+fflush_unlocked
+mbsinit
+iswprint
+__cxa_finalize
+sigaddset
+__ctype_tolower_loc
+__ctype_b_loc
+__sprintf_chk
--
-printf
 __gmon_start__
-puts
 __libc_start_main
-fgets
 strcmp
 fflush
+__ctype_toupper_loc
+getenv
+cap_to_text
+sigprocmask
+__snprintf_chk
+raise
+free
+abort
+__errno_location
+strncmp
+_ITM_deregisterTMCloneTable
+localtime_r
+_exit
+strcpy
+__fpending
+isatty
+sigaction
+iswcntrl
+wcswidth
+localeconv
+mbstowcs
+readlink
+clock_gettime
+setenv
+textdomain
+fclose
+opendir
+getpwuid
+bindtextdomain
+dcgettext
+__ctype_get_mb_cur_max
+strlen
+__lxstat
+__stack_chk_fail
+getopt_long
+mbrtowc
+strchr
+getgrgid
+__fxstatat
+snprintf
+__overflow
+strrchr
+gmtime_r
+lseek
+gettimeofday
+__assert_fail
+__strtoul_internal
+fnmatch
+memset
+ioctl
+getcwd
+strspn
+closedir
+memcmp
+_setjmp
+fputs_unlocked
+calloc
+signal
+dirfd
+getpwnam
+__memcpy_chk
+sigemptyset
+memcpy
+getgrnam
+tzset
+fileno
+tcgetpgrp
+__xstat
+readdir
+wcwidth
+malloc
+nl_langinfo
+__fxstat
+strcoll
+mktime
+__freading
+fwrite_unlocked
+realloc
+stpncpy
+setlocale
+__printf_chk
+timegm
+strftime
+mempcpy
+memmove
+error
+fseeko
+cap_get_file
+unsetenv
+cap_free
+strtoul
+__cxa_atexit
+wcstombs
+getxattr
+gethostname
+sigismember
+exit
+fwrite
+__fprintf_chk
+_ITM_registerTMCloneTable
+fflush_unlocked
+mbsinit
+iswprint
+__cxa_finalize
+sigaddset
+__ctype_tolower_loc
+__ctype_b_loc
+__sprintf_chk
--
EOF
RUN

