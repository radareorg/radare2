NAME=rafs2 -l
FILE=--
CMDS=<<EOF
!!rafs2 -t apfs -l / bins/fs/apfs.img
echo --
!!rafs2 -t apfs -l /bin bins/fs/apfs.img
EOF
EXPECT=<<EOF
d          0  .fseventsd
r         70  README
d          0  bin
r         12  hello.txt
--
r     154624  ls
EOF
RUN

NAME=md apfs mounts
FILE=bins/fs/apfs.img
CMDS=<<EOF
mn
echo ---
md /root
echo ---
md /root/bin
EOF
EXPECT=<<EOF
Type: APFS (Apple File System)
Block Size: 4096 bytes
Volume Name: untitled
Purpose: Apple's modern filesystem for macOS, iOS, etc.
---
d .fseventsd
r README
d bin
r hello.txt
---
r ls
EOF
RUN

NAME=md apfs cat
FILE=bins/fs/apfs.img
CMDS=<<EOF
mc /root/hello.txt
EOF
EXPECT=<<EOF
hello world

EOF
RUN
